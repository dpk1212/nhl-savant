const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SplashScreen-BB_1FX2D.js","assets/vendor--6VOWcEn.js","assets/utils-CpJM9g8Q.js","assets/charts-BzjXO9lR.js"])))=>i.map(i=>d[i]);
import{a as uI,c as dI,g as hI,r as H,u as XS,L as Nc,d as QS,H as fI,e as mI,f as Ra}from"./vendor--6VOWcEn.js";import{r as gI}from"./utils-CpJM9g8Q.js";import{R as pI,L as yI,C as vI,X as xI,Y as bI,T as TI,a as Pb}from"./charts-BzjXO9lR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Hg={exports:{}},Rc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function SI(){if(Mb)return Rc;Mb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Rc.Fragment=e,Rc.jsx=t,Rc.jsxs=t,Rc}var Ob;function _I(){return Ob||(Ob=1,Hg.exports=SI()),Hg.exports}var u=_I(),Wg={exports:{}},Ic={},qg={exports:{}},Kg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function AI(){return Nb||(Nb=1,(function(n){function e(G,U){var J=G.length;G.push(U);e:for(;0<J;){var oe=J-1>>>1,fe=G[oe];if(0<a(fe,U))G[oe]=U,G[J]=fe,J=oe;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var U=G[0],J=G.pop();if(J!==U){G[0]=J;e:for(var oe=0,fe=G.length,pe=fe>>>1;oe<pe;){var Ee=2*(oe+1)-1,Te=G[Ee],De=Ee+1,Qe=G[De];if(0>a(Te,J))De<fe&&0>a(Qe,Te)?(G[oe]=Qe,G[De]=J,oe=De):(G[oe]=Te,G[Ee]=J,oe=Ee);else if(De<fe&&0>a(Qe,J))G[oe]=Qe,G[De]=J,oe=De;else break e}}return U}function a(G,U){var J=G.sortIndex-U.sortIndex;return J!==0?J:G.id-U.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],g=[],v=1,b=null,x=3,_=!1,w=!1,E=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function ne(G){for(var U=t(g);U!==null;){if(U.callback===null)i(g);else if(U.startTime<=G)i(g),U.sortIndex=U.expirationTime,e(f,U);else break;U=t(g)}}function W(G){if(E=!1,ne(G),!w)if(t(f)!==null)w=!0,q||(q=!0,z());else{var U=t(g);U!==null&&le(W,U.startTime-G)}}var q=!1,D=-1,I=5,C=-1;function F(){return P?!0:!(n.unstable_now()-C<I)}function k(){if(P=!1,q){var G=n.unstable_now();C=G;var U=!0;try{e:{w=!1,E&&(E=!1,V(D),D=-1),_=!0;var J=x;try{t:{for(ne(G),b=t(f);b!==null&&!(b.expirationTime>G&&F());){var oe=b.callback;if(typeof oe=="function"){b.callback=null,x=b.priorityLevel;var fe=oe(b.expirationTime<=G);if(G=n.unstable_now(),typeof fe=="function"){b.callback=fe,ne(G),U=!0;break t}b===t(f)&&i(f),ne(G)}else i(f);b=t(f)}if(b!==null)U=!0;else{var pe=t(g);pe!==null&&le(W,pe.startTime-G),U=!1}}break e}finally{b=null,x=J,_=!1}U=void 0}}finally{U?z():q=!1}}}var z;if(typeof L=="function")z=function(){L(k)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,X=O.port2;O.port1.onmessage=k,z=function(){X.postMessage(null)}}else z=function(){N(k,0)};function le(G,U){D=N(function(){G(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(G){switch(x){case 1:case 2:case 3:var U=3;break;default:U=x}var J=x;x=U;try{return G()}finally{x=J}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(G,U){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=x;x=G;try{return U()}finally{x=J}},n.unstable_scheduleCallback=function(G,U,J){var oe=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?oe+J:oe):J=oe,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=J+fe,G={id:v++,callback:U,priorityLevel:G,startTime:J,expirationTime:fe,sortIndex:-1},J>oe?(G.sortIndex=J,e(g,G),t(f)===null&&G===t(g)&&(E?(V(D),D=-1):E=!0,le(W,J-oe))):(G.sortIndex=fe,e(f,G),w||_||(w=!0,q||(q=!0,z()))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var U=x;return function(){var J=x;x=U;try{return G.apply(this,arguments)}finally{x=J}}}})(Kg)),Kg}var Vb;function wI(){return Vb||(Vb=1,qg.exports=AI()),qg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function EI(){if(Fb)return Ic;Fb=1;var n=wI(),e=uI(),t=dI();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function g(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,d=s;;){var p=o.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){o=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===o)return f(p),r;if(y===d)return f(p),s;y=y.sibling}throw Error(i(188))}if(o.return!==d.return)o=p,d=y;else{for(var S=!1,R=p.child;R;){if(R===o){S=!0,o=p,d=y;break}if(R===d){S=!0,d=p,o=y;break}R=R.sibling}if(!S){for(R=y.child;R;){if(R===o){S=!0,o=y,d=p;break}if(R===d){S=!0,d=y,o=p;break}R=R.sibling}if(!S)throw Error(i(189))}}if(o.alternate!==d)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function v(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=v(r),s!==null)return s;r=r.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),L=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=k&&r[k]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function X(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case N:return"Profiler";case P:return"StrictMode";case W:return"Suspense";case q:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case L:return r.displayName||"Context";case V:return(r._context.displayName||"Context")+".Consumer";case ne:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return s=r.displayName||null,s!==null?s:X(r.type)||"Memo";case I:s=r._payload,r=r._init;try{return X(r(s))}catch{}}return null}var le=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},oe=[],fe=-1;function pe(r){return{current:r}}function Ee(r){0>fe||(r.current=oe[fe],oe[fe]=null,fe--)}function Te(r,s){fe++,oe[fe]=r.current,r.current=s}var De=pe(null),Qe=pe(null),tt=pe(null),Xt=pe(null);function Se(r,s){switch(Te(tt,s),Te(Qe,r),Te(De,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?nb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=nb(s),r=ib(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Ee(De),Te(De,r)}function bn(){Ee(De),Ee(Qe),Ee(tt)}function Wn(r){r.memoizedState!==null&&Te(Xt,r);var s=De.current,o=ib(s,r.type);s!==o&&(Te(Qe,r),Te(De,o))}function yt(r){Qe.current===r&&(Ee(De),Ee(Qe)),Xt.current===r&&(Ee(Xt),_c._currentValue=J)}var fn,hi;function Tn(r){if(fn===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);fn=s&&s[1]||"",hi=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fn+r+hi}var _e=!1;function Mi(r,s){if(!r||_e)return"";_e=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ie){var ee=ie}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(ie){ee=ie}r.call(ce.prototype)}}else{try{throw Error()}catch(ie){ee=ie}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ie){if(ie&&ee&&typeof ie.stack=="string")return[ie.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),S=y[0],R=y[1];if(S&&R){var B=S.split(`
`),Z=R.split(`
`);for(p=d=0;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;for(;p<Z.length&&!Z[p].includes("DetermineComponentFrameRoot");)p++;if(d===B.length||p===Z.length)for(d=B.length-1,p=Z.length-1;1<=d&&0<=p&&B[d]!==Z[p];)p--;for(;1<=d&&0<=p;d--,p--)if(B[d]!==Z[p]){if(d!==1||p!==1)do if(d--,p--,0>p||B[d]!==Z[p]){var re=`
`+B[d].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=d&&0<=p);break}}}finally{_e=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Tn(o):""}function Oi(r,s){switch(r.tag){case 26:case 27:case 5:return Tn(r.type);case 16:return Tn("Lazy");case 13:return r.child!==s&&s!==null?Tn("Suspense Fallback"):Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return Mi(r.type,!1);case 11:return Mi(r.type.render,!1);case 1:return Mi(r.type,!0);case 31:return Tn("Activity");default:return""}}function wl(r){try{var s="",o=null;do s+=Oi(r,o),o=r,r=r.return;while(r);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var It=Object.prototype.hasOwnProperty,zt=n.unstable_scheduleCallback,Hr=n.unstable_cancelCallback,qf=n.unstable_shouldYield,Du=n.unstable_requestPaint,mn=n.unstable_now,Zs=n.unstable_getCurrentPriorityLevel,El=n.unstable_ImmediatePriority,Rl=n.unstable_UserBlockingPriority,Wr=n.unstable_NormalPriority,Kf=n.unstable_LowPriority,ku=n.unstable_IdlePriority,Pu=n.log,Mu=n.unstable_setDisableYieldValue,fi=null,Qt=null;function qn(r){if(typeof Pu=="function"&&Mu(r),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(fi,r)}catch{}}var St=Math.clz32?Math.clz32:Nu,Ou=Math.log,Qa=Math.LN2;function Nu(r){return r>>>=0,r===0?32:31-(Ou(r)/Qa|0)|0}var Ni=256,Js=262144,Ct=4194304;function Vi(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Fi(r,s,o){var d=r.pendingLanes;if(d===0)return 0;var p=0,y=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var R=d&134217727;return R!==0?(d=R&~y,d!==0?p=Vi(d):(S&=R,S!==0?p=Vi(S):o||(o=R&~r,o!==0&&(p=Vi(o))))):(R=d&~y,R!==0?p=Vi(R):S!==0?p=Vi(S):o||(o=d&~r,o!==0&&(p=Vi(o)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:p}function mi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Yf(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vu(){var r=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),r}function Li(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ea(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Xf(r,s,o,d,p,y){var S=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,B=r.expirationTimes,Z=r.hiddenUpdates;for(o=S&~o;0<o;){var re=31-St(o),ce=1<<re;R[re]=0,B[re]=-1;var ee=Z[re];if(ee!==null)for(Z[re]=null,re=0;re<ee.length;re++){var ie=ee[re];ie!==null&&(ie.lane&=-536870913)}o&=~ce}d!==0&&ta(r,d,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(S&~s))}function ta(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var d=31-St(s);r.entangledLanes|=s,r.entanglements[d]=r.entanglements[d]|1073741824|o&261930}function Il(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var d=31-St(o),p=1<<d;p&s|r[d]&s&&(r[d]|=s),o&=~p}}function Cl(r,s){var o=s&-s;return o=(o&42)!==0?1:na(o),(o&(r.suspendedLanes|s))!==0?0:o}function na(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function fr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Fu(){var r=U.p;return r!==0?r:(r=window.event,r===void 0?32:Eb(r.type))}function gi(r,s){var o=U.p;try{return U.p=r,s()}finally{U.p=o}}var pi=Math.random().toString(36).slice(2),jt="__reactFiber$"+pi,$t="__reactProps$"+pi,Bi="__reactContainer$"+pi,Za="__reactEvents$"+pi,Qf="__reactListeners$"+pi,Lu="__reactHandles$"+pi,Bu="__reactResources$"+pi,zi="__reactMarker$"+pi;function Ja(r){delete r[jt],delete r[$t],delete r[Za],delete r[Qf],delete r[Lu]}function Ui(r){var s=r[jt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Bi]||o[jt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=ub(r);r!==null;){if(o=r[jt])return o;r=ub(r)}return s}r=o,o=r.parentNode}return null}function Kn(r){if(r=r[jt]||r[Bi]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Pn(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Gi(r){var s=r[Bu];return s||(s=r[Bu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Dt(r){r[zi]=!0}var jl=new Set,Dl={};function $i(r,s){Hi(r,s),Hi(r+"Capture",s)}function Hi(r,s){for(Dl[r]=s,r=0;r<s.length;r++)jl.add(s[r])}var kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pl={},Ml={};function zu(r){return It.call(Ml,r)?!0:It.call(Pl,r)?!1:kl.test(r)?Ml[r]=!0:(Pl[r]=!0,!1)}function eo(r,s,o){if(zu(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Mn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function kt(r,s,o,d){if(d===null)r.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+d)}}function Ht(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qr(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ol(r,s,o){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var p=d.get,y=d.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(S){o=""+S,y.call(this,S)}}),Object.defineProperty(r,s,{enumerable:d.enumerable}),{getValue:function(){return o},setValue:function(S){o=""+S},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ze(r){if(!r._valueTracker){var s=qr(r)?"checked":"value";r._valueTracker=Ol(r,s,""+r[s])}}function ia(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),d="";return r&&(d=qr(r)?r.checked?"true":"false":r.value),r=d,r!==o?(s.setValue(r),!0):!1}function Wi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ra=/[\n"\\]/g;function Sn(r){return r.replace(ra,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function to(r,s,o,d,p,y,S,R){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),s!=null?S==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ht(s)):r.value!==""+Ht(s)&&(r.value=""+Ht(s)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),s!=null?Nl(r,S,Ht(s)):o!=null?Nl(r,S,Ht(o)):d!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+Ht(R):r.removeAttribute("name")}function Uu(r,s,o,d,p,y,S,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){Ze(r);return}o=o!=null?""+Ht(o):"",s=s!=null?""+Ht(s):o,R||s===r.value||(r.value=s),r.defaultValue=s}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=R?r.checked:!!d,r.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),Ze(r)}function Nl(r,s,o){s==="number"&&Wi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Kr(r,s,o,d){if(r=r.options,s){s={};for(var p=0;p<o.length;p++)s["$"+o[p]]=!0;for(o=0;o<r.length;o++)p=s.hasOwnProperty("$"+r[o].value),r[o].selected!==p&&(r[o].selected=p),p&&d&&(r[o].defaultSelected=!0)}else{for(o=""+Ht(o),s=null,p=0;p<r.length;p++){if(r[p].value===o){r[p].selected=!0,d&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function Gu(r,s,o){if(s!=null&&(s=""+Ht(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Ht(o):""}function Yr(r,s,o,d){if(s==null){if(d!=null){if(o!=null)throw Error(i(92));if(le(d)){if(1<d.length)throw Error(i(93));d=d[0]}o=d}o==null&&(o=""),s=o}o=Ht(s),r.defaultValue=o,d=r.textContent,d===o&&d!==""&&d!==null&&(r.value=d),Ze(r)}function _n(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var $u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(r,s,o){var d=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":d?r.setProperty(s,o):typeof o!="number"||o===0||$u.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Fl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var p in s)d=s[p],s.hasOwnProperty(p)&&o[p]!==d&&Vl(r,p,d)}else for(var y in s)s.hasOwnProperty(y)&&Vl(r,y,s[y])}function no(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(r){return Xr.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function yi(){}var Ll=null;function Yn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Qr=null,qi=null;function sa(r){var s=Kn(r);if(s&&(r=s.stateNode)){var o=r[$t]||null;e:switch(r=s.stateNode,s.type){case"input":if(to(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Sn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var d=o[s];if(d!==r&&d.form===r.form){var p=d[$t]||null;if(!p)throw Error(i(90));to(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<o.length;s++)d=o[s],d.form===r.form&&ia(d)}break e;case"textarea":Gu(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Kr(r,!!o.multiple,s,!1)}}}var ro=!1;function Zr(r,s,o){if(ro)return r(s,o);ro=!0;try{var d=r(s);return d}finally{if(ro=!1,(Qr!==null||qi!==null)&&(Fd(),Qr&&(s=Qr,r=qi,qi=Qr=null,sa(s),r)))for(s=0;s<r.length;s++)sa(r[s])}}function vi(r,s){var o=r.stateNode;if(o===null)return null;var d=o[$t]||null;if(d===null)return null;o=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aa=!1;if(Xn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){aa=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{aa=!1}var Ki=null,Bl=null,oa=null;function zl(){if(oa)return oa;var r,s=Bl,o=s.length,d,p="value"in Ki?Ki.value:Ki.textContent,y=p.length;for(r=0;r<o&&s[r]===p[r];r++);var S=o-r;for(d=1;d<=S&&s[o-d]===p[y-d];d++);return oa=p.slice(r,1<d?1-d:void 0)}function la(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function mr(){return!0}function xi(){return!1}function Zt(r){function s(o,d,p,y,S){this._reactName=o,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?mr:xi,this.isPropagationStopped=xi,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),s}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yi=Zt(gr),Jr=b({},gr,{view:0,detail:0}),Ul=Zt(Jr),es,so,Xi,ao=b({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Xi&&(Xi&&r.type==="mousemove"?(es=r.screenX-Xi.screenX,so=r.screenY-Xi.screenY):so=es=0,Xi=r),es)},movementY:function(r){return"movementY"in r?r.movementY:so}}),Gl=Zt(ao),ca=b({},ao,{dataTransfer:0}),Wu=Zt(ca),qu=b({},Jr,{relatedTarget:0}),ua=Zt(qu),$l=b({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ku=Zt($l),oo=b({},gr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Yu=Zt(oo),Xu=b({},gr,{data:0}),Qi=Zt(Xu),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ed(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Ju[r])?!!s[r]:!1}function ts(){return ed}var gn=b({},Jr,{key:function(r){if(r.key){var s=Qu[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=la(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Zu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(r){return r.type==="keypress"?la(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?la(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),td=Zt(gn),nd=b({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pr=Zt(nd),m=b({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),T=Zt(m),A=b({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=Zt(A),Y=b({},ao,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),te=Zt(Y),de=b({},gr,{newState:0,oldState:0}),ke=Zt(de),_t=[9,13,27,32],Ye=Xn&&"CompositionEvent"in window,dt=null;Xn&&"documentMode"in document&&(dt=document.documentMode);var Qn=Xn&&"TextEvent"in window&&!dt,Zi=Xn&&(!Ye||dt&&8<dt&&11>=dt),bi=" ",Ti=!1;function da(r,s){switch(r){case"keyup":return _t.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var co=!1;function ME(r,s){switch(r){case"compositionend":return lo(s);case"keypress":return s.which!==32?null:(Ti=!0,bi);case"textInput":return r=s.data,r===bi&&Ti?null:r;default:return null}}function OE(r,s){if(co)return r==="compositionend"||!Ye&&da(r,s)?(r=zl(),oa=Bl=Ki=null,co=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Zi&&s.locale!=="ko"?null:s.data;default:return null}}var NE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f1(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!NE[r.type]:s==="textarea"}function m1(r,s,o,d){Qr?qi?qi.push(d):qi=[d]:Qr=d,s=Hd(s,"onChange"),0<s.length&&(o=new Yi("onChange","change",null,o,d),r.push({event:o,listeners:s}))}var Hl=null,Wl=null;function VE(r){Xx(r,0)}function id(r){var s=Pn(r);if(ia(s))return r}function g1(r,s){if(r==="change")return s}var p1=!1;if(Xn){var Zf;if(Xn){var Jf="oninput"in document;if(!Jf){var y1=document.createElement("div");y1.setAttribute("oninput","return;"),Jf=typeof y1.oninput=="function"}Zf=Jf}else Zf=!1;p1=Zf&&(!document.documentMode||9<document.documentMode)}function v1(){Hl&&(Hl.detachEvent("onpropertychange",x1),Wl=Hl=null)}function x1(r){if(r.propertyName==="value"&&id(Wl)){var s=[];m1(s,Wl,r,Yn(r)),Zr(VE,s)}}function FE(r,s,o){r==="focusin"?(v1(),Hl=s,Wl=o,Hl.attachEvent("onpropertychange",x1)):r==="focusout"&&v1()}function LE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return id(Wl)}function BE(r,s){if(r==="click")return id(s)}function zE(r,s){if(r==="input"||r==="change")return id(s)}function UE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var On=typeof Object.is=="function"?Object.is:UE;function ql(r,s){if(On(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),d=Object.keys(s);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var p=o[d];if(!It.call(s,p)||!On(r[p],s[p]))return!1}return!0}function b1(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function T1(r,s){var o=b1(r);r=0;for(var d;o;){if(o.nodeType===3){if(d=r+o.textContent.length,r<=s&&d>=s)return{node:o,offset:s-r};r=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=b1(o)}}function S1(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?S1(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function _1(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Wi(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Wi(r.document)}return s}function em(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var GE=Xn&&"documentMode"in document&&11>=document.documentMode,uo=null,tm=null,Kl=null,nm=!1;function A1(r,s,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;nm||uo==null||uo!==Wi(d)||(d=uo,"selectionStart"in d&&em(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Kl&&ql(Kl,d)||(Kl=d,d=Hd(tm,"onSelect"),0<d.length&&(s=new Yi("onSelect","select",null,s,o),r.push({event:s,listeners:d}),s.target=uo)))}function ha(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var ho={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},im={},w1={};Xn&&(w1=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function fa(r){if(im[r])return im[r];if(!ho[r])return r;var s=ho[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in w1)return im[r]=s[o];return r}var E1=fa("animationend"),R1=fa("animationiteration"),I1=fa("animationstart"),$E=fa("transitionrun"),HE=fa("transitionstart"),WE=fa("transitioncancel"),C1=fa("transitionend"),j1=new Map,rm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rm.push("scrollEnd");function Si(r,s){j1.set(r,s),$i(s,[r])}var rd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Zn=[],fo=0,sm=0;function sd(){for(var r=fo,s=sm=fo=0;s<r;){var o=Zn[s];Zn[s++]=null;var d=Zn[s];Zn[s++]=null;var p=Zn[s];Zn[s++]=null;var y=Zn[s];if(Zn[s++]=null,d!==null&&p!==null){var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}y!==0&&D1(o,p,y)}}function ad(r,s,o,d){Zn[fo++]=r,Zn[fo++]=s,Zn[fo++]=o,Zn[fo++]=d,sm|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function am(r,s,o,d){return ad(r,s,o,d),od(r)}function ma(r,s){return ad(r,null,null,s),od(r)}function D1(r,s,o){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o);for(var p=!1,y=r.return;y!==null;)y.childLanes|=o,d=y.alternate,d!==null&&(d.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&s!==null&&(p=31-St(o),r=y.hiddenUpdates,d=r[p],d===null?r[p]=[s]:d.push(s),s.lane=o|536870912),y):null}function od(r){if(50<pc)throw pc=0,gg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var mo={};function qE(r,s,o,d){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(r,s,o,d){return new qE(r,s,o,d)}function om(r){return r=r.prototype,!(!r||!r.isReactComponent)}function yr(r,s){var o=r.alternate;return o===null?(o=Nn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function k1(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ld(r,s,o,d,p,y){var S=0;if(d=r,typeof r=="function")om(r)&&(S=1);else if(typeof r=="string")S=ZR(r,o,De.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=Nn(31,o,s,p),r.elementType=C,r.lanes=y,r;case E:return ga(o.children,p,y,s);case P:S=8,p|=24;break;case N:return r=Nn(12,o,s,p|2),r.elementType=N,r.lanes=y,r;case W:return r=Nn(13,o,s,p),r.elementType=W,r.lanes=y,r;case q:return r=Nn(19,o,s,p),r.elementType=q,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:S=10;break e;case V:S=9;break e;case ne:S=11;break e;case D:S=14;break e;case I:S=16,d=null;break e}S=29,o=Error(i(130,r===null?"null":typeof r,"")),d=null}return s=Nn(S,o,s,p),s.elementType=r,s.type=d,s.lanes=y,s}function ga(r,s,o,d){return r=Nn(7,r,d,s),r.lanes=o,r}function lm(r,s,o){return r=Nn(6,r,null,s),r.lanes=o,r}function P1(r){var s=Nn(18,null,null,0);return s.stateNode=r,s}function cm(r,s,o){return s=Nn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var M1=new WeakMap;function Jn(r,s){if(typeof r=="object"&&r!==null){var o=M1.get(r);return o!==void 0?o:(s={value:r,source:s,stack:wl(s)},M1.set(r,s),s)}return{value:r,source:s,stack:wl(s)}}var go=[],po=0,cd=null,Yl=0,ei=[],ti=0,ns=null,Ji=1,er="";function vr(r,s){go[po++]=Yl,go[po++]=cd,cd=r,Yl=s}function O1(r,s,o){ei[ti++]=Ji,ei[ti++]=er,ei[ti++]=ns,ns=r;var d=Ji;r=er;var p=32-St(d)-1;d&=~(1<<p),o+=1;var y=32-St(s)+p;if(30<y){var S=p-p%5;y=(d&(1<<S)-1).toString(32),d>>=S,p-=S,Ji=1<<32-St(s)+p|o<<p|d,er=y+r}else Ji=1<<y|o<<p|d,er=r}function um(r){r.return!==null&&(vr(r,1),O1(r,1,0))}function dm(r){for(;r===cd;)cd=go[--po],go[po]=null,Yl=go[--po],go[po]=null;for(;r===ns;)ns=ei[--ti],ei[ti]=null,er=ei[--ti],ei[ti]=null,Ji=ei[--ti],ei[ti]=null}function N1(r,s){ei[ti++]=Ji,ei[ti++]=er,ei[ti++]=ns,Ji=s.id,er=s.overflow,ns=r}var Jt=null,lt=null,Ue=!1,is=null,ni=!1,hm=Error(i(519));function rs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xl(Jn(s,r)),hm}function V1(r){var s=r.stateNode,o=r.type,d=r.memoizedProps;switch(s[jt]=r,s[$t]=d,o){case"dialog":Ne("cancel",s),Ne("close",s);break;case"iframe":case"object":case"embed":Ne("load",s);break;case"video":case"audio":for(o=0;o<vc.length;o++)Ne(vc[o],s);break;case"source":Ne("error",s);break;case"img":case"image":case"link":Ne("error",s),Ne("load",s);break;case"details":Ne("toggle",s);break;case"input":Ne("invalid",s),Uu(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ne("invalid",s);break;case"textarea":Ne("invalid",s),Yr(s,d.value,d.defaultValue,d.children)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||d.suppressHydrationWarning===!0||eb(s.textContent,o)?(d.popover!=null&&(Ne("beforetoggle",s),Ne("toggle",s)),d.onScroll!=null&&Ne("scroll",s),d.onScrollEnd!=null&&Ne("scrollend",s),d.onClick!=null&&(s.onclick=yi),s=!0):s=!1,s||rs(r,!0)}function F1(r){for(Jt=r.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:Jt=Jt.return}}function yo(r){if(r!==Jt)return!1;if(!Ue)return F1(r),Ue=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||jg(r.type,r.memoizedProps)),o=!o),o&&lt&&rs(r),F1(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));lt=cb(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));lt=cb(r)}else s===27?(s=lt,vs(r.type)?(r=Og,Og=null,lt=r):lt=s):lt=Jt?ri(r.stateNode.nextSibling):null;return!0}function pa(){lt=Jt=null,Ue=!1}function fm(){var r=is;return r!==null&&(Rn===null?Rn=r:Rn.push.apply(Rn,r),is=null),r}function Xl(r){is===null?is=[r]:is.push(r)}var mm=pe(null),ya=null,xr=null;function ss(r,s,o){Te(mm,s._currentValue),s._currentValue=o}function br(r){r._currentValue=mm.current,Ee(mm)}function gm(r,s,o){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===o)break;r=r.return}}function pm(r,s,o,d){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var S=p.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=p;for(var B=0;B<s.length;B++)if(R.context===s[B]){y.lanes|=o,R=y.alternate,R!==null&&(R.lanes|=o),gm(y.return,o,r),d||(S=null);break e}y=R.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(i(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),gm(S,o,r),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===r){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function vo(r,s,o,d){r=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var R=p.type;On(p.pendingProps.value,S.value)||(r!==null?r.push(R):r=[R])}}else if(p===Xt.current){if(S=p.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(_c):r=[_c])}p=p.return}r!==null&&pm(s,r,o,d),s.flags|=262144}function ud(r){for(r=r.firstContext;r!==null;){if(!On(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function va(r){ya=r,xr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function en(r){return L1(ya,r)}function dd(r,s){return ya===null&&va(r),L1(r,s)}function L1(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},xr===null){if(r===null)throw Error(i(308));xr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else xr=xr.next=s;return o}var KE=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,d){r.push(d)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},YE=n.unstable_scheduleCallback,XE=n.unstable_NormalPriority,Pt={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ym(){return{controller:new KE,data:new Map,refCount:0}}function Ql(r){r.refCount--,r.refCount===0&&YE(XE,function(){r.controller.abort()})}var Zl=null,vm=0,xo=0,bo=null;function QE(r,s){if(Zl===null){var o=Zl=[];vm=0,xo=Tg(),bo={status:"pending",value:void 0,then:function(d){o.push(d)}}}return vm++,s.then(B1,B1),s}function B1(){if(--vm===0&&Zl!==null){bo!==null&&(bo.status="fulfilled");var r=Zl;Zl=null,xo=0,bo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function ZE(r,s){var o=[],d={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return r.then(function(){d.status="fulfilled",d.value=s;for(var p=0;p<o.length;p++)(0,o[p])(s)},function(p){for(d.status="rejected",d.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),d}var z1=G.S;G.S=function(r,s){Ax=mn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&QE(r,s),z1!==null&&z1(r,s)};var xa=pe(null);function xm(){var r=xa.current;return r!==null?r:ot.pooledCache}function hd(r,s){s===null?Te(xa,xa.current):Te(xa,s.pool)}function U1(){var r=xm();return r===null?null:{parent:Pt._currentValue,pool:r}}var To=Error(i(460)),bm=Error(i(474)),fd=Error(i(542)),md={then:function(){}};function G1(r){return r=r.status,r==="fulfilled"||r==="rejected"}function $1(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(yi,yi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,W1(r),r;default:if(typeof s.status=="string")s.then(yi,yi);else{if(r=ot,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(d){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=d}},function(d){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,W1(r),r}throw Ta=s,To}}function ba(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ta=o,To):o}}var Ta=null;function H1(){if(Ta===null)throw Error(i(459));var r=Ta;return Ta=null,r}function W1(r){if(r===To||r===fd)throw Error(i(483))}var So=null,Jl=0;function gd(r){var s=Jl;return Jl+=1,So===null&&(So=[]),$1(So,r,s)}function ec(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function pd(r,s){throw s.$$typeof===x?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function q1(r){function s(K,$){if(r){var Q=K.deletions;Q===null?(K.deletions=[$],K.flags|=16):Q.push($)}}function o(K,$){if(!r)return null;for(;$!==null;)s(K,$),$=$.sibling;return null}function d(K){for(var $=new Map;K!==null;)K.key!==null?$.set(K.key,K):$.set(K.index,K),K=K.sibling;return $}function p(K,$){return K=yr(K,$),K.index=0,K.sibling=null,K}function y(K,$,Q){return K.index=Q,r?(Q=K.alternate,Q!==null?(Q=Q.index,Q<$?(K.flags|=67108866,$):Q):(K.flags|=67108866,$)):(K.flags|=1048576,$)}function S(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function R(K,$,Q,ae){return $===null||$.tag!==6?($=lm(Q,K.mode,ae),$.return=K,$):($=p($,Q),$.return=K,$)}function B(K,$,Q,ae){var xe=Q.type;return xe===E?re(K,$,Q.props.children,ae,Q.key):$!==null&&($.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===I&&ba(xe)===$.type)?($=p($,Q.props),ec($,Q),$.return=K,$):($=ld(Q.type,Q.key,Q.props,null,K.mode,ae),ec($,Q),$.return=K,$)}function Z(K,$,Q,ae){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=cm(Q,K.mode,ae),$.return=K,$):($=p($,Q.children||[]),$.return=K,$)}function re(K,$,Q,ae,xe){return $===null||$.tag!==7?($=ga(Q,K.mode,ae,xe),$.return=K,$):($=p($,Q),$.return=K,$)}function ce(K,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=lm(""+$,K.mode,Q),$.return=K,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return Q=ld($.type,$.key,$.props,null,K.mode,Q),ec(Q,$),Q.return=K,Q;case w:return $=cm($,K.mode,Q),$.return=K,$;case I:return $=ba($),ce(K,$,Q)}if(le($)||z($))return $=ga($,K.mode,Q,null),$.return=K,$;if(typeof $.then=="function")return ce(K,gd($),Q);if($.$$typeof===L)return ce(K,dd(K,$),Q);pd(K,$)}return null}function ee(K,$,Q,ae){var xe=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return xe!==null?null:R(K,$,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _:return Q.key===xe?B(K,$,Q,ae):null;case w:return Q.key===xe?Z(K,$,Q,ae):null;case I:return Q=ba(Q),ee(K,$,Q,ae)}if(le(Q)||z(Q))return xe!==null?null:re(K,$,Q,ae,null);if(typeof Q.then=="function")return ee(K,$,gd(Q),ae);if(Q.$$typeof===L)return ee(K,$,dd(K,Q),ae);pd(K,Q)}return null}function ie(K,$,Q,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return K=K.get(Q)||null,R($,K,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case _:return K=K.get(ae.key===null?Q:ae.key)||null,B($,K,ae,xe);case w:return K=K.get(ae.key===null?Q:ae.key)||null,Z($,K,ae,xe);case I:return ae=ba(ae),ie(K,$,Q,ae,xe)}if(le(ae)||z(ae))return K=K.get(Q)||null,re($,K,ae,xe,null);if(typeof ae.then=="function")return ie(K,$,Q,gd(ae),xe);if(ae.$$typeof===L)return ie(K,$,Q,dd($,ae),xe);pd($,ae)}return null}function ge(K,$,Q,ae){for(var xe=null,qe=null,ye=$,Me=$=0,Fe=null;ye!==null&&Me<Q.length;Me++){ye.index>Me?(Fe=ye,ye=null):Fe=ye.sibling;var Ke=ee(K,ye,Q[Me],ae);if(Ke===null){ye===null&&(ye=Fe);break}r&&ye&&Ke.alternate===null&&s(K,ye),$=y(Ke,$,Me),qe===null?xe=Ke:qe.sibling=Ke,qe=Ke,ye=Fe}if(Me===Q.length)return o(K,ye),Ue&&vr(K,Me),xe;if(ye===null){for(;Me<Q.length;Me++)ye=ce(K,Q[Me],ae),ye!==null&&($=y(ye,$,Me),qe===null?xe=ye:qe.sibling=ye,qe=ye);return Ue&&vr(K,Me),xe}for(ye=d(ye);Me<Q.length;Me++)Fe=ie(ye,K,Me,Q[Me],ae),Fe!==null&&(r&&Fe.alternate!==null&&ye.delete(Fe.key===null?Me:Fe.key),$=y(Fe,$,Me),qe===null?xe=Fe:qe.sibling=Fe,qe=Fe);return r&&ye.forEach(function(_s){return s(K,_s)}),Ue&&vr(K,Me),xe}function we(K,$,Q,ae){if(Q==null)throw Error(i(151));for(var xe=null,qe=null,ye=$,Me=$=0,Fe=null,Ke=Q.next();ye!==null&&!Ke.done;Me++,Ke=Q.next()){ye.index>Me?(Fe=ye,ye=null):Fe=ye.sibling;var _s=ee(K,ye,Ke.value,ae);if(_s===null){ye===null&&(ye=Fe);break}r&&ye&&_s.alternate===null&&s(K,ye),$=y(_s,$,Me),qe===null?xe=_s:qe.sibling=_s,qe=_s,ye=Fe}if(Ke.done)return o(K,ye),Ue&&vr(K,Me),xe;if(ye===null){for(;!Ke.done;Me++,Ke=Q.next())Ke=ce(K,Ke.value,ae),Ke!==null&&($=y(Ke,$,Me),qe===null?xe=Ke:qe.sibling=Ke,qe=Ke);return Ue&&vr(K,Me),xe}for(ye=d(ye);!Ke.done;Me++,Ke=Q.next())Ke=ie(ye,K,Me,Ke.value,ae),Ke!==null&&(r&&Ke.alternate!==null&&ye.delete(Ke.key===null?Me:Ke.key),$=y(Ke,$,Me),qe===null?xe=Ke:qe.sibling=Ke,qe=Ke);return r&&ye.forEach(function(cI){return s(K,cI)}),Ue&&vr(K,Me),xe}function st(K,$,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===E&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _:e:{for(var xe=Q.key;$!==null;){if($.key===xe){if(xe=Q.type,xe===E){if($.tag===7){o(K,$.sibling),ae=p($,Q.props.children),ae.return=K,K=ae;break e}}else if($.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===I&&ba(xe)===$.type){o(K,$.sibling),ae=p($,Q.props),ec(ae,Q),ae.return=K,K=ae;break e}o(K,$);break}else s(K,$);$=$.sibling}Q.type===E?(ae=ga(Q.props.children,K.mode,ae,Q.key),ae.return=K,K=ae):(ae=ld(Q.type,Q.key,Q.props,null,K.mode,ae),ec(ae,Q),ae.return=K,K=ae)}return S(K);case w:e:{for(xe=Q.key;$!==null;){if($.key===xe)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){o(K,$.sibling),ae=p($,Q.children||[]),ae.return=K,K=ae;break e}else{o(K,$);break}else s(K,$);$=$.sibling}ae=cm(Q,K.mode,ae),ae.return=K,K=ae}return S(K);case I:return Q=ba(Q),st(K,$,Q,ae)}if(le(Q))return ge(K,$,Q,ae);if(z(Q)){if(xe=z(Q),typeof xe!="function")throw Error(i(150));return Q=xe.call(Q),we(K,$,Q,ae)}if(typeof Q.then=="function")return st(K,$,gd(Q),ae);if(Q.$$typeof===L)return st(K,$,dd(K,Q),ae);pd(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,$!==null&&$.tag===6?(o(K,$.sibling),ae=p($,Q),ae.return=K,K=ae):(o(K,$),ae=lm(Q,K.mode,ae),ae.return=K,K=ae),S(K)):o(K,$)}return function(K,$,Q,ae){try{Jl=0;var xe=st(K,$,Q,ae);return So=null,xe}catch(ye){if(ye===To||ye===fd)throw ye;var qe=Nn(29,ye,null,K.mode);return qe.lanes=ae,qe.return=K,qe}finally{}}}var Sa=q1(!0),K1=q1(!1),as=!1;function Tm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function os(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ls(r,s,o){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Xe&2)!==0){var p=d.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),d.pending=s,s=od(r),D1(r,null,o),s}return ad(r,d,s,o),od(r)}function tc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var d=s.lanes;d&=r.pendingLanes,o|=d,s.lanes=o,Il(r,o)}}function _m(r,s){var o=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var p=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?p=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?p=y=s:y=y.next=s}else p=y=s;o={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Am=!1;function nc(){if(Am){var r=bo;if(r!==null)throw r}}function ic(r,s,o,d){Am=!1;var p=r.updateQueue;as=!1;var y=p.firstBaseUpdate,S=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var B=R,Z=B.next;B.next=null,S===null?y=Z:S.next=Z,S=B;var re=r.alternate;re!==null&&(re=re.updateQueue,R=re.lastBaseUpdate,R!==S&&(R===null?re.firstBaseUpdate=Z:R.next=Z,re.lastBaseUpdate=B))}if(y!==null){var ce=p.baseState;S=0,re=Z=B=null,R=y;do{var ee=R.lane&-536870913,ie=ee!==R.lane;if(ie?(Ve&ee)===ee:(d&ee)===ee){ee!==0&&ee===xo&&(Am=!0),re!==null&&(re=re.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=r,we=R;ee=s;var st=o;switch(we.tag){case 1:if(ge=we.payload,typeof ge=="function"){ce=ge.call(st,ce,ee);break e}ce=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,ee=typeof ge=="function"?ge.call(st,ce,ee):ge,ee==null)break e;ce=b({},ce,ee);break e;case 2:as=!0}}ee=R.callback,ee!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=p.callbacks,ie===null?p.callbacks=[ee]:ie.push(ee))}else ie={lane:ee,tag:R.tag,payload:R.payload,callback:R.callback,next:null},re===null?(Z=re=ie,B=ce):re=re.next=ie,S|=ee;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;ie=R,R=ie.next,ie.next=null,p.lastBaseUpdate=ie,p.shared.pending=null}}while(!0);re===null&&(B=ce),p.baseState=B,p.firstBaseUpdate=Z,p.lastBaseUpdate=re,y===null&&(p.shared.lanes=0),fs|=S,r.lanes=S,r.memoizedState=ce}}function Y1(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function X1(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Y1(o[r],s)}var _o=pe(null),yd=pe(0);function Q1(r,s){r=Cr,Te(yd,r),Te(_o,s),Cr=r|s.baseLanes}function wm(){Te(yd,Cr),Te(_o,_o.current)}function Em(){Cr=yd.current,Ee(_o),Ee(yd)}var Vn=pe(null),ii=null;function cs(r){var s=r.alternate;Te(At,At.current&1),Te(Vn,r),ii===null&&(s===null||_o.current!==null||s.memoizedState!==null)&&(ii=r)}function Rm(r){Te(At,At.current),Te(Vn,r),ii===null&&(ii=r)}function Z1(r){r.tag===22?(Te(At,At.current),Te(Vn,r),ii===null&&(ii=r)):us()}function us(){Te(At,At.current),Te(Vn,Vn.current)}function Fn(r){Ee(Vn),ii===r&&(ii=null),Ee(At)}var At=pe(0);function vd(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Pg(o)||Mg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tr=0,Pe=null,it=null,Mt=null,xd=!1,Ao=!1,_a=!1,bd=0,rc=0,wo=null,JE=0;function vt(){throw Error(i(321))}function Im(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!On(r[o],s[o]))return!1;return!0}function Cm(r,s,o,d,p,y){return Tr=y,Pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,G.H=r===null||r.memoizedState===null?Ov:$m,_a=!1,y=o(d,p),_a=!1,Ao&&(y=ev(s,o,d,p)),J1(r),y}function J1(r){G.H=oc;var s=it!==null&&it.next!==null;if(Tr=0,Mt=it=Pe=null,xd=!1,rc=0,wo=null,s)throw Error(i(300));r===null||Ot||(r=r.dependencies,r!==null&&ud(r)&&(Ot=!0))}function ev(r,s,o,d){Pe=r;var p=0;do{if(Ao&&(wo=null),rc=0,Ao=!1,25<=p)throw Error(i(301));if(p+=1,Mt=it=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=Nv,y=s(o,d)}while(Ao);return y}function eR(){var r=G.H,s=r.useState()[0];return s=typeof s.then=="function"?sc(s):s,r=r.useState()[0],(it!==null?it.memoizedState:null)!==r&&(Pe.flags|=1024),s}function jm(){var r=bd!==0;return bd=0,r}function Dm(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function km(r){if(xd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xd=!1}Tr=0,Mt=it=Pe=null,Ao=!1,rc=bd=0,wo=null}function pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Pe.memoizedState=Mt=r:Mt=Mt.next=r,Mt}function wt(){if(it===null){var r=Pe.alternate;r=r!==null?r.memoizedState:null}else r=it.next;var s=Mt===null?Pe.memoizedState:Mt.next;if(s!==null)Mt=s,it=r;else{if(r===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));it=r,r={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Mt===null?Pe.memoizedState=Mt=r:Mt=Mt.next=r}return Mt}function Td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sc(r){var s=rc;return rc+=1,wo===null&&(wo=[]),r=$1(wo,r,s),s=Pe,(Mt===null?s.memoizedState:Mt.next)===null&&(s=s.alternate,G.H=s===null||s.memoizedState===null?Ov:$m),r}function Sd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return sc(r);if(r.$$typeof===L)return en(r)}throw Error(i(438,String(r)))}function Pm(r){var s=null,o=Pe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var d=Pe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Td(),Pe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),d=0;d<r;d++)o[d]=F;return s.index++,o}function Sr(r,s){return typeof s=="function"?s(r):s}function _d(r){var s=wt();return Mm(s,it,r)}function Mm(r,s,o){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=o;var p=r.baseQueue,y=d.pending;if(y!==null){if(p!==null){var S=p.next;p.next=y.next,y.next=S}s.baseQueue=p=y,d.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{s=p.next;var R=S=null,B=null,Z=s,re=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(Ve&ce)===ce:(Tr&ce)===ce){var ee=Z.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===xo&&(re=!0);else if((Tr&ee)===ee){Z=Z.next,ee===xo&&(re=!0);continue}else ce={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(R=B=ce,S=y):B=B.next=ce,Pe.lanes|=ee,fs|=ee;ce=Z.action,_a&&o(y,ce),y=Z.hasEagerState?Z.eagerState:o(y,ce)}else ee={lane:ce,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(R=B=ee,S=y):B=B.next=ee,Pe.lanes|=ce,fs|=ce;Z=Z.next}while(Z!==null&&Z!==s);if(B===null?S=y:B.next=R,!On(y,r.memoizedState)&&(Ot=!0,re&&(o=bo,o!==null)))throw o;r.memoizedState=y,r.baseState=S,r.baseQueue=B,d.lastRenderedState=y}return p===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Om(r){var s=wt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var d=o.dispatch,p=o.pending,y=s.memoizedState;if(p!==null){o.pending=null;var S=p=p.next;do y=r(y,S.action),S=S.next;while(S!==p);On(y,s.memoizedState)||(Ot=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,d]}function tv(r,s,o){var d=Pe,p=wt(),y=Ue;if(y){if(o===void 0)throw Error(i(407));o=o()}else o=s();var S=!On((it||p).memoizedState,o);if(S&&(p.memoizedState=o,Ot=!0),p=p.queue,Fm(rv.bind(null,d,p,r),[r]),p.getSnapshot!==s||S||Mt!==null&&Mt.memoizedState.tag&1){if(d.flags|=2048,Eo(9,{destroy:void 0},iv.bind(null,d,p,o,s),null),ot===null)throw Error(i(349));y||(Tr&127)!==0||nv(d,s,o)}return o}function nv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Pe.updateQueue,s===null?(s=Td(),Pe.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function iv(r,s,o,d){s.value=o,s.getSnapshot=d,sv(s)&&av(r)}function rv(r,s,o){return o(function(){sv(s)&&av(r)})}function sv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!On(r,o)}catch{return!0}}function av(r){var s=ma(r,2);s!==null&&In(s,r,2)}function Nm(r){var s=pn();if(typeof r=="function"){var o=r;if(r=o(),_a){qn(!0);try{o()}finally{qn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:r},s}function ov(r,s,o,d){return r.baseState=o,Mm(r,it,typeof d=="function"?d:Sr)}function tR(r,s,o,d,p){if(Ed(r))throw Error(i(485));if(r=s.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};G.T!==null?o(!0):y.isTransition=!1,d(y),o=s.pending,o===null?(y.next=s.pending=y,lv(s,y)):(y.next=o.next,s.pending=o.next=y)}}function lv(r,s){var o=s.action,d=s.payload,p=r.state;if(s.isTransition){var y=G.T,S={};G.T=S;try{var R=o(p,d),B=G.S;B!==null&&B(S,R),cv(r,s,R)}catch(Z){Vm(r,s,Z)}finally{y!==null&&S.types!==null&&(y.types=S.types),G.T=y}}else try{y=o(p,d),cv(r,s,y)}catch(Z){Vm(r,s,Z)}}function cv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){uv(r,s,d)},function(d){return Vm(r,s,d)}):uv(r,s,o)}function uv(r,s,o){s.status="fulfilled",s.value=o,dv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,lv(r,o)))}function Vm(r,s,o){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=o,dv(s),s=s.next;while(s!==d)}r.action=null}function dv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function hv(r,s){return s}function fv(r,s){if(Ue){var o=ot.formState;if(o!==null){e:{var d=Pe;if(Ue){if(lt){t:{for(var p=lt,y=ni;p.nodeType!==8;){if(!y){p=null;break t}if(p=ri(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){lt=ri(p.nextSibling),d=p.data==="F!";break e}}rs(d)}d=!1}d&&(s=o[0])}}return o=pn(),o.memoizedState=o.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hv,lastRenderedState:s},o.queue=d,o=kv.bind(null,Pe,d),d.dispatch=o,d=Nm(!1),y=Gm.bind(null,Pe,!1,d.queue),d=pn(),p={state:s,dispatch:null,action:r,pending:null},d.queue=p,o=tR.bind(null,Pe,p,y,o),p.dispatch=o,d.memoizedState=r,[s,o,!1]}function mv(r){var s=wt();return gv(s,it,r)}function gv(r,s,o){if(s=Mm(r,s,hv)[0],r=_d(Sr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=sc(s)}catch(S){throw S===To?fd:S}else d=s;s=wt();var p=s.queue,y=p.dispatch;return o!==s.memoizedState&&(Pe.flags|=2048,Eo(9,{destroy:void 0},nR.bind(null,p,o),null)),[d,y,r]}function nR(r,s){r.action=s}function pv(r){var s=wt(),o=it;if(o!==null)return gv(s,o,r);wt(),s=s.memoizedState,o=wt();var d=o.queue.dispatch;return o.memoizedState=r,[s,d,!1]}function Eo(r,s,o,d){return r={tag:r,create:o,deps:d,inst:s,next:null},s=Pe.updateQueue,s===null&&(s=Td(),Pe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(d=o.next,o.next=r,r.next=d,s.lastEffect=r),r}function yv(){return wt().memoizedState}function Ad(r,s,o,d){var p=pn();Pe.flags|=r,p.memoizedState=Eo(1|s,{destroy:void 0},o,d===void 0?null:d)}function wd(r,s,o,d){var p=wt();d=d===void 0?null:d;var y=p.memoizedState.inst;it!==null&&d!==null&&Im(d,it.memoizedState.deps)?p.memoizedState=Eo(s,y,o,d):(Pe.flags|=r,p.memoizedState=Eo(1|s,y,o,d))}function vv(r,s){Ad(8390656,8,r,s)}function Fm(r,s){wd(2048,8,r,s)}function iR(r){Pe.flags|=4;var s=Pe.updateQueue;if(s===null)s=Td(),Pe.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function xv(r){var s=wt().memoizedState;return iR({ref:s,nextImpl:r}),function(){if((Xe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function bv(r,s){return wd(4,2,r,s)}function Tv(r,s){return wd(4,4,r,s)}function Sv(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function _v(r,s,o){o=o!=null?o.concat([r]):null,wd(4,4,Sv.bind(null,s,r),o)}function Lm(){}function Av(r,s){var o=wt();s=s===void 0?null:s;var d=o.memoizedState;return s!==null&&Im(s,d[1])?d[0]:(o.memoizedState=[r,s],r)}function wv(r,s){var o=wt();s=s===void 0?null:s;var d=o.memoizedState;if(s!==null&&Im(s,d[1]))return d[0];if(d=r(),_a){qn(!0);try{r()}finally{qn(!1)}}return o.memoizedState=[d,s],d}function Bm(r,s,o){return o===void 0||(Tr&1073741824)!==0&&(Ve&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=Ex(),Pe.lanes|=r,fs|=r,o)}function Ev(r,s,o,d){return On(o,s)?o:_o.current!==null?(r=Bm(r,o,d),On(r,s)||(Ot=!0),r):(Tr&42)===0||(Tr&1073741824)!==0&&(Ve&261930)===0?(Ot=!0,r.memoizedState=o):(r=Ex(),Pe.lanes|=r,fs|=r,s)}function Rv(r,s,o,d,p){var y=U.p;U.p=y!==0&&8>y?y:8;var S=G.T,R={};G.T=R,Gm(r,!1,s,o);try{var B=p(),Z=G.S;if(Z!==null&&Z(R,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var re=ZE(B,d);ac(r,s,re,zn(r))}else ac(r,s,d,zn(r))}catch(ce){ac(r,s,{then:function(){},status:"rejected",reason:ce},zn())}finally{U.p=y,S!==null&&R.types!==null&&(S.types=R.types),G.T=S}}function rR(){}function zm(r,s,o,d){if(r.tag!==5)throw Error(i(476));var p=Iv(r).queue;Rv(r,p,s,J,o===null?rR:function(){return Cv(r),o(d)})}function Iv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:J},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Cv(r){var s=Iv(r);s.next===null&&(s=r.alternate.memoizedState),ac(r,s.next.queue,{},zn())}function Um(){return en(_c)}function jv(){return wt().memoizedState}function Dv(){return wt().memoizedState}function sR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=zn();r=os(o);var d=ls(s,r,o);d!==null&&(In(d,s,o),tc(d,s,o)),s={cache:ym()},r.payload=s;return}s=s.return}}function aR(r,s,o){var d=zn();o={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ed(r)?Pv(s,o):(o=am(r,s,o,d),o!==null&&(In(o,r,d),Mv(o,s,d)))}function kv(r,s,o){var d=zn();ac(r,s,o,d)}function ac(r,s,o,d){var p={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ed(r))Pv(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,R=y(S,o);if(p.hasEagerState=!0,p.eagerState=R,On(R,S))return ad(r,s,p,0),ot===null&&sd(),!1}catch{}finally{}if(o=am(r,s,p,d),o!==null)return In(o,r,d),Mv(o,s,d),!0}return!1}function Gm(r,s,o,d){if(d={lane:2,revertLane:Tg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ed(r)){if(s)throw Error(i(479))}else s=am(r,o,d,2),s!==null&&In(s,r,2)}function Ed(r){var s=r.alternate;return r===Pe||s!==null&&s===Pe}function Pv(r,s){Ao=xd=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Mv(r,s,o){if((o&4194048)!==0){var d=s.lanes;d&=r.pendingLanes,o|=d,s.lanes=o,Il(r,o)}}var oc={readContext:en,use:Sd,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};oc.useEffectEvent=vt;var Ov={readContext:en,use:Sd,useCallback:function(r,s){return pn().memoizedState=[r,s===void 0?null:s],r},useContext:en,useEffect:vv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Ad(4194308,4,Sv.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Ad(4194308,4,r,s)},useInsertionEffect:function(r,s){Ad(4,2,r,s)},useMemo:function(r,s){var o=pn();s=s===void 0?null:s;var d=r();if(_a){qn(!0);try{r()}finally{qn(!1)}}return o.memoizedState=[d,s],d},useReducer:function(r,s,o){var d=pn();if(o!==void 0){var p=o(s);if(_a){qn(!0);try{o(s)}finally{qn(!1)}}}else p=s;return d.memoizedState=d.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},d.queue=r,r=r.dispatch=aR.bind(null,Pe,r),[d.memoizedState,r]},useRef:function(r){var s=pn();return r={current:r},s.memoizedState=r},useState:function(r){r=Nm(r);var s=r.queue,o=kv.bind(null,Pe,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Lm,useDeferredValue:function(r,s){var o=pn();return Bm(o,r,s)},useTransition:function(){var r=Nm(!1);return r=Rv.bind(null,Pe,r.queue,!0,!1),pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var d=Pe,p=pn();if(Ue){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ot===null)throw Error(i(349));(Ve&127)!==0||nv(d,s,o)}p.memoizedState=o;var y={value:o,getSnapshot:s};return p.queue=y,vv(rv.bind(null,d,y,r),[r]),d.flags|=2048,Eo(9,{destroy:void 0},iv.bind(null,d,y,o,s),null),o},useId:function(){var r=pn(),s=ot.identifierPrefix;if(Ue){var o=er,d=Ji;o=(d&~(1<<32-St(d)-1)).toString(32)+o,s="_"+s+"R_"+o,o=bd++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=JE++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Um,useFormState:fv,useActionState:fv,useOptimistic:function(r){var s=pn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Gm.bind(null,Pe,!0,o),o.dispatch=s,[r,s]},useMemoCache:Pm,useCacheRefresh:function(){return pn().memoizedState=sR.bind(null,Pe)},useEffectEvent:function(r){var s=pn(),o={impl:r};return s.memoizedState=o,function(){if((Xe&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},$m={readContext:en,use:Sd,useCallback:Av,useContext:en,useEffect:Fm,useImperativeHandle:_v,useInsertionEffect:bv,useLayoutEffect:Tv,useMemo:wv,useReducer:_d,useRef:yv,useState:function(){return _d(Sr)},useDebugValue:Lm,useDeferredValue:function(r,s){var o=wt();return Ev(o,it.memoizedState,r,s)},useTransition:function(){var r=_d(Sr)[0],s=wt().memoizedState;return[typeof r=="boolean"?r:sc(r),s]},useSyncExternalStore:tv,useId:jv,useHostTransitionStatus:Um,useFormState:mv,useActionState:mv,useOptimistic:function(r,s){var o=wt();return ov(o,it,r,s)},useMemoCache:Pm,useCacheRefresh:Dv};$m.useEffectEvent=xv;var Nv={readContext:en,use:Sd,useCallback:Av,useContext:en,useEffect:Fm,useImperativeHandle:_v,useInsertionEffect:bv,useLayoutEffect:Tv,useMemo:wv,useReducer:Om,useRef:yv,useState:function(){return Om(Sr)},useDebugValue:Lm,useDeferredValue:function(r,s){var o=wt();return it===null?Bm(o,r,s):Ev(o,it.memoizedState,r,s)},useTransition:function(){var r=Om(Sr)[0],s=wt().memoizedState;return[typeof r=="boolean"?r:sc(r),s]},useSyncExternalStore:tv,useId:jv,useHostTransitionStatus:Um,useFormState:pv,useActionState:pv,useOptimistic:function(r,s){var o=wt();return it!==null?ov(o,it,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Pm,useCacheRefresh:Dv};Nv.useEffectEvent=xv;function Hm(r,s,o,d){s=r.memoizedState,o=o(d,s),o=o==null?s:b({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Wm={enqueueSetState:function(r,s,o){r=r._reactInternals;var d=zn(),p=os(d);p.payload=s,o!=null&&(p.callback=o),s=ls(r,p,d),s!==null&&(In(s,r,d),tc(s,r,d))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var d=zn(),p=os(d);p.tag=1,p.payload=s,o!=null&&(p.callback=o),s=ls(r,p,d),s!==null&&(In(s,r,d),tc(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=zn(),d=os(o);d.tag=2,s!=null&&(d.callback=s),s=ls(r,d,o),s!==null&&(In(s,r,o),tc(s,r,o))}};function Vv(r,s,o,d,p,y,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,y,S):s.prototype&&s.prototype.isPureReactComponent?!ql(o,d)||!ql(p,y):!0}function Fv(r,s,o,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,d),s.state!==r&&Wm.enqueueReplaceState(s,s.state,null)}function Aa(r,s){var o=s;if("ref"in s){o={};for(var d in s)d!=="ref"&&(o[d]=s[d])}if(r=r.defaultProps){o===s&&(o=b({},o));for(var p in r)o[p]===void 0&&(o[p]=r[p])}return o}function Lv(r){rd(r)}function Bv(r){console.error(r)}function zv(r){rd(r)}function Rd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function Uv(r,s,o){try{var d=r.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function qm(r,s,o){return o=os(o),o.tag=3,o.payload={element:null},o.callback=function(){Rd(r,s)},o}function Gv(r){return r=os(r),r.tag=3,r}function $v(r,s,o,d){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=d.value;r.payload=function(){return p(y)},r.callback=function(){Uv(s,o,d)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){Uv(s,o,d),typeof p!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function oR(r,s,o,d,p){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=o.alternate,s!==null&&vo(s,o,p,!0),o=Vn.current,o!==null){switch(o.tag){case 31:case 13:return ii===null?Ld():o.alternate===null&&xt===0&&(xt=3),o.flags&=-257,o.flags|=65536,o.lanes=p,d===md?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([d]):s.add(d),vg(r,d,p)),!1;case 22:return o.flags|=65536,d===md?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([d]):o.add(d)),vg(r,d,p)),!1}throw Error(i(435,o.tag))}return vg(r,d,p),Ld(),!1}if(Ue)return s=Vn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,d!==hm&&(r=Error(i(422),{cause:d}),Xl(Jn(r,o)))):(d!==hm&&(s=Error(i(423),{cause:d}),Xl(Jn(s,o))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,d=Jn(d,o),p=qm(r.stateNode,d,p),_m(r,p),xt!==4&&(xt=2)),!1;var y=Error(i(520),{cause:d});if(y=Jn(y,o),gc===null?gc=[y]:gc.push(y),xt!==4&&(xt=2),s===null)return!0;d=Jn(d,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=p&-p,o.lanes|=r,r=qm(o.stateNode,d,r),_m(o,r),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ms===null||!ms.has(y))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Gv(p),$v(p,r,o,d),_m(o,p),!1}o=o.return}while(o!==null);return!1}var Km=Error(i(461)),Ot=!1;function tn(r,s,o,d){s.child=r===null?K1(s,null,o,d):Sa(s,r.child,o,d)}function Hv(r,s,o,d,p){o=o.render;var y=s.ref;if("ref"in d){var S={};for(var R in d)R!=="ref"&&(S[R]=d[R])}else S=d;return va(s),d=Cm(r,s,o,S,y,p),R=jm(),r!==null&&!Ot?(Dm(r,s,p),_r(r,s,p)):(Ue&&R&&um(s),s.flags|=1,tn(r,s,d,p),s.child)}function Wv(r,s,o,d,p){if(r===null){var y=o.type;return typeof y=="function"&&!om(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,qv(r,s,y,d,p)):(r=ld(o.type,null,d,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!ng(r,p)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:ql,o(S,d)&&r.ref===s.ref)return _r(r,s,p)}return s.flags|=1,r=yr(y,d),r.ref=s.ref,r.return=s,s.child=r}function qv(r,s,o,d,p){if(r!==null){var y=r.memoizedProps;if(ql(y,d)&&r.ref===s.ref)if(Ot=!1,s.pendingProps=d=y,ng(r,p))(r.flags&131072)!==0&&(Ot=!0);else return s.lanes=r.lanes,_r(r,s,p)}return Ym(r,s,o,d,p)}function Kv(r,s,o,d){var p=d.children,y=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,r!==null){for(d=s.child=r.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;d=p&~y}else d=0,s.child=null;return Yv(r,s,y,o,d)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&hd(s,y!==null?y.cachePool:null),y!==null?Q1(s,y):wm(),Z1(s);else return d=s.lanes=536870912,Yv(r,s,y!==null?y.baseLanes|o:o,o,d)}else y!==null?(hd(s,y.cachePool),Q1(s,y),us(),s.memoizedState=null):(r!==null&&hd(s,null),wm(),us());return tn(r,s,p,o),s.child}function lc(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Yv(r,s,o,d,p){var y=xm();return y=y===null?null:{parent:Pt._currentValue,pool:y},s.memoizedState={baseLanes:o,cachePool:y},r!==null&&hd(s,null),wm(),Z1(s),r!==null&&vo(r,s,d,!0),s.childLanes=p,null}function Id(r,s){return s=jd({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function Xv(r,s,o){return Sa(s,r.child,null,o),r=Id(s,s.pendingProps),r.flags|=2,Fn(s),s.memoizedState=null,r}function lR(r,s,o){var d=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Ue){if(d.mode==="hidden")return r=Id(s,d),s.lanes=536870912,lc(null,r);if(Rm(s),(r=lt)?(r=lb(r,ni),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ns!==null?{id:Ji,overflow:er}:null,retryLane:536870912,hydrationErrors:null},o=P1(r),o.return=s,s.child=o,Jt=s,lt=null)):r=null,r===null)throw rs(s);return s.lanes=536870912,null}return Id(s,d)}var y=r.memoizedState;if(y!==null){var S=y.dehydrated;if(Rm(s),p)if(s.flags&256)s.flags&=-257,s=Xv(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ot||vo(r,s,o,!1),p=(o&r.childLanes)!==0,Ot||p){if(d=ot,d!==null&&(S=Cl(d,o),S!==0&&S!==y.retryLane))throw y.retryLane=S,ma(r,S),In(d,r,S),Km;Ld(),s=Xv(r,s,o)}else r=y.treeContext,lt=ri(S.nextSibling),Jt=s,Ue=!0,is=null,ni=!1,r!==null&&N1(s,r),s=Id(s,d),s.flags|=4096;return s}return r=yr(r.child,{mode:d.mode,children:d.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Cd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Ym(r,s,o,d,p){return va(s),o=Cm(r,s,o,d,void 0,p),d=jm(),r!==null&&!Ot?(Dm(r,s,p),_r(r,s,p)):(Ue&&d&&um(s),s.flags|=1,tn(r,s,o,p),s.child)}function Qv(r,s,o,d,p,y){return va(s),s.updateQueue=null,o=ev(s,d,o,p),J1(r),d=jm(),r!==null&&!Ot?(Dm(r,s,y),_r(r,s,y)):(Ue&&d&&um(s),s.flags|=1,tn(r,s,o,y),s.child)}function Zv(r,s,o,d,p){if(va(s),s.stateNode===null){var y=mo,S=o.contextType;typeof S=="object"&&S!==null&&(y=en(S)),y=new o(d,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Wm,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=d,y.state=s.memoizedState,y.refs={},Tm(s),S=o.contextType,y.context=typeof S=="object"&&S!==null?en(S):mo,y.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Hm(s,o,S,d),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Wm.enqueueReplaceState(y,y.state,null),ic(s,d,y,p),nc(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(r===null){y=s.stateNode;var R=s.memoizedProps,B=Aa(o,R);y.props=B;var Z=y.context,re=o.contextType;S=mo,typeof re=="object"&&re!==null&&(S=en(re));var ce=o.getDerivedStateFromProps;re=typeof ce=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,re||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||Z!==S)&&Fv(s,y,d,S),as=!1;var ee=s.memoizedState;y.state=ee,ic(s,d,y,p),nc(),Z=s.memoizedState,R||ee!==Z||as?(typeof ce=="function"&&(Hm(s,o,ce,d),Z=s.memoizedState),(B=as||Vv(s,o,B,d,ee,Z,S))?(re||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=Z),y.props=d,y.state=Z,y.context=S,d=B):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{y=s.stateNode,Sm(r,s),S=s.memoizedProps,re=Aa(o,S),y.props=re,ce=s.pendingProps,ee=y.context,Z=o.contextType,B=mo,typeof Z=="object"&&Z!==null&&(B=en(Z)),R=o.getDerivedStateFromProps,(Z=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==ce||ee!==B)&&Fv(s,y,d,B),as=!1,ee=s.memoizedState,y.state=ee,ic(s,d,y,p),nc();var ie=s.memoizedState;S!==ce||ee!==ie||as||r!==null&&r.dependencies!==null&&ud(r.dependencies)?(typeof R=="function"&&(Hm(s,o,R,d),ie=s.memoizedState),(re=as||Vv(s,o,re,d,ee,ie,B)||r!==null&&r.dependencies!==null&&ud(r.dependencies))?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,ie,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,ie,B)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===r.memoizedProps&&ee===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&ee===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ie),y.props=d,y.state=ie,y.context=B,d=re):(typeof y.componentDidUpdate!="function"||S===r.memoizedProps&&ee===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&ee===r.memoizedState||(s.flags|=1024),d=!1)}return y=d,Cd(r,s),d=(s.flags&128)!==0,y||d?(y=s.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,r!==null&&d?(s.child=Sa(s,r.child,null,p),s.child=Sa(s,null,o,p)):tn(r,s,o,p),s.memoizedState=y.state,r=s.child):r=_r(r,s,p),r}function Jv(r,s,o,d){return pa(),s.flags|=256,tn(r,s,o,d),s.child}var Xm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qm(r){return{baseLanes:r,cachePool:U1()}}function Zm(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Bn),r}function ex(r,s,o){var d=s.pendingProps,p=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=r!==null&&r.memoizedState===null?!1:(At.current&2)!==0),S&&(p=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ue){if(p?cs(s):us(),(r=lt)?(r=lb(r,ni),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ns!==null?{id:Ji,overflow:er}:null,retryLane:536870912,hydrationErrors:null},o=P1(r),o.return=s,s.child=o,Jt=s,lt=null)):r=null,r===null)throw rs(s);return Mg(r)?s.lanes=32:s.lanes=536870912,null}var R=d.children;return d=d.fallback,p?(us(),p=s.mode,R=jd({mode:"hidden",children:R},p),d=ga(d,p,o,null),R.return=s,d.return=s,R.sibling=d,s.child=R,d=s.child,d.memoizedState=Qm(o),d.childLanes=Zm(r,S,o),s.memoizedState=Xm,lc(null,d)):(cs(s),Jm(s,R))}var B=r.memoizedState;if(B!==null&&(R=B.dehydrated,R!==null)){if(y)s.flags&256?(cs(s),s.flags&=-257,s=eg(r,s,o)):s.memoizedState!==null?(us(),s.child=r.child,s.flags|=128,s=null):(us(),R=d.fallback,p=s.mode,d=jd({mode:"visible",children:d.children},p),R=ga(R,p,o,null),R.flags|=2,d.return=s,R.return=s,d.sibling=R,s.child=d,Sa(s,r.child,null,o),d=s.child,d.memoizedState=Qm(o),d.childLanes=Zm(r,S,o),s.memoizedState=Xm,s=lc(null,d));else if(cs(s),Mg(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var Z=S.dgst;S=Z,d=Error(i(419)),d.stack="",d.digest=S,Xl({value:d,source:null,stack:null}),s=eg(r,s,o)}else if(Ot||vo(r,s,o,!1),S=(o&r.childLanes)!==0,Ot||S){if(S=ot,S!==null&&(d=Cl(S,o),d!==0&&d!==B.retryLane))throw B.retryLane=d,ma(r,d),In(S,r,d),Km;Pg(R)||Ld(),s=eg(r,s,o)}else Pg(R)?(s.flags|=192,s.child=r.child,s=null):(r=B.treeContext,lt=ri(R.nextSibling),Jt=s,Ue=!0,is=null,ni=!1,r!==null&&N1(s,r),s=Jm(s,d.children),s.flags|=4096);return s}return p?(us(),R=d.fallback,p=s.mode,B=r.child,Z=B.sibling,d=yr(B,{mode:"hidden",children:d.children}),d.subtreeFlags=B.subtreeFlags&65011712,Z!==null?R=yr(Z,R):(R=ga(R,p,o,null),R.flags|=2),R.return=s,d.return=s,d.sibling=R,s.child=d,lc(null,d),d=s.child,R=r.child.memoizedState,R===null?R=Qm(o):(p=R.cachePool,p!==null?(B=Pt._currentValue,p=p.parent!==B?{parent:B,pool:B}:p):p=U1(),R={baseLanes:R.baseLanes|o,cachePool:p}),d.memoizedState=R,d.childLanes=Zm(r,S,o),s.memoizedState=Xm,lc(r.child,d)):(cs(s),o=r.child,r=o.sibling,o=yr(o,{mode:"visible",children:d.children}),o.return=s,o.sibling=null,r!==null&&(S=s.deletions,S===null?(s.deletions=[r],s.flags|=16):S.push(r)),s.child=o,s.memoizedState=null,o)}function Jm(r,s){return s=jd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function jd(r,s){return r=Nn(22,r,null,s),r.lanes=0,r}function eg(r,s,o){return Sa(s,r.child,null,o),r=Jm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function tx(r,s,o){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),gm(r.return,s,o)}function tg(r,s,o,d,p,y){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:p,treeForkCount:y}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=o,S.tailMode=p,S.treeForkCount=y)}function nx(r,s,o){var d=s.pendingProps,p=d.revealOrder,y=d.tail;d=d.children;var S=At.current,R=(S&2)!==0;if(R?(S=S&1|2,s.flags|=128):S&=1,Te(At,S),tn(r,s,d,o),d=Ue?Yl:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&tx(r,o,s);else if(r.tag===19)tx(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(o=s.child,p=null;o!==null;)r=o.alternate,r!==null&&vd(r)===null&&(p=o),o=o.sibling;o=p,o===null?(p=s.child,s.child=null):(p=o.sibling,o.sibling=null),tg(s,!1,p,o,y,d);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&vd(r)===null){s.child=p;break}r=p.sibling,p.sibling=o,o=p,p=r}tg(s,!0,o,null,y,d);break;case"together":tg(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function _r(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),fs|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(vo(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=yr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=yr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function ng(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&ud(r)))}function cR(r,s,o){switch(s.tag){case 3:Se(s,s.stateNode.containerInfo),ss(s,Pt,r.memoizedState.cache),pa();break;case 27:case 5:Wn(s);break;case 4:Se(s,s.stateNode.containerInfo);break;case 10:ss(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Rm(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(cs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?ex(r,s,o):(cs(s),r=_r(r,s,o),r!==null?r.sibling:null);cs(s);break;case 19:var p=(r.flags&128)!==0;if(d=(o&s.childLanes)!==0,d||(vo(r,s,o,!1),d=(o&s.childLanes)!==0),p){if(d)return nx(r,s,o);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Te(At,At.current),d)break;return null;case 22:return s.lanes=0,Kv(r,s,o,s.pendingProps);case 24:ss(s,Pt,r.memoizedState.cache)}return _r(r,s,o)}function ix(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ot=!0;else{if(!ng(r,o)&&(s.flags&128)===0)return Ot=!1,cR(r,s,o);Ot=(r.flags&131072)!==0}else Ot=!1,Ue&&(s.flags&1048576)!==0&&O1(s,Yl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var d=s.pendingProps;if(r=ba(s.elementType),s.type=r,typeof r=="function")om(r)?(d=Aa(r,d),s.tag=1,s=Zv(null,s,r,d,o)):(s.tag=0,s=Ym(null,s,r,d,o));else{if(r!=null){var p=r.$$typeof;if(p===ne){s.tag=11,s=Hv(null,s,r,d,o);break e}else if(p===D){s.tag=14,s=Wv(null,s,r,d,o);break e}}throw s=X(r)||r,Error(i(306,s,""))}}return s;case 0:return Ym(r,s,s.type,s.pendingProps,o);case 1:return d=s.type,p=Aa(d,s.pendingProps),Zv(r,s,d,p,o);case 3:e:{if(Se(s,s.stateNode.containerInfo),r===null)throw Error(i(387));d=s.pendingProps;var y=s.memoizedState;p=y.element,Sm(r,s),ic(s,d,null,o);var S=s.memoizedState;if(d=S.cache,ss(s,Pt,d),d!==y.cache&&pm(s,[Pt],o,!0),nc(),d=S.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Jv(r,s,d,o);break e}else if(d!==p){p=Jn(Error(i(424)),s),Xl(p),s=Jv(r,s,d,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(lt=ri(r.firstChild),Jt=s,Ue=!0,is=null,ni=!0,o=K1(s,null,d,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(pa(),d===p){s=_r(r,s,o);break e}tn(r,s,d,o)}s=s.child}return s;case 26:return Cd(r,s),r===null?(o=mb(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ue||(o=s.type,r=s.pendingProps,d=Wd(tt.current).createElement(o),d[jt]=s,d[$t]=r,nn(d,o,r),Dt(d),s.stateNode=d):s.memoizedState=mb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Wn(s),r===null&&Ue&&(d=s.stateNode=db(s.type,s.pendingProps,tt.current),Jt=s,ni=!0,p=lt,vs(s.type)?(Og=p,lt=ri(d.firstChild)):lt=p),tn(r,s,s.pendingProps.children,o),Cd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ue&&((p=d=lt)&&(d=LR(d,s.type,s.pendingProps,ni),d!==null?(s.stateNode=d,Jt=s,lt=ri(d.firstChild),ni=!1,p=!0):p=!1),p||rs(s)),Wn(s),p=s.type,y=s.pendingProps,S=r!==null?r.memoizedProps:null,d=y.children,jg(p,y)?d=null:S!==null&&jg(p,S)&&(s.flags|=32),s.memoizedState!==null&&(p=Cm(r,s,eR,null,null,o),_c._currentValue=p),Cd(r,s),tn(r,s,d,o),s.child;case 6:return r===null&&Ue&&((r=o=lt)&&(o=BR(o,s.pendingProps,ni),o!==null?(s.stateNode=o,Jt=s,lt=null,r=!0):r=!1),r||rs(s)),null;case 13:return ex(r,s,o);case 4:return Se(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=Sa(s,null,d,o):tn(r,s,d,o),s.child;case 11:return Hv(r,s,s.type,s.pendingProps,o);case 7:return tn(r,s,s.pendingProps,o),s.child;case 8:return tn(r,s,s.pendingProps.children,o),s.child;case 12:return tn(r,s,s.pendingProps.children,o),s.child;case 10:return d=s.pendingProps,ss(s,s.type,d.value),tn(r,s,d.children,o),s.child;case 9:return p=s.type._context,d=s.pendingProps.children,va(s),p=en(p),d=d(p),s.flags|=1,tn(r,s,d,o),s.child;case 14:return Wv(r,s,s.type,s.pendingProps,o);case 15:return qv(r,s,s.type,s.pendingProps,o);case 19:return nx(r,s,o);case 31:return lR(r,s,o);case 22:return Kv(r,s,o,s.pendingProps);case 24:return va(s),d=en(Pt),r===null?(p=xm(),p===null&&(p=ot,y=ym(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=o),p=y),s.memoizedState={parent:d,cache:p},Tm(s),ss(s,Pt,p)):((r.lanes&o)!==0&&(Sm(r,s),ic(s,null,null,o),nc()),p=r.memoizedState,y=s.memoizedState,p.parent!==d?(p={parent:d,cache:d},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),ss(s,Pt,d)):(d=y.cache,ss(s,Pt,d),d!==p.cache&&pm(s,[Pt],o,!0))),tn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ar(r){r.flags|=4}function ig(r,s,o,d,p){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(jx())r.flags|=8192;else throw Ta=md,bm}else r.flags&=-16777217}function rx(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!xb(s))if(jx())r.flags|=8192;else throw Ta=md,bm}function Dd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Vu():536870912,r.lanes|=s,jo|=s)}function cc(r,s){if(!Ue)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function ct(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,d=0;if(s)for(var p=r.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=d,r.childLanes=o,s}function uR(r,s,o){var d=s.pendingProps;switch(dm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(s),null;case 1:return ct(s),null;case 3:return o=s.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),br(Pt),bn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(yo(s)?Ar(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,fm())),ct(s),null;case 26:var p=s.type,y=s.memoizedState;return r===null?(Ar(s),y!==null?(ct(s),rx(s,y)):(ct(s),ig(s,p,null,d,o))):y?y!==r.memoizedState?(Ar(s),ct(s),rx(s,y)):(ct(s),s.flags&=-16777217):(r=r.memoizedProps,r!==d&&Ar(s),ct(s),ig(s,p,r,d,o)),null;case 27:if(yt(s),o=tt.current,p=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==d&&Ar(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return ct(s),null}r=De.current,yo(s)?V1(s):(r=db(p,d,o),s.stateNode=r,Ar(s))}return ct(s),null;case 5:if(yt(s),p=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==d&&Ar(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return ct(s),null}if(y=De.current,yo(s))V1(s);else{var S=Wd(tt.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?S.createElement(p,{is:d.is}):S.createElement(p)}}y[jt]=s,y[$t]=d;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=y;e:switch(nn(y,p,d),p){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ar(s)}}return ct(s),ig(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==d&&Ar(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(r=tt.current,yo(s)){if(r=s.stateNode,o=s.memoizedProps,d=null,p=Jt,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}r[jt]=s,r=!!(r.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||eb(r.nodeValue,o)),r||rs(s,!0)}else r=Wd(r).createTextNode(d),r[jt]=s,s.stateNode=r}return ct(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(d=yo(s),o!==null){if(r===null){if(!d)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[jt]=s}else pa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),r=!1}else o=fm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(Fn(s),s):(Fn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ct(s),null;case 13:if(d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=yo(s),d!==null&&d.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[jt]=s}else pa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),p=!1}else p=fm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(Fn(s),s):(Fn(s),null)}return Fn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=d!==null,r=r!==null&&r.memoizedState!==null,o&&(d=s.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),Dd(s,s.updateQueue),ct(s),null);case 4:return bn(),r===null&&wg(s.stateNode.containerInfo),ct(s),null;case 10:return br(s.type),ct(s),null;case 19:if(Ee(At),d=s.memoizedState,d===null)return ct(s),null;if(p=(s.flags&128)!==0,y=d.rendering,y===null)if(p)cc(d,!1);else{if(xt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(y=vd(r),y!==null){for(s.flags|=128,cc(d,!1),r=y.updateQueue,s.updateQueue=r,Dd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)k1(o,r),o=o.sibling;return Te(At,At.current&1|2),Ue&&vr(s,d.treeForkCount),s.child}r=r.sibling}d.tail!==null&&mn()>Nd&&(s.flags|=128,p=!0,cc(d,!1),s.lanes=4194304)}else{if(!p)if(r=vd(y),r!==null){if(s.flags|=128,p=!0,r=r.updateQueue,s.updateQueue=r,Dd(s,r),cc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ue)return ct(s),null}else 2*mn()-d.renderingStartTime>Nd&&o!==536870912&&(s.flags|=128,p=!0,cc(d,!1),s.lanes=4194304);d.isBackwards?(y.sibling=s.child,s.child=y):(r=d.last,r!==null?r.sibling=y:s.child=y,d.last=y)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=mn(),r.sibling=null,o=At.current,Te(At,p?o&1|2:o&1),Ue&&vr(s,d.treeForkCount),r):(ct(s),null);case 22:case 23:return Fn(s),Em(),d=s.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(o&536870912)!==0&&(s.flags&128)===0&&(ct(s),s.subtreeFlags&6&&(s.flags|=8192)):ct(s),o=s.updateQueue,o!==null&&Dd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==o&&(s.flags|=2048),r!==null&&Ee(xa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),br(Pt),ct(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function dR(r,s){switch(dm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return br(Pt),bn(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return yt(s),null;case 31:if(s.memoizedState!==null){if(Fn(s),s.alternate===null)throw Error(i(340));pa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Fn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));pa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ee(At),null;case 4:return bn(),null;case 10:return br(s.type),null;case 22:case 23:return Fn(s),Em(),r!==null&&Ee(xa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return br(Pt),null;case 25:return null;default:return null}}function sx(r,s){switch(dm(s),s.tag){case 3:br(Pt),bn();break;case 26:case 27:case 5:yt(s);break;case 4:bn();break;case 31:s.memoizedState!==null&&Fn(s);break;case 13:Fn(s);break;case 19:Ee(At);break;case 10:br(s.type);break;case 22:case 23:Fn(s),Em(),r!==null&&Ee(xa);break;case 24:br(Pt)}}function uc(r,s){try{var o=s.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var p=d.next;o=p;do{if((o.tag&r)===r){d=void 0;var y=o.create,S=o.inst;d=y(),S.destroy=d}o=o.next}while(o!==p)}}catch(R){et(s,s.return,R)}}function ds(r,s,o){try{var d=s.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var y=p.next;d=y;do{if((d.tag&r)===r){var S=d.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,p=s;var B=o,Z=R;try{Z()}catch(re){et(p,B,re)}}}d=d.next}while(d!==y)}}catch(re){et(s,s.return,re)}}function ax(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{X1(s,o)}catch(d){et(r,r.return,d)}}}function ox(r,s,o){o.props=Aa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(d){et(r,s,d)}}function dc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof o=="function"?r.refCleanup=o(d):o.current=d}}catch(p){et(r,s,p)}}function tr(r,s){var o=r.ref,d=r.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(p){et(r,s,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){et(r,s,p)}else o.current=null}function lx(r){var s=r.type,o=r.memoizedProps,d=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(p){et(r,r.return,p)}}function rg(r,s,o){try{var d=r.stateNode;PR(d,r.type,o,s),d[$t]=s}catch(p){et(r,r.return,p)}}function cx(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&vs(r.type)||r.tag===4}function sg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||cx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&vs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ag(r,s,o){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=yi));else if(d!==4&&(d===27&&vs(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(ag(r,s,o),r=r.sibling;r!==null;)ag(r,s,o),r=r.sibling}function kd(r,s,o){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(d!==4&&(d===27&&vs(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(kd(r,s,o),r=r.sibling;r!==null;)kd(r,s,o),r=r.sibling}function ux(r){var s=r.stateNode,o=r.memoizedProps;try{for(var d=r.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);nn(s,d,o),s[jt]=r,s[$t]=o}catch(y){et(r,r.return,y)}}var wr=!1,Nt=!1,og=!1,dx=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function hR(r,s){if(r=r.containerInfo,Ig=Jd,r=_1(r),em(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,R=-1,B=-1,Z=0,re=0,ce=r,ee=null;t:for(;;){for(var ie;ce!==o||p!==0&&ce.nodeType!==3||(R=S+p),ce!==y||d!==0&&ce.nodeType!==3||(B=S+d),ce.nodeType===3&&(S+=ce.nodeValue.length),(ie=ce.firstChild)!==null;)ee=ce,ce=ie;for(;;){if(ce===r)break t;if(ee===o&&++Z===p&&(R=S),ee===y&&++re===d&&(B=S),(ie=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=ie}o=R===-1||B===-1?null:{start:R,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(Cg={focusedElem:r,selectionRange:o},Jd=!1,Wt=s;Wt!==null;)if(s=Wt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Wt=r;else for(;Wt!==null;){switch(s=Wt,y=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)p=r[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=s,p=y.memoizedProps,y=y.memoizedState,d=o.stateNode;try{var ge=Aa(o.type,p);r=d.getSnapshotBeforeUpdate(ge,y),d.__reactInternalSnapshotBeforeUpdate=r}catch(we){et(o,o.return,we)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)kg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":kg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Wt=r;break}Wt=s.return}}function hx(r,s,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:Rr(r,o),d&4&&uc(5,o);break;case 1:if(Rr(r,o),d&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(S){et(o,o.return,S)}else{var p=Aa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(p,s,r.__reactInternalSnapshotBeforeUpdate)}catch(S){et(o,o.return,S)}}d&64&&ax(o),d&512&&dc(o,o.return);break;case 3:if(Rr(r,o),d&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{X1(r,s)}catch(S){et(o,o.return,S)}}break;case 27:s===null&&d&4&&ux(o);case 26:case 5:Rr(r,o),s===null&&d&4&&lx(o),d&512&&dc(o,o.return);break;case 12:Rr(r,o);break;case 31:Rr(r,o),d&4&&gx(r,o);break;case 13:Rr(r,o),d&4&&px(r,o),d&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=TR.bind(null,o),zR(r,o))));break;case 22:if(d=o.memoizedState!==null||wr,!d){s=s!==null&&s.memoizedState!==null||Nt,p=wr;var y=Nt;wr=d,(Nt=s)&&!y?Ir(r,o,(o.subtreeFlags&8772)!==0):Rr(r,o),wr=p,Nt=y}break;case 30:break;default:Rr(r,o)}}function fx(r){var s=r.alternate;s!==null&&(r.alternate=null,fx(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ja(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ht=null,An=!1;function Er(r,s,o){for(o=o.child;o!==null;)mx(r,s,o),o=o.sibling}function mx(r,s,o){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(fi,o)}catch{}switch(o.tag){case 26:Nt||tr(o,s),Er(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Nt||tr(o,s);var d=ht,p=An;vs(o.type)&&(ht=o.stateNode,An=!1),Er(r,s,o),bc(o.stateNode),ht=d,An=p;break;case 5:Nt||tr(o,s);case 6:if(d=ht,p=An,ht=null,Er(r,s,o),ht=d,An=p,ht!==null)if(An)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(y){et(o,s,y)}else try{ht.removeChild(o.stateNode)}catch(y){et(o,s,y)}break;case 18:ht!==null&&(An?(r=ht,ab(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Fo(r)):ab(ht,o.stateNode));break;case 4:d=ht,p=An,ht=o.stateNode.containerInfo,An=!0,Er(r,s,o),ht=d,An=p;break;case 0:case 11:case 14:case 15:ds(2,o,s),Nt||ds(4,o,s),Er(r,s,o);break;case 1:Nt||(tr(o,s),d=o.stateNode,typeof d.componentWillUnmount=="function"&&ox(o,s,d)),Er(r,s,o);break;case 21:Er(r,s,o);break;case 22:Nt=(d=Nt)||o.memoizedState!==null,Er(r,s,o),Nt=d;break;default:Er(r,s,o)}}function gx(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Fo(r)}catch(o){et(s,s.return,o)}}}function px(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Fo(r)}catch(o){et(s,s.return,o)}}function fR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new dx),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new dx),s;default:throw Error(i(435,r.tag))}}function Pd(r,s){var o=fR(r);s.forEach(function(d){if(!o.has(d)){o.add(d);var p=SR.bind(null,r,d);d.then(p,p)}})}function wn(r,s){var o=s.deletions;if(o!==null)for(var d=0;d<o.length;d++){var p=o[d],y=r,S=s,R=S;e:for(;R!==null;){switch(R.tag){case 27:if(vs(R.type)){ht=R.stateNode,An=!1;break e}break;case 5:ht=R.stateNode,An=!1;break e;case 3:case 4:ht=R.stateNode.containerInfo,An=!0;break e}R=R.return}if(ht===null)throw Error(i(160));mx(y,S,p),ht=null,An=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)yx(s,r),s=s.sibling}var _i=null;function yx(r,s){var o=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:wn(s,r),En(r),d&4&&(ds(3,r,r.return),uc(3,r),ds(5,r,r.return));break;case 1:wn(s,r),En(r),d&512&&(Nt||o===null||tr(o,o.return)),d&64&&wr&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var p=_i;if(wn(s,r),En(r),d&512&&(Nt||o===null||tr(o,o.return)),d&4){var y=o!==null?o.memoizedState:null;if(d=r.memoizedState,o===null)if(d===null)if(r.stateNode===null){e:{d=r.type,o=r.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":y=p.getElementsByTagName("title")[0],(!y||y[zi]||y[jt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(d),p.head.insertBefore(y,p.querySelector("head > title"))),nn(y,d,o),y[jt]=r,Dt(y),d=y;break e;case"link":var S=yb("link","href",p).get(d+(o.href||""));if(S){for(var R=0;R<S.length;R++)if(y=S[R],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(R,1);break t}}y=p.createElement(d),nn(y,d,o),p.head.appendChild(y);break;case"meta":if(S=yb("meta","content",p).get(d+(o.content||""))){for(R=0;R<S.length;R++)if(y=S[R],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(R,1);break t}}y=p.createElement(d),nn(y,d,o),p.head.appendChild(y);break;default:throw Error(i(468,d))}y[jt]=r,Dt(y),d=y}r.stateNode=d}else vb(p,r.type,r.stateNode);else r.stateNode=pb(p,d,r.memoizedProps);else y!==d?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,d===null?vb(p,r.type,r.stateNode):pb(p,d,r.memoizedProps)):d===null&&r.stateNode!==null&&rg(r,r.memoizedProps,o.memoizedProps)}break;case 27:wn(s,r),En(r),d&512&&(Nt||o===null||tr(o,o.return)),o!==null&&d&4&&rg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(wn(s,r),En(r),d&512&&(Nt||o===null||tr(o,o.return)),r.flags&32){p=r.stateNode;try{_n(p,"")}catch(ge){et(r,r.return,ge)}}d&4&&r.stateNode!=null&&(p=r.memoizedProps,rg(r,p,o!==null?o.memoizedProps:p)),d&1024&&(og=!0);break;case 6:if(wn(s,r),En(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,o=r.stateNode;try{o.nodeValue=d}catch(ge){et(r,r.return,ge)}}break;case 3:if(Yd=null,p=_i,_i=qd(s.containerInfo),wn(s,r),_i=p,En(r),d&4&&o!==null&&o.memoizedState.isDehydrated)try{Fo(s.containerInfo)}catch(ge){et(r,r.return,ge)}og&&(og=!1,vx(r));break;case 4:d=_i,_i=qd(r.stateNode.containerInfo),wn(s,r),En(r),_i=d;break;case 12:wn(s,r),En(r);break;case 31:wn(s,r),En(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Pd(r,d)));break;case 13:wn(s,r),En(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Od=mn()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Pd(r,d)));break;case 22:p=r.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,Z=wr,re=Nt;if(wr=Z||p,Nt=re||B,wn(s,r),Nt=re,wr=Z,En(r),d&8192)e:for(s=r.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(o===null||B||wr||Nt||wa(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){B=o=s;try{if(y=B.stateNode,p)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=B.stateNode;var ce=B.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;R.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(ge){et(B,B.return,ge)}}}else if(s.tag===6){if(o===null){B=s;try{B.stateNode.nodeValue=p?"":B.memoizedProps}catch(ge){et(B,B.return,ge)}}}else if(s.tag===18){if(o===null){B=s;try{var ie=B.stateNode;p?ob(ie,!0):ob(B.stateNode,!1)}catch(ge){et(B,B.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=r.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,Pd(r,o))));break;case 19:wn(s,r),En(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Pd(r,d)));break;case 30:break;case 21:break;default:wn(s,r),En(r)}}function En(r){var s=r.flags;if(s&2){try{for(var o,d=r.return;d!==null;){if(cx(d)){o=d;break}d=d.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var p=o.stateNode,y=sg(r);kd(r,y,p);break;case 5:var S=o.stateNode;o.flags&32&&(_n(S,""),o.flags&=-33);var R=sg(r);kd(r,R,S);break;case 3:case 4:var B=o.stateNode.containerInfo,Z=sg(r);ag(r,Z,B);break;default:throw Error(i(161))}}catch(re){et(r,r.return,re)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function vx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;vx(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Rr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)hx(r,s.alternate,s),s=s.sibling}function wa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ds(4,s,s.return),wa(s);break;case 1:tr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&ox(s,s.return,o),wa(s);break;case 27:bc(s.stateNode);case 26:case 5:tr(s,s.return),wa(s);break;case 22:s.memoizedState===null&&wa(s);break;case 30:wa(s);break;default:wa(s)}r=r.sibling}}function Ir(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,p=r,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:Ir(p,y,o),uc(4,y);break;case 1:if(Ir(p,y,o),d=y,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Z){et(d,d.return,Z)}if(d=y,p=d.updateQueue,p!==null){var R=d.stateNode;try{var B=p.shared.hiddenCallbacks;if(B!==null)for(p.shared.hiddenCallbacks=null,p=0;p<B.length;p++)Y1(B[p],R)}catch(Z){et(d,d.return,Z)}}o&&S&64&&ax(y),dc(y,y.return);break;case 27:ux(y);case 26:case 5:Ir(p,y,o),o&&d===null&&S&4&&lx(y),dc(y,y.return);break;case 12:Ir(p,y,o);break;case 31:Ir(p,y,o),o&&S&4&&gx(p,y);break;case 13:Ir(p,y,o),o&&S&4&&px(p,y);break;case 22:y.memoizedState===null&&Ir(p,y,o),dc(y,y.return);break;case 30:break;default:Ir(p,y,o)}s=s.sibling}}function lg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Ql(o))}function cg(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ql(r))}function Ai(r,s,o,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xx(r,s,o,d),s=s.sibling}function xx(r,s,o,d){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Ai(r,s,o,d),p&2048&&uc(9,s);break;case 1:Ai(r,s,o,d);break;case 3:Ai(r,s,o,d),p&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ql(r)));break;case 12:if(p&2048){Ai(r,s,o,d),r=s.stateNode;try{var y=s.memoizedProps,S=y.id,R=y.onPostCommit;typeof R=="function"&&R(S,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){et(s,s.return,B)}}else Ai(r,s,o,d);break;case 31:Ai(r,s,o,d);break;case 13:Ai(r,s,o,d);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?Ai(r,s,o,d):hc(r,s):y._visibility&2?Ai(r,s,o,d):(y._visibility|=2,Ro(r,s,o,d,(s.subtreeFlags&10256)!==0||!1)),p&2048&&lg(S,s);break;case 24:Ai(r,s,o,d),p&2048&&cg(s.alternate,s);break;default:Ai(r,s,o,d)}}function Ro(r,s,o,d,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=r,S=s,R=o,B=d,Z=S.flags;switch(S.tag){case 0:case 11:case 15:Ro(y,S,R,B,p),uc(8,S);break;case 23:break;case 22:var re=S.stateNode;S.memoizedState!==null?re._visibility&2?Ro(y,S,R,B,p):hc(y,S):(re._visibility|=2,Ro(y,S,R,B,p)),p&&Z&2048&&lg(S.alternate,S);break;case 24:Ro(y,S,R,B,p),p&&Z&2048&&cg(S.alternate,S);break;default:Ro(y,S,R,B,p)}s=s.sibling}}function hc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,d=s,p=d.flags;switch(d.tag){case 22:hc(o,d),p&2048&&lg(d.alternate,d);break;case 24:hc(o,d),p&2048&&cg(d.alternate,d);break;default:hc(o,d)}s=s.sibling}}var fc=8192;function Io(r,s,o){if(r.subtreeFlags&fc)for(r=r.child;r!==null;)bx(r,s,o),r=r.sibling}function bx(r,s,o){switch(r.tag){case 26:Io(r,s,o),r.flags&fc&&r.memoizedState!==null&&JR(o,_i,r.memoizedState,r.memoizedProps);break;case 5:Io(r,s,o);break;case 3:case 4:var d=_i;_i=qd(r.stateNode.containerInfo),Io(r,s,o),_i=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=fc,fc=16777216,Io(r,s,o),fc=d):Io(r,s,o));break;default:Io(r,s,o)}}function Tx(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function mc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var d=s[o];Wt=d,_x(d,r)}Tx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Sx(r),r=r.sibling}function Sx(r){switch(r.tag){case 0:case 11:case 15:mc(r),r.flags&2048&&ds(9,r,r.return);break;case 3:mc(r);break;case 12:mc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Md(r)):mc(r);break;default:mc(r)}}function Md(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var d=s[o];Wt=d,_x(d,r)}Tx(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ds(8,s,s.return),Md(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Md(s));break;default:Md(s)}r=r.sibling}}function _x(r,s){for(;Wt!==null;){var o=Wt;switch(o.tag){case 0:case 11:case 15:ds(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ql(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,Wt=d;else e:for(o=r;Wt!==null;){d=Wt;var p=d.sibling,y=d.return;if(fx(d),d===o){Wt=null;break e}if(p!==null){p.return=y,Wt=p;break e}Wt=y}}}var mR={getCacheForType:function(r){var s=en(Pt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return en(Pt).controller.signal}},gR=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ot=null,Oe=null,Ve=0,Je=0,Ln=null,hs=!1,Co=!1,ug=!1,Cr=0,xt=0,fs=0,Ea=0,dg=0,Bn=0,jo=0,gc=null,Rn=null,hg=!1,Od=0,Ax=0,Nd=1/0,Vd=null,ms=null,Ut=0,gs=null,Do=null,jr=0,fg=0,mg=null,wx=null,pc=0,gg=null;function zn(){return(Xe&2)!==0&&Ve!==0?Ve&-Ve:G.T!==null?Tg():Fu()}function Ex(){if(Bn===0)if((Ve&536870912)===0||Ue){var r=Js;Js<<=1,(Js&3932160)===0&&(Js=262144),Bn=r}else Bn=536870912;return r=Vn.current,r!==null&&(r.flags|=32),Bn}function In(r,s,o){(r===ot&&(Je===2||Je===9)||r.cancelPendingCommit!==null)&&(ko(r,0),ps(r,Ve,Bn,!1)),ea(r,o),((Xe&2)===0||r!==ot)&&(r===ot&&((Xe&2)===0&&(Ea|=o),xt===4&&ps(r,Ve,Bn,!1)),nr(r))}function Rx(r,s,o){if((Xe&6)!==0)throw Error(i(327));var d=!o&&(s&127)===0&&(s&r.expiredLanes)===0||mi(r,s),p=d?vR(r,s):yg(r,s,!0),y=d;do{if(p===0){Co&&!d&&ps(r,s,0,!1);break}else{if(o=r.current.alternate,y&&!pR(o)){p=yg(r,s,!1),y=!1;continue}if(p===2){if(y=s,r.errorRecoveryDisabledLanes&y)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var R=r;p=gc;var B=R.current.memoizedState.isDehydrated;if(B&&(ko(R,S).flags|=256),S=yg(R,S,!1),S!==2){if(ug&&!B){R.errorRecoveryDisabledLanes|=y,Ea|=y,p=4;break e}y=Rn,Rn=p,y!==null&&(Rn===null?Rn=y:Rn.push.apply(Rn,y))}p=S}if(y=!1,p!==2)continue}}if(p===1){ko(r,0),ps(r,s,0,!0);break}e:{switch(d=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ps(d,s,Bn,!hs);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=Od+300-mn(),10<p)){if(ps(d,s,Bn,!hs),Fi(d,0,!0)!==0)break e;jr=s,d.timeoutHandle=rb(Ix.bind(null,d,o,Rn,Vd,hg,s,Bn,Ea,jo,hs,y,"Throttled",-0,0),p);break e}Ix(d,o,Rn,Vd,hg,s,Bn,Ea,jo,hs,y,null,-0,0)}}break}while(!0);nr(r)}function Ix(r,s,o,d,p,y,S,R,B,Z,re,ce,ee,ie){if(r.timeoutHandle=-1,ce=s.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yi},bx(s,y,ce);var ge=(y&62914560)===y?Od-mn():(y&4194048)===y?Ax-mn():0;if(ge=eI(ce,ge),ge!==null){jr=y,r.cancelPendingCommit=ge(Nx.bind(null,r,s,y,o,d,p,S,R,B,re,ce,null,ee,ie)),ps(r,y,S,!Z);return}}Nx(r,s,y,o,d,p,S,R,B)}function pR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var p=o[d],y=p.getSnapshot;p=p.value;try{if(!On(y(),p))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(r,s,o,d){s&=~dg,s&=~Ea,r.suspendedLanes|=s,r.pingedLanes&=~s,d&&(r.warmLanes|=s),d=r.expirationTimes;for(var p=s;0<p;){var y=31-St(p),S=1<<y;d[y]=-1,p&=~S}o!==0&&ta(r,o,s)}function Fd(){return(Xe&6)===0?(yc(0),!1):!0}function pg(){if(Oe!==null){if(Je===0)var r=Oe.return;else r=Oe,xr=ya=null,km(r),So=null,Jl=0,r=Oe;for(;r!==null;)sx(r.alternate,r),r=r.return;Oe=null}}function ko(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,NR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),jr=0,pg(),ot=r,Oe=o=yr(r.current,null),Ve=s,Je=0,Ln=null,hs=!1,Co=mi(r,s),ug=!1,jo=Bn=dg=Ea=fs=xt=0,Rn=gc=null,hg=!1,(s&8)!==0&&(s|=s&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=s;0<d;){var p=31-St(d),y=1<<p;s|=r[p],d&=~y}return Cr=s,sd(),o}function Cx(r,s){Pe=null,G.H=oc,s===To||s===fd?(s=H1(),Je=3):s===bm?(s=H1(),Je=4):Je=s===Km?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ln=s,Oe===null&&(xt=1,Rd(r,Jn(s,r.current)))}function jx(){var r=Vn.current;return r===null?!0:(Ve&4194048)===Ve?ii===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?r===ii:!1}function Dx(){var r=G.H;return G.H=oc,r===null?oc:r}function kx(){var r=G.A;return G.A=mR,r}function Ld(){xt=4,hs||(Ve&4194048)!==Ve&&Vn.current!==null||(Co=!0),(fs&134217727)===0&&(Ea&134217727)===0||ot===null||ps(ot,Ve,Bn,!1)}function yg(r,s,o){var d=Xe;Xe|=2;var p=Dx(),y=kx();(ot!==r||Ve!==s)&&(Vd=null,ko(r,s)),s=!1;var S=xt;e:do try{if(Je!==0&&Oe!==null){var R=Oe,B=Ln;switch(Je){case 8:pg(),S=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(s=!0);var Z=Je;if(Je=0,Ln=null,Po(r,R,B,Z),o&&Co){S=0;break e}break;default:Z=Je,Je=0,Ln=null,Po(r,R,B,Z)}}yR(),S=xt;break}catch(re){Cx(r,re)}while(!0);return s&&r.shellSuspendCounter++,xr=ya=null,Xe=d,G.H=p,G.A=y,Oe===null&&(ot=null,Ve=0,sd()),S}function yR(){for(;Oe!==null;)Px(Oe)}function vR(r,s){var o=Xe;Xe|=2;var d=Dx(),p=kx();ot!==r||Ve!==s?(Vd=null,Nd=mn()+500,ko(r,s)):Co=mi(r,s);e:do try{if(Je!==0&&Oe!==null){s=Oe;var y=Ln;t:switch(Je){case 1:Je=0,Ln=null,Po(r,s,y,1);break;case 2:case 9:if(G1(y)){Je=0,Ln=null,Mx(s);break}s=function(){Je!==2&&Je!==9||ot!==r||(Je=7),nr(r)},y.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:G1(y)?(Je=0,Ln=null,Mx(s)):(Je=0,Ln=null,Po(r,s,y,7));break;case 5:var S=null;switch(Oe.tag){case 26:S=Oe.memoizedState;case 5:case 27:var R=Oe;if(S?xb(S):R.stateNode.complete){Je=0,Ln=null;var B=R.sibling;if(B!==null)Oe=B;else{var Z=R.return;Z!==null?(Oe=Z,Bd(Z)):Oe=null}break t}}Je=0,Ln=null,Po(r,s,y,5);break;case 6:Je=0,Ln=null,Po(r,s,y,6);break;case 8:pg(),xt=6;break e;default:throw Error(i(462))}}xR();break}catch(re){Cx(r,re)}while(!0);return xr=ya=null,G.H=d,G.A=p,Xe=o,Oe!==null?0:(ot=null,Ve=0,sd(),xt)}function xR(){for(;Oe!==null&&!qf();)Px(Oe)}function Px(r){var s=ix(r.alternate,r,Cr);r.memoizedProps=r.pendingProps,s===null?Bd(r):Oe=s}function Mx(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=Qv(o,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=Qv(o,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:km(s);default:sx(o,s),s=Oe=k1(s,Cr),s=ix(o,s,Cr)}r.memoizedProps=r.pendingProps,s===null?Bd(r):Oe=s}function Po(r,s,o,d){xr=ya=null,km(s),So=null,Jl=0;var p=s.return;try{if(oR(r,p,s,o,Ve)){xt=1,Rd(r,Jn(o,r.current)),Oe=null;return}}catch(y){if(p!==null)throw Oe=p,y;xt=1,Rd(r,Jn(o,r.current)),Oe=null;return}s.flags&32768?(Ue||d===1?r=!0:Co||(Ve&536870912)!==0?r=!1:(hs=r=!0,(d===2||d===9||d===3||d===6)&&(d=Vn.current,d!==null&&d.tag===13&&(d.flags|=16384))),Ox(s,r)):Bd(s)}function Bd(r){var s=r;do{if((s.flags&32768)!==0){Ox(s,hs);return}r=s.return;var o=uR(s.alternate,s,Cr);if(o!==null){Oe=o;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=r}while(s!==null);xt===0&&(xt=5)}function Ox(r,s){do{var o=dR(r.alternate,r);if(o!==null){o.flags&=32767,Oe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Oe=r;return}Oe=r=o}while(r!==null);xt=6,Oe=null}function Nx(r,s,o,d,p,y,S,R,B){r.cancelPendingCommit=null;do zd();while(Ut!==0);if((Xe&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=sm,Xf(r,o,y,S,R,B),r===ot&&(Oe=ot=null,Ve=0),Do=s,gs=r,jr=o,fg=y,mg=p,wx=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,_R(Wr,function(){return zx(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=G.T,G.T=null,p=U.p,U.p=2,S=Xe,Xe|=4;try{hR(r,s,o)}finally{Xe=S,U.p=p,G.T=d}}Ut=1,Vx(),Fx(),Lx()}}function Vx(){if(Ut===1){Ut=0;var r=gs,s=Do,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var d=U.p;U.p=2;var p=Xe;Xe|=4;try{yx(s,r);var y=Cg,S=_1(r.containerInfo),R=y.focusedElem,B=y.selectionRange;if(S!==R&&R&&R.ownerDocument&&S1(R.ownerDocument.documentElement,R)){if(B!==null&&em(R)){var Z=B.start,re=B.end;if(re===void 0&&(re=Z),"selectionStart"in R)R.selectionStart=Z,R.selectionEnd=Math.min(re,R.value.length);else{var ce=R.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var ie=ee.getSelection(),ge=R.textContent.length,we=Math.min(B.start,ge),st=B.end===void 0?we:Math.min(B.end,ge);!ie.extend&&we>st&&(S=st,st=we,we=S);var K=T1(R,we),$=T1(R,st);if(K&&$&&(ie.rangeCount!==1||ie.anchorNode!==K.node||ie.anchorOffset!==K.offset||ie.focusNode!==$.node||ie.focusOffset!==$.offset)){var Q=ce.createRange();Q.setStart(K.node,K.offset),ie.removeAllRanges(),we>st?(ie.addRange(Q),ie.extend($.node,$.offset)):(Q.setEnd($.node,$.offset),ie.addRange(Q))}}}}for(ce=[],ie=R;ie=ie.parentNode;)ie.nodeType===1&&ce.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ce.length;R++){var ae=ce[R];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Jd=!!Ig,Cg=Ig=null}finally{Xe=p,U.p=d,G.T=o}}r.current=s,Ut=2}}function Fx(){if(Ut===2){Ut=0;var r=gs,s=Do,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var d=U.p;U.p=2;var p=Xe;Xe|=4;try{hx(r,s.alternate,s)}finally{Xe=p,U.p=d,G.T=o}}Ut=3}}function Lx(){if(Ut===4||Ut===3){Ut=0,Du();var r=gs,s=Do,o=jr,d=wx;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ut=5:(Ut=0,Do=gs=null,Bx(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(ms=null),fr(o),s=s.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(fi,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=G.T,p=U.p,U.p=2,G.T=null;try{for(var y=r.onRecoverableError,S=0;S<d.length;S++){var R=d[S];y(R.value,{componentStack:R.stack})}}finally{G.T=s,U.p=p}}(jr&3)!==0&&zd(),nr(r),p=r.pendingLanes,(o&261930)!==0&&(p&42)!==0?r===gg?pc++:(pc=0,gg=r):pc=0,yc(0)}}function Bx(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ql(s)))}function zd(){return Vx(),Fx(),Lx(),zx()}function zx(){if(Ut!==5)return!1;var r=gs,s=fg;fg=0;var o=fr(jr),d=G.T,p=U.p;try{U.p=32>o?32:o,G.T=null,o=mg,mg=null;var y=gs,S=jr;if(Ut=0,Do=gs=null,jr=0,(Xe&6)!==0)throw Error(i(331));var R=Xe;if(Xe|=4,Sx(y.current),xx(y,y.current,S,o),Xe=R,yc(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(fi,y)}catch{}return!0}finally{U.p=p,G.T=d,Bx(r,s)}}function Ux(r,s,o){s=Jn(o,s),s=qm(r.stateNode,s,2),r=ls(r,s,2),r!==null&&(ea(r,2),nr(r))}function et(r,s,o){if(r.tag===3)Ux(r,r,o);else for(;s!==null;){if(s.tag===3){Ux(s,r,o);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ms===null||!ms.has(d))){r=Jn(o,r),o=Gv(2),d=ls(s,o,2),d!==null&&($v(o,d,s,r),ea(d,2),nr(d));break}}s=s.return}}function vg(r,s,o){var d=r.pingCache;if(d===null){d=r.pingCache=new gR;var p=new Set;d.set(s,p)}else p=d.get(s),p===void 0&&(p=new Set,d.set(s,p));p.has(o)||(ug=!0,p.add(o),r=bR.bind(null,r,s,o),s.then(r,r))}function bR(r,s,o){var d=r.pingCache;d!==null&&d.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ot===r&&(Ve&o)===o&&(xt===4||xt===3&&(Ve&62914560)===Ve&&300>mn()-Od?(Xe&2)===0&&ko(r,0):dg|=o,jo===Ve&&(jo=0)),nr(r)}function Gx(r,s){s===0&&(s=Vu()),r=ma(r,s),r!==null&&(ea(r,s),nr(r))}function TR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Gx(r,o)}function SR(r,s){var o=0;switch(r.tag){case 31:case 13:var d=r.stateNode,p=r.memoizedState;p!==null&&(o=p.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),Gx(r,o)}function _R(r,s){return zt(r,s)}var Ud=null,Mo=null,xg=!1,Gd=!1,bg=!1,ys=0;function nr(r){r!==Mo&&r.next===null&&(Mo===null?Ud=Mo=r:Mo=Mo.next=r),Gd=!0,xg||(xg=!0,wR())}function yc(r,s){if(!bg&&Gd){bg=!0;do for(var o=!1,d=Ud;d!==null;){if(r!==0){var p=d.pendingLanes;if(p===0)var y=0;else{var S=d.suspendedLanes,R=d.pingedLanes;y=(1<<31-St(42|r)+1)-1,y&=p&~(S&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,qx(d,y))}else y=Ve,y=Fi(d,d===ot?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||mi(d,y)||(o=!0,qx(d,y));d=d.next}while(o);bg=!1}}function AR(){$x()}function $x(){Gd=xg=!1;var r=0;ys!==0&&OR()&&(r=ys);for(var s=mn(),o=null,d=Ud;d!==null;){var p=d.next,y=Hx(d,s);y===0?(d.next=null,o===null?Ud=p:o.next=p,p===null&&(Mo=o)):(o=d,(r!==0||(y&3)!==0)&&(Gd=!0)),d=p}Ut!==0&&Ut!==5||yc(r),ys!==0&&(ys=0)}function Hx(r,s){for(var o=r.suspendedLanes,d=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var S=31-St(y),R=1<<S,B=p[S];B===-1?((R&o)===0||(R&d)!==0)&&(p[S]=Yf(R,s)):B<=s&&(r.expiredLanes|=R),y&=~R}if(s=ot,o=Ve,o=Fi(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,o===0||r===s&&(Je===2||Je===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Hr(d),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||mi(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(d!==null&&Hr(d),fr(o)){case 2:case 8:o=Rl;break;case 32:o=Wr;break;case 268435456:o=ku;break;default:o=Wr}return d=Wx.bind(null,r),o=zt(o,d),r.callbackPriority=s,r.callbackNode=o,s}return d!==null&&d!==null&&Hr(d),r.callbackPriority=2,r.callbackNode=null,2}function Wx(r,s){if(Ut!==0&&Ut!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(zd()&&r.callbackNode!==o)return null;var d=Ve;return d=Fi(r,r===ot?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(Rx(r,d,s),Hx(r,mn()),r.callbackNode!=null&&r.callbackNode===o?Wx.bind(null,r):null)}function qx(r,s){if(zd())return null;Rx(r,s,!0)}function wR(){VR(function(){(Xe&6)!==0?zt(El,AR):$x()})}function Tg(){if(ys===0){var r=xo;r===0&&(r=Ni,Ni<<=1,(Ni&261888)===0&&(Ni=256)),ys=r}return ys}function Kx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:io(""+r)}function Yx(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function ER(r,s,o,d,p){if(s==="submit"&&o&&o.stateNode===p){var y=Kx((p[$t]||null).action),S=d.submitter;S&&(s=(s=S[$t]||null)?Kx(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var R=new Yi("action","action",null,d,p);r.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ys!==0){var B=S?Yx(p,S):new FormData(p);zm(o,{pending:!0,data:B,method:p.method,action:y},null,B)}}else typeof y=="function"&&(R.preventDefault(),B=S?Yx(p,S):new FormData(p),zm(o,{pending:!0,data:B,method:p.method,action:y},y,B))},currentTarget:p}]})}}for(var Sg=0;Sg<rm.length;Sg++){var _g=rm[Sg],RR=_g.toLowerCase(),IR=_g[0].toUpperCase()+_g.slice(1);Si(RR,"on"+IR)}Si(E1,"onAnimationEnd"),Si(R1,"onAnimationIteration"),Si(I1,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si($E,"onTransitionRun"),Si(HE,"onTransitionStart"),Si(WE,"onTransitionCancel"),Si(C1,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vc));function Xx(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var d=r[o],p=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var S=d.length-1;0<=S;S--){var R=d[S],B=R.instance,Z=R.currentTarget;if(R=R.listener,B!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=Z;try{y(p)}catch(re){rd(re)}p.currentTarget=null,y=B}else for(S=0;S<d.length;S++){if(R=d[S],B=R.instance,Z=R.currentTarget,R=R.listener,B!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=Z;try{y(p)}catch(re){rd(re)}p.currentTarget=null,y=B}}}}function Ne(r,s){var o=s[Za];o===void 0&&(o=s[Za]=new Set);var d=r+"__bubble";o.has(d)||(Qx(s,r,2,!1),o.add(d))}function Ag(r,s,o){var d=0;s&&(d|=4),Qx(o,r,d,s)}var $d="_reactListening"+Math.random().toString(36).slice(2);function wg(r){if(!r[$d]){r[$d]=!0,jl.forEach(function(o){o!=="selectionchange"&&(CR.has(o)||Ag(o,!1,r),Ag(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[$d]||(s[$d]=!0,Ag("selectionchange",!1,s))}}function Qx(r,s,o,d){switch(Eb(s)){case 2:var p=iI;break;case 8:p=rI;break;default:p=Bg}o=p.bind(null,s,o,r),p=void 0,!aa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),d?p!==void 0?r.addEventListener(s,o,{capture:!0,passive:p}):r.addEventListener(s,o,!0):p!==void 0?r.addEventListener(s,o,{passive:p}):r.addEventListener(s,o,!1)}function Eg(r,s,o,d,p){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var R=d.stateNode.containerInfo;if(R===p)break;if(S===4)for(S=d.return;S!==null;){var B=S.tag;if((B===3||B===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;R!==null;){if(S=Ui(R),S===null)return;if(B=S.tag,B===5||B===6||B===26||B===27){d=y=S;continue e}R=R.parentNode}}d=d.return}Zr(function(){var Z=y,re=Yn(o),ce=[];e:{var ee=j1.get(r);if(ee!==void 0){var ie=Yi,ge=r;switch(r){case"keypress":if(la(o)===0)break e;case"keydown":case"keyup":ie=td;break;case"focusin":ge="focus",ie=ua;break;case"focusout":ge="blur",ie=ua;break;case"beforeblur":case"afterblur":ie=ua;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=T;break;case E1:case R1:case I1:ie=Ku;break;case C1:ie=j;break;case"scroll":case"scrollend":ie=Ul;break;case"wheel":ie=te;break;case"copy":case"cut":case"paste":ie=Yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=pr;break;case"toggle":case"beforetoggle":ie=ke}var we=(s&4)!==0,st=!we&&(r==="scroll"||r==="scrollend"),K=we?ee!==null?ee+"Capture":null:ee;we=[];for(var $=Z,Q;$!==null;){var ae=$;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||K===null||(ae=vi($,K),ae!=null&&we.push(xc($,ae,Q))),st)break;$=$.return}0<we.length&&(ee=new ie(ee,ge,null,o,re),ce.push({event:ee,listeners:we}))}}if((s&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",ee&&o!==Ll&&(ge=o.relatedTarget||o.fromElement)&&(Ui(ge)||ge[Bi]))break e;if((ie||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,ie?(ge=o.relatedTarget||o.toElement,ie=Z,ge=ge?Ui(ge):null,ge!==null&&(st=l(ge),we=ge.tag,ge!==st||we!==5&&we!==27&&we!==6)&&(ge=null)):(ie=null,ge=Z),ie!==ge)){if(we=Gl,ae="onMouseLeave",K="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(we=pr,ae="onPointerLeave",K="onPointerEnter",$="pointer"),st=ie==null?ee:Pn(ie),Q=ge==null?ee:Pn(ge),ee=new we(ae,$+"leave",ie,o,re),ee.target=st,ee.relatedTarget=Q,ae=null,Ui(re)===Z&&(we=new we(K,$+"enter",ge,o,re),we.target=Q,we.relatedTarget=st,ae=we),st=ae,ie&&ge)t:{for(we=jR,K=ie,$=ge,Q=0,ae=K;ae;ae=we(ae))Q++;ae=0;for(var xe=$;xe;xe=we(xe))ae++;for(;0<Q-ae;)K=we(K),Q--;for(;0<ae-Q;)$=we($),ae--;for(;Q--;){if(K===$||$!==null&&K===$.alternate){we=K;break t}K=we(K),$=we($)}we=null}else we=null;ie!==null&&Zx(ce,ee,ie,we,!1),ge!==null&&st!==null&&Zx(ce,st,ge,we,!0)}}e:{if(ee=Z?Pn(Z):window,ie=ee.nodeName&&ee.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ee.type==="file")var qe=g1;else if(f1(ee))if(p1)qe=zE;else{qe=LE;var ye=FE}else ie=ee.nodeName,!ie||ie.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&no(Z.elementType)&&(qe=g1):qe=BE;if(qe&&(qe=qe(r,Z))){m1(ce,qe,o,re);break e}ye&&ye(r,ee,Z),r==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&Nl(ee,"number",ee.value)}switch(ye=Z?Pn(Z):window,r){case"focusin":(f1(ye)||ye.contentEditable==="true")&&(uo=ye,tm=Z,Kl=null);break;case"focusout":Kl=tm=uo=null;break;case"mousedown":nm=!0;break;case"contextmenu":case"mouseup":case"dragend":nm=!1,A1(ce,o,re);break;case"selectionchange":if(GE)break;case"keydown":case"keyup":A1(ce,o,re)}var Me;if(Ye)e:{switch(r){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else co?da(r,o)&&(Fe="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(Zi&&o.locale!=="ko"&&(co||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&co&&(Me=zl()):(Ki=re,Bl="value"in Ki?Ki.value:Ki.textContent,co=!0)),ye=Hd(Z,Fe),0<ye.length&&(Fe=new Qi(Fe,r,null,o,re),ce.push({event:Fe,listeners:ye}),Me?Fe.data=Me:(Me=lo(o),Me!==null&&(Fe.data=Me)))),(Me=Qn?ME(r,o):OE(r,o))&&(Fe=Hd(Z,"onBeforeInput"),0<Fe.length&&(ye=new Qi("onBeforeInput","beforeinput",null,o,re),ce.push({event:ye,listeners:Fe}),ye.data=Me)),ER(ce,r,Z,o,re)}Xx(ce,s)})}function xc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Hd(r,s){for(var o=s+"Capture",d=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=vi(r,o),p!=null&&d.unshift(xc(r,p,y)),p=vi(r,s),p!=null&&d.push(xc(r,p,y))),r.tag===3)return d;r=r.return}return[]}function jR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Zx(r,s,o,d,p){for(var y=s._reactName,S=[];o!==null&&o!==d;){var R=o,B=R.alternate,Z=R.stateNode;if(R=R.tag,B!==null&&B===d)break;R!==5&&R!==26&&R!==27||Z===null||(B=Z,p?(Z=vi(o,y),Z!=null&&S.unshift(xc(o,Z,B))):p||(Z=vi(o,y),Z!=null&&S.push(xc(o,Z,B)))),o=o.return}S.length!==0&&r.push({event:s,listeners:S})}var DR=/\r\n?/g,kR=/\u0000|\uFFFD/g;function Jx(r){return(typeof r=="string"?r:""+r).replace(DR,`
`).replace(kR,"")}function eb(r,s){return s=Jx(s),Jx(r)===s}function rt(r,s,o,d,p,y){switch(o){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||_n(r,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&_n(r,""+d);break;case"className":Mn(r,"class",d);break;case"tabIndex":Mn(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(r,o,d);break;case"style":Fl(r,d,y);break;case"data":if(s!=="object"){Mn(r,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(o);break}d=io(""+d),r.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&rt(r,s,"name",p.name,p,null),rt(r,s,"formEncType",p.formEncType,p,null),rt(r,s,"formMethod",p.formMethod,p,null),rt(r,s,"formTarget",p.formTarget,p,null)):(rt(r,s,"encType",p.encType,p,null),rt(r,s,"method",p.method,p,null),rt(r,s,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(o);break}d=io(""+d),r.setAttribute(o,d);break;case"onClick":d!=null&&(r.onclick=yi);break;case"onScroll":d!=null&&Ne("scroll",r);break;case"onScrollEnd":d!=null&&Ne("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(o=d.__html,o!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}o=io(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(o,""+d):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":d===!0?r.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(o,d):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(o,d):r.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(o):r.setAttribute(o,d);break;case"popover":Ne("beforetoggle",r),Ne("toggle",r),eo(r,"popover",d);break;case"xlinkActuate":kt(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":kt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":kt(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":kt(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":kt(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":kt(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":kt(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":kt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":kt(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":eo(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hu.get(o)||o,eo(r,o,d))}}function Rg(r,s,o,d,p,y){switch(o){case"style":Fl(r,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(o=d.__html,o!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof d=="string"?_n(r,d):(typeof d=="number"||typeof d=="bigint")&&_n(r,""+d);break;case"onScroll":d!=null&&Ne("scroll",r);break;case"onScrollEnd":d!=null&&Ne("scrollend",r);break;case"onClick":d!=null&&(r.onclick=yi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),s=o.slice(2,p?o.length-7:void 0),y=r[$t]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(s,y,p),typeof d=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,d,p);break e}o in r?r[o]=d:d===!0?r.setAttribute(o,""):eo(r,o,d)}}}function nn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",r),Ne("load",r);var d=!1,p=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(r,s,y,S,o,null)}}p&&rt(r,s,"srcSet",o.srcSet,o,null),d&&rt(r,s,"src",o.src,o,null);return;case"input":Ne("invalid",r);var R=y=S=p=null,B=null,Z=null;for(d in o)if(o.hasOwnProperty(d)){var re=o[d];if(re!=null)switch(d){case"name":p=re;break;case"type":S=re;break;case"checked":B=re;break;case"defaultChecked":Z=re;break;case"value":y=re;break;case"defaultValue":R=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:rt(r,s,d,re,o,null)}}Uu(r,y,R,B,Z,S,p,!1);return;case"select":Ne("invalid",r),d=S=y=null;for(p in o)if(o.hasOwnProperty(p)&&(R=o[p],R!=null))switch(p){case"value":y=R;break;case"defaultValue":S=R;break;case"multiple":d=R;default:rt(r,s,p,R,o,null)}s=y,o=S,r.multiple=!!d,s!=null?Kr(r,!!d,s,!1):o!=null&&Kr(r,!!d,o,!0);return;case"textarea":Ne("invalid",r),y=p=d=null;for(S in o)if(o.hasOwnProperty(S)&&(R=o[S],R!=null))switch(S){case"value":d=R;break;case"defaultValue":p=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:rt(r,s,S,R,o,null)}Yr(r,d,p,y);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(d=o[B],d!=null))switch(B){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:rt(r,s,B,d,o,null)}return;case"dialog":Ne("beforetoggle",r),Ne("toggle",r),Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":Ne("load",r);break;case"video":case"audio":for(d=0;d<vc.length;d++)Ne(vc[d],r);break;case"image":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"embed":case"source":case"link":Ne("error",r),Ne("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(d=o[Z],d!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(r,s,Z,d,o,null)}return;default:if(no(s)){for(re in o)o.hasOwnProperty(re)&&(d=o[re],d!==void 0&&Rg(r,s,re,d,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(d=o[R],d!=null&&rt(r,s,R,d,o,null))}function PR(r,s,o,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,S=null,R=null,B=null,Z=null,re=null;for(ie in o){var ce=o[ie];if(o.hasOwnProperty(ie)&&ce!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":B=ce;default:d.hasOwnProperty(ie)||rt(r,s,ie,null,d,ce)}}for(var ee in d){var ie=d[ee];if(ce=o[ee],d.hasOwnProperty(ee)&&(ie!=null||ce!=null))switch(ee){case"type":y=ie;break;case"name":p=ie;break;case"checked":Z=ie;break;case"defaultChecked":re=ie;break;case"value":S=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,s));break;default:ie!==ce&&rt(r,s,ee,ie,d,ce)}}to(r,S,R,B,Z,re,y,p);return;case"select":ie=S=R=ee=null;for(y in o)if(B=o[y],o.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":ie=B;default:d.hasOwnProperty(y)||rt(r,s,y,null,d,B)}for(p in d)if(y=d[p],B=o[p],d.hasOwnProperty(p)&&(y!=null||B!=null))switch(p){case"value":ee=y;break;case"defaultValue":R=y;break;case"multiple":S=y;default:y!==B&&rt(r,s,p,y,d,B)}s=R,o=S,d=ie,ee!=null?Kr(r,!!o,ee,!1):!!d!=!!o&&(s!=null?Kr(r,!!o,s,!0):Kr(r,!!o,o?[]:"",!1));return;case"textarea":ie=ee=null;for(R in o)if(p=o[R],o.hasOwnProperty(R)&&p!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:rt(r,s,R,null,d,p)}for(S in d)if(p=d[S],y=o[S],d.hasOwnProperty(S)&&(p!=null||y!=null))switch(S){case"value":ee=p;break;case"defaultValue":ie=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&rt(r,s,S,p,d,y)}Gu(r,ee,ie);return;case"option":for(var ge in o)if(ee=o[ge],o.hasOwnProperty(ge)&&ee!=null&&!d.hasOwnProperty(ge))switch(ge){case"selected":r.selected=!1;break;default:rt(r,s,ge,null,d,ee)}for(B in d)if(ee=d[B],ie=o[B],d.hasOwnProperty(B)&&ee!==ie&&(ee!=null||ie!=null))switch(B){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:rt(r,s,B,ee,d,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)ee=o[we],o.hasOwnProperty(we)&&ee!=null&&!d.hasOwnProperty(we)&&rt(r,s,we,null,d,ee);for(Z in d)if(ee=d[Z],ie=o[Z],d.hasOwnProperty(Z)&&ee!==ie&&(ee!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:rt(r,s,Z,ee,d,ie)}return;default:if(no(s)){for(var st in o)ee=o[st],o.hasOwnProperty(st)&&ee!==void 0&&!d.hasOwnProperty(st)&&Rg(r,s,st,void 0,d,ee);for(re in d)ee=d[re],ie=o[re],!d.hasOwnProperty(re)||ee===ie||ee===void 0&&ie===void 0||Rg(r,s,re,ee,d,ie);return}}for(var K in o)ee=o[K],o.hasOwnProperty(K)&&ee!=null&&!d.hasOwnProperty(K)&&rt(r,s,K,null,d,ee);for(ce in d)ee=d[ce],ie=o[ce],!d.hasOwnProperty(ce)||ee===ie||ee==null&&ie==null||rt(r,s,ce,ee,d,ie)}function tb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),d=0;d<o.length;d++){var p=o[d],y=p.transferSize,S=p.initiatorType,R=p.duration;if(y&&R&&tb(S)){for(S=0,R=p.responseEnd,d+=1;d<o.length;d++){var B=o[d],Z=B.startTime;if(Z>R)break;var re=B.transferSize,ce=B.initiatorType;re&&tb(ce)&&(B=B.responseEnd,S+=re*(B<R?1:(R-Z)/(B-Z)))}if(--d,s+=8*(y+S)/(p.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ig=null,Cg=null;function Wd(r){return r.nodeType===9?r:r.ownerDocument}function nb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ib(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function jg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Dg=null;function OR(){var r=window.event;return r&&r.type==="popstate"?r===Dg?!1:(Dg=r,!0):(Dg=null,!1)}var rb=typeof setTimeout=="function"?setTimeout:void 0,NR=typeof clearTimeout=="function"?clearTimeout:void 0,sb=typeof Promise=="function"?Promise:void 0,VR=typeof queueMicrotask=="function"?queueMicrotask:typeof sb<"u"?function(r){return sb.resolve(null).then(r).catch(FR)}:rb;function FR(r){setTimeout(function(){throw r})}function vs(r){return r==="head"}function ab(r,s){var o=s,d=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(d===0){r.removeChild(p),Fo(s);return}d--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")d++;else if(o==="html")bc(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,bc(o);for(var y=o.firstChild;y;){var S=y.nextSibling,R=y.nodeName;y[zi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=S}}else o==="body"&&bc(r.ownerDocument.body);o=p}while(o);Fo(s)}function ob(r,s){var o=r;r=0;do{var d=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=d}while(o)}function kg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":kg(o),Ja(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function LR(r,s,o,d){for(;r.nodeType===1;){var p=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[zi])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=ri(r.nextSibling),r===null)break}return null}function BR(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=ri(r.nextSibling),r===null))return null;return r}function lb(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=ri(r.nextSibling),r===null))return null;return r}function Pg(r){return r.data==="$?"||r.data==="$~"}function Mg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function zR(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var d=function(){s(),o.removeEventListener("DOMContentLoaded",d)};o.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function ri(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Og=null;function cb(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return ri(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function ub(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function db(r,s,o){switch(s=Wd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function bc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ja(r)}var si=new Map,hb=new Set;function qd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Dr=U.d;U.d={f:UR,r:GR,D:$R,C:HR,L:WR,m:qR,X:YR,S:KR,M:XR};function UR(){var r=Dr.f(),s=Fd();return r||s}function GR(r){var s=Kn(r);s!==null&&s.tag===5&&s.type==="form"?Cv(s):Dr.r(r)}var Oo=typeof document>"u"?null:document;function fb(r,s,o){var d=Oo;if(d&&typeof s=="string"&&s){var p=Sn(s);p='link[rel="'+r+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),hb.has(p)||(hb.add(p),r={rel:r,crossOrigin:o,href:s},d.querySelector(p)===null&&(s=d.createElement("link"),nn(s,"link",r),Dt(s),d.head.appendChild(s)))}}function $R(r){Dr.D(r),fb("dns-prefetch",r,null)}function HR(r,s){Dr.C(r,s),fb("preconnect",r,s)}function WR(r,s,o){Dr.L(r,s,o);var d=Oo;if(d&&r&&s){var p='link[rel="preload"][as="'+Sn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+Sn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+Sn(o.imageSizes)+'"]')):p+='[href="'+Sn(r)+'"]';var y=p;switch(s){case"style":y=No(r);break;case"script":y=Vo(r)}si.has(y)||(r=b({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),si.set(y,r),d.querySelector(p)!==null||s==="style"&&d.querySelector(Tc(y))||s==="script"&&d.querySelector(Sc(y))||(s=d.createElement("link"),nn(s,"link",r),Dt(s),d.head.appendChild(s)))}}function qR(r,s){Dr.m(r,s);var o=Oo;if(o&&r){var d=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+Sn(d)+'"][href="'+Sn(r)+'"]',y=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Vo(r)}if(!si.has(y)&&(r=b({rel:"modulepreload",href:r},s),si.set(y,r),o.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Sc(y)))return}d=o.createElement("link"),nn(d,"link",r),Dt(d),o.head.appendChild(d)}}}function KR(r,s,o){Dr.S(r,s,o);var d=Oo;if(d&&r){var p=Gi(d).hoistableStyles,y=No(r);s=s||"default";var S=p.get(y);if(!S){var R={loading:0,preload:null};if(S=d.querySelector(Tc(y)))R.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":s},o),(o=si.get(y))&&Ng(r,o);var B=S=d.createElement("link");Dt(B),nn(B,"link",r),B._p=new Promise(function(Z,re){B.onload=Z,B.onerror=re}),B.addEventListener("load",function(){R.loading|=1}),B.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Kd(S,s,d)}S={type:"stylesheet",instance:S,count:1,state:R},p.set(y,S)}}}function YR(r,s){Dr.X(r,s);var o=Oo;if(o&&r){var d=Gi(o).hoistableScripts,p=Vo(r),y=d.get(p);y||(y=o.querySelector(Sc(p)),y||(r=b({src:r,async:!0},s),(s=si.get(p))&&Vg(r,s),y=o.createElement("script"),Dt(y),nn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(p,y))}}function XR(r,s){Dr.M(r,s);var o=Oo;if(o&&r){var d=Gi(o).hoistableScripts,p=Vo(r),y=d.get(p);y||(y=o.querySelector(Sc(p)),y||(r=b({src:r,async:!0,type:"module"},s),(s=si.get(p))&&Vg(r,s),y=o.createElement("script"),Dt(y),nn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(p,y))}}function mb(r,s,o,d){var p=(p=tt.current)?qd(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=No(o.href),o=Gi(p).hoistableStyles,d=o.get(s),d||(d={type:"style",instance:null,count:0,state:null},o.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=No(o.href);var y=Gi(p).hoistableStyles,S=y.get(r);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,S),(y=p.querySelector(Tc(r)))&&!y._p&&(S.instance=y,S.state.loading=5),si.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},si.set(r,o),y||QR(p,r,o,S.state))),s&&d===null)throw Error(i(528,""));return S}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Vo(o),o=Gi(p).hoistableScripts,d=o.get(s),d||(d={type:"script",instance:null,count:0,state:null},o.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function No(r){return'href="'+Sn(r)+'"'}function Tc(r){return'link[rel="stylesheet"]['+r+"]"}function gb(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function QR(r,s,o,d){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=r.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),nn(s,"link",o),Dt(s),r.head.appendChild(s))}function Vo(r){return'[src="'+Sn(r)+'"]'}function Sc(r){return"script[async]"+r}function pb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var d=r.querySelector('style[data-href~="'+Sn(o.href)+'"]');if(d)return s.instance=d,Dt(d),d;var p=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),Dt(d),nn(d,"style",p),Kd(d,o.precedence,r),s.instance=d;case"stylesheet":p=No(o.href);var y=r.querySelector(Tc(p));if(y)return s.state.loading|=4,s.instance=y,Dt(y),y;d=gb(o),(p=si.get(p))&&Ng(d,p),y=(r.ownerDocument||r).createElement("link"),Dt(y);var S=y;return S._p=new Promise(function(R,B){S.onload=R,S.onerror=B}),nn(y,"link",d),s.state.loading|=4,Kd(y,o.precedence,r),s.instance=y;case"script":return y=Vo(o.src),(p=r.querySelector(Sc(y)))?(s.instance=p,Dt(p),p):(d=o,(p=si.get(y))&&(d=b({},o),Vg(d,p)),r=r.ownerDocument||r,p=r.createElement("script"),Dt(p),nn(p,"link",d),r.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Kd(d,o.precedence,r));return s.instance}function Kd(r,s,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,y=p,S=0;S<d.length;S++){var R=d[S];if(R.dataset.precedence===s)y=R;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Ng(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Vg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Yd=null;function yb(r,s,o){if(Yd===null){var d=new Map,p=Yd=new Map;p.set(o,d)}else p=Yd,d=p.get(o),d||(d=new Map,p.set(o,d));if(d.has(r))return d;for(d.set(r,null),o=o.getElementsByTagName(r),p=0;p<o.length;p++){var y=o[p];if(!(y[zi]||y[jt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=r+S;var R=d.get(S);R?R.push(y):d.set(S,[y])}}return d}function vb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function ZR(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function JR(r,s,o,d){if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=No(d.href),y=s.querySelector(Tc(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Xd.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=y,Dt(y);return}y=s.ownerDocument||s,d=gb(d),(p=si.get(p))&&Ng(d,p),y=y.createElement("link"),Dt(y);var S=y;S._p=new Promise(function(R,B){S.onload=R,S.onerror=B}),nn(y,"link",d),o.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Xd.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var Fg=0;function eI(r,s){return r.stylesheets&&r.count===0&&Zd(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var d=setTimeout(function(){if(r.stylesheets&&Zd(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+s);0<r.imgBytes&&Fg===0&&(Fg=62500*MR());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Zd(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Fg?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(p)}}:null}function Xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Qd=null;function Zd(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Qd=new Map,s.forEach(tI,r),Qd=null,Xd.call(r))}function tI(r,s){if(!(s.state.loading&4)){var o=Qd.get(r);if(o)var d=o.get(null);else{o=new Map,Qd.set(r,o);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var S=p[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),d=S)}d&&o.set(null,d)}p=s.instance,S=p.getAttribute("data-precedence"),y=o.get(S)||d,y===d&&o.set(null,p),o.set(S,p),this.count++,d=Xd.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),s.state.loading|=4}}var _c={$$typeof:L,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function nI(r,s,o,d,p,y,S,R,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function bb(r,s,o,d,p,y,S,R,B,Z,re,ce){return r=new nI(r,s,o,S,B,Z,re,ce,R),s=1,y===!0&&(s|=24),y=Nn(3,null,null,s),r.current=y,y.stateNode=r,s=ym(),s.refCount++,r.pooledCache=s,s.refCount++,y.memoizedState={element:d,isDehydrated:o,cache:s},Tm(y),r}function Tb(r){return r?(r=mo,r):mo}function Sb(r,s,o,d,p,y){p=Tb(p),d.context===null?d.context=p:d.pendingContext=p,d=os(s),d.payload={element:o},y=y===void 0?null:y,y!==null&&(d.callback=y),o=ls(r,d,s),o!==null&&(In(o,r,s),tc(o,r,s))}function _b(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Lg(r,s){_b(r,s),(r=r.alternate)&&_b(r,s)}function Ab(r){if(r.tag===13||r.tag===31){var s=ma(r,67108864);s!==null&&In(s,r,67108864),Lg(r,67108864)}}function wb(r){if(r.tag===13||r.tag===31){var s=zn();s=na(s);var o=ma(r,s);o!==null&&In(o,r,s),Lg(r,s)}}var Jd=!0;function iI(r,s,o,d){var p=G.T;G.T=null;var y=U.p;try{U.p=2,Bg(r,s,o,d)}finally{U.p=y,G.T=p}}function rI(r,s,o,d){var p=G.T;G.T=null;var y=U.p;try{U.p=8,Bg(r,s,o,d)}finally{U.p=y,G.T=p}}function Bg(r,s,o,d){if(Jd){var p=zg(d);if(p===null)Eg(r,s,d,eh,o),Rb(r,d);else if(aI(p,r,s,o,d))d.stopPropagation();else if(Rb(r,d),s&4&&-1<sI.indexOf(r)){for(;p!==null;){var y=Kn(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=Vi(y.pendingLanes);if(S!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var B=1<<31-St(S);R.entanglements[1]|=B,S&=~B}nr(y),(Xe&6)===0&&(Nd=mn()+500,yc(0))}}break;case 31:case 13:R=ma(y,2),R!==null&&In(R,y,2),Fd(),Lg(y,2)}if(y=zg(d),y===null&&Eg(r,s,d,eh,o),y===p)break;p=y}p!==null&&d.stopPropagation()}else Eg(r,s,d,null,o)}}function zg(r){return r=Yn(r),Ug(r)}var eh=null;function Ug(r){if(eh=null,r=Ui(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===31){if(r=h(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return eh=r,null}function Eb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zs()){case El:return 2;case Rl:return 8;case Wr:case Kf:return 32;case ku:return 268435456;default:return 32}default:return 32}}var Gg=!1,xs=null,bs=null,Ts=null,Ac=new Map,wc=new Map,Ss=[],sI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rb(r,s){switch(r){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Ac.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(s.pointerId)}}function Ec(r,s,o,d,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:o,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Kn(s),s!==null&&Ab(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function aI(r,s,o,d,p){switch(s){case"focusin":return xs=Ec(xs,r,s,o,d,p),!0;case"dragenter":return bs=Ec(bs,r,s,o,d,p),!0;case"mouseover":return Ts=Ec(Ts,r,s,o,d,p),!0;case"pointerover":var y=p.pointerId;return Ac.set(y,Ec(Ac.get(y)||null,r,s,o,d,p)),!0;case"gotpointercapture":return y=p.pointerId,wc.set(y,Ec(wc.get(y)||null,r,s,o,d,p)),!0}return!1}function Ib(r){var s=Ui(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,gi(r.priority,function(){wb(o)});return}}else if(s===31){if(s=h(o),s!==null){r.blockedOn=s,gi(r.priority,function(){wb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function th(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=zg(r.nativeEvent);if(o===null){o=r.nativeEvent;var d=new o.constructor(o.type,o);Ll=d,o.target.dispatchEvent(d),Ll=null}else return s=Kn(o),s!==null&&Ab(s),r.blockedOn=o,!1;s.shift()}return!0}function Cb(r,s,o){th(r)&&o.delete(s)}function oI(){Gg=!1,xs!==null&&th(xs)&&(xs=null),bs!==null&&th(bs)&&(bs=null),Ts!==null&&th(Ts)&&(Ts=null),Ac.forEach(Cb),wc.forEach(Cb)}function nh(r,s){r.blockedOn===s&&(r.blockedOn=null,Gg||(Gg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oI)))}var ih=null;function jb(r){ih!==r&&(ih=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ih===r&&(ih=null);for(var s=0;s<r.length;s+=3){var o=r[s],d=r[s+1],p=r[s+2];if(typeof d!="function"){if(Ug(d||o)===null)continue;break}var y=Kn(o);y!==null&&(r.splice(s,3),s-=3,zm(y,{pending:!0,data:p,method:o.method,action:d},d,p))}}))}function Fo(r){function s(B){return nh(B,r)}xs!==null&&nh(xs,r),bs!==null&&nh(bs,r),Ts!==null&&nh(Ts,r),Ac.forEach(s),wc.forEach(s);for(var o=0;o<Ss.length;o++){var d=Ss[o];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Ss.length&&(o=Ss[0],o.blockedOn===null);)Ib(o),o.blockedOn===null&&Ss.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var p=o[d],y=o[d+1],S=p[$t]||null;if(typeof y=="function")S||jb(o);else if(S){var R=null;if(y&&y.hasAttribute("formAction")){if(p=y,S=y[$t]||null)R=S.formAction;else if(Ug(p)!==null)continue}else R=S.action;typeof R=="function"?o[d+1]=R:(o.splice(d,3),d-=3),jb(o)}}}function Db(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),d||setTimeout(o,20)}function o(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function $g(r){this._internalRoot=r}rh.prototype.render=$g.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,d=zn();Sb(o,d,r,s,null,null)},rh.prototype.unmount=$g.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Sb(r.current,2,null,r,null,null),Fd(),s[Bi]=null}};function rh(r){this._internalRoot=r}rh.prototype.unstable_scheduleHydration=function(r){if(r){var s=Fu();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Ss.length&&s!==0&&s<Ss[o].priority;o++);Ss.splice(o,0,r),o===0&&Ib(r)}};var kb=e.version;if(kb!=="19.2.0")throw Error(i(527,kb,"19.2.0"));U.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=g(s),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var lI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{fi=sh.inject(lI),Qt=sh}catch{}}return Ic.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,d="",p=Lv,y=Bv,S=zv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=bb(r,1,!1,null,null,o,d,null,p,y,S,Db),r[Bi]=s.current,wg(r),new $g(s)},Ic.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var d=!1,p="",y=Lv,S=Bv,R=zv,B=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),s=bb(r,1,!0,s,o??null,d,p,B,y,S,R,Db),s.context=Tb(null),o=s.current,d=zn(),d=na(d),p=os(d),p.callback=null,ls(o,p,d),o=d,s.current.lanes=o,ea(s,o),nr(s),r[Bi]=s.current,wg(r),new rh(s)},Ic.version="19.2.0",Ic}var Lb;function RI(){if(Lb)return Wg.exports;Lb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wg.exports=EI(),Wg.exports}var II=RI();const CI="modulepreload",jI=function(n){return"/nhl-savant/"+n},Bb={},DI=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=c?.nonce||c?.getAttribute("nonce");a=f(t.map(g=>{if(g=jI(g),g in Bb)return;Bb[g]=!0;const v=g.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const x=document.createElement("link");if(x.rel=v?"stylesheet":CI,v||(x.as="script"),x.crossOrigin="",x.href=g,h&&x.setAttribute("nonce",h),document.head.appendChild(x),v)return new Promise((_,w)=>{x.addEventListener("load",_),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var kI=gI();const E0=hI(kI),PI=()=>{};var zb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},MI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],h=n[t++],f=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},JS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,h=c?n[a+1]:0,f=a+2<n.length,g=f?n[a+2]:0,v=l>>2,b=(l&3)<<4|h>>4;let x=(h&15)<<2|g>>6,_=g&63;f||(_=64,c||(x=64)),i.push(t[v],t[b],t[x],t[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||g==null||b==null)throw new OI;const x=l<<2|h>>4;if(i.push(x),g!==64){const _=h<<4&240|g>>2;if(i.push(_),b!==64){const w=g<<6&192|b;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class OI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NI=function(n){const e=ZS(n);return JS.encodeByteArray(e,!0)},Lh=function(n){return NI(n).replace(/\./g,"")},e2=function(n){try{return JS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=()=>VI().__FIREBASE_DEFAULTS__,LI=()=>{if(typeof process>"u"||typeof zb>"u")return;const n=zb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&e2(n[1]);return e&&JSON.parse(e)},pf=()=>{try{return PI()||FI()||LI()||BI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},t2=n=>pf()?.emulatorHosts?.[n],n2=n=>{const e=t2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},i2=()=>pf()?.config,r2=n=>pf()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function R0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Lh(JSON.stringify(t)),Lh(JSON.stringify(c)),""].join(".")}const Vc={};function GI(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vc))Vc[e]?n.emulator.push(e):n.prod.push(e);return n}function $I(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ub=!1;function I0(n,e){if(typeof window>"u"||typeof document>"u"||!qa(window.location.host)||Vc[n]===e||Vc[n]||Ub)return;Vc[n]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",l=GI().prod.length>0;function c(){const x=document.getElementById(i);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function f(x,_){x.setAttribute("width","24"),x.setAttribute("id",_),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Ub=!0,c()},x}function v(x,_){x.setAttribute("id",_),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=$I(i),_=t("text"),w=document.getElementById(_)||document.createElement("span"),E=t("learnmore"),P=document.getElementById(E)||document.createElement("a"),N=t("preprendIcon"),V=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const L=x.element;h(L),v(P,E);const ne=g();f(V,N),L.append(V,w,P,ne),document.body.appendChild(L)}l?(w.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function WI(){const n=pf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function s2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function KI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YI(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function XI(){return!WI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function a2(){try{return typeof indexedDB=="object"}catch{return!1}}function o2(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}function QI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="FirebaseError";class Pi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ZI,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ka.prototype.create)}}class Ka{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?JI(l,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Pi(a,h,i)}}function JI(n,e){return n.replace(eC,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const eC=/\{\$([^}]+)}/g;function tC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Vr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(Gb(l)&&Gb(c)){if(!Vr(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function Gb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nC(n,e){const t=new iC(n,e);return t.subscribe.bind(t)}class iC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");rC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Yg),a.error===void 0&&(a.error=Yg),a.complete===void 0&&(a.complete=Yg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Yg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1e3,aC=2,oC=14400*1e3,lC=.5;function $b(n,e=sC,t=aC){const i=e*Math.pow(t,n),a=Math.round(lC*i*(Math.random()-.5)*2);return Math.min(oC,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(n){return n&&n._delegate?n._delegate:n}class di{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new zI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dC(e))try{this.getOrInitializeService({instanceIdentifier:Ca})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ca){return this.instances.has(e)}getOptions(e=Ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ca){return this.component?this.component.multipleInstances?e:Ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uC(n){return n===Ca?void 0:n}function dC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const fC={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},mC=Le.INFO,gC={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},pC=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=gC[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=mC,this._logHandler=pC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const yC=(n,e)=>e.some(t=>n instanceof t);let Hb,Wb;function vC(){return Hb||(Hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xC(){return Wb||(Wb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l2=new WeakMap,jp=new WeakMap,c2=new WeakMap,Xg=new WeakMap,C0=new WeakMap;function bC(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ms(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&l2.set(t,n)}).catch(()=>{}),C0.set(e,n),e}function TC(n){if(jp.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});jp.set(n,e)}let Dp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||c2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ms(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SC(n){Dp=n(Dp)}function _C(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Qg(this),e,...t);return c2.set(i,e.sort?e.sort():[e]),Ms(i)}:xC().includes(n)?function(...e){return n.apply(Qg(this),e),Ms(l2.get(this))}:function(...e){return Ms(n.apply(Qg(this),e))}}function AC(n){return typeof n=="function"?_C(n):(n instanceof IDBTransaction&&TC(n),yC(n,vC())?new Proxy(n,Dp):n)}function Ms(n){if(n instanceof IDBRequest)return bC(n);if(Xg.has(n))return Xg.get(n);const e=AC(n);return e!==n&&(Xg.set(n,e),C0.set(e,n)),e}const Qg=n=>C0.get(n);function u2(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),h=Ms(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Ms(c.result),f.oldVersion,f.newVersion,Ms(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const wC=["get","getKey","getAll","getAllKeys","count"],EC=["put","add","delete","clear"],Zg=new Map;function qb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zg.get(e))return Zg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=EC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||wC.includes(t)))return;const l=async function(c,...h){const f=this.transaction(c,a?"readwrite":"readonly");let g=f.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),a&&f.done]))[0]};return Zg.set(e,l),l}SC(n=>({...n,get:(e,t,i)=>qb(e,t)||n.get(e,t,i),has:(e,t)=>!!qb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function IC(n){return n.getComponent()?.type==="VERSION"}const kp="@firebase/app",Kb="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new yf("@firebase/app"),CC="@firebase/app-compat",jC="@firebase/analytics-compat",DC="@firebase/analytics",kC="@firebase/app-check-compat",PC="@firebase/app-check",MC="@firebase/auth",OC="@firebase/auth-compat",NC="@firebase/database",VC="@firebase/data-connect",FC="@firebase/database-compat",LC="@firebase/functions",BC="@firebase/functions-compat",zC="@firebase/installations",UC="@firebase/installations-compat",GC="@firebase/messaging",$C="@firebase/messaging-compat",HC="@firebase/performance",WC="@firebase/performance-compat",qC="@firebase/remote-config",KC="@firebase/remote-config-compat",YC="@firebase/storage",XC="@firebase/storage-compat",QC="@firebase/firestore",ZC="@firebase/ai",JC="@firebase/firestore-compat",ej="firebase",tj="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="[DEFAULT]",nj={[kp]:"fire-core",[CC]:"fire-core-compat",[DC]:"fire-analytics",[jC]:"fire-analytics-compat",[PC]:"fire-app-check",[kC]:"fire-app-check-compat",[MC]:"fire-auth",[OC]:"fire-auth-compat",[NC]:"fire-rtdb",[VC]:"fire-data-connect",[FC]:"fire-rtdb-compat",[LC]:"fire-fn",[BC]:"fire-fn-compat",[zC]:"fire-iid",[UC]:"fire-iid-compat",[GC]:"fire-fcm",[$C]:"fire-fcm-compat",[HC]:"fire-perf",[WC]:"fire-perf-compat",[qC]:"fire-rc",[KC]:"fire-rc-compat",[YC]:"fire-gcs",[XC]:"fire-gcs-compat",[QC]:"fire-fst",[JC]:"fire-fst-compat",[ZC]:"fire-vertex","fire-js":"fire-js",[ej]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new Map,ij=new Map,Mp=new Map;function Yb(n,e){try{n.container.addComponent(e)}catch(t){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ji(n){const e=n.name;if(Mp.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;Mp.set(e,n);for(const t of Bh.values())Yb(t,n);for(const t of ij.values())Yb(t,n);return!0}function qs(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ei(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new Ka("app","Firebase",rj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=tj;function d2(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Pp,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Os.create("bad-app-name",{appName:String(a)});if(t||(t=i2()),!t)throw Os.create("no-options");const l=Bh.get(a);if(l){if(Vr(t,l.options)&&Vr(i,l.config))return l;throw Os.create("duplicate-app",{appName:a})}const c=new hC(a);for(const f of Mp.values())c.addComponent(f);const h=new sj(t,i,c);return Bh.set(a,h),h}function vf(n=Pp){const e=Bh.get(n);if(!e&&n===Pp&&i2())return d2();if(!e)throw Os.create("no-app",{appName:n});return e}function kn(n,e,t){let i=nj[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(c.join(" "));return}ji(new di(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="firebase-heartbeat-database",oj=1,Zc="firebase-heartbeat-store";let Jg=null;function h2(){return Jg||(Jg=u2(aj,oj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Os.create("idb-open",{originalErrorMessage:n.message})})),Jg}async function lj(n){try{const t=(await h2()).transaction(Zc),i=await t.objectStore(Zc).get(f2(n));return await t.done,i}catch(e){if(e instanceof Pi)Fr.warn(e.message);else{const t=Os.create("idb-get",{originalErrorMessage:e?.message});Fr.warn(t.message)}}}async function Xb(n,e){try{const i=(await h2()).transaction(Zc,"readwrite");await i.objectStore(Zc).put(e,f2(n)),await i.done}catch(t){if(t instanceof Pi)Fr.warn(t.message);else{const i=Os.create("idb-set",{originalErrorMessage:t?.message});Fr.warn(i.message)}}}function f2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=1024,uj=30;class dj{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fj(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>uj){const a=mj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Qb(),{heartbeatsToSend:t,unsentEntries:i}=hj(this._heartbeatsCache.heartbeats),a=Lh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Fr.warn(e),""}}}function Qb(){return new Date().toISOString().substring(0,10)}function hj(n,e=cj){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Zb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Zb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class fj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return a2()?o2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zb(n){return Lh(JSON.stringify({version:2,heartbeats:n})).length}function mj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(n){ji(new di("platform-logger",e=>new RC(e),"PRIVATE")),ji(new di("heartbeat",e=>new dj(e),"PRIVATE")),kn(kp,Kb,n),kn(kp,Kb,"esm2020"),kn("fire-js","")}gj("");var pj="firebase",yj="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn(pj,yj,"app");var Jb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ns,m2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,I){function C(){}C.prototype=I.prototype,D.F=I.prototype,D.prototype=new C,D.prototype.constructor=D,D.D=function(F,k,z){for(var O=Array(arguments.length-2),X=2;X<arguments.length;X++)O[X-2]=arguments[X];return I.prototype[k].apply(F,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,I,C){C||(C=0);const F=Array(16);if(typeof I=="string")for(var k=0;k<16;++k)F[k]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(k=0;k<16;++k)F[k]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=D.g[0],C=D.g[1],k=D.g[2];let z=D.g[3],O;O=I+(z^C&(k^z))+F[0]+3614090360&4294967295,I=C+(O<<7&4294967295|O>>>25),O=z+(k^I&(C^k))+F[1]+3905402710&4294967295,z=I+(O<<12&4294967295|O>>>20),O=k+(C^z&(I^C))+F[2]+606105819&4294967295,k=z+(O<<17&4294967295|O>>>15),O=C+(I^k&(z^I))+F[3]+3250441966&4294967295,C=k+(O<<22&4294967295|O>>>10),O=I+(z^C&(k^z))+F[4]+4118548399&4294967295,I=C+(O<<7&4294967295|O>>>25),O=z+(k^I&(C^k))+F[5]+1200080426&4294967295,z=I+(O<<12&4294967295|O>>>20),O=k+(C^z&(I^C))+F[6]+2821735955&4294967295,k=z+(O<<17&4294967295|O>>>15),O=C+(I^k&(z^I))+F[7]+4249261313&4294967295,C=k+(O<<22&4294967295|O>>>10),O=I+(z^C&(k^z))+F[8]+1770035416&4294967295,I=C+(O<<7&4294967295|O>>>25),O=z+(k^I&(C^k))+F[9]+2336552879&4294967295,z=I+(O<<12&4294967295|O>>>20),O=k+(C^z&(I^C))+F[10]+4294925233&4294967295,k=z+(O<<17&4294967295|O>>>15),O=C+(I^k&(z^I))+F[11]+2304563134&4294967295,C=k+(O<<22&4294967295|O>>>10),O=I+(z^C&(k^z))+F[12]+1804603682&4294967295,I=C+(O<<7&4294967295|O>>>25),O=z+(k^I&(C^k))+F[13]+4254626195&4294967295,z=I+(O<<12&4294967295|O>>>20),O=k+(C^z&(I^C))+F[14]+2792965006&4294967295,k=z+(O<<17&4294967295|O>>>15),O=C+(I^k&(z^I))+F[15]+1236535329&4294967295,C=k+(O<<22&4294967295|O>>>10),O=I+(k^z&(C^k))+F[1]+4129170786&4294967295,I=C+(O<<5&4294967295|O>>>27),O=z+(C^k&(I^C))+F[6]+3225465664&4294967295,z=I+(O<<9&4294967295|O>>>23),O=k+(I^C&(z^I))+F[11]+643717713&4294967295,k=z+(O<<14&4294967295|O>>>18),O=C+(z^I&(k^z))+F[0]+3921069994&4294967295,C=k+(O<<20&4294967295|O>>>12),O=I+(k^z&(C^k))+F[5]+3593408605&4294967295,I=C+(O<<5&4294967295|O>>>27),O=z+(C^k&(I^C))+F[10]+38016083&4294967295,z=I+(O<<9&4294967295|O>>>23),O=k+(I^C&(z^I))+F[15]+3634488961&4294967295,k=z+(O<<14&4294967295|O>>>18),O=C+(z^I&(k^z))+F[4]+3889429448&4294967295,C=k+(O<<20&4294967295|O>>>12),O=I+(k^z&(C^k))+F[9]+568446438&4294967295,I=C+(O<<5&4294967295|O>>>27),O=z+(C^k&(I^C))+F[14]+3275163606&4294967295,z=I+(O<<9&4294967295|O>>>23),O=k+(I^C&(z^I))+F[3]+4107603335&4294967295,k=z+(O<<14&4294967295|O>>>18),O=C+(z^I&(k^z))+F[8]+1163531501&4294967295,C=k+(O<<20&4294967295|O>>>12),O=I+(k^z&(C^k))+F[13]+2850285829&4294967295,I=C+(O<<5&4294967295|O>>>27),O=z+(C^k&(I^C))+F[2]+4243563512&4294967295,z=I+(O<<9&4294967295|O>>>23),O=k+(I^C&(z^I))+F[7]+1735328473&4294967295,k=z+(O<<14&4294967295|O>>>18),O=C+(z^I&(k^z))+F[12]+2368359562&4294967295,C=k+(O<<20&4294967295|O>>>12),O=I+(C^k^z)+F[5]+4294588738&4294967295,I=C+(O<<4&4294967295|O>>>28),O=z+(I^C^k)+F[8]+2272392833&4294967295,z=I+(O<<11&4294967295|O>>>21),O=k+(z^I^C)+F[11]+1839030562&4294967295,k=z+(O<<16&4294967295|O>>>16),O=C+(k^z^I)+F[14]+4259657740&4294967295,C=k+(O<<23&4294967295|O>>>9),O=I+(C^k^z)+F[1]+2763975236&4294967295,I=C+(O<<4&4294967295|O>>>28),O=z+(I^C^k)+F[4]+1272893353&4294967295,z=I+(O<<11&4294967295|O>>>21),O=k+(z^I^C)+F[7]+4139469664&4294967295,k=z+(O<<16&4294967295|O>>>16),O=C+(k^z^I)+F[10]+3200236656&4294967295,C=k+(O<<23&4294967295|O>>>9),O=I+(C^k^z)+F[13]+681279174&4294967295,I=C+(O<<4&4294967295|O>>>28),O=z+(I^C^k)+F[0]+3936430074&4294967295,z=I+(O<<11&4294967295|O>>>21),O=k+(z^I^C)+F[3]+3572445317&4294967295,k=z+(O<<16&4294967295|O>>>16),O=C+(k^z^I)+F[6]+76029189&4294967295,C=k+(O<<23&4294967295|O>>>9),O=I+(C^k^z)+F[9]+3654602809&4294967295,I=C+(O<<4&4294967295|O>>>28),O=z+(I^C^k)+F[12]+3873151461&4294967295,z=I+(O<<11&4294967295|O>>>21),O=k+(z^I^C)+F[15]+530742520&4294967295,k=z+(O<<16&4294967295|O>>>16),O=C+(k^z^I)+F[2]+3299628645&4294967295,C=k+(O<<23&4294967295|O>>>9),O=I+(k^(C|~z))+F[0]+4096336452&4294967295,I=C+(O<<6&4294967295|O>>>26),O=z+(C^(I|~k))+F[7]+1126891415&4294967295,z=I+(O<<10&4294967295|O>>>22),O=k+(I^(z|~C))+F[14]+2878612391&4294967295,k=z+(O<<15&4294967295|O>>>17),O=C+(z^(k|~I))+F[5]+4237533241&4294967295,C=k+(O<<21&4294967295|O>>>11),O=I+(k^(C|~z))+F[12]+1700485571&4294967295,I=C+(O<<6&4294967295|O>>>26),O=z+(C^(I|~k))+F[3]+2399980690&4294967295,z=I+(O<<10&4294967295|O>>>22),O=k+(I^(z|~C))+F[10]+4293915773&4294967295,k=z+(O<<15&4294967295|O>>>17),O=C+(z^(k|~I))+F[1]+2240044497&4294967295,C=k+(O<<21&4294967295|O>>>11),O=I+(k^(C|~z))+F[8]+1873313359&4294967295,I=C+(O<<6&4294967295|O>>>26),O=z+(C^(I|~k))+F[15]+4264355552&4294967295,z=I+(O<<10&4294967295|O>>>22),O=k+(I^(z|~C))+F[6]+2734768916&4294967295,k=z+(O<<15&4294967295|O>>>17),O=C+(z^(k|~I))+F[13]+1309151649&4294967295,C=k+(O<<21&4294967295|O>>>11),O=I+(k^(C|~z))+F[4]+4149444226&4294967295,I=C+(O<<6&4294967295|O>>>26),O=z+(C^(I|~k))+F[11]+3174756917&4294967295,z=I+(O<<10&4294967295|O>>>22),O=k+(I^(z|~C))+F[2]+718787259&4294967295,k=z+(O<<15&4294967295|O>>>17),O=C+(z^(k|~I))+F[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(k+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+z&4294967295}i.prototype.v=function(D,I){I===void 0&&(I=D.length);const C=I-this.blockSize,F=this.C;let k=this.h,z=0;for(;z<I;){if(k==0)for(;z<=C;)a(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<I;)if(F[k++]=D.charCodeAt(z++),k==this.blockSize){a(this,F),k=0;break}}else for(;z<I;)if(F[k++]=D[z++],k==this.blockSize){a(this,F),k=0;break}}this.h=k,this.o+=I},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;I=this.o*8;for(var C=D.length-8;C<D.length;++C)D[C]=I&255,I/=256;for(this.v(D),D=Array(16),I=0,C=0;C<4;++C)for(let F=0;F<32;F+=8)D[I++]=this.g[C]>>>F&255;return D};function l(D,I){var C=h;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=I(D)}function c(D,I){this.h=I;const C=[];let F=!0;for(let k=D.length-1;k>=0;k--){const z=D[k]|0;F&&z==I||(C[k]=z,F=!1)}this.g=C}var h={};function f(D){return-128<=D&&D<128?l(D,function(I){return new c([I|0],I<0?-1:0)}):new c([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return b;if(D<0)return P(g(-D));const I=[];let C=1;for(let F=0;D>=C;F++)I[F]=D/C|0,C*=4294967296;return new c(I,0)}function v(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return P(v(D.substring(1),I));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(I,8));let F=b;for(let z=0;z<D.length;z+=8){var k=Math.min(8,D.length-z);const O=parseInt(D.substring(z,z+k),I);k<8?(k=g(Math.pow(I,k)),F=F.j(k).add(g(O))):(F=F.j(C),F=F.add(g(O)))}return F}var b=f(0),x=f(1),_=f(16777216);n=c.prototype,n.m=function(){if(E(this))return-P(this).m();let D=0,I=1;for(let C=0;C<this.g.length;C++){const F=this.i(C);D+=(F>=0?F:4294967296+F)*I,I*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(E(this))return"-"+P(this).toString(D);const I=g(Math.pow(D,6));var C=this;let F="";for(;;){const k=ne(C,I).g;C=N(C,k.j(I));let z=((C.g.length>0?C.g[0]:C.h)>>>0).toString(D);if(C=k,w(C))return z+F;for(;z.length<6;)z="0"+z;F=z+F}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(let I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function E(D){return D.h==-1}n.l=function(D){return D=N(this,D),E(D)?-1:w(D)?0:1};function P(D){const I=D.g.length,C=[];for(let F=0;F<I;F++)C[F]=~D.g[F];return new c(C,~D.h).add(x)}n.abs=function(){return E(this)?P(this):this},n.add=function(D){const I=Math.max(this.g.length,D.g.length),C=[];let F=0;for(let k=0;k<=I;k++){let z=F+(this.i(k)&65535)+(D.i(k)&65535),O=(z>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);F=O>>>16,z&=65535,O&=65535,C[k]=O<<16|z}return new c(C,C[C.length-1]&-2147483648?-1:0)};function N(D,I){return D.add(P(I))}n.j=function(D){if(w(this)||w(D))return b;if(E(this))return E(D)?P(this).j(P(D)):P(P(this).j(D));if(E(D))return P(this.j(P(D)));if(this.l(_)<0&&D.l(_)<0)return g(this.m()*D.m());const I=this.g.length+D.g.length,C=[];for(var F=0;F<2*I;F++)C[F]=0;for(F=0;F<this.g.length;F++)for(let k=0;k<D.g.length;k++){const z=this.i(F)>>>16,O=this.i(F)&65535,X=D.i(k)>>>16,le=D.i(k)&65535;C[2*F+2*k]+=O*le,V(C,2*F+2*k),C[2*F+2*k+1]+=z*le,V(C,2*F+2*k+1),C[2*F+2*k+1]+=O*X,V(C,2*F+2*k+1),C[2*F+2*k+2]+=z*X,V(C,2*F+2*k+2)}for(D=0;D<I;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=I;D<2*I;D++)C[D]=0;return new c(C,0)};function V(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function L(D,I){this.g=D,this.h=I}function ne(D,I){if(w(I))throw Error("division by zero");if(w(D))return new L(b,b);if(E(D))return I=ne(P(D),I),new L(P(I.g),P(I.h));if(E(I))return I=ne(D,P(I)),new L(P(I.g),I.h);if(D.g.length>30){if(E(D)||E(I))throw Error("slowDivide_ only works with positive integers.");for(var C=x,F=I;F.l(D)<=0;)C=W(C),F=W(F);var k=q(C,1),z=q(F,1);for(F=q(F,2),C=q(C,2);!w(F);){var O=z.add(F);O.l(D)<=0&&(k=k.add(C),z=O),F=q(F,1),C=q(C,1)}return I=N(D,k.j(I)),new L(k,I)}for(k=b;D.l(I)>=0;){for(C=Math.max(1,Math.floor(D.m()/I.m())),F=Math.ceil(Math.log(C)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),z=g(C),O=z.j(I);E(O)||O.l(D)>0;)C-=F,z=g(C),O=z.j(I);w(z)&&(z=x),k=k.add(z),D=N(D,O)}return new L(k,D)}n.B=function(D){return ne(this,D).h},n.and=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let F=0;F<I;F++)C[F]=this.i(F)&D.i(F);return new c(C,this.h&D.h)},n.or=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let F=0;F<I;F++)C[F]=this.i(F)|D.i(F);return new c(C,this.h|D.h)},n.xor=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let F=0;F<I;F++)C[F]=this.i(F)^D.i(F);return new c(C,this.h^D.h)};function W(D){const I=D.g.length+1,C=[];for(let F=0;F<I;F++)C[F]=D.i(F)<<1|D.i(F-1)>>>31;return new c(C,D.h)}function q(D,I){const C=I>>5;I%=32;const F=D.g.length-C,k=[];for(let z=0;z<F;z++)k[z]=I>0?D.i(z+C)>>>I|D.i(z+C+1)<<32-I:D.i(z+C);return new c(k,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,m2=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Ns=c}).apply(typeof Jb<"u"?Jb:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g2,jc,p2,bh,Op,y2,v2,x2;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var T=0;T<m.length;++T){var A=m[T];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function a(m,T){if(T)e:{var A=i;m=m.split(".");for(var j=0;j<m.length-1;j++){var Y=m[j];if(!(Y in A))break e;A=A[Y]}m=m[m.length-1],j=A[m],T=T(j),T!=j&&T!=null&&e(A,m,{configurable:!0,writable:!0,value:T})}}a("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(m){return m||function(T){var A=[],j;for(j in T)Object.prototype.hasOwnProperty.call(T,j)&&A.push([j,T[j]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function f(m,T,A){return m.call.apply(m.bind,arguments)}function g(m,T,A){return g=f,g.apply(null,arguments)}function v(m,T){var A=Array.prototype.slice.call(arguments,1);return function(){var j=A.slice();return j.push.apply(j,arguments),m.apply(this,j)}}function b(m,T){function A(){}A.prototype=T.prototype,m.Z=T.prototype,m.prototype=new A,m.prototype.constructor=m,m.Ob=function(j,Y,te){for(var de=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)de[ke-2]=arguments[ke];return T.prototype[Y].apply(j,de)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function _(m){const T=m.length;if(T>0){const A=Array(T);for(let j=0;j<T;j++)A[j]=m[j];return A}return[]}function w(m,T){for(let j=1;j<arguments.length;j++){const Y=arguments[j];var A=typeof Y;if(A=A!="object"?A:Y?Array.isArray(Y)?"array":A:"null",A=="array"||A=="object"&&typeof Y.length=="number"){A=m.length||0;const te=Y.length||0;m.length=A+te;for(let de=0;de<te;de++)m[A+de]=Y[de]}else m.push(Y)}}class E{constructor(T,A){this.i=T,this.j=A,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function P(m){c.setTimeout(()=>{throw m},0)}function N(){var m=D;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class V{constructor(){this.h=this.g=null}add(T,A){const j=L.get();j.set(T,A),this.h?this.h.next=j:this.g=j,this.h=j}}var L=new E(()=>new ne,m=>m.reset());class ne{constructor(){this.next=this.g=this.h=null}set(T,A){this.h=T,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let W,q=!1,D=new V,I=()=>{const m=Promise.resolve(void 0);W=()=>{m.then(C)}};function C(){for(var m;m=N();){try{m.h.call(m.g)}catch(A){P(A)}var T=L;T.j(m),T.h<100&&(T.h++,m.next=T.g,T.g=m)}q=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const A=()=>{};c.addEventListener("test",A,T),c.removeEventListener("test",A,T)}catch{}return m})();function O(m){return/^[\s\xa0]*$/.test(m)}function X(m,T){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,T)}b(X,k),X.prototype.init=function(m,T){const A=this.type=m.type,j=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget,T||(A=="mouseover"?T=m.fromElement:A=="mouseout"&&(T=m.toElement)),this.relatedTarget=T,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),G=0;function U(m,T,A,j,Y){this.listener=m,this.proxy=null,this.src=T,this.type=A,this.capture=!!j,this.ha=Y,this.key=++G,this.da=this.fa=!1}function J(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function oe(m,T,A){for(const j in m)T.call(A,m[j],j,m)}function fe(m,T){for(const A in m)T.call(void 0,m[A],A,m)}function pe(m){const T={};for(const A in m)T[A]=m[A];return T}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(m,T){let A,j;for(let Y=1;Y<arguments.length;Y++){j=arguments[Y];for(A in j)m[A]=j[A];for(let te=0;te<Ee.length;te++)A=Ee[te],Object.prototype.hasOwnProperty.call(j,A)&&(m[A]=j[A])}}function De(m){this.src=m,this.g={},this.h=0}De.prototype.add=function(m,T,A,j,Y){const te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);const de=tt(m,T,j,Y);return de>-1?(T=m[de],A||(T.fa=!1)):(T=new U(T,this.src,te,!!j,Y),T.fa=A,m.push(T)),T};function Qe(m,T){const A=T.type;if(A in m.g){var j=m.g[A],Y=Array.prototype.indexOf.call(j,T,void 0),te;(te=Y>=0)&&Array.prototype.splice.call(j,Y,1),te&&(J(T),m.g[A].length==0&&(delete m.g[A],m.h--))}}function tt(m,T,A,j){for(let Y=0;Y<m.length;++Y){const te=m[Y];if(!te.da&&te.listener==T&&te.capture==!!A&&te.ha==j)return Y}return-1}var Xt="closure_lm_"+(Math.random()*1e6|0),Se={};function bn(m,T,A,j,Y){if(Array.isArray(T)){for(let te=0;te<T.length;te++)bn(m,T[te],A,j,Y);return null}return A=wl(A),m&&m[le]?m.J(T,A,h(j)?!!j.capture:!1,Y):Wn(m,T,A,!1,j,Y)}function Wn(m,T,A,j,Y,te){if(!T)throw Error("Invalid event type");const de=h(Y)?!!Y.capture:!!Y;let ke=Mi(m);if(ke||(m[Xt]=ke=new De(m)),A=ke.add(T,A,j,de,te),A.proxy)return A;if(j=yt(),A.proxy=j,j.src=m,j.listener=A,m.addEventListener)z||(Y=de),Y===void 0&&(Y=!1),m.addEventListener(T.toString(),j,Y);else if(m.attachEvent)m.attachEvent(Tn(T.toString()),j);else if(m.addListener&&m.removeListener)m.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return A}function yt(){function m(A){return T.call(m.src,m.listener,A)}const T=_e;return m}function fn(m,T,A,j,Y){if(Array.isArray(T))for(var te=0;te<T.length;te++)fn(m,T[te],A,j,Y);else j=h(j)?!!j.capture:!!j,A=wl(A),m&&m[le]?(m=m.i,te=String(T).toString(),te in m.g&&(T=m.g[te],A=tt(T,A,j,Y),A>-1&&(J(T[A]),Array.prototype.splice.call(T,A,1),T.length==0&&(delete m.g[te],m.h--)))):m&&(m=Mi(m))&&(T=m.g[T.toString()],m=-1,T&&(m=tt(T,A,j,Y)),(A=m>-1?T[m]:null)&&hi(A))}function hi(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[le])Qe(T.i,m);else{var A=m.type,j=m.proxy;T.removeEventListener?T.removeEventListener(A,j,m.capture):T.detachEvent?T.detachEvent(Tn(A),j):T.addListener&&T.removeListener&&T.removeListener(j),(A=Mi(T))?(Qe(A,m),A.h==0&&(A.src=null,T[Xt]=null)):J(m)}}}function Tn(m){return m in Se?Se[m]:Se[m]="on"+m}function _e(m,T){if(m.da)m=!0;else{T=new X(T,this);const A=m.listener,j=m.ha||m.src;m.fa&&hi(m),m=A.call(j,T)}return m}function Mi(m){return m=m[Xt],m instanceof De?m:null}var Oi="__closure_events_fn_"+(Math.random()*1e9>>>0);function wl(m){return typeof m=="function"?m:(m[Oi]||(m[Oi]=function(T){return m.handleEvent(T)}),m[Oi])}function It(){F.call(this),this.i=new De(this),this.M=this,this.G=null}b(It,F),It.prototype[le]=!0,It.prototype.removeEventListener=function(m,T,A,j){fn(this,m,T,A,j)};function zt(m,T){var A,j=m.G;if(j)for(A=[];j;j=j.G)A.push(j);if(m=m.M,j=T.type||T,typeof T=="string")T=new k(T,m);else if(T instanceof k)T.target=T.target||m;else{var Y=T;T=new k(j,m),Te(T,Y)}Y=!0;let te,de;if(A)for(de=A.length-1;de>=0;de--)te=T.g=A[de],Y=Hr(te,j,!0,T)&&Y;if(te=T.g=m,Y=Hr(te,j,!0,T)&&Y,Y=Hr(te,j,!1,T)&&Y,A)for(de=0;de<A.length;de++)te=T.g=A[de],Y=Hr(te,j,!1,T)&&Y}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var m=this.i;for(const T in m.g){const A=m.g[T];for(let j=0;j<A.length;j++)J(A[j]);delete m.g[T],m.h--}}this.G=null},It.prototype.J=function(m,T,A,j){return this.i.add(String(m),T,!1,A,j)},It.prototype.K=function(m,T,A,j){return this.i.add(String(m),T,!0,A,j)};function Hr(m,T,A,j){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();let Y=!0;for(let te=0;te<T.length;++te){const de=T[te];if(de&&!de.da&&de.capture==A){const ke=de.listener,_t=de.ha||de.src;de.fa&&Qe(m.i,de),Y=ke.call(_t,j)!==!1&&Y}}return Y&&!j.defaultPrevented}function qf(m,T){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=g(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:c.setTimeout(m,T||0)}function Du(m){m.g=qf(()=>{m.g=null,m.i&&(m.i=!1,Du(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class mn extends F{constructor(T,A){super(),this.m=T,this.l=A,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Du(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zs(m){F.call(this),this.h=m,this.g={}}b(Zs,F);var El=[];function Rl(m){oe(m.g,function(T,A){this.g.hasOwnProperty(A)&&hi(T)},m),m.g={}}Zs.prototype.N=function(){Zs.Z.N.call(this),Rl(this)},Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wr=c.JSON.stringify,Kf=c.JSON.parse,ku=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Pu(){}function Mu(){}var fi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){k.call(this,"d")}b(Qt,k);function qn(){k.call(this,"c")}b(qn,k);var St={},Ou=null;function Qa(){return Ou=Ou||new It}St.Ia="serverreachability";function Nu(m){k.call(this,St.Ia,m)}b(Nu,k);function Ni(m){const T=Qa();zt(T,new Nu(T))}St.STAT_EVENT="statevent";function Js(m,T){k.call(this,St.STAT_EVENT,m),this.stat=T}b(Js,k);function Ct(m){const T=Qa();zt(T,new Js(T,m))}St.Ja="timingevent";function Vi(m,T){k.call(this,St.Ja,m),this.size=T}b(Vi,k);function Fi(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},T)}function mi(){this.g=!0}mi.prototype.ua=function(){this.g=!1};function Yf(m,T,A,j,Y,te){m.info(function(){if(m.g)if(te){var de="",ke=te.split("&");for(let Ye=0;Ye<ke.length;Ye++){var _t=ke[Ye].split("=");if(_t.length>1){const dt=_t[0];_t=_t[1];const Qn=dt.split("_");de=Qn.length>=2&&Qn[1]=="type"?de+(dt+"="+_t+"&"):de+(dt+"=redacted&")}}}else de=null;else de=te;return"XMLHTTP REQ ("+j+") [attempt "+Y+"]: "+T+`
`+A+`
`+de})}function Vu(m,T,A,j,Y,te,de){m.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+Y+"]: "+T+`
`+A+`
`+te+" "+de})}function Li(m,T,A,j){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+Xf(m,A)+(j?" "+j:"")})}function ea(m,T){m.info(function(){return"TIMEOUT: "+T})}mi.prototype.info=function(){};function Xf(m,T){if(!m.g)return T;if(!T)return null;try{const te=JSON.parse(T);if(te){for(m=0;m<te.length;m++)if(Array.isArray(te[m])){var A=te[m];if(!(A.length<2)){var j=A[1];if(Array.isArray(j)&&!(j.length<1)){var Y=j[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let de=1;de<j.length;de++)j[de]=""}}}}return Wr(te)}catch{return T}}var ta={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Il={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cl;function na(){}b(na,Pu),na.prototype.g=function(){return new XMLHttpRequest},Cl=new na;function fr(m){return encodeURIComponent(String(m))}function Fu(m){var T=1;m=m.split(":");const A=[];for(;T>0&&m.length;)A.push(m.shift()),T--;return m.length&&A.push(m.join(":")),A}function gi(m,T,A,j){this.j=m,this.i=T,this.l=A,this.S=j||1,this.V=new Zs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pi}function pi(){this.i=null,this.g="",this.h=!1}var jt={},$t={};function Bi(m,T,A){m.M=1,m.A=ia(kt(T)),m.u=A,m.R=!0,Za(m,null)}function Za(m,T){m.F=Date.now(),zi(m),m.B=kt(m.A);var A=m.B,j=m.S;Array.isArray(j)||(j=[String(j)]),no(A.i,"t",j),m.C=0,A=m.j.L,m.h=new pi,m.g=Ju(m.j,A?T:null,!m.u),m.P>0&&(m.O=new mn(g(m.Y,m,m.g),m.P)),T=m.V,A=m.g,j=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(El[0]=Y.toString()),Y=El);for(let te=0;te<Y.length;te++){const de=bn(A,Y[te],j||T.handleEvent,!1,T.h||T);if(!de)break;T.g[de.key]=de}T=m.J?pe(m.J):{},m.u?(m.v||(m.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,T)):(m.v="GET",m.g.ea(m.B,m.v,null,T)),Ni(),Yf(m.i,m.v,m.B,m.l,m.S,m.u)}gi.prototype.ba=function(m){m=m.target;const T=this.O;T&&xi(m)==3?T.j():this.Y(m)},gi.prototype.Y=function(m){try{if(m==this.g)e:{const ke=xi(this.g),_t=this.g.ya(),Ye=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||ke!=4||_t==7||(_t==8||Ye<=0?Ni(3):Ni(2)),Ui(this);var T=this.g.ca();this.X=T;var A=Qf(this);if(this.o=T==200,Vu(this.i,this.v,this.B,this.l,this.S,ke,T),this.o){if(this.U&&!this.L){t:{if(this.g){var j,Y=this.g;if((j=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(j)){var te=j;break t}}te=null}if(m=te)Li(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gi(this,m);else{this.o=!1,this.m=3,Ct(12),Pn(this),Kn(this);break e}}if(this.R){m=!0;let dt;for(;!this.K&&this.C<A.length;)if(dt=Bu(this,A),dt==$t){ke==4&&(this.m=4,Ct(14),m=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==jt){this.m=4,Ct(15),Li(this.i,this.l,A,"[Invalid Chunk]"),m=!1;break}else Li(this.i,this.l,dt,null),Gi(this,dt);if(Lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||A.length!=0||this.h.h||(this.m=1,Ct(16),m=!1),this.o=this.o&&m,!m)Li(this.i,this.l,A,"[Invalid Chunked Response]"),Pn(this),Kn(this);else if(A.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),$l(de),de.P=!0,Ct(11))}}else Li(this.i,this.l,A,null),Gi(this,A);ke==4&&Pn(this),this.o&&!this.K&&(ke==4?Yu(this.j,this):(this.o=!1,zi(this)))}else gr(this.g),T==400&&A.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Pn(this),Kn(this)}}}catch{}finally{}};function Qf(m){if(!Lu(m))return m.g.la();const T=Zt(m.g);if(T==="")return"";let A="";const j=T.length,Y=xi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Pn(m),Kn(m),"";m.h.i=new c.TextDecoder}for(let te=0;te<j;te++)m.h.h=!0,A+=m.h.i.decode(T[te],{stream:!(Y&&te==j-1)});return T.length=0,m.h.g+=A,m.C=0,m.h.g}function Lu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Bu(m,T){var A=m.C,j=T.indexOf(`
`,A);return j==-1?$t:(A=Number(T.substring(A,j)),isNaN(A)?jt:(j+=1,j+A>T.length?$t:(T=T.slice(j,j+A),m.C=j+A,T)))}gi.prototype.cancel=function(){this.K=!0,Pn(this)};function zi(m){m.T=Date.now()+m.H,Ja(m,m.H)}function Ja(m,T){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Fi(g(m.aa,m),T)}function Ui(m){m.D&&(c.clearTimeout(m.D),m.D=null)}gi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(ea(this.i,this.B),this.M!=2&&(Ni(),Ct(17)),Pn(this),this.m=2,Kn(this)):Ja(this,this.T-m)};function Kn(m){m.j.I==0||m.K||Yu(m.j,m)}function Pn(m){Ui(m);var T=m.O;T&&typeof T.dispose=="function"&&T.dispose(),m.O=null,Rl(m.V),m.g&&(T=m.g,m.g=null,T.abort(),T.dispose())}function Gi(m,T){try{var A=m.j;if(A.I!=0&&(A.g==m||Hi(A.h,m))){if(!m.L&&Hi(A.h,m)&&A.I==3){try{var j=A.Ba.g.parse(T)}catch{j=null}if(Array.isArray(j)&&j.length==3){var Y=j;if(Y[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<m.F)oo(A),es(A);else break e;ua(A),Ct(18)}}else A.xa=Y[1],0<A.xa-A.K&&Y[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Fi(g(A.Va,A),6e3));$i(A.h)<=1&&A.ta&&(A.ta=void 0)}else Qi(A,11)}else if((m.L||A.g==m)&&oo(A),!O(T))for(Y=A.Ba.g.parse(T),T=0;T<Y.length;T++){let Ye=Y[T];const dt=Ye[0];if(!(dt<=A.K))if(A.K=dt,Ye=Ye[1],A.I==2)if(Ye[0]=="c"){A.M=Ye[1],A.ba=Ye[2];const Qn=Ye[3];Qn!=null&&(A.ka=Qn,A.j.info("VER="+A.ka));const Zi=Ye[4];Zi!=null&&(A.za=Zi,A.j.info("SVER="+A.za));const bi=Ye[5];bi!=null&&typeof bi=="number"&&bi>0&&(j=1.5*bi,A.O=j,A.j.info("backChannelRequestTimeoutMs_="+j)),j=A;const Ti=m.g;if(Ti){const da=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var te=j.h;te.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(kl(te,te.h),te.h=null))}if(j.G){const lo=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;lo&&(j.wa=lo,Ze(j.J,j.G,lo))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-m.F,A.j.info("Handshake RTT: "+A.T+"ms")),j=A;var de=m;if(j.na=Zu(j,j.L?j.ba:null,j.W),de.L){Pl(j.h,de);var ke=de,_t=j.O;_t&&(ke.H=_t),ke.D&&(Ui(ke),zi(ke)),j.g=de}else qu(j);A.i.length>0&&Xi(A)}else Ye[0]!="stop"&&Ye[0]!="close"||Qi(A,7);else A.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Qi(A,7):Ul(A):Ye[0]!="noop"&&A.l&&A.l.qa(Ye),A.A=0)}}Ni(4)}catch{}}var Dt=class{constructor(m,T){this.g=m,this.map=T}};function jl(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function $i(m){return m.h?1:m.g?m.g.size:0}function Hi(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function kl(m,T){m.g?m.g.add(T):m.h=T}function Pl(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}jl.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ml(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const A of m.g.values())T=T.concat(A.G);return T}return _(m.i)}var zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eo(m,T){if(m){m=m.split("&");for(let A=0;A<m.length;A++){const j=m[A].indexOf("=");let Y,te=null;j>=0?(Y=m[A].substring(0,j),te=m[A].substring(j+1)):Y=m[A],T(Y,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Mn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;m instanceof Mn?(this.l=m.l,Ht(this,m.j),this.o=m.o,this.g=m.g,qr(this,m.u),this.h=m.h,Ol(this,Hu(m.i)),this.m=m.m):m&&(T=String(m).match(zu))?(this.l=!1,Ht(this,T[1]||"",!0),this.o=Wi(T[2]||""),this.g=Wi(T[3]||"",!0),qr(this,T[4]),this.h=Wi(T[5]||"",!0),Ol(this,T[6]||"",!0),this.m=Wi(T[7]||"")):(this.l=!1,this.i=new Yr(null,this.l))}Mn.prototype.toString=function(){const m=[];var T=this.j;T&&m.push(ra(T,to,!0),":");var A=this.g;return(A||T=="file")&&(m.push("//"),(T=this.o)&&m.push(ra(T,to,!0),"@"),m.push(fr(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&m.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&m.push("/"),m.push(ra(A,A.charAt(0)=="/"?Nl:Uu,!0))),(A=this.i.toString())&&m.push("?",A),(A=this.m)&&m.push("#",ra(A,Gu)),m.join("")},Mn.prototype.resolve=function(m){const T=kt(this);let A=!!m.j;A?Ht(T,m.j):A=!!m.o,A?T.o=m.o:A=!!m.g,A?T.g=m.g:A=m.u!=null;var j=m.h;if(A)qr(T,m.u);else if(A=!!m.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var Y=T.h.lastIndexOf("/");Y!=-1&&(j=T.h.slice(0,Y+1)+j)}if(Y=j,Y==".."||Y==".")j="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){j=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const te=[];for(let de=0;de<Y.length;){const ke=Y[de++];ke=="."?j&&de==Y.length&&te.push(""):ke==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),j&&de==Y.length&&te.push("")):(te.push(ke),j=!0)}j=te.join("/")}else j=Y}return A?T.h=j:A=m.i.toString()!=="",A?Ol(T,Hu(m.i)):A=!!m.m,A&&(T.m=m.m),T};function kt(m){return new Mn(m)}function Ht(m,T,A){m.j=A?Wi(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function qr(m,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);m.u=T}else m.u=null}function Ol(m,T,A){T instanceof Yr?(m.i=T,io(m.i,m.l)):(A||(T=ra(T,Kr)),m.i=new Yr(T,m.l))}function Ze(m,T,A){m.i.set(T,A)}function ia(m){return Ze(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Wi(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ra(m,T,A){return typeof m=="string"?(m=encodeURI(m).replace(T,Sn),A&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Sn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var to=/[#\/\?@]/g,Uu=/[#\?:]/g,Nl=/[#\?]/g,Kr=/[#\?@]/g,Gu=/#/g;function Yr(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function _n(m){m.g||(m.g=new Map,m.h=0,m.i&&eo(m.i,function(T,A){m.add(decodeURIComponent(T.replace(/\+/g," ")),A)}))}n=Yr.prototype,n.add=function(m,T){_n(this),this.i=null,m=Xr(this,m);let A=this.g.get(m);return A||this.g.set(m,A=[]),A.push(T),this.h+=1,this};function $u(m,T){_n(m),T=Xr(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function Vl(m,T){return _n(m),T=Xr(m,T),m.g.has(T)}n.forEach=function(m,T){_n(this),this.g.forEach(function(A,j){A.forEach(function(Y){m.call(T,Y,j,this)},this)},this)};function Fl(m,T){_n(m);let A=[];if(typeof T=="string")Vl(m,T)&&(A=A.concat(m.g.get(Xr(m,T))));else for(m=Array.from(m.g.values()),T=0;T<m.length;T++)A=A.concat(m[T]);return A}n.set=function(m,T){return _n(this),this.i=null,m=Xr(this,m),Vl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=Fl(this,m),m.length>0?String(m[0]):T):T};function no(m,T,A){$u(m,T),A.length>0&&(m.i=null,m.g.set(Xr(m,T),_(A)),m.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(let j=0;j<T.length;j++){var A=T[j];const Y=fr(A);A=Fl(this,A);for(let te=0;te<A.length;te++){let de=Y;A[te]!==""&&(de+="="+fr(A[te])),m.push(de)}}return this.i=m.join("&")};function Hu(m){const T=new Yr;return T.i=m.i,m.g&&(T.g=new Map(m.g),T.h=m.h),T}function Xr(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function io(m,T){T&&!m.j&&(_n(m),m.i=null,m.g.forEach(function(A,j){const Y=j.toLowerCase();j!=Y&&($u(this,j),no(this,Y,A))},m)),m.j=T}function yi(m,T){const A=new mi;if(c.Image){const j=new Image;j.onload=v(Yn,A,"TestLoadImage: loaded",!0,T,j),j.onerror=v(Yn,A,"TestLoadImage: error",!1,T,j),j.onabort=v(Yn,A,"TestLoadImage: abort",!1,T,j),j.ontimeout=v(Yn,A,"TestLoadImage: timeout",!1,T,j),c.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=m}else T(!1)}function Ll(m,T){const A=new mi,j=new AbortController,Y=setTimeout(()=>{j.abort(),Yn(A,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:j.signal}).then(te=>{clearTimeout(Y),te.ok?Yn(A,"TestPingServer: ok",!0,T):Yn(A,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(Y),Yn(A,"TestPingServer: error",!1,T)})}function Yn(m,T,A,j,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),j(A)}catch{}}function Qr(){this.g=new ku}function qi(m){this.i=m.Sb||null,this.h=m.ab||!1}b(qi,Pu),qi.prototype.g=function(){return new sa(this.i,this.h)};function sa(m,T){It.call(this),this.H=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(sa,It),n=sa.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=T,this.readyState=1,vi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(T.body=m),(this.H||c).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ro(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function ro(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?Zr(this):vi(this),this.readyState==3&&ro(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Zr(this))},n.Na=function(m){this.g&&(this.response=m,Zr(this))},n.ga=function(){this.g&&Zr(this)};function Zr(m){m.readyState=4,m.l=null,m.j=null,m.B=null,vi(m)}n.setRequestHeader=function(m,T){this.A.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var A=T.next();!A.done;)A=A.value,m.push(A[0]+": "+A[1]),A=T.next();return m.join(`\r
`)};function vi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Xn(m){let T="";return oe(m,function(A,j){T+=j,T+=":",T+=A,T+=`\r
`}),T}function aa(m,T,A){e:{for(j in A){var j=!1;break e}j=!0}j||(A=Xn(A),typeof m=="string"?A!=null&&fr(A):Ze(m,T,A))}function nt(m){It.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(nt,It);var Ki=/^https?$/i,Bl=["POST","PUT"];n=nt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,T,A,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cl.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(te){oa(this,te);return}if(m=A||"",A=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var Y in j)A.set(Y,j[Y]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const te of j.keys())A.set(te,j.get(te));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(A.keys()).find(te=>te.toLowerCase()=="content-type"),Y=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Bl,T,void 0)>=0)||j||Y||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,de]of A)this.g.setRequestHeader(te,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(te){oa(this,te)}};function oa(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.o=5,zl(m),mr(m)}function zl(m){m.A||(m.A=!0,zt(m,"complete"),zt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,zt(this,"complete"),zt(this,"abort"),mr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mr(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?la(this):this.Xa())},n.Xa=function(){la(this)};function la(m){if(m.h&&typeof l<"u"){if(m.v&&xi(m)==4)setTimeout(m.Ca.bind(m),0);else if(zt(m,"readystatechange"),xi(m)==4){m.h=!1;try{const te=m.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var A;if(!(A=T)){var j;if(j=te===0){let de=String(m.D).match(zu)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),j=!Ki.test(de?de.toLowerCase():"")}A=j}if(A)zt(m,"complete"),zt(m,"success");else{m.o=6;try{var Y=xi(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",zl(m)}}finally{mr(m)}}}}function mr(m,T){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const A=m.g;m.g=null,T||zt(m,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function xi(m){return m.g?m.g.readyState:0}n.ca=function(){try{return xi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),Kf(T)}};function Zt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function gr(m){const T={};m=(m.g&&xi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<m.length;j++){if(O(m[j]))continue;var A=Fu(m[j]);const Y=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const te=T[Y]||[];T[Y]=te,te.push(A)}fe(T,function(j){return j.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yi(m,T,A){return A&&A.internalChannelParams&&A.internalChannelParams[m]||T}function Jr(m){this.za=0,this.i=[],this.j=new mi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yi("baseRetryDelayMs",5e3,m),this.Za=Yi("retryDelaySeedMs",1e4,m),this.Ta=Yi("forwardChannelMaxRetries",2,m),this.va=Yi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new jl(m&&m.concurrentRequestLimit),this.Ba=new Qr,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Jr.prototype,n.ka=8,n.I=1,n.connect=function(m,T,A,j){Ct(0),this.W=m,this.H=T||{},A&&j!==void 0&&(this.H.OSID=A,this.H.OAID=j),this.F=this.X,this.J=Zu(this,null,this.W),Xi(this)};function Ul(m){if(so(m),m.I==3){var T=m.V++,A=kt(m.J);if(Ze(A,"SID",m.M),Ze(A,"RID",T),Ze(A,"TYPE","terminate"),ca(m,A),T=new gi(m,m.j,T),T.M=2,T.A=ia(kt(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(T.A.toString(),"")}catch{}!A&&c.Image&&(new Image().src=T.A,A=!0),A||(T.g=Ju(T.j,null),T.g.ea(T.A)),T.F=Date.now(),zi(T)}Qu(m)}function es(m){m.g&&($l(m),m.g.cancel(),m.g=null)}function so(m){es(m),m.v&&(c.clearTimeout(m.v),m.v=null),oo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Xi(m){if(!Dl(m.h)&&!m.m){m.m=!0;var T=m.Ea;W||I(),q||(W(),q=!0),D.add(T,m),m.D=0}}function ao(m,T){return $i(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=T.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Fi(g(m.Ea,m,T),Xu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new gi(this,this.j,m);let te=this.o;if(this.U&&(te?(te=pe(te),Te(te,this.U)):te=this.U),this.u!==null||this.R||(Y.J=te,te=null),this.S)e:{for(var T=0,A=0;A<this.i.length;A++){t:{var j=this.i[A];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(T+=j,T>4096){T=A;break e}if(T===4096||A===this.i.length-1){T=A+1;break e}}T=1e3}else T=1e3;T=Wu(this,Y,T),A=kt(this.J),Ze(A,"RID",m),Ze(A,"CVER",22),this.G&&Ze(A,"X-HTTP-Session-Id",this.G),ca(this,A),te&&(this.R?T="headers="+fr(Xn(te))+"&"+T:this.u&&aa(A,this.u,te)),kl(this.h,Y),this.Ra&&Ze(A,"TYPE","init"),this.S?(Ze(A,"$req",T),Ze(A,"SID","null"),Y.U=!0,Bi(Y,A,null)):Bi(Y,A,T),this.I=2}}else this.I==3&&(m?Gl(this,m):this.i.length==0||Dl(this.h)||Gl(this))};function Gl(m,T){var A;T?A=T.l:A=m.V++;const j=kt(m.J);Ze(j,"SID",m.M),Ze(j,"RID",A),Ze(j,"AID",m.K),ca(m,j),m.u&&m.o&&aa(j,m.u,m.o),A=new gi(m,m.j,A,m.D+1),m.u===null&&(A.J=m.o),T&&(m.i=T.G.concat(m.i)),T=Wu(m,A,1e3),A.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),kl(m.h,A),Bi(A,j,T)}function ca(m,T){m.H&&oe(m.H,function(A,j){Ze(T,j,A)}),m.l&&oe({},function(A,j){Ze(T,j,A)})}function Wu(m,T,A){A=Math.min(m.i.length,A);const j=m.l?g(m.l.Ka,m.l,m):null;e:{var Y=m.i;let ke=-1;for(;;){const _t=["count="+A];ke==-1?A>0?(ke=Y[0].g,_t.push("ofs="+ke)):ke=0:_t.push("ofs="+ke);let Ye=!0;for(let dt=0;dt<A;dt++){var te=Y[dt].g;const Qn=Y[dt].map;if(te-=ke,te<0)ke=Math.max(0,Y[dt].g-100),Ye=!1;else try{te="req"+te+"_"||"";try{var de=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Zi,bi]of de){let Ti=bi;h(bi)&&(Ti=Wr(bi)),_t.push(te+Zi+"="+encodeURIComponent(Ti))}}catch(Zi){throw _t.push(te+"type="+encodeURIComponent("_badmap")),Zi}}catch{j&&j(Qn)}}if(Ye){de=_t.join("&");break e}}de=void 0}return m=m.i.splice(0,A),T.G=m,de}function qu(m){if(!m.g&&!m.v){m.Y=1;var T=m.Da;W||I(),q||(W(),q=!0),D.add(T,m),m.A=0}}function ua(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Fi(g(m.Da,m),Xu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ku(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Fi(g(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),es(this),Ku(this))};function $l(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Ku(m){m.g=new gi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var T=kt(m.na);Ze(T,"RID","rpc"),Ze(T,"SID",m.M),Ze(T,"AID",m.K),Ze(T,"CI",m.F?"0":"1"),!m.F&&m.ia&&Ze(T,"TO",m.ia),Ze(T,"TYPE","xmlhttp"),ca(m,T),m.u&&m.o&&aa(T,m.u,m.o),m.O&&(m.g.H=m.O);var A=m.g;m=m.ba,A.M=1,A.A=ia(kt(T)),A.u=null,A.R=!0,Za(A,m)}n.Va=function(){this.C!=null&&(this.C=null,es(this),ua(this),Ct(19))};function oo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Yu(m,T){var A=null;if(m.g==T){oo(m),$l(m),m.g=null;var j=2}else if(Hi(m.h,T))A=T.G,Pl(m.h,T),j=1;else return;if(m.I!=0){if(T.o)if(j==1){A=T.u?T.u.length:0,T=Date.now()-T.F;var Y=m.D;j=Qa(),zt(j,new Vi(j,A)),Xi(m)}else qu(m);else if(Y=T.m,Y==3||Y==0&&T.X>0||!(j==1&&ao(m,T)||j==2&&ua(m)))switch(A&&A.length>0&&(T=m.h,T.i=T.i.concat(A)),Y){case 1:Qi(m,5);break;case 4:Qi(m,10);break;case 3:Qi(m,6);break;default:Qi(m,2)}}}function Xu(m,T){let A=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(A*=2),A*T}function Qi(m,T){if(m.j.info("Error code "+T),T==2){var A=g(m.bb,m),j=m.Ua;const Y=!j;j=new Mn(j||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ht(j,"https"),ia(j),Y?yi(j.toString(),A):Ll(j.toString(),A)}else Ct(2);m.I=0,m.l&&m.l.pa(T),Qu(m),so(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Qu(m){if(m.I=0,m.ja=[],m.l){const T=Ml(m.h);(T.length!=0||m.i.length!=0)&&(w(m.ja,T),w(m.ja,m.i),m.h.i.length=0,_(m.i),m.i.length=0),m.l.oa()}}function Zu(m,T,A){var j=A instanceof Mn?kt(A):new Mn(A);if(j.g!="")T&&(j.g=T+"."+j.g),qr(j,j.u);else{var Y=c.location;j=Y.protocol,T=T?T+"."+Y.hostname:Y.hostname,Y=+Y.port;const te=new Mn(null);j&&Ht(te,j),T&&(te.g=T),Y&&qr(te,Y),A&&(te.h=A),j=te}return A=m.G,T=m.wa,A&&T&&Ze(j,A,T),Ze(j,"VER",m.ka),ca(m,j),j}function Ju(m,T,A){if(T&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Aa&&!m.ma?new nt(new qi({ab:A})):new nt(m.ma),T.Fa(m.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ed(){}n=ed.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ts(){}ts.prototype.g=function(m,T){return new gn(m,T)};function gn(m,T){It.call(this),this.g=new Jr(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(m?m["X-WebChannel-Client-Profile"]=T.sa:m={"X-WebChannel-Client-Profile":T.sa}),this.g.U=m,(m=T&&T.Qb)&&!O(m)&&(this.g.u=m),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!O(T)&&(this.g.G=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new pr(this)}b(gn,It),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Ul(this.g)},gn.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var A={};A.__data__=m,m=A}else this.v&&(A={},A.__data__=Wr(m),m=A);T.i.push(new Dt(T.Ya++,m)),T.I==3&&Xi(T)},gn.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,gn.Z.N.call(this)};function td(m){Qt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const A in T){m=A;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}b(td,Qt);function nd(){qn.call(this),this.status=1}b(nd,qn);function pr(m){this.g=m}b(pr,ed),pr.prototype.ra=function(){zt(this.g,"a")},pr.prototype.qa=function(m){zt(this.g,new td(m))},pr.prototype.pa=function(m){zt(this.g,new nd)},pr.prototype.oa=function(){zt(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,x2=function(){return new ts},v2=function(){return Qa()},y2=St,Op={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,bh=ta,Il.COMPLETE="complete",p2=Il,Mu.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",It.prototype.listen=It.prototype.J,jc=Mu,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,g2=nt}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const e5="@firebase/firestore",t5="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new yf("@firebase/firestore");function Bo(){return Ba.logLevel}function me(n,...e){if(Ba.logLevel<=Le.DEBUG){const t=e.map(j0);Ba.debug(`Firestore (${ml}): ${n}`,...t)}}function Lr(n,...e){if(Ba.logLevel<=Le.ERROR){const t=e.map(j0);Ba.error(`Firestore (${ml}): ${n}`,...t)}}function il(n,...e){if(Ba.logLevel<=Le.WARN){const t=e.map(j0);Ba.warn(`Firestore (${ml}): ${n}`,...t)}}function j0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,b2(n,i,t)}function b2(n,e,t){let i=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Lr(i),new Error(i)}function He(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||b2(e,a,i)}function je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class xj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class bj{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let l=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new rr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await a(this.currentUser)}))},h=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new rr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new T2(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class Tj{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sj{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Tj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class n5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _j{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new n5(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new n5(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=Aj(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Be(n,e){return n<e?-1:n>e?1:0}function Np(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return ep(a)===ep(l)?Be(a,l):ep(a)?1:-1}return Be(n.length,e.length)}const wj=55296,Ej=57343;function ep(n){const e=n.charCodeAt(0);return e>=wj&&e<=Ej}function rl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="__name__";class ir{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=ir.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const i=ir.isNumericId(e),a=ir.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?ir.extractNumericId(e).compare(ir.extractNumericId(t)):Np(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}}class at extends ir{construct(e,t,i){return new at(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new at(t)}static emptyPath(){return new at([])}}const Rj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends ir{construct(e,t,i){return new on(e,t,i)}static isValidIdentifier(e){return Rj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i5}static keyField(){return new on([i5])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new he(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new he(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(i+=h,a++):(l(),a++)}if(l(),c)throw new he(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(at.fromString(e))}static fromName(e){return new ve(at.fromString(e).popFirst(5))}static empty(){return new ve(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n,e,t){if(!t)throw new he(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ij(n,e,t,i){if(e===!0&&i===!0)throw new he(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function r5(n){if(!ve.isDocumentKey(n))throw new he(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function s5(n){if(ve.isDocumentKey(n))throw new he(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be(12329,{type:typeof n})}function Ii(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xf(n);throw new he(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function gu(n,e){if(!_2(n))throw new he(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new he(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=-62135596800,o5=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*o5);return new ut(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<a5)throw new he(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/o5}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-a5;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Bt("string",ut._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ut(0,0))}static max(){return new Re(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=-1;function Cj(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(i===1e9?new ut(t+1,0):new ut(t,i));return new Ls(a,ve.empty(),e)}function jj(n){return new Ls(n.readTime,n.key,Jc)}class Ls{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ls(Re.min(),ve.empty(),Jc)}static max(){return new Ls(Re.max(),ve.empty(),Jc)}}function Dj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==kj)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,i)=>{t(e)}))}static reject(e){return new ue(((t,i)=>{i(e)}))}static waitFor(e){return new ue(((t,i)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&t()}),(f=>i(f)))})),c=!0,l===a&&t()}))}static or(e){let t=ue.resolve(!1);for(const i of e)t=t.next((a=>a?ue.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new ue(((i,a)=>{const l=e.length,c=new Array(l);let h=0;for(let f=0;f<l;f++){const g=f;t(e[g]).next((v=>{c[g]=v,++h,h===l&&i(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new ue(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function Mj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=-1;function pu(n){return n==null}function zh(n){return n===0&&1/n==-1/0}function Oj(n){return typeof n=="number"&&Number.isInteger(n)&&!zh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="";function Nj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=l5(e)),e=Vj(n.get(t),e);return l5(e)}function Vj(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case A2:t+="";break;default:t+=l}}return t}function l5(n){return n+A2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ks(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??an.RED,this.left=a??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new an(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return an.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new u5(this.data.getIterator())}getIteratorFrom(e){return new u5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class u5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Gt(on.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new E2("Invalid base64 string: "+l):l}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const Fj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(He(!!n,39018),typeof n=="string"){let e=0;const t=Fj.exec(n);if(He(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zs(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="server_timestamp",I2="__type__",C2="__previous_value__",j2="__local_write_time__";function P0(n){return(n?.mapValue?.fields||{})[I2]?.stringValue===R2}function Tf(n){const e=n.mapValue.fields[C2];return P0(e)?Tf(e):e}function eu(n){const e=Bs(n.mapValue.fields[j2].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,t,i,a,l,c,h,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=v}}const Uh="(default)";class tu{constructor(e,t){this.projectId=e,this.database=t||Uh}static empty(){return new tu("","")}get isDefaultDatabase(){return this.database===Uh}isEqual(e){return e instanceof tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="__type__",Bj="__max__",lh={mapValue:{}},k2="__vector__",Gh="value";function Us(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?P0(n)?4:Uj(n)?9007199254740991:zj(n)?10:11:be(28295,{value:n})}function hr(n,e){if(n===e)return!0;const t=Us(n);if(t!==Us(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return eu(n).isEqual(eu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Bs(a.timestampValue),h=Bs(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return zs(a.bytesValue).isEqual(zs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Rt(a.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(a.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Rt(a.integerValue)===Rt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Rt(a.doubleValue),h=Rt(l.doubleValue);return c===h?zh(c)===zh(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return rl(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(c5(c)!==c5(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!hr(c[f],h[f])))return!1;return!0})(n,e);default:return be(52216,{left:n})}}function nu(n,e){return(n.values||[]).find((t=>hr(t,e)))!==void 0}function sl(n,e){if(n===e)return 0;const t=Us(n),i=Us(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Rt(l.integerValue||l.doubleValue),f=Rt(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return d5(n.timestampValue,e.timestampValue);case 4:return d5(eu(n),eu(e));case 5:return Np(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=zs(l),f=zs(c);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),f=c.split("/");for(let g=0;g<h.length&&g<f.length;g++){const v=Be(h[g],f[g]);if(v!==0)return v}return Be(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Be(Rt(l.latitude),Rt(c.latitude));return h!==0?h:Be(Rt(l.longitude),Rt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return h5(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},f=c.fields||{},g=h[Gh]?.arrayValue,v=f[Gh]?.arrayValue,b=Be(g?.values?.length||0,v?.values?.length||0);return b!==0?b:h5(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===lh.mapValue&&c===lh.mapValue)return 0;if(l===lh.mapValue)return 1;if(c===lh.mapValue)return-1;const h=l.fields||{},f=Object.keys(h),g=c.fields||{},v=Object.keys(g);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const x=Np(f[b],v[b]);if(x!==0)return x;const _=sl(h[f[b]],g[v[b]]);if(_!==0)return _}return Be(f.length,v.length)})(n.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function d5(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=Bs(n),i=Bs(e),a=Be(t.seconds,i.seconds);return a!==0?a:Be(t.nanos,i.nanos)}function h5(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=sl(t[a],i[a]);if(l)return l}return Be(t.length,i.length)}function al(n){return Vp(n)}function Vp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Bs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Vp(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Vp(t.fields[c])}`;return a+"}"})(n.mapValue):be(61005,{value:n})}function Th(n){switch(Us(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(n);return e?16+Th(e):16;case 5:return 2*n.stringValue.length;case 6:return zs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Th(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ks(i.fields,((l,c)=>{a+=l.length+Th(c)})),a})(n.mapValue);default:throw be(13486,{value:n})}}function f5(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fp(n){return!!n&&"integerValue"in n}function M0(n){return!!n&&"arrayValue"in n}function m5(n){return!!n&&"nullValue"in n}function g5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sh(n){return!!n&&"mapValue"in n}function zj(n){return(n?.mapValue?.fields||{})[D2]?.stringValue===k2}function Fc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ks(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Fc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fc(n.arrayValue.values[t]);return e}return{...n}}function Uj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Bj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(t)}setAll(e){let t=on.emptyPath(),i={},a=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,i,a),i={},a=[],t=h.popLast()}c?i[h.lastSegment()]=Fc(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Sh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ks(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new yn(Fc(this.value))}}function P2(n){const e=[];return Ks(n.fields,((t,i)=>{const a=new on([t]);if(Sh(i)){const l=P2(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,i,a,l,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Kt(e,0,Re.min(),Re.min(),Re.min(),yn.empty(),0)}static newFoundDocument(e,t,i,a){return new Kt(e,1,t,Re.min(),i,a,0)}static newNoDocument(e,t){return new Kt(e,2,t,Re.min(),Re.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,Re.min(),Re.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.position=e,this.inclusive=t}}function p5(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=ve.comparator(ve.fromName(c.referenceValue),t.key):i=sl(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function y5(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Gj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{}class Lt extends M2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Hj(e,t,i):t==="array-contains"?new Kj(e,i):t==="in"?new Yj(e,i):t==="not-in"?new Xj(e,i):t==="array-contains-any"?new Qj(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Wj(e,i):new qj(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sl(t,this.value)):t!==null&&Us(this.value)===Us(t)&&this.matchesComparison(sl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends M2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Di(e,t)}matches(e){return O2(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function O2(n){return n.op==="and"}function N2(n){return $j(n)&&O2(n)}function $j(n){for(const e of n.filters)if(e instanceof Di)return!1;return!0}function Lp(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+al(n.value);if(N2(n))return n.filters.map((e=>Lp(e))).join(",");{const e=n.filters.map((t=>Lp(t))).join(",");return`${n.op}(${e})`}}function V2(n,e){return n instanceof Lt?(function(i,a){return a instanceof Lt&&i.op===a.op&&i.field.isEqual(a.field)&&hr(i.value,a.value)})(n,e):n instanceof Di?(function(i,a){return a instanceof Di&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,h)=>l&&V2(c,a.filters[h])),!0):!1})(n,e):void be(19439)}function F2(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${al(t.value)}`})(n):n instanceof Di?(function(t){return t.op.toString()+" {"+t.getFilters().map(F2).join(" ,")+"}"})(n):"Filter"}class Hj extends Lt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Wj extends Lt{constructor(e,t){super(e,"in",t),this.keys=L2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class qj extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=L2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function L2(n,e){return(e.arrayValue?.values||[]).map((t=>ve.fromName(t.referenceValue)))}class Kj extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return M0(t)&&nu(t.arrayValue,this.value)}}class Yj extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nu(this.value.arrayValue,t)}}class Xj extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nu(this.value.arrayValue,t)}}class Qj extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!M0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>nu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,t=null,i=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function v5(n,e=null,t=[],i=[],a=null,l=null,c=null){return new Zj(n,e,t,i,a,l,c)}function O0(n){const e=je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Lp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),pu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>al(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>al(i))).join(",")),e.Te=t}return e.Te}function N0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Gj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!V2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!y5(n.startAt,e.startAt)&&y5(n.endAt,e.endAt)}function Bp(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t=null,i=[],a=[],l=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Jj(n,e,t,i,a,l,c,h){return new yl(n,e,t,i,a,l,c,h)}function Sf(n){return new yl(n)}function x5(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function B2(n){return n.collectionGroup!==null}function Lc(n){const e=je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Gt(on.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new iu(l,i))})),t.has(on.keyField().canonicalString())||e.Ie.push(new iu(on.keyField(),i))}return e.Ie}function sr(n){const e=je(n);return e.Ee||(e.Ee=eD(e,Lc(n))),e.Ee}function eD(n,e){if(n.limitType==="F")return v5(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new iu(a.field,l)}));const t=n.endAt?new $h(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new $h(n.startAt.position,n.startAt.inclusive):null;return v5(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function zp(n,e){const t=n.filters.concat([e]);return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Up(n,e,t){return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _f(n,e){return N0(sr(n),sr(e))&&n.limitType===e.limitType}function z2(n){return`${O0(sr(n))}|lt:${n.limitType}`}function zo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>F2(a))).join(", ")}]`),pu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>al(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>al(a))).join(",")),`Target(${i})`})(sr(n))}; limitType=${n.limitType})`}function Af(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of Lc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,h,f){const g=p5(c,h,f);return c.inclusive?g<=0:g<0})(i.startAt,Lc(i),a)||i.endAt&&!(function(c,h,f){const g=p5(c,h,f);return c.inclusive?g>=0:g>0})(i.endAt,Lc(i),a))})(n,e)}function tD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function U2(n){return(e,t)=>{let i=!1;for(const a of Lc(n)){const l=nD(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function nD(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,c,h){const f=c.data.field(l),g=h.data.field(l);return f!==null&&g!==null?sl(f,g):be(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return w2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new pt(ve.comparator);function Br(){return iD}const G2=new pt(ve.comparator);function Dc(...n){let e=G2;for(const t of n)e=e.insert(t.key,t);return e}function $2(n){let e=G2;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Da(){return Bc()}function H2(){return Bc()}function Bc(){return new Ya((n=>n.toString()),((n,e)=>n.isEqual(e)))}const rD=new pt(ve.comparator),sD=new Gt(ve.comparator);function ze(...n){let e=sD;for(const t of n)e=e.add(t);return e}const aD=new Gt(Be);function oD(){return aD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function W2(n){return{integerValue:""+n}}function lD(n,e){return Oj(e)?W2(e):V0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this._=void 0}}function cD(n,e,t){return n instanceof Hh?(function(a,l){const c={fields:{[I2]:{stringValue:R2},[j2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&P0(l)&&(l=Tf(l)),l&&(c.fields[C2]=l),{mapValue:c}})(t,e):n instanceof ol?K2(n,e):n instanceof ru?Y2(n,e):(function(a,l){const c=q2(a,l),h=b5(c)+b5(a.Ae);return Fp(c)&&Fp(a.Ae)?W2(h):V0(a.serializer,h)})(n,e)}function uD(n,e,t){return n instanceof ol?K2(n,e):n instanceof ru?Y2(n,e):t}function q2(n,e){return n instanceof Wh?(function(i){return Fp(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Hh extends wf{}class ol extends wf{constructor(e){super(),this.elements=e}}function K2(n,e){const t=X2(e);for(const i of n.elements)t.some((a=>hr(a,i)))||t.push(i);return{arrayValue:{values:t}}}class ru extends wf{constructor(e){super(),this.elements=e}}function Y2(n,e){let t=X2(e);for(const i of n.elements)t=t.filter((a=>!hr(a,i)));return{arrayValue:{values:t}}}class Wh extends wf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function b5(n){return Rt(n.integerValue||n.doubleValue)}function X2(n){return M0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,t){this.field=e,this.transform=t}}function hD(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof ol&&a instanceof ol||i instanceof ru&&a instanceof ru?rl(i.elements,a.elements,hr):i instanceof Wh&&a instanceof Wh?hr(i.Ae,a.Ae):i instanceof Hh&&a instanceof Hh})(n.transform,e.transform)}class fD{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ef{}function Q2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new F0(n.key,jn.none()):new yu(n.key,n.data,jn.none());{const t=n.data,i=yn.empty();let a=new Gt(on.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Ys(n.key,i,new Gn(a.toArray()),jn.none())}}function mD(n,e,t){n instanceof yu?(function(a,l,c){const h=a.value.clone(),f=S5(a.fieldTransforms,l,c.transformResults);h.setAll(f),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ys?(function(a,l,c){if(!_h(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=S5(a.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(Z2(a)),f.setAll(h),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function zc(n,e,t,i){return n instanceof yu?(function(l,c,h,f){if(!_h(l.precondition,c))return h;const g=l.value.clone(),v=_5(l.fieldTransforms,f,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ys?(function(l,c,h,f){if(!_h(l.precondition,c))return h;const g=_5(l.fieldTransforms,f,c),v=c.data;return v.setAll(Z2(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,i):(function(l,c,h){return _h(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function gD(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=q2(i.transform,a||null);l!=null&&(t===null&&(t=yn.empty()),t.set(i.field,l))}return t||null}function T5(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&rl(i,a,((l,c)=>hD(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class yu extends Ef{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ys extends Ef{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Z2(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function S5(n,e,t){const i=new Map;He(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,h=e.data.field(l.field);i.set(l.field,uD(c,h,t[a]))}return i}function _5(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,cD(l,c,e))}return i}class F0 extends Ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J2 extends Ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&mD(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=zc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=zc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=H2();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(a.key)?null:h;const f=Q2(c,h);f!==null&&i.set(a.key,f),c.isValidDocument()||c.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,((t,i)=>T5(t,i)))&&rl(this.baseMutations,e.baseMutations,((t,i)=>T5(t,i)))}}class L0{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return rD})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new L0(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,$e;function e_(n){switch(n){case se.OK:return be(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return be(15467,{code:n})}}function t_(n){if(n===void 0)return Lr("GRPC error has no .code"),se.UNKNOWN;switch(n){case Vt.OK:return se.OK;case Vt.CANCELLED:return se.CANCELLED;case Vt.UNKNOWN:return se.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return se.INTERNAL;case Vt.UNAVAILABLE:return se.UNAVAILABLE;case Vt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Vt.NOT_FOUND:return se.NOT_FOUND;case Vt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Vt.ABORTED:return se.ABORTED;case Vt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Vt.DATA_LOSS:return se.DATA_LOSS;default:return be(39323,{code:n})}}($e=Vt||(Vt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new Ns([4294967295,4294967295],0);function A5(n){const e=xD().encode(n),t=new m2;return t.update(e),new Uint8Array(t.digest())}function w5(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ns([t,i],0),new Ns([a,l],0)]}class B0{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new kc(`Invalid padding: ${t}`);if(i<0)throw new kc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new kc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new kc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ns.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Ns.fromNumber(i)));return a.compare(bD)===1&&(a=new Ns([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=A5(e),[i,a]=w5(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new B0(l,a,t);return i.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=A5(e),[i,a]=w5(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Rf(Re.min(),a,new pt(Be),Br(),ze())}}class vu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new vu(i,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class n_{constructor(e,t){this.targetId=e,this.Ce=t}}class i_{constructor(e,t,i=ln.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class E5{constructor(){this.ve=0,this.Fe=R5(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),i=ze();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:be(38017,{changeType:l})}})),new vu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=R5()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class TD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Br(),this.Je=ch(),this.He=ch(),this.Ye=new pt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Bp(l))if(i===0){const c=new ve(l.path);this.et(t,c,Kt.newNoDocument(c,Re.min()))}else He(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const h=this.ut(e),f=h?this.ct(h,e,c):1;if(f!==0){this.it(t);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,h;try{c=zs(i).toUint8Array()}catch(f){if(f instanceof E2)return il("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new B0(c,a,l)}catch(f){return il(f instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&Bp(h.target)){const f=new ve(h.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,Kt.newNoDocument(f,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=ze();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((f=>{const g=this.ot(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Rf(e,t,this.Ye,this.je,i);return this.je=Br(),this.Je=ch(),this.He=ch(),this.Ye=new pt(Be),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new E5,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new E5),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ch(){return new pt(ve.comparator)}function R5(){return new pt(ve.comparator)}const SD={asc:"ASCENDING",desc:"DESCENDING"},_D={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AD={and:"AND",or:"OR"};class wD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gp(n,e){return n.useProto3Json||pu(e)?e:{value:e}}function qh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ED(n,e){return qh(n,e.toTimestamp())}function $n(n){return He(!!n,49232),Re.fromTimestamp((function(t){const i=Bs(t);return new ut(i.seconds,i.nanos)})(n))}function z0(n,e){return $p(n,e).canonicalString()}function $p(n,e){const t=(function(a){return new at(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function s_(n){const e=at.fromString(n);return He(d_(e),10190,{key:e.toString()}),e}function Kh(n,e){return z0(n.databaseId,e.path)}function Uc(n,e){const t=s_(e);if(t.get(1)!==n.databaseId.projectId)throw new he(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(o_(t))}function a_(n,e){return z0(n.databaseId,e)}function RD(n){const e=s_(n);return e.length===4?at.emptyPath():o_(e)}function Hp(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function o_(n){return He(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function I5(n,e,t){return{name:Kh(n,e),fields:t.value.mapValue.fields}}function ID(n,e){return"found"in e?(function(i,a){He(!!a.found,43571),a.found.name,a.found.updateTime;const l=Uc(i,a.found.name),c=$n(a.found.updateTime),h=a.found.createTime?$n(a.found.createTime):Re.min(),f=new yn({mapValue:{fields:a.found.fields}});return Kt.newFoundDocument(l,c,h,f)})(n,e):"missing"in e?(function(i,a){He(!!a.missing,3894),He(!!a.readTime,22933);const l=Uc(i,a.missing),c=$n(a.readTime);return Kt.newNoDocument(l,c)})(n,e):be(7234,{result:e})}function CD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:be(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(He(v===void 0||typeof v=="string",58123),ln.fromBase64String(v||"")):(He(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),ln.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(g){const v=g.code===void 0?se.UNKNOWN:t_(g.code);return new he(v,g.message||"")})(c);t=new i_(i,a,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Uc(n,i.document.name),l=$n(i.document.updateTime),c=i.document.createTime?$n(i.document.createTime):Re.min(),h=new yn({mapValue:{fields:i.document.fields}}),f=Kt.newFoundDocument(a,l,c,h),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Ah(g,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Uc(n,i.document),l=i.readTime?$n(i.readTime):Re.min(),c=Kt.newNoDocument(a,l),h=i.removedTargetIds||[];t=new Ah([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Uc(n,i.document),l=i.removedTargetIds||[];t=new Ah([],l,a,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new vD(a,l),h=i.targetId;t=new n_(h,c)}}return t}function l_(n,e){let t;if(e instanceof yu)t={update:I5(n,e.key,e.value)};else if(e instanceof F0)t={delete:Kh(n,e.key)};else if(e instanceof Ys)t={update:I5(n,e.key,e.data),updateMask:FD(e.fieldMask)};else{if(!(e instanceof J2))return be(16599,{Vt:e.type});t={verify:Kh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const h=c.transform;if(h instanceof Hh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ol)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ru)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Wh)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw be(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:ED(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(n,e.precondition)),t}function jD(n,e){return n&&n.length>0?(He(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?$n(a.updateTime):$n(l);return c.isEqual(Re.min())&&(c=$n(l)),new fD(c,a.transformResults||[])})(t,e)))):[]}function DD(n,e){return{documents:[a_(n,e.path)]}}function kD(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=a_(n,a);const l=(function(g){if(g.length!==0)return u_(Di.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(x){return{field:Uo(x.field),direction:OD(x.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Gp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function PD(n){let e=RD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){He(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const x=c_(b);return x instanceof Di&&N2(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((x=>(function(w){return new iu(Go(w.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(b){let x;return x=typeof b=="object"?b.value:b,pu(x)?null:x})(t.limit));let f=null;t.startAt&&(f=(function(b){const x=!!b.before,_=b.values||[];return new $h(_,x)})(t.startAt));let g=null;return t.endAt&&(g=(function(b){const x=!b.before,_=b.values||[];return new $h(_,x)})(t.endAt)),Jj(e,a,c,l,h,"F",f,g)}function MD(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function c_(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Go(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Go(t.unaryFilter.field);return Lt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Go(t.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Go(t.unaryFilter.field);return Lt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(Go(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Di.create(t.compositeFilter.filters.map((i=>c_(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(n):be(30097,{filter:n})}function OD(n){return SD[n]}function ND(n){return _D[n]}function VD(n){return AD[n]}function Uo(n){return{fieldPath:n.canonicalString()}}function Go(n){return on.fromServerFormat(n.fieldPath)}function u_(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(g5(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NAN"}};if(m5(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(g5(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NAN"}};if(m5(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(t.field),op:ND(t.op),value:t.value}}})(n):n instanceof Di?(function(t){const i=t.getFilters().map((a=>u_(a)));return i.length===1?i[0]:{compositeFilter:{op:VD(t.op),filters:i}}})(n):be(54877,{filter:n})}function FD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function d_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,t,i,a,l=Re.min(),c=Re.min(),h=ln.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.yt=e}}function BD(n){const e=PD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Up(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.Cn=new UD}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ls.min())}updateCollectionGroup(e,t,i){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class UD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Gt(at.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Gt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h_=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(h_,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ll(0)}static cr(){return new ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="LruGarbageCollector",GD=1048576;function D5([n,e],[t,i]){const a=Be(n,t);return a===0?Be(e,i):a}class $D{constructor(e){this.Ir=e,this.buffer=new Gt(D5),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();D5(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(j5,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pl(t)?me(j5,"Ignoring IndexedDB error during garbage collection: ",t):await gl(t)}await this.Vr(3e5)}))}}class WD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(bf.ce);const i=new $D(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(C5)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C5):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,h,f,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(i=b,h=Date.now(),this.removeTargets(e,i,t)))).next((b=>(l=b,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(g=Date.now(),Bo()<=Le.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(f-h)+`ms
	Removed ${b} documents in `+(g-f)+`ms
Total Duration: ${g-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function qD(n,e){return new WD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.changes=new Ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ue.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&zc(i.mutation,a,Gn.empty(),ut.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const a=Da();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Dc();return l.forEach(((h,f)=>{c=c.insert(h,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Da();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,i,a){let l=Br();const c=Bc(),h=(function(){return Bc()})();return t.forEach(((f,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Ys)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),zc(v.mutation,g,v.mutation.getFieldMask(),ut.now())):c.set(g.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>h.set(g,new YD(v,c.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=Bc();let a=new pt(((c,h)=>c-h)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((f=>{const g=t.get(f);if(g===null)return;let v=i.get(f)||Gn.empty();v=h.applyToLocalView(g,v),i.set(f,v);const b=(a.get(h.batchId)||ze()).add(f);a=a.insert(h.batchId,b)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),g=f.key,v=f.value,b=H2();v.forEach((x=>{if(!l.has(x)){const _=Q2(t.get(x),i.get(x));_!==null&&b.set(x,_),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,b))}return ue.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):B2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ue.resolve(Da());let h=Jc,f=l;return c.next((g=>ue.forEach(g,((v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{f=f.insert(v,x)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,f,g,ze()))).next((v=>({batchId:h,changes:$2(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let a=Dc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Dc();return this.indexManager.getCollectionParents(e,l).next((h=>ue.forEach(h,(f=>{const g=(function(b,x){return new yl(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((b,x)=>{c=c.insert(b,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((f,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,Kt.newInvalidDocument(v)))}));let h=Dc();return c.forEach(((f,g)=>{const v=l.get(f);v!==void 0&&zc(v.mutation,g,Gn.empty(),ut.now()),Af(t,g)&&(h=h.insert(f,g))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:$n(a.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:BD(a.bundledQuery),readTime:$n(a.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.overlays=new pt(ve.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Da();return ue.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),ue.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ue.resolve()}getOverlaysForCollection(e,t,i){const a=Da(),l=t.length+1,c=new ve(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return ue.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new pt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=Da(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=Da(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((g,v)=>h.set(g,v))),!(h.size()>=a)););return ue.resolve(h)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new yD(t,i));let l=this.qr.get(t);l===void 0&&(l=ze(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.Qr=new Gt(qt.$r),this.Ur=new Gt(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new qt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new qt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ve(new at([])),i=new qt(t,e),a=new qt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new at([])),i=new qt(t,e),a=new qt(t,e+1);let l=ze();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new qt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(qt.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new pD(l,t,i,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new qt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?k0:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new qt(t,0),a=new qt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const h=this.Xr(c.Yr);l.push(h)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Gt(Be);return t.forEach((a=>{const l=new qt(a,0),c=new qt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{i=i.add(h.Yr)}))})),ue.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ve.isDocumentKey(l)||(l=l.child(""));const c=new qt(new ve(l),0);let h=new Gt(Be);return this.Zr.forEachWhile((f=>{const g=f.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(h=h.add(f.Yr)),!0)}),c),ue.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){He(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ue.forEach(t.mutations,(a=>{const l=new qt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new qt(t,0),a=this.Zr.firstAfterOrEqual(i);return ue.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.ri=e,this.docs=(function(){return new pt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ue.resolve(i?i.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let i=Br();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Kt.newInvalidDocument(a))})),ue.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Br();const c=t.path,h=new ve(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:g,value:{document:v}}=f.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Dj(jj(v),i)<=0||(a.has(v.key)||Af(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,i,a){be(9500)}ii(e,t){return ue.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new n6(this)}getSize(e){return ue.resolve(this.size)}}class n6 extends KD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.persistence=e,this.si=new Ya((t=>O0(t)),N0),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new U0,this.targetCount=0,this.ai=ll.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ll(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),ue.waitFor(l).next((()=>a))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ue.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ue.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ue.resolve(i)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t){this.ui={},this.overlays={},this.ci=new bf(0),this.li=!1,this.li=!0,this.hi=new JD,this.referenceDelegate=e(this),this.Pi=new i6(this),this.indexManager=new zD,this.remoteDocumentCache=(function(a){return new t6(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new LD(t),this.Ii=new QD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new e6(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const a=new r6(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ue.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class r6 extends Pj{constructor(e){super(),this.currentSequenceNumber=e}}class G0{constructor(e){this.persistence=e,this.Ri=new U0,this.Vi=null}static mi(e){return new G0(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ue.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(i=>{const a=ve.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Yh{constructor(e,t){this.persistence=e,this.pi=new Ya((i=>Nj(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=qD(this,t)}static mi(e,t){return new Yh(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?ue.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((h=>{h||(i++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Th(e.data.value)),t}br(e,t,i){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ue.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=ze(),a=ze();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new $0(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return XI()?8:Mj(hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new s6;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(Bo()<=Le.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Bo()<=Le.DEBUG&&me("QueryEngine","Query:",zo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Bo()<=Le.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):ue.resolve())}ys(e,t){if(x5(t))return ue.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Up(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=ze(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,i).next((f=>{const g=this.Ds(t,h);return this.Cs(t,g,c,f.readTime)?this.ys(e,Up(t,null,"F")):this.vs(e,g,t,f)}))))})))))}ws(e,t,i,a){return x5(t)||a.isEqual(Re.min())?ue.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?ue.resolve(null):(Bo()<=Le.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zo(t)),this.vs(e,c,t,Cj(a,Jc)).next((h=>h)))}))}Ds(e,t){let i=new Gt(U2(e));return t.forEach(((a,l)=>{Af(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return Bo()<=Le.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ls.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="LocalStore",o6=3e8;class l6{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new pt(Be),this.xs=new Ya((l=>O0(l)),N0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function c6(n,e,t,i){return new l6(n,e,t,i)}async function m_(n,e){const t=je(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],h=[];let f=ze();for(const g of a){c.push(g.batchId);for(const v of g.mutations)f=f.add(v.key)}for(const g of l){h.push(g.batchId);for(const v of g.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(i,f).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:h})))}))}))}function u6(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,g,v){const b=g.batch,x=b.keys();let _=ue.resolve();return x.forEach((w=>{_=_.next((()=>v.getEntry(f,w))).next((E=>{const P=g.docVersions.get(w);He(P!==null,48541),E.version.compareTo(P)<0&&(b.applyToRemoteDocument(E,g),E.isValidDocument()&&(E.setReadTime(g.commitVersion),v.addEntry(E)))}))})),_.next((()=>h.mutationQueue.removeMutationBatch(f,b)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let f=ze();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(f=f.add(h.batch.mutations[g].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function g_(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function d6(n,e){const t=je(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,b)=>{const x=a.get(b);if(!x)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,b))));let _=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?_=_.withResumeToken(ln.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(v.resumeToken,i)),a=a.insert(b,_),(function(E,P,N){return E.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=o6?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(x,_,v)&&h.push(t.Pi.updateTargetData(l,_))}));let f=Br(),g=ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(h6(l,c,e.documentUpdates).next((v=>{f=v.ks,g=v.qs}))),!i.isEqual(Re.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(v)}return ue.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,g))).next((()=>f))})).then((l=>(t.Ms=a,l)))}function h6(n,e,t){let i=ze(),a=ze();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Br();return t.forEach(((h,f)=>{const g=l.get(h);f.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),f.isNoDocument()&&f.version.isEqual(Re.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):me(H0,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",f.version)})),{ks:c,qs:a}}))}function f6(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=k0),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function m6(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,ue.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new Ps(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Wp(n,e,t){const i=je(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!pl(c))throw c;me(H0,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function k5(n,e,t){const i=je(n);let a=Re.min(),l=ze();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,g,v){const b=je(f),x=b.xs.get(v);return x!==void 0?ue.resolve(b.Ms.get(x)):b.Pi.getTargetData(g,v)})(i,c,sr(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,h.targetId).next((f=>{l=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Re.min(),t?l:ze()))).next((h=>(g6(i,tD(e),h),{documents:h,Qs:l})))))}function g6(n,e,t){let i=n.Os.get(e)||Re.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class P5{constructor(){this.activeTargetIds=oD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class p6{constructor(){this.Mo=new P5,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new P5,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5="ConnectivityMonitor";class O5{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(M5,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(M5,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=null;function qp(){return uh===null?uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():uh++,"0x"+uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",v6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class x6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Uh?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=qp(),h=this.zo(e,t.toUriEncodedString());me(tp,`Sending RPC '${e}' ${c}:`,h,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,a,l);const{host:g}=new URL(h),v=qa(g);return this.Jo(e,h,f,i,v).then((b=>(me(tp,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw il(tp,`RPC '${e}' ${c} failed with error: `,b,"url: ",h,"request:",i),b}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ml})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=v6[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class T6 extends x6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=qp();return new Promise(((h,f)=>{const g=new g2;g.setWithCredentials(!0),g.listenOnce(p2.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case bh.NO_ERROR:const b=g.getResponseJson();me(cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),h(b);break;case bh.TIMEOUT:me(cn,`RPC '${e}' ${c} timed out`),f(new he(se.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const x=g.getStatus();if(me(cn,`RPC '${e}' ${c} failed with status:`,x,"response text:",g.getResponseText()),x>0){let _=g.getResponseJson();Array.isArray(_)&&(_=_[0]);const w=_?.error;if(w&&w.status&&w.message){const E=(function(N){const V=N.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(V)>=0?V:se.UNKNOWN})(w.status);f(new he(E,w.message))}else f(new he(se.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new he(se.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(cn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);me(cn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=qp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=x2(),h=v2(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=l.join("");me(cn,`Creating RPC '${e}' stream ${a}: ${v}`,f);const b=c.createWebChannel(v,f);this.I_(b);let x=!1,_=!1;const w=new b6({Yo:P=>{_?me(cn,`Not sending because RPC '${e}' stream ${a} is closed:`,P):(x||(me(cn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),x=!0),me(cn,`RPC '${e}' stream ${a} sending:`,P),b.send(P))},Zo:()=>b.close()}),E=(P,N,V)=>{P.listen(N,(L=>{try{V(L)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return E(b,jc.EventType.OPEN,(()=>{_||(me(cn,`RPC '${e}' stream ${a} transport opened.`),w.o_())})),E(b,jc.EventType.CLOSE,(()=>{_||(_=!0,me(cn,`RPC '${e}' stream ${a} transport closed`),w.a_(),this.E_(b))})),E(b,jc.EventType.ERROR,(P=>{_||(_=!0,il(cn,`RPC '${e}' stream ${a} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new he(se.UNAVAILABLE,"The operation could not be completed")))})),E(b,jc.EventType.MESSAGE,(P=>{if(!_){const N=P.data[0];He(!!N,16349);const V=N,L=V?.error||V[0]?.error;if(L){me(cn,`RPC '${e}' stream ${a} received error:`,L);const ne=L.status;let W=(function(I){const C=Vt[I];if(C!==void 0)return t_(C)})(ne),q=L.message;W===void 0&&(W=se.INTERNAL,q="Unknown error status: "+ne+" with message "+L.message),_=!0,w.a_(new he(W,q)),b.close()}else me(cn,`RPC '${e}' stream ${a} received:`,N),w.u_(N)}})),E(h,y2.STAT_EVENT,(P=>{P.stat===Op.PROXY?me(cn,`RPC '${e}' stream ${a} detected buffering proxy`):P.stat===Op.NOPROXY&&me(cn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(n){return new wD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5="PersistentStream";class p_{constructor(e,t,i,a,l,c,h,f){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new he(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(N5,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(N5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class S6 extends p_{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CD(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?$n(c.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Hp(this.serializer),t.addTarget=(function(l,c){let h;const f=c.target;if(h=Bp(f)?{documents:DD(l,f)}:{query:kD(l,f).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=r_(l,c.resumeToken);const g=Gp(l,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(Re.min())>0){h.readTime=qh(l,c.snapshotVersion.toTimestamp());const g=Gp(l,c.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const i=MD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Hp(this.serializer),t.removeTarget=e,this.q_(t)}}class _6 extends p_{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=jD(e.writeResults,e.commitTime),i=$n(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Hp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>l_(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{}class w6 extends A6{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new he(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,$p(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(se.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,$p(t,i),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(se.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class E6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lr(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="RemoteStore";class R6{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Xa(this)&&(me(za,"Restarting streams for network reachability change."),await(async function(f){const g=je(f);g.Ea.add(4),await xu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Cf(g)})(this))}))})),this.Ra=new E6(i,a)}}async function Cf(n){if(Xa(n))for(const e of n.da)await e(!0)}async function xu(n){for(const e of n.da)await e(!1)}function y_(n,e){const t=je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),X0(t)?Y0(t):vl(t).O_()&&K0(t,e))}function q0(n,e){const t=je(n),i=vl(t);t.Ia.delete(e),i.O_()&&v_(t,e),t.Ia.size===0&&(i.O_()?i.L_():Xa(t)&&t.Ra.set("Unknown"))}function K0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vl(n).Y_(e)}function v_(n,e){n.Va.Ue(e),vl(n).Z_(e)}function Y0(n){n.Va=new TD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),vl(n).start(),n.Ra.ua()}function X0(n){return Xa(n)&&!vl(n).x_()&&n.Ia.size>0}function Xa(n){return je(n).Ea.size===0}function x_(n){n.Va=void 0}async function I6(n){n.Ra.set("Online")}async function C6(n){n.Ia.forEach(((e,t)=>{K0(n,e)}))}async function j6(n,e){x_(n),X0(n)?(n.Ra.ha(e),Y0(n)):n.Ra.set("Unknown")}async function D6(n,e,t){if(n.Ra.set("Online"),e instanceof i_&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(i){me(za,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xh(n,i)}else if(e instanceof Ah?n.Va.Ze(e):e instanceof n_?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const i=await g_(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(f.resumeToken,c))}})),h.targetMismatches.forEach(((f,g)=>{const v=l.Ia.get(f);if(!v)return;l.Ia.set(f,v.withResumeToken(ln.EMPTY_BYTE_STRING,v.snapshotVersion)),v_(l,f);const b=new Ps(v.target,f,g,v.sequenceNumber);K0(l,b)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){me(za,"Failed to raise snapshot:",i),await Xh(n,i)}}async function Xh(n,e,t){if(!pl(e))throw e;n.Ea.add(1),await xu(n),n.Ra.set("Offline"),t||(t=()=>g_(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(za,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cf(n)}))}function b_(n,e){return e().catch((t=>Xh(n,t,e)))}async function jf(n){const e=je(n),t=Gs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:k0;for(;k6(e);)try{const a=await f6(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,P6(e,a)}catch(a){await Xh(e,a)}T_(e)&&S_(e)}function k6(n){return Xa(n)&&n.Ta.length<10}function P6(n,e){n.Ta.push(e);const t=Gs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function T_(n){return Xa(n)&&!Gs(n).x_()&&n.Ta.length>0}function S_(n){Gs(n).start()}async function M6(n){Gs(n).ra()}async function O6(n){const e=Gs(n);for(const t of n.Ta)e.ea(t.mutations)}async function N6(n,e,t){const i=n.Ta.shift(),a=L0.from(i,e,t);await b_(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await jf(n)}async function V6(n,e){e&&Gs(n).X_&&await(async function(i,a){if((function(c){return e_(c)&&c!==se.ABORTED})(a.code)){const l=i.Ta.shift();Gs(i).B_(),await b_(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await jf(i)}})(n,e),T_(n)&&S_(n)}async function V5(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),me(za,"RemoteStore received new credentials");const i=Xa(t);t.Ea.add(3),await xu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cf(t)}async function F6(n,e){const t=je(n);e?(t.Ea.delete(2),await Cf(t)):e||(t.Ea.add(2),await xu(t),t.Ra.set("Unknown"))}function vl(n){return n.ma||(n.ma=(function(t,i,a){const l=je(t);return l.sa(),new S6(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:I6.bind(null,n),t_:C6.bind(null,n),r_:j6.bind(null,n),H_:D6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),X0(n)?Y0(n):n.Ra.set("Unknown")):(await n.ma.stop(),x_(n))}))),n.ma}function Gs(n){return n.fa||(n.fa=(function(t,i,a){const l=je(t);return l.sa(),new _6(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:M6.bind(null,n),r_:V6.bind(null,n),ta:O6.bind(null,n),na:N6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await jf(n)):(await n.fa.stop(),n.Ta.length>0&&(me(za,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,h=new Q0(e,t,c,a,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Z0(n,e){if(Lr("AsyncQueue",`${e}: ${n}`),pl(n))return new he(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=Dc(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.ga=new pt(ve.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class cl{constructor(e,t,i,a,l,c,h,f,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new cl(e,t,Qo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class B6{constructor(){this.queries=L5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=je(t),l=a.queries;a.queries=L5(),l.forEach(((c,h)=>{for(const f of h.Sa)f.onError(i)}))})(this,new he(se.ABORTED,"Firestore shutting down"))}}function L5(){return new Ya((n=>z2(n)),_f)}async function J0(n,e){const t=je(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new L6,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=Z0(c,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ty(t)}async function ey(n,e){const t=je(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function z6(n,e){const t=je(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(a)&&(i=!0);c.wa=a}}i&&ty(t)}function U6(n,e,t){const i=je(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function ty(n){n.Ca.forEach((e=>{e.next()}))}var Kp,B5;(B5=Kp||(Kp={})).Ma="default",B5.Cache="cache";class ny{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new cl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.key=e}}class A_{constructor(e){this.key=e}}class G6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=U2(e),this.tu=new Qo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new F5,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const x=a.get(v),_=Af(this.query,b)?b:null,w=!!x&&this.mutatedKeys.has(x.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;x&&_?x.data.isEqual(_.data)?w!==E&&(i.track({type:3,doc:_}),P=!0):this.su(x,_)||(i.track({type:2,doc:_}),P=!0,(f&&this.eu(_,f)>0||g&&this.eu(_,g)<0)&&(h=!0)):!x&&_?(i.track({type:0,doc:_}),P=!0):x&&!_&&(i.track({type:1,doc:x}),P=!0,(f||g)&&(h=!0)),P&&(_?(c=c.add(_),l=E?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,b)=>(function(_,w){const E=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:P})}};return E(_)-E(w)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(i),a=a??!1;const h=t&&!a?this._u():[],f=this.Xa.size===0&&this.current&&!a?1:0,g=f!==this.Za;return this.Za=f,c.length!==0||g?{snapshot:new cl(this.query,e.tu,l,c,e.mutatedKeys,f===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F5,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new A_(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new __(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iy="SyncEngine";class $6{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class H6{constructor(e){this.key=e,this.hu=!1}}class W6{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ya((h=>z2(h)),_f),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ve.comparator),this.Au=new Map,this.Ru=new U0,this.Vu={},this.mu=new Map,this.fu=ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function q6(n,e,t=!0){const i=j_(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await w_(i,e,t,!0),a}async function K6(n,e){const t=j_(n);await w_(t,e,!0,!1)}async function w_(n,e,t,i){const a=await m6(n.localStore,sr(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await Y6(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&y_(n.remoteStore,a),h}async function Y6(n,e,t,i,a){n.pu=(b,x,_)=>(async function(E,P,N,V){let L=P.view.ru(N);L.Cs&&(L=await k5(E.localStore,P.query,!1).then((({documents:D})=>P.view.ru(D,L))));const ne=V&&V.targetChanges.get(P.targetId),W=V&&V.targetMismatches.get(P.targetId)!=null,q=P.view.applyChanges(L,E.isPrimaryClient,ne,W);return U5(E,P.targetId,q.au),q.snapshot})(n,b,x,_);const l=await k5(n.localStore,e,!0),c=new G6(e,l.Qs),h=c.ru(l.documents),f=vu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=c.applyChanges(h,n.isPrimaryClient,f);U5(n,t,g.au);const v=new $6(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function X6(n,e,t){const i=je(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!_f(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Wp(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&q0(i.remoteStore,a.targetId),Yp(i,a.targetId)})).catch(gl)):(Yp(i,a.targetId),await Wp(i.localStore,a.targetId,!0))}async function Q6(n,e){const t=je(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),q0(t.remoteStore,i.targetId))}async function Z6(n,e,t){const i=sk(n);try{const a=await(function(c,h){const f=je(c),g=ut.now(),v=h.reduce(((_,w)=>_.add(w.key)),ze());let b,x;return f.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let w=Br(),E=ze();return f.Ns.getEntries(_,v).next((P=>{w=P,w.forEach(((N,V)=>{V.isValidDocument()||(E=E.add(N))}))})).next((()=>f.localDocuments.getOverlayedDocuments(_,w))).next((P=>{b=P;const N=[];for(const V of h){const L=gD(V,b.get(V.key).overlayedDocument);L!=null&&N.push(new Ys(V.key,L,P2(L.value.mapValue),jn.exists(!0)))}return f.mutationQueue.addMutationBatch(_,g,N,h)})).next((P=>{x=P;const N=P.applyToLocalDocumentSet(b,E);return f.documentOverlayCache.saveOverlays(_,P.batchId,N)}))})).then((()=>({batchId:x.batchId,changes:$2(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,h,f){let g=c.Vu[c.currentUser.toKey()];g||(g=new pt(Be)),g=g.insert(h,f),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await bu(i,a.changes),await jf(i.remoteStore)}catch(a){const l=Z0(a,"Failed to persist write");t.reject(l)}}async function E_(n,e){const t=je(n);try{const i=await d6(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(He(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?He(c.hu,14607):a.removedDocuments.size>0&&(He(c.hu,42227),c.hu=!1))})),await bu(t,i,e)}catch(i){await gl(i)}}function z5(n,e,t){const i=je(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const f=je(c);f.onlineState=h;let g=!1;f.queries.forEach(((v,b)=>{for(const x of b.Sa)x.va(h)&&(g=!0)})),g&&ty(f)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function J6(n,e,t){const i=je(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new pt(ve.comparator);c=c.insert(l,Kt.newNoDocument(l,Re.min()));const h=ze().add(l),f=new Rf(Re.min(),new Map,new pt(Be),c,h);await E_(i,f),i.du=i.du.remove(l),i.Au.delete(e),ry(i)}else await Wp(i.localStore,e,!1).then((()=>Yp(i,e,t))).catch(gl)}async function ek(n,e){const t=je(n),i=e.batch.batchId;try{const a=await u6(t.localStore,e);I_(t,i,null),R_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await bu(t,a)}catch(a){await gl(a)}}async function tk(n,e,t){const i=je(n);try{const a=await(function(c,h){const f=je(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return f.mutationQueue.lookupMutationBatch(g,h).next((b=>(He(b!==null,37113),v=b.keys(),f.mutationQueue.removeMutationBatch(g,b)))).next((()=>f.mutationQueue.performConsistencyCheck(g))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(g,v,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>f.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);I_(i,e,t),R_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await bu(i,a)}catch(a){await gl(a)}}function R_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function I_(n,e,t){const i=je(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function Yp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||C_(n,i)}))}function C_(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(q0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ry(n))}function U5(n,e,t){for(const i of t)i instanceof __?(n.Ru.addReference(i.key,e),nk(n,i)):i instanceof A_?(me(iy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||C_(n,i.key)):be(19791,{wu:i})}function nk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(me(iy,"New document in limbo: "+t),n.Eu.add(i),ry(n))}function ry(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(at.fromString(e)),i=n.fu.next();n.Au.set(i,new H6(t)),n.du=n.du.insert(t,i),y_(n.remoteStore,new Ps(sr(Sf(t.path)),i,"TargetPurposeLimboResolution",bf.ce))}}async function bu(n,e,t){const i=je(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,f)=>{c.push(i.pu(f,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(g){a.push(g);const v=$0.As(f.targetId,g);l.push(v)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(f,g){const v=je(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ue.forEach(g,(x=>ue.forEach(x.Es,(_=>v.persistence.referenceDelegate.addReference(b,x.targetId,_))).next((()=>ue.forEach(x.ds,(_=>v.persistence.referenceDelegate.removeReference(b,x.targetId,_)))))))))}catch(b){if(!pl(b))throw b;me(H0,"Failed to update sequence numbers: "+b)}for(const b of g){const x=b.targetId;if(!b.fromCache){const _=v.Ms.get(x),w=_.snapshotVersion,E=_.withLastLimboFreeSnapshotVersion(w);v.Ms=v.Ms.insert(x,E)}}})(i.localStore,l))}async function ik(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){me(iy,"User change. New user:",e.toKey());const i=await m_(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((f=>{f.reject(new he(se.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bu(t,i.Ls)}}function rk(n,e){const t=je(n),i=t.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let a=ze();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const h=t.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function j_(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=E_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J6.bind(null,e),e.Pu.H_=z6.bind(null,e.eventManager),e.Pu.yu=U6.bind(null,e.eventManager),e}function sk(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tk.bind(null,e),e}class Qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=If(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return c6(this.persistence,new a6,e.initialUser,this.serializer)}Cu(e){return new f_(G0.mi,this.serializer)}Du(e){return new p6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qh.provider={build:()=>new Qh};class ak extends Qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof Yh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new HD(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new f_((i=>Yh.mi(i,t)),this.serializer)}}class Xp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>z5(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ik.bind(null,this.syncEngine),await F6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new B6})()}createDatastore(e){const t=If(e.databaseInfo.databaseId),i=(function(l){return new T6(l)})(e.databaseInfo);return(function(l,c,h,f){return new w6(l,c,h,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,h){return new R6(i,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>z5(this.syncEngine,t,0)),(function(){return O5.v()?new O5:new y6})())}createSyncEngine(e,t){return(function(a,l,c,h,f,g,v){const b=new W6(a,l,c,h,f,g);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=je(t);me(za,"RemoteStore shutting down."),i.Ea.add(5),await xu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xp.provider={build:()=>new Xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const c=je(a),h={documents:l.map((b=>Kh(c.serializer,b)))},f=await c.Ho("BatchGetDocuments",c.serializer.databaseId,at.emptyPath(),h,l.length),g=new Map;f.forEach((b=>{const x=ID(c.serializer,b);g.set(x.key.toString(),x)}));const v=[];return l.forEach((b=>{const x=g.get(b.toString());He(!!x,55234,{key:b}),v.push(x)})),v})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new F0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const a=ve.fromPath(i);this.mutations.push(new J2(a,this.precondition(a)))})),await(async function(i,a){const l=je(i),c={writes:a.map((h=>l_(l.serializer,h)))};await l.Go("Commit",l.serializer.databaseId,at.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw be(50498,{Gu:e.constructor.name});t=Re.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new he(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Re.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Re.min()))throw new he(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.zu=i.maxAttempts,this.M_=new W0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new ok(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((a=>{this.Yu(a)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!pu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!e_(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="FirestoreClient";class ck{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=D0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{me($s,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(me($s,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Z0(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ip(n,e){n.asyncQueue.verifyOperationInProgress(),me($s,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await m_(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function G5(n,e){n.asyncQueue.verifyOperationInProgress();const t=await uk(n);me($s,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>V5(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>V5(e.remoteStore,a))),n._onlineComponents=e}async function uk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me($s,"Using user provided OfflineComponentProvider");try{await ip(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;il("Error using user provided cache. Falling back to memory cache: "+t),await ip(n,new Qh)}}else me($s,"Using default OfflineComponentProvider"),await ip(n,new ak(void 0));return n._offlineComponents}async function ay(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me($s,"Using user provided OnlineComponentProvider"),await G5(n,n._uninitializedComponentsProvider._online)):(me($s,"Using default OnlineComponentProvider"),await G5(n,new Xp))),n._onlineComponents}function dk(n){return ay(n).then((e=>e.syncEngine))}function hk(n){return ay(n).then((e=>e.datastore))}async function Zh(n){const e=await ay(n),t=e.eventManager;return t.onListen=q6.bind(null,e.syncEngine),t.onUnlisten=X6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=K6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Q6.bind(null,e.syncEngine),t}function fk(n,e,t={}){const i=new rr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,f,g){const v=new sy({next:x=>{v.Nu(),c.enqueueAndForget((()=>ey(l,b)));const _=x.docs.has(h);!_&&x.fromCache?g.reject(new he(se.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&x.fromCache&&f&&f.source==="server"?g.reject(new he(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),b=new ny(Sf(h.path),v,{includeMetadataChanges:!0,qa:!0});return J0(l,b)})(await Zh(n),n.asyncQueue,e,t,i))),i.promise}function mk(n,e,t={}){const i=new rr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,f,g){const v=new sy({next:x=>{v.Nu(),c.enqueueAndForget((()=>ey(l,b))),x.fromCache&&f.source==="server"?g.reject(new he(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),b=new ny(h,v,{includeMetadataChanges:!0,qa:!0});return J0(l,b)})(await Zh(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="firestore.googleapis.com",H5=!0;class W5{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k_,this.ssl=H5}else this.host=e.host,this.ssl=e.ssl??H5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GD)throw new he(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ij("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new vj;switch(i.type){case"firstParty":return new Sj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=$5.get(t);i&&(me("ComponentProvider","Removing Datastore"),$5.delete(t),i.terminate())})(this),Promise.resolve()}}function gk(n,e,t,i={}){n=Ii(n,Df);const a=qa(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(R0(`https://${h}`),I0("Firestore",!0)),l.host!==k_&&l.host!==h&&il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:h,ssl:a,emulatorOptions:i};if(!Vr(f,c)&&(n._setSettings(f),i.mockUserToken)){let g,v;if(typeof i.mockUserToken=="string")g=i.mockUserToken,v=un.MOCK_USER;else{g=UI(i.mockUserToken,n._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new he(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new un(b)}n._authCredentials=new xj(new T2(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class Tt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}toJSON(){return{type:Tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(gu(t,Tt._jsonSchema))return new Tt(e,i||null,new ve(at.fromString(t.referencePath)))}}Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:Bt("string",Tt._jsonSchemaVersion),referencePath:Bt("string")};class Vs extends Xs{constructor(e,t,i){super(e,t,Sf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ve(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function Gc(n,e,...t){if(n=gt(n),S2("collection","path",e),n instanceof Df){const i=at.fromString(e,...t);return s5(i),new Vs(n,null,i)}{if(!(n instanceof Tt||n instanceof Vs))throw new he(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(at.fromString(e,...t));return s5(i),new Vs(n.firestore,null,i)}}function Qp(n,e,...t){if(n=gt(n),arguments.length===1&&(e=D0.newId()),S2("doc","path",e),n instanceof Df){const i=at.fromString(e,...t);return r5(i),new Tt(n,null,new ve(i))}{if(!(n instanceof Tt||n instanceof Vs))throw new he(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(at.fromString(e,...t));return r5(i),new Tt(n.firestore,n instanceof Vs?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="AsyncQueue";class K5{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W0(this,"async_queue_retry"),this._c=()=>{const i=np();i&&me(q5,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=np();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=np();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new rr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!pl(e))throw e;me(q5,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Lr("INTERNAL UNHANDLED ERROR: ",Y5(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Q0.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&be(47125,{Pc:Y5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Y5(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Ua extends Df{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new K5,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K5(e),this._firestoreClient=void 0,await e}}}function pk(n,e){const t=typeof n=="object"?n:vf(),i=typeof n=="string"?n:Uh,a=qs(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=n2("firestore");l&&gk(a,...l)}return a}function Tu(n){if(n._terminated)throw new he(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yk(n),n._firestoreClient}function yk(n){const e=n._freezeSettings(),t=(function(a,l,c,h){return new Lj(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,D_(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ck(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(ln.fromBase64String(e))}catch(t){throw new he(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Un(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:Bt("string",Un._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ar._jsonSchemaVersion}}static fromJSON(e){if(gu(e,ar._jsonSchema))return new ar(e.latitude,e.longitude)}}ar._jsonSchemaVersion="firestore/geoPoint/1.0",ar._jsonSchema={type:Bt("string",ar._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new or(e.vectorValues);throw new he(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:Bt("string",or._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=/^__.*__$/;class xk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new yu(e,this.data,t,this.fieldTransforms)}}class P_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function M_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:n})}}class Pf{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(M_(this.Ac)&&vk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||If(e)}Cc(e,t,i,a=!1){return new Pf({Ac:e,methodName:t,Dc:i,path:on.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oy(n){const e=n._freezeSettings(),t=If(n._databaseId);return new bk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Tk(n,e,t,i,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);cy("Data must be an object, but it was:",c,i);const h=V_(i,c);let f,g;if(l.merge)f=new Gn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const x=Zp(e,b,t);if(!c.contains(x))throw new he(se.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);L_(v,x)||v.push(x)}f=new Gn(v),g=c.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,g=c.fieldTransforms;return new xk(new yn(h),f,g)}class Mf extends kf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mf}}function Sk(n,e,t){return new Pf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ly extends kf{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Sk(this,e,!0),i=this.vc.map((l=>xl(l,t))),a=new ol(i);return new dD(e.path,a)}isEqual(e){return e instanceof ly&&Vr(this.vc,e.vc)}}function O_(n,e,t,i){const a=n.Cc(1,e,t);cy("Data must be an object, but it was:",a,i);const l=[],c=yn.empty();Ks(i,((f,g)=>{const v=uy(e,f,t);g=gt(g);const b=a.yc(v);if(g instanceof Mf)l.push(v);else{const x=xl(g,b);x!=null&&(l.push(v),c.set(v,x))}}));const h=new Gn(l);return new P_(c,h,a.fieldTransforms)}function N_(n,e,t,i,a,l){const c=n.Cc(1,e,t),h=[Zp(e,i,t)],f=[a];if(l.length%2!=0)throw new he(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)h.push(Zp(e,l[x])),f.push(l[x+1]);const g=[],v=yn.empty();for(let x=h.length-1;x>=0;--x)if(!L_(g,h[x])){const _=h[x];let w=f[x];w=gt(w);const E=c.yc(_);if(w instanceof Mf)g.push(_);else{const P=xl(w,E);P!=null&&(g.push(_),v.set(_,P))}}const b=new Gn(g);return new P_(v,b,c.fieldTransforms)}function _k(n,e,t,i=!1){return xl(t,n.Cc(i?4:3,e))}function xl(n,e){if(F_(n=gt(n)))return cy("Unsupported field value:",e,n),V_(n,e);if(n instanceof kf)return(function(i,a){if(!M_(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const h of i){let f=xl(h,a.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return lD(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ut.fromDate(i);return{timestampValue:qh(a.serializer,l)}}if(i instanceof ut){const l=new ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:qh(a.serializer,l)}}if(i instanceof ar)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Un)return{bytesValue:r_(a.serializer,i._byteString)};if(i instanceof Tt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:z0(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof or)return(function(c,h){return{mapValue:{fields:{[D2]:{stringValue:k2},[Gh]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return V0(h.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${xf(i)}`)})(n,e)}function V_(n,e){const t={};return w2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(n,((i,a)=>{const l=xl(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function F_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof ar||n instanceof Un||n instanceof Tt||n instanceof kf||n instanceof or)}function cy(n,e,t){if(!F_(t)||!_2(t)){const i=xf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Zp(n,e,t){if((e=gt(e))instanceof Su)return e._internalPath;if(typeof e=="string")return uy(n,e);throw Jh("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ak=new RegExp("[~\\*/\\[\\]]");function uy(n,e,t){if(e.search(Ak)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Su(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jh(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${i}`),c&&(f+=` in document ${a}`),f+=")"),new he(se.INVALID_ARGUMENT,h+n+f)}function L_(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Of("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wk extends ef{data(){return super.data()}}function Of(n,e){return typeof e=="string"?uy(n,e):e instanceof Su?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class z_ extends dy{}function wh(n,e,...t){let i=[];e instanceof dy&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((f=>f instanceof hy)).length,h=l.filter((f=>f instanceof Nf)).length;if(c>1||c>0&&h>0)throw new he(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class Nf extends z_{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Nf(e,t,i)}_apply(e){const t=this._parse(e);return U_(e._query,t),new Xs(e.firestore,e.converter,zp(e._query,t))}_parse(e){const t=oy(e.firestore);return(function(l,c,h,f,g,v,b){let x;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Z5(b,v);const w=[];for(const E of b)w.push(Q5(f,l,E));x={arrayValue:{values:w}}}else x=Q5(f,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Z5(b,v),x=_k(h,c,b,v==="in"||v==="not-in");return Lt.create(g,v,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Eh(n,e,t){const i=e,a=Of("where",n);return Nf._create(a,i,t)}class hy extends dy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const f of h)U_(c,f),c=zp(c,f)})(e._query,t),new Xs(e.firestore,e.converter,zp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fy extends z_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fy(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new he(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iu(l,c)})(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new yl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Rh(n,e="asc"){const t=e,i=Of("orderBy",n);return fy._create(i,t)}function Q5(n,e,t){if(typeof(t=gt(t))=="string"){if(t==="")throw new he(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B2(e)&&t.indexOf("/")!==-1)throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(at.fromString(t));if(!ve.isDocumentKey(i))throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return f5(n,new ve(i))}if(t instanceof Tt)return f5(n,t._key);throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(t)}.`)}function Z5(n,e){if(!Array.isArray(n)||n.length===0)throw new he(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U_(n,e){const t=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class G_{convertValue(e,t="none"){switch(Us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ks(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Gh].arrayValue?.values?.map((i=>Rt(i.doubleValue)));return new or(t)}convertGeoPoint(e){return new ar(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Tf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(eu(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=at.fromString(e);He(d_(i),9688,{name:e});const a=new tu(i.get(1),i.get(3)),l=new ve(i.popFirst(5));return a.isEqual(t)||Lr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Rk extends G_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}class $o{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fs extends ef{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Of("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Fs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fs._jsonSchema={type:Bt("string",Fs._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Ih extends Fs{data(e={}){return super.data(e)}}class Oa{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new $o(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ih(this._firestore,this._userDataWriter,i.key,i,new $o(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const f=new Ih(a._firestore,a._userDataWriter,h.doc.key,h.doc,new $o(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const f=new Ih(a._firestore,a._userDataWriter,h.doc.key,h.doc,new $o(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:Ik(h.type),doc:f,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=D0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ik(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(n){n=Ii(n,Tt);const e=Ii(n.firestore,Ua);return fk(Tu(e),n._key).then((t=>H_(e,n,t)))}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:Bt("string",Oa._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Vf extends G_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}function rp(n){n=Ii(n,Xs);const e=Ii(n.firestore,Ua),t=Tu(e),i=new Vf(e);return B_(n._query),mk(t,n._query).then((a=>new Oa(e,i,n,a)))}function jk(n,e,t,...i){n=Ii(n,Tt);const a=Ii(n.firestore,Ua),l=oy(a);let c;return c=typeof(e=gt(e))=="string"||e instanceof Su?N_(l,"updateDoc",n._key,e,t,i):O_(l,"updateDoc",n._key,e),Dk(a,[c.toMutation(n._key,jn.exists(!0))])}function $_(n,...e){n=gt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||X5(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(X5(e[i])){const f=e[i];e[i]=f.next?.bind(f),e[i+1]=f.error?.bind(f),e[i+2]=f.complete?.bind(f)}let l,c,h;if(n instanceof Tt)c=Ii(n.firestore,Ua),h=Sf(n._key.path),l={next:f=>{e[i]&&e[i](H_(c,n,f))},error:e[i+1],complete:e[i+2]};else{const f=Ii(n,Xs);c=Ii(f.firestore,Ua),h=f._query;const g=new Vf(c);l={next:v=>{e[i]&&e[i](new Oa(c,g,f,v))},error:e[i+1],complete:e[i+2]},B_(n._query)}return(function(g,v,b,x){const _=new sy(x),w=new ny(v,_,b);return g.asyncQueue.enqueueAndForget((async()=>J0(await Zh(g),w))),()=>{_.Nu(),g.asyncQueue.enqueueAndForget((async()=>ey(await Zh(g),w)))}})(Tu(c),h,a,l)}function Dk(n,e){return(function(i,a){const l=new rr;return i.asyncQueue.enqueueAndForget((async()=>Z6(await dk(i),a,l))),l.promise})(Tu(n),e)}function H_(n,e,t){const i=t.docs.get(e._key),a=new Vf(n);return new Fs(n,a,e._key,i,new $o(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk={maxAttempts:5};function Pc(n,e){if((n=gt(n)).firestore!==e)throw new he(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=oy(e)}get(e){const t=Pc(e,this._firestore),i=new Rk(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return be(24041);const l=a[0];if(l.isFoundDocument())return new ef(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new ef(this._firestore,i,t._key,null,t.converter);throw be(18433,{doc:l})}))}set(e,t,i){const a=Pc(e,this._firestore),l=Ek(a.converter,t,i),c=Tk(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(e,t,i,...a){const l=Pc(e,this._firestore);let c;return c=typeof(t=gt(t))=="string"||t instanceof Su?N_(this._dataReader,"Transaction.update",l._key,t,i,a):O_(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Pc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk extends Pk{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pc(e,this._firestore),i=new Vf(this._firestore);return super.get(e).then((a=>new Fs(this._firestore,i,t._key,a._document,new $o(!1,!1),t.converter)))}}function Ok(n,e,t){n=Ii(n,Ua);const i={...kk,...t};return(function(l){if(l.maxAttempts<1)throw new he(se.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(l,c,h){const f=new rr;return l.asyncQueue.enqueueAndForget((async()=>{const g=await hk(l);new lk(l.asyncQueue,g,h,c,f).ju()})),f.promise})(Tu(n),(a=>e(new Mk(n,a))),i)}function Nk(...n){return new ly("arrayUnion",n)}(function(e,t=!0){(function(a){ml=a})(fl),ji(new di("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new Ua(new bj(i.getProvider("auth-internal")),new _j(c,i.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(g.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),kn(e5,t5,e),kn(e5,t5,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ei(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="us-central1";class Fk{constructor(e,t,i,a,l=Jp,c=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new Vk(e,t,i,a),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Jp}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Lk(n,e,t){const i=qa(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(R0(n.emulatorOrigin+"/backends"),I0("Functions",!0))}const J5="@firebase/functions",eT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="auth-internal",zk="app-check-internal",Uk="messaging-internal";function Gk(n){const e=(t,{instanceIdentifier:i})=>{const a=t.getProvider("app").getImmediate(),l=t.getProvider(Bk),c=t.getProvider(Uk),h=t.getProvider(zk);return new Fk(a,l,c,h,i)};ji(new di(W_,e,"PUBLIC").setMultipleInstances(!0)),kn(J5,eT,n),kn(J5,eT,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(n=vf(),e=Jp){const i=qs(gt(n),W_).getImmediate({identifier:e}),a=n2("functions");return a&&Hk(i,...a),i}function Hk(n,e,t){Lk(gt(n),e,t)}Gk();function q_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wk=q_,K_=new Ka("auth","Firebase",q_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new yf("@firebase/auth");function qk(n,...e){tf.logLevel<=Le.WARN&&tf.warn(`Auth (${fl}): ${n}`,...e)}function Ch(n,...e){tf.logLevel<=Le.ERROR&&tf.error(`Auth (${fl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(n,...e){throw my(n,...e)}function lr(n,...e){return my(n,...e)}function Y_(n,e,t){const i={...Wk(),[e]:t};return new Ka("auth","Firebase",i).create(e,{appName:n.name})}function Na(n){return Y_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function my(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return K_.create(n,...e)}function Ce(n,e,...t){if(!n)throw my(e,...t)}function Or(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ch(e),new Error(e)}function Ur(n,e){n||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(){return typeof self<"u"&&self.location?.href||""}function Kk(){return tT()==="http:"||tT()==="https:"}function tT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Kk()||s2()||"connection"in navigator)?navigator.onLine:!0}function Xk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=HI()||KI()}get(){return Yk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(n,e){Ur(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jk=new _u(3e4,6e4);function py(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function bl(n,e,t,i,a={}){return Q_(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=mu({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:f,...l};return qI()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&qa(n.emulatorConfig.host)&&(g.credentials="include"),X_.fetch()(await Z_(n,n.config.apiHost,t,h),g)})}async function Q_(n,e,t){n._canInitEmulator=!1;const i={...Qk,...e};try{const a=new t3(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw dh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[f,g]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw dh(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw dh(n,"user-disabled",c);const v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Y_(n,v,g);zr(n,v)}}catch(a){if(a instanceof Pi)throw a;zr(n,"network-request-failed",{message:String(a)})}}async function e3(n,e,t,i,a={}){const l=await bl(n,e,t,i,a);return"mfaPendingCredential"in l&&zr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Z_(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?gy(n.config,a):`${n.config.apiScheme}://${a}`;return Zk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class t3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(lr(this.auth,"network-request-failed")),Jk.get())})}}function dh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=lr(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n3(n,e){return bl(n,"POST","/v1/accounts:delete",e)}async function nf(n,e){return bl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function i3(n,e=!1){const t=gt(n),i=await t.getIdToken(e),a=yy(i);Ce(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:$c(sp(a.auth_time)),issuedAtTime:$c(sp(a.iat)),expirationTime:$c(sp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function sp(n){return Number(n)*1e3}function yy(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const a=e2(t);return a?JSON.parse(a):(Ch("Failed to decode base64 JWT payload"),null)}catch(a){return Ch("Caught error parsing JWT payload as JSON",a?.toString()),null}}function nT(n){const e=yy(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Pi&&r3(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function r3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$c(this.lastLoginAt),this.creationTime=$c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(n){const e=n.auth,t=await n.getIdToken(),i=await su(n,nf(e,{idToken:t}));Ce(i?.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?J_(a.providerUserInfo):[],c=o3(n.providerData,l),h=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!c?.length,g=h?f:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new t0(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function a3(n){const e=gt(n);await rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o3(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function J_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3(n,e){const t=await Q_(n,{},async()=>{const i=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await Z_(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:i};return n.emulatorConfig&&qa(n.emulatorConfig.host)&&(f.credentials="include"),X_.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function c3(n,e){return bl(n,"POST","/v2/accounts:revokeToken",py(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=nT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await l3(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Zo;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ce(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ce(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ri{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new s3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new t0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await su(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return i3(this,e)}reload(){return a3(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await rf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(Na(this.auth));const e=await this.getIdToken();return await su(this,n3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:x,isAnonymous:_,providerData:w,stsTokenManager:E}=t;Ce(b&&E,e,"internal-error");const P=Zo.fromJSON(this.name,E);Ce(typeof b=="string",e,"internal-error"),As(i,e.name),As(a,e.name),Ce(typeof x=="boolean",e,"internal-error"),Ce(typeof _=="boolean",e,"internal-error"),As(l,e.name),As(c,e.name),As(h,e.name),As(f,e.name),As(g,e.name),As(v,e.name);const N=new Ri({uid:b,auth:e,email:a,emailVerified:x,displayName:i,isAnonymous:_,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:P,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(N.providerData=w.map(V=>({...V}))),f&&(N._redirectEventId=f),N}static async _fromIdTokenResponse(e,t,i=!1){const a=new Zo;a.updateFromServerResponse(t);const l=new Ri({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await rf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ce(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?J_(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new Zo;h.updateFromIdToken(i);const f=new Ri({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new t0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,g),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new Map;function Nr(n){Ur(n instanceof Function,"Expected a class definition");let e=iT.get(n);return e?(Ur(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eA.type="NONE";const rT=eA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(n,e,t){return`firebase:${n}:${e}:${t}`}class Jo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=jh(this.userKey,a.apiKey,l),this.fullPersistenceKey=jh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nf(this.auth,{idToken:e}).catch(()=>{});return t?Ri._fromGetAccountInfoResponse(this.auth,t,e):null}return Ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Jo(Nr(rT),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Nr(rT);const c=jh(i,e.config.apiKey,e.name);let h=null;for(const g of t)try{const v=await g._get(c);if(v){let b;if(typeof v=="string"){const x=await nf(e,{idToken:v}).catch(()=>{});if(!x)break;b=await Ri._fromGetAccountInfoResponse(e,x,v)}else b=Ri._fromJSON(e,v);g!==l&&(h=b),l=g;break}}catch{}const f=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Jo(l,e,i):(l=f[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Jo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aA(e))return"Blackberry";if(oA(e))return"Webos";if(nA(e))return"Safari";if((e.includes("chrome/")||iA(e))&&!e.includes("edge/"))return"Chrome";if(sA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function tA(n=hn()){return/firefox\//i.test(n)}function nA(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iA(n=hn()){return/crios\//i.test(n)}function rA(n=hn()){return/iemobile/i.test(n)}function sA(n=hn()){return/android/i.test(n)}function aA(n=hn()){return/blackberry/i.test(n)}function oA(n=hn()){return/webos/i.test(n)}function vy(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function u3(n=hn()){return vy(n)&&!!window.navigator?.standalone}function d3(){return YI()&&document.documentMode===10}function lA(n=hn()){return vy(n)||sA(n)||oA(n)||aA(n)||/windows phone/i.test(n)||rA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n,e=[]){let t;switch(n){case"Browser":t=sT(hn());break;case"Worker":t=`${sT(hn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,h)=>{try{const f=e(l);c(f)}catch(f){h(f)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(n,e={}){return bl(n,"GET","/v2/passwordPolicy",py(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=6;class g3{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??m3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aT(this),this.idTokenSubscription=new aT(this),this.beforeStateQueue=new h3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nf(this,{idToken:e}),i=await Ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ei(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Xk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ei(this.app))return Promise.reject(Na(this));const t=e?gt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(Na(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ei(this.app)?Promise.reject(Na(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f3(this),t=new g3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ka("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await c3(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nr(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[Nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,a);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&qk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function xy(n){return gt(n)}class aT{constructor(e){this.auth=e,this.observer=null,this.addObserver=nC(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let by={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y3(n){by=n}function v3(n){return by.loadJS(n)}function x3(){return by.gapiScript}function b3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(n,e){const t=qs(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Vr(l,e??{}))return a;zr(a,"already-initialized")}return t.initialize({options:e})}function S3(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Nr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function _3(n,e,t){const i=xy(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=uA(e),{host:c,port:h}=A3(e),f=h===null?"":`:${h}`,g={url:`${l}//${c}${f}/`},v=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Vr(g,i.config.emulator)&&Vr(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,qa(c)?(R0(`${l}//${c}${f}`),I0("Auth",!0)):w3()}function uA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function A3(n){const e=uA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:oT(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:oT(c)}}}function oT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function w3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n,e){return e3(n,"POST","/v1/accounts:signInWithIdp",py(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="http://localhost";class Ga extends dA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Ga(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return el(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,el(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,el(e,t)}buildRequest(){const e={requestUri:E3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends hA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Au{constructor(){super("facebook.com")}static credential(e){return Ga._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ga._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return js.credential(t,i)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Au{constructor(){super("github.com")}static credential(e){return Ga._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.GITHUB_SIGN_IN_METHOD="github.com";Ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Au{constructor(){super("twitter.com")}static credential(e,t){return Ga._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ks.credential(t,i)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Ri._fromIdTokenResponse(e,i,a),c=lT(i);return new ul({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=lT(i);return new ul({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function lT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Pi{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,sf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new sf(e,t,i,a)}}function fA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?sf._fromErrorAndOperation(n,l,e,i):l})}async function R3(n,e,t=!1){const i=await su(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ul._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(n,e,t=!1){const{auth:i}=n;if(Ei(i.app))return Promise.reject(Na(i));const a="reauthenticate";try{const l=await su(n,fA(i,a,e,n),t);Ce(l.idToken,i,"internal-error");const c=yy(l.idToken);Ce(c,i,"internal-error");const{sub:h}=c;return Ce(n.uid===h,i,"user-mismatch"),ul._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&zr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(n,e,t=!1){if(Ei(n.app))return Promise.reject(Na(n));const i="signIn",a=await fA(n,i,e),l=await ul._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}function j3(n,e,t,i){return gt(n).onIdTokenChanged(e,t,i)}function D3(n,e,t){return gt(n).beforeAuthStateChanged(e,t)}const af="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(af,"1"),this.storage.removeItem(af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=1e3,P3=10;class gA extends mA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);d3()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,P3):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},k3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gA.type="LOCAL";const M3=gA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends mA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pA.type="SESSION";const yA=pA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Ff(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async g=>g(t.origin,l)),f=await O3(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,f)=>{const g=Ty("",20);a.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(b){const x=b;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(x.data.response);break;default:clearTimeout(v),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function V3(n){cr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function F3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L3(){return navigator?.serviceWorker?.controller||null}function B3(){return vA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firebaseLocalStorageDb",z3=1,of="firebaseLocalStorage",bA="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lf(n,e){return n.transaction([of],e?"readwrite":"readonly").objectStore(of)}function U3(){const n=indexedDB.deleteDatabase(xA);return new wu(n).toPromise()}function n0(){const n=indexedDB.open(xA,z3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(of,{keyPath:bA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(of)?e(i):(i.close(),await U3(),e(await n0()))})})}async function cT(n,e,t){const i=Lf(n,!0).put({[bA]:e,value:t});return new wu(i).toPromise()}async function G3(n,e){const t=Lf(n,!1).get(e),i=await new wu(t).toPromise();return i===void 0?null:i.value}function uT(n,e){const t=Lf(n,!0).delete(e);return new wu(t).toPromise()}const $3=800,H3=3;class TA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await n0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>H3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ff._getInstance(B3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await F3(),!this.activeServiceWorker)return;this.sender=new N3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await n0();return await cT(e,af,"1"),await uT(e,af),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>cT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>G3(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Lf(a,!1).getAll();return new wu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TA.type="LOCAL";const W3=TA;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(n,e){return e?Nr(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy extends dA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,t){return el(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function K3(n){return C3(n.auth,new Sy(n),n.bypassAuthState)}function Y3(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),I3(t,new Sy(n),n.bypassAuthState)}async function X3(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),R3(t,new Sy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K3;case"linkViaPopup":case"linkViaRedirect":return X3;case"reauthViaPopup":case"reauthViaRedirect":return Y3;default:zr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new _u(2e3,1e4);class Ho extends SA{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q3.get())};e()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="pendingRedirect",Dh=new Map;class J3 extends SA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Dh.get(this.auth._key());if(!e){try{const i=await eP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Dh.set(this.auth._key(),e)}return this.bypassAuthState||Dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eP(n,e){const t=iP(e),i=nP(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function tP(n,e){Dh.set(n._key(),e)}function nP(n){return Nr(n._redirectPersistence)}function iP(n){return jh(Z3,n.config.apiKey,n.name)}async function rP(n,e,t=!1){if(Ei(n.app))return Promise.reject(Na(n));const i=xy(n),a=q3(i,e),c=await new J3(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=600*1e3;class aP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!_A(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(lr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sP&&this.cachedEventUids.clear(),this.cachedEventUids.has(dT(e))}saveEventToCache(e){this.cachedEventUids.add(dT(e)),this.lastProcessedEventTime=Date.now()}}function dT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _A({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function oP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _A(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(n,e={}){return bl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uP=/^https?/;async function dP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await lP(n);for(const t of e)try{if(hP(t))return}catch{}zr(n,"unauthorized-domain")}function hP(n){const e=e0(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!uP.test(t))return!1;if(cP.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new _u(3e4,6e4);function hT(){const n=cr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mP(n){return new Promise((e,t)=>{function i(){hT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hT(),t(lr(n,"network-request-failed"))},timeout:fP.get()})}if(cr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(cr().gapi?.load)i();else{const a=b3("iframefcb");return cr()[a]=()=>{gapi.load?i():t(lr(n,"network-request-failed"))},v3(`${x3()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw kh=null,e})}let kh=null;function gP(n){return kh=kh||mP(n),kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=new _u(5e3,15e3),yP="__/auth/iframe",vP="emulator/auth/iframe",xP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TP(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?gy(e,vP):`https://${n.config.authDomain}/${yP}`,i={apiKey:e.apiKey,appName:n.name,v:fl},a=bP.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${mu(i).slice(1)}`}async function SP(n){const e=await gP(n),t=cr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:TP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xP,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=lr(n,"network-request-failed"),h=cr().setTimeout(()=>{l(c)},pP.get());function f(){cr().clearTimeout(h),a(i)}i.ping(f).then(f,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AP=500,wP=600,EP="_blank",RP="http://localhost";class fT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IP(n,e,t,i=AP,a=wP){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f={..._P,width:i.toString(),height:a.toString(),top:l,left:c},g=hn().toLowerCase();t&&(h=iA(g)?EP:t),tA(g)&&(e=e||RP,f.scrollbars="yes");const v=Object.entries(f).reduce((x,[_,w])=>`${x}${_}=${w},`,"");if(u3(g)&&h!=="_self")return CP(e||"",h),new fT(null);const b=window.open(e||"",h,v);Ce(b,n,"popup-blocked");try{b.focus()}catch{}return new fT(b)}function CP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="__/auth/handler",DP="emulator/auth/handler",kP=encodeURIComponent("fac");async function mT(n,e,t,i,a,l){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:fl,eventId:a};if(e instanceof hA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",tC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))c[v]=b}if(e instanceof Au){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await n._getAppCheckToken(),g=f?`#${kP}=${encodeURIComponent(f)}`:"";return`${PP(n)}?${mu(h).slice(1)}${g}`}function PP({config:n}){return n.emulator?gy(n,DP):`https://${n.authDomain}/${jP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="webStorageSupport";class MP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yA,this._completeRedirectFn=rP,this._overrideRedirectResult=tP}async _openPopup(e,t,i,a){Ur(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await mT(e,t,i,e0(),a);return IP(e,l,Ty())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await mT(e,t,i,e0(),a);return V3(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ur(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await SP(e),i=new aP(e);return t.register("authEvent",a=>(Ce(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ap,{type:ap},a=>{const l=a?.[0]?.[ap];l!==void 0&&t(!!l),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lA()||nA()||vy()}}const OP=MP;var gT="@firebase/auth",pT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FP(n){ji(new di("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cA(n)},g=new p3(i,a,l,f);return S3(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ji(new di("auth-internal",e=>{const t=xy(e.getProvider("auth").getImmediate());return(i=>new NP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),kn(gT,pT,VP(n)),kn(gT,pT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=300,BP=r2("authIdTokenMaxAge")||LP;let yT=null;const zP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>BP)return;const a=t?.token;yT!==a&&(yT=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function UP(n=vf()){const e=qs(n,"auth");if(e.isInitialized())return e.getImmediate();const t=T3(n,{popupRedirectResolver:OP,persistence:[W3,M3,yA]}),i=r2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=zP(l.toString());D3(t,c,()=>c(t.currentUser)),j3(t,h=>c(h))}}const a=t2("auth");return a&&_3(t,`http://${a}`),t}function GP(){return document.getElementsByTagName("head")?.[0]??document}y3({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=lr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",GP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FP("Browser");const AA="@firebase/installations",_y="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=1e4,EA=`w:${_y}`,RA="FIS_v2",$P="https://firebaseinstallations.googleapis.com/v1",HP=3600*1e3,WP="installations",qP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$a=new Ka(WP,qP,KP);function IA(n){return n instanceof Pi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA({projectId:n}){return`${$P}/projects/${n}/installations`}function jA(n){return{token:n.token,requestStatus:2,expiresIn:XP(n.expiresIn),creationTime:Date.now()}}async function DA(n,e){const i=(await e.json()).error;return $a.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function kA({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function YP(n,{refreshToken:e}){const t=kA(n);return t.append("Authorization",QP(e)),t}async function PA(n){const e=await n();return e.status>=500&&e.status<600?n():e}function XP(n){return Number(n.replace("s","000"))}function QP(n){return`${RA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=CA(n),a=kA(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:t,authVersion:RA,appId:n.appId,sdkVersion:EA},h={method:"POST",headers:a,body:JSON.stringify(c)},f=await PA(()=>fetch(i,h));if(f.ok){const g=await f.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:jA(g.authToken)}}else throw await DA("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=/^[cdef][\w-]{21}$/,i0="";function t4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=n4(n);return e4.test(t)?t:i0}catch{return i0}}function n4(n){return JP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Map;function NA(n,e){const t=Bf(n);VA(t,e),i4(t,e)}function VA(n,e){const t=OA.get(n);if(t)for(const i of t)i(e)}function i4(n,e){const t=r4();t&&t.postMessage({key:n,fid:e}),s4()}let ka=null;function r4(){return!ka&&"BroadcastChannel"in self&&(ka=new BroadcastChannel("[Firebase] FID Change"),ka.onmessage=n=>{VA(n.data.key,n.data.fid)}),ka}function s4(){OA.size===0&&ka&&(ka.close(),ka=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="firebase-installations-database",o4=1,Ha="firebase-installations-store";let op=null;function Ay(){return op||(op=u2(a4,o4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ha)}}})),op}async function lf(n,e){const t=Bf(n),a=(await Ay()).transaction(Ha,"readwrite"),l=a.objectStore(Ha),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&NA(n,e.fid),e}async function FA(n){const e=Bf(n),i=(await Ay()).transaction(Ha,"readwrite");await i.objectStore(Ha).delete(e),await i.done}async function zf(n,e){const t=Bf(n),a=(await Ay()).transaction(Ha,"readwrite"),l=a.objectStore(Ha),c=await l.get(t),h=e(c);return h===void 0?await l.delete(t):await l.put(h,t),await a.done,h&&(!c||c.fid!==h.fid)&&NA(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wy(n){let e;const t=await zf(n.appConfig,i=>{const a=l4(i),l=c4(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===i0?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function l4(n){const e=n||{fid:t4(),registrationStatus:0};return LA(e)}function c4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject($a.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=u4(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:d4(n)}:{installationEntry:e}}async function u4(n,e){try{const t=await ZP(n,e);return lf(n.appConfig,t)}catch(t){throw IA(t)&&t.customData.serverCode===409?await FA(n.appConfig):await lf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function d4(n){let e=await vT(n.appConfig);for(;e.registrationStatus===1;)await MA(100),e=await vT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await wy(n);return i||t}return e}function vT(n){return zf(n,e=>{if(!e)throw $a.create("installation-not-found");return LA(e)})}function LA(n){return h4(n)?{fid:n.fid,registrationStatus:0}:n}function h4(n){return n.registrationStatus===1&&n.registrationTime+wA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4({appConfig:n,heartbeatServiceProvider:e},t){const i=m4(n,t),a=YP(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:EA,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(c)},f=await PA(()=>fetch(i,h));if(f.ok){const g=await f.json();return jA(g)}else throw await DA("Generate Auth Token",f)}function m4(n,{fid:e}){return`${CA(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ey(n,e=!1){let t;const i=await zf(n.appConfig,l=>{if(!BA(l))throw $a.create("not-registered");const c=l.authToken;if(!e&&y4(c))return l;if(c.requestStatus===1)return t=g4(n,e),l;{if(!navigator.onLine)throw $a.create("app-offline");const h=x4(l);return t=p4(n,h),h}});return t?await t:i.authToken}async function g4(n,e){let t=await xT(n.appConfig);for(;t.authToken.requestStatus===1;)await MA(100),t=await xT(n.appConfig);const i=t.authToken;return i.requestStatus===0?Ey(n,e):i}function xT(n){return zf(n,e=>{if(!BA(e))throw $a.create("not-registered");const t=e.authToken;return b4(t)?{...e,authToken:{requestStatus:0}}:e})}async function p4(n,e){try{const t=await f4(n,e),i={...e,authToken:t};return await lf(n.appConfig,i),t}catch(t){if(IA(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await FA(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await lf(n.appConfig,i)}throw t}}function BA(n){return n!==void 0&&n.registrationStatus===2}function y4(n){return n.requestStatus===2&&!v4(n)}function v4(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+HP}function x4(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function b4(n){return n.requestStatus===1&&n.requestTime+wA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(n){const e=n,{installationEntry:t,registrationPromise:i}=await wy(e);return i?i.catch(console.error):Ey(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(n,e=!1){const t=n;return await _4(t),(await Ey(t,e)).token}async function _4(n){const{registrationPromise:e}=await wy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n){if(!n||!n.options)throw lp("App Configuration");if(!n.name)throw lp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw lp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function lp(n){return $a.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="installations",w4="installations-internal",E4=n=>{const e=n.getProvider("app").getImmediate(),t=A4(e),i=qs(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},R4=n=>{const e=n.getProvider("app").getImmediate(),t=qs(e,zA).getImmediate();return{getId:()=>T4(t),getToken:a=>S4(t,a)}};function I4(){ji(new di(zA,E4,"PUBLIC")),ji(new di(w4,R4,"PRIVATE"))}I4();kn(AA,_y);kn(AA,_y,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="analytics",C4="firebase_id",j4="origin",D4=60*1e3,k4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ry="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new yf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Hn=new Ka("analytics","Analytics",P4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(n){if(!n.startsWith(Ry)){const e=Hn.create("invalid-gtag-resource",{gtagURL:n});return xn.warn(e.message),""}return n}function UA(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function O4(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function N4(n,e){const t=O4("firebase-js-sdk-policy",{createScriptURL:M4}),i=document.createElement("script"),a=`${Ry}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function V4(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function F4(n,e,t,i,a,l){const c=i[a];try{if(c)await e[c];else{const f=(await UA(t)).find(g=>g.measurementId===a);f&&await e[f.appId]}}catch(h){xn.error(h)}n("config",a,l)}async function L4(n,e,t,i,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const h=await UA(t);for(const f of c){const g=h.find(b=>b.measurementId===f),v=g&&e[g.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",i,a||{})}catch(l){xn.error(l)}}function B4(n,e,t,i){async function a(l,...c){try{if(l==="event"){const[h,f]=c;await L4(n,e,t,h,f)}else if(l==="config"){const[h,f]=c;await F4(n,e,t,i,h,f)}else if(l==="consent"){const[h,f]=c;n("consent",h,f)}else if(l==="get"){const[h,f,g]=c;n("get",h,f,g)}else if(l==="set"){const[h]=c;n("set",h)}else n(l,...c)}catch(h){xn.error(h)}}return a}function z4(n,e,t,i,a){let l=function(...c){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=B4(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function U4(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ry)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=30,$4=1e3;class H4{constructor(e={},t=$4){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const GA=new H4;function W4(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function q4(n){const{appId:e,apiKey:t}=n,i={method:"GET",headers:W4(t)},a=k4.replace("{app-id}",e),l=await fetch(a,i);if(l.status!==200&&l.status!==304){let c="";try{const h=await l.json();h.error?.message&&(c=h.error.message)}catch{}throw Hn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function K4(n,e=GA,t){const{appId:i,apiKey:a,measurementId:l}=n.options;if(!i)throw Hn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw Hn.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new Q4;return setTimeout(async()=>{h.abort()},D4),$A({appId:i,apiKey:a,measurementId:l},c,h,e)}async function $A(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=GA){const{appId:l,measurementId:c}=n;try{await Y4(i,e)}catch(h){if(c)return xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:c};throw h}try{const h=await q4(n);return a.deleteThrottleMetadata(l),h}catch(h){const f=h;if(!X4(f)){if(a.deleteThrottleMetadata(l),c)return xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:c};throw h}const g=Number(f?.customData?.httpStatus)===503?$b(t,a.intervalMillis,G4):$b(t,a.intervalMillis),v={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return a.setThrottleMetadata(l,v),xn.debug(`Calling attemptFetch again in ${g} millis`),$A(n,v,i,a)}}function Y4(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),i(Hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function X4(n){if(!(n instanceof Pi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Q4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Z4(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const l=await e,c={...i,send_to:l};n("event",t,c)}}async function J4(n,e,t,i){if(i&&i.global){const a={};for(const l of Object.keys(t))a[`user_properties.${l}`]=t[l];return n("set",a),Promise.resolve()}else{const a=await e;n("config",a,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(){if(a2())try{await o2()}catch(n){return xn.warn(Hn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return xn.warn(Hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function tM(n,e,t,i,a,l,c){const h=K4(n);h.then(x=>{t[x.measurementId]=x.appId,n.options.measurementId&&x.measurementId!==n.options.measurementId&&xn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>xn.error(x)),e.push(h);const f=eM().then(x=>{if(x)return i.getId()}),[g,v]=await Promise.all([h,f]);U4(l)||N4(l,g.measurementId),a("js",new Date);const b=c?.config??{};return b[j4]="firebase",b.update=!0,v!=null&&(b[C4]=v),a("config",g.measurementId,b),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e){this.app=e}_delete(){return delete tl[this.app.options.appId],Promise.resolve()}}let tl={},bT=[];const TT={};let cp="dataLayer",iM="gtag",ST,Iy,_T=!1;function rM(){const n=[];if(s2()&&n.push("This is a browser extension environment."),QI()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=Hn.create("invalid-analytics-context",{errorInfo:e});xn.warn(t.message)}}function sM(n,e,t){rM();const i=n.options.appId;if(!i)throw Hn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Hn.create("no-api-key");if(tl[i]!=null)throw Hn.create("already-exists",{id:i});if(!_T){V4(cp);const{wrappedGtag:l,gtagCore:c}=z4(tl,bT,TT,cp,iM);Iy=l,ST=c,_T=!0}return tl[i]=tM(n,bT,TT,e,ST,cp,t),new nM(n)}function aM(n=vf()){n=gt(n);const e=qs(n,cf);return e.isInitialized()?e.getImmediate():oM(n)}function oM(n,e={}){const t=qs(n,cf);if(t.isInitialized()){const a=t.getImmediate();if(Vr(e,t.getOptions()))return a;throw Hn.create("already-initialized")}return t.initialize({options:e})}function HA(n,e,t){n=gt(n),J4(Iy,tl[n.app.options.appId],e,t).catch(i=>xn.error(i))}function WA(n,e,t,i){n=gt(n),Z4(Iy,tl[n.app.options.appId],e,t,i).catch(a=>xn.error(a))}const AT="@firebase/analytics",wT="0.10.19";function lM(){ji(new di(cf,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return sM(i,a,t)},"PUBLIC")),ji(new di("analytics-internal",n,"PRIVATE")),kn(AT,wT),kn(AT,wT,"esm2020");function n(e){try{const t=e.getProvider(cf).getImmediate();return{logEvent:(i,a,l)=>WA(t,i,a,l),setUserProperties:(i,a)=>HA(t,i,a)}}catch(t){throw Hn.create("interop-component-reg-failed",{reason:t})}}}lM();const cM={apiKey:"AIzaSyCebVxfa6FmlE8Kuyey_0P1LMCquacjez0",authDomain:"nhl-savant.firebaseapp.com",projectId:"nhl-savant",storageBucket:"nhl-savant.firebasestorage.app",messagingSenderId:"801983550873",appId:"1:801983550873:web:79681f2fff98afb9f7af08",measurementId:"G-CD4CG06J6B"},Uf=d2(cM),Mr=pk(Uf);$k(Uf);UP(Uf);let au=null;try{typeof window<"u"&&(au=aM(Uf))}catch(n){console.warn("Analytics not initialized:",n.message)}const Tl=(n,e={})=>{if(!au){console.log(`📊 [Analytics] ${n}:`,e);return}try{WA(au,n,e),console.log(`📊 [Analytics] ${n}:`,e)}catch(t){console.error(`Failed to log event ${n}:`,t)}},uM=(n,e={})=>{Tl("page_view",{page_title:n,page_location:window.location.href,page_path:window.location.pathname,...e})},dM=(n,e)=>{e<3||Tl("user_engagement",{page_name:n,engagement_time_msec:e*1e3,engagement_time_seconds:e})},ET=n=>{Tl("bet_expanded",{away_team:n.awayTeam,home_team:n.homeTeam,matchup:`${n.awayTeam} @ ${n.homeTeam}`,game_time:n.gameTime})},hM=()=>{Tl("disclaimer_accepted",{timestamp:new Date().toISOString()})},RT=n=>{if(au)try{HA(au,{user_type:n}),console.log("📊 [Analytics] User type set:",n)}catch(e){console.error("Failed to set user type:",e)}},fM=()=>{localStorage.getItem("nhl_savant_visited")?RT("returning"):(Tl("first_visit",{timestamp:new Date().toISOString()}),localStorage.setItem("nhl_savant_visited","true"),localStorage.setItem("nhl_savant_first_visit",new Date().toISOString()),RT("new"))},mM=(n,e)=>{Tl("bets_loaded",{games_count:n,bets_with_positive_ev:e,load_timestamp:new Date().toISOString()})},gM=n=>({"/":"Today's Games","/dashboard":"Analytics Dashboard","/performance":"Performance Dashboard","/methodology":"Methodology","/inspector":"Data Inspector","/disclaimer":"Legal Disclaimer"})[n]||n;class pM{constructor(e,t=null,i=null){this.rawData=e,this.goalieProcessor=t,this.scheduleHelper=i,this.processedData=this.processAllTeams()}calculatePer60Rate(e,t){return!t||t===0?0:e/t*3600}calculatePDO(e,t,i,a){if(!t||!a||t===0||a===0)return 100;const l=e/t*100,c=(1-i/a)*100;return l+c}calculateShootingEfficiency(e,t){return!t||t===0?1:e/t}calculateSavePerformance(e,t){return!t||t===0?0:1-e/t}calculateXGDiffPer60(e,t,i){const a=this.calculatePer60Rate(e,i),l=this.calculatePer60Rate(t,i);return a-l}calculateRegressionScore(e){const t=(c,h=0)=>c==null||isNaN(c)?h:parseFloat(c),i=this.calculateShootingEfficiency(t(e.goalsFor),t(e.xGoalsFor));this.calculateSavePerformance(t(e.goalsAgainst),t(e.xGoalsAgainst));const a=this.calculatePDO(t(e.goalsFor),t(e.shotsOnGoalFor),t(e.goalsAgainst),t(e.shotsOnGoalAgainst));let l=0;return i>1.1&&(l+=(i-1)*20),i<.9&&(l-=(1-i)*20),a>102&&(l+=(a-100)*2),a<98&&(l-=(100-a)*2),l}processTeamData(e){const t={...e},i=(a,l=0)=>a==null||isNaN(a)?l:parseFloat(a);return t.gamesPlayed=i(e.games_played,20),t.xGF_per60=this.calculatePer60Rate(i(e.xGoalsFor),i(e.iceTime)),t.xGA_per60=this.calculatePer60Rate(i(e.xGoalsAgainst),i(e.iceTime)),t.corsi_per60=this.calculatePer60Rate(i(e.shotAttemptsFor),i(e.iceTime)),t.fenwick_per60=this.calculatePer60Rate(i(e.unblockedShotAttemptsFor),i(e.iceTime)),t.highDanger_xGF_per60=this.calculatePer60Rate(i(e.highDangerxGoalsFor),i(e.iceTime)),t.highDanger_xGA_per60=this.calculatePer60Rate(i(e.highDangerxGoalsAgainst),i(e.iceTime)),t.scoreAdj_xGF_per60=this.calculatePer60Rate(i(e.scoreVenueAdjustedxGoalsFor),i(e.iceTime)),t.scoreAdj_xGA_per60=this.calculatePer60Rate(i(e.scoreVenueAdjustedxGoalsAgainst),i(e.iceTime)),t.shotsOnGoalFor_per60=this.calculatePer60Rate(i(e.shotsOnGoalFor),i(e.iceTime)),t.shotsOnGoalAgainst_per60=this.calculatePer60Rate(i(e.shotsOnGoalAgainst),i(e.iceTime)),e.situation==="5on4"&&(t.pp_efficiency=this.calculatePer60Rate(i(e.xGoalsFor),i(e.iceTime))),e.situation==="4on5"&&(t.pk_efficiency=this.calculatePer60Rate(i(e.xGoalsAgainst),i(e.iceTime))),t.pdo=this.calculatePDO(i(e.goalsFor),i(e.shotsOnGoalFor),i(e.goalsAgainst),i(e.shotsOnGoalAgainst)),t.shooting_efficiency=this.calculateShootingEfficiency(i(e.goalsFor),i(e.xGoalsFor)),t.save_performance=this.calculateSavePerformance(i(e.goalsAgainst),i(e.xGoalsAgainst)),t.xGD_per60=this.calculateXGDiffPer60(i(e.xGoalsFor),i(e.xGoalsAgainst),i(e.iceTime)),t.regression_score=this.calculateRegressionScore(e),t.situational_weight=this.getSituationalWeight(e.situation),t}getSituationalWeight(e){return{"5on5":.77,"5on4":.12,"4on5":.11,all:1,other:0}[e]||0}calculateDynamicSituationalWeights(e,t){const i=this.getTeamData(e,"all"),a=this.getTeamData(t,"all");if(!i||!a)return{"5on5":.77,"5on4":.12,"4on5":.11};const l=parseFloat(i.penalityMinutesFor)||0,c=parseFloat(a.penalityMinutesFor)||0,h=parseFloat(i.games_played)||1,f=l/h,v=c/h,b=f,x=v/60,_=b/60,w=1-x-_;return{"5on5":Math.max(.6,Math.min(.85,w)),"5on4":Math.max(.05,Math.min(.2,x)),"4on5":Math.max(.05,Math.min(.2,_))}}processAllTeams(){return this.rawData.map(e=>this.processTeamData(e))}getTeamsBySituation(e){return this.processedData.filter(t=>t.situation===e)}getTeamData(e,t="all"){return this.processedData.find(i=>i.team===e&&i.situation===t)}calculateLeagueAverage(){const e=this.getTeamsBySituation("5on5");if(!e||e.length===0)return 2.45;let t=0,i=0;e.forEach(g=>{t+=g.goalsFor||0,i+=g.scoreVenueAdjustedxGoalsFor||g.xGoalsFor||0});const l=1.436,c=e.map(g=>g.xGF_per60).filter(g=>g&&g>0);if(c.length===0)return 2.45;const h=c.reduce((g,v)=>g+v,0)/c.length,f=h*l;return console.log(`📊 League avg: base=${h.toFixed(2)} xGF/60, cal=${l.toFixed(3)}, result=${f.toFixed(2)} goals/60`),f}calculateRegressionWeight(e){return!e||e<0||e<5?.35:e<10?.3:e<20||e<40?.2:.1}applyRegressionToMean(e,t,i){if(!e||e===0)return t;const a=this.calculateRegressionWeight(i);return e*(1-a)+t*a}getShootingTalent(e){const t=this.getTeamData(e,"5on5");if(!t||!t.goalsFor||!t.xGoalsFor)return 1;const i=t.goalsFor/t.xGoalsFor;return i>1.08?1.03:i<.92?.97:1}calculateExpectedGoals(e,t){const i=this.getTeamData(e,"5on5"),a=this.getTeamData(e,"5on4"),l=this.getTeamData(t,"4on5");if(!i)return 0;let c=i.xGF_per60*.77;if(a&&l){const h=(a.pp_efficiency-l.pk_efficiency)*.12;c+=h}return Math.max(0,c)}predictGameTotal(e,t){const i=this.predictTeamScore(e,t),a=this.predictTeamScore(t,e);return i+a}predictTeamScore(e,t,i=!1,a=null,l=null){const c=this.getTeamData(e,"5on5"),h=this.getTeamData(t,"5on5"),f=this.getTeamData(e,"5on4"),g=this.getTeamData(t,"4on5");if(!c||!h)return 0;const v=this.calculateLeagueAverage(),b=c.gamesPlayed||82,x=h.gamesPlayed||82,_=c.scoreAdj_xGF_per60||c.xGF_per60,w=h.scoreAdj_xGA_per60||h.xGA_per60,E=this.applyRegressionToMean(_,v,b),P=this.applyRegressionToMean(w,v,x),N=this.calculatePDO(c.goalsFor,c.shotsOnGoalFor,c.goalsAgainst,c.shotsOnGoalAgainst),V=this.calculatePDO(h.goalsFor,h.shotsOnGoalFor,h.goalsAgainst,h.shotsOnGoalAgainst),L=this.applyPDORegression(E,N),ne=this.applyPDORegression(P,V),W=L*.4+ne*.6,q=this.getShootingTalent(e),D=W*q,I=this.calculateDynamicSituationalWeights(e,t),C=I["5on5"]*60;let F=D/60*C;i&&(F*=1.058);let k=0;if(f&&g){const X=f.xGF_per60,le=g.xGA_per60,G=this.applyRegressionToMean(X,v,b),U=this.applyRegressionToMean(le,v,x),oe=(G*.4+U*.6)*q,fe=I["5on4"]*60;k=oe/60*fe}let z=F+k;if(this.scheduleHelper){const X=this.scheduleHelper.getCombinedAdjustment(e,l,i);if(X!==0){z*=1+X;const le=this.scheduleHelper.getRestAdjustment(e,l),G=i?0:this.scheduleHelper.getRoadTripAdjustment(e,l),U=i?this.scheduleHelper.getHomecomingAdjustment(e,l):0,J=[];if(le!==0){const oe=le===-.03?"B2B":le>0?"Extra Rest":"Rest";J.push(`${oe} ${le>0?"+":""}${(le*100).toFixed(1)}%`)}if(G!==0){const oe=this.scheduleHelper.getConsecutiveAwayGames(e,l);J.push(`Road Trip (game ${oe+1}) ${(G*100).toFixed(1)}%`)}if(U!==0){const{tripLength:oe}=this.scheduleHelper.isHomecomingGame(e,l);J.push(`Homecoming (${oe}-game trip) +${(U*100).toFixed(1)}%`)}console.log(`  Situational adjustment for ${e}: ${J.join(", ")} → ${z.toFixed(2)} goals`)}}const O=this.adjustForGoalie(z,t,a);return Math.max(0,O)}applyPDORegression(e,t){if(!t||t===100)return e;if(t>106){const i=Math.min(.02,(t-106)*.01);return e*(1-i)}else if(t<94){const i=Math.min(.02,(94-t)*.01);return e*(1+i)}return e}adjustForGoalie(e,t,i=null){if(!this.goalieProcessor)return e;let a=0;if(i)a=this.goalieProcessor.calculateGSAE(i,"5on5"),console.log(`🎯 Goalie adjustment: ${i} → GSAE ${a.toFixed(2)}`);else{const f=this.goalieProcessor.getTeamGoalies(t,"5on5");if(f&&f.length>0){let g=0,v=0;f.forEach(b=>{const x=parseFloat(b.games_played)||0,_=this.goalieProcessor.calculateGSAE(b.name,"5on5");g+=_*x,v+=x}),a=v>0?g/v:0}}const l=1+a*.003,c=i?1:.6,h=1+(l-1)*c;return Math.max(0,e*h)}probabilityToOdds(e){return e<=0||e>=1?0:e>=.5?Math.round(-1*(e/(1-e))*100):Math.round((1-e)/e*100)}oddsToProbability(e){return e<0?Math.abs(e)/(Math.abs(e)+100):100/(e+100)}calculateEV(e,t,i=100){if(e<=0||e>=1)return 0;let a;t>0?a=1+t/100:a=1+100/Math.abs(t);const l=i*a;return e*l-i}calculateKellyStake(e,t,i=1e3){if(e<=0||e>=1)return{fullKelly:0,fractionalKelly:0,recommendedStake:0};const a=t>0?t/100:100/Math.abs(t),l=e,c=1-l,h=(a*l-c)/a,f=Math.max(0,h*.25);return{fullKelly:h,fractionalKelly:f,recommendedStake:i*f}}normalCDF(e){const t=1/(1+.2316419*Math.abs(e)),a=.3989423*Math.exp(-e*e/2)*t*(.3193815+t*(-.3565638+t*(1.781478+t*(-1.821256+t*1.330274))));return e>0?1-a:a}factorial(e){if(e<=1)return 1;let t=1;for(let i=2;i<=e;i++)t*=i;return t}logFactorial(e){if(e<=1)return 0;let t=0;for(let i=2;i<=e;i++)t+=Math.log(i);return t}poissonPMF(e,t){if(t<=0||e<0)return 0;if(e>20){const i=e*Math.log(t)-t-this.logFactorial(e);return Math.exp(i)}return Math.pow(t,e)*Math.exp(-t)/this.factorial(e)}poissonCDF(e,t){if(t<=0)return 1;if(e<0)return 0;let i=0;const a=Math.floor(e);for(let l=0;l<=a;l++)i+=this.poissonPMF(l,t);return Math.min(1,i)}calculatePoissonWinProb(e,t){if(!e||!t||e<=0||t<=0)return .5;let i=0,a=0;for(let g=0;g<=10;g++){const v=this.poissonPMF(g,e);for(let b=0;b<=10;b++){const x=this.poissonPMF(b,t),_=v*x;g>b?i+=_:g===b&&(a+=_)}}const l=Math.abs(e-t),c=(e+t)/2,h=l/c;let f;return h<.1?f=.5:e>t?f=Math.min(.58,.52+h*.15):f=Math.max(.42,.48-h*.15),i+=a*f,Math.max(.05,Math.min(.95,i))}estimateWinProbability(e,t,i=!0){if(!e||!t)return .5;const a=e.team||e.name,l=t.team||t.name;if(!a||!l)return .5;let c,h;return i?(c=this.predictTeamScore(a,l,!0),h=this.predictTeamScore(l,a,!1)):(c=this.predictTeamScore(a,l,!1),h=this.predictTeamScore(l,a,!0)),this.calculatePoissonWinProb(c,h)}findRegressionCandidates(){const e=this.getTeamsBySituation("all"),t=e.filter(a=>a.regression_score>10).sort((a,l)=>l.regression_score-a.regression_score),i=e.filter(a=>a.regression_score<-10).sort((a,l)=>a.regression_score-l.regression_score);return{overperforming:t.slice(0,5),underperforming:i.slice(0,5)}}findSpecialTeamsMismatches(){const e=this.getTeamsBySituation("5on4"),t=this.getTeamsBySituation("4on5"),i=[];return e.forEach(a=>{t.forEach(l=>{if(a.team!==l.team){const c=a.pp_efficiency||0,h=l.pk_efficiency||0,f=c-h;f>2&&i.push({ppTeam:a.team,pkTeam:l.team,ppEfficiency:c,pkEfficiency:h,mismatch:f,recommendation:"BET OVER on "+a.team+" team total"})}})}),i.sort((a,l)=>l.mismatch-a.mismatch)}calculateBettingEdge(e,t){const i=1/t;return e-i}getTopBettingOpportunities(){const e=this.findRegressionCandidates(),t=this.findSpecialTeamsMismatches(),i=[];return e.overperforming.forEach(a=>{i.push({type:"REGRESSION",team:a.team,recommendation:"BET UNDER/AGAINST",reason:`Overperforming (PDO: ${a.pdo.toFixed(1)}, Shooting Eff: ${a.shooting_efficiency.toFixed(2)})`,confidence:Math.min(95,Math.abs(a.regression_score)*2),edge:Math.abs(a.regression_score)/10})}),e.underperforming.forEach(a=>{i.push({type:"REGRESSION",team:a.team,recommendation:"BET OVER/WITH",reason:`Underperforming (PDO: ${a.pdo.toFixed(1)}, Shooting Eff: ${a.shooting_efficiency.toFixed(2)})`,confidence:Math.min(95,Math.abs(a.regression_score)*2),edge:Math.abs(a.regression_score)/10})}),t.slice(0,3).forEach(a=>{i.push({type:"SPECIAL_TEAMS",team:a.ppTeam,recommendation:a.recommendation,reason:`PP vs PK mismatch (${a.mismatch.toFixed(1)} per 60)`,confidence:Math.min(90,a.mismatch*10),edge:a.mismatch/5})}),i.sort((a,l)=>l.edge-a.edge)}}async function yM(n=null){try{let e;try{if(e=await fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/teams.csv"),!e.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw file failed, trying local file..."),e=await fetch("/teams.csv")}if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.text();return new Promise((i,a)=>{E0.parse(t,{header:!0,skipEmptyLines:!0,transformHeader:l=>l.trim(),transform:l=>{if(l===""||l===null||l===void 0)return null;const c=l.toString().trim();return c===""||c==="null"||c==="undefined"?null:!isNaN(c)&&!isNaN(parseFloat(c))?parseFloat(c):c},complete:l=>{console.log("CSV parsing completed. Rows:",l.data.length),console.log("Parsing errors:",l.errors),l.errors.length>0&&console.warn("CSV parsing warnings:",l.errors);const c=l.data.filter(f=>f&&Object.keys(f).some(g=>f[g]!==null&&f[g]!==""));if(c.length===0){a(new Error("No valid data found in CSV file"));return}console.log("Clean data rows:",c.length);const h=new pM(c,null,n);i(h)},error:l=>{console.error("CSV parsing error:",l),a(l)}})})}catch(e){throw console.error("Error loading NHL data:",e),e}}async function vM(){const n=["https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/starting_goalies.json","/starting_goalies.json"];for(const e of n)try{const t=await fetch(e);if(!t.ok)continue;const i=await t.json();return console.log("✅ Loaded starting goalies:",i.games?.length||0,"games"),i}catch{console.log(`⚠️ Could not load from ${e}`)}return console.log("ℹ️ No starting goalies file found, using team averages"),null}async function xM(){try{let n;try{if(n=await fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/goalies.csv"),!n.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw file failed, trying local file..."),n=await fetch("/goalies.csv")}if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const e=await n.text();return new Promise((t,i)=>{E0.parse(e,{header:!0,skipEmptyLines:!0,transformHeader:a=>a.trim(),complete:a=>{const l=a.data.filter(c=>c&&c.name&&c.team&&c.situation);console.log(`✅ Loaded ${l.length} goalie records`),t(l)},error:a=>{console.error("Goalie CSV parsing error:",a),i(a)}})})}catch(n){throw console.error("Error loading goalies.csv:",n),n}}async function bM(){try{console.log("🏒 Loading Money file..."),console.log("🏒 Loading Total file...");let n,e;try{if([n,e]=await Promise.all([fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/odds_money.md"),fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/odds_total.md")]),!n.ok||!e.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw files failed, trying local files..."),[n,e]=await Promise.all([fetch("/odds_money.md"),fetch("/odds_total.md")])}if(!n.ok||!e.ok)return console.warn("One or both odds files not found"),null;const t=await n.text(),i=await e.text();return console.log("✅ Both odds files loaded successfully"),{moneyText:t,totalText:i}}catch(n){return console.warn("Error loading odds files:",n),null}}class TM{constructor(e){this.goalieData=e}getGoalieStats(e,t){if(console.log(`🥅 getGoalieStats called: ${e} (${t})`),!this.goalieData||!Array.isArray(this.goalieData))return console.log("❌ No goalie data available"),null;const i=this.goalieData.filter(E=>E.team===t);console.log(`   📊 Found ${i.length} rows for team ${t}`),i.length>0&&console.log(`   📊 Sample names: ${i.slice(0,3).map(E=>E.name).join(", ")}`);let a=this.goalieData.filter(E=>E.name===e&&E.team===t&&E.situation==="all");if(!a.length){console.log(`   ⚠️ No exact match, trying last name match for: ${e}`);const E=e.toLowerCase().trim();a=this.goalieData.filter(P=>{if(P.team!==t||P.situation!=="all")return!1;const N=P.name.toLowerCase(),V=N.split(" "),ne=V[V.length-1]===E||N.includes(E);return ne&&console.log(`   ✓ Last name match found: ${P.name} (${P.team})`),ne})}if(!a.length)return console.log(`❌ Goalie stats not in database: ${e} (${t})`),null;console.log(`✅ Found goalie: ${a[0].name} (${a[0].team})`);const l=a[0],c=parseInt(l.games_played)||0;if(c===0)return console.warn(`No games played for: ${e}`),null;parseFloat(l.icetime);const h=parseFloat(l.xGoals)||0,f=parseFloat(l.goals)||0,g=parseFloat(l.ongoal)||0,v=h-f,b=g>0?1-f/g:.9,x=parseFloat(l.highDangerShots)||0,_=parseFloat(l.highDangerGoals)||0,w=x>0?1-_/x:.85;return{name:e,team:t,gamesPlayed:c,gsae:v.toFixed(2),savePct:(b*100).toFixed(1),hdSavePct:(w*100).toFixed(1),xGoalsAgainst:(h/c).toFixed(2),goalsAgainst:(f/c).toFixed(2),lowDangerSavePct:this.calculateLowDangerSavePct(l),mediumDangerSavePct:this.calculateMediumDangerSavePct(l),reboundControl:this.calculateReboundControl(l),recentForm:this.calculateRecentForm(v,c)}}calculateGSAE(e,t="5on5"){if(!this.goalieData||!Array.isArray(this.goalieData))return console.log("⚠️ calculateGSAE: No goalie data available"),0;const i=this.goalieData.filter(f=>f.situation===t);let a=i.find(f=>f.name===e);if(!a){const f=e.toLowerCase().trim();a=i.find(g=>{const v=g.name.toLowerCase(),b=v.split(" ");return b[b.length-1]===f||v.includes(f)})}if(!a)return console.log(`⚠️ calculateGSAE: Goalie not found: ${e} (${t})`),0;const l=parseFloat(a.xGoals)||0,c=parseFloat(a.goals)||0,h=l-c;return console.log(`✅ calculateGSAE: ${a.name} → GSAE ${h.toFixed(2)} (xG: ${l.toFixed(2)}, GA: ${c.toFixed(2)})`),h}getTeamGoalies(e,t="5on5"){return!this.goalieData||!Array.isArray(this.goalieData)?[]:this.goalieData.filter(i=>i.team===e&&i.situation===t&&parseInt(i.games_played)>0)}calculateLowDangerSavePct(e){const t=parseFloat(e.lowDangerShots)||0,i=parseFloat(e.lowDangerGoals)||0;return t>0?((1-i/t)*100).toFixed(1):"97.0"}calculateMediumDangerSavePct(e){const t=parseFloat(e.mediumDangerShots)||0,i=parseFloat(e.mediumDangerGoals)||0;return t>0?((1-i/t)*100).toFixed(1):"92.0"}calculateReboundControl(e){const t=parseFloat(e.xRebounds)||0,i=parseFloat(e.rebounds)||0;if(t===0)return"Average";const a=i/t;return a<.9?"Excellent":a>1.15?"Poor":"Average"}calculateRecentForm(e,t){return t<5?"Limited Sample":e>5?"Hot":e<-3?"Cold":"Average"}getLeagueRank(e){const t=parseFloat(e);return t>10?{rank:5,tier:"ELITE"}:t>5?{rank:12,tier:"STRONG"}:t>-5?{rank:18,tier:"AVERAGE"}:{rank:28,tier:"WEAK"}}getGoalieFromStartingData(e,t){if(!t||!t.games)return null;const i=t.games.find(c=>c.away?.team===e||c.home?.team===e);if(!i)return null;const l=i.away?.team===e?i.away:i.home;return!l||!l.goalie?null:l.stats?l.stats:this.getGoalieStats(l.goalie,e)}}class SM{constructor(e){this.teamNameToCode=this.buildTeamMapping(),this.gamesByTeam=this.indexSchedule(e)}buildTeamMapping(){return{"Anaheim Ducks":"ANA","Arizona Coyotes":"ARI","Boston Bruins":"BOS","Buffalo Sabres":"BUF","Calgary Flames":"CGY","Carolina Hurricanes":"CAR","Chicago Blackhawks":"CHI","Colorado Avalanche":"COL","Columbus Blue Jackets":"CBJ","Dallas Stars":"DAL","Detroit Red Wings":"DET","Edmonton Oilers":"EDM","Florida Panthers":"FLA","Los Angeles Kings":"LAK","Minnesota Wild":"MIN","Montreal Canadiens":"MTL","Nashville Predators":"NSH","New Jersey Devils":"NJ","New York Islanders":"NYI","New York Rangers":"NYR","Ottawa Senators":"OTT","Philadelphia Flyers":"PHI","Pittsburgh Penguins":"PIT","San Jose Sharks":"SJ","Seattle Kraken":"SEA","St. Louis Blues":"STL","Tampa Bay Lightning":"TB","Toronto Maple Leafs":"TOR","Utah Mammoth":"UTA","Vancouver Canucks":"VAN","Vegas Golden Knights":"VEG","Washington Capitals":"WSH","Winnipeg Jets":"WPG"}}indexSchedule(e){const t={};return!e||!Array.isArray(e)?(console.warn("⚠️ Schedule data invalid, B2B disabled"),t):(e.forEach(i=>{const a=i.Date,l=i.Visitor,c=i.Home,h=parseInt(i.Score_1)||0,f=parseInt(i.Score_2)||0,g=i.Status,v=this.teamNameToCode[l],b=this.teamNameToCode[c];if(!a||!v||!b){(l||c)&&console.warn(`⚠️ Could not map team names: ${l} vs ${c}`);return}t[v]||(t[v]=[]),t[b]||(t[b]=[]);let x=null,_=null;g&&g.includes("Final")&&(_=h-f,h>f?x="W":h<f?x=g.includes("OT")||g.includes("SO")?"OTL":"L":x="T");let w=null,E=null;g&&g.includes("Final")&&(E=f-h,f>h?w="W":f<h?w=g.includes("OT")||g.includes("SO")?"OTL":"L":w="T"),t[v].push({date:a,opponent:b,location:"away",timestamp:this.parseDate(a),result:x,score:g?`${h}-${f}`:null,goalDifferential:_}),t[b].push({date:a,opponent:v,location:"home",timestamp:this.parseDate(a),result:w,score:g?`${f}-${h}`:null,goalDifferential:E})}),Object.values(t).forEach(i=>{i.sort((a,l)=>a.timestamp-l.timestamp)}),console.log(`✅ Indexed schedule for ${Object.keys(t).length} teams (2025-26 season)`),t)}parseDate(e){if(!e)return 0;if(e.includes("-")){const[t,i,a]=e.split("-");return new Date(t,i-1,a).getTime()}if(e.includes("/")){const[t,i,a]=e.split("/");return new Date(a,t-1,i).getTime()}return 0}getDaysRest(e,t){const i=this.gamesByTeam[e];if(!i||i.length===0)return null;const a=this.parseDate(t);if(!a)return null;const l=i.filter(h=>h.timestamp<a).sort((h,f)=>f.timestamp-h.timestamp)[0];return l?Math.floor((a-l.timestamp)/(1e3*60*60*24)):null}isBackToBack(e,t){return this.getDaysRest(e,t)===1}getRestAdjustment(e,t){const i=this.getDaysRest(e,t);return i===null?0:i===1?-.03:i===2?0:i>=3?.04:i<=0?-.04:0}getConsecutiveAwayGames(e,t){const i=this.gamesByTeam[e];if(!i||i.length===0)return 0;const a=this.parseDate(t);if(!a)return 0;const l=i.filter(h=>h.timestamp<a).sort((h,f)=>f.timestamp-h.timestamp);let c=0;for(const h of l)if(h.location==="away")c++;else break;return c}getRoadTripAdjustment(e,t){const i=this.getConsecutiveAwayGames(e,t);return i<2?0:i===2?-.03:i===3?-.05:i>=4?-.08:0}isHomecomingGame(e,t){const i=this.gamesByTeam[e];if(!i||i.length===0)return{isHomecoming:!1,tripLength:0};const a=this.parseDate(t);if(!a)return{isHomecoming:!1,tripLength:0};const l=i.find(f=>f.timestamp===a);if(!l||l.location!=="home")return{isHomecoming:!1,tripLength:0};const c=i.filter(f=>f.timestamp<a).sort((f,g)=>g.timestamp-f.timestamp);let h=0;for(const f of c)if(f.location==="away")h++;else break;return{isHomecoming:h>=3,tripLength:h}}getHomecomingAdjustment(e,t){const{isHomecoming:i,tripLength:a}=this.isHomecomingGame(e,t);return i?a===3?.03:a===4?.05:a>=5?.06:0:0}getCombinedAdjustment(e,t,i){let a=0;if(a+=this.getRestAdjustment(e,t),i){const l=this.getHomecomingAdjustment(e,t);l!==0&&(a+=l)}else{const l=this.getRoadTripAdjustment(e,t);l!==0&&(a+=l)}return a}getRestInfo(e,t){const i=this.getDaysRest(e,t),a=this.getRestAdjustment(e,t);return{daysRest:i,isB2B:i===1,adjustment:a,description:i===null?"Season start":i===1?"Back-to-back":i===2?"Normal rest":i>=3?`Extra rest (${i} days)`:"Unknown"}}getTeamRecentGames(e,t=10){const i=this.gamesByTeam[e];if(!i||i.length===0)return[];const a=Date.now();return i.filter(c=>c.timestamp<a&&c.result).sort((c,h)=>h.timestamp-c.timestamp).slice(0,t)}}const IT={Minnesota:"MIN","N.Y. Rangers":"NYR",Seattle:"SEA",Philadelphia:"PHI",Buffalo:"BUF",Detroit:"DET",Montreal:"MTL",Winnipeg:"WPG",Calgary:"CGY",Carolina:"CAR",Vegas:"VGK","San Jose":"SJS","N.Y. Islanders":"NYI","New Jersey":"NJD",Toronto:"TOR",Vancouver:"VAN",Pittsburgh:"PIT",Washington:"WSH",Edmonton:"EDM",Ottawa:"OTT",Florida:"FLA",Boston:"BOS","Los Angeles":"LAK","St. Louis":"STL",Columbus:"CBJ",Dallas:"DAL",Anaheim:"ANA",Nashville:"NSH",Colorado:"COL",Utah:"UTA","Tampa Bay":"TBL",Chicago:"CHI"};function CT(n){if(!n||n.trim()==="")return console.warn("No odds data provided"),[];const e=[],t=n.split(`
`),i=new Date,a=["SUN","MON","TUE","WED","THU","FRI","SAT"],l=a[i.getDay()],c=i.getMonth()+1,h=i.getDate(),f=`${l} ${c}/${h}`,g=`${l} ${c}/${h.toString().padStart(2,"0")}`,v=new Date(i);v.setDate(v.getDate()-1);const b=a[v.getDay()],x=v.getMonth()+1,_=v.getDate(),w=`${b} ${x}/${_}`,E=`${b} ${x}/${_.toString().padStart(2,"0")}`,N=i.getHours()<6;console.log(`🏒 Starting OddsTrader parser... Looking for: ${f} or ${g}`);for(let V=0;V<t.length;V++){const L=t[V];if(L.includes(f)||L.includes(g)||N&&(L.includes(w)||L.includes(E))||L.includes("LIVE")){console.log(`
📅 Found game line at ${V}: ${L.substring(0,100)}...`);let F;if(L.includes("LIVE")){console.log("  🔴 LIVE GAME - Skipping (no betting markets available)");continue}else{const le=L.match(/\/\d{1,2}(\d{1,2}:\d{2} [AP]M)/);if(!le){console.log("  ⚠️ No time found, skipping");continue}F=le[1],console.log(`  ⏰ Time: ${F}`)}const k={gameTime:F,awayTeam:null,homeTeam:null,moneyline:{away:null,home:null},puckLine:{away:{spread:null,odds:null},home:{spread:null,odds:null}},total:{line:null,overLine:null,underLine:null,over:null,under:null}};for(const[le,G]of Object.entries(IT))if(L.includes(le)){k.awayTeam=G,console.log(`  🏒 Away team: ${le} (${G})`);break}const z=L.match(/(o|u)(\d+(?:½)?)\s*([-+]\d{3,})[A-Za-z]/);if(z){const le=z[1],G=z[2].replace("½",".5"),U=parseInt(z[3]);le==="o"?(k.total.overLine=parseFloat(G),k.total.over=U,console.log(`  📊 OVER ${G} ${U}`)):(k.total.underLine=parseFloat(G),k.total.under=U,console.log(`  📊 UNDER ${G} ${U}`))}else{const le=L.match(/([-+]\d{3,})(Bet365|Caesars|BetMGM|BetRivers|SugarHouse|FanDuel)/);le&&(k.moneyline.away=parseInt(le[1]),console.log(`  💰 Away odds: ${k.moneyline.away} (from ${le[2]})`))}const O=t[V+1];if(!O){console.log("  ⚠️ No next line found for home team, skipping");continue}for(const[le,G]of Object.entries(IT))if(O.includes(le)){k.homeTeam=G,console.log(`  🏒 Home team: ${le} (${G})`);break}const X=O.match(/(o|u)(\d+(?:½)?)\s*([-+]\d{3,})[A-Za-z]/);if(X){const le=X[1],G=X[2].replace("½",".5"),U=parseInt(X[3]);le==="o"?(k.total.overLine=parseFloat(G),k.total.over=U,console.log(`  📊 OVER ${G} ${U}`)):(k.total.underLine=parseFloat(G),k.total.under=U,console.log(`  📊 UNDER ${G} ${U}`))}else{const le=O.match(/([-+]\d{3,})(Bet365|Caesars|BetMGM|BetRivers|SugarHouse|FanDuel)/);le&&(k.moneyline.home=parseInt(le[1]),console.log(`  💰 Home odds: ${k.moneyline.home} (from ${le[2]})`))}k.awayTeam&&k.homeTeam?(k.total.overLine&&k.total.underLine?(k.total.overLine,k.total.underLine,k.total.line=k.total.overLine):k.total.overLine?k.total.line=k.total.overLine:k.total.underLine&&(k.total.line=k.total.underLine),k.date=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,e.push(k),console.log(`  ✅ Added game: ${k.awayTeam} @ ${k.homeTeam}`),console.log(`     Moneyline: ${k.moneyline.away}/${k.moneyline.home}`),console.log(`     Total: ${k.total.line?`O/U ${k.total.line} (${k.total.over}/${k.total.under})`:"N/A"}`)):console.log(`  ❌ Missing team data - away: ${k.awayTeam}, home: ${k.homeTeam}`)}const W=new Date(i);W.setDate(W.getDate()+1);const q=a[W.getDay()],D=W.getMonth()+1,I=W.getDate(),C=`${q} ${D}/${I}`;if(L.includes(C)){console.log(`
🛑 Reached tomorrow's games (${C}), stopping parser`);break}}return console.log(`
✅ Parsed ${e.length} games from OddsTrader`),e.length>0&&console.log("📋 Games:",e.map(V=>`${V.awayTeam} @ ${V.homeTeam}`).join(", ")),e}function qA(n,e){console.log("🔄 Merging moneylines + totals...");const t=CT(n);console.log(`✅ Parsed ${t.length} games from Money file`);const i=CT(e);console.log(`✅ Parsed ${i.length} games from Total file`);const a=t.map((l,c)=>{const h=i[c];return h&&h.total&&h.total.line?{...l,total:h.total}:l});return console.log(`📋 Final merged games: ${a.map(l=>`${l.awayTeam} @ ${l.homeTeam}`).join(", ")}`),a}function _M(n){return!n||n.length===0?[]:n.map(e=>({away:e.awayTeam,home:e.homeTeam,time:e.gameTime||"TBD"}))}class AM{constructor(e){this.dataProcessor=e,this.leagueAverages={},this.calculateLeagueAverages()}calculateLeagueAverages(){const e=this.dataProcessor.getTeamsBySituation("5on5");if(!e||e.length===0)return;["highDangerxGoalsFor","highDangerxGoalsAgainst","highDangerShotsFor","highDangerShotsAgainst","highDangerGoalsFor","highDangerGoalsAgainst","mediumDangerxGoalsFor","mediumDangerxGoalsAgainst","lowDangerxGoalsFor","lowDangerxGoalsAgainst","xReboundsFor","xReboundsAgainst","reboundGoalsFor","reboundGoalsAgainst","xGoalsFromActualReboundsOfShotsFor","xGoalsFromActualReboundsOfShotsAgainst","blockedShotAttemptsFor","blockedShotAttemptsAgainst","shotAttemptsFor","shotAttemptsAgainst","takeawaysFor","takeawaysAgainst","giveawaysFor","giveawaysAgainst","dZoneGiveawaysFor","dZoneGiveawaysAgainst","hitsFor","hitsAgainst","corsiPercentage","fenwickPercentage","xGoalsPercentage"].forEach(i=>{const a=e.map(l=>l[i]).filter(l=>l!=null&&!isNaN(l));a.length>0&&(this.leagueAverages[i]=a.reduce((l,c)=>l+c,0)/a.length)}),this.calculatePer60Averages()}calculatePer60Averages(){const e=this.dataProcessor.getTeamsBySituation("5on5");if(!e||e.length===0)return;const t=[];e.forEach(i=>{const l=(i.iceTime||1)/60;t.push({hdXgfPer60:(i.highDangerxGoalsFor||0)/l*60,hdXgaPer60:(i.highDangerxGoalsAgainst||0)/l*60,rebXgfPer60:(i.xGoalsFromActualReboundsOfShotsFor||0)/l*60,rebXgaPer60:(i.xGoalsFromActualReboundsOfShotsAgainst||0)/l*60,blocksPer60:(i.blockedShotAttemptsFor||0)/l*60,blocksAgainstPer60:(i.blockedShotAttemptsAgainst||0)/l*60})}),this.leagueAverages.hdXgfPer60=this.avg(t.map(i=>i.hdXgfPer60)),this.leagueAverages.hdXgaPer60=this.avg(t.map(i=>i.hdXgaPer60)),this.leagueAverages.rebXgfPer60=this.avg(t.map(i=>i.rebXgfPer60)),this.leagueAverages.rebXgaPer60=this.avg(t.map(i=>i.rebXgaPer60)),this.leagueAverages.blocksPer60=this.avg(t.map(i=>i.blocksPer60)),this.leagueAverages.blocksAgainstPer60=this.avg(t.map(i=>i.blocksAgainstPer60))}avg(e){return e.reduce((t,i)=>t+i,0)/e.length}getPercentileRank(e,t,i="5on5"){const a=this.dataProcessor.getTeamsBySituation(i);if(!a||a.length===0)return 50;const l=a.find(g=>g.team===e);if(!l||l[t]===void 0)return 50;const c=l[t],h=a.map(g=>g[t]).filter(g=>g!=null&&!isNaN(g)).sort((g,v)=>g-v),f=h.findIndex(g=>g>=c);return Math.round(f/h.length*100)}getLeagueRank(e,t,i="5on5",a=!0){const l=this.dataProcessor.getTeamsBySituation(i);if(!l||l.length===0)return null;const c=l.find(g=>g.team===e);return!c||c[t]===void 0?null:l.map(g=>({team:g.team,value:g[t]||0})).sort((g,v)=>a?v.value-g.value:g.value-v.value).findIndex(g=>g.team===e)+1}getHighDangerMetrics(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);if(!i)return null;const l=(i.iceTime||1)/60;return{hdXgFor:i.highDangerxGoalsFor||0,hdXgAgainst:i.highDangerxGoalsAgainst||0,hdXgfPer60:(i.highDangerxGoalsFor||0)/l*60,hdXgaPer60:(i.highDangerxGoalsAgainst||0)/l*60,hdShotsFor:i.highDangerShotsFor||0,hdShotsAgainst:i.highDangerShotsAgainst||0,hdGoalsFor:i.highDangerGoalsFor||0,hdGoalsAgainst:i.highDangerGoalsAgainst||0,hdConversionRate:i.highDangerShotsFor>0?i.highDangerGoalsFor/i.highDangerShotsFor*100:0,hdSavePercent:i.highDangerShotsAgainst>0?(i.highDangerShotsAgainst-i.highDangerGoalsAgainst)/i.highDangerShotsAgainst*100:0}}getReboundMetrics(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);if(!i)return null;const l=(i.iceTime||1)/60;return{xRebFor:i.xReboundsFor||0,xRebAgainst:i.xReboundsAgainst||0,rebXgFor:i.xGoalsFromActualReboundsOfShotsFor||0,rebXgAgainst:i.xGoalsFromActualReboundsOfShotsAgainst||0,rebXgfPer60:(i.xGoalsFromActualReboundsOfShotsFor||0)/l*60,rebXgaPer60:(i.xGoalsFromActualReboundsOfShotsAgainst||0)/l*60,rebGoalsFor:i.reboundGoalsFor||0,rebGoalsAgainst:i.reboundGoalsAgainst||0,rebConversion:i.xReboundsFor>0?i.reboundGoalsFor/i.xReboundsFor*100:0}}getPhysicalMetrics(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);if(!i)return null;const l=(i.iceTime||1)/60,c=i.shotAttemptsFor||0,h=i.shotAttemptsAgainst||0;return{blockedShots:i.blockedShotAttemptsFor||0,blockedShotsAgainst:i.blockedShotAttemptsAgainst||0,blockingRate:h>0?i.blockedShotAttemptsAgainst/h*100:0,blocksGiven:c>0?i.blockedShotAttemptsFor/c*100:0,hits:i.hitsFor||0,hitsAgainst:i.hitsAgainst||0,hitsPer60:(i.hitsFor||0)/l,takeaways:i.takeawaysFor||0,giveaways:i.giveawaysFor||0,takeawaysPer60:(i.takeawaysFor||0)/l,giveawaysPer60:(i.giveawaysFor||0)/l,dZoneGiveaways:i.dZoneGiveawaysFor||0,dZoneGiveawaysPer60:(i.dZoneGiveawaysFor||0)/l}}getDangerZoneBreakdown(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);return i?{offense:{low:{shots:i.lowDangerShotsFor||0,xGoals:i.lowDangerxGoalsFor||0,goals:i.lowDangerGoalsFor||0},medium:{shots:i.mediumDangerShotsFor||0,xGoals:i.mediumDangerxGoalsFor||0,goals:i.mediumDangerGoalsFor||0},high:{shots:i.highDangerShotsFor||0,xGoals:i.highDangerxGoalsFor||0,goals:i.highDangerGoalsFor||0}},defense:{low:{shots:i.lowDangerShotsAgainst||0,xGoals:i.lowDangerxGoalsAgainst||0,goals:i.lowDangerGoalsAgainst||0},medium:{shots:i.mediumDangerShotsAgainst||0,xGoals:i.mediumDangerxGoalsAgainst||0,goals:i.mediumDangerGoalsAgainst||0},high:{shots:i.highDangerShotsAgainst||0,xGoals:i.highDangerxGoalsAgainst||0,goals:i.highDangerGoalsAgainst||0}}}:null}getRegressionIndicators(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);if(!i)return null;const a=i.shotsOnGoalFor||0,l=i.goalsFor||0,c=i.shotsOnGoalAgainst||0,h=i.goalsAgainst||0,f=a>0?l/a*100:0,g=c>0?(c-h)/c*100:0,v=f+g,b=i.scoreVenueAdjustedxGoalsFor||i.xGoalsFor||0,x=a>0?b/a*100:0,_=f-x;return{pdo:v,shootingPct:f,savePct:g,expectedShPct:x,shPctDiff:_,goalsVsExpected:l-b,isUnderperforming:l<b*.9,isOverperforming:l>b*1.1,regressionExpected:Math.abs(_)>1.5?_:0}}getPossessionMetrics(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);return i?{corsiPct:(i.corsiPercentage||.5)*100,fenwickPct:(i.fenwickPercentage||.5)*100,xGoalsPct:(i.xGoalsPercentage||.5)*100,shotAttempts:i.shotAttemptsFor||0,shotAttemptsAgainst:i.shotAttemptsAgainst||0,faceoffWins:i.faceOffsWonFor||0,faceoffLosses:i.faceOffsWonAgainst||0,faceoffPct:i.faceOffsWonFor+i.faceOffsWonAgainst>0?i.faceOffsWonFor/(i.faceOffsWonFor+i.faceOffsWonAgainst)*100:50}:null}getTier(e){return!e||e<1?"AVERAGE":e<=3?"ELITE":e<=10?"STRONG":e<=22?"AVERAGE":"WEAK"}getStatWithContext(e,t,i="5on5",a=!0){const l=this.dataProcessor.getTeamData(e,i);if(!l)return null;const c=l[t];if(c==null)return null;const h=this.getLeagueRank(e,t,i,a),f=this.getPercentileRank(e,t,i),g=this.leagueAverages[t]||0;return{value:c,rank:h,percentile:f,leagueAvg:g,vsLeague:c-g,vsLeaguePct:g>0?(c-g)/g*100:0,tier:this.getTier(h)}}getSpecialTeamsMetrics(e){const t=this.dataProcessor.getTeamData(e,"5on4"),i=this.dataProcessor.getTeamData(e,"4on5");return!t&&!i?null:{powerPlay:t?{xGF_per60:t.xGF_per60||0,hdXgF_per60:t.highDangerxGoalsFor?t.highDangerxGoalsFor/(t.iceTime/3600):0,rank:this.getLeagueRank(e,"xGF_per60","5on4",!0)}:null,penaltyKill:i?{xGA_per60:i.xGA_per60||0,hdXgA_per60:i.highDangerxGoalsAgainst?i.highDangerxGoalsAgainst/(i.iceTime/3600):0,rank:this.getLeagueRank(e,"xGA_per60","4on5",!1)}:null}}getGoalieMetrics(e,t){if(!t)return null;const i=t.getGoaliesByTeam(e);if(!i||i.length===0)return null;let a=0,l=0,c=0;return i.forEach(h=>{a+=h.goalsagainstextexpected||0,l+=h.highDangerSavePercentage||0,c++}),{avgGSAE:c>0?a/c:0,avgHDSavePercentage:c>0?l/c:0,goalieCount:c}}}class wM{constructor(e){this.analyzer=e}getKeyFactors(e,t,i="TOTAL"){return i==="TOTAL"?this.getTotalBetFactors(e,t):i==="MONEYLINE"?this.getMoneylineFactors(e,t):i==="PUCKLINE"?this.getPucklineFactors(e,t):[]}getTotalBetFactors(e,t){const i=[],a=this.calculateHighDangerFactor(e,t);a&&i.push(a);const l=this.calculateReboundFactor(e,t);l&&i.push(l);const c=this.calculatePhysicalFactor(e,t);c&&i.push(c);const h=this.calculateDisciplineFactor(e,t);h&&i.push(h);const f=this.calculateSpecialTeamsFactor(e,t);f&&i.push(f);const g=this.calculateRegressionFactor(e,t);return g&&i.push(g),i}calculateHighDangerFactor(e,t){const i=this.analyzer.getHighDangerMetrics(e),a=this.analyzer.getHighDangerMetrics(t);if(!i||!a)return null;const l=i.hdXgfPer60-a.hdXgaPer60,c=a.hdXgfPer60-i.hdXgaPer60,f=(l+c)/2*.25,g=this.analyzer.getLeagueRank(e,"highDangerxGoalsFor","5on5",!0),v=this.analyzer.getLeagueRank(t,"highDangerxGoalsAgainst","5on5",!1),b=l>c?e:c>l?t:"even";return{name:"High-Danger Shot Quality",importance:"CRITICAL",stars:3,impact:f,awayMetric:{value:i.hdXgfPer60,rank:g,label:`${e} Offense (HD-xGF/60)`,detail:`${i.hdGoalsFor} HD goals scored`},homeMetric:{value:a.hdXgaPer60,rank:v,label:`${t} Defense (HD-xGA/60)`,detail:`${a.hdGoalsAgainst} HD goals allowed`},leagueAvg:this.analyzer.leagueAverages.hdXgfPer60||.85,explanation:b==="even"?"Evenly matched high-danger shot creation and prevention. Both teams effective in key scoring areas.":`${b} has the edge in high-danger situations. ${Math.abs(f)>.05?`Quality scoring chances favor this matchup by ~${Math.abs(f*3).toFixed(1)} HD shots/game.`:"Marginal difference in quality chances."}`,dataPoints:{awayHDShots:i.hdShotsFor,homeHDAllowed:a.hdShotsAgainst,awayAdvantage:l,homeAdvantage:c}}}calculateReboundFactor(e,t){const i=this.analyzer.getReboundMetrics(e),a=this.analyzer.getReboundMetrics(t);if(!i||!a)return null;const l=i.rebXgfPer60-a.rebXgaPer60,c=a.rebXgfPer60-i.rebXgaPer60,f=(l+c)/2*.15,g=l>c?e:c>l?t:"even";return{name:"Rebound Control & Second Chances",importance:"CRITICAL",stars:3,impact:f,awayMetric:{value:i.rebXgfPer60,rank:this.analyzer.getLeagueRank(e,"xReboundsFor","5on5",!0),label:`${e} Offense (Reb xGF/60)`,detail:`${i.rebGoalsFor} rebound goals scored`},homeMetric:{value:a.rebXgaPer60,rank:this.analyzer.getLeagueRank(t,"xReboundsAgainst","5on5",!1),label:`${t} Defense (Reb xGA/60)`,detail:`${a.rebGoalsAgainst} rebound goals allowed`},leagueAvg:this.analyzer.leagueAverages.rebXgfPer60||10,explanation:g==="even"?"Evenly matched rebound creation and control. Expect typical second-chance opportunities.":`${g} creates more second-chance opportunities in this matchup. ${Math.abs(f)>.05?`Could add ~${Math.abs(f*2).toFixed(1)} extra scoring chances.`:"Minor impact on total scoring."}`,dataPoints:{awayRebGoals:i.rebGoalsFor,homeRebAllowed:a.rebGoalsAgainst,awayAdvantage:l,homeAdvantage:c}}}calculatePhysicalFactor(e,t){const i=this.analyzer.getPhysicalMetrics(e),a=this.analyzer.getPhysicalMetrics(t);if(!i||!a)return null;a.blockedShotsAgainst,i.blockedShotsAgainst;const l=this.analyzer.leagueAverages.blocksAgainstPer60||30,h=-(((i.blockingRate+a.blockingRate)/2-l)/5)*.08,f=this.analyzer.getLeagueRank(t,"blockedShotAttemptsAgainst","5on5",!0);return{name:"Shot Blocking & Physical Defense",importance:"HIGH",stars:2,impact:h,awayMetric:{value:i.blockingRate,label:`${e} Shot Block %`,detail:`${i.blockedShotsAgainst} blocks`},homeMetric:{value:a.blockingRate,rank:f,label:`${t} Shot Block %`,detail:`${a.blockedShotsAgainst} blocks`},leagueAvg:l,explanation:`Physical teams that block shots effectively reduce scoring chances. ${h<0?`Above-average blocking removes ${Math.abs(h*10).toFixed(1)} shot attempts/game.`:"Below-average blocking allows more dangerous attempts."}`,dataPoints:{awayBlocks:i.blockedShotsAgainst,homeBlocks:a.blockedShotsAgainst,awayHits:i.hits,homeHits:a.hits}}}calculateDisciplineFactor(e,t){const i=this.analyzer.getPhysicalMetrics(e),a=this.analyzer.getPhysicalMetrics(t);if(!i||!a)return null;const l=this.analyzer.leagueAverages.dZoneGiveawaysFor||12,c=(i.dZoneGiveawaysPer60+a.dZoneGiveawaysPer60)/2,f=(l-c)*.02,g=this.analyzer.leagueAverages.takeawaysFor||7,b=((i.takeawaysPer60+a.takeawaysPer60)/2-g)*.015,x=f+b;return{name:"Defensive Zone Discipline",importance:"HIGH",stars:2,impact:-Math.abs(x),awayMetric:{value:i.dZoneGiveaways,label:`${e} DZ Giveaways`,detail:`${i.takeaways} takeaways`},homeMetric:{value:a.dZoneGiveaways,label:`${t} DZ Giveaways`,detail:`${a.takeaways} takeaways`},leagueAvg:l,explanation:`Careful puck management in the defensive zone prevents high-danger chances. ${x<0?"Both teams are disciplined, limiting turnovers.":"Defensive mistakes create extra opportunities."}`,dataPoints:{awayDZGA:i.dZoneGiveaways,homeDZGA:a.dZoneGiveaways,awayTakeaways:i.takeaways,homeTakeaways:a.takeaways}}}calculateSpecialTeamsFactor(e,t){const i=this.analyzer.getHighDangerMetrics(e,"5on4"),a=this.analyzer.getHighDangerMetrics(t,"4on5"),l=this.analyzer.getHighDangerMetrics(t,"5on4"),c=this.analyzer.getHighDangerMetrics(e,"4on5");if(!i||!a||!l||!c)return null;const h=(i.hdXgfPer60||0)-(a.hdXgaPer60||0),f=(l.hdXgfPer60||0)-(c.hdXgaPer60||0),v=(h+f)/2*.07;return{name:"Special Teams Matchup",importance:"HIGH",stars:2,impact:v,awayMetric:{value:i.hdXgfPer60||0,label:`${e} PP HD-xGF/60`,detail:`vs ${a.hdXgaPer60?.toFixed(2)||0} PK`},homeMetric:{value:l.hdXgfPer60||0,label:`${t} PP HD-xGF/60`,detail:`vs ${c.hdXgaPer60?.toFixed(2)||0} PK`},leagueAvg:8.5,explanation:`Power plays account for ~7% of game time but can swing totals significantly. ${Math.abs(v)<.1?"Both matchups are balanced - PP and PK quality neutralize.":v>0?`Power plays have the advantage, adding ${v.toFixed(2)} expected goals.`:"Penalty kills are dominant, limiting PP opportunities."}`,dataPoints:{awayPPQuality:i.hdXgfPer60,homePKQuality:a.hdXgaPer60,homePPQuality:l.hdXgfPer60,awayPKQuality:c.hdXgaPer60}}}calculateRegressionFactor(e,t){const i=this.analyzer.getRegressionIndicators(e),a=this.analyzer.getRegressionIndicators(t);if(!i||!a)return null;const l=i.goalsVsExpected/(i.gamesSoFar||8),c=a.goalsVsExpected/(a.gamesSoFar||8),h=(l+c)*-.4;return{name:"Shooting Talent vs Luck",importance:"MODERATE",stars:1,impact:h,awayMetric:{value:i.shootingPct,label:`${e} Shooting %`,detail:`${i.pdo.toFixed(1)} PDO`},homeMetric:{value:a.shootingPct,label:`${t} Shooting %`,detail:`${a.pdo.toFixed(1)} PDO`},leagueAvg:i.expectedShPct||10,explanation:`Teams shooting ${i.isUnderperforming||a.isUnderperforming?"below":"above"} their expected rates should regress toward the mean. ${h<0?`Cold shooting is due for a bounce-back, adding ~${Math.abs(h).toFixed(2)} goals.`:"Hot shooting should cool off slightly."}`,dataPoints:{awayPDO:i.pdo,homePDO:a.pdo,awayGoalsVsXg:i.goalsVsExpected,homeGoalsVsXg:a.goalsVsExpected}}}generateStory(e,t,i){if(!e||e.length===0)return"Analyzing statistical matchup...";const l=[...e].sort((_,w)=>Math.abs(w.impact)-Math.abs(_.impact)).slice(0,3),c=e.reduce((_,w)=>_+w.impact,0),h=c<0;let f="";const g=l[0];let v=null,b=null;if(g.awayMetric&&g.homeMetric){const _=g.name.includes("Against")||g.name.includes("Defense")?g.awayMetric.value<g.homeMetric.value:g.awayMetric.value>g.homeMetric.value;v=_?t:i,b=_?i:t}if(v&&g.awayMetric&&g.homeMetric){const _=v===t?g.awayMetric.value:g.homeMetric.value,w=b===t?g.awayMetric.value:g.homeMetric.value;if(g.name.includes("Expected Goals")||g.name.includes("xGF")){const E=_>2.7?"elite":_>2.5?"strong":"solid";f+=`${v}'s ${E} offense (${_.toFixed(2)} xGF/60) `,f+=`faces ${b}'s defense (${w.toFixed(2)} xGA/60). `}else if(g.name.includes("Against")||g.name.includes("Defense")){const E=_<2.3?"elite":_<2.5?"strong":"solid";f+=`${v}'s ${E} defense (${_.toFixed(2)} xGA/60) `,f+=`shuts down ${b}'s attack (${w.toFixed(2)} xGF/60). `}else f+=`${v} holds edge in ${g.name.toLowerCase()}. `}else f+=`${g.name} heavily influences this matchup. `;if(l.length>1&&l[1].awayMetric&&l[1].homeMetric){const _=l[1],E=(_.name.includes("Against")||_.name.includes("Defense")?_.awayMetric.value<_.homeMetric.value:_.awayMetric.value>_.homeMetric.value)?t:i;if(_.name.includes("Power Play")||_.name.includes("PP"))f+=`${E}'s power play adds scoring threat. `;else if(_.name.includes("PDO")||_.name.includes("Regression")){const P=E===t?_.awayMetric.value:_.homeMetric.value;P>102?f+=`${E} (PDO ${P.toFixed(1)}) due for regression. `:P<98&&(f+=`${E} (PDO ${P.toFixed(1)}) primed for bounce-back. `)}}const x=Math.abs(c);if(x>.4){const _=h?"UNDER":"OVER";f+=`These matchup advantages create ${x.toFixed(1)}-goal edge favoring ${_}.`}else x>.2?f+=`Combined factors tilt toward ${h?"defensive":"offensive"} edge.`:f+="Evenly matched teams, market line is efficient.";return f}calculateTotalImpact(e){return!e||e.length===0?0:e.reduce((t,i)=>t+i.impact,0)}getMoneylineFactors(e,t){const i=[],a=this.calculateExpectedGoalsDifferential(e,t);a&&i.push(a);const l=this.calculateGoalieAdvantage(e,t);l&&i.push(l);const c=this.calculateOffensiveRating(e,t);c&&i.push(c);const h=this.calculateDefensiveRating(e,t);h&&i.push(h);const f=this.calculateSpecialTeamsEdge(e,t);f&&i.push(f);const g=this.calculatePossessionAdvantage(e,t);return g&&i.push(g),i}calculateExpectedGoalsDifferential(e,t){const i=this.analyzer.dataProcessor.getTeamData(e,"5on5"),a=this.analyzer.dataProcessor.getTeamData(t,"5on5");if(!i||!a)return null;const l=i.iceTime/60,c=a.iceTime/60,h=(i.xGoalsFor||0)/l*60,f=(i.xGoalsAgainst||0)/l*60,g=(a.xGoalsFor||0)/c*60,v=(a.xGoalsAgainst||0)/c*60,b=(h+v)/2,x=(g+f)/2,_=b-x;return{name:"Expected Goals",importance:"CRITICAL",stars:3,impact:_,awayMetric:{value:b,rank:this.analyzer.getLeagueRank(e,"xGoalsFor","5on5",!0),label:`${e} Expected Goals`,detail:`${h.toFixed(2)} xGF/60`},homeMetric:{value:x,rank:this.analyzer.getLeagueRank(t,"xGoalsFor","5on5",!0),label:`${t} Expected Goals`,detail:`${g.toFixed(2)} xGF/60`},leagueAvg:2.8,explanation:_>0?`${e} projects to score ${Math.abs(_).toFixed(2)} more goals based on shot quality.`:`${t} projects to score ${Math.abs(_).toFixed(2)} more goals based on shot quality.`,dataPoints:{awayXgf:h,awayXga:f,homeXgf:g,homeXga:v}}}calculateGoalieAdvantage(e,t){return null}calculateOffensiveRating(e,t){const i=this.analyzer.getHighDangerMetrics(e),a=this.analyzer.getHighDangerMetrics(t);if(!i||!a)return null;const l=i.hdXgfPer60||0,c=a.hdXgfPer60||0,h=l-c;return{name:"Offensive Rating",importance:"HIGH",stars:2,impact:h*.2,awayMetric:{value:l,rank:this.analyzer.getLeagueRank(e,"highDangerxGoalsFor","5on5",!0),label:`${e} HD-xGF/60`,detail:`${i.hdGoalsFor} HD goals`},homeMetric:{value:c,rank:this.analyzer.getLeagueRank(t,"highDangerxGoalsFor","5on5",!0),label:`${t} HD-xGF/60`,detail:`${a.hdGoalsFor} HD goals`},leagueAvg:.85,explanation:h>0?`${e} generates ${(h/c*100).toFixed(0)}% more high-danger chances.`:`${t} generates ${(Math.abs(h)/l*100).toFixed(0)}% more high-danger chances.`,dataPoints:{awayHDGoals:i.hdGoalsFor,homeHDGoals:a.hdGoalsFor}}}calculateDefensiveRating(e,t){const i=this.analyzer.getHighDangerMetrics(e),a=this.analyzer.getHighDangerMetrics(t);if(!i||!a)return null;const l=i.hdXgaPer60||0,c=a.hdXgaPer60||0,h=c-l;return{name:"Defensive Rating",importance:"HIGH",stars:2,impact:h*.2,awayMetric:{value:l,rank:this.analyzer.getLeagueRank(e,"highDangerxGoalsAgainst","5on5",!1),label:`${e} HD-xGA/60`,detail:`${i.hdGoalsAgainst} HD goals allowed`},homeMetric:{value:c,rank:this.analyzer.getLeagueRank(t,"highDangerxGoalsAgainst","5on5",!1),label:`${t} HD-xGA/60`,detail:`${a.hdGoalsAgainst} HD goals allowed`},leagueAvg:.85,explanation:h>0?`${e} allows ${(h/c*100).toFixed(0)}% fewer high-danger chances.`:`${t} allows ${(Math.abs(h)/l*100).toFixed(0)}% fewer high-danger chances.`,dataPoints:{awayHDAllowed:i.hdGoalsAgainst,homeHDAllowed:a.hdGoalsAgainst}}}calculateSpecialTeamsEdge(e,t){const i=this.analyzer.getHighDangerMetrics(e,"5on4"),a=this.analyzer.getHighDangerMetrics(t,"5on4");if(!i||!a)return null;const l=i.hdXgfPer60||0,c=a.hdXgfPer60||0,h=l-c;return{name:"Special Teams",importance:"MODERATE",stars:1,impact:h*.05,awayMetric:{value:l,label:`${e} PP Quality`,detail:`${l.toFixed(2)} HD-xGF/60`},homeMetric:{value:c,label:`${t} PP Quality`,detail:`${c.toFixed(2)} HD-xGF/60`},leagueAvg:8.5,explanation:h>0?`${e} has superior power play execution.`:`${t} has superior power play execution.`,dataPoints:{awayPP:l,homePP:c}}}calculatePossessionAdvantage(e,t){const i=this.analyzer.getPossessionMetrics(e),a=this.analyzer.getPossessionMetrics(t);if(!i||!a)return null;const l=i.corsiForPct||50,c=a.corsiForPct||50,h=l-c;return{name:"Possession & Control",importance:"MODERATE",stars:1,impact:h*.02,awayMetric:{value:l,label:`${e} Corsi%`,detail:`${i.shotsForPct?.toFixed(1)}% shots`},homeMetric:{value:c,label:`${t} Corsi%`,detail:`${a.shotsForPct?.toFixed(1)}% shots`},leagueAvg:50,explanation:h>0?`${e} controls ${Math.abs(h).toFixed(1)}% more of the play.`:`${t} controls ${Math.abs(h).toFixed(1)}% more of the play.`,dataPoints:{awayCF:l,homeCF:c,awaySF:i.shotsForPct,homeSF:a.shotsForPct}}}getPucklineFactors(e,t){return[]}}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),jT=n=>{const e=RM(n);return e.charAt(0).toUpperCase()+e.slice(1)},KA=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),IM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=H.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...h},f)=>H.createElement("svg",{ref:f,...CM,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:KA("lucide",a),...!l&&!IM(h)&&{"aria-hidden":"true"},...h},[...c.map(([g,v])=>H.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(n,e)=>{const t=H.forwardRef(({className:i,...a},l)=>H.createElement(jM,{ref:l,iconNode:e,className:KA(`lucide-${EM(jT(n))}`,`lucide-${n}`,i),...a}));return t.displayName=jT(n),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Va=We("activity",DM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],YA=We("award",kM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Mc=We("book-open",PM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Hc=We("calendar",MM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Cy=We("chart-column",OM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],VM=We("chart-line",NM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jy=We("chevron-down",FM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],XA=We("chevron-left",LM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],QA=We("chevron-right",BM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Dy=We("chevron-up",zM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ZA=We("circle-alert",UM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],JA=We("circle-check-big",GM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],HM=We("code",$M);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],qM=We("database",WM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DT=We("dollar-sign",KM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],XM=We("download",YM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],uf=We("flame",QM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],up=We("info",ZM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],eO=We("lightbulb",JM);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],nO=We("menu",tO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],rO=We("phone",iO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],Ph=We("scale",sO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],oO=We("search",aO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],cO=We("share-2",lO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],li=We("shield",uO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],r0=We("snowflake",dO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fO=We("star",hO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wa=We("target",mO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ki=We("trending-up",gO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ou=We("triangle-alert",pO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ew=We("trophy",yO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xO=We("x",vO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ky=We("zap",bO),TO=()=>{const n=XS(),[e,t]=H.useState(!1),[i,a]=H.useState(null),l=[{path:"/",label:"Today's Games",icon:Wa},{path:"/matchup-insights",label:"Matchup Insights",icon:VM},{path:"/dashboard",label:"Dashboard",icon:Cy},{path:"/performance",label:"Performance",icon:ki},{path:"/methodology",label:"Methodology",icon:Mc},{path:"/inspector",label:"Data Inspector",icon:oO}];return u.jsxs("nav",{style:{position:"sticky",top:0,zIndex:1e3,background:"rgba(17, 24, 39, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255, 255, 255, 0.06)",padding:"0.75rem 1.5rem"},children:[u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs(Nc,{to:"/",style:{fontSize:"1.25rem",fontWeight:"700",color:"#D4AF37",textDecoration:"none",display:"flex",alignItems:"center",gap:"0.5rem",letterSpacing:"-0.015em",transition:"color 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.color="#FFD700"},onMouseLeave:c=>{c.currentTarget.style.color="#D4AF37"},children:["🏒 ",u.jsx("span",{children:"NHL Savant"})]}),u.jsx("div",{className:"desktop-nav",style:{display:"none",gap:"0.625rem",alignItems:"center"},children:l.map(c=>{const h=c.icon,f=n.pathname===c.path,g=i===c.path;return u.jsxs(Nc,{to:c.path,onMouseEnter:()=>a(c.path),onMouseLeave:()=>a(null),style:{padding:"0.625rem 1.125rem",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"600",textDecoration:"none",color:f?"#D4AF37":g?"#FFD700":"rgba(255, 255, 255, 0.7)",background:f?"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)":g?"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.03) 100%)":"transparent",border:f?"1px solid rgba(212, 175, 55, 0.3)":"1px solid transparent",boxShadow:f?"0 4px 12px rgba(212, 175, 55, 0.2), 0 0 20px rgba(212, 175, 55, 0.1) inset":g?"0 4px 12px rgba(255, 255, 255, 0.1)":"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5rem",letterSpacing:"0.02em",transform:g?"translateY(-2px)":"translateY(0)",position:"relative",overflow:"hidden"},children:[f&&u.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent)",animation:"shimmer 3s infinite"}}),u.jsx(h,{size:16,strokeWidth:2.5}),c.label]},c.path)})}),u.jsx("button",{className:"mobile-menu-btn",onClick:()=>t(!e),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.625rem",background:e?"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.03) 100%)",border:e?"1px solid rgba(212, 175, 55, 0.3)":"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"10px",color:e?"#D4AF37":"rgba(255, 255, 255, 0.9)",cursor:"pointer",transition:"all 0.3s ease",boxShadow:e?"0 4px 12px rgba(212, 175, 55, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.2)"},onMouseEnter:c=>{e||(c.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%)",c.currentTarget.style.borderColor="rgba(255, 255, 255, 0.25)")},onMouseLeave:c=>{e||(c.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.03) 100%)",c.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)")},children:e?u.jsx(xO,{size:22,strokeWidth:2.5}):u.jsx(nO,{size:22,strokeWidth:2.5})})]}),e&&u.jsx("div",{className:"mobile-nav",style:{position:"absolute",top:"100%",left:0,right:0,background:"linear-gradient(135deg, rgba(26, 31, 46, 0.98) 0%, rgba(17, 24, 39, 0.98) 100%)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderBottom:"1px solid rgba(212, 175, 55, 0.15)",padding:"1rem",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"slideDown 0.3s ease-out"},children:l.map((c,h)=>{const f=c.icon,g=n.pathname===c.path;return u.jsxs(Nc,{to:c.path,onClick:()=>t(!1),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 1.25rem",borderRadius:"10px",fontSize:"1rem",fontWeight:"600",textDecoration:"none",color:g?"#D4AF37":"rgba(255, 255, 255, 0.8)",background:g?"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)":"transparent",border:g?"1px solid rgba(212, 175, 55, 0.3)":"1px solid transparent",boxShadow:g?"0 4px 12px rgba(212, 175, 55, 0.2)":"none",marginBottom:h<l.length-1?"0.5rem":0,transition:"all 0.3s ease",animation:`slideIn 0.3s ease-out ${h*.05}s both`},children:[u.jsx(f,{size:20,strokeWidth:2.5}),c.label,g&&u.jsx("div",{style:{marginLeft:"auto",width:"6px",height:"6px",borderRadius:"50%",background:"#D4AF37",boxShadow:"0 0 8px rgba(212, 175, 55, 0.6)"}})]},c.path)})}),u.jsx("style",{children:`
        @media (min-width: 768px) {
          .desktop-nav { display: flex !important; }
          .mobile-menu-btn { display: none !important; }
        }
        @media (max-width: 767px) {
          .desktop-nav { display: none !important; }
          .mobile-menu-btn { display: flex !important; }
        }
        
        /* Premium Animations */
        @keyframes shimmer {
          0% { left: -100%; }
          100% { left: 200%; }
        }
        
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateX(-20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        /* Smooth scroll behavior */
        html {
          scroll-behavior: smooth;
        }
      `})]})},SO=({dataProcessor:n,loading:e,error:t})=>{if(e)return u.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"animate-spin",children:u.jsx(qM,{className:"w-5 h-5 text-yellow-400"})}),u.jsx("span",{className:"text-gray-300",children:"Loading NHL data..."})]})});if(t)return u.jsx("div",{className:"bg-red-900/30 border border-red-500 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(ZA,{className:"w-5 h-5 text-red-400"}),u.jsx("span",{className:"text-red-300",children:t})]})});if(!n)return null;const i=n.processedData?.length||0,a=[...new Set(n.processedData.map(c=>c.name))].length,l=[...new Set(n.processedData.map(c=>c.situation))].length;return u.jsx("div",{className:"bg-gradient-to-r from-green-900/30 to-green-900/10 border border-green-500/50 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(JA,{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-green-300 mb-1",children:"Data Verified & Loaded"}),u.jsxs("div",{className:"grid grid-cols-3 gap-6 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-400",children:"Data Points: "}),u.jsx("span",{className:"font-bold text-white",children:i})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-400",children:"Teams: "}),u.jsx("span",{className:"font-bold text-white",children:a})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-400",children:"Situations: "}),u.jsx("span",{className:"font-bold text-white",children:l})]})]}),u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"All calculations verified and ready for analysis"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs text-gray-400",children:"Source:"}),u.jsx("p",{className:"text-xs text-gray-300 font-mono",children:"nhl_data.csv"})]})]})})},Py=H.createContext({});function My(n){const e=H.useRef(null);return e.current===null&&(e.current=n()),e.current}const Oy=typeof window<"u",tw=Oy?H.useLayoutEffect:H.useEffect,Gf=H.createContext(null);function Ny(n,e){n.indexOf(e)===-1&&n.push(e)}function Vy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Gr=(n,e,t)=>t>e?e:t<n?n:t;let Fy=()=>{};const $r={},nw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function iw(n){return typeof n=="object"&&n!==null}const rw=n=>/^0[^.\s]+$/u.test(n);function Ly(n){let e;return()=>(e===void 0&&(e=n()),e)}const ui=n=>n,_O=(n,e)=>t=>e(n(t)),Eu=(...n)=>n.reduce(_O),lu=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class By{constructor(){this.subscriptions=[]}add(e){return Ny(this.subscriptions,e),()=>Vy(this.subscriptions,e)}notify(e,t,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,t,i);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ur=n=>n*1e3,ci=n=>n/1e3;function sw(n,e){return e?n*(1e3/e):0}const aw=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,AO=1e-7,wO=12;function EO(n,e,t,i,a){let l,c,h=0;do c=e+(t-e)/2,l=aw(c,i,a)-n,l>0?t=c:e=c;while(Math.abs(l)>AO&&++h<wO);return c}function Ru(n,e,t,i){if(n===e&&t===i)return ui;const a=l=>EO(l,0,1,n,t);return l=>l===0||l===1?l:aw(a(l),e,i)}const ow=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,lw=n=>e=>1-n(1-e),cw=Ru(.33,1.53,.69,.99),zy=lw(cw),uw=ow(zy),dw=n=>(n*=2)<1?.5*zy(n):.5*(2-Math.pow(2,-10*(n-1))),Uy=n=>1-Math.sin(Math.acos(n)),hw=lw(Uy),fw=ow(Uy),RO=Ru(.42,0,1,1),IO=Ru(0,0,.58,1),mw=Ru(.42,0,.58,1),CO=n=>Array.isArray(n)&&typeof n[0]!="number",gw=n=>Array.isArray(n)&&typeof n[0]=="number",jO={linear:ui,easeIn:RO,easeInOut:mw,easeOut:IO,circIn:Uy,circInOut:fw,circOut:hw,backIn:zy,backInOut:uw,backOut:cw,anticipate:dw},DO=n=>typeof n=="string",kT=n=>{if(gw(n)){Fy(n.length===4);const[e,t,i,a]=n;return Ru(e,t,i,a)}else if(DO(n))return jO[n];return n},hh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function kO(n,e){let t=new Set,i=new Set,a=!1,l=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(v){c.has(v)&&(g.schedule(v),n()),v(h)}const g={schedule:(v,b=!1,x=!1)=>{const w=x&&a?t:i;return b&&c.add(v),w.has(v)||w.add(v),v},cancel:v=>{i.delete(v),c.delete(v)},process:v=>{if(h=v,a){l=!0;return}a=!0,[t,i]=[i,t],t.forEach(f),t.clear(),a=!1,l&&(l=!1,g.process(v))}};return g}const PO=40;function pw(n,e){let t=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=hh.reduce((L,ne)=>(L[ne]=kO(l),L),{}),{setup:h,read:f,resolveKeyframes:g,preUpdate:v,update:b,preRender:x,render:_,postRender:w}=c,E=()=>{const L=$r.useManualTiming?a.timestamp:performance.now();t=!1,$r.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(L-a.timestamp,PO),1)),a.timestamp=L,a.isProcessing=!0,h.process(a),f.process(a),g.process(a),v.process(a),b.process(a),x.process(a),_.process(a),w.process(a),a.isProcessing=!1,t&&e&&(i=!1,n(E))},P=()=>{t=!0,i=!0,a.isProcessing||n(E)};return{schedule:hh.reduce((L,ne)=>{const W=c[ne];return L[ne]=(q,D=!1,I=!1)=>(t||P(),W.schedule(q,D,I)),L},{}),cancel:L=>{for(let ne=0;ne<hh.length;ne++)c[hh[ne]].cancel(L)},state:a,steps:c}}const{schedule:ft,cancel:Hs,state:rn,steps:dp}=pw(typeof requestAnimationFrame<"u"?requestAnimationFrame:ui,!0);let Mh;function MO(){Mh=void 0}const Dn={now:()=>(Mh===void 0&&Dn.set(rn.isProcessing||$r.useManualTiming?rn.timestamp:performance.now()),Mh),set:n=>{Mh=n,queueMicrotask(MO)}},yw=n=>e=>typeof e=="string"&&e.startsWith(n),Gy=yw("--"),OO=yw("var(--"),$y=n=>OO(n)?NO.test(n.split("/*")[0].trim()):!1,NO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},cu={...Sl,transform:n=>Gr(0,1,n)},fh={...Sl,default:1},Wc=n=>Math.round(n*1e5)/1e5,Hy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function VO(n){return n==null}const FO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Wy=(n,e)=>t=>!!(typeof t=="string"&&FO.test(t)&&t.startsWith(n)||e&&!VO(t)&&Object.prototype.hasOwnProperty.call(t,e)),vw=(n,e,t)=>i=>{if(typeof i!="string")return i;const[a,l,c,h]=i.match(Hy);return{[n]:parseFloat(a),[e]:parseFloat(l),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},LO=n=>Gr(0,255,n),hp={...Sl,transform:n=>Math.round(LO(n))},Pa={test:Wy("rgb","red"),parse:vw("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+hp.transform(n)+", "+hp.transform(e)+", "+hp.transform(t)+", "+Wc(cu.transform(i))+")"};function BO(n){let e="",t="",i="",a="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),a=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),a=n.substring(4,5),e+=e,t+=t,i+=i,a+=a),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const s0={test:Wy("#"),parse:BO,transform:Pa.transform},Iu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Is=Iu("deg"),dr=Iu("%"),Ie=Iu("px"),zO=Iu("vh"),UO=Iu("vw"),PT={...dr,parse:n=>dr.parse(n)/100,transform:n=>dr.transform(n*100)},Wo={test:Wy("hsl","hue"),parse:vw("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+dr.transform(Wc(e))+", "+dr.transform(Wc(t))+", "+Wc(cu.transform(i))+")"},Ft={test:n=>Pa.test(n)||s0.test(n)||Wo.test(n),parse:n=>Pa.test(n)?Pa.parse(n):Wo.test(n)?Wo.parse(n):s0.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Pa.transform(n):Wo.transform(n),getAnimatableNone:n=>{const e=Ft.parse(n);return e.alpha=0,Ft.transform(e)}},GO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $O(n){return isNaN(n)&&typeof n=="string"&&(n.match(Hy)?.length||0)+(n.match(GO)?.length||0)>0}const xw="number",bw="color",HO="var",WO="var(",MT="${}",qO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uu(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},a=[];let l=0;const h=e.replace(qO,f=>(Ft.test(f)?(i.color.push(l),a.push(bw),t.push(Ft.parse(f))):f.startsWith(WO)?(i.var.push(l),a.push(HO),t.push(f)):(i.number.push(l),a.push(xw),t.push(parseFloat(f))),++l,MT)).split(MT);return{values:t,split:h,indexes:i,types:a}}function Tw(n){return uu(n).values}function Sw(n){const{split:e,types:t}=uu(n),i=e.length;return a=>{let l="";for(let c=0;c<i;c++)if(l+=e[c],a[c]!==void 0){const h=t[c];h===xw?l+=Wc(a[c]):h===bw?l+=Ft.transform(a[c]):l+=a[c]}return l}}const KO=n=>typeof n=="number"?0:Ft.test(n)?Ft.getAnimatableNone(n):n;function YO(n){const e=Tw(n);return Sw(n)(e.map(KO))}const Ws={test:$O,parse:Tw,createTransformer:Sw,getAnimatableNone:YO};function fp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function XO({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let a=0,l=0,c=0;if(!e)a=l=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;a=fp(f,h,n+1/3),l=fp(f,h,n),c=fp(f,h,n-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:i}}function df(n,e){return t=>t>0?e:n}const mt=(n,e,t)=>n+(e-n)*t,mp=(n,e,t)=>{const i=n*n,a=t*(e*e-i)+i;return a<0?0:Math.sqrt(a)},QO=[s0,Pa,Wo],ZO=n=>QO.find(e=>e.test(n));function OT(n){const e=ZO(n);if(!e)return!1;let t=e.parse(n);return e===Wo&&(t=XO(t)),t}const NT=(n,e)=>{const t=OT(n),i=OT(e);if(!t||!i)return df(n,e);const a={...t};return l=>(a.red=mp(t.red,i.red,l),a.green=mp(t.green,i.green,l),a.blue=mp(t.blue,i.blue,l),a.alpha=mt(t.alpha,i.alpha,l),Pa.transform(a))},a0=new Set(["none","hidden"]);function JO(n,e){return a0.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function e8(n,e){return t=>mt(n,e,t)}function qy(n){return typeof n=="number"?e8:typeof n=="string"?$y(n)?df:Ft.test(n)?NT:i8:Array.isArray(n)?_w:typeof n=="object"?Ft.test(n)?NT:t8:df}function _w(n,e){const t=[...n],i=t.length,a=n.map((l,c)=>qy(l)(l,e[c]));return l=>{for(let c=0;c<i;c++)t[c]=a[c](l);return t}}function t8(n,e){const t={...n,...e},i={};for(const a in t)n[a]!==void 0&&e[a]!==void 0&&(i[a]=qy(n[a])(n[a],e[a]));return a=>{for(const l in i)t[l]=i[l](a);return t}}function n8(n,e){const t=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=n.indexes[l][i[l]],h=n.values[c]??0;t[a]=h,i[l]++}return t}const i8=(n,e)=>{const t=Ws.createTransformer(e),i=uu(n),a=uu(e);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?a0.has(n)&&!a.values.length||a0.has(e)&&!i.values.length?JO(n,e):Eu(_w(n8(i,a),a.values),t):df(n,e)};function Aw(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?mt(n,e,t):qy(n)(n,e)}const r8=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>ft.update(e,t),stop:()=>Hs(e),now:()=>rn.isProcessing?rn.timestamp:Dn.now()}},ww=(n,e,t=10)=>{let i="";const a=Math.max(Math.round(e/t),2);for(let l=0;l<a;l++)i+=Math.round(n(l/(a-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},hf=2e4;function Ky(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<hf;)e+=t,i=n.next(e);return e>=hf?1/0:e}function s8(n,e=100,t){const i=t({...n,keyframes:[0,e]}),a=Math.min(Ky(i),hf);return{type:"keyframes",ease:l=>i.next(a*l).value/e,duration:ci(a)}}const a8=5;function Ew(n,e,t){const i=Math.max(e-a8,0);return sw(t-n(i),e-i)}const bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gp=.001;function o8({duration:n=bt.duration,bounce:e=bt.bounce,velocity:t=bt.velocity,mass:i=bt.mass}){let a,l,c=1-e;c=Gr(bt.minDamping,bt.maxDamping,c),n=Gr(bt.minDuration,bt.maxDuration,ci(n)),c<1?(a=g=>{const v=g*c,b=v*n,x=v-t,_=o0(g,c),w=Math.exp(-b);return gp-x/_*w},l=g=>{const b=g*c*n,x=b*t+t,_=Math.pow(c,2)*Math.pow(g,2)*n,w=Math.exp(-b),E=o0(Math.pow(g,2),c);return(-a(g)+gp>0?-1:1)*((x-_)*w)/E}):(a=g=>{const v=Math.exp(-g*n),b=(g-t)*n+1;return-gp+v*b},l=g=>{const v=Math.exp(-g*n),b=(t-g)*(n*n);return v*b});const h=5/n,f=c8(a,l,h);if(n=ur(n),isNaN(f))return{stiffness:bt.stiffness,damping:bt.damping,duration:n};{const g=Math.pow(f,2)*i;return{stiffness:g,damping:c*2*Math.sqrt(i*g),duration:n}}}const l8=12;function c8(n,e,t){let i=t;for(let a=1;a<l8;a++)i=i-n(i)/e(i);return i}function o0(n,e){return n*Math.sqrt(1-e*e)}const u8=["duration","bounce"],d8=["stiffness","damping","mass"];function VT(n,e){return e.some(t=>n[t]!==void 0)}function h8(n){let e={velocity:bt.velocity,stiffness:bt.stiffness,damping:bt.damping,mass:bt.mass,isResolvedFromDuration:!1,...n};if(!VT(n,d8)&&VT(n,u8))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),a=i*i,l=2*Gr(.05,1,1-(n.bounce||0))*Math.sqrt(a);e={...e,mass:bt.mass,stiffness:a,damping:l}}else{const t=o8(n);e={...e,...t,mass:bt.mass},e.isResolvedFromDuration=!0}return e}function ff(n=bt.visualDuration,e=bt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:a}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:l},{stiffness:f,damping:g,mass:v,duration:b,velocity:x,isResolvedFromDuration:_}=h8({...t,velocity:-ci(t.velocity||0)}),w=x||0,E=g/(2*Math.sqrt(f*v)),P=c-l,N=ci(Math.sqrt(f/v)),V=Math.abs(P)<5;i||(i=V?bt.restSpeed.granular:bt.restSpeed.default),a||(a=V?bt.restDelta.granular:bt.restDelta.default);let L;if(E<1){const W=o0(N,E);L=q=>{const D=Math.exp(-E*N*q);return c-D*((w+E*N*P)/W*Math.sin(W*q)+P*Math.cos(W*q))}}else if(E===1)L=W=>c-Math.exp(-N*W)*(P+(w+N*P)*W);else{const W=N*Math.sqrt(E*E-1);L=q=>{const D=Math.exp(-E*N*q),I=Math.min(W*q,300);return c-D*((w+E*N*P)*Math.sinh(I)+W*P*Math.cosh(I))/W}}const ne={calculatedDuration:_&&b||null,next:W=>{const q=L(W);if(_)h.done=W>=b;else{let D=W===0?w:0;E<1&&(D=W===0?ur(w):Ew(L,W,q));const I=Math.abs(D)<=i,C=Math.abs(c-q)<=a;h.done=I&&C}return h.value=h.done?c:q,h},toString:()=>{const W=Math.min(Ky(ne),hf),q=ww(D=>ne.next(W*D).value,W,30);return W+"ms "+q},toTransition:()=>{}};return ne}ff.applyToOptions=n=>{const e=s8(n,100,ff);return n.ease=e.ease,n.duration=ur(e.duration),n.type="keyframes",n};function l0({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:h,max:f,restDelta:g=.5,restSpeed:v}){const b=n[0],x={done:!1,value:b},_=I=>h!==void 0&&I<h||f!==void 0&&I>f,w=I=>h===void 0?f:f===void 0||Math.abs(h-I)<Math.abs(f-I)?h:f;let E=t*e;const P=b+E,N=c===void 0?P:c(P);N!==P&&(E=N-b);const V=I=>-E*Math.exp(-I/i),L=I=>N+V(I),ne=I=>{const C=V(I),F=L(I);x.done=Math.abs(C)<=g,x.value=x.done?N:F};let W,q;const D=I=>{_(x.value)&&(W=I,q=ff({keyframes:[x.value,w(x.value)],velocity:Ew(L,I,x.value),damping:a,stiffness:l,restDelta:g,restSpeed:v}))};return D(0),{calculatedDuration:null,next:I=>{let C=!1;return!q&&W===void 0&&(C=!0,ne(I),D(I)),W!==void 0&&I>=W?q.next(I-W):(!C&&ne(I),x)}}}function f8(n,e,t){const i=[],a=t||$r.mix||Aw,l=n.length-1;for(let c=0;c<l;c++){let h=a(n[c],n[c+1]);if(e){const f=Array.isArray(e)?e[c]||ui:e;h=Eu(f,h)}i.push(h)}return i}function m8(n,e,{clamp:t=!0,ease:i,mixer:a}={}){const l=n.length;if(Fy(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=f8(e,i,a),f=h.length,g=v=>{if(c&&v<n[0])return e[0];let b=0;if(f>1)for(;b<n.length-2&&!(v<n[b+1]);b++);const x=lu(n[b],n[b+1],v);return h[b](x)};return t?v=>g(Gr(n[0],n[l-1],v)):g}function g8(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const a=lu(0,e,i);n.push(mt(t,1,a))}}function p8(n){const e=[0];return g8(e,n.length-1),e}function y8(n,e){return n.map(t=>t*e)}function v8(n,e){return n.map(()=>e||mw).splice(0,n.length-1)}function qc({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const a=CO(i)?i.map(kT):kT(i),l={done:!1,value:e[0]},c=y8(t&&t.length===e.length?t:p8(e),n),h=m8(c,e,{ease:Array.isArray(a)?a:v8(e,a)});return{calculatedDuration:n,next:f=>(l.value=h(f),l.done=f>=n,l)}}const x8=n=>n!==null;function Yy(n,{repeat:e,repeatType:t="loop"},i,a=1){const l=n.filter(x8),h=a<0||e&&t!=="loop"&&e%2===1?0:l.length-1;return!h||i===void 0?l[h]:i}const b8={decay:l0,inertia:l0,tween:qc,keyframes:qc,spring:ff};function Rw(n){typeof n.type=="string"&&(n.type=b8[n.type])}class Xy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const T8=n=>n/100;class Qy extends Xy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Dn.now()&&this.tick(Dn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Rw(e);const{type:t=qc,repeat:i=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=e;let{keyframes:h}=e;const f=t||qc;f!==qc&&typeof h[0]!="number"&&(this.mixKeyframes=Eu(T8,Aw(h[0],h[1])),h=[0,100]);const g=f({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...h].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=Ky(g));const{calculatedDuration:v}=g;this.calculatedDuration=v,this.resolvedDuration=v+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=g}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:a,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:g=0,keyframes:v,repeat:b,repeatType:x,repeatDelay:_,type:w,onUpdate:E,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const N=this.currentTime-g*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?N<0:N>a;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let L=this.currentTime,ne=i;if(b){const I=Math.min(this.currentTime,a)/h;let C=Math.floor(I),F=I%1;!F&&I>=1&&(F=1),F===1&&C--,C=Math.min(C,b+1),!!(C%2)&&(x==="reverse"?(F=1-F,_&&(F-=_/h)):x==="mirror"&&(ne=c)),L=Gr(0,1,F)*h}const W=V?{done:!1,value:v[0]}:ne.next(L);l&&(W.value=l(W.value));let{done:q}=W;!V&&f!==null&&(q=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return D&&w!==l0&&(W.value=Yy(v,this.options,P,this.speed)),E&&E(W.value),D&&this.finish(),W}then(e,t){return this.finished.then(e,t)}get duration(){return ci(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ci(e)}get time(){return ci(this.currentTime)}set time(e){e=ur(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Dn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ci(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=r8,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Dn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function S8(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ma=n=>n*180/Math.PI,c0=n=>{const e=Ma(Math.atan2(n[1],n[0]));return u0(e)},_8={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:c0,rotateZ:c0,skewX:n=>Ma(Math.atan(n[1])),skewY:n=>Ma(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},u0=n=>(n=n%360,n<0&&(n+=360),n),FT=c0,LT=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),BT=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),A8={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:LT,scaleY:BT,scale:n=>(LT(n)+BT(n))/2,rotateX:n=>u0(Ma(Math.atan2(n[6],n[5]))),rotateY:n=>u0(Ma(Math.atan2(-n[2],n[0]))),rotateZ:FT,rotate:FT,skewX:n=>Ma(Math.atan(n[4])),skewY:n=>Ma(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function d0(n){return n.includes("scale")?1:0}function h0(n,e){if(!n||n==="none")return d0(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(t)i=A8,a=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=_8,a=h}if(!a)return d0(e);const l=i[e],c=a[1].split(",").map(E8);return typeof l=="function"?l(c):c[l]}const w8=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return h0(t,e)};function E8(n){return parseFloat(n.trim())}const _l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Al=new Set(_l),zT=n=>n===Sl||n===Ie,R8=new Set(["x","y","z"]),I8=_l.filter(n=>!R8.has(n));function C8(n){const e=[];return I8.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Fa={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>h0(e,"x"),y:(n,{transform:e})=>h0(e,"y")};Fa.translateX=Fa.x;Fa.translateY=Fa.y;const La=new Set;let f0=!1,m0=!1,g0=!1;function Iw(){if(m0){const n=Array.from(La).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const a=C8(i);a.length&&(t.set(i,a),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const a=t.get(i);a&&a.forEach(([l,c])=>{i.getValue(l)?.set(c)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}m0=!1,f0=!1,La.forEach(n=>n.complete(g0)),La.clear()}function Cw(){La.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(m0=!0)})}function j8(){g0=!0,Cw(),Iw(),g0=!1}class Zy{constructor(e,t,i,a,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(La.add(this),f0||(f0=!0,ft.read(Cw),ft.resolveKeyframes(Iw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:a}=this;if(e[0]===null){const l=a?.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&t){const h=i.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),a&&l===void 0&&a.set(e[0])}S8(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),La.delete(this)}cancel(){this.state==="scheduled"&&(La.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const D8=n=>n.startsWith("--");function k8(n,e,t){D8(e)?n.style.setProperty(e,t):n.style[e]=t}const P8=Ly(()=>window.ScrollTimeline!==void 0),M8={};function O8(n,e){const t=Ly(n);return()=>M8[e]??t()}const jw=O8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Oc=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,UT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Oc([0,.65,.55,1]),circOut:Oc([.55,0,1,.45]),backIn:Oc([.31,.01,.66,-.59]),backOut:Oc([.33,1.53,.69,.99])};function Dw(n,e){if(n)return typeof n=="function"?jw()?ww(n,e):"ease-out":gw(n)?Oc(n):Array.isArray(n)?n.map(t=>Dw(t,e)||UT.easeOut):UT[n]}function N8(n,e,t,{delay:i=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:h="easeOut",times:f}={},g=void 0){const v={[e]:t};f&&(v.offset=f);const b=Dw(h,a);Array.isArray(b)&&(v.easing=b);const x={delay:i,duration:a,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return g&&(x.pseudoElement=g),n.animate(v,x)}function kw(n){return typeof n=="function"&&"applyToOptions"in n}function V8({type:n,...e}){return kw(n)&&jw()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class F8 extends Xy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:a,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:h,onComplete:f}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,Fy(typeof e.type!="string");const g=V8(e);this.animation=N8(t,i,a,g,l),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const v=Yy(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(v):k8(t,i,v),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ci(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ci(e)}get time(){return ci(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ur(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&P8()?(this.animation.timeline=e,ui):t(this)}}const Pw={anticipate:dw,backInOut:uw,circInOut:fw};function L8(n){return n in Pw}function B8(n){typeof n.ease=="string"&&L8(n.ease)&&(n.ease=Pw[n.ease])}const GT=10;class z8 extends F8{constructor(e){B8(e),Rw(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:a,element:l,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new Qy({...c,autoplay:!1}),f=ur(this.finishedTime??this.time);t.setWithVelocity(h.sample(f-GT).value,h.sample(f).value,GT),h.stop()}}const $T=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ws.test(n)||n==="0")&&!n.startsWith("url("));function U8(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function G8(n,e,t,i){const a=n[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=$T(a,e),h=$T(l,e);return!c||!h?!1:U8(n)||(t==="spring"||kw(t))&&i}function p0(n){n.duration=0,n.type="keyframes"}const $8=new Set(["opacity","clipPath","filter","transform"]),H8=Ly(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function W8(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:a,damping:l,type:c}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:g}=e.owner.getProps();return H8()&&t&&$8.has(t)&&(t!=="transform"||!g)&&!f&&!i&&a!=="mirror"&&l!==0&&c!=="inertia"}const q8=40;class K8 extends Xy{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",keyframes:h,name:f,motionValue:g,element:v,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Dn.now();const x={autoplay:e,delay:t,type:i,repeat:a,repeatDelay:l,repeatType:c,name:f,motionValue:g,element:v,...b},_=v?.KeyframeResolver||Zy;this.keyframeResolver=new _(h,(w,E,P)=>this.onKeyframesResolved(w,E,x,!P),f,g,v),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,a){this.keyframeResolver=void 0;const{name:l,type:c,velocity:h,delay:f,isHandoff:g,onUpdate:v}=i;this.resolvedAt=Dn.now(),G8(e,l,c,h)||(($r.instantAnimations||!f)&&v?.(Yy(e,i,t)),e[0]=e[e.length-1],p0(i),i.repeat=0);const x={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>q8?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},_=!g&&W8(x)?new z8({...x,element:x.motionValue.owner.current}):new Qy(x);_.finished.then(()=>this.notifyFinished()).catch(ui),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),j8()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Y8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function X8(n){const e=Y8.exec(n);if(!e)return[,];const[,t,i,a]=e;return[`--${t??i}`,a]}function Mw(n,e,t=1){const[i,a]=X8(n);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const c=l.trim();return nw(c)?parseFloat(c):c}return $y(a)?Mw(a,e,t+1):a}function Jy(n,e){return n?.[e]??n?.default??n}const Ow=new Set(["width","height","top","left","right","bottom",..._l]),Q8={test:n=>n==="auto",parse:n=>n},Nw=n=>e=>e.test(n),Vw=[Sl,Ie,dr,Is,UO,zO,Q8],HT=n=>Vw.find(Nw(n));function Z8(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||rw(n):!0}const J8=new Set(["brightness","contrast","saturate","opacity"]);function eN(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Hy)||[];if(!i)return n;const a=t.replace(i,"");let l=J8.has(e)?1:0;return i!==t&&(l*=100),e+"("+l+a+")"}const tN=/\b([a-z-]*)\(.*?\)/gu,y0={...Ws,getAnimatableNone:n=>{const e=n.match(tN);return e?e.map(eN).join(" "):n}},WT={...Sl,transform:Math.round},nN={rotate:Is,rotateX:Is,rotateY:Is,rotateZ:Is,scale:fh,scaleX:fh,scaleY:fh,scaleZ:fh,skew:Is,skewX:Is,skewY:Is,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:cu,originX:PT,originY:PT,originZ:Ie},e1={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...nN,zIndex:WT,fillOpacity:cu,strokeOpacity:cu,numOctaves:WT},iN={...e1,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:y0,WebkitFilter:y0},Fw=n=>iN[n];function Lw(n,e){let t=Fw(n);return t!==y0&&(t=Ws),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const rN=new Set(["auto","none","0"]);function sN(n,e,t){let i=0,a;for(;i<n.length&&!a;){const l=n[i];typeof l=="string"&&!rN.has(l)&&uu(l).values.length&&(a=n[i]),i++}if(a&&t)for(const l of e)n[l]=Lw(t,a)}class aN extends Zy{constructor(e,t,i,a,l){super(e,t,i,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let g=e[f];if(typeof g=="string"&&(g=g.trim(),$y(g))){const v=Mw(g,t.current);v!==void 0&&(e[f]=v),f===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!Ow.has(i)||e.length!==2)return;const[a,l]=e,c=HT(a),h=HT(l);if(c!==h)if(zT(c)&&zT(h))for(let f=0;f<e.length;f++){const g=e[f];typeof g=="string"&&(e[f]=parseFloat(g))}else Fa[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let a=0;a<e.length;a++)(e[a]===null||Z8(e[a]))&&i.push(a);i.length&&sN(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fa[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];a!==void 0&&e.getValue(i,a).jump(a,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const a=e.getValue(t);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,c=i[l];i[l]=Fa[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function oN(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const a=t?.[n]??i.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}const Bw=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function zw(n){return iw(n)&&"offsetHeight"in n}const qT=30,lN=n=>!isNaN(parseFloat(n));class cN{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const a=Dn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Dn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new By);const i=this.events[e].add(t);return e==="change"?()=>{i(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Dn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>qT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,qT);return sw(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dl(n,e){return new cN(n,e)}const{schedule:t1}=pw(queueMicrotask,!1),wi={x:!1,y:!1};function Uw(){return wi.x||wi.y}function uN(n){return n==="x"||n==="y"?wi[n]?null:(wi[n]=!0,()=>{wi[n]=!1}):wi.x||wi.y?null:(wi.x=wi.y=!0,()=>{wi.x=wi.y=!1})}function Gw(n,e){const t=oN(n),i=new AbortController,a={passive:!0,...e,signal:i.signal};return[t,a,()=>i.abort()]}function KT(n){return!(n.pointerType==="touch"||Uw())}function dN(n,e,t={}){const[i,a,l]=Gw(n,t),c=h=>{if(!KT(h))return;const{target:f}=h,g=e(f,h);if(typeof g!="function"||!f)return;const v=b=>{KT(b)&&(g(b),f.removeEventListener("pointerleave",v))};f.addEventListener("pointerleave",v,a)};return i.forEach(h=>{h.addEventListener("pointerenter",c,a)}),l}const $w=(n,e)=>e?n===e?!0:$w(n,e.parentElement):!1,n1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,hN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fN(n){return hN.has(n.tagName)||n.tabIndex!==-1}const Oh=new WeakSet;function YT(n){return e=>{e.key==="Enter"&&n(e)}}function pp(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const mN=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=YT(()=>{if(Oh.has(t))return;pp(t,"down");const a=YT(()=>{pp(t,"up")}),l=()=>pp(t,"cancel");t.addEventListener("keyup",a,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function XT(n){return n1(n)&&!Uw()}function gN(n,e,t={}){const[i,a,l]=Gw(n,t),c=h=>{const f=h.currentTarget;if(!XT(h))return;Oh.add(f);const g=e(f,h),v=(_,w)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",x),Oh.has(f)&&Oh.delete(f),XT(_)&&typeof g=="function"&&g(_,{success:w})},b=_=>{v(_,f===window||f===document||t.useGlobalTarget||$w(f,_.target))},x=_=>{v(_,!1)};window.addEventListener("pointerup",b,a),window.addEventListener("pointercancel",x,a)};return i.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,a),zw(h)&&(h.addEventListener("focus",g=>mN(g,a)),!fN(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function Hw(n){return iw(n)&&"ownerSVGElement"in n}function pN(n){return Hw(n)&&n.tagName==="svg"}const dn=n=>!!(n&&n.getVelocity),yN=[...Vw,Ft,Ws],vN=n=>yN.find(Nw(n)),i1=H.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function QT(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function xN(...n){return e=>{let t=!1;const i=n.map(a=>{const l=QT(a,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let a=0;a<i.length;a++){const l=i[a];typeof l=="function"?l():QT(n[a],null)}}}}function bN(...n){return H.useCallback(xN(...n),n)}class TN extends H.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,a=zw(i)&&i.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function SN({children:n,isPresent:e,anchorX:t,root:i}){const a=H.useId(),l=H.useRef(null),c=H.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=H.useContext(i1),f=bN(l,n?.ref);return H.useInsertionEffect(()=>{const{width:g,height:v,top:b,left:x,right:_}=c.current;if(e||!l.current||!g||!v)return;const w=t==="left"?`left: ${x}`:`right: ${_}`;l.current.dataset.motionPopId=a;const E=document.createElement("style");h&&(E.nonce=h);const P=i??document.head;return P.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${v}px !important;
            ${w}px !important;
            top: ${b}px !important;
          }
        `),()=>{P.contains(E)&&P.removeChild(E)}},[e]),u.jsx(TN,{isPresent:e,childRef:l,sizeRef:c,children:H.cloneElement(n,{ref:f})})}const _N=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:a,presenceAffectsLayout:l,mode:c,anchorX:h,root:f})=>{const g=My(AN),v=H.useId();let b=!0,x=H.useMemo(()=>(b=!1,{id:v,initial:e,isPresent:t,custom:a,onExitComplete:_=>{g.set(_,!0);for(const w of g.values())if(!w)return;i&&i()},register:_=>(g.set(_,!1),()=>g.delete(_))}),[t,g,i]);return l&&b&&(x={...x}),H.useMemo(()=>{g.forEach((_,w)=>g.set(w,!1))},[t]),H.useEffect(()=>{!t&&!g.size&&i&&i()},[t]),c==="popLayout"&&(n=u.jsx(SN,{isPresent:t,anchorX:h,root:f,children:n})),u.jsx(Gf.Provider,{value:x,children:n})};function AN(){return new Map}function Ww(n=!0){const e=H.useContext(Gf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:a}=e,l=H.useId();H.useEffect(()=>{if(n)return a(l)},[n]);const c=H.useCallback(()=>n&&i&&i(l),[l,i,n]);return!t&&i?[!1,c]:[!0]}const mh=n=>n.key||"";function ZT(n){const e=[];return H.Children.forEach(n,t=>{H.isValidElement(t)&&e.push(t)}),e}const wN=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1,anchorX:h="left",root:f})=>{const[g,v]=Ww(c),b=H.useMemo(()=>ZT(n),[n]),x=c&&!g?[]:b.map(mh),_=H.useRef(!0),w=H.useRef(b),E=My(()=>new Map),[P,N]=H.useState(b),[V,L]=H.useState(b);tw(()=>{_.current=!1,w.current=b;for(let q=0;q<V.length;q++){const D=mh(V[q]);x.includes(D)?E.delete(D):E.get(D)!==!0&&E.set(D,!1)}},[V,x.length,x.join("-")]);const ne=[];if(b!==P){let q=[...b];for(let D=0;D<V.length;D++){const I=V[D],C=mh(I);x.includes(C)||(q.splice(D,0,I),ne.push(I))}return l==="wait"&&ne.length&&(q=ne),L(ZT(q)),N(b),null}const{forceRender:W}=H.useContext(Py);return u.jsx(u.Fragment,{children:V.map(q=>{const D=mh(q),I=c&&!g?!1:b===V||x.includes(D),C=()=>{if(E.has(D))E.set(D,!0);else return;let F=!0;E.forEach(k=>{k||(F=!1)}),F&&(W?.(),L(w.current),c&&v?.(),i&&i())};return u.jsx(_N,{isPresent:I,initial:!_.current||t?void 0:!1,custom:e,presenceAffectsLayout:a,mode:l,root:f,onExitComplete:I?void 0:C,anchorX:h,children:q},D)})})},qw=H.createContext({strict:!1}),JT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hl={};for(const n in JT)hl[n]={isEnabled:e=>JT[n].some(t=>!!e[t])};function EN(n){for(const e in n)hl[e]={...hl[e],...n[e]}}const RN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||RN.has(n)}let Kw=n=>!mf(n);function IN(n){typeof n=="function"&&(Kw=e=>e.startsWith("on")?!mf(e):n(e))}try{IN(require("@emotion/is-prop-valid").default)}catch{}function CN(n,e,t){const i={};for(const a in n)a==="values"&&typeof n.values=="object"||(Kw(a)||t===!0&&mf(a)||!e&&!mf(a)||n.draggable&&a.startsWith("onDrag"))&&(i[a]=n[a]);return i}const $f=H.createContext({});function Hf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function du(n){return typeof n=="string"||Array.isArray(n)}const r1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],s1=["initial",...r1];function Wf(n){return Hf(n.animate)||s1.some(e=>du(n[e]))}function Yw(n){return!!(Wf(n)||n.variants)}function jN(n,e){if(Wf(n)){const{initial:t,animate:i}=n;return{initial:t===!1||du(t)?t:void 0,animate:du(i)?i:void 0}}return n.inherit!==!1?e:{}}function DN(n){const{initial:e,animate:t}=jN(n,H.useContext($f));return H.useMemo(()=>({initial:e,animate:t}),[eS(e),eS(t)])}function eS(n){return Array.isArray(n)?n.join(" "):n}const hu={};function kN(n){for(const e in n)hu[e]=n[e],Gy(e)&&(hu[e].isCSSVariable=!0)}function Xw(n,{layout:e,layoutId:t}){return Al.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!hu[n]||n==="opacity")}const PN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},MN=_l.length;function ON(n,e,t){let i="",a=!0;for(let l=0;l<MN;l++){const c=_l[l],h=n[c];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(c.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||t){const g=Bw(h,e1[c]);if(!f){a=!1;const v=PN[c]||c;i+=`${v}(${g}) `}t&&(e[c]=g)}}return i=i.trim(),t?i=t(e,a?"":i):a&&(i="none"),i}function a1(n,e,t){const{style:i,vars:a,transformOrigin:l}=n;let c=!1,h=!1;for(const f in e){const g=e[f];if(Al.has(f)){c=!0;continue}else if(Gy(f)){a[f]=g;continue}else{const v=Bw(g,e1[f]);f.startsWith("origin")?(h=!0,l[f]=v):i[f]=v}}if(e.transform||(c||t?i.transform=ON(e,n.transform,t):i.transform&&(i.transform="none")),h){const{originX:f="50%",originY:g="50%",originZ:v=0}=l;i.transformOrigin=`${f} ${g} ${v}`}}const o1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qw(n,e,t){for(const i in e)!dn(e[i])&&!Xw(i,t)&&(n[i]=e[i])}function NN({transformTemplate:n},e){return H.useMemo(()=>{const t=o1();return a1(t,e,n),Object.assign({},t.vars,t.style)},[e])}function VN(n,e){const t=n.style||{},i={};return Qw(i,t,n),Object.assign(i,NN(n,e)),i}function FN(n,e){const t={},i=VN(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const LN={offset:"stroke-dashoffset",array:"stroke-dasharray"},BN={offset:"strokeDashoffset",array:"strokeDasharray"};function zN(n,e,t=1,i=0,a=!0){n.pathLength=1;const l=a?LN:BN;n[l.offset]=Ie.transform(-i);const c=Ie.transform(e),h=Ie.transform(t);n[l.array]=`${c} ${h}`}function Zw(n,{attrX:e,attrY:t,attrScale:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...h},f,g,v){if(a1(n,h,g),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:b,style:x}=n;b.transform&&(x.transform=b.transform,delete b.transform),(x.transform||b.transformOrigin)&&(x.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),x.transform&&(x.transformBox=v?.transformBox??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),i!==void 0&&(b.scale=i),a!==void 0&&zN(b,a,l,c,!1)}const Jw=()=>({...o1(),attrs:{}}),eE=n=>typeof n=="string"&&n.toLowerCase()==="svg";function UN(n,e,t,i){const a=H.useMemo(()=>{const l=Jw();return Zw(l,e,eE(i),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};Qw(l,n.style,n),a.style={...l,...a.style}}return a}const GN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function l1(n){return typeof n!="string"||n.includes("-")?!1:!!(GN.indexOf(n)>-1||/[A-Z]/u.test(n))}function $N(n,e,t,{latestValues:i},a,l=!1){const h=(l1(n)?UN:FN)(e,i,a,n),f=CN(e,typeof n=="string",l),g=n!==H.Fragment?{...f,...h,ref:t}:{},{children:v}=e,b=H.useMemo(()=>dn(v)?v.get():v,[v]);return H.createElement(n,{...g,children:b})}function tS(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function c1(n,e,t,i){if(typeof e=="function"){const[a,l]=tS(i);e=e(t!==void 0?t:n.custom,a,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[a,l]=tS(i);e=e(t!==void 0?t:n.custom,a,l)}return e}function Nh(n){return dn(n)?n.get():n}function HN({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,a){return{latestValues:WN(t,i,a,n),renderState:e()}}function WN(n,e,t,i){const a={},l=i(n,{});for(const x in l)a[x]=Nh(l[x]);let{initial:c,animate:h}=n;const f=Wf(n),g=Yw(n);e&&g&&!f&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let v=t?t.initial===!1:!1;v=v||c===!1;const b=v?h:c;if(b&&typeof b!="boolean"&&!Hf(b)){const x=Array.isArray(b)?b:[b];for(let _=0;_<x.length;_++){const w=c1(n,x[_]);if(w){const{transitionEnd:E,transition:P,...N}=w;for(const V in N){let L=N[V];if(Array.isArray(L)){const ne=v?L.length-1:0;L=L[ne]}L!==null&&(a[V]=L)}for(const V in E)a[V]=E[V]}}}return a}const tE=n=>(e,t)=>{const i=H.useContext($f),a=H.useContext(Gf),l=()=>HN(n,e,i,a);return t?l():My(l)};function u1(n,e,t){const{style:i}=n,a={};for(const l in i)(dn(i[l])||e.style&&dn(e.style[l])||Xw(l,n)||t?.getValue(l)?.liveStyle!==void 0)&&(a[l]=i[l]);return a}const qN=tE({scrapeMotionValuesFromProps:u1,createRenderState:o1});function nE(n,e,t){const i=u1(n,e,t);for(const a in n)if(dn(n[a])||dn(e[a])){const l=_l.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[l]=n[a]}return i}const KN=tE({scrapeMotionValuesFromProps:nE,createRenderState:Jw}),YN=Symbol.for("motionComponentSymbol");function qo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function XN(n,e,t){return H.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):qo(t)&&(t.current=i))},[e])}const d1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),QN="framerAppearId",iE="data-"+d1(QN),rE=H.createContext({});function ZN(n,e,t,i,a){const{visualElement:l}=H.useContext($f),c=H.useContext(qw),h=H.useContext(Gf),f=H.useContext(i1).reducedMotion,g=H.useRef(null);i=i||c.renderer,!g.current&&i&&(g.current=i(n,{visualState:e,parent:l,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const v=g.current,b=H.useContext(rE);v&&!v.projection&&a&&(v.type==="html"||v.type==="svg")&&JN(g.current,t,a,b);const x=H.useRef(!1);H.useInsertionEffect(()=>{v&&x.current&&v.update(t,h)});const _=t[iE],w=H.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return tw(()=>{v&&(x.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),w.current&&v.animationState&&v.animationState.animateChanges())}),H.useEffect(()=>{v&&(!w.current&&v.animationState&&v.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),w.current=!1),v.enteringChildren=void 0)}),v}function JN(n,e,t,i){const{layoutId:a,layout:l,drag:c,dragConstraints:h,layoutScroll:f,layoutRoot:g,layoutCrossfade:v}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:sE(n.parent)),n.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||h&&qo(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,crossfade:v,layoutScroll:f,layoutRoot:g})}function sE(n){if(n)return n.options.allowProjection!==!1?n.projection:sE(n.parent)}function yp(n,{forwardMotionProps:e=!1}={},t,i){t&&EN(t);const a=l1(n)?KN:qN;function l(h,f){let g;const v={...H.useContext(i1),...h,layoutId:eV(h)},{isStatic:b}=v,x=DN(h),_=a(h,b);if(!b&&Oy){tV();const w=nV(v);g=w.MeasureLayout,x.visualElement=ZN(n,_,v,i,w.ProjectionNode)}return u.jsxs($f.Provider,{value:x,children:[g&&x.visualElement?u.jsx(g,{visualElement:x.visualElement,...v}):null,$N(n,h,XN(_,x.visualElement,f),_,b,e)]})}l.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=H.forwardRef(l);return c[YN]=n,c}function eV({layoutId:n}){const e=H.useContext(Py).id;return e&&n!==void 0?e+"-"+n:n}function tV(n,e){H.useContext(qw).strict}function nV(n){const{drag:e,layout:t}=hl;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function iV(n,e){if(typeof Proxy>"u")return yp;const t=new Map,i=(l,c)=>yp(l,c,n,e),a=(l,c)=>i(l,c);return new Proxy(a,{get:(l,c)=>c==="create"?i:(t.has(c)||t.set(c,yp(c,void 0,n,e)),t.get(c))})}function aE({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function rV({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function sV(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function vp(n){return n===void 0||n===1}function v0({scale:n,scaleX:e,scaleY:t}){return!vp(n)||!vp(e)||!vp(t)}function ja(n){return v0(n)||oE(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function oE(n){return nS(n.x)||nS(n.y)}function nS(n){return n&&n!=="0%"}function gf(n,e,t){const i=n-t,a=e*i;return t+a}function iS(n,e,t,i,a){return a!==void 0&&(n=gf(n,a,i)),gf(n,t,i)+e}function x0(n,e=0,t=1,i,a){n.min=iS(n.min,e,t,i,a),n.max=iS(n.max,e,t,i,a)}function lE(n,{x:e,y:t}){x0(n.x,e.translate,e.scale,e.originPoint),x0(n.y,t.translate,t.scale,t.originPoint)}const rS=.999999999999,sS=1.0000000000001;function aV(n,e,t,i=!1){const a=t.length;if(!a)return;e.x=e.y=1;let l,c;for(let h=0;h<a;h++){l=t[h],c=l.projectionDelta;const{visualElement:f}=l.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Yo(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,lE(n,c)),i&&ja(l.latestValues)&&Yo(n,l.latestValues))}e.x<sS&&e.x>rS&&(e.x=1),e.y<sS&&e.y>rS&&(e.y=1)}function Ko(n,e){n.min=n.min+e,n.max=n.max+e}function aS(n,e,t,i,a=.5){const l=mt(n.min,n.max,a);x0(n,e,t,l,i)}function Yo(n,e){aS(n.x,e.x,e.scaleX,e.scale,e.originX),aS(n.y,e.y,e.scaleY,e.scale,e.originY)}function cE(n,e){return aE(sV(n.getBoundingClientRect(),e))}function oV(n,e,t){const i=cE(n,t),{scroll:a}=e;return a&&(Ko(i.x,a.offset.x),Ko(i.y,a.offset.y)),i}const oS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xo=()=>({x:oS(),y:oS()}),lS=()=>({min:0,max:0}),Et=()=>({x:lS(),y:lS()}),b0={current:null},uE={current:!1};function lV(){if(uE.current=!0,!!Oy)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>b0.current=n.matches;n.addEventListener("change",e),e()}else b0.current=!1}const cV=new WeakMap;function uV(n,e,t){for(const i in e){const a=e[i],l=t[i];if(dn(a))n.addValue(i,a);else if(dn(l))n.addValue(i,dl(a,{owner:n}));else if(l!==a)if(n.hasValue(i)){const c=n.getValue(i);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=n.getStaticValue(i);n.addValue(i,dl(c!==void 0?c:a,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const cS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dV{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Dn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ft.render(this.render,!1,!0))};const{latestValues:f,renderState:g}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=g,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Wf(t),this.isVariantNode=Yw(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...b}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in b){const _=b[x];f[x]!==void 0&&dn(_)&&_.set(f[x])}}mount(e){this.current=e,cV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),uE.current||lV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:b0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Hs(this.notifyUpdate),Hs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Al.has(e);i&&this.onBindTransform&&this.onBindTransform();const a=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&ft.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in hl){const t=hl[e];if(!t)continue;const{isEnabled:i,Feature:a}=t;if(!this.features[e]&&a&&i(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<cS.length;i++){const a=cS[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=uV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=dl(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(nw(i)||rw(i))?i=parseFloat(i):!vN(i)&&Ws.test(t)&&(i=Lw(e,t)),this.setBaseTarget(e,dn(i)?i.get():i)),dn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const l=c1(this.props,t,this.presenceContext?.custom);l&&(i=l[e])}if(t&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!dn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new By),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){t1.render(this.render)}}class dE extends dV{constructor(){super(...arguments),this.KeyframeResolver=aN}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;dn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function hE(n,{style:e,vars:t},i,a){const l=n.style;let c;for(c in e)l[c]=e[c];a?.applyProjectionStyles(l,i);for(c in t)l.setProperty(c,t[c])}function hV(n){return window.getComputedStyle(n)}class fV extends dE{constructor(){super(...arguments),this.type="html",this.renderInstance=hE}readValueFromInstance(e,t){if(Al.has(t))return this.projection?.isProjecting?d0(t):w8(e,t);{const i=hV(e),a=(Gy(t)?i.getPropertyValue(t):i[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return cE(e,t)}build(e,t,i){a1(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return u1(e,t,i)}}const fE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mV(n,e,t,i){hE(n,e,void 0,i);for(const a in e.attrs)n.setAttribute(fE.has(a)?a:d1(a),e.attrs[a])}class gV extends dE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Et}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Al.has(t)){const i=Fw(t);return i&&i.default||0}return t=fE.has(t)?t:d1(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return nE(e,t,i)}build(e,t,i){Zw(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,a){mV(e,t,i,a)}mount(e){this.isSVGTag=eE(e.tagName),super.mount(e)}}const pV=(n,e)=>l1(n)?new gV(e):new fV(e,{allowProjection:n!==H.Fragment});function nl(n,e,t){const i=n.getProps();return c1(i,e,t!==void 0?t:i.custom,n)}const T0=n=>Array.isArray(n);function yV(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,dl(t))}function vV(n){return T0(n)?n[n.length-1]||0:n}function xV(n,e){const t=nl(n,e);let{transitionEnd:i={},transition:a={},...l}=t||{};l={...l,...i};for(const c in l){const h=vV(l[c]);yV(n,c,h)}}function bV(n){return!!(dn(n)&&n.add)}function S0(n,e){const t=n.getValue("willChange");if(bV(t))return t.add(e);if(!t&&$r.WillChange){const i=new $r.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function mE(n){return n.props[iE]}const TV=n=>n!==null;function SV(n,{repeat:e,repeatType:t="loop"},i){const a=n.filter(TV),l=e&&t!=="loop"&&e%2===1?0:a.length-1;return a[l]}const _V={type:"spring",stiffness:500,damping:25,restSpeed:10},AV=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),wV={type:"keyframes",duration:.8},EV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RV=(n,{keyframes:e})=>e.length>2?wV:Al.has(n)?n.startsWith("scale")?AV(e[1]):_V:EV;function IV({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:h,from:f,elapsed:g,...v}){return!!Object.keys(v).length}const h1=(n,e,t,i={},a,l)=>c=>{const h=Jy(i,n)||{},f=h.delay||i.delay||0;let{elapsed:g=0}=i;g=g-ur(f);const v={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-g,onUpdate:x=>{e.set(x),h.onUpdate&&h.onUpdate(x)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:l?void 0:a};IV(h)||Object.assign(v,RV(n,v)),v.duration&&(v.duration=ur(v.duration)),v.repeatDelay&&(v.repeatDelay=ur(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let b=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(p0(v),v.delay===0&&(b=!0)),($r.instantAnimations||$r.skipAnimations)&&(b=!0,p0(v),v.delay=0),v.allowFlatten=!h.type&&!h.ease,b&&!l&&e.get()!==void 0){const x=SV(v.keyframes,h);if(x!==void 0){ft.update(()=>{v.onUpdate(x),v.onComplete()});return}}return h.isSync?new Qy(v):new K8(v)};function CV({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function gE(n,e,{delay:t=0,transitionOverride:i,type:a}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:c,...h}=e;i&&(l=i);const f=[],g=a&&n.animationState&&n.animationState.getState()[a];for(const v in h){const b=n.getValue(v,n.latestValues[v]??null),x=h[v];if(x===void 0||g&&CV(g,v))continue;const _={delay:t,...Jy(l||{},v)},w=b.get();if(w!==void 0&&!b.isAnimating&&!Array.isArray(x)&&x===w&&!_.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const N=mE(n);if(N){const V=window.MotionHandoffAnimation(N,v,ft);V!==null&&(_.startTime=V,E=!0)}}S0(n,v),b.start(h1(v,b,x,n.shouldReduceMotion&&Ow.has(v)?{type:!1}:_,n,E));const P=b.animation;P&&f.push(P)}return c&&Promise.all(f).then(()=>{ft.update(()=>{c&&xV(n,c)})}),f}function pE(n,e,t,i=0,a=1){const l=Array.from(n).sort((g,v)=>g.sortNodePosition(v)).indexOf(e),c=n.size,h=(c-1)*i;return typeof t=="function"?t(l,c):a===1?l*i:h-l*i}function _0(n,e,t={}){const i=nl(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(a=t.transitionOverride);const l=i?()=>Promise.all(gE(n,i,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:b}=a;return jV(n,e,f,g,v,b,t)}:()=>Promise.resolve(),{when:h}=a;if(h){const[f,g]=h==="beforeChildren"?[l,c]:[c,l];return f().then(()=>g())}else return Promise.all([l(),c(t.delay)])}function jV(n,e,t=0,i=0,a=0,l=1,c){const h=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),h.push(_0(f,e,{...c,delay:t+(typeof i=="function"?0:i)+pE(n.variantChildren,f,i,a,l)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(h)}function DV(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const a=e.map(l=>_0(n,l,t));i=Promise.all(a)}else if(typeof e=="string")i=_0(n,e,t);else{const a=typeof e=="function"?nl(n,e,t.custom):e;i=Promise.all(gE(n,a,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function yE(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const kV=s1.length;function vE(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?vE(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<kV;t++){const i=s1[t],a=n.props[i];(du(a)||a===!1)&&(e[i]=a)}return e}const PV=[...r1].reverse(),MV=r1.length;function OV(n){return e=>Promise.all(e.map(({animation:t,options:i})=>DV(n,t,i)))}function NV(n){let e=OV(n),t=uS(),i=!0;const a=f=>(g,v)=>{const b=nl(n,v,f==="exit"?n.presenceContext?.custom:void 0);if(b){const{transition:x,transitionEnd:_,...w}=b;g={...g,...w,..._}}return g};function l(f){e=f(n)}function c(f){const{props:g}=n,v=vE(n.parent)||{},b=[],x=new Set;let _={},w=1/0;for(let P=0;P<MV;P++){const N=PV[P],V=t[N],L=g[N]!==void 0?g[N]:v[N],ne=du(L),W=N===f?V.isActive:null;W===!1&&(w=P);let q=L===v[N]&&L!==g[N]&&ne;if(q&&i&&n.manuallyAnimateOnMount&&(q=!1),V.protectedKeys={..._},!V.isActive&&W===null||!L&&!V.prevProp||Hf(L)||typeof L=="boolean")continue;const D=VV(V.prevProp,L);let I=D||N===f&&V.isActive&&!q&&ne||P>w&&ne,C=!1;const F=Array.isArray(L)?L:[L];let k=F.reduce(a(N),{});W===!1&&(k={});const{prevResolvedValues:z={}}=V,O={...z,...k},X=U=>{I=!0,x.has(U)&&(C=!0,x.delete(U)),V.needsAnimating[U]=!0;const J=n.getValue(U);J&&(J.liveStyle=!1)};for(const U in O){const J=k[U],oe=z[U];if(_.hasOwnProperty(U))continue;let fe=!1;T0(J)&&T0(oe)?fe=!yE(J,oe):fe=J!==oe,fe?J!=null?X(U):x.add(U):J!==void 0&&x.has(U)?X(U):V.protectedKeys[U]=!0}V.prevProp=L,V.prevResolvedValues=k,V.isActive&&(_={..._,...k}),i&&n.blockInitialAnimation&&(I=!1);const le=q&&D;I&&(!le||C)&&b.push(...F.map(U=>{const J={type:N};if(typeof U=="string"&&i&&!le&&n.manuallyAnimateOnMount&&n.parent){const{parent:oe}=n,fe=nl(oe,U);if(oe.enteringChildren&&fe){const{delayChildren:pe}=fe.transition||{};J.delay=pE(oe.enteringChildren,n,pe)}}return{animation:U,options:J}}))}if(x.size){const P={};if(typeof g.initial!="boolean"){const N=nl(n,Array.isArray(g.initial)?g.initial[0]:g.initial);N&&N.transition&&(P.transition=N.transition)}x.forEach(N=>{const V=n.getBaseTarget(N),L=n.getValue(N);L&&(L.liveStyle=!0),P[N]=V??null}),b.push({animation:P})}let E=!!b.length;return i&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(E=!1),i=!1,E?e(b):Promise.resolve()}function h(f,g){if(t[f].isActive===g)return Promise.resolve();n.variantChildren?.forEach(b=>b.animationState?.setActive(f,g)),t[f].isActive=g;const v=c(f);for(const b in t)t[b].protectedKeys={};return v}return{animateChanges:c,setActive:h,setAnimateFunction:l,getState:()=>t,reset:()=>{t=uS()}}}function VV(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!yE(e,n):!1}function Ia(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uS(){return{animate:Ia(!0),whileInView:Ia(),whileHover:Ia(),whileTap:Ia(),whileDrag:Ia(),whileFocus:Ia(),exit:Ia()}}class Qs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class FV extends Qs{constructor(e){super(e),e.animationState||(e.animationState=NV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Hf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let LV=0;class BV extends Qs{constructor(){super(...arguments),this.id=LV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const zV={animation:{Feature:FV},exit:{Feature:BV}};function fu(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function Cu(n){return{point:{x:n.pageX,y:n.pageY}}}const UV=n=>e=>n1(e)&&n(e,Cu(e));function Kc(n,e,t,i){return fu(n,e,UV(t),i)}const xE=1e-4,GV=1-xE,$V=1+xE,bE=.01,HV=0-bE,WV=0+bE;function vn(n){return n.max-n.min}function qV(n,e,t){return Math.abs(n-e)<=t}function dS(n,e,t,i=.5){n.origin=i,n.originPoint=mt(e.min,e.max,n.origin),n.scale=vn(t)/vn(e),n.translate=mt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=GV&&n.scale<=$V||isNaN(n.scale))&&(n.scale=1),(n.translate>=HV&&n.translate<=WV||isNaN(n.translate))&&(n.translate=0)}function Yc(n,e,t,i){dS(n.x,e.x,t.x,i?i.originX:void 0),dS(n.y,e.y,t.y,i?i.originY:void 0)}function hS(n,e,t){n.min=t.min+e.min,n.max=n.min+vn(e)}function KV(n,e,t){hS(n.x,e.x,t.x),hS(n.y,e.y,t.y)}function fS(n,e,t){n.min=e.min-t.min,n.max=n.min+vn(e)}function Xc(n,e,t){fS(n.x,e.x,t.x),fS(n.y,e.y,t.y)}function oi(n){return[n("x"),n("y")]}const TE=({current:n})=>n?n.ownerDocument.defaultView:null,mS=(n,e)=>Math.abs(n-e);function YV(n,e){const t=mS(n.x,e.x),i=mS(n.y,e.y);return Math.sqrt(t**2+i**2)}class SE{constructor(e,t,{transformPagePoint:i,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=bp(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,w=YV(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!w)return;const{point:E}=x,{timestamp:P}=rn;this.history.push({...E,timestamp:P});const{onStart:N,onMove:V}=this.handlers;_||(N&&N(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,x)},this.handlePointerMove=(x,_)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=xp(_,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(x,_)=>{this.end();const{onEnd:w,onSessionEnd:E,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=bp(x.type==="pointercancel"?this.lastMoveEventInfo:xp(_,this.transformPagePoint),this.history);this.startEvent&&w&&w(x,N),E&&E(x,N)},!n1(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=a||window;const h=Cu(e),f=xp(h,this.transformPagePoint),{point:g}=f,{timestamp:v}=rn;this.history=[{...g,timestamp:v}];const{onSessionStart:b}=t;b&&b(e,bp(f,this.history)),this.removeListeners=Eu(Kc(this.contextWindow,"pointermove",this.handlePointerMove),Kc(this.contextWindow,"pointerup",this.handlePointerUp),Kc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Hs(this.updatePoint)}}function xp(n,e){return e?{point:e(n.point)}:n}function gS(n,e){return{x:n.x-e.x,y:n.y-e.y}}function bp({point:n},e){return{point:n,delta:gS(n,_E(e)),offset:gS(n,XV(e)),velocity:QV(e,.1)}}function XV(n){return n[0]}function _E(n){return n[n.length-1]}function QV(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const a=_E(n);for(;t>=0&&(i=n[t],!(a.timestamp-i.timestamp>ur(e)));)t--;if(!i)return{x:0,y:0};const l=ci(a.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-i.x)/l,y:(a.y-i.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function ZV(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?mt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?mt(t,n,i.max):Math.min(n,t)),n}function pS(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function JV(n,{top:e,left:t,bottom:i,right:a}){return{x:pS(n.x,t,a),y:pS(n.y,e,i)}}function yS(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function e9(n,e){return{x:yS(n.x,e.x),y:yS(n.y,e.y)}}function t9(n,e){let t=.5;const i=vn(n),a=vn(e);return a>i?t=lu(e.min,e.max-i,n.min):i>a&&(t=lu(n.min,n.max-a,e.min)),Gr(0,1,t)}function n9(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const A0=.35;function i9(n=A0){return n===!1?n=0:n===!0&&(n=A0),{x:vS(n,"left","right"),y:vS(n,"top","bottom")}}function vS(n,e,t){return{min:xS(n,e),max:xS(n,t)}}function xS(n,e){return typeof n=="number"?n:n[e]||0}const r9=new WeakMap;class s9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Et(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=b=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Cu(b).point)},c=(b,x)=>{const{drag:_,dragPropagation:w,onDragStart:E}=this.getProps();if(_&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uN(_),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oi(N=>{let V=this.getAxisMotionValue(N).get()||0;if(dr.test(V)){const{projection:L}=this.visualElement;if(L&&L.layout){const ne=L.layout.layoutBox[N];ne&&(V=vn(ne)*(parseFloat(V)/100))}}this.originPoint[N]=V}),E&&ft.postRender(()=>E(b,x)),S0(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},h=(b,x)=>{this.latestPointerEvent=b,this.latestPanInfo=x;const{dragPropagation:_,dragDirectionLock:w,onDirectionLock:E,onDrag:P}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:N}=x;if(w&&this.currentDirection===null){this.currentDirection=a9(N),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",x.point,N),this.updateAxis("y",x.point,N),this.visualElement.render(),P&&P(b,x)},f=(b,x)=>{this.latestPointerEvent=b,this.latestPanInfo=x,this.stop(b,x),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>oi(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:v}=this.getProps();this.panSession=new SE(e,{onSessionStart:l,onStart:c,onMove:h,onSessionEnd:f,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:i,contextWindow:TE(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,a=t||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!i)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&ft.postRender(()=>h(i,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:a}=this.getProps();if(!i||!gh(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=ZV(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&qo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=JV(i.layoutBox,e):this.constraints=!1,this.elastic=i9(t),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&oi(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=n9(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!qo(e))return!1;const i=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=oV(i,a.root,this.visualElement.getTransformPagePoint());let c=e9(a.layout.layoutBox,l);if(t){const h=t(rV(c));this.hasMutatedConstraints=!!h,h&&(c=aE(h))}return c}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},g=oi(v=>{if(!gh(v,t,this.currentDirection))return;let b=f&&f[v]||{};c&&(b={min:0,max:0});const x=a?200:1e6,_=a?40:1e7,w={type:"inertia",velocity:i?e[v]:0,bounceStiffness:x,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...l,...b};return this.startAxisValueAnimation(v,w)});return Promise.all(g).then(h)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return S0(this.visualElement,e),i.start(h1(e,i,0,t,this.visualElement,!1))}stopAnimation(){oi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){oi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),a=i[t];return a||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){oi(t=>{const{drag:i}=this.getProps();if(!gh(t,i,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(t);if(a&&a.layout){const{min:c,max:h}=a.layout.layoutBox[t];l.set(e[t]-mt(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!qo(t)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};oi(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const f=h.get();a[c]=t9({min:f,max:f},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),oi(c=>{if(!gh(c,e,null))return;const h=this.getAxisMotionValue(c),{min:f,max:g}=this.constraints[c];h.set(mt(f,g,a[c]))})}addListeners(){if(!this.visualElement.current)return;r9.set(this.visualElement,this);const e=this.visualElement.current,t=Kc(e,"pointerdown",f=>{const{drag:g,dragListener:v=!0}=this.getProps();g&&v&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();qo(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ft.read(i);const c=fu(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:g})=>{this.isDragging&&g&&(oi(v=>{const b=this.getAxisMotionValue(v);b&&(this.originPoint[v]+=f[v].translate,b.set(b.get()+f[v].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=A0,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:h}}}function gh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function a9(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class o9 extends Qs{constructor(e){super(e),this.removeGroupControls=ui,this.removeListeners=ui,this.controls=new s9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ui}unmount(){this.removeGroupControls(),this.removeListeners()}}const bS=n=>(e,t)=>{n&&ft.postRender(()=>n(e,t))};class l9 extends Qs{constructor(){super(...arguments),this.removePointerDownListener=ui}onPointerDown(e){this.session=new SE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:TE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:bS(e),onStart:bS(t),onMove:i,onEnd:(l,c)=>{delete this.session,a&&ft.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=Kc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function TS(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Cc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ie.test(n))n=parseFloat(n);else return n;const t=TS(n,e.target.x),i=TS(n,e.target.y);return`${t}% ${i}%`}},c9={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,a=Ws.parse(n);if(a.length>5)return i;const l=Ws.createTransformer(n),c=typeof a[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;a[0+c]/=h,a[1+c]/=f;const g=mt(h,f,.5);return typeof a[2+c]=="number"&&(a[2+c]/=g),typeof a[3+c]=="number"&&(a[3+c]/=g),l(a)}};let Tp=!1;class u9 extends H.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:a}=this.props,{projection:l}=e;kN(d9),l&&(t.group&&t.group.add(l),i&&i.register&&a&&i.register(l),Tp&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Vh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:a,isPresent:l}=this.props,{projection:c}=i;return c&&(c.isPresent=l,Tp=!0,a||e.layoutDependency!==t||t===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||ft.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),t1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:a}=e;Tp=!0,a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AE(n){const[e,t]=Ww(),i=H.useContext(Py);return u.jsx(u9,{...n,layoutGroup:i,switchLayoutGroup:H.useContext(rE),isPresent:e,safeToRemove:t})}const d9={borderRadius:{...Cc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cc,borderTopRightRadius:Cc,borderBottomLeftRadius:Cc,borderBottomRightRadius:Cc,boxShadow:c9};function h9(n,e,t){const i=dn(n)?n:dl(n);return i.start(h1("",i,e,t)),i.animation}const f9=(n,e)=>n.depth-e.depth;class m9{constructor(){this.children=[],this.isDirty=!1}add(e){Ny(this.children,e),this.isDirty=!0}remove(e){Vy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(f9),this.isDirty=!1,this.children.forEach(e)}}function g9(n,e){const t=Dn.now(),i=({timestamp:a})=>{const l=a-t;l>=e&&(Hs(i),n(l-e))};return ft.setup(i,!0),()=>Hs(i)}const wE=["TopLeft","TopRight","BottomLeft","BottomRight"],p9=wE.length,SS=n=>typeof n=="string"?parseFloat(n):n,_S=n=>typeof n=="number"||Ie.test(n);function y9(n,e,t,i,a,l){a?(n.opacity=mt(0,t.opacity??1,v9(i)),n.opacityExit=mt(e.opacity??1,0,x9(i))):l&&(n.opacity=mt(e.opacity??1,t.opacity??1,i));for(let c=0;c<p9;c++){const h=`border${wE[c]}Radius`;let f=AS(e,h),g=AS(t,h);if(f===void 0&&g===void 0)continue;f||(f=0),g||(g=0),f===0||g===0||_S(f)===_S(g)?(n[h]=Math.max(mt(SS(f),SS(g),i),0),(dr.test(g)||dr.test(f))&&(n[h]+="%")):n[h]=g}(e.rotate||t.rotate)&&(n.rotate=mt(e.rotate||0,t.rotate||0,i))}function AS(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const v9=EE(0,.5,hw),x9=EE(.5,.95,ui);function EE(n,e,t){return i=>i<n?0:i>e?1:t(lu(n,e,i))}function wS(n,e){n.min=e.min,n.max=e.max}function ai(n,e){wS(n.x,e.x),wS(n.y,e.y)}function ES(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function RS(n,e,t,i,a){return n-=e,n=gf(n,1/t,i),a!==void 0&&(n=gf(n,1/a,i)),n}function b9(n,e=0,t=1,i=.5,a,l=n,c=n){if(dr.test(e)&&(e=parseFloat(e),e=mt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=mt(l.min,l.max,i);n===l&&(h-=e),n.min=RS(n.min,e,t,h,a),n.max=RS(n.max,e,t,h,a)}function IS(n,e,[t,i,a],l,c){b9(n,e[t],e[i],e[a],e.scale,l,c)}const T9=["x","scaleX","originX"],S9=["y","scaleY","originY"];function CS(n,e,t,i){IS(n.x,e,T9,t?t.x:void 0,i?i.x:void 0),IS(n.y,e,S9,t?t.y:void 0,i?i.y:void 0)}function jS(n){return n.translate===0&&n.scale===1}function RE(n){return jS(n.x)&&jS(n.y)}function DS(n,e){return n.min===e.min&&n.max===e.max}function _9(n,e){return DS(n.x,e.x)&&DS(n.y,e.y)}function kS(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function IE(n,e){return kS(n.x,e.x)&&kS(n.y,e.y)}function PS(n){return vn(n.x)/vn(n.y)}function MS(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class A9{constructor(){this.members=[]}add(e){Ny(this.members,e),e.scheduleRender()}remove(e){if(Vy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(a=>e===a);if(t===0)return!1;let i;for(let a=t;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function w9(n,e,t){let i="";const a=n.x.translate/e.x,l=n.y.translate/e.y,c=t?.z||0;if((a||l||c)&&(i=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:g,rotate:v,rotateX:b,rotateY:x,skewX:_,skewY:w}=t;g&&(i=`perspective(${g}px) ${i}`),v&&(i+=`rotate(${v}deg) `),b&&(i+=`rotateX(${b}deg) `),x&&(i+=`rotateY(${x}deg) `),_&&(i+=`skewX(${_}deg) `),w&&(i+=`skewY(${w}deg) `)}const h=n.x.scale*e.x,f=n.y.scale*e.y;return(h!==1||f!==1)&&(i+=`scale(${h}, ${f})`),i||"none"}const Sp=["","X","Y","Z"],E9=1e3;let R9=0;function _p(n,e,t,i){const{latestValues:a}=e;a[n]&&(t[n]=a[n],e.setStaticValue(n,0),i&&(i[n]=0))}function CE(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=mE(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:a,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ft,!(a||l))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&CE(i)}function jE({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(c={},h=e?.()){this.id=R9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(j9),this.nodes.forEach(M9),this.nodes.forEach(O9),this.nodes.forEach(D9)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new m9)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new By),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const f=this.eventHandlers.get(c);f&&f.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=Hw(c)&&!pN(c),this.instance=c;const{layoutId:h,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),n){let v,b=0;const x=()=>this.root.updateBlockedByResize=!1;ft.read(()=>{b=window.innerWidth}),n(c,()=>{const _=window.innerWidth;_!==b&&(b=_,this.root.updateBlockedByResize=!0,v&&v(),v=g9(x,250),Vh.hasAnimatedSinceResize&&(Vh.hasAnimatedSinceResize=!1,this.nodes.forEach(VS)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||f)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:b,hasRelativeLayoutChanged:x,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||g.getDefaultTransition()||B9,{onLayoutAnimationStart:E,onLayoutAnimationComplete:P}=g.getProps(),N=!this.targetLayout||!IE(this.targetLayout,_),V=!b&&x;if(this.options.layoutRoot||this.resumeFrom||V||b&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...Jy(w,"layout"),onPlay:E,onComplete:P};(g.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(v,V)}else b||VS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(N9),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&CE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const b=this.path[v];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(OS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(NS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(P9),this.nodes.forEach(I9),this.nodes.forEach(C9)):this.nodes.forEach(NS),this.clearAllSnapshots();const h=Dn.now();rn.delta=Gr(0,1e3/60,h-rn.timestamp),rn.timestamp=h,rn.isProcessing=!0,dp.update.process(rn),dp.preRender.process(rn),dp.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,t1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(k9),this.sharedNodes.forEach(V9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vn(this.snapshot.measuredBox.x)&&!vn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!RE(this.projectionDelta),f=this.getTransformTemplate(),g=f?f(this.latestValues,""):void 0,v=g!==this.prevTransformTemplateValue;c&&this.instance&&(h||ja(this.latestValues)||v)&&(a(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return c&&(f=this.removeTransform(f)),z9(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Et();const h=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(U9))){const{scroll:g}=this.root;g&&(Ko(h.x,g.offset.x),Ko(h.y,g.offset.y))}return h}removeElementScroll(c){const h=Et();if(ai(h,c),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:v,options:b}=g;g!==this.root&&v&&b.layoutScroll&&(v.wasRoot&&ai(h,c),Ko(h.x,v.offset.x),Ko(h.y,v.offset.y))}return h}applyTransform(c,h=!1){const f=Et();ai(f,c);for(let g=0;g<this.path.length;g++){const v=this.path[g];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Yo(f,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),ja(v.latestValues)&&Yo(f,v.latestValues)}return ja(this.latestValues)&&Yo(f,this.latestValues),f}removeTransform(c){const h=Et();ai(h,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];if(!g.instance||!ja(g.latestValues))continue;v0(g.latestValues)&&g.updateSnapshot();const v=Et(),b=g.measurePageBox();ai(v,b),CS(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,v)}return ja(this.latestValues)&&CS(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:b}=this.options;if(!(!this.layout||!(v||b))){if(this.resolvedRelativeTargetAt=rn.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),Xc(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Et(),this.targetWithTransforms=Et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ai(this.target,this.layout.layoutBox),lE(this.target,this.targetDelta)):ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),Xc(this.relativeTargetOrigin,this.target,x.target),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||v0(this.parent.latestValues)||oE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),h=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(f=!1),f)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;ai(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,x=this.treeScale.y;aV(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Et());const{target:_}=c;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ES(this.prevProjectionDelta.x,this.projectionDelta.x),ES(this.prevProjectionDelta.y,this.projectionDelta.y)),Yc(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==x||!MS(this.projectionDelta.x,this.prevProjectionDelta.x)||!MS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xo(),this.projectionDelta=Xo(),this.projectionDeltaWithTransform=Xo()}setAnimationOrigin(c,h=!1){const f=this.snapshot,g=f?f.latestValues:{},v={...this.latestValues},b=Xo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const x=Et(),_=f?f.source:void 0,w=this.layout?this.layout.source:void 0,E=_!==w,P=this.getStack(),N=!P||P.members.length<=1,V=!!(E&&!N&&this.options.crossfade===!0&&!this.path.some(L9));this.animationProgress=0;let L;this.mixTargetDelta=ne=>{const W=ne/1e3;FS(b.x,c.x,W),FS(b.y,c.y,W),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xc(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),F9(this.relativeTarget,this.relativeTargetOrigin,x,W),L&&_9(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=Et()),ai(L,this.relativeTarget)),E&&(this.animationValues=v,y9(v,g,this.latestValues,W,V,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Hs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{Vh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=dl(0)),this.currentAnimation=h9(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),c.onUpdate&&c.onUpdate(h)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(E9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:f,layout:g,latestValues:v}=c;if(!(!h||!f||!g)){if(this!==c&&this.layout&&g&&DE(this.options.animationType,this.layout.layoutBox,g.layoutBox)){f=this.target||Et();const b=vn(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+b;const x=vn(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+x}ai(h,f),Yo(h,v),Yc(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new A9),this.sharedNodes.get(c).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:f}={}){const g=this.getStack();g&&g.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const g={};f.z&&_p("z",c,g,this.animationValues);for(let v=0;v<Sp.length;v++)_p(`rotate${Sp[v]}`,c,g,this.animationValues),_p(`skew${Sp[v]}`,c,g,this.animationValues);c.render();for(const v in g)c.setStaticValue(v,g[v]),this.animationValues&&(this.animationValues[v]=g[v]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Nh(h?.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Nh(h?.pointerEvents)||""),this.hasProjected&&!ja(this.latestValues)&&(c.transform=f?f({},""):"none",this.hasProjected=!1);return}c.visibility="";const v=g.animationValues||g.latestValues;this.applyTransformsToTarget();let b=w9(this.projectionDeltaWithTransform,this.treeScale,v);f&&(b=f(v,b)),c.transform=b;const{x,y:_}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${_.origin*100}% 0`,g.animationValues?c.opacity=g===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:c.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const w in hu){if(v[w]===void 0)continue;const{correct:E,applyTo:P,isCSSVariable:N}=hu[w],V=b==="none"?v[w]:E(v[w],g);if(P){const L=P.length;for(let ne=0;ne<L;ne++)c[P[ne]]=V}else N?this.options.visualElement.renderState.vars[w]=V:c[w]=V}this.options.layoutId&&(c.pointerEvents=g===this?Nh(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(OS),this.root.sharedNodes.clear()}}}function I9(n){n.updateLayout()}function C9(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:a}=n.options,l=e.source!==n.layout.source;a==="size"?oi(v=>{const b=l?e.measuredBox[v]:e.layoutBox[v],x=vn(b);b.min=t[v].min,b.max=b.min+x}):DE(a,e.layoutBox,t)&&oi(v=>{const b=l?e.measuredBox[v]:e.layoutBox[v],x=vn(t[v]);b.max=b.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+x)});const c=Xo();Yc(c,t,e.layoutBox);const h=Xo();l?Yc(h,n.applyTransform(i,!0),e.measuredBox):Yc(h,t,e.layoutBox);const f=!RE(c);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:b,layout:x}=v;if(b&&x){const _=Et();Xc(_,e.layoutBox,b.layoutBox);const w=Et();Xc(w,t,x.layoutBox),IE(_,w)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=_,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:h,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function j9(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function D9(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function k9(n){n.clearSnapshot()}function OS(n){n.clearMeasurements()}function NS(n){n.isLayoutDirty=!1}function P9(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function VS(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function M9(n){n.resolveTargetDelta()}function O9(n){n.calcProjection()}function N9(n){n.resetSkewAndRotation()}function V9(n){n.removeLeadSnapshot()}function FS(n,e,t){n.translate=mt(e.translate,0,t),n.scale=mt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function LS(n,e,t,i){n.min=mt(e.min,t.min,i),n.max=mt(e.max,t.max,i)}function F9(n,e,t,i){LS(n.x,e.x,t.x,i),LS(n.y,e.y,t.y,i)}function L9(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const B9={duration:.45,ease:[.4,0,.1,1]},BS=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),zS=BS("applewebkit/")&&!BS("chrome/")?Math.round:ui;function US(n){n.min=zS(n.min),n.max=zS(n.max)}function z9(n){US(n.x),US(n.y)}function DE(n,e,t){return n==="position"||n==="preserve-aspect"&&!qV(PS(e),PS(t),.2)}function U9(n){return n!==n.root&&n.scroll?.wasRoot}const G9=jE({attachResizeListener:(n,e)=>fu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ap={current:void 0},kE=jE({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Ap.current){const n=new G9({});n.mount(window),n.setOptions({layoutScroll:!0}),Ap.current=n}return Ap.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),$9={pan:{Feature:l9},drag:{Feature:o9,ProjectionNode:kE,MeasureLayout:AE}};function GS(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const a="onHover"+t,l=i[a];l&&ft.postRender(()=>l(e,Cu(e)))}class H9 extends Qs{mount(){const{current:e}=this.node;e&&(this.unmount=dN(e,(t,i)=>(GS(this.node,i,"Start"),a=>GS(this.node,a,"End"))))}unmount(){}}class W9 extends Qs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Eu(fu(this.node.current,"focus",()=>this.onFocus()),fu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $S(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const a="onTap"+(t==="End"?"":t),l=i[a];l&&ft.postRender(()=>l(e,Cu(e)))}class q9 extends Qs{mount(){const{current:e}=this.node;e&&(this.unmount=gN(e,(t,i)=>($S(this.node,i,"Start"),(a,{success:l})=>$S(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const w0=new WeakMap,wp=new WeakMap,K9=n=>{const e=w0.get(n.target);e&&e(n)},Y9=n=>{n.forEach(K9)};function X9({root:n,...e}){const t=n||document;wp.has(t)||wp.set(t,{});const i=wp.get(t),a=JSON.stringify(e);return i[a]||(i[a]=new IntersectionObserver(Y9,{root:n,...e})),i[a]}function Q9(n,e,t){const i=X9(e);return w0.set(n,t),i.observe(n),()=>{w0.delete(n),i.unobserve(n)}}const Z9={some:0,all:1};class J9 extends Qs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:a="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:Z9[a]},h=f=>{const{isIntersecting:g}=f;if(this.isInView===g||(this.isInView=g,l&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:v,onViewportLeave:b}=this.node.getProps(),x=g?v:b;x&&x(f)};return Q9(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(eF(e,t))&&this.startObserver()}unmount(){}}function eF({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const tF={inView:{Feature:J9},tap:{Feature:q9},focus:{Feature:W9},hover:{Feature:H9}},nF={layout:{ProjectionNode:kE,MeasureLayout:AE}},iF={...zV,...tF,...$9,...nF},sn=iV(iF,pV),rF=({dataProcessor:n,isMobile:e})=>{const[t,i]=H.useState(null),[a,l]=H.useState(null),[c,h]=H.useState("performance"),[f,g]=H.useState({width:1200,height:700});H.useEffect(()=>{const w=()=>{const E=document.getElementById("galaxy-container");if(E){const P=E.clientWidth,N=e?600:Math.min(700,window.innerHeight*.6);g({width:P,height:N})}};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[e]);const v=H.useMemo(()=>{if(!n)return{teams:[],stats:{}};const w=n.getTeamsBySituation("5on5");if(!w||w.length===0)return{teams:[],stats:{}};const E=w.map(C=>C.xGF_per60||0),P=w.map(C=>C.xGA_per60||0),N=w.map(C=>(C.xGF_per60||0)-(C.xGA_per60||0)),V=Math.min(...E),L=Math.max(...E),ne=Math.min(...P),W=Math.max(...P),q=Math.min(...N),D=Math.max(...N);return{teams:w.map(C=>{const F=C.xGF_per60||0,k=C.xGA_per60||0,z=C.pdo||100,O=F-k,X=e?32:12,le=100-X*2,G=X+(F-V)/(L-V)*le,J=100-X-(k-ne)/(W-ne)*le;let oe="neutral",fe=0;z>102?(oe="hot",fe=Math.min((z-100)/5,1)):z<98&&(oe="cold",fe=Math.min((100-z)/5,1));const pe=e?26:38,Ee=e?44:65,Te=(O-q)/(D-q),De=pe+Te*(Ee-pe);let Qe=null,tt=0;z>102?(Qe="down",tt=Math.min((z-102)/5,1)):z<98&&(Qe="up",tt=Math.min((98-z)/5,1));const Xt=Math.abs(z-100)>2,Se=z>102?"FADE":z<98?"BACK":null;return{team:C.team,name:C.name||C.team,x:G,y:J,size:De,temperature:oe,tempValue:fe,pdo:z.toFixed(1),xGF:F.toFixed(2),xGA:k.toFixed(2),xGD:O.toFixed(2),regressionDirection:Qe,regressionStrength:tt,hasValue:Xt,bettingAction:Se,gamesPlayed:C.gamesPlayed||0}}),stats:{minXGF:V,maxXGF:L,minXGA:ne,maxXGA:W}}},[n]),b=(w,E)=>w==="hot"?`rgba(239, 68, 68, ${.7+E*.3})`:w==="cold"?`rgba(59, 130, 246, ${.7+E*.3})`:"rgba(148, 163, 184, 0.7)",x=(w,E)=>w==="hot"?`0 0 ${20+E*30}px rgba(239, 68, 68, ${.6+E*.4})`:w==="cold"?`0 0 ${20+E*30}px rgba(59, 130, 246, ${.6+E*.4})`:"0 0 15px rgba(148, 163, 184, 0.4)",_=H.useMemo(()=>c==="betting"?v.teams.filter(w=>w.hasValue):v.teams,[v.teams,c]);return!n||v.teams.length===0?u.jsx("div",{style:{padding:e?"2rem 1rem":"3rem 2rem",textAlign:"center",color:"var(--color-text-muted)"},children:"Loading galaxy data..."}):u.jsxs("div",{id:"galaxy-container",style:{padding:e?"2rem 1rem":"4rem 2rem",marginBottom:e?"2rem":"3rem",background:"linear-gradient(180deg, #0A0E1A 0%, #1A1F2E 50%, #0A0E1A 100%)",borderRadius:"20px",border:"1px solid rgba(255, 215, 0, 0.2)",position:"relative",overflow:"visible",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
          radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 80% 70%, rgba(239, 68, 68, 0.08) 0%, transparent 50%),
          radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%)
        `,pointerEvents:"none",animation:"nebulaPulse 10s ease-in-out infinite"}}),u.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`
          radial-gradient(2px 2px at 20% 30%, white, transparent),
          radial-gradient(2px 2px at 60% 70%, white, transparent),
          radial-gradient(1px 1px at 50% 50%, white, transparent),
          radial-gradient(1px 1px at 80% 10%, white, transparent),
          radial-gradient(2px 2px at 90% 60%, white, transparent),
          radial-gradient(1px 1px at 33% 80%, white, transparent),
          radial-gradient(1px 1px at 15% 90%, white, transparent)
        `,backgroundSize:"200% 200%",backgroundPosition:"0% 0%",opacity:.4,pointerEvents:"none",animation:"starTwinkle 20s linear infinite"}}),u.jsxs(sn.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},style:{textAlign:"center",marginBottom:e?"2rem":"3rem",position:"relative",zIndex:1},children:[u.jsx("h2",{style:{fontSize:e?"2rem":"3rem",fontWeight:"900",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 25%, #FF6B6B 50%, #4ECDC4 75%, #FFD700 100%)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"1rem",letterSpacing:"-0.03em",filter:"drop-shadow(0 0 30px rgba(255, 215, 0, 0.4))",animation:"gradientShift 8s ease infinite"},children:"THE NHL GALAXY"}),u.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:e?"1rem":"1.25rem",fontWeight:"500",letterSpacing:"0.05em",textTransform:"uppercase",marginBottom:"0.5rem"},children:"Where Performance Meets Prediction"}),u.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:e?"0.875rem":"1rem",fontWeight:"400"},children:[v.teams.length," teams • Live positioning • Regression analysis"]})]}),!e&&u.jsx(sn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.6},style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"2rem",position:"relative",zIndex:1},children:[{id:"performance",label:"Performance",icon:Wa},{id:"betting",label:"Betting Value",icon:ky}].map(w=>{const E=w.icon,P=c===w.id;return u.jsxs("button",{onClick:()=>h(w.id),style:{padding:"0.75rem 1.5rem",borderRadius:"12px",border:P?"2px solid rgba(255, 215, 0, 0.6)":"1px solid rgba(255, 255, 255, 0.2)",background:P?"linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 165, 0, 0.1) 100%)":"rgba(255, 255, 255, 0.05)",color:P?"#FFD700":"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:P?"0 4px 20px rgba(255, 215, 0, 0.3)":"none"},children:[u.jsx(E,{size:16}),w.label]},w.id)})}),u.jsxs("div",{style:{position:"relative",width:"100%",height:f.height,marginTop:e?"1rem":"2rem",background:"radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.02) 0%, transparent 70%)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"visible"},children:[u.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",opacity:.3},children:[u.jsx("ellipse",{cx:f.width*.75,cy:f.height*.25,rx:f.width*.2,ry:f.height*.15,fill:"none",stroke:"rgba(16, 185, 129, 0.4)",strokeWidth:"1",strokeDasharray:"5,5",style:{animation:"orbitRotate 30s linear infinite"}}),u.jsx("ellipse",{cx:f.width*.5,cy:f.height*.5,rx:f.width*.25,ry:f.height*.2,fill:"none",stroke:"rgba(148, 163, 184, 0.3)",strokeWidth:"1",strokeDasharray:"5,5",style:{animation:"orbitRotate 40s linear infinite reverse"}}),u.jsx("ellipse",{cx:f.width*.25,cy:f.height*.75,rx:f.width*.2,ry:f.height*.15,fill:"none",stroke:"rgba(239, 68, 68, 0.4)",strokeWidth:"1",strokeDasharray:"5,5",style:{animation:"orbitRotate 35s linear infinite"}})]}),u.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"50%",height:"50%",background:"linear-gradient(45deg, rgba(16, 185, 129, 0.12) 0%, transparent 70%)",pointerEvents:"none",borderLeft:"2px dashed rgba(16, 185, 129, 0.3)",borderTop:"2px dashed rgba(16, 185, 129, 0.3)"}}),u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"50%",height:"50%",background:"linear-gradient(225deg, rgba(239, 68, 68, 0.12) 0%, transparent 70%)",pointerEvents:"none",borderRight:"2px dashed rgba(239, 68, 68, 0.3)",borderBottom:"2px dashed rgba(239, 68, 68, 0.3)"}}),u.jsx("div",{style:{position:"absolute",bottom:e?"45px":"55px",right:e?"15px":"20px",padding:e?"0.5rem 1rem":"0.625rem 1.25rem",background:"rgba(16, 185, 129, 0.25)",backdropFilter:"blur(12px)",border:"2px solid rgba(16, 185, 129, 0.5)",borderRadius:"10px",fontSize:e?"0.688rem":"0.813rem",fontWeight:"900",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.08em",pointerEvents:"none",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)"},children:"✓ ELITE ZONE"}),u.jsx("div",{style:{position:"absolute",top:e?"45px":"55px",left:e?"15px":"20px",padding:e?"0.5rem 1rem":"0.625rem 1.25rem",background:"rgba(239, 68, 68, 0.25)",backdropFilter:"blur(12px)",border:"2px solid rgba(239, 68, 68, 0.5)",borderRadius:"10px",fontSize:e?"0.688rem":"0.813rem",fontWeight:"900",color:"#EF4444",textTransform:"uppercase",letterSpacing:"0.08em",pointerEvents:"none",boxShadow:"0 4px 16px rgba(239, 68, 68, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)"},children:"✗ DANGER ZONE"}),u.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",fontSize:e?"0.625rem":"0.75rem",color:"rgba(239, 68, 68, 0.8)",fontWeight:"700",textAlign:"left",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",lineHeight:"1.3",maxWidth:e?"80px":"100px"},children:["BAD OFFENSE",u.jsx("br",{}),"BAD DEFENSE"]}),u.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:e?"0.625rem":"0.75rem",color:"rgba(251, 191, 36, 0.8)",fontWeight:"700",textAlign:"right",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",lineHeight:"1.3",maxWidth:e?"80px":"100px"},children:["GOOD OFFENSE",u.jsx("br",{}),"BAD DEFENSE"]}),u.jsxs("div",{style:{position:"absolute",bottom:"10px",left:"10px",fontSize:e?"0.625rem":"0.75rem",color:"rgba(59, 130, 246, 0.8)",fontWeight:"700",textAlign:"left",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",lineHeight:"1.3",maxWidth:e?"80px":"100px"},children:["BAD OFFENSE",u.jsx("br",{}),"GOOD DEFENSE"]}),u.jsxs("div",{style:{position:"absolute",bottom:"10px",right:"10px",fontSize:e?"0.625rem":"0.75rem",color:"rgba(16, 185, 129, 0.8)",fontWeight:"700",textAlign:"right",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",lineHeight:"1.3",maxWidth:e?"80px":"100px"},children:["GOOD OFFENSE",u.jsx("br",{}),"GOOD DEFENSE"]}),u.jsx(wN,{children:_.map((w,E)=>{const P=t===w.team,N=a===w.team,V=P||N,L=(t||a)&&!V,ne=w.x/100*f.width,W=w.y/100*f.height;return u.jsxs(sn.div,{initial:{opacity:0,scale:0},animate:{opacity:L?.3:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.6,delay:E*.02,type:"spring",stiffness:100,damping:15},whileHover:{scale:1.5,zIndex:100},onHoverStart:()=>!a&&!e&&i(w.team),onHoverEnd:()=>!a&&!e&&i(null),onTap:()=>{e&&(a===w.team?l(null):l(w.team))},onClick:()=>{e||(a===w.team?l(null):(l(w.team),i(null)))},style:{position:"absolute",left:ne,top:W,transform:"translate(-50%, -50%)",cursor:"pointer",zIndex:V?100:10},children:[w.regressionDirection&&u.jsx(sn.div,{initial:{opacity:0,x:0,y:0},animate:{opacity:[.5,1,.5],x:w.regressionDirection==="up"?[5,10,5]:[-5,-10,-5],y:w.regressionDirection==="up"?[5,10,5]:[-5,-10,-5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:w.regressionDirection==="up"?"auto":"-25px",bottom:w.regressionDirection==="up"?"-25px":"auto",left:w.regressionDirection==="up"?"auto":"-25px",right:w.regressionDirection==="up"?"-25px":"auto",color:w.regressionDirection==="up"?"#10B981":"#EF4444",filter:`drop-shadow(0 0 8px ${w.regressionDirection==="up"?"#10B981":"#EF4444"})`,rotate:w.regressionDirection==="up"?"90deg":"-135deg"},children:u.jsx(ki,{size:20,strokeWidth:3})}),w.hasValue&&c==="betting"&&u.jsx(sn.div,{animate:{scale:[1,1.2,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:"-8px",right:"-8px",fontSize:"1rem",filter:"drop-shadow(0 0 8px rgba(255, 215, 0, 0.8))"},children:"💎"}),u.jsxs(sn.div,{animate:V?{boxShadow:[x(w.temperature,w.tempValue),`0 0 60px ${b(w.temperature,w.tempValue)}`,x(w.temperature,w.tempValue)]}:{boxShadow:x(w.temperature,w.tempValue),scale:[1,1.05,1]},transition:{duration:V?1:3,repeat:1/0,ease:"easeInOut"},style:{width:w.size,height:w.size,borderRadius:"50%",background:`radial-gradient(circle at 30% 30%, ${b(w.temperature,w.tempValue).replace("0.7","1")}, ${b(w.temperature,w.tempValue).replace("0.7","0.6")})`,border:`2px solid ${b(w.temperature,w.tempValue)}`,boxShadow:x(w.temperature,w.tempValue),display:"flex",alignItems:"center",justifyContent:"center",fontSize:e?"0.625rem":"0.75rem",fontWeight:"900",color:"#FFFFFF",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:"10%",left:"20%",width:"40%",height:"40%",borderRadius:"50%",background:"rgba(255, 255, 255, 0.3)",filter:"blur(8px)"}}),u.jsx("span",{style:{position:"relative",zIndex:1},children:w.team})]}),V&&u.jsxs(sn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{position:"absolute",[W>f.height/2?"bottom":"top"]:"100%",[ne>f.width*.7?"right":"left"]:ne>f.width*.7?0:"50%",transform:ne>f.width*.7?"none":"translateX(-50%)",marginTop:W<=f.height/2?"16px":"0",marginBottom:W>f.height/2?"16px":"0",minWidth:e?"200px":"240px",maxWidth:e?"280px":"320px",padding:e?"0.875rem":"1rem",background:"rgba(10, 14, 26, 0.98)",backdropFilter:"blur(20px)",border:`2px solid ${b(w.temperature,w.tempValue)}`,borderRadius:"12px",boxShadow:`0 8px 32px rgba(0, 0, 0, 0.8), 0 0 20px ${b(w.temperature,w.tempValue)}`,pointerEvents:N?"auto":"none",zIndex:1e3},children:[u.jsxs("div",{style:{fontSize:"1rem",fontWeight:"800",marginBottom:"0.75rem",color:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[w.name,w.temperature==="hot"&&u.jsx(uf,{size:16,color:"#EF4444"}),w.temperature==="cold"&&u.jsx(r0,{size:16,color:"#3B82F6"})]}),N&&u.jsx("div",{style:{fontSize:"0.75rem",color:"#FFD700",background:"rgba(255, 215, 0, 0.2)",padding:"0.25rem 0.5rem",borderRadius:"4px",border:"1px solid rgba(255, 215, 0, 0.4)"},children:"🔒 LOCKED"})]}),u.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(255, 255, 255, 0.8)",lineHeight:"1.6",marginBottom:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"PDO:"}),u.jsx("span",{style:{fontWeight:"700",color:b(w.temperature,w.tempValue)},children:w.pdo})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"xGD/60:"}),u.jsxs("span",{style:{fontWeight:"700",color:parseFloat(w.xGD)>0?"#10B981":"#EF4444"},children:[parseFloat(w.xGD)>0?"+":"",w.xGD]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"xGF/60:"}),u.jsx("span",{style:{fontWeight:"700",color:"#10B981"},children:w.xGF})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"xGA/60:"}),u.jsx("span",{style:{fontWeight:"700",color:"#EF4444"},children:w.xGA})]})]}),w.bettingAction&&u.jsx("div",{style:{padding:"0.5rem",borderRadius:"6px",background:w.bettingAction==="FADE"?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",border:`1px solid ${w.bettingAction==="FADE"?"#EF4444":"#10B981"}`,fontSize:"0.75rem",fontWeight:"800",textAlign:"center",color:w.bettingAction==="FADE"?"#EF4444":"#10B981",textTransform:"uppercase",letterSpacing:"0.05em"},children:w.bettingAction==="FADE"?"🔻 FADE THIS TEAM":"🔺 BACK THIS TEAM"})]})]},w.team)})})]}),u.jsx(sn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.6},style:{marginTop:e?"1.5rem":"2rem",padding:e?"1rem":"1.5rem",background:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",position:"relative",zIndex:1},children:u.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(255, 255, 255, 0.7)",lineHeight:"1.8",display:"grid",gridTemplateColumns:e?"1fr":"repeat(2, 1fr)",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#FFD700"},children:"Position:"})," Offense (→) vs Defense (↑)"]}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#FFD700"},children:"Size:"})," xG Differential (bigger = better)"]}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#EF4444"},children:"🔥 Hot:"})," PDO > 102 (overperforming)"]}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#3B82F6"},children:"❄️ Cold:"})," PDO < 98 (underperforming)"]}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#10B981"},children:"↑ Arrow:"})," Will improve (BACK)"]}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#EF4444"},children:"↓ Arrow:"})," Will decline (FADE)"]})]})}),u.jsx("style",{children:`
        @keyframes nebulaPulse {
          0%, 100% { opacity: 0.6; }
          50% { opacity: 1; }
        }
        @keyframes starTwinkle {
          0% { opacity: 0.3; }
          50% { opacity: 0.6; }
          100% { opacity: 0.3; }
        }
        @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @keyframes orbitRotate {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},sF=({dataProcessor:n,isMobile:e})=>{const[t,i]=H.useState("ALL"),[a,l]=H.useState(null),c={EAST:["BOS","BUF","CAR","CBJ","DET","FLA","MTL","NJD","NYI","NYR","OTT","PHI","PIT","TBL","TOR","WSH"],WEST:["ANA","CGY","CHI","COL","DAL","EDM","LAK","MIN","NSH","SEA","SJS","STL","UTA","VAN","VGK","WPG"]},h=H.useMemo(()=>{if(!n)return{east:[],west:[],stats:{}};const _=n.getTeamsBySituation("5on5");if(!_||_.length===0)return{east:[],west:[],stats:{}};const w={};_.forEach(N=>{const V=N.pdo||100,L=(N.xGF_per60||0)-(N.xGA_per60||0);let ne="neutral",W=0;V>102?(ne="hot",W=Math.min((V-100)/5,1)):V<98&&(ne="cold",W=Math.min((100-V)/5,1));const q=Math.abs(V-100)>2;let D=null;V>102&&(D="FADE"),V<98&&(D="BACK"),w[N.team]={team:N.team,name:N.name||N.team,pdo:V.toFixed(1),xGD:L.toFixed(2),xGF:(N.xGF_per60||0).toFixed(2),xGA:(N.xGA_per60||0).toFixed(2),gamesPlayed:N.gamesPlayed||0,temperature:ne,tempValue:W,hasValue:q,regressionDirection:D}});const E=c.EAST.filter(N=>w[N]).map(N=>w[N]),P=c.WEST.filter(N=>w[N]).map(N=>w[N]);return{east:E,west:P,stats:w}},[n]),f=(_,w)=>_==="hot"?`rgba(239, 68, 68, ${.3+w*.5})`:_==="cold"?`rgba(59, 130, 246, ${.3+w*.5})`:"rgba(148, 163, 184, 0.2)",g=_=>_==="hot"?"2px solid rgba(239, 68, 68, 0.6)":_==="cold"?"2px solid rgba(59, 130, 246, 0.6)":"1px solid rgba(148, 163, 184, 0.3)",v=_=>_==="hot"?u.jsx(uf,{size:14,color:"#EF4444"}):_==="cold"?u.jsx(r0,{size:14,color:"#3B82F6"}):null,b=H.useMemo(()=>t==="EAST"?{east:h.east,west:[]}:t==="WEST"?{east:[],west:h.west}:h,[t,h]),x=H.useMemo(()=>{const _=[...h.east,...h.west];return{hot:_.filter(w=>w.temperature==="hot").length,cold:_.filter(w=>w.temperature==="cold").length,neutral:_.filter(w=>w.temperature==="neutral").length,value:_.filter(w=>w.hasValue).length}},[h]);return!n||h.east.length===0?u.jsx("div",{style:{padding:e?"2rem 1rem":"3rem 2rem",textAlign:"center",color:"var(--color-text-muted)"},children:"Loading league temperature data..."}):u.jsxs("div",{style:{padding:e?"2rem 1rem":"3rem 2rem",marginBottom:e?"2rem":"3rem",background:"linear-gradient(180deg, rgba(26, 31, 46, 0.6) 0%, rgba(10, 14, 26, 0.8) 100%)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",position:"relative",overflow:"hidden"},children:[u.jsxs(sn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{textAlign:"center",marginBottom:e?"1.5rem":"2rem"},children:[u.jsx("h2",{style:{fontSize:e?"1.5rem":"2rem",fontWeight:"800",background:"linear-gradient(135deg, #EF4444 0%, #3B82F6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:"League Temperature Map"}),u.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:e?"0.875rem":"1rem",maxWidth:"600px",margin:"0 auto"},children:"PDO-based performance tracking • Hot teams overperforming • Cold teams underperforming"})]}),u.jsxs(sn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},style:{display:"flex",justifyContent:"center",gap:e?"0.75rem":"1.5rem",marginBottom:e?"1.5rem":"2rem",flexWrap:"wrap"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(239, 68, 68, 0.15)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[u.jsx(uf,{size:16,color:"#EF4444"}),u.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#EF4444"},children:[x.hot," Hot"]})]}),u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(148, 163, 184, 0.15)",borderRadius:"8px",border:"1px solid rgba(148, 163, 184, 0.3)"},children:u.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#94A3B8"},children:[x.neutral," Neutral"]})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(59, 130, 246, 0.15)",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.3)"},children:[u.jsx(r0,{size:16,color:"#3B82F6"}),u.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#3B82F6"},children:[x.cold," Cold"]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(255, 215, 0, 0.15)",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[u.jsx("span",{style:{fontSize:"1rem"},children:"💎"}),u.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#FFD700"},children:[x.value," Value"]})]})]}),!e&&u.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"2rem"},children:["ALL","EAST","WEST"].map(_=>u.jsx("button",{onClick:()=>i(_),style:{padding:"0.5rem 1.5rem",borderRadius:"8px",border:t===_?"2px solid var(--color-accent)":"1px solid rgba(255, 255, 255, 0.2)",background:t===_?"rgba(212, 175, 55, 0.2)":"rgba(255, 255, 255, 0.05)",color:t===_?"var(--color-accent)":"var(--color-text-secondary)",fontSize:"0.875rem",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"0.05em"},children:_},_))}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:e?"1fr":t==="ALL"?"1fr 1fr":"1fr",gap:e?"1.5rem":"2rem"},children:[b.east.length>0&&u.jsxs(sn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},children:[u.jsx("h3",{style:{fontSize:e?"1rem":"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem",textAlign:"center",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Eastern Conference"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:e?"0.5rem":"0.75rem"},children:b.east.map((_,w)=>u.jsxs(sn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:w*.03},whileHover:{scale:1.05,zIndex:10},onHoverStart:()=>l(_.team),onHoverEnd:()=>l(null),style:{aspectRatio:"1",background:f(_.temperature,_.tempValue),border:g(_.temperature),borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",transition:"all 0.3s ease",boxShadow:a===_.team?`0 8px 24px ${_.temperature==="hot"?"rgba(239, 68, 68, 0.4)":_.temperature==="cold"?"rgba(59, 130, 246, 0.4)":"rgba(148, 163, 184, 0.4)"}`:"none"},children:[_.regressionDirection&&u.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:e?"0.5rem":"0.563rem",fontWeight:"900",color:"#FFFFFF",background:_.regressionDirection==="FADE"?"rgba(239, 68, 68, 0.95)":"rgba(16, 185, 129, 0.95)",padding:e?"0.2rem 0.3rem":"0.25rem 0.4rem",borderRadius:"4px",border:`2px solid ${_.regressionDirection==="FADE"?"#DC2626":"#059669"}`,letterSpacing:"0.03em",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",boxShadow:_.regressionDirection==="FADE"?"0 2px 8px rgba(239, 68, 68, 0.6)":"0 2px 8px rgba(16, 185, 129, 0.6)"},children:_.regressionDirection}),v(_.temperature)&&u.jsx("div",{style:{marginBottom:"0.25rem"},children:v(_.temperature)}),u.jsx("div",{style:{fontSize:e?"0.75rem":"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:_.team}),u.jsx("div",{style:{fontSize:e?"0.625rem":"0.688rem",color:"rgba(255, 255, 255, 0.7)",fontWeight:"600"},children:_.pdo}),a===_.team&&!e&&u.jsxs(sn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",padding:"0.75rem",background:"rgba(10, 14, 26, 0.95)",backdropFilter:"blur(10px)",border:`2px solid ${_.temperature==="hot"?"#EF4444":_.temperature==="cold"?"#3B82F6":"#94A3B8"}`,borderRadius:"8px",minWidth:"180px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"none",zIndex:1e3},children:[u.jsx("div",{style:{fontSize:"0.813rem",fontWeight:"700",marginBottom:"0.5rem",color:"var(--color-text-primary)"},children:_.name}),u.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.8)",lineHeight:"1.5"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"PDO:"}),u.jsx("span",{style:{fontWeight:"600"},children:_.pdo})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"xGD/60:"}),u.jsxs("span",{style:{fontWeight:"600",color:parseFloat(_.xGD)>0?"#10B981":"#EF4444"},children:[parseFloat(_.xGD)>0?"+":"",_.xGD]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"xGF/60:"}),u.jsx("span",{style:{fontWeight:"600",color:"#10B981"},children:_.xGF})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"xGA/60:"}),u.jsx("span",{style:{fontWeight:"600",color:"#EF4444"},children:_.xGA})]})]})]})]},_.team))})]}),b.west.length>0&&u.jsxs(sn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},children:[u.jsx("h3",{style:{fontSize:e?"1rem":"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem",textAlign:"center",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Western Conference"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:e?"0.5rem":"0.75rem"},children:b.west.map((_,w)=>u.jsxs(sn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:w*.03},whileHover:{scale:1.05,zIndex:10},onHoverStart:()=>l(_.team),onHoverEnd:()=>l(null),style:{aspectRatio:"1",background:f(_.temperature,_.tempValue),border:g(_.temperature),borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",transition:"all 0.3s ease",boxShadow:a===_.team?`0 8px 24px ${_.temperature==="hot"?"rgba(239, 68, 68, 0.4)":_.temperature==="cold"?"rgba(59, 130, 246, 0.4)":"rgba(148, 163, 184, 0.4)"}`:"none"},children:[_.regressionDirection&&u.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:e?"0.5rem":"0.563rem",fontWeight:"900",color:"#FFFFFF",background:_.regressionDirection==="FADE"?"rgba(239, 68, 68, 0.95)":"rgba(16, 185, 129, 0.95)",padding:e?"0.2rem 0.3rem":"0.25rem 0.4rem",borderRadius:"4px",border:`2px solid ${_.regressionDirection==="FADE"?"#DC2626":"#059669"}`,letterSpacing:"0.03em",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",boxShadow:_.regressionDirection==="FADE"?"0 2px 8px rgba(239, 68, 68, 0.6)":"0 2px 8px rgba(16, 185, 129, 0.6)"},children:_.regressionDirection}),v(_.temperature)&&u.jsx("div",{style:{marginBottom:"0.25rem"},children:v(_.temperature)}),u.jsx("div",{style:{fontSize:e?"0.75rem":"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:_.team}),u.jsx("div",{style:{fontSize:e?"0.625rem":"0.688rem",color:"rgba(255, 255, 255, 0.7)",fontWeight:"600"},children:_.pdo}),a===_.team&&!e&&u.jsxs(sn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",padding:"0.75rem",background:"rgba(10, 14, 26, 0.95)",backdropFilter:"blur(10px)",border:`2px solid ${_.temperature==="hot"?"#EF4444":_.temperature==="cold"?"#3B82F6":"#94A3B8"}`,borderRadius:"8px",minWidth:"180px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"none",zIndex:1e3},children:[u.jsx("div",{style:{fontSize:"0.813rem",fontWeight:"700",marginBottom:"0.5rem",color:"var(--color-text-primary)"},children:_.name}),u.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.8)",lineHeight:"1.5"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"PDO:"}),u.jsx("span",{style:{fontWeight:"600"},children:_.pdo})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"xGD/60:"}),u.jsxs("span",{style:{fontWeight:"600",color:parseFloat(_.xGD)>0?"#10B981":"#EF4444"},children:[parseFloat(_.xGD)>0?"+":"",_.xGD]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{children:"xGF/60:"}),u.jsx("span",{style:{fontWeight:"600",color:"#10B981"},children:_.xGF})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"xGA/60:"}),u.jsx("span",{style:{fontWeight:"600",color:"#EF4444"},children:_.xGA})]})]})]})]},_.team))})]})]}),u.jsx(sn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},style:{marginTop:e?"1.5rem":"2rem",padding:e?"1rem":"1.5rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:u.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",lineHeight:"1.6",textAlign:"center"},children:[u.jsxs("div",{style:{marginBottom:"0.5rem"},children:[u.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"PDO = Shooting % + Save %"})," (League average: 100)"]}),u.jsx("div",{style:{marginBottom:"0.5rem"},children:"🔥 Hot (PDO > 102) • 😐 Neutral (PDO 98-102) • ❄️ Cold (PDO < 98)"}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"#EF4444",fontWeight:"700"},children:"FADE"})," = Overperforming (bet against) •",u.jsx("span",{style:{color:"#10B981",fontWeight:"700"},children:" BACK"})," = Underperforming (bet on)"]})]})})]})},aF=({dataProcessor:n,loading:e,error:t})=>{const[i,a]=H.useState([]),[l,c]=H.useState(null),[h,f]=H.useState(!1);return H.useEffect(()=>{const g=()=>{f(window.innerWidth<=640)};return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),H.useEffect(()=>{if(n){const g=n.getTopBettingOpportunities();a(g);const v=n.getTeamsBySituation("all"),b=v.reduce((w,E)=>w+E.pdo,0)/v.length,x=v.reduce((w,E)=>w+E.xGD_per60,0)/v.length,_=n.findRegressionCandidates();c({totalTeams:v.length,avgPDO:b.toFixed(1),avgXGD:x.toFixed(2),overperformingTeams:_.overperforming.length,underperformingTeams:_.underperforming.length})}},[n]),u.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},className:"animate-fade-in",children:[u.jsxs("div",{style:{padding:h?"2rem 1rem 1.5rem":"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"500px",height:"500px",background:"radial-gradient(circle, var(--color-accent-glow) 0%, transparent 70%)",opacity:.3,pointerEvents:"none"}}),u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[u.jsx("div",{style:{width:"44px",height:"44px",background:"linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px var(--color-accent-glow)"},children:u.jsx(Cy,{size:24,color:"var(--color-background)",strokeWidth:2.5})}),u.jsx("h1",{className:"text-gradient",style:{fontSize:h?"1.75rem":"2.25rem",fontWeight:"800"},children:"Analytics Dashboard"})]}),u.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:h?"0.875rem":"0.938rem",lineHeight:"1.7",maxWidth:"800px",marginLeft:h?"0":"60px"},children:"Real-time statistical overview of betting opportunities based on institutional-grade analytics. Featuring xG differentials, PDO regression, and predictive modeling."})]})]}),u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:h?"1rem":"2rem"},children:[u.jsx("div",{style:{marginBottom:h?"1.5rem":"2rem"},children:u.jsx(SO,{dataProcessor:n,loading:e,error:t})}),u.jsx(rF,{dataProcessor:n,isMobile:h}),u.jsx(sF,{dataProcessor:n,isMobile:h}),!1,!1]})]})},oF=({dataProcessor:n})=>{const[e,t]=H.useState(""),[i,a]=H.useState("all"),[l,c]=H.useState(null),[h,f]=H.useState(null),[g,v]=H.useState([]);H.useEffect(()=>{if(n){const x=[...new Set(n.processedData.map(_=>_.name))].sort();v(x),x.length>0&&t(x[0])}},[n]),H.useEffect(()=>{if(n&&e){const x=n.processedData.find(_=>_.name===e&&_.situation===i);if(c(x),x){const _=x.goalsFor/x.shotsOnGoalFor*100,w=(1-x.goalsAgainst/x.shotsOnGoalAgainst)*100,E=_+w,P={pdo:{formula:"(Goals For / Shots On Goal For) × 100 + (1 - Goals Against / Shots On Goal Against) × 100",shootingPct:_.toFixed(2),savePct:w.toFixed(2),calculation:`(${x.goalsFor} / ${x.shotsOnGoalFor}) × 100 + (1 - ${x.goalsAgainst} / ${x.shotsOnGoalAgainst}) × 100`,step1:`${_.toFixed(2)} + ${w.toFixed(2)}`,result:x.pdo.toFixed(2),match:Math.abs(x.pdo-E)<.1},xGF_per60:{formula:"(xGoals For / Ice Time in seconds) × 3600",calculation:`(${x.xGoalsFor} / ${x.iceTime}) × 3600`,result:x.xGF_per60?.toFixed(2)||"N/A",expected:(x.xGoalsFor/x.iceTime*3600).toFixed(2),match:x.xGF_per60?Math.abs(x.xGF_per60-x.xGoalsFor/x.iceTime*3600)<.01:!1},xGA_per60:{formula:"(xGoals Against / Ice Time in seconds) × 3600",calculation:`(${x.xGoalsAgainst} / ${x.iceTime}) × 3600`,result:x.xGA_per60?.toFixed(2)||"N/A",expected:(x.xGoalsAgainst/x.iceTime*3600).toFixed(2),match:x.xGA_per60?Math.abs(x.xGA_per60-x.xGoalsAgainst/x.iceTime*3600)<.01:!1},shootingEff:{formula:"Actual Goals For / Expected Goals For",calculation:`${x.goalsFor} / ${x.xGoalsFor}`,result:x.shooting_efficiency?.toFixed(3)||"N/A",expected:(x.goalsFor/x.xGoalsFor).toFixed(3),match:x.shooting_efficiency?Math.abs(x.shooting_efficiency-x.goalsFor/x.xGoalsFor)<.01:!1},xGD_per60:{formula:"xGF/60 - xGA/60",calculation:`${x.xGF_per60?.toFixed(2)} - ${x.xGA_per60?.toFixed(2)}`,result:x.xGD_per60?.toFixed(2)||"N/A",expected:(x.xGF_per60-x.xGA_per60).toFixed(2),match:x.xGD_per60?Math.abs(x.xGD_per60-(x.xGF_per60-x.xGA_per60))<.01:!1}};f(P)}}},[n,e,i]);const b=()=>{if(!l||!h)return;const x=`NHL SAVANT - DATA VERIFICATION REPORT
Team: ${e}
Situation: ${i}
Generated: ${new Date().toLocaleString()}

RAW CSV DATA:
-------------
Goals For: ${l.goalsFor}
Shots On Goal For: ${l.shotsOnGoalFor}
Goals Against: ${l.goalsAgainst}
Shots On Goal Against: ${l.shotsOnGoalAgainst}
xGoals For: ${l.xGoalsFor}
xGoals Against: ${l.xGoalsAgainst}
Ice Time: ${l.iceTime}

CALCULATED METRICS:
------------------
PDO:
  Formula: ${h.pdo.formula}
  Calculation: ${h.pdo.calculation}
  Shooting %: ${h.pdo.shootingPct}
  Save %: ${h.pdo.savePct}
  Result: ${h.pdo.result}
  ✓ Verified: ${h.pdo.match?"PASS":"FAIL"}

xGF/60:
  Formula: ${h.xGF_per60.formula}
  Calculation: ${h.xGF_per60.calculation}
  Result: ${h.xGF_per60.result}
  Expected: ${h.xGF_per60.expected}
  ✓ Verified: ${h.xGF_per60.match?"PASS":"FAIL"}

Shooting Efficiency:
  Formula: ${h.shootingEff.formula}
  Calculation: ${h.shootingEff.calculation}
  Result: ${h.shootingEff.result}
  Expected: ${h.shootingEff.expected}
  ✓ Verified: ${h.shootingEff.match?"PASS":"FAIL"}
`,_=new Blob([x],{type:"text/plain"}),w=URL.createObjectURL(_),E=document.createElement("a");E.href=w,E.download=`data-verification-${e}-${i}.txt`,E.click(),URL.revokeObjectURL(w)};return n?u.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},children:[u.jsx("div",{style:{padding:"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)"},children:u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[u.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Data Inspector"}),u.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"0.875rem"},children:"Verify raw CSV data against calculated metrics with step-by-step breakdowns"})]})}),u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem"},children:[u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",alignItems:"center"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Team"}),u.jsx("select",{value:e,onChange:x=>t(x.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",fontSize:"0.875rem"},children:g.map(x=>u.jsx("option",{value:x,children:x},x))})]}),u.jsxs("div",{style:{flex:1},children:[u.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Situation"}),u.jsxs("select",{value:i,onChange:x=>a(x.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",fontSize:"0.875rem"},children:[u.jsx("option",{value:"all",children:"All Situations"}),u.jsx("option",{value:"5on5",children:"5-on-5"}),u.jsx("option",{value:"5on4",children:"Power Play (5-on-4)"}),u.jsx("option",{value:"4on5",children:"Penalty Kill (4-on-5)"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsx("div",{style:{marginTop:"1.5rem"},children:u.jsxs("button",{onClick:b,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(XM,{size:16}),"Export Report"]})})]}),l&&h&&u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(600px, 1fr))",gap:"1rem"},children:[u.jsxs("div",{className:"card",children:[u.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.125rem"},children:"Raw CSV Data"}),u.jsx("div",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"0.8125rem",lineHeight:"1.8"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"0.5rem 2rem"},children:[u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"team:"}),u.jsx("span",{style:{color:"var(--color-text-primary)",textAlign:"right"},children:l.team}),u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"situation:"}),u.jsx("span",{style:{color:"var(--color-text-primary)",textAlign:"right"},children:l.situation}),u.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-border)",gridColumn:"1 / -1",margin:"0.5rem 0"}}),u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"goalsFor:"}),u.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.goalsFor}),u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"shotsOnGoalFor:"}),u.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.shotsOnGoalFor}),u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"goalsAgainst:"}),u.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.goalsAgainst}),u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"shotsOnGoalAgainst:"}),u.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.shotsOnGoalAgainst}),u.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-border)",gridColumn:"1 / -1",margin:"0.5rem 0"}}),u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"xGoalsFor:"}),u.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.xGoalsFor}),u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"xGoalsAgainst:"}),u.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.xGoalsAgainst}),u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"iceTime:"}),u.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.iceTime})]})})]}),u.jsxs("div",{className:"card",children:[u.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.125rem"},children:"Calculated Metrics"}),Object.entries(h).map(([x,_])=>u.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--color-border)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[u.jsx("h3",{style:{fontSize:"0.875rem",textTransform:"uppercase",fontWeight:600},children:x.replace("_"," ")}),_.match?u.jsx(JA,{size:16,color:"var(--color-success)"}):u.jsx(ZA,{size:16,color:"var(--color-danger)"})]}),u.jsxs("div",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"0.75rem",lineHeight:"1.6",color:"var(--color-text-secondary)"},children:[u.jsxs("div",{style:{marginBottom:"0.5rem"},children:[u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Formula: "}),u.jsx("span",{style:{color:"var(--color-text-primary)"},children:_.formula})]}),u.jsxs("div",{style:{marginBottom:"0.5rem"},children:[u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Calculation: "}),u.jsx("span",{style:{color:"var(--color-warning)"},children:_.calculation})]}),_.step1&&u.jsxs("div",{style:{marginBottom:"0.5rem"},children:[u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Step: "}),u.jsx("span",{style:{color:"var(--color-warning)"},children:_.step1})]}),u.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"2rem"},children:[u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Result: "}),u.jsx("span",{style:{color:_.match?"var(--color-success)":"var(--color-danger)",fontWeight:700},children:_.result})]}),_.expected&&u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Expected: "}),u.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:600},children:_.expected})]})]})]})]},x))]})]})]})]}):u.jsx("div",{style:{padding:"2rem"},children:"Loading..."})};class lF{constructor(e,t,i=null){this.dataProcessor=e,this.startingGoalies=i,t&&t.moneyText&&t.totalText?this.games=qA(t.moneyText,t.totalText):this.games=[]}getStartingGoalie(e,t){if(!this.startingGoalies||!this.startingGoalies.games)return null;const i=`${t.awayTeam} @ ${t.homeTeam}`,a=this.startingGoalies.games.find(l=>l.matchup===i);return a?a.away.team===e?a.away.goalie:a.home.team===e?a.home.goalie:null:null}calculateAllEdges(){return this.games.map(e=>{try{const t=this.getStartingGoalie(e.awayTeam,e),i=this.getStartingGoalie(e.homeTeam,e),a=this.dataProcessor.predictTeamScore(e.awayTeam,e.homeTeam,!1,t,e.date),l=this.dataProcessor.predictTeamScore(e.homeTeam,e.awayTeam,!0,i,e.date);return{game:`${e.awayTeam} @ ${e.homeTeam}`,gameTime:e.gameTime,awayTeam:e.awayTeam,homeTeam:e.homeTeam,date:e.date||new Date().toISOString().split("T")[0],startTimestamp:e.startTimestamp||null,goalies:{away:t,home:i},edges:{moneyline:this.calculateMoneylineEdge(e,a,l),puckLine:this.calculatePuckLineEdge(e,a,l)},rawOdds:{moneyline:e.moneyline,puckLine:e.puckLine}}}catch(t){return console.error(`Error calculating edges for ${e.awayTeam} @ ${e.homeTeam}:`,t),null}}).filter(e=>e!==null)}calculateMoneylineEdge(e,t,i){if(!e.moneyline.away||!e.moneyline.home)return{away:null,home:null};const a=this.dataProcessor.calculatePoissonWinProb(i,t),l=this.dataProcessor.calculatePoissonWinProb(t,i),c=this.dataProcessor.calculateEV(l,e.moneyline.away),h=this.dataProcessor.calculateEV(a,e.moneyline.home),f=this.dataProcessor.calculateKellyStake(l,e.moneyline.away),g=this.dataProcessor.calculateKellyStake(a,e.moneyline.home);return{away:{ev:c,evPercent:c,modelProb:l,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.away),kelly:f,odds:e.moneyline.away},home:{ev:h,evPercent:h,modelProb:a,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.home),kelly:g,odds:e.moneyline.home}}}calculatePuckLineEdge(e,t,i){if(!e.puckLine.away.odds||!e.puckLine.home.odds)return{away:null,home:null};const a=i-t,l=e.puckLine.home.spread||-1.5,c=e.puckLine.away.spread||1.5,h=a>l?.55:.45,f=1-h,g=this.dataProcessor.calculateEV(f,e.puckLine.away.odds),v=this.dataProcessor.calculateEV(h,e.puckLine.home.odds);return{away:{ev:g,evPercent:g,modelProb:f,spread:c,odds:e.puckLine.away.odds},home:{ev:v,evPercent:v,modelProb:h,spread:l,odds:e.puckLine.home.odds}}}getTopEdges(e=0){const t=this.calculateAllEdges(),i=[];return t.forEach(a=>{a.edges.moneyline.away&&a.edges.moneyline.away.ev>e&&i.push({game:a.game,gameTime:a.gameTime,market:"MONEYLINE",pick:`${a.awayTeam} (AWAY)`,team:a.awayTeam,odds:a.edges.moneyline.away.odds,ev:a.edges.moneyline.away.ev,evPercent:a.edges.moneyline.away.evPercent,modelProb:a.edges.moneyline.away.modelProb,kelly:a.edges.moneyline.away.kelly}),a.edges.moneyline.home&&a.edges.moneyline.home.ev>e&&i.push({game:a.game,gameTime:a.gameTime,market:"MONEYLINE",pick:`${a.homeTeam} (HOME)`,team:a.homeTeam,odds:a.edges.moneyline.home.odds,ev:a.edges.moneyline.home.ev,evPercent:a.edges.moneyline.home.evPercent,modelProb:a.edges.moneyline.home.modelProb,kelly:a.edges.moneyline.home.kelly}),a.edges.puckLine.away&&a.edges.puckLine.away.ev>e&&i.push({game:a.game,gameTime:a.gameTime,market:"PUCK LINE",pick:`${a.awayTeam} ${a.edges.puckLine.away.spread>0?"+":""}${a.edges.puckLine.away.spread}`,team:a.awayTeam,odds:a.edges.puckLine.away.odds,ev:a.edges.puckLine.away.ev,evPercent:a.edges.puckLine.away.evPercent,modelProb:a.edges.puckLine.away.modelProb,kelly:null}),a.edges.puckLine.home&&a.edges.puckLine.home.ev>e&&i.push({game:a.game,gameTime:a.gameTime,market:"PUCK LINE",pick:`${a.homeTeam} ${a.edges.puckLine.home.spread>0?"+":""}${a.edges.puckLine.home.spread}`,team:a.homeTeam,odds:a.edges.puckLine.home.odds,ev:a.edges.puckLine.home.ev,evPercent:a.edges.puckLine.home.evPercent,modelProb:a.edges.puckLine.home.modelProb,kelly:null})}),i.sort((a,l)=>l.evPercent-a.evPercent)}}class Fh{static generateComparisonBar(e,t,i,a=!0){const l=e/i*100,c=t/i*100,h=Math.min(Math.max(l,0),200),f=Math.min(Math.max(c,0),200),g=this.getBarColor(e,i,a),v=this.getBarColor(t,i,a),b=a?e>t:e<t;return{away:{value:e,width:h,color:g,hasAdvantage:b,vsLeague:((e-i)/i*100).toFixed(1)},home:{value:t,width:f,color:v,hasAdvantage:!b,vsLeague:((t-i)/i*100).toFixed(1)},leagueAvg:i,difference:Math.abs(e-t),advantageTeam:b?"away":"home"}}static getBarColor(e,t,i){const l=(e-t)/t*100;return i&&l>15||!i&&l<-15?"#10B981":i&&l>5||!i&&l<-5?"#0EA5E9":Math.abs(l)<=5?"#64748B":"#EF4444"}static generateDangerZoneHeatmap(e,t){return{away:{low:{shots:e.offense.low.shots,xGoals:e.offense.low.xGoals,goals:e.offense.low.goals,width:this.calculateHeatmapWidth(e.offense.low.shots,250)},medium:{shots:e.offense.medium.shots,xGoals:e.offense.medium.xGoals,goals:e.offense.medium.goals,width:this.calculateHeatmapWidth(e.offense.medium.shots,80)},high:{shots:e.offense.high.shots,xGoals:e.offense.high.xGoals,goals:e.offense.high.goals,width:this.calculateHeatmapWidth(e.offense.high.shots,35)}},home:{low:{shots:t.defense.low.shots,xGoals:t.defense.low.xGoals,goals:t.defense.low.goals,width:this.calculateHeatmapWidth(t.defense.low.shots,250)},medium:{shots:t.defense.medium.shots,xGoals:t.defense.medium.xGoals,goals:t.defense.medium.goals,width:this.calculateHeatmapWidth(t.defense.medium.shots,80)},high:{shots:t.defense.high.shots,xGoals:t.defense.high.xGoals,goals:t.defense.high.goals,width:this.calculateHeatmapWidth(t.defense.high.shots,35)}},analysis:this.analyzeDangerZoneMatchup(e,t)}}static calculateHeatmapWidth(e,t){return Math.min(e/t*100,100)}static analyzeDangerZoneMatchup(e,t){const i=e.offense.high.shots,a=t.defense.high.shots,l=i-a,c=a>0?l/a*100:0;let h="";return Math.abs(c)<10?h="Balanced high-danger shot generation":c>0?h=`Away offense generates ${Math.abs(c).toFixed(0)}% more HD shots`:h=`Home defense allows ${Math.abs(c).toFixed(0)}% fewer HD shots`,h}static generateReboundTable(e,t){return{awayOffense:{rebounds:Math.round(e.xRebFor),reboundXg:e.rebXgFor.toFixed(2),reboundGoals:e.rebGoalsFor,conversion:e.rebConversion.toFixed(1),vsLeague:e.rebConversion-15,status:e.rebConversion>18?"Hot":e.rebConversion<12?"Cold":"Average"},homeDefense:{rebounds:Math.round(t.xRebAgainst),reboundXg:t.rebXgAgainst.toFixed(2),reboundGoals:t.rebGoalsAgainst,allowedPct:t.xRebAgainst>0?(t.rebGoalsAgainst/t.xRebAgainst*100).toFixed(1):0,control:t.rebXgaPer60<(t.rebXgfPer60||4)?"Excellent":"Average"},matchupEdge:{favors:e.rebConversion>15&&t.rebXgaPer60>4?"away":t.rebXgaPer60<3&&e.rebConversion<15?"home":"neutral",summary:this.generateReboundSummary(e,t,15)}}}static generateReboundSummary(e,t,i){const a=e.rebConversion-i,l=t.rebXgaPer60;return Math.abs(a)<3&&l>3&&l<5?"Balanced rebound battle - neither team has clear edge":a<-3?`Away team cold on rebounds (${e.rebConversion.toFixed(1)}% vs ${i}% avg)`:l<3?"Home defense controls rebound positioning effectively":"Standard rebound metrics for both teams"}static generatePhysicalMetrics(e,t){return[{stat:"Shot Blocks",away:{value:e.blockingRate.toFixed(1)+"%",raw:e.blockedShotsAgainst,label:`${e.blockedShotsAgainst} blocks`},home:{value:t.blockingRate.toFixed(1)+"%",raw:t.blockedShotsAgainst,label:`${t.blockedShotsAgainst} blocks`},advantage:t.blockingRate>e.blockingRate?"home":"away",diff:Math.abs(t.blockingRate-e.blockingRate).toFixed(1)+"%"},{stat:"Takeaways",away:{value:e.takeawaysPer60.toFixed(1),raw:e.takeaways,label:`${e.takeaways} total`},home:{value:t.takeawaysPer60.toFixed(1),raw:t.takeaways,label:`${t.takeaways} total`},advantage:e.takeaways>t.takeaways?"away":"home",diff:Math.abs(e.takeaways-t.takeaways)},{stat:"DZ Giveaways",away:{value:e.dZoneGiveawaysPer60.toFixed(1),raw:e.dZoneGiveaways,label:`${e.dZoneGiveaways} mistakes`},home:{value:t.dZoneGiveawaysPer60.toFixed(1),raw:t.dZoneGiveaways,label:`${t.dZoneGiveaways} mistakes`},advantage:e.dZoneGiveaways<t.dZoneGiveaways?"away":"home",diff:Math.abs(e.dZoneGiveaways-t.dZoneGiveaways)},{stat:"Hits",away:{value:e.hitsPer60.toFixed(1),raw:e.hits,label:`${e.hits} hits`},home:{value:t.hitsPer60.toFixed(1),raw:t.hits,label:`${t.hits} hits`},advantage:e.hits>t.hits?"away":"home",diff:Math.abs(e.hits-t.hits)}]}static getImpactBadge(e){switch(e){case"CRITICAL":return{emoji:"🔥",label:"CRITICAL",color:"#EF4444"};case"HIGH":return{emoji:"🎯",label:"HIGH IMPACT",color:"#F59E0B"};case"MODERATE":return{emoji:"⚡",label:"MODERATE",color:"#3B82F6"};default:return{emoji:"📊",label:"FACTOR",color:"#64748B"}}}static getTierBadge(e){return e?e<=3?{label:"ELITE",color:"#10B981",icon:"↑"}:e<=10?{label:"STRONG",color:"#0EA5E9",icon:"↑"}:e<=22?{label:"AVERAGE",color:"#64748B",icon:"="}:{label:"WEAK",color:"#EF4444",icon:"↓"}:{label:"N/A",color:"#64748B"}}static formatGoalImpact(e){return`${e>=0?"+":""}${e.toFixed(2)}`}static getImpactColor(e,t=!0){return t?e<-.2?"#10B981":e<-.05?"#34D399":e>.2?"#EF4444":e>.05?"#F87171":"#64748B":e>0?"#10B981":"#EF4444"}}const cF=()=>{const[n,e]=H.useState(new Date);return H.useEffect(()=>{const t=setInterval(()=>e(new Date),1e3);return()=>clearInterval(t)},[]),u.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"4px"},children:[u.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--color-success)",animation:"pulse 2s infinite"}}),u.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--color-success)",fontFeatureSettings:"'tnum'"},children:n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})},uF=({firstGameTime:n})=>{const[e,t]=H.useState("");return H.useEffect(()=>{const i=()=>{const[l,c]=n.split(" "),[h,f]=l.split(":").map(Number);let g=h;c==="PM"&&h!==12&&(g+=12),c==="AM"&&h===12&&(g=0);const v=new Date;v.setHours(g,f,0,0);const x=v-new Date;if(x<=0)return"Game Starting Soon!";const _=Math.floor(x/(1e3*60*60)),w=Math.floor(x%(1e3*60*60)/(1e3*60));return`First game in ${_}h ${w}m`};t(i());const a=setInterval(()=>{t(i())},6e4);return()=>clearInterval(a)},[n]),u.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"1.25rem"},children:"⏱️"}),u.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"var(--color-info)",fontFeatureSettings:"'tnum'"},children:e})]})},dF=n=>n>=10?{grade:"A+",tier:"ELITE",color:"#10B981",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"#10B981",icon:YA}:n>=7?{grade:"A",tier:"EXCELLENT",color:"#059669",bgColor:"rgba(5, 150, 105, 0.15)",borderColor:"#059669",icon:fO}:n>=5?{grade:"B+",tier:"STRONG",color:"#0EA5E9",bgColor:"rgba(14, 165, 233, 0.15)",borderColor:"#0EA5E9",icon:ki}:n>=3?{grade:"B",tier:"GOOD",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"#8B5CF6",icon:null}:{grade:"C",tier:"VALUE",color:"#64748B",bgColor:"rgba(100, 116, 139, 0.15)",borderColor:"#64748B",icon:null},HS=({evPercent:n,size:e="default",showIcon:t=!1,showTier:i=!0})=>{const a=dF(n),l=a.icon,h={small:{padding:"0.25rem 0.5rem",gradeFont:"0.75rem",tierFont:"0.563rem",iconSize:12,gap:"0.25rem"},default:{padding:"0.375rem 0.75rem",gradeFont:"0.875rem",tierFont:"0.625rem",iconSize:14,gap:"0.25rem"},large:{padding:"0.5rem 1rem",gradeFont:"1.125rem",tierFont:"0.688rem",iconSize:16,gap:"0.375rem"}}[e];return u.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:h.gap},children:[u.jsxs("div",{style:{padding:h.padding,background:a.bgColor,border:`1px solid ${a.borderColor}`,borderRadius:"6px",fontWeight:"800",fontSize:h.gradeFont,color:a.color,letterSpacing:"-0.01em",display:"flex",alignItems:"center",gap:"0.375rem",minWidth:e==="small"?"36px":"42px",justifyContent:"center"},children:[t&&l&&u.jsx(l,{size:h.iconSize}),u.jsx("span",{children:a.grade})]}),i&&u.jsx("div",{style:{fontSize:h.tierFont,fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:a.color,opacity:.8},children:a.tier})]})},Ge={flat:{border:"1px solid rgba(100, 116, 139, 0.2)"},raised:{border:"1px solid rgba(212, 175, 55, 0.25)",shadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},elevated:{border:"2px solid rgba(16, 185, 129, 0.3)",shadow:"0 4px 16px rgba(16, 185, 129, 0.15)"}},M={hero:{size:"1.5rem",weight:"900",lineHeight:"1.2"},heading:{size:"1.125rem",weight:"800",lineHeight:"1.3",letterSpacing:"-0.01em"},subheading:{size:"0.938rem",weight:"700"},body:{size:"0.875rem",weight:"600",lineHeight:"1.5"},label:{size:"0.75rem",weight:"600",letterSpacing:"0.03em",textTransform:"uppercase"},caption:{size:"0.688rem",weight:"500",lineHeight:"1.5"}},Ae={cardPadding:"0.875rem",sectionGap:"0.75rem",innerPadding:"0.75rem",borderRadius:"10px"},Yt={hero:"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.04) 50%, rgba(16, 185, 129, 0.08) 100%)",factors:"linear-gradient(180deg, rgba(212, 175, 55, 0.05) 0%, rgba(212, 175, 55, 0.02) 100%)",moneyline:"linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0.02) 100%)",total:"linear-gradient(135deg, rgba(168, 85, 247, 0.08) 0%, rgba(168, 85, 247, 0.02) 100%)"},Qc=n=>n>=10?{color:"#10B981",bg:"rgba(16, 185, 129, 0.15)",label:"ELITE",intensity:5}:n>=5?{color:"#059669",bg:"rgba(5, 150, 105, 0.12)",label:"STRONG",intensity:4}:n>=2?{color:"#0EA5E9",bg:"rgba(14, 165, 233, 0.12)",label:"GOOD",intensity:3}:n>=0?{color:"#8B5CF6",bg:"rgba(139, 92, 246, 0.12)",label:"SLIGHT",intensity:2}:{color:"#64748B",bg:"rgba(100, 116, 139, 0.08)",label:"NEGATIVE",intensity:1},hF=(n,e)=>{const t=Math.abs(e-.5);return n>10&&t>.15?{level:"VERY HIGH",color:"#10B981"}:n>5&&t>.1?{level:"HIGH",color:"#059669"}:n>2?{level:"MEDIUM",color:"#0EA5E9"}:{level:"LOW",color:"#8B5CF6"}},Ci={normal:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",slow:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},fF=({awayGoalie:n,homeGoalie:e,awayTeam:t,homeTeam:i,isMobile:a})=>{const l=n&&n.name,c=e&&e.name;if(!l&&!c)return u.jsx(yh,{title:"Goaltender Matchup",icon:u.jsx(li,{size:18}),isMobile:a,importance:"HIGH",children:u.jsxs("div",{style:{padding:a?Ae.innerPadding:"1.5rem",textAlign:"center",background:Yt.factors,border:Ge.flat.border,borderRadius:"8px"},children:[u.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:"⏳"}),u.jsx("div",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:"Waiting for Goalie Confirmation"}),u.jsx("div",{style:{fontSize:M.body.size,color:"var(--color-text-muted)",lineHeight:M.body.lineHeight},children:"Starting goalies typically confirmed 1-2 hours before game time. Check back closer to puck drop."})]})});console.log("🎯 GoalieMatchupSection checking stats:",{awayGoalie:{name:n?.name,gsae:n?.gsae,hasGSAE:n?.gsae!==void 0},homeGoalie:{name:e?.name,gsae:e?.gsae,hasGSAE:e?.gsae!==void 0}});const h=n&&n.gsae!==void 0,f=e&&e.gsae!==void 0;if(console.log("🎯 Stats check result:",{awayHasStats:h,homeHasStats:f}),h&&!f||!h&&f){const w=h?n:e,E=h?t:i,P=h?i:t,N=h?e:n,V=parseFloat(w.gsae)||0,L=V>10?"ELITE":V>5?"STRONG":V>-5?"AVERAGE":"WEAK",ne=V>10?"#10B981":V>5?"#60A5FA":V>-5?"#8B5CF6":"#EF4444";return u.jsxs(yh,{title:"Goaltender Matchup",icon:u.jsx(li,{size:18}),isMobile:a,importance:"HIGH",children:[u.jsxs("div",{style:{padding:a?Ae.innerPadding:"1rem",background:`linear-gradient(135deg, ${ne}15 0%, ${ne}08 100%)`,border:`1px solid ${ne}40`,borderRadius:"8px",marginBottom:a?Ae.innerPadding:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[u.jsx(li,{size:20,color:ne}),u.jsxs("span",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:ne},children:[L," GOALTENDER - ",E]})]}),u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-secondary)",textAlign:"center",fontStyle:"italic"},children:[w.name," • ",V>=0?"+":"",V.toFixed(2)," GSAE • ",P," goalie stats unavailable"]})]}),u.jsx(Ep,{goalie:w,team:E,isMobile:a,isAway:!1}),u.jsxs("div",{style:{marginTop:a?Ae.innerPadding:"1rem",padding:a?"0.75rem":"1rem",background:"rgba(139, 92, 246, 0.08)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:M.body.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:[u.jsx("strong",{children:P})," ",N?.name||"Goalie"]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",fontStyle:"italic"},children:"Advanced stats not yet available"})]})]})}if(!h&&!f)return u.jsx(yh,{title:"Goaltender Matchup",icon:u.jsx(li,{size:18}),isMobile:a,importance:"HIGH",children:u.jsxs("div",{style:{padding:a?Ae.innerPadding:"1.5rem",textAlign:"center",background:Yt.factors,border:Ge.flat.border,borderRadius:"8px"},children:[u.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:"📊"}),u.jsxs("div",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:[t," ",n?.name||"TBD"," vs ",i," ",e?.name||"TBD"]}),u.jsx("div",{style:{fontSize:M.body.size,color:"var(--color-text-muted)",lineHeight:M.body.lineHeight},children:"Advanced goalie statistics not yet available for these netminders. Check back later for detailed analytics."})]})});const g=parseFloat(n.gsae)||0,v=parseFloat(e.gsae)||0,b=Math.abs(g-v),x=g>v?t:i,_=b/10;return u.jsxs(yh,{title:"Goaltender Matchup",icon:u.jsx(li,{size:18}),isMobile:a,importance:"HIGH",children:[u.jsxs("div",{style:{padding:a?Ae.innerPadding:"1.125rem",background:b>5?"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.06) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.12) 0%, rgba(139, 92, 246, 0.06) 100%)",border:b>5?"1px solid rgba(16, 185, 129, 0.35)":"1px solid rgba(139, 92, 246, 0.35)",borderRadius:"10px",marginBottom:a?Ae.innerPadding:"1.25rem",boxShadow:b>5?"0 4px 12px rgba(16, 185, 129, 0.1)":"0 4px 12px rgba(139, 92, 246, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.625rem",marginBottom:"0.5rem"},children:[u.jsx(li,{size:22,color:b>5?"#10B981":"#8B5CF6",strokeWidth:2.5}),u.jsx("span",{style:{fontSize:a?"0.95rem":"1.05rem",fontWeight:"700",color:b>5?"#10B981":"#8B5CF6",letterSpacing:"0.5px"},children:b>5?`${x} HAS GOALIE ADVANTAGE`:"PRETTY EVEN GOALIE MATCHUP"})]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-secondary)",lineHeight:M.body.lineHeight,fontStyle:"italic",textAlign:"center",paddingTop:"0.25rem",borderTop:b>5?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(139, 92, 246, 0.2)"},children:b>5?`${b.toFixed(1)} GSAE difference • Expected impact: ~${_.toFixed(2)} goals`:"Both goalies performing at similar levels. Goaltending unlikely to be deciding factor."})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"1fr auto 1fr",gap:a?Ae.innerPadding:"1.5rem",alignItems:"stretch"},children:[u.jsx(Ep,{goalie:n,team:t,isMobile:a,isAway:!0}),!a&&u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:M.heading.size,fontWeight:M.heading.weight,color:"var(--color-accent)",padding:"0 0.5rem"},children:"VS"}),u.jsx(Ep,{goalie:e,team:i,isMobile:a,isAway:!1})]}),u.jsxs("div",{style:{marginTop:a?Ae.innerPadding:"1rem",padding:a?Ae.innerPadding:"1rem",background:Yt.factors,border:Ge.flat.border,borderRadius:"8px"},children:[u.jsx("div",{style:{fontSize:M.caption.size,fontWeight:M.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:"SAVE PERCENTAGE BY DANGER ZONE"}),u.jsx(mF,{awayGoalie:n,homeGoalie:e,awayTeam:t,homeTeam:i,isMobile:a})]})]})},Ep=({goalie:n,team:e,isMobile:t,isAway:i})=>{const a=parseFloat(n.gsae)||0,l=pF(a),c=l.tier==="ELITE",h=l.tier==="STRONG";return u.jsxs("div",{style:{padding:t?Ae.innerPadding:"1rem",background:Yt.factors,border:Ge.flat.border,borderRadius:"8px",position:"relative",overflow:"hidden"},children:[u.jsxs("div",{style:{marginBottom:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"0.5rem"},children:[u.jsx("div",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:n.name}),u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsx("span",{children:e}),u.jsx("span",{children:"•"}),u.jsxs("span",{children:[n.gamesPlayed," GP"]}),n.recentForm&&n.recentForm!=="Limited Sample"&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"•"}),u.jsx("span",{style:{color:n.recentForm==="Hot"?"#10B981":n.recentForm==="Cold"?"#EF4444":"#8B5CF6",fontWeight:M.label.weight},children:n.recentForm})]})]})]}),u.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"0.75rem",background:c?"rgba(16, 185, 129, 0.1)":h?"rgba(14, 165, 233, 0.1)":"rgba(139, 92, 246, 0.05)",borderRadius:"6px"},children:[u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Goals Saved Above Expected"}),u.jsxs("div",{style:{fontSize:"2rem",fontWeight:M.heading.weight,color:c?"#10B981":h?"#0EA5E9":a>0?"#8B5CF6":"#EF4444",fontFeatureSettings:"'tnum'",marginBottom:"0.25rem"},children:[a>0?"+":"",n.gsae]}),u.jsx(gF,{rank:l.rank,tier:l.tier})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginBottom:"0.75rem"},children:[u.jsx(ph,{label:"Save %",value:`${n.savePct}%`}),u.jsx(ph,{label:"HD Sv%",value:`${n.hdSavePct}%`,isHighlight:!0}),u.jsx(ph,{label:"xGA/GP",value:n.xGoalsAgainst}),u.jsx(ph,{label:"GA/GP",value:n.goalsAgainst})]}),u.jsxs("div",{style:{padding:"0.5rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"4px",fontSize:M.caption.size,textAlign:"center"},children:[u.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Rebound Control: "}),u.jsx("span",{style:{color:n.reboundControl==="Excellent"?"#10B981":n.reboundControl==="Poor"?"#EF4444":"#8B5CF6",fontWeight:M.label.weight},children:n.reboundControl})]})]})},mF=({awayGoalie:n,homeGoalie:e,awayTeam:t,homeTeam:i,isMobile:a})=>{const l=[{label:"Low Danger",away:parseFloat(n.lowDangerSavePct)||97,home:parseFloat(e.lowDangerSavePct)||97,color:"#64748B"},{label:"Medium Danger",away:parseFloat(n.mediumDangerSavePct)||92,home:parseFloat(e.mediumDangerSavePct)||92,color:"#F59E0B"},{label:"High Danger",away:parseFloat(n.hdSavePct)||85,home:parseFloat(e.hdSavePct)||85,color:"#EF4444"}];return u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:l.map((c,h)=>u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:M.caption.size,color:c.color,marginBottom:"0.375rem",fontWeight:M.label.weight},children:c.label}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.5rem",alignItems:"center"},children:[u.jsxs("div",{style:{textAlign:"right",fontSize:M.body.size,fontWeight:M.body.weight},children:[u.jsxs("span",{style:{color:c.away>c.home?"#10B981":"var(--color-text-secondary)",fontFeatureSettings:"'tnum'"},children:[c.away.toFixed(1),"%"]}),u.jsx("span",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",marginLeft:"0.25rem"},children:t})]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)"},children:"vs"}),u.jsxs("div",{style:{textAlign:"left",fontSize:M.body.size,fontWeight:M.body.weight},children:[u.jsx("span",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",marginRight:"0.25rem"},children:i}),u.jsxs("span",{style:{color:c.home>c.away?"#10B981":"var(--color-text-secondary)",fontFeatureSettings:"'tnum'"},children:[c.home.toFixed(1),"%"]})]})]})]},h))})},ph=({label:n,value:e,isHighlight:t})=>u.jsxs("div",{style:{padding:"0.5rem",background:t?"rgba(239, 68, 68, 0.1)":"rgba(26, 31, 46, 0.4)",borderRadius:"4px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",marginBottom:"0.125rem"},children:n}),u.jsx("div",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:t?"#EF4444":"var(--color-text-primary)",fontFeatureSettings:"'tnum'"},children:e})]}),gF=({rank:n,tier:e})=>u.jsxs("span",{style:{fontSize:M.caption.size,fontWeight:M.label.weight,color:e==="ELITE"?"#10B981":e==="STRONG"?"#0EA5E9":e==="AVERAGE"?"#8B5CF6":"#EF4444",background:e==="ELITE"?"rgba(16, 185, 129, 0.2)":e==="STRONG"?"rgba(14, 165, 233, 0.2)":e==="AVERAGE"?"rgba(139, 92, 246, 0.2)":"rgba(239, 68, 68, 0.2)",padding:"0.125rem 0.375rem",borderRadius:"4px",textTransform:"uppercase"},children:["#",n," ",e]}),yh=({title:n,icon:e,children:t,isMobile:i,importance:a})=>u.jsxs("div",{style:{marginBottom:i?Ae.sectionGap:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:i?Ae.innerPadding:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e,u.jsx("span",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)"},children:n})]}),a&&u.jsx("span",{style:{fontSize:M.caption.size,fontWeight:M.label.weight,color:a==="HIGH"?"#10B981":a==="MODERATE"?"#F59E0B":"#64748B",textTransform:"uppercase"},children:a})]}),t]});function pF(n){return n>10?{rank:5,tier:"ELITE"}:n>5?{rank:12,tier:"STRONG"}:n>-5?{rank:18,tier:"AVERAGE"}:{rank:28,tier:"WEAK"}}const yF=({awayTeam:n,homeTeam:e,dangerZoneData:t,reboundData:i,physicalData:a,possessionData:l,regressionData:c,awayGoalie:h,homeGoalie:f,isMobile:g,bestEdge:v,statsAnalyzer:b,dataProcessor:x,game:_,defaultExpanded:w=!1})=>{const[E,P]=H.useState(w),V=E?[]:(()=>{try{const L=[],ne=v?.type||"TOTAL";if(x&&x.scheduleHelper&&_&&_.date){const W=x.scheduleHelper,q=W.getDaysRest(n,_.date),D=W.getConsecutiveAwayGames(n,_.date),I=W.getRoadTripAdjustment(n,_.date);q===1?L.push(`⚡ ${n} on back-to-back (-3% fatigue penalty in model)`):I<-.05?L.push(`🛫 ${n} fatigued (game ${D+1} of road trip, ${(I*100).toFixed(0)}% penalty)`):q>=3&&L.push(`💪 ${n} well-rested (${q} days off = +4% boost)`);const C=W.getDaysRest(e,_.date),{isHomecoming:F,tripLength:k}=W.isHomecomingGame(e,_.date),z=W.getHomecomingAdjustment(e,_.date);C===1&&L.length<3?L.push(`⚡ ${e} on back-to-back (-3% fatigue penalty in model)`):F&&L.length<3?L.push(`🏠 ${e} homecoming after ${k}-game trip (+${(z*100).toFixed(0)}% boost)`):C>=3&&L.length<3&&L.push(`💪 ${e} well-rested (${C} days off = +4% boost)`)}if(L.length<3){if(ne==="TOTAL"||ne==="OVER"||ne==="UNDER"){if(t&&t.away&&t.home){const W=t.away.high?.shots||0,q=t.home.high?.shots||0;if(Math.abs(W-q)>2){const D=W>q?n:e,I=Math.abs(W-q).toFixed(1);L.push(`🎯 ${D} generates ${I} more high-danger chances/game (quality scoring opportunities)`)}}if(a&&a.length>0&&L.length<3){const W=a.find(q=>q.stat==="Shot Blocks");if(W){const q=W.advantage==="away"?n:e;L.push(`🛡️ ${q} blocks ${W.diff} more shots/game (limits scoring chances)`)}}}if(l&&l.away&&l.home&&L.length<3){const W=l.away.corsiPct||50,q=l.home.corsiPct||50;if(Math.abs(W-q)>5){const D=W>q?n:e,I=Math.max(W,q).toFixed(1),C=ne==="MONEYLINE"?"dictates pace":"drives scoring chances";L.push(`📊 ${D} controls ${I}% shot attempts (${C})`)}}}if(c&&c.away&&c.home&&L.length<3){const W=c.away.pdo||100,q=c.home.pdo||100;if(W>102){const D=ne.includes("UNDER")?"supports UNDER":"overperforming";L.push(`⚠️ ${n} PDO ${W.toFixed(1)} (unsustainable luck — ${D})`)}else if(q>102&&L.length<3){const D=ne.includes("UNDER")?"supports UNDER":"overperforming";L.push(`⚠️ ${e} PDO ${q.toFixed(1)} (unsustainable luck — ${D})`)}else if(W<98&&L.length<3){const D=ne.includes("OVER")?"supports OVER":"due to bounce back";L.push(`📈 ${n} PDO ${W.toFixed(1)} (unlucky — ${D})`)}else if(q<98&&L.length<3){const D=ne.includes("OVER")?"supports OVER":"due to bounce back";L.push(`📈 ${e} PDO ${q.toFixed(1)} (unlucky — ${D})`)}}return L.slice(0,3)}catch(L){return console.error("Quick Hits generation error:",L),[]}})();return u.jsxs("div",{style:{background:Yt.factors,border:Ge.raised.border,boxShadow:Ge.raised.shadow,borderRadius:Ae.borderRadius,overflow:"hidden",marginBottom:g?Ae.sectionGap:"1.5rem",transition:Ci.normal},children:[u.jsxs("button",{onClick:()=>P(!E),"aria-expanded":E,"aria-controls":"advanced-metrics-content","aria-label":`${E?"Collapse":"Expand"} advanced metrics section`,style:{width:"100%",padding:g?Ae.cardPadding:"1.25rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:Ci.normal},onMouseEnter:L=>L.currentTarget.style.background="rgba(212, 175, 55, 0.1)",onMouseLeave:L=>L.currentTarget.style.background="transparent",children:[u.jsxs("div",{style:{textAlign:"left"},children:[u.jsxs("div",{style:{fontSize:g?M.body.size:M.heading.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem",letterSpacing:M.heading.letterSpacing},children:[u.jsx(Wa,{size:20,style:{color:"var(--color-accent)"}}),"Deep Dive: Advanced Metrics"]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",fontWeight:M.caption.weight,lineHeight:M.caption.lineHeight},children:E?"7 statistical categories expanded":"Danger zones, goalies, special teams, and more"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-accent)"},children:[u.jsx("span",{style:{fontSize:M.label.size,fontWeight:M.label.weight,textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:E?"Collapse":"Expand"}),E?u.jsx(Dy,{size:20}):u.jsx(jy,{size:20})]})]}),!E&&V.length>0&&u.jsxs("div",{style:{padding:g?Ae.cardPadding:"1.25rem",paddingTop:0,borderTop:Ge.flat.border},children:[u.jsxs("div",{style:{fontSize:M.label.size,fontWeight:M.label.weight,color:"var(--color-accent)",marginBottom:"0.75rem",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(ky,{size:16}),"Quick Hits"]}),u.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:V.map((L,ne)=>u.jsxs("li",{style:{fontSize:M.body.size,color:"var(--color-text-primary)",marginBottom:ne<V.length-1?"0.5rem":0,paddingLeft:"1.25rem",position:"relative",lineHeight:M.body.lineHeight,fontWeight:M.body.weight},children:[u.jsx("span",{style:{position:"absolute",left:0,color:"var(--color-accent)",fontWeight:M.heading.weight},children:"•"}),L]},ne))}),u.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:Ge.flat.border,textAlign:"center"},children:u.jsx("button",{onClick:()=>P(!0),style:{background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:M.label.size,fontWeight:M.body.weight,color:"var(--color-accent)",cursor:"pointer",transition:Ci.normal},onMouseEnter:L=>{L.currentTarget.style.background="rgba(212, 175, 55, 0.15)",L.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:L=>{L.currentTarget.style.background="rgba(212, 175, 55, 0.1)",L.currentTarget.style.transform="translateY(0)"},children:"View Full Breakdown →"})})]}),E&&u.jsx("div",{id:"advanced-metrics-content",role:"region","aria-label":"Advanced metrics detailed breakdown",style:{padding:g?Ae.cardPadding:"1.5rem",paddingTop:0,borderTop:Ge.flat.border,maxHeight:E?"10000px":"0",overflow:E?"visible":"hidden",transition:"max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:(()=>{const L=v?.market==="TOTAL";return[{id:"danger-zone",priority:L?1:4,component:t&&u.jsx(vF,{data:t,awayTeam:n,homeTeam:e,isMobile:g,statsAnalyzer:b,bestEdge:v},"danger-zone")},{id:"goalie",priority:3,component:u.jsx(fF,{awayGoalie:h,homeGoalie:f,awayTeam:n,homeTeam:e,isMobile:g,bestEdge:v},"goalie")},{id:"rebound",priority:L?1:4,component:i&&u.jsx(xF,{data:i,awayTeam:n,homeTeam:e,isMobile:g,bestEdge:v},"rebound")},{id:"physical",priority:L?2:5,component:a&&u.jsx(bF,{data:a,awayTeam:n,homeTeam:e,isMobile:g,bestEdge:v},"physical")},{id:"possession",priority:L?5:1,component:l&&u.jsx(SF,{data:l,awayTeam:n,homeTeam:e,isMobile:g,bestEdge:v},"possession")},{id:"regression",priority:4,component:c&&u.jsx(_F,{data:c,awayTeam:n,homeTeam:e,isMobile:g,bestEdge:v},"regression")}].sort((W,q)=>W.priority-q.priority).map(W=>W.component).filter(Boolean)})()})]})},vF=({data:n,awayTeam:e,homeTeam:t,isMobile:i,statsAnalyzer:a})=>{const l=n.away.high?.shots||0,c=n.home.high?.shots||0,h=Math.abs(l-c),f=l>c?e:t,g=l>c?t:e,v=h*.23;return u.jsxs(ju,{title:"Shot Danger Distribution",icon:u.jsx(Wa,{size:18}),isMobile:i,importance:"HIGH",children:[u.jsxs("div",{style:{padding:i?Ae.innerPadding:"0.875rem",background:h>2?"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:h>2?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:i?Ae.innerPadding:"1rem",textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[u.jsx(Wa,{size:20,color:h>2?"#EF4444":"#8B5CF6"}),u.jsx("span",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:h>2?"#EF4444":"#8B5CF6"},children:h>2?`${f} GENERATES MORE HIGH-DANGER SHOTS`:"PRETTY EVEN MATCHUP - HIGH-DANGER CHANCES"})]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-secondary)",lineHeight:M.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:h>2?`${h.toFixed(1)} more HD shots/game vs ${g} • ~${v.toFixed(2)} goal impact`:"Both teams generate similar high-danger opportunities. Expect tight scoring chances."})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"repeat(3, 1fr)",gap:i?Ae.innerPadding:"1rem",marginBottom:"1rem"},children:[u.jsx(Rp,{title:"Low Danger",color:"#64748B",awayShots:n.away.low.shots,homeShots:n.home.low.shots,awayXg:n.away.low.xGoals,homeXg:n.home.low.xGoals,awayTeam:e,homeTeam:t,isMobile:i}),u.jsx(Rp,{title:"Medium Danger",color:"#F59E0B",awayShots:n.away.medium.shots,homeShots:n.home.medium.shots,awayXg:n.away.medium.xGoals,homeXg:n.home.medium.xGoals,awayTeam:e,homeTeam:t,isMobile:i}),u.jsx(Rp,{title:"High Danger",color:"#EF4444",awayShots:n.away.high.shots,homeShots:n.home.high.shots,awayXg:n.away.high.xGoals,homeXg:n.home.high.xGoals,awayTeam:e,homeTeam:t,isMobile:i})]}),n.analysis&&u.jsxs("div",{style:{padding:i?Ae.innerPadding:"0.75rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"6px",fontSize:M.label.size,color:"var(--color-text-secondary)",fontStyle:"italic",lineHeight:M.body.lineHeight},children:["💡 ",n.analysis]})]})},Rp=({title:n,color:e,awayShots:t,homeShots:i,awayXg:a,homeXg:l,awayTeam:c,homeTeam:h,isMobile:f})=>{const g=Math.max(t,i),v=g>0?t/g*100:0,b=g>0?i/g*100:0;return u.jsxs("div",{style:{padding:f?Ae.innerPadding:"1rem",background:Yt.factors,border:`1px solid ${e}40`,borderRadius:"8px",transition:Ci.normal},children:[u.jsx("div",{style:{fontSize:M.label.size,fontWeight:M.heading.weight,textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing,color:e,marginBottom:f?"0.5rem":"0.75rem"},children:n}),u.jsxs("div",{style:{marginBottom:"0.5rem"},children:[u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem",display:"flex",justifyContent:"space-between",fontWeight:M.body.weight},children:[u.jsxs("span",{children:[c," OFF"]}),u.jsxs("span",{style:{fontWeight:M.heading.weight,fontFeatureSettings:"'tnum'"},children:[t," shots (",a.toFixed(2)," xG)"]})]}),u.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"6px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${v}%`,height:"100%",background:`linear-gradient(90deg, ${e} 0%, ${e}CC 100%)`,borderRadius:"6px",transition:Ci.normal}})})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem",display:"flex",justifyContent:"space-between",fontWeight:M.body.weight},children:[u.jsxs("span",{children:[h," DEF"]}),u.jsxs("span",{style:{fontWeight:M.heading.weight,fontFeatureSettings:"'tnum'"},children:[i," shots (",l.toFixed(2)," xG)"]})]}),u.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"6px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${b}%`,height:"100%",background:`linear-gradient(90deg, ${e} 0%, ${e}CC 100%)`,borderRadius:"6px",transition:Ci.normal}})})]})]})},xF=({data:n,awayTeam:e,homeTeam:t,isMobile:i})=>{const a=parseFloat(n.awayOffense.conversion)||0,l=n.homeDefense.control,c=n.matchupEdge.favors;return u.jsxs(ju,{title:"Second-Chance Opportunities",icon:u.jsx(Va,{size:18}),isMobile:i,importance:"HIGH",children:[u.jsxs("div",{style:{padding:i?Ae.innerPadding:"0.875rem",background:c==="away"?"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)":c==="home"?"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:c==="away"?"1px solid rgba(16, 185, 129, 0.3)":c==="home"?"1px solid rgba(14, 165, 233, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:i?Ae.innerPadding:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[u.jsx(Va,{size:20,color:c==="away"?"#10B981":c==="home"?"#0EA5E9":"#8B5CF6"}),u.jsx("span",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:c==="away"?"#10B981":c==="home"?"#0EA5E9":"#8B5CF6"},children:c==="away"?`${e} OFFENSE CREATES MORE SECOND CHANCES`:c==="home"?`${t} DEFENSE CONTROLS REBOUND POSITIONING`:"PRETTY EVEN MATCHUP - REBOUND CONTROL"})]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-secondary)",lineHeight:M.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:c!=="neutral"?n.matchupEdge.summary:"Both teams balanced in creating and controlling rebounds. No significant advantage."})]}),u.jsxs("div",{style:{padding:i?Ae.innerPadding:"1rem",background:Yt.factors,border:Ge.flat.border,borderRadius:"8px",marginBottom:i?Ae.innerPadding:"1rem"},children:[u.jsxs("div",{style:{fontSize:M.caption.size,fontWeight:M.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing,textAlign:"center"},children:[e," OFFENSE vs ",t," DEFENSE"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"1rem",alignItems:"center"},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:a>15?"#10B981":"#EF4444",marginBottom:"0.25rem",fontFeatureSettings:"'tnum'"},children:[n.awayOffense.conversion,"%"]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",marginBottom:"0.375rem"},children:"Conversion"}),u.jsxs("div",{style:{fontSize:M.caption.size,fontWeight:M.body.weight,color:"var(--color-text-primary)"},children:[n.awayOffense.rebounds," reb • ",n.awayOffense.reboundXg," xG"]}),n.awayOffense.status&&u.jsx("div",{style:{marginTop:"0.375rem",display:"inline-block",padding:"0.125rem 0.375rem",borderRadius:"3px",background:n.awayOffense.status==="Hot"?"#10B98120":n.awayOffense.status==="Cold"?"#EF444420":"#64748B20",color:n.awayOffense.status==="Hot"?"#10B981":n.awayOffense.status==="Cold"?"#EF4444":"#64748B",fontSize:M.caption.size,fontWeight:M.label.weight,textTransform:"uppercase"},children:n.awayOffense.status})]}),u.jsx("div",{style:{fontSize:M.subheading.size,color:"var(--color-accent)",fontWeight:M.heading.weight},children:"→"}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:l==="Excellent"?"#10B981":"#64748B",marginBottom:"0.25rem"},children:l}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",marginBottom:"0.375rem"},children:"Control"}),u.jsxs("div",{style:{fontSize:M.caption.size,fontWeight:M.body.weight,color:"var(--color-text-primary)"},children:[n.homeDefense.rebounds," reb • ",n.homeDefense.reboundXg," xG"]})]})]})]})]})},bF=({data:n,awayTeam:e,homeTeam:t,isMobile:i})=>{let a=e,l=0,c=0;n.forEach(g=>{g.advantage==="away"&&l++,g.advantage==="home"&&c++}),a=l>c?e:t;const h=n.find(g=>g.stat==="Shot Blocks"),f=n.find(g=>g.stat==="Hits");return u.jsxs(ju,{title:"Physical Play & Defense",icon:u.jsx(li,{size:18}),isMobile:i,importance:"MODERATE",children:[l!==c&&u.jsxs("div",{style:{padding:i?Ae.innerPadding:"0.875rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"8px",marginBottom:i?Ae.innerPadding:"1rem",textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[u.jsx(ew,{size:20,color:"var(--color-accent)"}),u.jsxs("span",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:"var(--color-accent)"},children:[a," has the PHYSICAL EDGE"]})]}),h&&f&&u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",fontWeight:M.caption.weight},children:[Math.abs(parseFloat(h.diff))," more blocks, ",Math.abs(parseFloat(f.diff))," more hits"]})]}),u.jsx("div",{style:{display:"grid",gap:i?Ae.innerPadding:"0.75rem"},children:n.map((g,v)=>u.jsx(TF,{stat:g.stat,awayValue:g.away.value,awayLabel:g.away.label,homeValue:g.home.value,homeLabel:g.home.label,advantage:g.advantage,diff:g.diff,awayTeam:e,homeTeam:t,isMobile:i},v))})]})},TF=({stat:n,awayValue:e,awayLabel:t,homeValue:i,homeLabel:a,advantage:l,diff:c,awayTeam:h,homeTeam:f,isMobile:g})=>u.jsxs("div",{style:{padding:g?Ae.innerPadding:"0.875rem",background:Yt.factors,border:Ge.flat.border,borderRadius:"6px",transition:Ci.normal},children:[u.jsx("div",{style:{fontSize:M.caption.size,fontWeight:M.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.625rem",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:n}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:g?"0.5rem":"1rem",alignItems:"center"},children:[u.jsxs("div",{style:{textAlign:"left",color:l==="away"?"#10B981":"var(--color-text-secondary)",fontWeight:l==="away"?M.heading.weight:M.body.weight},children:[u.jsx("div",{style:{fontSize:M.body.size,fontFeatureSettings:"'tnum'",lineHeight:M.body.lineHeight},children:e}),u.jsx("div",{style:{fontSize:M.caption.size,opacity:.7,fontWeight:M.caption.weight},children:t})]}),u.jsxs("div",{style:{fontSize:M.caption.size,fontWeight:M.heading.weight,color:"var(--color-text-muted)",textAlign:"center"},children:["Δ ",c]}),u.jsxs("div",{style:{textAlign:"right",color:l==="home"?"#10B981":"var(--color-text-secondary)",fontWeight:l==="home"?M.heading.weight:M.body.weight},children:[u.jsx("div",{style:{fontSize:M.body.size,fontFeatureSettings:"'tnum'",lineHeight:M.body.lineHeight},children:i}),u.jsx("div",{style:{fontSize:M.caption.size,opacity:.7,fontWeight:M.caption.weight},children:a})]})]})]}),SF=({data:n,awayTeam:e,homeTeam:t,isMobile:i})=>{const a=n.away?.corsiPct||50,l=n.home?.corsiPct||50,c=n.away?.fenwickPct||50,h=n.home?.fenwickPct||50,f=n.away?.xGoalsPct||50,g=n.home?.xGoalsPct||50,v=n.away?.faceoffPct||50,b=n.home?.faceoffPct||50,x=(a+c+f)/3,_=(l+h+g)/3,w=x>_?e:t,E=Math.abs(x-_).toFixed(1);return u.jsxs(ju,{title:"Possession & Control",icon:u.jsx(ki,{size:18}),isMobile:i,importance:"MODERATE",children:[u.jsxs("div",{style:{padding:i?Ae.innerPadding:"0.875rem",background:E>3?"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:E>3?"1px solid rgba(14, 165, 233, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:i?Ae.innerPadding:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[u.jsx(ki,{size:20,color:E>3?"#0EA5E9":"#8B5CF6"}),u.jsx("span",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:E>3?"#0EA5E9":"#8B5CF6"},children:E>3?`${w} CONTROLS POSSESSION`:"PRETTY EVEN MATCHUP - POSSESSION"})]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-secondary)",lineHeight:M.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:E>3?`${E}% advantage in shot attempts. More zone time = more scoring chances.`:"Both teams control the puck equally. Possession unlikely to be a deciding factor."})]}),u.jsx(Ip,{label:"Shot Attempts (Corsi)",awayValue:a,homeValue:l,awayTeam:e,homeTeam:t,isMobile:i}),u.jsx(Ip,{label:"Unblocked Shots (Fenwick)",awayValue:c,homeValue:h,awayTeam:e,homeTeam:t,isMobile:i}),u.jsx(Ip,{label:"Expected Goals Share",awayValue:f,homeValue:g,awayTeam:e,homeTeam:t,isMobile:i}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:i?Ae.innerPadding:"1rem",marginTop:i?Ae.innerPadding:"1rem"},children:[u.jsx(WS,{team:e,percentage:v,isMobile:i}),u.jsx(WS,{team:t,percentage:b,isMobile:i})]})]})},Ip=({label:n,awayValue:e,homeValue:t,awayTeam:i,homeTeam:a,isMobile:l})=>{const h=e>t?"#10B981":"#64748B",f=t>e?"#10B981":"#64748B";return u.jsxs("div",{style:{marginBottom:l?Ae.innerPadding:"1rem",padding:l?Ae.innerPadding:"0.875rem",background:Yt.factors,border:Ge.flat.border,borderRadius:"8px"},children:[u.jsxs("div",{style:{fontSize:M.caption.size,fontWeight:M.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{children:n}),u.jsxs("span",{style:{fontSize:M.caption.size,color:"rgba(212, 175, 55, 0.8)"},children:["League Avg: ",50,"%"]})]}),u.jsxs("div",{style:{marginBottom:"0.625rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:M.caption.size},children:[u.jsx("span",{style:{fontWeight:M.body.weight,color:"var(--color-text-primary)"},children:i}),u.jsxs("span",{style:{fontWeight:M.heading.weight,color:h,fontFeatureSettings:"'tnum'"},children:[e.toFixed(1),"%",e>50&&u.jsx("span",{style:{color:"#10B981",marginLeft:"0.25rem"},children:"↑"}),e<50&&u.jsx("span",{style:{color:"#EF4444",marginLeft:"0.25rem"},children:"↓"})]})]}),u.jsxs("div",{style:{width:"100%",height:"10px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"5px",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(212, 175, 55, 0.6)",zIndex:2}}),u.jsx("div",{style:{width:`${e}%`,height:"100%",background:`linear-gradient(90deg, ${h} 0%, ${h}CC 100%)`,borderRadius:"5px",transition:Ci.normal,position:"relative",zIndex:1}})]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:M.caption.size},children:[u.jsx("span",{style:{fontWeight:M.body.weight,color:"var(--color-text-primary)"},children:a}),u.jsxs("span",{style:{fontWeight:M.heading.weight,color:f,fontFeatureSettings:"'tnum'"},children:[t.toFixed(1),"%",t>50&&u.jsx("span",{style:{color:"#10B981",marginLeft:"0.25rem"},children:"↑"}),t<50&&u.jsx("span",{style:{color:"#EF4444",marginLeft:"0.25rem"},children:"↓"})]})]}),u.jsxs("div",{style:{width:"100%",height:"10px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"5px",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(212, 175, 55, 0.6)",zIndex:2}}),u.jsx("div",{style:{width:`${t}%`,height:"100%",background:`linear-gradient(90deg, ${f} 0%, ${f}CC 100%)`,borderRadius:"5px",transition:Ci.normal,position:"relative",zIndex:1}})]})]})]})},WS=({team:n,percentage:e,isMobile:t})=>{const a=2*Math.PI*40,l=e/100*a,c=e>50?"#10B981":e<50?"#EF4444":"#8B5CF6";return u.jsxs("div",{style:{padding:t?Ae.innerPadding:"1rem",background:Yt.factors,border:Ge.flat.border,borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[u.jsxs("div",{style:{fontSize:M.caption.size,fontWeight:M.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.5rem",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:[n," Faceoffs"]}),u.jsxs("svg",{width:"100",height:"100",children:[u.jsx("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:"rgba(100, 116, 139, 0.2)",strokeWidth:"8"}),u.jsx("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:c,strokeWidth:"8",strokeDasharray:a,strokeDashoffset:a-l,strokeLinecap:"round",transform:"rotate(-90 50 50)",style:{transition:Ci.slow}}),u.jsxs("text",{x:"50",y:"50",textAnchor:"middle",dominantBaseline:"middle",style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,fill:c,fontFeatureSettings:"'tnum'"},children:[e.toFixed(1),"%"]})]})]})},_F=({data:n,awayTeam:e,homeTeam:t,isMobile:i})=>u.jsx(ju,{title:"Luck & Regression Indicators",icon:u.jsx(ki,{size:18}),isMobile:i,importance:"MODERATE",children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"repeat(2, 1fr)",gap:i?Ae.innerPadding:"1rem"},children:[u.jsx(qS,{team:e,pdo:n.away?.pdo||100,shootingPct:n.away?.shootingPct||10,savePct:n.away?.savePct||90,goalsVsXg:n.away?.goalsVsExpected||0,isMobile:i}),u.jsx(qS,{team:t,pdo:n.home?.pdo||100,shootingPct:n.home?.shootingPct||10,savePct:n.home?.savePct||90,goalsVsXg:n.home?.goalsVsExpected||0,isMobile:i})]})}),qS=({team:n,pdo:e,shootingPct:t,savePct:i,goalsVsXg:a,isMobile:l})=>{const h=e>104?{status:"LIKELY TO DECLINE",color:"#EF4444",icon:"📉",explanation:"PDO >104 indicates unsustainable luck. Expect fewer goals.",arrow:"↘️"}:e>102?{status:"MILD DECLINE LIKELY",color:"#F59E0B",icon:"⚠️",explanation:"PDO >102 suggests slight overperformance. Some regression expected.",arrow:"↘️"}:e<96?{status:"LIKELY TO IMPROVE",color:"#10B981",icon:"📈",explanation:"PDO <96 indicates bad luck. Expect more goals.",arrow:"↗️"}:e<98?{status:"MILD IMPROVEMENT LIKELY",color:"#0EA5E9",icon:"⬆️",explanation:"PDO <98 suggests slight underperformance. Some improvement expected.",arrow:"↗️"}:{status:"SUSTAINABLE",color:"#8B5CF6",icon:"✓",explanation:"PDO 98-102 indicates sustainable performance.",arrow:"→"};return u.jsxs("div",{style:{padding:l?Ae.innerPadding:"1rem",background:Yt.factors,border:Ge.flat.border,borderRadius:"8px"},children:[u.jsx("div",{style:{fontSize:M.caption.size,fontWeight:M.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.5rem",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:n}),u.jsxs("div",{style:{padding:l?Ae.innerPadding:"0.75rem",background:`${h.color}15`,border:`1px solid ${h.color}40`,borderRadius:"6px",marginBottom:l?"0.5rem":"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[u.jsx("span",{style:{fontSize:M.body.size},children:h.icon}),u.jsx("span",{style:{fontSize:M.caption.size,fontWeight:M.heading.weight,color:h.color,textTransform:"uppercase",letterSpacing:"0.05em"},children:h.status})]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-secondary)",lineHeight:M.body.lineHeight,fontStyle:"italic"},children:h.explanation})]}),u.jsx(vh,{label:`PDO ${h.arrow}`,value:e.toFixed(1),badge:e>102?"Hot":e<98?"Cold":"Average",badgeColor:h.color}),u.jsx(vh,{label:"Shooting %",value:`${t.toFixed(1)}%`}),u.jsx(vh,{label:"Save %",value:`${i.toFixed(1)}%`}),u.jsx(vh,{label:"Goals vs xG",value:a>=0?`+${a.toFixed(1)}`:a.toFixed(1),badgeColor:a>0?"#10B981":a<0?"#EF4444":"#64748B"})]})},ju=({title:n,icon:e,children:t,isMobile:i,importance:a})=>{const l={HIGH:"var(--color-accent)",MODERATE:"#0EA5E9",LOW:"#8B5CF6"};return u.jsxs("div",{style:{marginBottom:i?Ae.sectionGap:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",marginBottom:i?"0.5rem":"1rem",paddingBottom:"0.5rem",borderBottom:Ge.flat.border},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{color:"var(--color-accent)"},children:e}),u.jsx("h4",{style:{fontSize:i?M.body.size:M.subheading.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)",margin:0,lineHeight:M.heading.lineHeight},children:n})]}),a&&u.jsx("span",{style:{fontSize:M.caption.size,fontWeight:M.label.weight,color:l[a],textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:a})]}),t]})},vh=({label:n,value:e,badge:t,badgeColor:i})=>u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[u.jsx("span",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",fontWeight:M.caption.weight,lineHeight:M.caption.lineHeight},children:n}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'",lineHeight:M.body.lineHeight},children:e}),t&&u.jsx("span",{style:{fontSize:M.caption.size,fontWeight:M.label.weight,textTransform:M.label.textTransform,letterSpacing:"0.03em",padding:"0.125rem 0.375rem",borderRadius:"3px",background:`${i}20`,color:i},children:t})]})]});function AF(n){if(!n||n.length===0)return null;let e=0,t=0,i=0,a=0,l=0,c=0,h=0;if(n.forEach(w=>{const E=w.edges?.total?.predictedTotal,P=w.rawOdds?.total?.line;if(!E||!P)return;h++;const N=E-P;e+=Math.abs(N),t+=E,i+=P,N<-.3?a++:N>.3?l++:c++}),h===0)return null;const f=e/h,g=t/h,v=i/h,b=a/h,x=l/h,_={avgPredicted:g.toFixed(2),avgMarket:v.toFixed(2),avgDifference:f.toFixed(2),systematicBias:(g-v).toFixed(2),underBias:(b*100).toFixed(0)+"%",overBias:(x*100).toFixed(0)+"%",neutralBias:(c/h*100).toFixed(0)+"%",warnings:[]};return Math.abs(g-v)>.3&&_.warnings.push(`⚠️ Systematic bias: ${(g-v).toFixed(2)} goals`),b>.6&&_.warnings.push(`⚠️ UNDER bias: ${(b*100).toFixed(0)}% of games`),x>.6&&_.warnings.push(`⚠️ OVER bias: ${(x*100).toFixed(0)}% of games`),f>.4&&_.warnings.push(`⚠️ Predictions diverging from market by ${f.toFixed(2)} goals on average`),console.log("═══════════════════════════════════════"),console.log("📊 MODEL VALIDATION REPORT"),console.log("═══════════════════════════════════════"),console.log(`Avg Predicted Total: ${_.avgPredicted} goals`),console.log(`Avg Market Total:    ${_.avgMarket} goals`),console.log(`Avg Difference:      ${_.avgDifference} goals`),console.log(`Systematic Bias:     ${_.systematicBias} goals`),console.log("───────────────────────────────────────"),console.log(`UNDER recommendations: ${_.underBias}`),console.log(`OVER recommendations:  ${_.overBias}`),console.log(`Neutral (±0.3):        ${_.neutralBias}`),console.log("───────────────────────────────────────"),_.warnings.length>0?(console.log("⚠️ WARNINGS:"),_.warnings.forEach(w=>console.log(w))):console.log("✅ No systematic bias detected"),console.log("═══════════════════════════════════════"),_}class wF{generateBetId(e,t,i,a,l){if(a==="TOTAL"||a?.includes("TOTAL"))return console.warn("⚠️ TOTALS BETTING DISABLED - Focus on 64.7% moneyline win rate"),null;if(a==="MONEYLINE"){const c=l.team||t;return`${t}_${i}_MONEYLINE_${c}`}return`${t}_${i}_${a}_${l.pick.replace(/\s+/g,"_")}`}async saveBet(e,t,i){if(!t||t.market==="TOTAL"||t.market?.includes("TOTAL")){console.log("⏭️ Skipping totals bet (disabled) - Focus on moneyline edge");return}const a=e.date||new Date().toISOString().split("T")[0],l=this.generateBetId(a,e.awayTeam,e.homeTeam,t.market,t);if(!l)return;const c={id:l,date:a,timestamp:Date.now(),game:{awayTeam:e.awayTeam,homeTeam:e.homeTeam,gameTime:e.gameTime,actualStartTime:e.startTimestamp||null},bet:{market:t.market,pick:t.pick,line:t.line||null,odds:t.odds,team:t.team||null,side:this.extractSide(t)},prediction:{awayScore:i.awayScore,homeScore:i.homeScore,totalScore:i.totalScore,awayWinProb:i.awayWinProb,homeWinProb:i.homeWinProb,modelProb:t.modelProb,marketProb:this.calculateMarketProb(t.odds),evPercent:t.evPercent,ev:t.ev,kelly:t.kelly,rating:t.rating||this.getRating(t.evPercent),confidence:t.tier||this.getTier(t.evPercent)},goalies:{away:e.goalies?.away||null,home:e.goalies?.home||null},result:{awayScore:null,homeScore:null,totalScore:null,winner:null,outcome:null,profit:null,actualProfit:null,fetched:!1,fetchedAt:null,source:null},status:"PENDING",recommended:!0,tracked:!0,modelVersion:"v2.1-consultant-fix",notes:""};try{const h=Qp(Mr,"bets",l);return await Ok(Mr,async f=>{const g=await f.get(h);if(g.exists()){const v=g.data(),b=Math.abs(v.bet.odds-t.odds)>=5,x=Math.abs(v.prediction.evPercent-t.evPercent)>=1,_=t.line&&v.bet.line&&Math.abs(v.bet.line-t.line)>=.5;if(b||x||_){const w={timestamp:Date.now(),odds:t.odds,evPercent:t.evPercent,modelProb:t.modelProb,marketProb:this.calculateMarketProb(t.odds)};t.line&&(w.line=t.line),f.update(h,{history:Nk(w),"bet.odds":t.odds,"bet.line":t.line||null,"prediction.evPercent":t.evPercent,"prediction.ev":t.ev,"prediction.modelProb":t.modelProb,"prediction.marketProb":this.calculateMarketProb(t.odds),"prediction.kelly":t.kelly,"prediction.rating":t.rating||this.getRating(t.evPercent),timestamp:Date.now()});const E=[];b&&E.push(`odds: ${v.bet.odds} → ${t.odds}`),_&&E.push(`line: ${v.bet.line} → ${t.line}`),x&&E.push(`EV: ${v.prediction.evPercent.toFixed(1)}% → ${t.evPercent.toFixed(1)}%`),console.log(`📊 Updated bet: ${l} (${E.join(", ")})`)}else console.log(`⏭️ Skipped update (no significant change): ${l}`)}else{const v={timestamp:Date.now(),odds:t.odds,evPercent:t.evPercent,modelProb:t.modelProb,marketProb:this.calculateMarketProb(t.odds)};t.line&&(v.line=t.line),f.set(h,{...c,history:[v],firstRecommendedAt:Date.now(),initialOdds:t.odds,initialLine:t.line||null,initialEV:t.evPercent}),console.log(`✅ Saved new bet: ${l} (${t.odds}, +${t.evPercent.toFixed(1)}% EV)`)}}),l}catch(h){throw console.error("❌ Error saving bet:",h),h}}async updateBetResult(e,t,i){const a=Qp(Mr,"bets",e),l=this.calculateOutcome(t,i.bet),c=this.calculateProfit(l,i.bet.odds);await jk(a,{"result.awayScore":t.awayScore,"result.homeScore":t.homeScore,"result.totalScore":t.awayScore+t.homeScore,"result.winner":t.awayScore>t.homeScore?"AWAY":"HOME","result.outcome":l,"result.profit":c,"result.fetched":!0,"result.fetchedAt":Date.now(),"result.source":t.source||"API",status:"COMPLETED"}),console.log(`✅ Updated bet result: ${e} → ${l} (${c} units)`)}async getPendingBets(){const e=wh(Gc(Mr,"bets"),Eh("status","==","PENDING"),Rh("timestamp","desc"));return(await rp(e)).docs.map(i=>({id:i.id,...i.data()}))}async getBetsByDate(e){const t=wh(Gc(Mr,"bets"),Eh("date","==",e),Rh("timestamp","desc"));return(await rp(t)).docs.map(a=>({id:a.id,...a.data()}))}async getCompletedBets(){const e=wh(Gc(Mr,"bets"),Eh("status","==","COMPLETED"),Rh("timestamp","desc"));return(await rp(e)).docs.map(i=>({id:i.id,...i.data()}))}calculateOutcome(e,t){switch(t.market){case"TOTAL":return t.side==="OVER"?e.totalScore>t.line?"WIN":e.totalScore<t.line?"LOSS":"PUSH":e.totalScore<t.line?"WIN":e.totalScore>t.line?"LOSS":"PUSH";case"MONEYLINE":return t.side==="HOME"?e.winner==="HOME"?"WIN":"LOSS":e.winner==="AWAY"?"WIN":"LOSS";case"PUCK_LINE":case"PUCKLINE":const i=t.line||1.5;if(t.side==="HOME"){const l=e.homeScore-e.awayScore;return l>i?"WIN":l<i?"LOSS":"PUSH"}else{const l=e.awayScore-e.homeScore;return l>i?"WIN":l<i?"LOSS":"PUSH"}case"TEAM_TOTAL":const a=t.team===t.game?.homeTeam?e.homeScore:e.awayScore;return t.side==="OVER"?a>t.line?"WIN":a<t.line?"LOSS":"PUSH":a<t.line?"WIN":a>t.line?"LOSS":"PUSH";default:return null}}calculateProfit(e,t){return e==="PUSH"?0:e==="LOSS"?-1:t<0?100/Math.abs(t):t/100}extractSide(e){const t=e.pick.toUpperCase();return e.market==="TOTAL"?t.includes("OVER")?"OVER":"UNDER":e.market==="MONEYLINE"||e.market==="PUCK_LINE"||e.market==="PUCKLINE"?t.includes("(HOME)")?"HOME":"AWAY":e.market==="TEAM_TOTAL"?t.includes("OVER")?"OVER":"UNDER":null}calculateMarketProb(e){return e<0?Math.abs(e)/(Math.abs(e)+100):100/(e+100)}getRating(e){return e>=10?"A+":e>=7?"A":e>=5?"B+":e>=3?"B":"C"}getTier(e){return e>=10?"ELITE":e>=7?"EXCELLENT":e>=5?"STRONG":e>=3?"GOOD":"VALUE"}}function EF(n,e){const t=H.useRef(new wF),i=H.useRef(new Map),a=H.useRef(new Set);H.useEffect(()=>{if(!n||n.length===0)return;new Date().toISOString().split("T")[0];const h=n.filter(f=>{const g=l(f),v=c(f);return g&&g.evPercent>=3||v&&v.evPercent>=3});console.log(`📊 Found ${h.length} games to track (ML + Total only)`),(async()=>{for(const f of h){const g=l(f),v=c(f),b=`${f.awayTeam}_${f.homeTeam}`;if(!a.current.has(b)){if(i.current.has(b)){console.log(`⏳ Already processing ${b}, skipping...`);continue}i.current.set(b,!0);try{const x={awayScore:f.edges.total?.awayScore||0,homeScore:f.edges.total?.homeScore||0,totalScore:f.edges.total?.predictedTotal||0,awayWinProb:f.edges.moneyline?.away?.modelProb||.5,homeWinProb:f.edges.moneyline?.home?.modelProb||.5};let _=!1;g&&g.evPercent>=3&&(await t.current.saveBet(f,g,x),console.log(`✅ Tracked ML: ${f.awayTeam} @ ${f.homeTeam} - ${g.pick} (+${g.evPercent.toFixed(1)}% EV)`),_=!0),v&&v.evPercent>=3&&(await t.current.saveBet(f,v,x),console.log(`✅ Tracked Total: ${f.awayTeam} @ ${f.homeTeam} - ${v.pick} (+${v.evPercent.toFixed(1)}% EV)`),_=!0),_&&a.current.add(b)}catch(x){console.error(`❌ Failed to save bets for ${b}:`,x)}finally{i.current.delete(b)}}}})()},[n]);function l(h){const f=h.edges.moneyline?.away,g=h.edges.moneyline?.home;if(!f&&!g)return null;const v=f?.evPercent||-1/0,b=g?.evPercent||-1/0;return v>b&&f?{...f,market:"MONEYLINE",pick:`${h.awayTeam} ML (AWAY)`,team:h.awayTeam}:g?{...g,market:"MONEYLINE",pick:`${h.homeTeam} ML (HOME)`,team:h.homeTeam}:null}function c(h){const f=h.edges.total?.over,g=h.edges.total?.under;if(!f&&!g)return null;const v=f?.evPercent||-1/0,b=g?.evPercent||-1/0,x=h.rawOdds?.total?.line||f?.line||g?.line;return v>b&&f?{...f,market:"TOTAL",pick:`OVER ${x}`,line:x}:g?{...g,market:"TOTAL",pick:`UNDER ${x}`,line:x}:null}return t.current}function RF(){const[n,e]=H.useState([]),[t,i]=H.useState(!0),[a,l]=H.useState(null),c=async()=>{try{const f=new Date().toISOString().split("T")[0];console.log(`📊 Fetching live scores from NHL API for ${f}...`);const g=await fetch(`https://api-web.nhle.com/v1/schedule/${f}`);if(!g.ok)throw new Error(`HTTP ${g.status}`);const x=((await g.json()).gameWeek||[])[0]?.games||[],_=await Promise.all(x.map(async w=>{const E={date:f,gameId:w.id,awayTeam:w.awayTeam.abbrev,homeTeam:w.homeTeam.abbrev,awayScore:w.awayTeam.score||0,homeScore:w.homeTeam.score||0,totalScore:(w.awayTeam.score||0)+(w.homeTeam.score||0),gameState:w.gameState||"FUT",period:w.periodDescriptor?.number||0,periodDescriptor:w.periodDescriptor?.periodType||"",clock:"",gameTime:w.startTimeUTC||"",lastUpdate:new Date().toISOString()};return["OFF","FINAL","CRIT"].includes(E.gameState)?E.status="FINAL":E.gameState==="LIVE"?(E.status="LIVE",await h(E)):["FUT","PRE"].includes(E.gameState)?E.status="SCHEDULED":E.status="UNKNOWN",E}));e(_),l(new Date().toISOString()),console.log(`✅ Live scores updated: ${_.length} games`),i(!1)}catch(f){console.error("Error fetching live scores:",f),i(!1)}},h=async f=>{try{const g=`https://api-web.nhle.com/v1/gamecenter/${f.gameId}/play-by-play`,v=await fetch(g);if(!v.ok){console.warn(`⚠️  Could not fetch live details for game ${f.gameId}`);return}const b=await v.json();b.periodDescriptor&&(f.period=b.periodDescriptor.number||f.period,f.periodDescriptor=b.periodDescriptor.periodType||f.periodDescriptor),b.clock&&(f.clock=b.clock.timeRemaining||"")}catch(g){console.warn(`⚠️  Error fetching live game details: ${g.message}`)}};return H.useEffect(()=>{c();const f=setInterval(c,3e4);return()=>{console.log("Stopping live scores polling"),clearInterval(f)}},[]),{scores:n,loading:t,lastUpdate:a}}function IF(){const[n,e]=H.useState([]),[t,i]=H.useState(!0),[a,l]=H.useState(null);return H.useEffect(()=>{const c=new Date,h=c.toISOString().split("T")[0],f=new Date(c);f.setDate(f.getDate()-1);const g=f.toISOString().split("T")[0];console.log(`📊 Fetching Firebase bets for ${g} AND ${h}`);const v=$_(Gc(Mr,"bets"),b=>{const x=b.docs.map(_=>({id:_.id,..._.data()})).filter(_=>_.date===h||_.date===g).sort((_,w)=>(w.timestamp||0)-(_.timestamp||0));console.log(`✅ Loaded ${x.length} bets from Firebase`),console.log("Dates found:",[...new Set(x.map(_=>_.date))]),console.log("Bets:",x.map(_=>`${_.date}: ${_.game?.awayTeam} @ ${_.game?.homeTeam}`)),e(x),i(!1)},b=>{console.error("❌ Error fetching Firebase bets:",b),l(b),i(!1)});return()=>v()},[]),{bets:n,loading:t,error:a}}const CF=({game:n,bestEdge:e,factors:t,isMobile:i,dataProcessor:a})=>{if(!e||!t||t.length===0)return null;const c=(()=>{try{const h=t.slice(0,3),{awayTeam:f,homeTeam:g}=n,v=e.type||e.market,b=e.pick||e.displayPick,x=a?.scheduleHelper;let _=null,w=null;if(x&&n.date){const C=x.getDaysRest(f,n.date),F=x.getConsecutiveAwayGames(f,n.date),k=x.getRoadTripAdjustment(f,n.date);_={daysRest:C,isB2B:C===1,awayStreak:F,roadTripPenalty:k};const z=x.getDaysRest(g,n.date),{isHomecoming:O,tripLength:X}=x.isHomecomingGame(g,n.date),le=x.getHomecomingAdjustment(g,n.date);w={daysRest:z,isB2B:z===1,isHomecoming:O,tripLength:X,homecomingBoost:le}}const E=n.goalies?.away,P=n.goalies?.home,N={away:0,home:0};h.forEach(C=>{C.awayMetric&&C.homeMetric&&(C.awayMetric.value>C.homeMetric.value?N.away++:N.home++)});const V=N.away>N.home?f:g,L=V===f?g:f,ne=V===f?_:w,W=V===f?w:_;let q="",D="";const I=[];if(_&&(_.isB2B?I.push(`${f} on back-to-back`):_.roadTripPenalty<-.05?I.push(`${f} fatigued (game ${_.awayStreak+1} of road trip)`):_.daysRest>=3&&I.push(`${f} well-rested (${_.daysRest} days off)`)),w&&(w.isB2B?I.push(`${g} on back-to-back`):w.isHomecoming?I.push(`${g} returning home after ${w.tripLength}-game trip`):w.daysRest>=3&&I.push(`${g} well-rested (${w.daysRest} days off)`)),I.length>0&&(D=`${I.join(", ")}. `),v==="TOTAL"||v==="total"){const C=b.includes("UNDER")||b.includes("U "),F=n.edges.total?.predictedTotal||0,k=n.edges.total?.marketTotal||0,z=Math.abs(F-k);if(C){q+=D;const O=h.find(X=>X.name.includes("Against")||X.name.includes("Defense")||X.name.includes("GA"));if(O){const{awayMetric:X,homeMetric:le}=O,G=X.value<le.value?f:g,U=Math.min(X.value,le.value).toFixed(2);q+=`${G}'s elite defense (${U} ${O.name}) limits scoring opportunities. `}else q+="Both teams showing defensive strengths in recent games. ";E&&E.includes("Shesterkin|Hellebuyck|Sorokin|Oettinger")?q+=`${E} expected in net adds defensive stability. `:P&&P.includes("Shesterkin|Hellebuyck|Sorokin|Oettinger")&&(q+=`${P} expected in net adds defensive stability. `),q+=`Model projects ${F.toFixed(1)} goals vs market's ${k.toFixed(1)} — defensive matchup favors UNDER.`}else{q+=D;const O=h.find(le=>le.name.includes("For")||le.name.includes("Offense")||le.name.includes("GF"));if(O){const{awayMetric:le,homeMetric:G}=O,U=le.value>G.value?f:g,J=Math.max(le.value,G.value).toFixed(2);q+=`${U} generating elite chances (${J} ${O.name}). `}const X=h.find(le=>le.name.includes("Against")&&(le.awayMetric.value>2.7||le.homeMetric.value>2.7));if(X){const le=X.awayMetric.value>X.homeMetric.value?f:g;q+=`${le} allows quality scoring chances. `}q+=`Model projects ${F.toFixed(1)} goals vs market's ${k.toFixed(1)} — offensive matchup favors OVER.`}}else{const C=b.includes(f)?f:g,F=C===f?g:f,k=C===f?_:w,z=C===f?w:_,O=(C===f?n.edges.moneyline?.away?.modelProb:n.edges.moneyline?.home?.modelProb)||0;if(k?.homecomingBoost>0)q=`${C} returns home after ${k.tripLength}-game road trip with fresh legs (+${(k.homecomingBoost*100).toFixed(0)}% boost). `;else if(z?.roadTripPenalty<-.05){const le=z.awayStreak||0;q=`${F} fatigued on game ${le+1} of road trip (${(z.roadTripPenalty*100).toFixed(0)}% penalty), while `}else k?.isB2B&&!z?.isB2B?q=`Despite back-to-back, ${C} `:q=D||"";if(h.length>0){const le=h[0],G=C===f?le.awayMetric?.value:le.homeMetric?.value,U=C===f?le.homeMetric?.value:le.awayMetric?.value;if(G&&U)if(le.name.includes("Expected Goals")||le.name.includes("xGF")){const J=G>2.7?"elite":G>2.5?"strong":"solid";q+=`${C}'s ${J} offense (${G.toFixed(2)} xGF/60) outmatches ${F}'s attack (${U.toFixed(2)}). `}else if(le.name.includes("Against")||le.name.includes("Defense")||le.name.includes("xGA")){const J=G<2.3?"elite":G<2.5?"strong":"solid";q+=`${C}'s ${J} defense (${G.toFixed(2)} xGA/60) limits ${F} (${U.toFixed(2)} xGF/60). `}else q+=`${C} holds clear statistical advantage in ${le.name.toLowerCase()}. `}const X=(O*100).toFixed(0);q+=`Model projects ${C} at ${X}% win probability — strong value at current odds.`}return q}catch(h){console.error("QuickStory generation error:",h);const f=n.edges?.total?.predictedTotal||0,g=n.edges?.total?.marketTotal||0;return f&&g?`Model projects ${f.toFixed(1)} goals vs market's ${g.toFixed(1)}.`:"Advanced model analysis suggests value in this matchup."}})();return u.jsx("div",{style:{fontSize:M.body.size,lineHeight:"1.6",color:"var(--color-text-primary)",fontWeight:M.caption.weight},children:c})},jF=({header:n,children:e,defaultExpanded:t=!1,index:i=0,isMobile:a=!1,onToggle:l})=>{const[c,h]=H.useState(t),f=()=>{const g=!c;l&&l(g)===!1&&g===!0||h(g)};return u.jsxs("div",{className:"elevated-card game-card hover-lift",style:{animationDelay:`${i*.1}s`,position:"relative",overflow:"hidden",background:c?"var(--color-bg-secondary)":"linear-gradient(135deg, rgba(16, 185, 129, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)",border:c?"1px solid var(--color-border)":"1px solid rgba(16, 185, 129, 0.15)",borderRadius:"10px",transition:"all 0.3s ease"},children:[u.jsx("div",{onClick:f,style:{cursor:"pointer",position:"relative",transition:"all 0.2s ease"},onMouseEnter:g=>{c||(g.currentTarget.style.background="rgba(16, 185, 129, 0.08)")},onMouseLeave:g=>{c||(g.currentTarget.style.background="transparent")},children:u.jsxs("div",{style:{position:"relative",paddingRight:a?"44px":"50px"},children:[QS.cloneElement(n,{isCollapsed:!c}),u.jsx("div",{style:{position:"absolute",top:"50%",right:a?"0.625rem":"0.875rem",transform:"translateY(-50%)",display:"flex",alignItems:"center",justifyContent:"center",width:a?"30px":"36px",height:a?"30px":"36px",borderRadius:"8px",background:c?"linear-gradient(135deg, rgba(16, 185, 129, 0.18) 0%, rgba(16, 185, 129, 0.12) 100%)":"linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(16, 185, 129, 0.12) 100%)",border:`1.5px solid ${c?"rgba(16, 185, 129, 0.35)":"rgba(59, 130, 246, 0.25)"}`,boxShadow:c?"0 2px 6px rgba(16, 185, 129, 0.18)":"0 2px 6px rgba(59, 130, 246, 0.18)",transition:"all 0.3s ease",pointerEvents:"none",zIndex:10},children:c?u.jsx(Dy,{size:a?16:20,color:"#10B981",strokeWidth:2.5}):u.jsx(jy,{size:a?16:20,color:"#3B82F6",strokeWidth:2.5})})]})}),u.jsx("div",{style:{maxHeight:c?"10000px":"0",opacity:c?1:0,overflow:"hidden",transition:"max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease"},children:e})]})},Lo=({stepNumber:n,title:e,emoji:t,accentColor:i="#D4AF37",children:a,isMobile:l=!1,className:c=""})=>u.jsxs("div",{className:c,style:{position:"relative",marginBottom:"0.75rem",borderLeft:`4px solid ${i}`,background:`linear-gradient(135deg, ${i}08 0%, ${i}03 100%)`,borderRadius:"0 12px 12px 0",overflow:"hidden",transition:"all 0.3s ease"},children:[u.jsxs("div",{style:{padding:l?"0.75rem 1rem":"0.875rem 1.25rem",borderBottom:`1px solid ${i}30`,background:`${i}10`,display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{minWidth:l?"28px":"32px",height:l?"28px":"32px",borderRadius:"8px",background:`linear-gradient(135deg, ${i} 0%, ${i}CC 100%)`,color:"rgba(0, 0, 0, 0.85)",fontWeight:"900",fontSize:l?"0.875rem":"1rem",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 2px 8px ${i}40`,letterSpacing:"-0.02em"},children:n}),u.jsxs("div",{style:{flex:1,fontSize:l?"0.75rem":"0.813rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.1em",color:i,display:"flex",alignItems:"center",gap:"0.5rem"},children:[t&&u.jsx("span",{style:{fontSize:l?"1rem":"1.125rem"},children:t}),u.jsx("span",{children:e})]})]}),u.jsx("div",{style:{padding:"0.875rem"},children:a})]}),DF=({game:n,awayTeam:e,homeTeam:t,dataProcessor:i,isMobile:a=!1})=>{if(!n||!i)return null;try{const l=i.getTeamsBySituation("5on5"),c=l.find(L=>L.team===e),h=l.find(L=>L.team===t),f=c?.xGF_per60||0,g=h?.xGF_per60||0,v=c?.xGA_per60||0,b=h?.xGA_per60||0;if(!f&&!g&&!v&&!b)return null;const x=n.goalies?.away?.name||null,_=n.goalies?.home?.name||null,w=f>g?e:t,E=Math.max(f,g).toFixed(2),P=v<b?e:t,N=Math.min(v,b).toFixed(2),V=({icon:L,label:ne,value:W,isAdvantage:q=!1})=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:a?"0.375rem 0.5rem":"0.375rem 0.625rem",background:q?"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%)":"rgba(255, 255, 255, 0.05)",border:q?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:a?"0.688rem":"0.75rem",fontWeight:"700",whiteSpace:"nowrap"},children:[u.jsx(L,{size:a?12:14,color:q?"#10B981":"#94A3B8"}),u.jsxs("span",{style:{color:q?"#10B981":"var(--color-text-muted)",fontSize:a?"0.625rem":"0.688rem",fontWeight:"600"},children:[ne,":"]}),u.jsx("span",{style:{color:q?"#10B981":"var(--color-text-primary)",fontWeight:"800"},children:W})]});return u.jsxs("div",{style:{padding:a?"0.5rem 0.75rem":"0.625rem 1rem",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.15) 100%)",borderTop:"1px solid rgba(255, 255, 255, 0.05)",display:"flex",alignItems:"center",gap:a?"0.5rem":"0.75rem",flexWrap:"wrap",overflow:"hidden"},children:[f>0&&g>0&&u.jsx(V,{icon:Wa,label:`${w} OFF`,value:E,isAdvantage:Math.abs(f-g)>.3}),v>0&&b>0&&u.jsx(V,{icon:li,label:`${P} DEF`,value:N,isAdvantage:Math.abs(v-b)>.3}),(x||_)&&u.jsx(V,{icon:Va,label:"🥅",value:x&&_?"Both confirmed":"TBD",isAdvantage:x&&_}),a&&!f&&u.jsx("div",{style:{fontSize:"0.688rem",color:"var(--color-text-muted)",fontStyle:"italic"},children:"Stats loading..."})]})}catch(l){return console.warn("QuickStatsBar error:",l),null}},kF=({isVisible:n,onAccept:e,onDecline:t})=>{const[i,a]=H.useState(!1),l=()=>{if(!i){alert("Please check the box to confirm you understand the terms.");return}localStorage.setItem("nhl_savant_disclaimer_acknowledged","true"),localStorage.setItem("nhl_savant_disclaimer_date",new Date().toISOString()),hM(),e&&e()},c=()=>{t?t():(alert("You must accept the terms to use NHL Savant. Redirecting..."),window.location.href="https://www.google.com")};return n?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",zIndex:9998,animation:"fadeIn 0.3s ease"}}),u.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:"600px",maxHeight:"85vh",backgroundColor:"var(--color-bg-secondary)",borderRadius:"16px",border:"2px solid rgba(251, 191, 36, 0.4)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",zIndex:9999,display:"flex",flexDirection:"column",animation:"slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},children:[u.jsx("div",{style:{padding:"1.5rem",borderBottom:"2px solid rgba(251, 191, 36, 0.3)",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 100%)"},children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[u.jsx(ou,{size:32,color:"#F59E0B",style:{flexShrink:0}}),u.jsxs("div",{style:{flex:1},children:[u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"900",color:"#F59E0B",margin:"0 0 0.5rem 0",textTransform:"uppercase",letterSpacing:"0.02em"},children:"Important Legal Notice"}),u.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",margin:0,lineHeight:"1.5"},children:"You must read and accept these terms before using NHL Savant"})]})]})}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[u.jsx("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, rgba(251, 191, 36, 0.05) 100%)",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:u.jsxs("p",{style:{fontSize:"0.938rem",lineHeight:"1.6",color:"var(--color-text-primary)",margin:0,fontWeight:"600"},children:[u.jsx("strong",{children:"⚠️ SPORTS BETTING INVOLVES FINANCIAL RISK"}),u.jsx("br",{}),"Only bet what you can afford to lose. This site is for entertainment and educational purposes only."]})}),u.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.7",color:"var(--color-text-primary)"},children:[u.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"800",color:"var(--color-text-primary)",margin:"0 0 0.75rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(li,{size:20,color:"#10B981"}),"You Acknowledge That:"]}),u.jsxs("ul",{style:{margin:"0 0 1.5rem 0",paddingLeft:"1.5rem",listStyleType:"disc"},children:[u.jsxs("li",{style:{marginBottom:"0.625rem"},children:[u.jsx("strong",{children:"This is NOT betting advice."})," All content is for entertainment and educational purposes only."]}),u.jsxs("li",{style:{marginBottom:"0.625rem"},children:[u.jsx("strong",{children:"We make NO guarantees."})," Past performance does not predict future results. You may lose money."]}),u.jsxs("li",{style:{marginBottom:"0.625rem"},children:[u.jsx("strong",{children:"You are solely responsible"})," for your betting decisions and their financial consequences."]}),u.jsxs("li",{style:{marginBottom:"0.625rem"},children:[u.jsx("strong",{children:"We are NOT a sportsbook."})," We do not accept bets or wagers of any kind."]}),u.jsxs("li",{style:{marginBottom:"0.625rem"},children:[u.jsx("strong",{children:"Age requirement:"})," You are 21+ years old (or 18+ if legal in your jurisdiction)."]}),u.jsxs("li",{style:{marginBottom:"0.625rem"},children:[u.jsx("strong",{children:"Legal compliance:"})," Sports betting is legal in your jurisdiction and you will verify applicable laws."]}),u.jsxs("li",{style:{marginBottom:"0.625rem"},children:[u.jsx("strong",{children:"Gambling problem?"})," Call 1-800-GAMBLER or visit ",u.jsx("a",{href:"https://www.ncpgambling.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"ncpgambling.org"})]})]}),u.jsx("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"1rem",marginTop:"1rem"},children:u.jsxs("p",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",margin:0,lineHeight:"1.6"},children:["For complete terms, see our ",u.jsx(Nc,{to:"/disclaimer",style:{color:"#3B82F6",fontWeight:"700"},children:"Legal Disclaimer & Terms of Use"})]})})]})]}),u.jsxs("div",{style:{padding:"1.5rem",borderTop:"1px solid var(--color-border)",backgroundColor:"rgba(0, 0, 0, 0.2)"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem",cursor:"pointer",fontSize:"0.875rem",lineHeight:"1.5",color:"var(--color-text-primary)"},children:[u.jsx("input",{type:"checkbox",checked:i,onChange:h=>a(h.target.checked),style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#10B981"}}),u.jsxs("span",{children:[u.jsx("strong",{children:"I am 21+ years old,"})," I have read and understand these terms, and I accept full responsibility for my betting decisions."]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsx("button",{onClick:c,style:{padding:"0.875rem 1.5rem",backgroundColor:"transparent",border:"2px solid var(--color-border)",borderRadius:"8px",fontSize:"0.938rem",fontWeight:"700",color:"var(--color-text-secondary)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:h=>{h.target.style.borderColor="#EF4444",h.target.style.color="#EF4444"},onMouseLeave:h=>{h.target.style.borderColor="var(--color-border)",h.target.style.color="var(--color-text-secondary)"},children:"Decline"}),u.jsx("button",{onClick:l,disabled:!i,style:{padding:"0.875rem 1.5rem",background:i?"linear-gradient(135deg, #10B981 0%, #059669 100%)":"rgba(100, 116, 139, 0.3)",border:"none",borderRadius:"8px",fontSize:"0.938rem",fontWeight:"800",color:i?"white":"rgba(255, 255, 255, 0.5)",cursor:i?"pointer":"not-allowed",transition:"all 0.2s",boxShadow:i?"0 4px 12px rgba(16, 185, 129, 0.3)":"none"},onMouseEnter:h=>{i&&(h.target.style.transform="translateY(-2px)",h.target.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.4)")},onMouseLeave:h=>{i&&(h.target.style.transform="translateY(0)",h.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)")},children:"I Accept & Continue"})]})]}),u.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translate(-50%, -45%);
            }
            to {
              opacity: 1;
              transform: translate(-50%, -50%);
            }
          }
        `})]})]}):null};function kr(n){switch(n){case"A+":return"#D4AF37";case"A":return"#10B981";case"B+":return"#3B82F6";case"B":return"#8B5CF6";default:return"#64748B"}}function PF(n){return n==="MONEYLINE"?"🎯":n==="TOTAL"?"📊":"🎲"}function MF({gameGroups:n,onViewAll:e}){const[t,i]=H.useState(!1);if(!n||n.length===0)return null;const a=()=>{e&&e()},l=n.reduce((c,h)=>c+h.bets.length,0);return u.jsxs("div",{className:"elevated-card",style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(148, 163, 184, 0.1)",borderRadius:"16px",padding:"1.5rem",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",marginBottom:"1.5rem",animation:"fadeIn 0.4s ease-out"},children:[u.jsxs("div",{onClick:()=>i(!t),style:{display:"flex",alignItems:"center",gap:"0.75rem",paddingBottom:t?"1rem":"0",borderBottom:t?"1px solid rgba(148, 163, 184, 0.1)":"none",marginBottom:t?"1.25rem":"0",cursor:"pointer",transition:"all 0.3s ease"},children:[u.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:u.jsx(ki,{size:20,color:"#fff",strokeWidth:2.5})}),u.jsx("div",{style:{flex:1},children:u.jsx("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"700",color:"#F1F5F9",letterSpacing:"-0.01em"},children:"Today's Picks"})}),u.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"0.375rem 0.75rem",fontSize:"0.875rem",fontWeight:"700",color:"#60A5FA"},children:[l," ",l===1?"Pick":"Picks"]}),u.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:t?u.jsx(Dy,{size:20,color:"#60A5FA",strokeWidth:2.5}):u.jsx(jy,{size:20,color:"#60A5FA",strokeWidth:2.5})})]}),t&&u.jsx("div",{style:{animation:"expandDown 0.3s ease-out"},children:u.jsx("div",{style:{display:"flex",gap:"1rem",overflowX:"auto",overflowY:"hidden",margin:"0 -1.5rem",padding:"0 1.5rem 0.5rem 1.5rem",scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"picks-scroll",children:n.map((c,h)=>u.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.5)",border:"1px solid rgba(148, 163, 184, 0.08)",borderRadius:"12px",padding:"1rem",minWidth:"280px",maxWidth:"320px",flexShrink:0,transition:"all 0.2s ease"},className:"game-group-card",children:[u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#94A3B8",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.875rem",paddingBottom:"0.75rem",borderBottom:"1px solid rgba(148, 163, 184, 0.08)"},children:c.game}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:c.bets.map((f,g)=>u.jsxs("div",{onClick:a,style:{background:`linear-gradient(135deg, ${kr(f.grade)}12 0%, ${kr(f.grade)}08 100%)`,border:`1px solid ${kr(f.grade)}35`,borderRadius:"8px",padding:"0.75rem",display:"flex",alignItems:"center",gap:"0.625rem",cursor:"pointer",transition:"all 0.2s ease"},className:"pick-item",children:[u.jsx("span",{style:{fontSize:"1.125rem",flexShrink:0,opacity:.9},children:PF(f.market)}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#F1F5F9",marginBottom:"0.25rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:f.pick}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"#94A3B8",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{children:f.odds>0?`+${f.odds}`:f.odds}),u.jsx("span",{style:{color:kr(f.grade),fontWeight:"700"},children:f.edge})]})]}),u.jsx("div",{style:{background:kr(f.grade),color:"#000",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"800",lineHeight:"1",flexShrink:0,boxShadow:`0 2px 8px ${kr(f.grade)}40`},children:f.grade})]},g))})]},h))})}),u.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes expandDown {
          from {
            opacity: 0;
            max-height: 0;
            transform: scaleY(0.95);
          }
          to {
            opacity: 1;
            max-height: 500px;
            transform: scaleY(1);
          }
        }

        .picks-scroll::-webkit-scrollbar {
          display: none;
        }

        .game-group-card:hover {
          border-color: rgba(148, 163, 184, 0.15);
          background: rgba(15, 23, 42, 0.7);
        }

        .pick-item:hover {
          transform: translateX(3px);
          border-color: ${kr("A")}60;
          background: linear-gradient(135deg, ${kr("A")}18 0%, ${kr("A")}12 100%);
        }

        @media (max-width: 768px) {
          .elevated-card {
            padding: 1.25rem !important;
            margin-bottom: 1.25rem !important;
          }

          .picks-scroll {
            margin: 0 -1.25rem !important;
            padding: 0 1.25rem 0.5rem 1.25rem !important;
          }

          .game-group-card {
            min-width: 260px !important;
            padding: 0.875rem !important;
          }
        }

        @media (max-width: 640px) {
          .elevated-card {
            padding: 1rem !important;
            margin-bottom: 1rem !important;
          }

          .picks-scroll {
            margin: 0 -1rem !important;
            padding: 0 1rem 0.5rem 1rem !important;
          }
        }
      `})]})}const OF=({awayTeam:n,homeTeam:e,gameTime:t,rating:i,awayWinProb:a,homeWinProb:l,isMobile:c,bestEdge:h,isCollapsed:f,game:g,dataProcessor:v,liveScores:b})=>{const x=b?.find(E=>E.awayTeam===n&&E.homeTeam===e||E.away===n&&E.home===e),_=x&&(x.status==="LIVE"||x.status==="In Progress"),w=x&&(x.status==="FINAL"||x.status==="Final");if(_||w){const E=x.awayScore>x.homeScore,P=x.homeScore>x.awayScore,N=x.awayScore===x.homeScore,V=Math.abs(x.awayScore-x.homeScore),L=h&&h.market&&h.evPercent>0;let ne,W,q;if(L&&h.market==="MONEYLINE")ne=h.team,W=ne===n,q=W?a:l;else{const F=a>l;ne=F?n:e,W=F,q=Math.max(a,l)}const D=W?E:P,I=w&&D;let C=50;if(w)C=D?100:0;else if(_){const F=x.period||1,z=(x.periodDescriptor||"").includes("OT")||F>3;if(N)C=q,z||(C=50+(C-50)*.8);else{const O=z?V===1?85:95:F===3?V===1?72:V===2?88:95:F===2?V===1?65:V===2?80:92:V===1?58:V===2?72:85;C=D?O:100-O}}return u.jsxs("div",{style:{display:"flex",flexDirection:"column",padding:c?"1rem":"1.25rem",borderBottom:f?"none":Ge.flat.border,background:_?"linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(11, 15, 31, 1) 100%)":"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(11, 15, 31, 1) 100%)",position:"relative",overflow:"hidden"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:_?u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:"0.375rem 0.75rem",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"16px",fontSize:"0.688rem",fontWeight:"800",color:"#EF4444",textTransform:"uppercase",letterSpacing:"0.05em"},children:[u.jsx("span",{style:{width:"6px",height:"6px",background:"#EF4444",borderRadius:"50%",animation:"pulse 2s infinite"}}),(()=>{const F=x.period||0,k=x.periodDescriptor||"";return k.includes("OT")?"OT":k.includes("SO")?"SO":F===0?"LIVE":`P${F}`})()]}),x.clock&&u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--color-text-secondary)",fontFeatureSettings:'"tnum"'},children:x.clock})]}):u.jsx("div",{style:{display:"inline-flex",padding:"0.375rem 0.75rem",background:"rgba(16, 185, 129, 0.15)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"16px",fontSize:"0.688rem",fontWeight:"800",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.05em"},children:"FINAL"})}),i>0&&u.jsx(HS,{evPercent:i,size:"small"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c?"0.75rem":"1rem",marginBottom:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",flex:1},children:[u.jsx("div",{style:{fontSize:c?"0.938rem":"1rem",fontWeight:"700",color:E?"#10B981":"var(--color-text-secondary)",letterSpacing:"0.02em"},children:n}),u.jsx("div",{style:{fontSize:c?"1.75rem":"2rem",fontWeight:"900",color:E?"#10B981":"var(--color-text-primary)",fontFeatureSettings:'"tnum"',minWidth:c?"30px":"36px",textAlign:"center"},children:x.awayScore??0})]}),u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--color-text-muted)",padding:"0 0.25rem"},children:"@"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",flex:1,justifyContent:"flex-end"},children:[u.jsx("div",{style:{fontSize:c?"1.75rem":"2rem",fontWeight:"900",color:P?"#10B981":"var(--color-text-primary)",fontFeatureSettings:'"tnum"',minWidth:c?"30px":"36px",textAlign:"center"},children:x.homeScore??0}),u.jsx("div",{style:{fontSize:c?"0.938rem":"1rem",fontWeight:"700",color:P?"#10B981":"var(--color-text-secondary)",letterSpacing:"0.02em"},children:e})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem 0.875rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontSize:"0.625rem",fontWeight:"700",color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.375rem"},children:L?"NHL SAVANT BET":"NHL SAVANT PICK"}),u.jsxs("div",{style:{height:"28px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"6px",padding:"3px",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{width:`${C}%`,height:"100%",background:C>=50?"linear-gradient(90deg, #10B981, #059669)":"linear-gradient(90deg, #EF4444, #DC2626)",borderRadius:"4px",transition:"all 0.5s ease",boxShadow:C>=50?"0 0 12px rgba(16, 185, 129, 0.4)":"0 0 12px rgba(239, 68, 68, 0.4)"}}),u.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",fontWeight:"900",color:"white",textShadow:"0 1px 2px rgba(0, 0, 0, 0.8)",letterSpacing:"0.02em"},children:[Math.round(C),"%"]})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",minWidth:c?"90px":"110px"},children:[L?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{fontSize:"0.813rem",fontWeight:"800",color:"#3B82F6",letterSpacing:"0.02em",marginBottom:"2px"},children:ne}),u.jsxs("div",{style:{fontSize:"0.688rem",fontWeight:"700",color:"var(--color-text-secondary)"},children:[h.odds>0?"+":"",h.odds]})]}):u.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"800",color:"#3B82F6",letterSpacing:"0.02em"},children:[ne," to win"]}),w&&u.jsx("div",{style:{fontSize:"0.688rem",fontWeight:"700",color:I?"#10B981":"#EF4444",marginTop:"4px",padding:"2px 6px",background:I?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",borderRadius:"4px"},children:I?"✓ WIN":"✗ LOSS"})]})]})]})}return u.jsxs("div",{style:{display:"flex",flexDirection:"column",padding:c?"0.75rem":"0.875rem",borderBottom:f?"none":Ge.flat.border,background:"rgba(26, 31, 46, 0.3)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",gap:"0.75rem"},children:[u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c?"0.5rem":"0.625rem",flexWrap:"wrap"},children:[u.jsxs("span",{style:{fontSize:c?"1.125rem":"1.25rem",fontWeight:"800",color:"var(--color-text-primary)",letterSpacing:"-0.01em"},children:[n," ",u.jsx("span",{style:{color:"var(--color-text-muted)",fontWeight:"400"},children:"@"})," ",e]}),i>0&&u.jsx(HS,{evPercent:i,size:"small"})]}),a&&l&&u.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.375rem",flexWrap:"wrap"},children:[u.jsxs("div",{style:{padding:"0.25rem 0.5rem",background:a>l?"rgba(16, 185, 129, 0.15)":"rgba(255, 255, 255, 0.05)",border:a>l?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700",color:a>l?"#10B981":"var(--color-text-secondary)"},children:[n," ",(a>1?a:a*100).toFixed(0),"%"]}),u.jsxs("div",{style:{padding:"0.25rem 0.5rem",background:l>a?"rgba(16, 185, 129, 0.15)":"rgba(255, 255, 255, 0.05)",border:l>a?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700",color:l>a?"#10B981":"var(--color-text-secondary)"},children:[e," ",(l>1?l:l*100).toFixed(0),"%"]})]})]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.375rem",fontWeight:"600",whiteSpace:"nowrap"},children:[u.jsx(Hc,{size:12}),t]})]}),f&&h&&u.jsxs("div",{style:{padding:c?"0.5rem 0.625rem":"0.5rem 0.75rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(59, 130, 246, 0.05) 100%)",borderRadius:"6px",border:"1px solid rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0,fontSize:c?"0.75rem":"0.813rem",fontWeight:"700"},children:[u.jsx("span",{style:{fontSize:"1rem"},children:"💰"}),u.jsx("span",{style:{color:"var(--color-text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:h.pick}),u.jsxs("span",{style:{color:"var(--color-text-muted)",fontWeight:"600",fontSize:"0.688rem"},children:[h.odds>0?"+":"",h.odds]})]}),u.jsxs("div",{style:{padding:"0.25rem 0.5rem",background:Qc(h.evPercent).background,border:`1px solid ${Qc(h.evPercent).border}`,borderRadius:"6px",fontSize:"0.813rem",fontWeight:"800",color:Qc(h.evPercent).color,whiteSpace:"nowrap"},children:["+",h.evPercent.toFixed(1),"%"]})]})]})},PE=n=>n>0?100/(n+100):Math.abs(n)/(Math.abs(n)+100),ws=n=>n>0?100/(n+100):Math.abs(n)/(Math.abs(n)+100),NF=({modelProb:n,marketProb:e})=>u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsxs("div",{style:{marginBottom:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Model"}),u.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#10B981"},children:[(n*100).toFixed(1),"%"]})]}),u.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"4px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${n*100}%`,height:"100%",background:"#10B981",borderRadius:"4px",transition:"width 0.3s ease"}})})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Market"}),u.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--color-text-secondary)"},children:[(e*100).toFixed(1),"%"]})]}),u.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"4px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${e*100}%`,height:"100%",background:"#64748B",borderRadius:"4px",transition:"width 0.3s ease"}})})]})]}),VF=({bestEdge:n,game:e,isMobile:t,factors:i})=>{if(!n)return null;const a=PE(n.odds),l=e.edges.total?.predictedTotal||0,c=e.edges.total?.marketTotal||0,h=l-c,f=hF(n.evPercent,n.modelProb),v=(()=>{if(!i||i.length===0)return[];const b=[];if(n.market==="TOTAL"){const _=n.pick.includes("OVER");i.forEach(w=>{(_&&w.impact>.05||!_&&w.impact<-.05)&&Math.abs(w.impact)>.05&&b.push(`${w.name}: ${Math.abs(w.impact).toFixed(2)} goal impact`)})}else{const _=n.team;i.forEach(w=>{const E=w.awayMetric?.value||0,P=w.homeMetric?.value||0,N=E>P?e.awayTeam:e.homeTeam,V=Math.abs(E-P)/((E+P)/2);if(N===_&&V>.1){const L=(V*100).toFixed(0);b.push(`${w.name}: ${_} has ${L}% edge`)}})}return b.slice(0,3)})();return u.jsxs("div",{style:{background:Yt.hero,border:Ge.elevated.border,boxShadow:Ge.elevated.shadow,borderRadius:"10px",padding:t?"0.75rem":"0.875rem",margin:0,position:"relative",overflow:"hidden"},children:[n.evPercent>10&&u.jsx("div",{className:"shimmer-overlay"}),u.jsxs("div",{style:{fontSize:t?M.heading.size:"1.25rem",fontWeight:M.heading.weight,marginBottom:"1rem",color:"var(--color-text-primary)",position:"relative",zIndex:1,letterSpacing:M.heading.letterSpacing},children:["💰 BEST VALUE: ",n.pick]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:t?"1fr 1fr":"repeat(4, 1fr)",gap:"0.875rem",marginBottom:"1rem",position:"relative",zIndex:1},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:M.label.size,color:"var(--color-text-muted)",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing,fontWeight:M.label.weight,marginBottom:"0.25rem"},children:"Our Edge"}),u.jsxs("div",{style:{fontSize:t?"1.125rem":M.hero.size,fontWeight:M.hero.weight,color:"#10B981",fontFeatureSettings:"'tnum'",lineHeight:M.hero.lineHeight},children:[h>0?"+":"",Math.abs(h).toFixed(1)]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)"},children:"goals"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:M.label.size,color:"var(--color-text-muted)",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing,fontWeight:M.label.weight,marginBottom:"0.25rem"},children:"Value"}),u.jsxs("div",{style:{fontSize:t?"1.125rem":M.hero.size,fontWeight:M.hero.weight,color:"#10B981",fontFeatureSettings:"'tnum'",lineHeight:M.hero.lineHeight},children:["+",n.evPercent.toFixed(1),"%"]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)"},children:"EV"})]}),!t&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:M.label.size,color:"var(--color-text-muted)",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing,fontWeight:M.label.weight,marginBottom:"0.25rem"},children:"Confidence"}),u.jsx("div",{style:{fontSize:M.subheading.size,fontWeight:M.subheading.weight,color:f.color,lineHeight:M.hero.lineHeight},children:f.level}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)"},children:"level"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:M.label.size,color:"var(--color-text-muted)",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing,fontWeight:M.label.weight,marginBottom:"0.25rem"},children:"Odds"}),u.jsxs("div",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'",lineHeight:M.hero.lineHeight},children:[n.odds>0?"+":"",n.odds]}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)"},children:"line"})]})]})]}),u.jsx(NF,{modelProb:n.modelProb,marketProb:a}),v.length>0&&u.jsxs("div",{style:{marginTop:"1rem",marginBottom:"0.75rem",padding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.1)",position:"relative",zIndex:1},children:[u.jsxs("div",{style:{fontSize:M.label.size,color:"#10B981",fontWeight:M.heading.weight,marginBottom:"0.625rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"1rem"},children:"✓"}),"Why this is the best value:"]}),v.map((b,x)=>u.jsxs("div",{style:{fontSize:M.body.size,color:"var(--color-text-primary)",marginBottom:x<v.length-1?"0.5rem":0,paddingLeft:"1.25rem",position:"relative",lineHeight:"1.5"},children:[u.jsx("span",{style:{position:"absolute",left:0,color:"#10B981",fontSize:"1.25rem",fontWeight:"bold"},children:"•"}),b]},x))]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:M.body.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(16, 185, 129, 0.2)",position:"relative",zIndex:1,fontWeight:M.caption.weight},children:[t&&u.jsxs("span",{children:["Odds: ",n.odds>0?"+":"",n.odds]}),u.jsxs("span",{children:["Model: ",l.toFixed(1)]}),u.jsxs("span",{children:["Market: ",c.toFixed(1)]})]})]})},FF=({factors:n,totalImpact:e,awayTeam:t,homeTeam:i,isMobile:a,bestEdge:l})=>{if(!n||n.length===0)return null;const c=n.filter(x=>{const _=Math.abs(x.impact)>.05,w=x.awayMetric?.value||0,E=x.homeMetric?.value||0,P=w&&E&&Math.abs(w-E)/((w+E)/2)>.1;if(!_||!P)return!1;if(l?.market==="MONEYLINE")return(w>E?t:i)===l.team;if(l?.market==="TOTAL"){const N=l.pick?.includes("OVER");return N&&x.impact>.05||!N&&x.impact<-.05}return!0}).sort((x,_)=>Math.abs(_.impact)-Math.abs(x.impact)).slice(0,3);if(c.length===0)return u.jsxs("div",{style:{background:Yt.factors,border:Ge.raised.border,boxShadow:Ge.raised.shadow,borderRadius:"10px",padding:a?"0.75rem":"0.875rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:M.body.size,color:"var(--color-text-muted)",marginBottom:"0.5rem"},children:"📊 KEY ADVANTAGES"}),u.jsx("div",{style:{fontSize:M.subheading.size,color:"var(--color-text-primary)",fontWeight:M.heading.weight},children:"Even Matchup"}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",marginTop:"0.5rem"},children:"No dominant statistical advantages detected. Both teams are closely matched in key metrics."})]});const h=l?.market==="MONEYLINE",f=l?.market==="TOTAL",g=f?`💰 Why ${l.pick} is the smart bet:`:h?`💰 Why ${l.team} ML is the smart bet:`:l?.market==="PUCK_LINE"?`💰 Why ${l.pick} is the smart bet:`:"📊 KEY ADVANTAGES",v=f?`${c.length} factor${c.length!==1?"s":""} combining for ${e>=0?"+":""}${e.toFixed(2)} goal edge`:h?`${c.length} decisive advantage${c.length!==1?"s":""} supporting ${l.team} to WIN`:`${c.length} key factor${c.length!==1?"s":""} with significant impact`,b=c;return c.length,u.jsxs("div",{style:{background:Yt.factors,border:Ge.raised.border,boxShadow:Ge.raised.shadow,borderRadius:Ae.borderRadius,overflow:"hidden"},children:[u.jsxs("div",{style:{padding:a?"0.625rem":"0.75rem",background:"rgba(0, 0, 0, 0.15)",borderBottom:Ge.flat.border},children:[u.jsx("h3",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,margin:0,marginBottom:"0.25rem",color:"var(--color-accent)",letterSpacing:M.heading.letterSpacing},children:g}),u.jsx("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",fontWeight:M.caption.weight},children:v})]}),u.jsxs("div",{style:{padding:a?"0.625rem":"0.75rem"},children:[" ",b.map((x,_)=>{const w=x.awayMetric?.value||0,E=x.homeMetric?.value||0,N=(Math.abs(w-E)/((w+E)/2)*100).toFixed(0),V=w>E?t:i,ne=(()=>{if(h)return x.name==="Expected Goals"?`${V} projects to score ${Math.abs(x.impact).toFixed(2)} more goals, giving them a decisive edge to WIN this game.`:x.name==="Offensive Rating"?`${V} generates ${N}% more high-danger chances, creating better scoring opportunities to WIN.`:x.name==="Defensive Rating"?`${V} allows ${N}% fewer dangerous chances, making it harder for opponents to score and WIN.`:x.name==="Special Teams"?`${V} has superior power play execution, creating more scoring chances to WIN.`:x.name==="Possession & Control"?`${V} controls ${N}% more of the play, dictating the pace to WIN.`:`${V} has a ${N}% advantage in ${x.name.toLowerCase()}, improving their chances to WIN this game.`;if(f){const W=x.impact>0?"OVER":"UNDER",q=Math.abs(x.impact).toFixed(2);if(x.name.includes("Expected Goals")){const D=x.awayMetric?.value||0,I=x.homeMetric?.value||0,C=D>I?t:i,F=Math.max(D,I)>2.7?"elite":Math.max(D,I)>2.5?"strong":"solid";return`${C}'s ${F} offense (${Math.max(D,I).toFixed(2)} xGF/60) creates ${q}-goal ${W} edge.`}else if(x.name.includes("Against")||x.name.includes("Defense")){const D=x.awayMetric?.value||0,I=x.homeMetric?.value||0,C=D<I?t:i,F=Math.min(D,I)<2.3?"elite":Math.min(D,I)<2.5?"strong":"solid";return`${C}'s ${F} defense (${Math.min(D,I).toFixed(2)} xGA/60) limits scoring, ${q}-goal ${W} edge.`}else{if(x.name.includes("Power Play"))return`Special teams advantage creates ${q}-goal ${W} edge.`;if(x.name.includes("PDO")||x.name.includes("Regression"))return`${x.impact<0?x.awayMetric?.value>x.homeMetric?.value?t:i:x.awayMetric?.value<x.homeMetric?.value?t:i}'s regression indicators point toward ${q}-goal ${W} edge.`}return`${x.name} matchup creates ${q}-goal ${W} edge.`}return x.explanation})();return u.jsxs("div",{style:{marginBottom:_<b.length-1?"0.625rem":"0",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"8px",padding:"0.75rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[u.jsxs("div",{style:{fontSize:M.label.size,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:M.label.weight,marginBottom:"0.625rem"},children:[x.stars===3?"🔥":x.stars===2?"🎯":"⚡"," ",x.name]}),u.jsx("div",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,color:"#10B981",marginBottom:"0.625rem",lineHeight:1.3},children:h?`${V} has ${N}% edge`:f&&x.impact>0?"Combined teams favor OVER":f&&x.impact<0?"Combined teams favor UNDER":`${V} has ${N}% edge`}),f&&u.jsxs("div",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:x.impact>0?"#F59E0B":"#8B5CF6",marginBottom:"0.625rem"},children:[x.impact>0?"+":"",x.impact.toFixed(2)," goal impact → ",x.impact>0?"OVER":"UNDER"]}),u.jsx("div",{style:{fontSize:M.body.size,color:"var(--color-text-primary)",marginBottom:"0.75rem",lineHeight:1.5},children:ne}),u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[t,": ",w.toFixed(2)," | ",i,": ",E.toFixed(2)]})]},_)})]}),u.jsxs("div",{style:{textAlign:"center",fontSize:M.subheading.size,fontWeight:M.heading.weight,padding:a?Ae.innerPadding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%)",border:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:Ae.borderRadius,color:"#10B981",fontFeatureSettings:"'tnum'",margin:a?Ae.innerPadding:"1rem",marginTop:"1rem"},children:[u.jsx("div",{style:{fontSize:M.caption.size,fontWeight:M.caption.weight,color:"rgba(16, 185, 129, 0.8)",marginBottom:"0.25rem"},children:"TOTAL EDGE"}),Fh.formatGoalImpact(e)," goals vs market"]})]})},LF=({game:n,bestEdge:e,awayTeam:t,homeTeam:i,isMobile:a,factors:l})=>{if(!n||!e)return null;const c=e.market==="TOTAL";let h=null,f="",g=null;if(c){const N=n.edges?.moneyline?.away,V=n.edges?.moneyline?.home;N&&V&&(h=N.evPercent>V.evPercent?N:V,f=N.evPercent>V.evPercent?`${t} ML`:`${i} ML`,g=N.evPercent>V.evPercent?t:i)}else{const N=n.edges?.total?.over,V=n.edges?.total?.under;if(N&&V){h=N.evPercent>V.evPercent?N:V;const L=n.rawOdds?.total?.line||N.line||V.line;f=N.evPercent>V.evPercent?`OVER ${L}`:`UNDER ${L}`}}if(!h||h.evPercent<=0)return null;const b=(()=>{if(!l||l.length===0)return[];const N=[];if(c)l.forEach(V=>{const L=V.awayMetric?.value||0,ne=V.homeMetric?.value||0,W=L>ne?t:i,q=(Math.abs(L-ne)/((L+ne)/2)*100).toFixed(0);if(W===g&&Math.abs(L-ne)/((L+ne)/2)>.1){let D="";V.name==="Expected Goals"?D=`${g} projects to score ${Math.abs(V.impact).toFixed(2)} more goals, making them a strong WIN candidate.`:V.name==="Offensive Rating"?D=`${g} generates ${q}% more high-danger chances, giving them a scoring edge to WIN.`:V.name==="Defensive Rating"?D=`${g} allows ${q}% fewer dangerous chances, making it harder for opponents to WIN.`:V.name==="Special Teams"?D=`${g} has superior power play execution, creating more scoring chances to WIN.`:V.name==="Possession & Control"?D=`${g} controls ${q}% more of the play, dictating the pace to WIN.`:D=`${g} has a ${q}% advantage in ${V.name.toLowerCase()}, improving their chances to WIN.`,N.push({icon:V.stars===3?"🔥":V.stars===2?"🎯":"⚡",name:V.name,edge:`${g} has ${q}% edge`,explanation:D})}});else{const V=f.includes("OVER");l.forEach(L=>{if((V&&L.impact>.05||!V&&L.impact<-.05)&&Math.abs(L.impact)>.05){const W=V?"OVER":"UNDER",q=`${L.name} pushes the total ${W} by ~${Math.abs(L.impact).toFixed(2)} goals, creating value.`;N.push({icon:L.stars===3?"🔥":L.stars===2?"🎯":"⚡",name:L.name,edge:`${Math.abs(L.impact).toFixed(2)} goal impact`,explanation:q})}})}return N.slice(0,3)})(),x=Qc(h.evPercent),w=c?`While ${e.pick} is our top pick, ${g} ML offers strong value if you prefer betting on the winner.`:`While ${e.team} ML is our top pick, ${f} offers strong value if you prefer betting on the total.`,E=PE(h.odds),P=((h.modelProb-E)*100).toFixed(1);return u.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.12) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"10px",padding:a?"0.75rem":"0.875rem",margin:0,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(212, 175, 55, 0.1)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, rgba(212, 175, 55, 0.8) 0%, rgba(212, 175, 55, 0.3) 100%)"}}),u.jsxs("div",{style:{marginBottom:"1rem",paddingTop:"0.5rem"},children:[u.jsx("div",{style:{fontSize:M.label.size,color:"var(--color-accent)",textTransform:"uppercase",letterSpacing:"0.08em",fontWeight:M.heading.weight,marginBottom:"0.75rem"},children:"⭐ ALSO CONSIDER THIS VALUE BET"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.625rem"},children:[u.jsx("div",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,color:"var(--color-text-primary)"},children:c?`${f} to WIN`:f}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.25rem"},children:[u.jsxs("div",{style:{fontSize:M.subheading.size,fontWeight:M.heading.weight,color:x.color},children:["+",h.evPercent.toFixed(1),"% EV"]}),u.jsx("div",{style:{fontSize:M.caption.size,fontWeight:M.label.weight,color:x.color,padding:"0.125rem 0.5rem",background:`${x.color}22`,borderRadius:"4px",border:`1px solid ${x.color}`},children:x.label})]})]}),u.jsx("div",{style:{fontSize:M.body.size,color:"var(--color-text-muted)",lineHeight:1.5},children:w})]}),b.length>0&&u.jsxs("div",{style:{padding:"1rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(212, 175, 55, 0.03) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"8px",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[u.jsxs("div",{style:{fontSize:M.label.size,color:"var(--color-accent)",fontWeight:M.heading.weight,marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"1rem"},children:"✓"}),"WHY THIS BET HAS VALUE:"]}),b.map((N,V)=>u.jsxs("div",{style:{marginBottom:V<b.length-1?"0.875rem":0,paddingBottom:V<b.length-1?"0.875rem":0,borderBottom:V<b.length-1?"1px solid rgba(212, 175, 55, 0.2)":"none"},children:[u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:M.label.weight,marginBottom:"0.375rem"},children:[N.icon," ",N.name]}),u.jsx("div",{style:{fontSize:M.body.size,fontWeight:M.heading.weight,color:"#D4AF37",marginBottom:"0.375rem"},children:N.edge}),u.jsx("div",{style:{fontSize:M.body.size,color:"var(--color-text-primary)",lineHeight:1.5},children:N.explanation})]},V))]}),u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(212, 175, 55, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[u.jsxs("span",{children:["Odds: ",h.odds>0?"+":"",h.odds]}),u.jsxs("span",{children:["Model: ",(h.modelProb*100).toFixed(1),"% vs ",(E*100).toFixed(1),"%"]}),u.jsxs("span",{style:{color:"#D4AF37",fontWeight:M.label.weight},children:["Edge: +",P,"pts"]})]})]})},Es=({team:n,odds:e,ev:t,isPositive:i,isBestBet:a,modelProb:l,impliedProb:c})=>{const[h,f]=H.useState(!1),g=Qc(t),v=l&&c?(l-c)*100:null;return u.jsxs("div",{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:{padding:"0.75rem",marginBottom:"0.5rem",background:a?g.bg:h?"rgba(100, 116, 139, 0.08)":"transparent",border:a?`2px solid ${g.color}40`:Ge.flat.border,borderRadius:"8px",transition:Ci.normal,transform:h?"translateX(4px)":"translateX(0)",cursor:"pointer",boxShadow:a&&h?`0 4px 12px ${g.color}30`:"none"},role:"button",tabIndex:0,"aria-label":`${n} ${e>0?"+":""}${e}, EV ${t.toFixed(1)}%`,onKeyPress:b=>b.key==="Enter"&&console.log("Market selected:",n),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.375rem"},children:[u.jsx("span",{style:{fontSize:M.body.size,fontWeight:M.body.weight,color:"var(--color-text-primary)"},children:n}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsxs("span",{style:{fontSize:M.body.size,fontWeight:M.body.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'"},children:[e>0?"+":"",e]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",minWidth:"70px"},children:[u.jsxs("span",{style:{fontSize:M.label.size,fontWeight:M.heading.weight,color:g.color,fontFeatureSettings:"'tnum'"},children:[i?"+":"",t.toFixed(1),"%"]}),a&&u.jsx("span",{style:{fontSize:M.caption.size,color:g.color,fontWeight:M.body.weight},children:g.label})]}),a&&u.jsx("span",{style:{fontSize:"1.125rem",color:g.color},children:"✓"})]})]}),(h||a)&&l&&c&&u.jsxs("div",{style:{fontSize:M.caption.size,color:"var(--color-text-muted)",display:"flex",justifyContent:"space-between",paddingTop:"0.375rem",borderTop:"1px solid rgba(100, 116, 139, 0.15)"},children:[u.jsxs("span",{children:["Book: ",(c*100).toFixed(0),"%"]}),u.jsxs("span",{children:["Model: ",(l*100).toFixed(0),"%"]}),v!==null&&u.jsxs("span",{style:{color:v>0?g.color:"var(--color-text-muted)"},children:["(",v>0?"+":"",v.toFixed(1),"pts)"]})]})]})},BF=({game:n,isMobile:e})=>{if(!n.edges)return null;const t=Math.max(n.edges.moneyline?.away?.evPercent||0,n.edges.moneyline?.home?.evPercent||0,n.edges.total?.over?.evPercent||0,n.edges.total?.under?.evPercent||0);return e?u.jsxs("div",{style:{overflowX:"auto",scrollSnapType:"x mandatory",display:"flex",gap:Ae.sectionGap,padding:Ae.cardPadding,borderTop:Ge.flat.border,scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"hide-scrollbar",children:[n.edges.moneyline&&u.jsxs("div",{style:{background:Yt.moneyline,border:Ge.raised.border,boxShadow:Ge.raised.shadow,borderRadius:Ae.borderRadius,padding:Ae.innerPadding,minWidth:"85%",scrollSnapAlign:"center",flex:"0 0 auto"},children:[u.jsx("div",{style:{fontSize:M.label.size,fontWeight:M.heading.weight,marginBottom:"0.75rem",color:"rgba(59, 130, 246, 0.95)",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:"⚡ MONEYLINE"}),u.jsx(Es,{team:n.awayTeam,odds:n.edges.moneyline.away.odds,ev:n.edges.moneyline.away.evPercent,isPositive:n.edges.moneyline.away.evPercent>0,isBestBet:n.edges.moneyline.away.evPercent===t&&n.edges.moneyline.away.evPercent>5,modelProb:n.edges.moneyline.away.modelProb,impliedProb:ws(n.edges.moneyline.away.odds)}),u.jsx(Es,{team:n.homeTeam,odds:n.edges.moneyline.home.odds,ev:n.edges.moneyline.home.evPercent,isPositive:n.edges.moneyline.home.evPercent>0,isBestBet:n.edges.moneyline.home.evPercent===t&&n.edges.moneyline.home.evPercent>5,modelProb:n.edges.moneyline.home.modelProb,impliedProb:ws(n.edges.moneyline.home.odds)})]}),n.edges.total&&n.rawOdds?.total?.line&&u.jsxs("div",{style:{background:Yt.total,border:Ge.raised.border,boxShadow:Ge.raised.shadow,borderRadius:Ae.borderRadius,padding:Ae.innerPadding,minWidth:"85%",scrollSnapAlign:"center",flex:"0 0 auto"},children:[u.jsx("div",{style:{fontSize:M.label.size,fontWeight:M.heading.weight,marginBottom:"0.75rem",color:"rgba(168, 85, 247, 0.95)",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:"🎯 TOTAL"}),u.jsx(Es,{team:`O ${n.rawOdds.total.line}`,odds:n.edges.total.over.odds,ev:n.edges.total.over.evPercent,isPositive:n.edges.total.over.evPercent>0,isBestBet:n.edges.total.over.evPercent===t&&n.edges.total.over.evPercent>5,modelProb:n.edges.total.over.modelProb,impliedProb:ws(n.edges.total.over.odds)}),u.jsx(Es,{team:`U ${n.rawOdds.total.line}`,odds:n.edges.total.under.odds,ev:n.edges.total.under.evPercent,isPositive:n.edges.total.under.evPercent>0,isBestBet:n.edges.total.under.evPercent===t&&n.edges.total.under.evPercent>5,modelProb:n.edges.total.under.modelProb,impliedProb:ws(n.edges.total.under.odds)})]})]}):u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.25rem",padding:"1.25rem",borderTop:Ge.flat.border},children:[n.edges.moneyline&&u.jsxs("div",{style:{background:Yt.moneyline,border:Ge.raised.border,boxShadow:Ge.raised.shadow,borderRadius:"10px",padding:"1.25rem"},children:[u.jsx("div",{style:{fontSize:M.label.size,fontWeight:M.heading.weight,marginBottom:"0.875rem",color:"rgba(59, 130, 246, 0.95)",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:"⚡ MONEYLINE"}),u.jsx(Es,{team:n.awayTeam,odds:n.edges.moneyline.away.odds,ev:n.edges.moneyline.away.evPercent,isPositive:n.edges.moneyline.away.evPercent>0,isBestBet:n.edges.moneyline.away.evPercent===t&&n.edges.moneyline.away.evPercent>5,modelProb:n.edges.moneyline.away.modelProb,impliedProb:ws(n.edges.moneyline.away.odds)}),u.jsx(Es,{team:n.homeTeam,odds:n.edges.moneyline.home.odds,ev:n.edges.moneyline.home.evPercent,isPositive:n.edges.moneyline.home.evPercent>0,isBestBet:n.edges.moneyline.home.evPercent===t&&n.edges.moneyline.home.evPercent>5,modelProb:n.edges.moneyline.home.modelProb,impliedProb:ws(n.edges.moneyline.home.odds)})]}),n.edges.total&&n.rawOdds?.total?.line&&u.jsxs("div",{style:{background:Yt.total,border:Ge.raised.border,boxShadow:Ge.raised.shadow,borderRadius:"10px",padding:"1.25rem"},children:[u.jsx("div",{style:{fontSize:M.label.size,fontWeight:M.heading.weight,marginBottom:"0.875rem",color:"rgba(168, 85, 247, 0.95)",textTransform:M.label.textTransform,letterSpacing:M.label.letterSpacing},children:"🎯 TOTAL"}),u.jsx(Es,{team:`O ${n.rawOdds.total.line}`,odds:n.edges.total.over.odds,ev:n.edges.total.over.evPercent,isPositive:n.edges.total.over.evPercent>0,isBestBet:n.edges.total.over.evPercent===t&&n.edges.total.over.evPercent>5,modelProb:n.edges.total.over.modelProb,impliedProb:ws(n.edges.total.over.odds)}),u.jsx(Es,{team:`U ${n.rawOdds.total.line}`,odds:n.edges.total.under.odds,ev:n.edges.total.under.evPercent,isPositive:n.edges.total.under.evPercent>0,isBestBet:n.edges.total.under.evPercent===t&&n.edges.total.under.evPercent>5,modelProb:n.edges.total.under.modelProb,impliedProb:ws(n.edges.total.under.odds)})]})]})},zF=({dataProcessor:n,oddsData:e,startingGoalies:t,goalieData:i,statsAnalyzer:a,edgeFactorCalc:l})=>{const[c,h]=H.useState(null),[f,g]=H.useState([]),[v,b]=H.useState([]),[x,_]=H.useState(!1),[w,E]=H.useState(null),{scores:P}=RF(),{bets:N}=IF(),[V,L]=H.useState(null),[ne,W]=H.useState(!1),[q,D]=H.useState(null),[I,C]=H.useState(!1);H.useEffect(()=>{const X=localStorage.getItem("nhl_savant_disclaimer_acknowledged");C(!!X)},[]),EF(f),H.useEffect(()=>{if(i&&Array.isArray(i)&&i.length>0){console.log(`🥅 Initializing GoalieProcessor with ${i.length} goalie records`);const X=new TM(i);L(X)}},[i]),H.useEffect(()=>{const X=()=>{_(window.innerWidth<=640)};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]),H.useEffect(()=>{if(n&&e){const X=new lF(n,e,t);h(X);const le=X.calculateAllEdges();g(le),AF(le);const G=le.filter(J=>J.bestEdge&&J.bestEdge.evPercent>=3).length;mM(le.length,G);const U=X.getTopEdges(3);b(U)}},[n,e,t]);const F=H.useCallback(X=>{if(!t||!t.games)return null;const le=t.games.find(fe=>fe.away?.team===X||fe.home?.team===X);if(!le)return null;const U=le.away?.team===X?le.away:le.home;if(!U||!U.goalie||!U.confirmed)return null;const J=V?V.getGoalieStats(U.goalie,X):null;console.log(`🥅 TodaysGames getGoalieForTeam: ${U.goalie} (${X})`,{found:!!J,hasProcessor:!!V});const oe={name:U.goalie,team:X,confirmed:!0,...J||{}};return console.log("   📊 Returning goalie object:",{name:oe.name,hasGSAE:oe.gsae!==void 0,gsae:oe.gsae}),oe},[V,t]),z=(()=>{const X=f.filter(G=>{let U=!1;return(G.edges.moneyline?.away?.evPercent>=3||G.edges.moneyline?.home?.evPercent>=3)&&(U=!0),(G.edges.total?.over?.evPercent>=3||G.edges.total?.under?.evPercent>=3)&&(U=!0),U}),le=X.filter(G=>{let U=0;return G.edges.moneyline&&(G.edges.moneyline.away?.evPercent>U&&(U=G.edges.moneyline.away.evPercent),G.edges.moneyline.home?.evPercent>U&&(U=G.edges.moneyline.home.evPercent)),G.edges.total&&(G.edges.total.over?.evPercent>U&&(U=G.edges.total.over.evPercent),G.edges.total.under?.evPercent>U&&(U=G.edges.total.under.evPercent)),U>5}).length;return{total:X.length,highValue:le}})(),O=(X,le)=>{if(!a||!l)return null;try{const G=le?.market||"TOTAL",U=l.getKeyFactors(X.awayTeam,X.homeTeam,G),J=l.generateStory(U,X.awayTeam,X.homeTeam),oe=l.calculateTotalImpact(U),fe=a.getDangerZoneBreakdown(X.awayTeam),pe=a.getDangerZoneBreakdown(X.homeTeam),Ee=fe&&pe?Fh.generateDangerZoneHeatmap(fe,pe):null,Te=a.getReboundMetrics(X.awayTeam),De=a.getReboundMetrics(X.homeTeam),Qe=Te&&De?Fh.generateReboundTable(Te,De):null,tt=a.getPhysicalMetrics(X.awayTeam),Xt=a.getPhysicalMetrics(X.homeTeam),Se=tt&&Xt?Fh.generatePhysicalMetrics(tt,Xt):null,bn=a.getPossessionMetrics(X.awayTeam),Wn=a.getPossessionMetrics(X.homeTeam),yt=bn&&Wn?{away:bn,home:Wn}:null,fn=a.getRegressionIndicators(X.awayTeam),hi=a.getRegressionIndicators(X.homeTeam);return{factors:U,story:J,totalImpact:oe,dangerZoneData:Ee,reboundData:Qe,physicalData:Se,possessionData:yt,regressionData:fn&&hi?{away:fn,home:hi}:null}}catch(G){return console.error("Error generating analytics data:",G),null}};return e?u.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:x?"0.75rem":"1.5rem 1rem"},className:"animate-fade-in",children:[u.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.6)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.06)",borderRadius:"10px",padding:x?"0.625rem 0.875rem":"0.75rem 1.25rem",marginBottom:x?"1rem":"1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:x?"0.813rem":"0.875rem",color:"rgba(255, 255, 255, 0.9)",fontWeight:"600",letterSpacing:"-0.01em"},children:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),u.jsx("span",{style:{width:"3px",height:"3px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.3)"}}),u.jsx(cF,{}),t&&t.games&&u.jsxs(u.Fragment,{children:[u.jsx("span",{style:{width:"3px",height:"3px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.3)"}}),u.jsxs("span",{style:{fontSize:x?"0.75rem":"0.813rem",color:"#10B981",fontWeight:"600"},children:["🥅 ",(()=>{let X=0,le=0;return t&&t.games&&Array.isArray(t.games)&&f.forEach(G=>{const U=t.games.find(J=>{const oe=J.away?.team===G.awayTeam&&J.home?.team===G.homeTeam,fe=J.matchup===`${G.awayTeam} @ ${G.homeTeam}`;return oe||fe});U&&(le+=2,U.away?.goalie&&X++,U.home?.goalie&&X++)}),`${X}/${le}`})()]})]})]}),u.jsxs("div",{style:{display:"flex",gap:x?"0.5rem":"0.625rem",alignItems:"center"},children:[u.jsxs("div",{style:{padding:x?"0.375rem 0.625rem":"0.5rem 0.75rem",background:"rgba(148, 163, 184, 0.1)",borderRadius:"6px",border:"1px solid rgba(148, 163, 184, 0.2)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:x?"1.125rem":"1.25rem",fontWeight:"700",color:"#CBD5E1"},children:f.length}),u.jsx("span",{style:{fontSize:x?"0.625rem":"0.688rem",color:"rgba(203, 213, 225, 0.7)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.03em"},children:"Games"})]}),u.jsxs("div",{style:{padding:x?"0.375rem 0.625rem":"0.5rem 0.75rem",background:"rgba(59, 130, 246, 0.12)",borderRadius:"6px",border:"1px solid rgba(59, 130, 246, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:x?"1.125rem":"1.25rem",fontWeight:"700",color:"#60A5FA"},children:z.total}),u.jsx("span",{style:{fontSize:x?"0.625rem":"0.688rem",color:"rgba(96, 165, 250, 0.9)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.03em"},children:"+EV"})]}),u.jsxs("div",{style:{padding:x?"0.375rem 0.625rem":"0.5rem 0.75rem",background:"rgba(212, 175, 55, 0.12)",borderRadius:"6px",border:"1px solid rgba(212, 175, 55, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:x?"1.125rem":"1.25rem",fontWeight:"700",color:"#D4AF37"},children:z.highValue}),u.jsx("span",{style:{fontSize:x?"0.625rem":"0.688rem",color:"rgba(212, 175, 55, 0.9)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.03em"},children:"Elite"})]})]})]}),f.length>0&&f[0].gameTime&&u.jsx("div",{style:{marginBottom:x?"1rem":"1.5rem"},children:u.jsx(uF,{firstGameTime:f[0].gameTime})}),N&&N.length>0&&(()=>{const X=N.filter(G=>G.status==="PENDING"&&G.prediction?.rating&&G.prediction.rating!=="C"),le={};return X.forEach(G=>{const U=`${G.game.awayTeam}_${G.game.homeTeam}`;le[U]||(le[U]={game:`${G.game.awayTeam} @ ${G.game.homeTeam}`,gameTime:G.game.gameTime,bets:[]}),le[U].bets.push({pick:G.bet.pick,market:G.bet.market,grade:G.prediction.rating,odds:G.bet.odds,edge:`${G.prediction.evPercent.toFixed(1)}%`})}),Object.keys(le).length>0?u.jsx("div",{style:{marginBottom:"1.5rem"},children:u.jsx(MF,{gameGroups:Object.values(le),onViewAll:()=>{document.querySelector('[class*="elevated-card"]')?.scrollIntoView({behavior:"smooth",block:"start"})}})}):null})(),u.jsx("div",{children:(()=>{const X={};f.forEach(G=>{const U=G.gameTime;X[U]||(X[U]=[]),X[U].push(G)});const le=Object.keys(X).sort((G,U)=>{const J=oe=>{const[fe,pe]=oe.split(" "),[Ee,Te]=fe.split(":").map(Number);let De=Ee;return pe==="PM"&&Ee!==12&&(De+=12),pe==="AM"&&Ee===12&&(De=0),De*60+Te};return J(G)-J(U)});return le.map((G,U)=>{const J=X[G],oe=new Date,fe=new Date,[pe,Ee]=G.split(" "),[Te,De]=pe.split(":").map(Number);let Qe=Te;Ee==="PM"&&Te!==12&&(Qe+=12),Ee==="AM"&&Te===12&&(Qe=0),fe.setHours(Qe,De,0,0);const tt=Math.floor((fe-oe)/(1e3*60)),Xt=tt>0&&tt<60;return u.jsxs("div",{style:{marginBottom:U<le.length-1?x?"1.5rem":"1.75rem":0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:x?"1rem":"1.25rem",paddingBottom:"0.75rem",borderBottom:"2px solid rgba(16, 185, 129, 0.15)"},children:[u.jsx("div",{style:{fontSize:x?"1rem":"1.125rem",fontWeight:"800",color:"var(--color-text-primary)",letterSpacing:"-0.01em"},children:G}),u.jsxs("div",{style:{fontSize:x?"0.75rem":"0.813rem",color:"var(--color-text-muted)",fontWeight:"600",padding:"0.25rem 0.625rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[J.length," game",J.length>1?"s":""]}),Xt&&u.jsx("div",{style:{fontSize:x?"0.688rem":"0.75rem",color:"#EF4444",fontWeight:"700",padding:"0.25rem 0.625rem",background:"rgba(239, 68, 68, 0.15)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)",textTransform:"uppercase",letterSpacing:"0.05em",animation:"pulse 2s infinite"},children:"🔥 Starting Soon"})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:x?"0.625rem":"0.75rem"},children:J.map((Se,bn)=>{const Wn=f.indexOf(Se),yt=v.filter(_e=>_e.game===Se.game&&_e.evPercent>0).sort((_e,Mi)=>Mi.evPercent-_e.evPercent)[0],fn=P?.find(_e=>_e.awayTeam===Se.awayTeam&&_e.homeTeam===Se.homeTeam||_e.away===Se.awayTeam&&_e.home===Se.homeTeam),hi=fn&&(fn.status==="LIVE"||fn.status==="In Progress"||fn.status==="FINAL"||fn.status==="Final"),Tn=u.jsxs(u.Fragment,{children:[u.jsx(OF,{awayTeam:Se.awayTeam,homeTeam:Se.homeTeam,gameTime:Se.gameTime,rating:yt?.evPercent||0,awayWinProb:(()=>{const _e=Se.edges.moneyline?.away?.modelProb||0;return _e>1?_e:_e*100})(),homeWinProb:(()=>{const _e=Se.edges.moneyline?.home?.modelProb||0;return _e>1?_e:_e*100})(),isMobile:x,bestEdge:yt,game:Se,dataProcessor:n,liveScores:P}),(()=>{const _e=P?.find(Oi=>Oi.awayTeam===Se.awayTeam&&Oi.homeTeam===Se.homeTeam||Oi.away===Se.awayTeam&&Oi.home===Se.homeTeam);return _e&&(_e.status==="LIVE"||_e.status==="In Progress"||_e.status==="FINAL"||_e.status==="Final")?null:u.jsx(DF,{game:Se,awayTeam:Se.awayTeam,homeTeam:Se.homeTeam,dataProcessor:n,isMobile:x})})()]});return hi?u.jsx("div",{className:"elevated-card",style:{marginBottom:bn<J.length-1?x?"0.625rem":"0.75rem":0,padding:0,background:"var(--color-bg-secondary)",border:"1px solid var(--color-border)",overflow:"hidden"},children:Tn},Wn):u.jsxs(jF,{header:Tn,defaultExpanded:!1,index:Wn,isMobile:x,onToggle:_e=>{if(_e){if(!I)return D(Se),W(!0),!1;ET(Se)}},children:[(()=>{const _e=O(Se,yt);return u.jsx(Lo,{stepNumber:1,title:"THE BET",emoji:"🎯",accentColor:"#D4AF37",isMobile:x,children:u.jsx(VF,{bestEdge:yt,game:Se,isMobile:x,factors:_e?.factors||[]})})})(),(()=>{const _e=O(Se,yt);return yt&&_e&&_e.factors?u.jsx(Lo,{stepNumber:2,title:"WHY THIS BET WORKS",emoji:"📖",accentColor:"#3B82F6",isMobile:x,children:u.jsx(CF,{game:Se,bestEdge:yt,factors:_e.factors,isMobile:x,dataProcessor:n})}):null})(),(()=>{const _e=O(Se,yt);return _e&&_e.factors&&_e.factors.length>0?u.jsx(Lo,{stepNumber:3,title:"KEY STATISTICAL DRIVERS",emoji:"📊",accentColor:"#8B5CF6",isMobile:x,children:u.jsx(FF,{factors:_e.factors,totalImpact:_e.totalImpact,awayTeam:Se.awayTeam,homeTeam:Se.homeTeam,isMobile:x,bestEdge:yt})}):null})(),(()=>{const _e=O(Se,yt);return u.jsx(Lo,{stepNumber:4,title:"ALTERNATIVE BETS",emoji:"💡",accentColor:"#F59E0B",isMobile:x,children:u.jsx(LF,{game:Se,bestEdge:yt,awayTeam:Se.awayTeam,homeTeam:Se.homeTeam,isMobile:x,factors:_e?.factors||[]})})})(),u.jsx(Lo,{stepNumber:5,title:"COMPLETE ODDS BOARD",emoji:"📈",accentColor:"#64748B",isMobile:x,children:u.jsx(BF,{game:Se,isMobile:x})}),(()=>{const _e=O(Se,yt);return _e?u.jsx(Lo,{stepNumber:6,title:"ADVANCED MATCHUP ANALYSIS",emoji:"🔬",accentColor:"#10B981",isMobile:x,children:u.jsx(yF,{awayTeam:Se.awayTeam,homeTeam:Se.homeTeam,dangerZoneData:_e.dangerZoneData,reboundData:_e.reboundData,physicalData:_e.physicalData,possessionData:_e.possessionData,regressionData:_e.regressionData,awayGoalie:F(Se.awayTeam),homeGoalie:F(Se.homeTeam),isMobile:x,dataProcessor:n,game:Se,bestEdge:yt,statsAnalyzer:a,defaultExpanded:!1})}):null})()]},Wn)})})]},G)})})()}),f.length===0&&u.jsx(u.Fragment,{children:P&&P.length>0?u.jsxs("div",{children:[u.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem 1rem",background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",borderRadius:"12px",marginBottom:"1.5rem",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[u.jsx(Va,{size:32,color:"#EF4444",style:{margin:"0 auto 0.75rem auto",animation:"pulse 1.5s infinite"}}),u.jsx("h3",{style:{marginBottom:"0.5rem",color:"#EF4444"},children:"Live Games"}),u.jsxs("p",{style:{color:"var(--color-text-secondary)",fontSize:"0.9rem"},children:["Showing ",P.length," game",P.length>1?"s":""," in progress"]})]}),P.map((X,le)=>{const G=`${X.awayTeam} @ ${X.homeTeam}`,U=N.filter(oe=>`${oe.game?.awayTeam} @ ${oe.game?.homeTeam}`===G).map(oe=>({market:oe.bet?.market,pick:oe.bet?.pick,team:oe.bet?.team,odds:oe.bet?.odds,line:oe.bet?.line,evPercent:oe.prediction?.evPercent||0,modelProb:oe.prediction?.modelProb||0})),J=oe=>{if(X.status!=="FINAL")return{status:"pending",pnl:0};const fe=X.awayScore+X.homeScore;let pe=!1,Ee=!1;if(oe.market==="MONEYLINE"){const Qe=oe.team,tt=X.awayScore>X.homeScore,Xt=X.homeScore>X.awayScore;pe=Qe===X.awayTeam&&tt||Qe===X.homeTeam&&Xt}else if(oe.market==="TOTAL"){const Qe=oe.pick.includes("OVER"),tt=parseFloat(oe.pick.match(/[\d.]+/)[0]);fe===tt?Ee=!0:pe=Qe?fe>tt:fe<tt}if(Ee)return{status:"push",pnl:0};const Te=oe.odds,De=pe?Te>0?Te:100/Math.abs(Te)*100:-100;return{status:pe?"won":"lost",pnl:De}};return u.jsxs("div",{className:"elevated-card",style:{marginBottom:"1.5rem",padding:0,background:X.status==="LIVE"?"linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(26, 31, 46, 1) 100%)":X.status==="FINAL"?"linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(26, 31, 46, 1) 100%)":"var(--color-bg-secondary)",border:X.status==="LIVE"?"1px solid rgba(239, 68, 68, 0.3)":"1px solid var(--color-border)",overflow:"hidden"},children:[u.jsx("div",{style:{padding:x?"1rem":"1.5rem",borderBottom:"1px solid var(--color-border)"},children:u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{style:{fontSize:x?"1.1rem":"1.4rem",fontWeight:"bold",letterSpacing:"0.02em"},children:[X.awayTeam," ",u.jsx("span",{style:{color:"var(--color-text-muted)",fontSize:"0.9em"},children:"@"})," ",X.homeTeam]}),X.status==="LIVE"&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(239, 68, 68, 0.2)",padding:"0.5rem 1rem",borderRadius:"20px",color:"#EF4444",fontWeight:"bold",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.1em",animation:"pulse 1.5s infinite"},children:[u.jsx(Va,{size:14}),"LIVE"]}),X.status==="FINAL"&&u.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)",padding:"0.5rem 1rem",borderRadius:"20px",color:"#10B981",fontWeight:"bold",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.1em"},children:"FINAL"})]})}),u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:x?"2rem":"4rem",padding:x?"2rem 1rem":"3rem 1.5rem",background:"rgba(0, 0, 0, 0.2)"},children:[u.jsxs("div",{style:{textAlign:"center",flex:1},children:[u.jsx("div",{style:{fontSize:x?"0.75rem":"0.875rem",color:"var(--color-text-muted)",marginBottom:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.1em"},children:X.awayTeam}),u.jsx("div",{style:{fontSize:x?"3rem":"4rem",fontWeight:"bold",color:X.status==="LIVE"?"#EF4444":"#10B981",textShadow:X.status==="LIVE"?"0 0 20px rgba(239, 68, 68, 0.5)":"none"},children:X.awayScore})]}),u.jsx("div",{style:{fontSize:x?"1.5rem":"2rem",color:"var(--color-text-muted)",fontWeight:"300"},children:"—"}),u.jsxs("div",{style:{textAlign:"center",flex:1},children:[u.jsx("div",{style:{fontSize:x?"0.75rem":"0.875rem",color:"var(--color-text-muted)",marginBottom:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.1em"},children:X.homeTeam}),u.jsx("div",{style:{fontSize:x?"3rem":"4rem",fontWeight:"bold",color:X.status==="LIVE"?"#EF4444":"#10B981",textShadow:X.status==="LIVE"?"0 0 20px rgba(239, 68, 68, 0.5)":"none"},children:X.homeScore})]})]}),(X.clock||X.venue||X.winningGoalie||X.winningGoalScorer)&&u.jsxs("div",{style:{padding:x?"0.875rem 1rem":"1rem 1.5rem",background:"linear-gradient(180deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.25) 100%)",borderTop:"1px solid rgba(255, 255, 255, 0.05)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[X.clock&&u.jsxs("div",{style:{color:X.status==="LIVE"?"#EF4444":"#10B981",fontSize:x?"0.875rem":"0.938rem",fontWeight:"700",letterSpacing:"0.05em",textAlign:"center"},children:[X.periodType==="OT"?"🚨 OVERTIME":X.periodType==="SO"?"🎯 SHOOTOUT":"",X.periodType==="REG"&&X.period&&`Period ${X.period}`," ",X.clock&&`• ${X.clock}`]}),X.status==="FINAL"&&u.jsxs("div",{style:{display:"flex",flexDirection:x?"column":"row",gap:x?"0.5rem":"1.5rem",justifyContent:"center",alignItems:"center",fontSize:"0.75rem",color:"var(--color-text-muted)"},children:[X.venue&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[u.jsx("span",{children:"📍"}),u.jsx("span",{style:{fontWeight:"600"},children:X.venue})]}),X.winningGoalie&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[u.jsx("span",{children:"🥅"}),u.jsxs("span",{style:{fontWeight:"600"},children:["W: ",X.winningGoalie]})]}),X.winningGoalScorer&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[u.jsx("span",{children:"🚨"}),u.jsxs("span",{style:{fontWeight:"600"},children:["GWG: ",X.winningGoalScorer]})]})]})]}),U.length>0&&u.jsxs("div",{style:{padding:x?"1rem":"1.5rem",background:"linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.15) 100%)",borderTop:"1px solid rgba(255, 255, 255, 0.05)"},children:[u.jsxs("div",{style:{fontSize:"0.75rem",marginBottom:"1.25rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.12em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem"},children:[u.jsx("span",{style:{fontSize:"1.125rem",filter:"drop-shadow(0 0 8px rgba(16, 185, 129, 0.6))"},children:"🎯"}),u.jsx("span",{style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"800"},children:"NHL Savant Model Bets"})]}),u.jsx("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.25) 0%, rgba(16, 185, 129, 0.15) 100%)",color:"#10B981",padding:"0.375rem 0.75rem",borderRadius:"14px",fontSize:"0.75rem",fontWeight:"800",border:"1px solid rgba(16, 185, 129, 0.3)",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.2)"},children:U.length})]}),U.slice(0,3).map((oe,fe)=>{const pe=J(oe),Ee=pe.status==="won",Te=pe.status==="lost",De=pe.status==="push";return u.jsxs("div",{style:{marginBottom:fe<Math.min(U.length,3)-1?"0.5rem":0,padding:x?"0.875rem":"1rem",background:Ee?"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)":Te?"linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(239, 68, 68, 0.05) 100%)":De?"linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.04) 0%, rgba(255, 255, 255, 0.01) 100%)",borderRadius:"8px",border:`1.5px solid ${Ee?"rgba(16, 185, 129, 0.35)":Te?"rgba(239, 68, 68, 0.35)":De?"rgba(251, 191, 36, 0.35)":"rgba(255, 255, 255, 0.08)"}`,position:"relative",boxShadow:Ee?"0 4px 12px rgba(16, 185, 129, 0.15)":Te?"0 4px 12px rgba(239, 68, 68, 0.15)":De?"0 4px 12px rgba(251, 191, 36, 0.15)":"0 2px 8px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease",cursor:"default"},children:[pe.status!=="pending"&&u.jsx("div",{style:{position:"absolute",top:"0.625rem",left:"0.625rem",background:Ee?"linear-gradient(135deg, #10B981 0%, #059669 100%)":De?"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)":"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",color:"white",padding:"0.3rem 0.625rem",borderRadius:"12px",fontSize:"0.688rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.05em",boxShadow:Ee?"0 2px 8px rgba(16, 185, 129, 0.4)":De?"0 2px 8px rgba(251, 191, 36, 0.4)":"0 2px 8px rgba(239, 68, 68, 0.4)",border:"1px solid rgba(255, 255, 255, 0.2)",zIndex:10},children:Ee?"W":De?"P":"L"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem",paddingLeft:pe.status!=="pending"?"2.5rem":"0"},children:[u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontWeight:"700",fontSize:x?"0.875rem":"0.938rem",marginBottom:"0.375rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",letterSpacing:"0.01em"},children:oe.pick}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{background:"rgba(255, 255, 255, 0.08)",padding:"0.125rem 0.5rem",borderRadius:"8px",textTransform:"uppercase",fontSize:"0.625rem",fontWeight:"700",letterSpacing:"0.08em"},children:oe.market==="MONEYLINE"?"ML":oe.market==="TOTAL"?"TOT":oe.market}),u.jsxs("span",{style:{fontWeight:"700",color:oe.odds>0?"#10B981":"var(--color-text-primary)"},children:[oe.odds>0?"+":"",oe.odds]})]})]}),pe.status!=="pending"&&u.jsxs("div",{style:{fontSize:x?"1rem":"1.125rem",fontWeight:"800",color:Ee?"#10B981":De?"#F59E0B":"#EF4444",minWidth:"fit-content",textAlign:"right",textShadow:Ee?"0 0 8px rgba(16, 185, 129, 0.3)":De?"0 0 8px rgba(251, 191, 36, 0.3)":"0 0 8px rgba(239, 68, 68, 0.3)",letterSpacing:"0.02em"},children:[pe.pnl>0?"+$":pe.pnl<0?"-$":"$",Math.abs(pe.pnl).toFixed(0)]}),pe.status==="pending"&&X.status==="LIVE"&&u.jsxs("div",{style:{fontSize:"0.75rem",color:"#EF4444",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.375rem",whiteSpace:"nowrap",background:"rgba(239, 68, 68, 0.15)",padding:"0.25rem 0.5rem",borderRadius:"8px"},children:[u.jsx(Va,{size:12}),u.jsx("span",{children:"LIVE"})]})]})]},fe)}),U.length>3&&u.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.75rem",color:"var(--color-text-muted)",textAlign:"center"},children:["+",U.length-3," more bet",U.length-3>1?"s":""]}),X.status==="FINAL"&&u.jsxs("div",{style:{marginTop:"1rem",padding:x?"1rem":"1.125rem",background:(()=>{const oe=U.reduce((fe,pe)=>fe+J(pe).pnl,0);return oe>0?"linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.08) 100%)":oe<0?"linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(239, 68, 68, 0.08) 100%)":"linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(251, 191, 36, 0.08) 100%)"})(),borderRadius:"10px",border:(()=>{const oe=U.reduce((fe,pe)=>fe+J(pe).pnl,0);return oe>0?"2px solid rgba(16, 185, 129, 0.4)":oe<0?"2px solid rgba(239, 68, 68, 0.4)":"2px solid rgba(251, 191, 36, 0.4)"})(),display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:(()=>{const oe=U.reduce((fe,pe)=>fe+J(pe).pnl,0);return oe>0?"0 4px 16px rgba(16, 185, 129, 0.25)":oe<0?"0 4px 16px rgba(239, 68, 68, 0.25)":"0 4px 16px rgba(251, 191, 36, 0.25)"})()},children:[u.jsx("div",{style:{fontSize:"0.813rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.1em",color:(()=>{const oe=U.reduce((fe,pe)=>fe+J(pe).pnl,0);return oe>0?"#10B981":oe<0?"#EF4444":"#F59E0B"})()},children:"Total P&L"}),u.jsx("div",{style:{fontSize:x?"1.5rem":"1.75rem",fontWeight:"900",color:(()=>{const oe=U.reduce((fe,pe)=>fe+J(pe).pnl,0);return oe>0?"#10B981":oe<0?"#EF4444":"#F59E0B"})(),textShadow:(()=>{const oe=U.reduce((fe,pe)=>fe+J(pe).pnl,0);return oe>0?"0 0 12px rgba(16, 185, 129, 0.4)":oe<0?"0 0 12px rgba(239, 68, 68, 0.4)":"0 0 12px rgba(251, 191, 36, 0.4)"})(),letterSpacing:"0.02em"},children:(()=>{const oe=U.reduce((fe,pe)=>fe+J(pe).pnl,0);return(oe>0?"+$":oe<0?"-$":"$")+Math.abs(oe).toFixed(0)})()})]})]})]},X.gameId||le)}),u.jsxs("div",{style:{textAlign:"center",padding:"1rem",color:"var(--color-text-muted)",fontSize:"0.875rem",marginTop:"1rem"},children:[u.jsx("p",{children:"⚠️ Betting analysis not available for live games."}),u.jsx("p",{style:{marginTop:"0.5rem"},children:"Check back tomorrow for tomorrow's betting opportunities!"})]})]}):u.jsxs("div",{className:"elevated-card",style:{textAlign:"center",padding:x?"2rem 1rem":"3rem"},children:[u.jsx(Hc,{size:48,color:"var(--color-text-muted)",style:{margin:"0 auto 1rem auto"}}),u.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Games Today"}),u.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Check back later for today's matchups and analysis."})]})}),u.jsx(kF,{isVisible:ne,onAccept:()=>{C(!0),W(!1),q&&(ET(q),D(null))},onDecline:()=>{W(!1),D(null)}})]}):u.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:x?"1rem":"2rem 1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:x?"1rem":"2rem",borderBottom:"1px solid var(--color-border)",marginBottom:x?"1rem":"2rem"},children:[u.jsx(Hc,{size:x?24:32,color:"var(--color-accent)"}),u.jsxs("div",{children:[u.jsx("h1",{style:{marginBottom:"0.25rem"},children:"Today's Games"}),u.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:x?"0.875rem":"0.938rem",margin:0},children:"In-depth analysis of today's matchups with advanced metrics"})]})]}),u.jsxs("div",{className:"elevated-card",style:{textAlign:"center",padding:x?"2rem 1rem":"3rem"},children:[u.jsx(Hc,{size:48,color:"var(--color-text-muted)",style:{margin:"0 auto 1rem auto"}}),u.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Games Available"}),u.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Add today's odds files to see game analysis and betting opportunities."})]})]})},UF=({bets:n})=>{const[e,t]=H.useState(["ALL"]),[i,a]=H.useState(["ALL"]),l=H.useMemo(()=>{if(!n||n.length===0)return[];const w=[...n].sort((q,D)=>{const I=q.timestamp?.toDate?.()||new Date(q.timestamp),C=D.timestamp?.toDate?.()||new Date(D.timestamp);return I-C});let E=0,P=0,N=0,V=0,L=0,ne=0,W=0;return w.map((q,D)=>{const I=q.result?.profit||0,C=q.bet?.market,F=q.prediction?.rating;E+=I,C==="MONEYLINE"&&(P+=I),C==="TOTAL"&&(N+=I),F==="A+"&&(V+=I),F==="A"&&(L+=I),F==="B+"&&(ne+=I),F==="B"&&(W+=I);const k=q.timestamp?.toDate?.()||new Date(q.timestamp);return{index:D+1,date:k.toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:k,all:parseFloat(E.toFixed(2)),moneyline:parseFloat(P.toFixed(2)),total:parseFloat(N.toFixed(2)),aPlus:parseFloat(V.toFixed(2)),a:parseFloat(L.toFixed(2)),bPlus:parseFloat(ne.toFixed(2)),b:parseFloat(W.toFixed(2)),betDetails:{market:C,rating:F,profit:I,pick:q.bet?.pick}}})},[n]),c=H.useMemo(()=>{if(!l.length)return[];if(e.includes("ALL")&&i.includes("ALL"))return l;let w=0;return l.map((E,P)=>{const N=e.includes("ALL")||e.includes(E.betDetails.market),V=i.includes("ALL")||i.includes(E.betDetails.rating);return N&&V&&(w+=E.betDetails.profit),{...E,filtered:parseFloat(w.toFixed(2))}})},[l,e,i]),f=(()=>{if(!e.includes("ALL")){if(e.includes("MONEYLINE")&&e.length===1)return"moneyline";if(e.includes("TOTAL")&&e.length===1)return"total"}if(!i.includes("ALL")){if(i.includes("A+")&&i.length===1)return"aPlus";if(i.includes("A")&&i.length===1)return"a";if(i.includes("B+")&&i.length===1)return"bPlus";if(i.includes("B")&&i.length===1)return"b"}return!e.includes("ALL")||!i.includes("ALL")?"filtered":"all"})(),g=c.length>0?c[c.length-1][f]:0,v=g>0,b=w=>{t(w==="ALL"?["ALL"]:E=>{const P=E.filter(N=>N!=="ALL");if(P.includes(w)){const N=P.filter(V=>V!==w);return N.length===0?["ALL"]:N}else return[...P,w]})},x=w=>{a(w==="ALL"?["ALL"]:E=>{const P=E.filter(N=>N!=="ALL");if(P.includes(w)){const N=P.filter(V=>V!==w);return N.length===0?["ALL"]:N}else return[...P,w]})},_=({active:w,payload:E})=>{if(!w||!E||!E[0])return null;const P=E[0].payload,N=E[0].value;return u.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.95)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"0.75rem",backdropFilter:"blur(8px)"},children:[u.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.5rem"},children:[P.date," • Bet #",P.index]}),u.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"800",color:N>=0?"#10B981":"#EF4444",marginBottom:"0.5rem"},children:[N>=0?"+":"",N.toFixed(2),"u"]}),u.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.5)"},children:P.betDetails.pick})]})};return!n||n.length===0?u.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"3rem",textAlign:"center"},children:[u.jsx(ki,{size:48,color:"rgba(255, 255, 255, 0.2)",style:{margin:"0 auto 1rem"}}),u.jsx("div",{style:{color:"rgba(255, 255, 255, 0.4)",fontSize:"0.938rem"},children:"No bet history yet. Start tracking bets to see your profit timeline."})]}):u.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx(ki,{size:24,color:"#10B981"}),u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"800",margin:0,color:"rgba(255, 255, 255, 0.95)"},children:"Profit Over Time"}),u.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(255, 255, 255, 0.5)",marginTop:"0.25rem"},children:["Cumulative performance • ",n.length," bets tracked"]})]})]}),u.jsxs("div",{style:{padding:"0.5rem 1rem",background:v?"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(239, 68, 68, 0.05) 100%)",border:`1px solid ${v?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"8px"},children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.125rem"},children:"Current"}),u.jsxs("div",{style:{fontSize:"1.375rem",fontWeight:"900",color:v?"#10B981":"#EF4444"},children:[v?"+":"",g.toFixed(2),"u"]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{marginBottom:"0.75rem"},children:[u.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.5)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600",marginBottom:"0.5rem"},children:"Market"}),u.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["ALL","MONEYLINE","TOTAL"].map(w=>{const E=e.includes(w);return u.jsx("button",{onClick:()=>b(w),style:{padding:"0.375rem 0.875rem",fontSize:"0.813rem",fontWeight:"600",borderRadius:"6px",border:E?"1.5px solid #3B82F6":"1px solid rgba(255, 255, 255, 0.1)",background:E?"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.1) 100%)":"rgba(255, 255, 255, 0.03)",color:E?"#3B82F6":"rgba(255, 255, 255, 0.6)",cursor:"pointer",transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"0.03em"},onMouseEnter:P=>{E||(P.target.style.background="rgba(255, 255, 255, 0.06)",P.target.style.borderColor="rgba(255, 255, 255, 0.2)")},onMouseLeave:P=>{E||(P.target.style.background="rgba(255, 255, 255, 0.03)",P.target.style.borderColor="rgba(255, 255, 255, 0.1)")},children:w==="ALL"?"All Markets":w==="MONEYLINE"?"Moneyline":"Total"},w)})})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.5)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600",marginBottom:"0.5rem"},children:"Rating"}),u.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{key:"ALL",label:"All Ratings",color:"#64748B"},{key:"A+",label:"A+",color:"#10B981"},{key:"A",label:"A",color:"#059669"},{key:"B+",label:"B+",color:"#0EA5E9"},{key:"B",label:"B",color:"#8B5CF6"}].map(w=>{const E=i.includes(w.key);return u.jsx("button",{onClick:()=>x(w.key),style:{padding:"0.375rem 0.875rem",fontSize:"0.813rem",fontWeight:"700",borderRadius:"6px",border:E?`1.5px solid ${w.color}`:"1px solid rgba(255, 255, 255, 0.1)",background:E?`linear-gradient(135deg, ${w.color}33 0%, ${w.color}1A 100%)`:"rgba(255, 255, 255, 0.03)",color:E?w.color:"rgba(255, 255, 255, 0.6)",cursor:"pointer",transition:"all 0.2s ease",minWidth:w.key==="ALL"?"auto":"42px",textAlign:"center"},onMouseEnter:P=>{E||(P.target.style.background="rgba(255, 255, 255, 0.06)",P.target.style.borderColor="rgba(255, 255, 255, 0.2)")},onMouseLeave:P=>{E||(P.target.style.background="rgba(255, 255, 255, 0.03)",P.target.style.borderColor="rgba(255, 255, 255, 0.1)")},children:w.label},w.key)})})]})]}),u.jsx("div",{style:{height:"300px",marginTop:"1.5rem"},children:u.jsx(pI,{width:"100%",height:"100%",children:u.jsxs(yI,{data:c,margin:{top:5,right:30,left:20,bottom:5},children:[u.jsx(vI,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.05)",vertical:!1}),u.jsx(xI,{dataKey:"date",stroke:"rgba(255, 255, 255, 0.3)",style:{fontSize:"0.75rem"},tickLine:!1}),u.jsx(bI,{stroke:"rgba(255, 255, 255, 0.3)",style:{fontSize:"0.75rem"},tickLine:!1,tickFormatter:w=>`${w>=0?"+":""}${w}u`}),u.jsx(TI,{content:u.jsx(_,{})}),u.jsx(Pb,{type:"monotone",dataKey:f,stroke:g>=0?"#10B981":"#EF4444",strokeWidth:3,dot:!1,activeDot:{r:6,fill:g>=0?"#10B981":"#EF4444"},animationDuration:500}),u.jsx(Pb,{type:"monotone",dataKey:()=>0,stroke:"rgba(255, 255, 255, 0.2)",strokeWidth:1,strokeDasharray:"5 5",dot:!1})]})})})]})};function xh({icon:n,label:e,value:t,target:i,status:a}){return u.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[u.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(59, 130, 246, 0.15) 100%)"},children:n}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:e}),u.jsx("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)"},children:t})]})]}),i&&u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",paddingTop:"0.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:["Target: ",i,a&&u.jsx("span",{style:{marginLeft:"0.5rem",color:a==="good"?"#10B981":"#F59E0B"},children:a==="good"?"✓":"○"})]})]})}const Rs=500,GF=.25,$F=.05,HF=5,WF=100;function KS(n){let e=Rs,t=Rs,i=0,a=0,l=Rs,c=Rs;return n.forEach(h=>{const f=h.result?.outcome,g=h.result?.profit||0,v=h.bet?.odds,b=h.prediction?.evPercent||0,x=g*10;t+=x,t>c&&(c=t);const _=(c-t)/c*100;if(_>a&&(a=_),e>=WF){const P=b/100/Math.abs(v>=0?v/100:100/v)*GF;let N=Math.min(P*e,$F*e);if(N=Math.max(N,HF),N<=e){let V=0;f==="WIN"?V=v>=0?N*(v/100):N*(100/Math.abs(v)):f==="LOSS"&&(V=-N),e+=V}}e>l&&(l=e);const w=(l-e)/l*100;w>i&&(i=w)}),{flatBankroll:t,kellyBankroll:e,flatROI:(t-Rs)/Rs*100,kellyROI:(e-Rs)/Rs*100,flatMaxDrawdown:a,kellyMaxDrawdown:i}}function qF(){const[n,e]=H.useState(null),[t,i]=H.useState([]),[a,l]=H.useState([]),[c,h]=H.useState(!0),[f,g]=H.useState({}),[v,b]=H.useState({}),[x,_]=H.useState(null);H.useEffect(()=>{w()},[]);async function w(){try{const E=wh(Gc(Mr,"bets"),Eh("status","==","COMPLETED"),Rh("timestamp","desc")),P=$_(E,N=>{const L=N.docs.map(U=>({docId:U.id,...U.data()})).filter(U=>U.prediction?.rating!=="C"&&U.bet?.market!=="TOTAL"&&!U.bet?.market?.includes("TOTAL"));if(L.length===0){e({totalBets:0,wins:0,losses:0,pushes:0,winRate:0,roi:0,profit:0,predictionAccuracy:0,predictionsTracked:0,correctPredictions:0}),h(!1);return}const ne=L.filter(U=>U.result?.outcome==="WIN").length,W=L.filter(U=>U.result?.outcome==="LOSS").length,q=L.filter(U=>U.result?.outcome==="PUSH").length,D=L.reduce((U,J)=>U+(J.result?.profit||0),0),I=L.filter(U=>U.result?.winner&&U.prediction?.awayWinProb!==void 0&&U.prediction?.homeWinProb!==void 0),C=I.filter(U=>(U.prediction.homeWinProb>U.prediction.awayWinProb?"HOME":"AWAY")===U.result.winner).length,F=I.length>0?C/I.length*100:0;e({totalBets:L.length,wins:ne,losses:W,pushes:q,winRate:ne+W>0?ne/(ne+W)*100:0,roi:L.length>0?D/L.length*100:0,profit:D,predictionAccuracy:F,predictionsTracked:I.length,correctPredictions:C});const k={};L.forEach(U=>{const J=U.bet?.market||"UNKNOWN";k[J]||(k[J]={bets:0,wins:0,losses:0,profit:0}),k[J].bets++,U.result?.outcome==="WIN"&&k[J].wins++,U.result?.outcome==="LOSS"&&k[J].losses++,k[J].profit+=U.result?.profit||0}),Object.keys(k).forEach(U=>{const J=k[U];J.roi=J.bets>0?J.profit/J.bets*100:0,J.winRate=J.wins+J.losses>0?J.wins/(J.wins+J.losses)*100:0}),g(k);const z={};L.forEach(U=>{const J=U.prediction?.rating||"UNKNOWN";z[J]||(z[J]={bets:0,wins:0,losses:0,profit:0}),z[J].bets++,U.result?.outcome==="WIN"&&z[J].wins++,U.result?.outcome==="LOSS"&&z[J].losses++,z[J].profit+=U.result?.profit||0}),Object.keys(z).forEach(U=>{const J=z[U];J.roi=J.bets>0?J.profit/J.bets*100:0,J.winRate=J.wins+J.losses>0?J.wins/(J.wins+J.losses)*100:0}),b(z);const O=L.sort((U,J)=>(U.timestamp||0)-(J.timestamp||0)),X=O.filter(U=>U.bet?.market==="MONEYLINE"),le=KS(O),G=KS(X);_({all:{...le,bets:O.length},moneyline:{...G,bets:X.length}}),l(L),i(L.slice(0,20)),h(!1)},N=>{console.error("Error loading performance data:",N),h(!1)});return()=>P()}catch(E){console.error("Error setting up performance subscription:",E),h(!1)}}return c?u.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("div",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading performance data..."})]}):!n||n.totalBets===0?u.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.5rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"📊 No bet data yet"}),u.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Start tracking bets to see performance metrics"})]}):u.jsxs("div",{className:"performance-dashboard",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:"Model Performance"}),u.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Institutional-grade analytics delivering consistent edge"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[u.jsx(xh,{icon:u.jsx(Wa,{size:24,color:"#10B981"}),label:"Betting Win Rate",value:`${n.winRate.toFixed(1)}%`,target:`${n.wins}/${n.wins+n.losses} bets won`,status:n.winRate>=55?"good":"warning"}),u.jsx(xh,{icon:u.jsx(ki,{size:24,color:"#D4AF37"}),label:"ML ROI",value:f.MONEYLINE?`+${f.MONEYLINE.roi.toFixed(1)}%`:"N/A",target:f.MONEYLINE?`${f.MONEYLINE.bets} bets`:"",status:"good"}),u.jsx(xh,{icon:u.jsx(DT,{size:24,color:"#3B82F6"}),label:"Overall ROI",value:`${n.roi>0?"+":""}${n.roi.toFixed(1)}%`,target:"3-8%",status:n.roi>=3&&n.roi<=8?"good":"warning"}),u.jsx(xh,{icon:u.jsx(Va,{size:24,color:"#8B5CF6"}),label:"Bets Tracked",value:n.totalBets})]}),x&&f.MONEYLINE&&u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Moneyline Performance"}),u.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[u.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10B981"},children:"🎯 MONEYLINE PICKS"}),u.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"rgba(16, 185, 129, 0.2)",color:"#10B981",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"700"},children:"ELITE"})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:"#10B981",marginBottom:"0.25rem"},children:["+",f.MONEYLINE.roi.toFixed(1),"%"]}),u.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:["ROI on ",f.MONEYLINE.bets," bets"]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Win Rate"}),u.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10B981"},children:[f.MONEYLINE.winRate.toFixed(1),"%"]})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Profit"}),u.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10B981"},children:["+",f.MONEYLINE.profit.toFixed(2),"u"]})]})]}),x.moneyline&&u.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",marginBottom:"0.5rem"},children:"Hypothetical Bankroll ($500 start)"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem"},children:[u.jsxs("span",{children:["Flat Betting: ",u.jsxs("strong",{style:{color:"#10B981"},children:["$",x.moneyline.flatBankroll.toFixed(0)]})]}),u.jsxs("span",{children:["Kelly: ",u.jsxs("strong",{style:{color:"#10B981"},children:["$",x.moneyline.kellyBankroll.toFixed(0)]})]})]})]})]}),u.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[u.jsx("strong",{children:"📌 Note:"})," Totals betting was disabled Oct 31, 2025. Analysis showed public data insufficient for consistent edge. Focus remains on elite moneyline performance."]})]}),x&&u.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(DT,{size:20}),"Bankroll Simulation: Kelly Criterion vs Flat Betting"]}),u.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginBottom:"1.5rem"},children:"Starting with $500, comparing fixed $10 bets vs quarter-Kelly variable sizing"}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Market"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Flat Final"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Flat ROI"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Kelly Final"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Kelly ROI"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Winner"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[u.jsx("td",{style:{padding:"0.75rem",fontWeight:"600"},children:"All Markets"}),u.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:x.all.bets}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:["$",x.all.flatBankroll.toFixed(2)]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:x.all.flatROI>0?"#10B981":"#EF4444"},children:[x.all.flatROI>0?"+":"",x.all.flatROI.toFixed(2),"%"]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:["$",x.all.kellyBankroll.toFixed(2)]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:x.all.kellyROI>0?"#10B981":"#EF4444"},children:[x.all.kellyROI>0?"+":"",x.all.kellyROI.toFixed(2),"%"]}),u.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:x.all.flatBankroll>x.all.kellyBankroll?"🏆 Flat":"🏆 Kelly"})]}),u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(16, 185, 129, 0.05)"},children:[u.jsx("td",{style:{padding:"0.75rem",fontWeight:"600",color:"#10B981"},children:"Moneyline"}),u.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:x.moneyline.bets}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"700"},children:["$",x.moneyline.flatBankroll.toFixed(2)]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:"#10B981",fontWeight:"700"},children:["+",x.moneyline.flatROI.toFixed(2),"%"]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:["$",x.moneyline.kellyBankroll.toFixed(2)]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:"#10B981"},children:["+",x.moneyline.kellyROI.toFixed(2),"%"]}),u.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:x.moneyline.flatBankroll>x.moneyline.kellyBankroll?"🏆 Flat":"🏆 Kelly"})]})]})]})}),u.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[u.jsx("strong",{children:"Key Insight:"})," Moneyline model delivers consistent profitability with elite 64.7% win rate. Kelly sizing optimizes risk-adjusted returns for long-term bankroll growth."]})]}),u.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[u.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:"Record Breakdown"}),u.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Wins"}),u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10B981"},children:n.wins})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Losses"}),u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#EF4444"},children:n.losses})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Pushes"}),u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#64748B"},children:n.pushes})]})]})]}),u.jsx(UF,{bets:a}),Object.keys(f).length>0&&u.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Cy,{size:20}),"Performance by Market"]}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Market"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Win Rate"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"ROI"}),u.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),u.jsx("tbody",{children:Object.entries(f).map(([E,P])=>u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[u.jsx("td",{style:{padding:"0.75rem",fontWeight:"500"},children:E}),u.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:P.bets}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:[P.winRate.toFixed(1),"%"]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:P.roi>0?"#10B981":"#EF4444"},children:[P.roi>0?"+":"",P.roi.toFixed(1),"%"]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:P.profit>0?"#10B981":"#EF4444"},children:[P.profit>0?"+":"",P.profit.toFixed(2),"u"]})]},E))})]})})]}),Object.keys(v).length>0&&u.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(YA,{size:20}),"Performance by Rating"]}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Rating"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Win Rate"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"ROI"}),u.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),u.jsx("tbody",{children:Object.entries(v).sort((E,P)=>{const N={"A+":0,A:1,"B+":2,B:3,C:4};return(N[E[0]]||99)-(N[P[0]]||99)}).map(([E,P])=>u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[u.jsx("td",{style:{padding:"0.75rem",fontWeight:"600"},children:E}),u.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:P.bets}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:[P.winRate.toFixed(1),"%"]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:P.roi>0?"#10B981":"#EF4444"},children:[P.roi>0?"+":"",P.roi.toFixed(1),"%"]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:P.profit>0?"#10B981":"#EF4444"},children:[P.profit>0?"+":"",P.profit.toFixed(2),"u"]})]},E))})]})})]}),u.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem"},children:[u.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Hc,{size:20}),"Recent Bets"]}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Date"}),u.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Game"}),u.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bet"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Odds"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"EV%"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Rating"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Score"}),u.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Result"}),u.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),u.jsx("tbody",{children:t.map((E,P)=>u.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[u.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:E.date}),u.jsxs("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:[E.game?.awayTeam," @ ",E.game?.homeTeam]}),u.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:E.bet?.pick}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[E.bet?.odds>0?"+":"",E.bet?.odds]}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[E.prediction?.evPercent?.toFixed(1),"%"]}),u.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:u.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",background:E.prediction?.rating==="A+"?"rgba(16, 185, 129, 0.2)":E.prediction?.rating==="A"?"rgba(5, 150, 105, 0.2)":E.prediction?.rating==="B+"?"rgba(14, 165, 233, 0.2)":"rgba(139, 92, 246, 0.2)",color:E.prediction?.rating==="A+"?"#10B981":E.prediction?.rating==="A"?"#059669":E.prediction?.rating==="B+"?"#0EA5E9":"#8B5CF6"},children:E.prediction?.rating})}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[E.result?.awayScore," - ",E.result?.homeScore]}),u.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:u.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",background:E.result?.outcome==="WIN"?"rgba(16, 185, 129, 0.2)":E.result?.outcome==="LOSS"?"rgba(239, 68, 68, 0.2)":"rgba(100, 116, 139, 0.2)",color:E.result?.outcome==="WIN"?"#10B981":E.result?.outcome==="LOSS"?"#EF4444":"#64748B"},children:E.result?.outcome})}),u.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:E.result?.profit>0?"#10B981":E.result?.profit<0?"#EF4444":"#64748B"},children:[E.result?.profit>0?"+":"",E.result?.profit?.toFixed(2),"u"]})]},P))})]})})]})]})}const KF=()=>{const[n,e]=H.useState(!1);return H.useEffect(()=>{const t=()=>{e(window.innerWidth<=640)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),u.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},children:[u.jsx("div",{style:{padding:n?"2rem 1rem 1rem":"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)"},children:u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[u.jsx("h1",{style:{marginBottom:"0.5rem",fontSize:n?"1.5rem":"2rem"},children:"📚 Methodology"}),u.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:n?"0.875rem":"0.938rem",lineHeight:"1.6"},children:"Mathematical foundations and betting strategies behind NHL Savant analytics. All formulas are transparent, verifiable, and backed by real data."})]})}),u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:n?"1rem":"2rem"},children:[u.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:n?"1.5rem":"2rem"},children:[u.jsxs("h2",{style:{marginBottom:n?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:n?"1.125rem":"1.25rem"},children:[u.jsx(Mc,{size:n?18:20}),"Expected Goals (xG) Analysis"]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is xG?"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Expected Goals (xG) is a statistical metric that measures the quality of scoring chances. Each shot is assigned a probability of becoming a goal based on historical data, considering factors like shot location, type, and game situation."})]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Per-60 Normalization"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:"To compare teams fairly, we normalize all metrics to a 60-minute rate:"}),u.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:n?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:n?"0.75rem":"1rem",color:"var(--color-accent)",overflowX:"auto"},children:"xG per 60 = (xGoals / Ice Time in seconds) × 3600"})]}),u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Why xG Matters for Betting"}),u.jsxs("ul",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.8",paddingLeft:n?"1.25rem":"1.5rem"},children:[u.jsx("li",{children:"Reveals true team quality beyond results influenced by luck"}),u.jsx("li",{children:"Identifies teams with strong underlying metrics but poor record (value bets)"}),u.jsx("li",{children:"Predicts future performance more accurately than goals scored"}),u.jsx("li",{children:"Situational xG (5v5, PP, PK) exposes specific strengths and weaknesses"})]})]})]}),u.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:n?"1.5rem":"2rem"},children:[u.jsxs("h2",{style:{marginBottom:n?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:n?"1.125rem":"1.25rem"},children:[u.jsx(HM,{size:n?18:20}),"PDO & Regression Theory"]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"PDO Calculation"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:'PDO measures "puck luck" by combining shooting percentage and save percentage:'}),u.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:n?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:n?"0.75rem":"1rem",color:"var(--color-accent)",overflowX:"auto"},children:"PDO = (Goals For / Shots For) × 100 + (1 - Goals Against / Shots Against) × 100"})]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Regression to the Mean"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Over time, PDO regresses toward 100.0 (league average). Teams with PDO significantly above or below 100 are experiencing unsustainable luck and will likely regress."})]}),u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Betting Applications"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:n?"0.75rem":"1rem"},children:[u.jsxs("div",{style:{padding:n?"0.875rem":"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:"4px"},children:[u.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--color-danger)",fontSize:n?"0.938rem":"1rem"},children:"PDO > 102"}),u.jsx("div",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:"Overperforming due to luck. Bet UNDER or AGAINST."})]}),u.jsxs("div",{style:{padding:n?"0.875rem":"1rem",backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--color-success)",borderRadius:"4px"},children:[u.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--color-success)",fontSize:n?"0.938rem":"1rem"},children:"PDO < 98"}),u.jsx("div",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:"Underperforming due to bad luck. Bet OVER or WITH."})]})]})]})]}),u.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:n?"1.5rem":"2rem"},children:[u.jsxs("h2",{style:{marginBottom:n?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:n?"1.125rem":"1.25rem"},children:[u.jsx(Mc,{size:n?18:20}),"Expected Value (EV) Calculation"]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is EV?"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Expected Value (EV) measures the average amount you can expect to win or lose per bet over the long term. A positive EV indicates a profitable bet over time, while negative EV indicates a losing bet."})]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Formula"}),u.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:n?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:n?"0.75rem":"1rem",color:"var(--color-accent)",marginBottom:"1rem",overflowX:"auto"},children:"EV = (P_model × Total Return) - Stake"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Where P_model is your model's win probability, Total Return is your stake plus winnings, and Stake is your bet amount."})]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Example"}),u.jsxs("div",{className:"methodology-example",style:{backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:n?"0.875rem":"1rem"},children:[u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:[u.jsx("strong",{children:"Scenario:"})," Our model gives Team A a 55% win probability, but the market odds are +150 (implied 40% probability)."]}),u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:[u.jsx("strong",{children:"Calculation:"})," On a $100 bet at +150 odds, total return is $250 ($100 stake + $150 winnings)."]}),u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:["EV = (0.55 × $250) - $100 = $137.50 - $100 = ",u.jsx("strong",{style:{color:"var(--color-success)"},children:"+$37.50"})]}),u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-success)",lineHeight:"1.6"},children:[u.jsx("strong",{children:"Result:"})," This is a +37.5% EV bet — excellent value!"]})]})]}),u.jsx("div",{style:{backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--color-success)",borderRadius:"4px",padding:n?"0.875rem":"1rem"},children:u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:[u.jsx("strong",{style:{color:"var(--color-success)"},children:"Betting Rule:"})," Only bet when EV > 0. The higher the EV percentage, the better the opportunity."]})})]}),u.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:n?"1.5rem":"2rem"},children:[u.jsxs("h2",{style:{marginBottom:n?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:n?"1.125rem":"1.25rem"},children:[u.jsx(Mc,{size:n?18:20}),"Kelly Criterion (Stake Sizing)"]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is Kelly?"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"The Kelly Criterion is a formula for determining the optimal bet size to maximize long-term growth while minimizing risk of ruin. It calculates what percentage of your bankroll to wager on a positive EV bet."})]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Formula"}),u.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:n?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:n?"0.75rem":"1rem",color:"var(--color-accent)",marginBottom:"0.5rem",overflowX:"auto"},children:"f* = (bp - q) / b"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:"Where:"}),u.jsxs("ul",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",paddingLeft:n?"1.25rem":"1.5rem"},children:[u.jsxs("li",{children:[u.jsx("code",{children:"b"})," = decimal odds - 1 (e.g., +150 → 1.5)"]}),u.jsxs("li",{children:[u.jsx("code",{children:"p"})," = your model's win probability"]}),u.jsxs("li",{children:[u.jsx("code",{children:"q"})," = 1 - p (loss probability)"]})]})]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Fractional Kelly (Recommended)"}),u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:["Full Kelly can be aggressive and lead to large swings. We recommend ",u.jsx("strong",{children:"25% Kelly"})," (Quarter Kelly) for more conservative, sustainable bankroll growth."]}),u.jsx("div",{className:"methodology-example",style:{backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:n?"0.875rem":"1rem"},children:u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[u.jsx("strong",{children:"Example:"})," If Kelly suggests 8% of bankroll, we recommend betting 2% (8% × 0.25). On a $1,000 bankroll, that's $20 instead of $80."]})})]}),u.jsx("div",{style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:"4px",padding:n?"0.875rem":"1rem"},children:u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:[u.jsx("strong",{style:{color:"var(--color-danger)"},children:"Risk Management:"})," Never bet more than 5% of your bankroll on a single game, even if Kelly suggests higher. This protects against model errors and variance."]})})]}),u.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:n?"1.5rem":"2rem"},children:[u.jsxs("h2",{style:{marginBottom:n?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:n?"1.125rem":"1.25rem"},children:[u.jsx(Mc,{size:n?18:20}),"Game Total Prediction Model"]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"How We Predict Game Totals"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Our model uses score-adjusted expected goals (xG), applies PDO regression, and weights both teams' offense and defense (55% offense / 45% defense) to predict individual team scores and total goals."})]}),u.jsxs("div",{style:{marginBottom:n?"1rem":"1.5rem"},children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Key Components"}),u.jsxs("ul",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",paddingLeft:n?"1.25rem":"1.5rem"},children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Score-Adjusted xG:"})," Removes bias from teams protecting leads or chasing deficits"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"PDO Regression:"})," Adjusts for unsustainable luck (high/low shooting % or save %)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"5v5 Weight:"})," 77% of game time (46.2 minutes)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"PP/PK Weight:"})," 23% of game time (13.8 minutes)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Home Ice:"})," +5% win probability boost"]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:n?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Win Probability"}),u.jsx("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"We use a logistic regression model that accounts for xG differential, PDO regression, and home-ice advantage to estimate moneyline win probabilities. This S-curve approach reflects real-world probabilities better than linear models."})]})]}),u.jsx("div",{style:{padding:n?"0.875rem":"1rem",backgroundColor:"rgba(212, 175, 55, 0.05)",border:"1px solid var(--color-accent)",borderRadius:"4px"},children:u.jsxs("p",{style:{fontSize:n?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[u.jsx("strong",{style:{color:"var(--color-accent)"},children:"Verify the Math:"})," All calculations are performed in"," ",u.jsx("code",{style:{fontFamily:"Monaco, Consolas, monospace",backgroundColor:"var(--color-card)",padding:"0.125rem 0.25rem",borderRadius:"2px",fontSize:n?"0.75rem":"0.813rem"},children:"src/utils/dataProcessing.js"})," ","and"," ",u.jsx("code",{style:{fontFamily:"Monaco, Consolas, monospace",backgroundColor:"var(--color-card)",padding:"0.125rem 0.25rem",borderRadius:"2px",fontSize:n?"0.75rem":"0.813rem"},children:"src/utils/edgeCalculator.js"}),". ","Every metric displayed uses real CSV data with transparent, verifiable calculations. Audit them in the Data Inspector page."]})})]})]})},YF=()=>u.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-nhl-gold mx-auto mb-4"}),u.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Loading NHL Data"}),u.jsx("p",{className:"text-gray-400",children:"Processing advanced statistics..."})]})});class XF extends QS.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md text-center",children:[u.jsx(ou,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),u.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-400 mb-4",children:"An unexpected error occurred. Please refresh the page."}),!1,u.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-yellow-400 text-gray-900 font-bold rounded hover:bg-yellow-300 transition",children:"Refresh Page"})]})}):this.props.children}}const QF=()=>u.jsx("footer",{style:{backgroundColor:"rgba(0, 0, 0, 0.4)",borderTop:"1px solid var(--color-border)",padding:"2rem 1rem",marginTop:"4rem"},children:u.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[u.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, rgba(251, 191, 36, 0.05) 100%)",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"8px",padding:"1rem 1.25rem",marginBottom:"1.5rem",display:"flex",gap:"1rem",alignItems:"flex-start"},children:[u.jsx(ou,{size:20,color:"#F59E0B",style:{flexShrink:0,marginTop:"2px"}}),u.jsx("div",{style:{flex:1},children:u.jsxs("p",{style:{fontSize:"0.813rem",lineHeight:"1.6",color:"var(--color-text-primary)",margin:0,fontWeight:"600"},children:[u.jsx("strong",{children:"Entertainment & Educational Use Only:"})," All content is for informational purposes and does not constitute betting, financial, or investment advice. Sports betting involves financial risk. Only bet what you can afford to lose. You are solely responsible for your betting decisions."]})})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"NHL Savant"}),u.jsx("p",{style:{fontSize:"0.813rem",lineHeight:"1.6",color:"var(--color-text-muted)",margin:0},children:"Advanced NHL analytics and statistical modeling for sports enthusiasts. Not a gambling operator or sportsbook."})]}),u.jsxs("div",{children:[u.jsxs("h3",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Ph,{size:16}),"Legal"]}),u.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[u.jsx("li",{style:{marginBottom:"0.5rem"},children:u.jsx(Nc,{to:"/disclaimer",style:{fontSize:"0.813rem",color:"#3B82F6",textDecoration:"none",transition:"color 0.2s"},onMouseEnter:n=>n.target.style.color="#60A5FA",onMouseLeave:n=>n.target.style.color="#3B82F6",children:"Terms & Disclaimer"})}),u.jsx("li",{style:{marginBottom:"0.5rem"},children:u.jsx("a",{href:"https://www.ncpgambling.org",target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.813rem",color:"#3B82F6",textDecoration:"none",transition:"color 0.2s"},onMouseEnter:n=>n.target.style.color="#60A5FA",onMouseLeave:n=>n.target.style.color="#3B82F6",children:"Responsible Gambling"})})]})]}),u.jsxs("div",{children:[u.jsxs("h3",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(rO,{size:16}),"Need Help?"]}),u.jsxs("p",{style:{fontSize:"0.813rem",lineHeight:"1.6",color:"var(--color-text-muted)",margin:"0 0 0.5rem 0"},children:[u.jsx("strong",{children:"Gambling Problem?"}),u.jsx("br",{}),"Call 1-800-GAMBLER"]}),u.jsx("p",{style:{fontSize:"0.813rem",lineHeight:"1.6",color:"var(--color-text-muted)",margin:0},children:"Available 24/7 for confidential support"})]})]}),u.jsx("div",{style:{paddingTop:"1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center",textAlign:"center"},children:u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",maxWidth:"800px",lineHeight:"1.6"},children:[u.jsxs("p",{style:{margin:"0 0 0.5rem 0"},children:[u.jsx("strong",{children:"18+/21+ Only."})," Verify sports betting is legal in your jurisdiction before placing wagers."]}),u.jsxs("p",{style:{margin:0},children:["© ",new Date().getFullYear()," NHL Savant. All rights reserved. We are not affiliated with the NHL or any sportsbook operator."]})]})})]})}),ZF=()=>u.jsx("div",{style:{minHeight:"100vh",backgroundColor:"var(--color-background)",padding:"2rem 1rem"},children:u.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",backgroundColor:"var(--color-bg-secondary)",borderRadius:"12px",border:"1px solid var(--color-border)",padding:"2rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem",paddingBottom:"1.5rem",borderBottom:"2px solid var(--color-border)"},children:[u.jsx(Ph,{size:36,color:"#F59E0B"}),u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"2rem",fontWeight:"900",color:"var(--color-text-primary)",margin:0,marginBottom:"0.5rem"},children:"Legal Disclaimer & Terms of Use"}),u.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",margin:0},children:"Last Updated: October 24, 2025"})]})]}),u.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 100%)",border:"2px solid rgba(251, 191, 36, 0.4)",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem",display:"flex",gap:"1rem"},children:[u.jsx(ou,{size:24,color:"#F59E0B",style:{flexShrink:0,marginTop:"2px"}}),u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"800",color:"#F59E0B",margin:"0 0 0.75rem 0",textTransform:"uppercase",letterSpacing:"0.05em"},children:"⚠️ IMPORTANT: READ BEFORE USE"}),u.jsxs("p",{style:{fontSize:"0.938rem",lineHeight:"1.6",color:"var(--color-text-primary)",margin:0},children:[u.jsx("strong",{children:"All sports betting involves financial risk. Only bet what you can afford to lose."})," The content on this site is for entertainment and educational purposes only and does not constitute betting, financial, or investment advice. You are solely responsible for your betting decisions."]})]})]}),u.jsx(Pr,{icon:up,title:"1. Nature of Service",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("strong",{children:"NHL Savant is an information and analytics service, NOT a gambling operator."})}),u.jsx("p",{children:"We provide:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Statistical analysis"})," of NHL games using publicly available data"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Predictive models"})," based on historical performance metrics"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Educational content"})," about sports analytics and probability"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Data visualization"})," tools for understanding team performance"]})]}),u.jsx("p",{children:"We do NOT:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Accept bets, wagers, or any form of payment for gambling"}),u.jsx("li",{children:"Operate as a sportsbook or gambling platform"}),u.jsx("li",{children:"Guarantee wins, profits, or specific outcomes"}),u.jsx("li",{children:"Provide personalized betting advice tailored to your situation"})]})]})}),u.jsx(Pr,{icon:li,title:"2. Entertainment & Educational Purpose",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("strong",{children:"ALL CONTENT IS FOR ENTERTAINMENT AND EDUCATIONAL PURPOSES ONLY."})}),u.jsx("p",{children:'Our predictions, analyses, and "recommended picks" are:'}),u.jsxs("ul",{children:[u.jsx("li",{children:"Algorithmic outputs based on statistical models"}),u.jsx("li",{children:"Historical performance indicators, not future guarantees"}),u.jsx("li",{children:"Educational demonstrations of sports analytics methodology"}),u.jsx("li",{children:"NOT betting advice, financial advice, or professional recommendations"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"You should NOT rely on our content as the sole basis for any betting decision."})," Always conduct your own research and analysis."]})]})}),u.jsx(Pr,{icon:ou,title:"3. No Guarantees or Warranties",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("strong",{children:"WE MAKE NO REPRESENTATIONS OR WARRANTIES OF ANY KIND."})}),u.jsx("p",{children:"Specifically:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Past performance does not guarantee future results."})," Historical accuracy does not predict future predictions."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"No betting system is foolproof."})," All sports outcomes involve uncertainty and randomness."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"We do not guarantee accuracy."})," Our models are imperfect and subject to error."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"We do not guarantee profitability."})," Following our picks may result in financial losses."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Data may be incomplete or incorrect."})," We rely on third-party data sources that may contain errors."]})]}),u.jsx("p",{children:"Any implied or expressed warranties, including fitness for a particular purpose, are expressly disclaimed."})]})}),u.jsx(Pr,{icon:Ph,title:"4. Limitation of Liability",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("strong",{children:"YOU USE THIS SERVICE ENTIRELY AT YOUR OWN RISK."})}),u.jsx("p",{children:u.jsx("strong",{children:"NHL Savant, its operators, developers, and affiliates accept NO LIABILITY OR RESPONSIBILITY for:"})}),u.jsxs("ul",{children:[u.jsx("li",{children:"Any financial losses incurred from betting decisions"}),u.jsx("li",{children:"Inaccurate predictions or incorrect data"}),u.jsx("li",{children:"Lost profits or missed opportunities"}),u.jsx("li",{children:"Technical errors, downtime, or service interruptions"}),u.jsx("li",{children:"Damages resulting from reliance on our content"}),u.jsx("li",{children:"Any indirect, incidental, consequential, or punitive damages"})]}),u.jsx("p",{children:u.jsx("strong",{children:"You are solely and exclusively responsible for:"})}),u.jsxs("ul",{children:[u.jsx("li",{children:"All betting decisions and their consequences"}),u.jsx("li",{children:"Verifying the accuracy of information before use"}),u.jsx("li",{children:"Determining your own risk tolerance"}),u.jsx("li",{children:"Managing your bankroll and finances"})]})]})}),u.jsx(Pr,{icon:up,title:"5. User Responsibilities",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("strong",{children:"By using NHL Savant, you agree to:"})}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Age Requirement:"})," Be at least 21 years of age (or 18+ if legal in your jurisdiction)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Legal Compliance:"})," Verify that sports betting is legal in your jurisdiction before placing any wagers"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Responsible Gambling:"})," Only bet what you can afford to lose without impacting your financial well-being"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Independent Judgment:"})," Make your own betting decisions based on your own research and analysis"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Risk Acceptance:"})," Accept full responsibility for all outcomes of your betting activity"]})]}),u.jsx("p",{children:u.jsx("strong",{children:"If you have a gambling problem:"})}),u.jsxs("ul",{children:[u.jsx("li",{children:"Call 1-800-GAMBLER (1-800-426-2537)"}),u.jsxs("li",{children:["Visit ",u.jsx("a",{href:"https://www.ncpgambling.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"ncpgambling.org"})]}),u.jsx("li",{children:"Seek professional help immediately"})]})]})}),u.jsx(Pr,{icon:li,title:"6. Terminology & Interpretation",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("strong",{children:'When we use terms like "recommended bet," "best bet," or "value pick," we mean:'})}),u.jsxs("ul",{children:[u.jsx("li",{children:"Our statistical model identifies a probability discrepancy"}),u.jsx("li",{children:"This is an analytical observation, NOT a directive to bet"}),u.jsx("li",{children:"These are educational examples of statistical analysis in action"}),u.jsx("li",{children:'You should interpret these as "model projections" or "data-driven analysis"'})]}),u.jsx("p",{children:"These terms do NOT constitute advice, recommendations, or guarantees of any kind."})]})}),u.jsx(Pr,{icon:up,title:"7. State & Jurisdiction Laws",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("strong",{children:"Sports betting laws vary by state and country."})}),u.jsx("p",{children:u.jsx("strong",{children:"Your Responsibilities:"})}),u.jsxs("ul",{children:[u.jsx("li",{children:"Verify sports betting is legal in your jurisdiction"}),u.jsx("li",{children:"Comply with all local, state, and federal gambling laws"}),u.jsx("li",{children:"Use only licensed and regulated sportsbooks in your area"}),u.jsx("li",{children:"Report any gambling winnings for tax purposes as required"})]}),u.jsx("p",{children:u.jsx("strong",{children:"NHL Savant does NOT:"})}),u.jsxs("ul",{children:[u.jsx("li",{children:"Provide legal advice about gambling laws"}),u.jsx("li",{children:"Verify your eligibility to place bets"}),u.jsx("li",{children:"Assume responsibility for your legal compliance"})]})]})}),u.jsx(Pr,{icon:li,title:"8. Changes to Terms",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:"We reserve the right to modify these terms at any time. Changes become effective immediately upon posting. Your continued use of NHL Savant constitutes acceptance of the updated terms."}),u.jsx("p",{children:"Check this page regularly for updates."})]})}),u.jsx(Pr,{icon:Ph,title:"9. Indemnification",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("strong",{children:"You agree to indemnify and hold harmless NHL Savant, its operators, developers, and affiliates from:"})}),u.jsxs("ul",{children:[u.jsx("li",{children:"Any claims arising from your use of this service"}),u.jsx("li",{children:"Your betting decisions and their consequences"}),u.jsx("li",{children:"Your violation of these terms"}),u.jsx("li",{children:"Your violation of applicable laws"})]})]})}),u.jsx("div",{style:{marginTop:"3rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:"10px",textAlign:"center"},children:u.jsx("p",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"By using NHL Savant, you acknowledge that you have read, understood, and agree to these terms."})}),u.jsx("div",{style:{marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid var(--color-border)",textAlign:"center",fontSize:"0.813rem",color:"var(--color-text-muted)"},children:u.jsxs("p",{children:["Questions? Contact us at: ",u.jsx("strong",{children:"legal@nhlsavant.com"})]})})]})}),Pr=({icon:n,title:e,content:t})=>u.jsxs("div",{style:{marginBottom:"2rem",paddingBottom:"2rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[u.jsx(n,{size:24,color:"#10B981"}),u.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"800",color:"var(--color-text-primary)",margin:0},children:e})]}),u.jsxs("div",{style:{fontSize:"0.938rem",lineHeight:"1.7",color:"var(--color-text-primary)"},children:[t,u.jsx("style",{children:`
        p { margin: 0 0 1rem 0; }
        p:last-child { margin-bottom: 0; }
        ul { margin: 0.5rem 0 1rem 0; padding-left: 1.5rem; }
        li { margin-bottom: 0.5rem; }
        strong { color: var(--color-text-primary); font-weight: 700; }
        a { color: #3B82F6; text-decoration: none; }
        a:hover { text-decoration: underline; }
      `})]})]});async function JF(n,e){const t=`${n}-${e}-${new Date().toISOString().split("T")[0]}`,i=Qp(Mr,"perplexityCache",t);console.log("🔍 Looking for Expert Analysis:",{awayTeam:n,homeTeam:e,cacheKey:t});try{const a=await Ck(i);if(a.exists()){console.log("✅ Found cached document:",a.data());const l=a.data().content;console.log("📄 Content type:",typeof l),console.log("📄 Content preview:",l.substring(0,100));const c=JSON.parse(l);return console.log("✅ Parsed",c.length,"insight cards"),c}else console.log("❌ No cached document found at:",t)}catch(a){console.error("❌ Error loading Expert Analysis:",a)}return[]}function eL({awayTeam:n,homeTeam:e}){const[t,i]=H.useState([]),[a,l]=H.useState(!0),[c,h]=H.useState(0),[f,g]=H.useState(0),[v,b]=H.useState(0),[x,_]=H.useState(!1);H.useEffect(()=>{n&&e&&w()},[n?.name,e?.name]);const w=async()=>{l(!0);try{const W=await JF(n.name,e.name);i(W),h(0)}catch(W){console.error("Error loading insights:",W),i([])}finally{l(!1)}},E=W=>{g(W.targetTouches[0].clientX)},P=W=>{b(W.targetTouches[0].clientX)},N=()=>{if(!f||!v)return;const W=f-v,q=W>50,D=W<-50;q&&c<t.length-1&&h(c+1),D&&c>0&&h(c-1),g(0),b(0)},V=()=>{c<t.length-1&&h(c+1)},L=()=>{c>0&&h(c-1)},ne=W=>{const q=`${W.hook}

${W.headline}

${W.analysis}

💡 ${W.bettingAngle}

Analysis by NHL Savant`;navigator.clipboard.writeText(q).then(()=>{_(!0),setTimeout(()=>_(!1),2e3)})};return a?u.jsx("div",{className:"elevated-card",style:{marginBottom:"2rem",padding:"2rem",textAlign:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.15)",borderRadius:"10px"},children:u.jsx("div",{style:{color:"#64748B",fontSize:"1rem"},children:"Loading expert analysis..."})}):!t||t.length===0?u.jsxs("div",{className:"elevated-card",style:{marginBottom:"2rem",padding:"2rem",textAlign:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.15)",borderRadius:"10px"},children:[u.jsx("div",{style:{color:"#F1F5F9",fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:"Waiting for Expert Articles"}),u.jsx("div",{style:{color:"#94A3B8",fontSize:"0.9375rem",maxWidth:"500px",margin:"0 auto",lineHeight:1.6},children:"Expert analysis articles are generated daily before games. Check back closer to game time for professional insights."})]}):u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[u.jsx("h2",{style:{fontSize:"2rem",fontWeight:"900",background:"linear-gradient(135deg, #10B981 0%, #3B82F6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:"Expert Analysis"}),u.jsx("p",{style:{fontSize:"0.9375rem",color:"#94A3B8",maxWidth:"600px",margin:"0 auto"},children:"Bold takes and hidden edges from our analytics team"})]}),u.jsxs("div",{style:{position:"relative"},children:[t.length>1&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:L,disabled:c===0,style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:c===0?"rgba(71, 85, 105, 0.5)":"rgba(16, 185, 129, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:c===0?"not-allowed":"pointer",opacity:c===0?.3:1,transition:"all 0.2s ease",boxShadow:c===0?"none":"0 4px 12px rgba(16, 185, 129, 0.3)"},className:"desktop-only-arrow",children:u.jsx(XA,{size:24,color:"#FFFFFF",strokeWidth:2.5})}),u.jsx("button",{onClick:V,disabled:c===t.length-1,style:{position:"absolute",right:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:c===t.length-1?"rgba(71, 85, 105, 0.5)":"rgba(16, 185, 129, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:c===t.length-1?"not-allowed":"pointer",opacity:c===t.length-1?.3:1,transition:"all 0.2s ease",boxShadow:c===t.length-1?"none":"0 4px 12px rgba(16, 185, 129, 0.3)"},className:"desktop-only-arrow",children:u.jsx(QA,{size:24,color:"#FFFFFF",strokeWidth:2.5})})]}),u.jsx("div",{onTouchStart:E,onTouchMove:P,onTouchEnd:N,style:{display:"flex",transition:"transform 0.3s ease",transform:`translateX(-${c*100}%)`,touchAction:"pan-y"},children:t.map((W,q)=>u.jsx("div",{style:{minWidth:"100%",padding:"0 0.5rem"},children:u.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid",borderImage:"linear-gradient(135deg, rgba(16, 185, 129, 0.4), rgba(59, 130, 246, 0.4)) 1",borderRadius:"16px",padding:"2rem",minHeight:"400px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #10B981, #3B82F6, #8B5CF6)",opacity:.8}}),u.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(245, 158, 11, 0.2))",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"20px",padding:"0.5rem 1rem",marginBottom:"1.5rem"},children:[u.jsx(uf,{size:16,color:"#EF4444"}),u.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"800",color:"#EF4444",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Hot Take"})]}),W.hook&&u.jsxs("div",{style:{fontSize:"1.375rem",fontWeight:"900",color:"#F1F5F9",lineHeight:1.3,marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"2px solid rgba(16, 185, 129, 0.2)"},children:['"',W.hook,'"']}),W.headline&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[u.jsx(ki,{size:20,color:"#10B981"}),u.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#10B981",margin:0,textTransform:"uppercase",letterSpacing:"0.02em"},children:W.headline})]}),W.analysis&&u.jsx("div",{style:{fontSize:"1rem",lineHeight:1.8,color:"#E2E8F0",marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid rgba(148, 163, 184, 0.1)"},children:W.analysis}),W.bettingAngle&&u.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[u.jsx(eO,{size:18,color:"#10B981"}),u.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"800",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.05em"},children:"The Edge"})]}),u.jsx("div",{style:{fontSize:"0.9375rem",lineHeight:1.6,color:"#F1F5F9",fontWeight:"500"},children:W.bettingAngle})]}),u.jsxs("button",{onClick:()=>ne(W),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:x?"rgba(16, 185, 129, 0.2)":"rgba(59, 130, 246, 0.15)",border:x?"1px solid rgba(16, 185, 129, 0.5)":"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"0.75rem 1.25rem",color:x?"#10B981":"#3B82F6",fontSize:"0.875rem",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",width:"100%",justifyContent:"center"},children:[u.jsx(cO,{size:16}),x?"Copied to Clipboard!":"Share This Analysis"]})]})},q))})]}),t.length>1&&u.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1.5rem"},children:t.map((W,q)=>u.jsx("button",{onClick:()=>h(q),style:{width:c===q?"32px":"8px",height:"8px",borderRadius:"4px",background:c===q?"linear-gradient(135deg, #10B981 0%, #3B82F6 100%)":"rgba(148, 163, 184, 0.3)",border:"none",cursor:"pointer",transition:"all 0.3s ease",padding:0},"aria-label":`Go to insight ${q+1}`},q))}),u.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-only-arrow {
            display: none !important;
          }
        }
      `})]})}function tL({games:n,selectedGame:e,onGameSelect:t,predictions:i}){const[a,l]=H.useState(0),c=H.useRef(null),[h,f]=H.useState(!1),[g,v]=H.useState(!0);H.useEffect(()=>{if(e){const E=n.findIndex(P=>P.awayTeam===e.awayTeam&&P.homeTeam===e.homeTeam);E!==-1&&E!==a&&(l(E),b(E))}},[e,n]);const b=E=>{const P=c.current;if(!P)return;const N=P.children[0]?.offsetWidth||0;P.scrollTo({left:E*(N+16),behavior:"smooth"})},x=()=>{const E=c.current;if(!E)return;const P=E.scrollLeft,N=E.scrollWidth-E.clientWidth;f(P>10),v(P<N-10);const V=E.children[0]?.offsetWidth||0,ne=Math.round(P/(V+16));ne!==a&&ne>=0&&ne<n.length&&(l(ne),t(n[ne]))},_=()=>{if(a<n.length-1){const E=a+1;l(E),b(E),t(n[E])}},w=()=>{if(a>0){const E=a-1;l(E),b(E),t(n[E])}};return H.useEffect(()=>{const E=c.current;if(E)return E.addEventListener("scroll",x),x(),()=>E.removeEventListener("scroll",x)},[a]),!n||n.length===0?null:u.jsxs("div",{style:{marginBottom:"2rem",position:"relative"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#F1F5F9",margin:0},children:"Select Game"}),u.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#64748B"},children:[n.length," game",n.length!==1?"s":""," today"]})]}),u.jsxs("div",{style:{position:"relative"},children:[h&&n.length>1&&u.jsx("button",{onClick:w,className:"desktop-arrow",style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:"rgba(16, 185, 129, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:u.jsx(XA,{size:24,color:"#FFFFFF",strokeWidth:2.5})}),g&&n.length>1&&u.jsx("button",{onClick:_,className:"desktop-arrow",style:{position:"absolute",right:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:"rgba(16, 185, 129, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:u.jsx(QA,{size:24,color:"#FFFFFF",strokeWidth:2.5})}),u.jsx("div",{ref:c,className:"hide-scrollbar",style:{display:"flex",gap:"1rem",overflowX:"auto",scrollSnapType:"x mandatory",WebkitOverflowScrolling:"touch",padding:"0.5rem 0"},children:n.map((E,P)=>{const N=i?.[P],V=P===a,L=N?.awayWinProb||50,ne=N?.homeWinProb||50,W=L>ne?E.awayTeam:E.homeTeam,q=Math.max(L,ne);return u.jsxs("div",{onClick:()=>{l(P),b(P),t(E)},style:{minWidth:"calc(100% - 1rem)",maxWidth:"calc(100% - 1rem)",scrollSnapAlign:"start",background:V?"linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.15) 100%)":"linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.8) 100%)",border:V?"2px solid rgba(16, 185, 129, 0.5)":"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"16px",padding:"1.25rem",cursor:"pointer",transition:"all 0.3s ease",boxShadow:V?"0 8px 24px rgba(16, 185, 129, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[u.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"900",color:V?"#10B981":"#F1F5F9"},children:[E.awayTeam," @ ",E.homeTeam]}),E.gameTime&&E.gameTime!=="TBD"&&u.jsxs("div",{style:{background:V?"rgba(16, 185, 129, 0.2)":"rgba(100, 116, 139, 0.2)",border:`1px solid ${V?"rgba(16, 185, 129, 0.3)":"rgba(100, 116, 139, 0.3)"}`,borderRadius:"8px",padding:"0.375rem 0.75rem",fontSize:"0.8125rem",fontWeight:"700",color:V?"#10B981":"#94A3B8",whiteSpace:"nowrap"},children:[u.jsx(ky,{size:12,style:{display:"inline",marginRight:"0.25rem",verticalAlign:"middle"}}),E.gameTime]})]}),N&&u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:V?"rgba(16, 185, 129, 0.1)":"rgba(30, 41, 59, 0.6)",borderRadius:"10px",padding:"0.875rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(ew,{size:18,color:V?"#10B981":"#64748B"}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:"600",color:"#94A3B8",textTransform:"uppercase",marginBottom:"0.125rem"},children:"Projected Winner"}),u.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"900",color:V?"#10B981":"#F1F5F9"},children:W})]})]}),u.jsxs("div",{style:{textAlign:"right"},children:[u.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:"600",color:"#94A3B8",textTransform:"uppercase",marginBottom:"0.125rem"},children:"Win Prob"}),u.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"900",color:V?"#10B981":"#F1F5F9"},children:[q.toFixed(0),"%"]})]}),u.jsxs("div",{style:{textAlign:"right"},children:[u.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:"600",color:"#94A3B8",textTransform:"uppercase",marginBottom:"0.125rem"},children:"Score"}),u.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"900",color:V?"#10B981":"#F1F5F9"},children:[N.awayScore.toFixed(1),"-",N.homeScore.toFixed(1)]})]})]}),V&&u.jsx("div",{style:{marginTop:"0.75rem",textAlign:"center",fontSize:"0.75rem",fontWeight:"700",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.05em"},children:"✓ Viewing This Game"})]},`${E.awayTeam}-${E.homeTeam}`)})})]}),n.length>1&&u.jsx("div",{className:"mobile-dots",style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1rem"},children:n.map((E,P)=>u.jsx("button",{onClick:()=>{l(P),b(P),t(n[P])},style:{width:a===P?"32px":"8px",height:"8px",borderRadius:"4px",background:a===P?"rgba(16, 185, 129, 0.8)":"rgba(148, 163, 184, 0.3)",border:"none",cursor:"pointer",transition:"all 0.3s ease",padding:0},"aria-label":`Go to game ${P+1}`},P))}),u.jsx("style",{children:`
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .hide-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        
        @media (max-width: 768px) {
          .desktop-arrow {
            display: none !important;
          }
        }
        
        @media (min-width: 769px) {
          .mobile-dots {
            display: none !important;
          }
        }
      `})]})}function nL(n){const[e,t]=H.useState(null),[i,a]=H.useState([]),[l,c]=H.useState(!0);H.useEffect(()=>{if(!n||!n.dataProcessor||!n.todaysGames){c(!1);return}try{const f=n.todaysGames.map(g=>{let v="TBD";if(g.time&&typeof g.time=="string")v=g.time;else if(g.gameTime&&typeof g.gameTime=="string")v=g.gameTime;else if(g.startTimeUTC)try{v=new Date(g.startTimeUTC).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZone:"America/New_York"})+" ET"}catch{console.warn("Failed to parse startTimeUTC:",g.startTimeUTC)}return{awayTeam:g.away||g.awayTeam,homeTeam:g.home||g.homeTeam||g.homeCode,gameTime:v,date:new Date().toISOString().split("T")[0],...g}});a(f),f.length>0&&!e&&t(f[0]),c(!1)}catch(f){console.error("Error loading games:",f),c(!1)}},[n?.dataProcessor,n?.todaysGames,e,n]);const h=H.useMemo(()=>!i.length||!n?.dataProcessor?[]:i.map(f=>{try{const g=n.dataProcessor,v=f.awayGoalie||`${f.awayTeam} Goalie`,b=f.homeGoalie||`${f.homeTeam} Goalie`,x=g.predictTeamScore(f.awayTeam,f.homeTeam,!1,v),_=g.predictTeamScore(f.homeTeam,f.awayTeam,!0,b),w=g.calculatePoissonWinProb(_,x)*100,E=100-w;return{awayScore:x,homeScore:_,awayWinProb:E,homeWinProb:w}}catch(g){return console.error("Error calculating prediction for game:",f,g),null}}).filter(Boolean),[i,n?.dataProcessor]);return l?u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",color:"#94A3B8",fontSize:"1.125rem"},children:"Loading matchup insights..."}):i.length===0?u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",color:"#94A3B8",fontSize:"1.125rem",textAlign:"center",padding:"2rem"},children:"No games scheduled today"}):u.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto"},children:[u.jsx("h1",{style:{fontSize:"2rem",fontWeight:"800",background:"linear-gradient(135deg, #F1F5F9 0%, #94A3B8 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"1rem"},children:"Matchup Insights"}),u.jsx("p",{style:{fontSize:"0.9375rem",color:"#94A3B8",marginBottom:"1.5rem",lineHeight:1.6},children:"Expert AI-generated analysis and insights for today's matchups. Bold takes and hidden edges from our analytics."}),u.jsx(tL,{games:i,selectedGame:e,onGameSelect:t,predictions:h}),e&&u.jsx(eL,{awayTeam:{name:e.awayTeam},homeTeam:{name:e.homeTeam}}),u.jsx("style",{children:`
        @media (max-width: 768px) {
          .matchup-insights-container {
            padding: 1rem 0.75rem !important;
          }
          h1 {
            font-size: 1.5rem !important;
          }
          h2 {
            font-size: 1.25rem !important;
          }
          h4 {
            font-size: 0.9375rem !important;
          }
          p {
            font-size: 0.8125rem !important;
          }
        }
      `})]})}function YS({onComplete:n}){const[e,t]=H.useState(!1);return H.useEffect(()=>{const i=setTimeout(()=>t(!0),3e3),a=setTimeout(()=>n(),3500),l=()=>{t(!0),setTimeout(n,500)};return window.addEventListener("keydown",l),window.addEventListener("click",l),window.addEventListener("touchstart",l),()=>{clearTimeout(i),clearTimeout(a),window.removeEventListener("keydown",l),window.removeEventListener("click",l),window.removeEventListener("touchstart",l)}},[n]),u.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9999,background:"linear-gradient(135deg, #1a1f2e 0%, #0f1419 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:e?0:1,transition:"opacity 0.5s ease-out"},children:[u.jsx("div",{style:{fontSize:"3rem",fontWeight:"700",background:"linear-gradient(135deg, #3B82F6 0%, #D4AF37 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"2rem",animation:"fadeInUp 1s ease-out"},children:"🏒 NHL SAVANT"}),u.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"3rem",animation:"fadeInUp 1s ease-out 0.3s backwards"},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.5rem",color:"#60A5FA",fontWeight:"700"},children:"4"}),u.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:"GAMES"})]}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.5rem",color:"#3B82F6",fontWeight:"700"},children:"4"}),u.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:"+EV"})]}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.5rem",color:"#D4AF37",fontWeight:"700"},children:"3"}),u.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:"ELITE"})]})]}),u.jsx("div",{style:{width:"200px",height:"2px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"1px",overflow:"hidden",animation:"fadeInUp 1s ease-out 0.6s backwards"},children:u.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #3B82F6 0%, #D4AF37 100%)",animation:"loadingBar 3s ease-out forwards"}})}),u.jsx("div",{style:{position:"absolute",bottom:"2rem",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",fontFamily:"Inter, sans-serif"},children:"Press any key or tap to skip"}),u.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes loadingBar {
          from {
            transform: translateX(-100%);
          }
          to {
            transform: translateX(0);
          }
        }
      `})]})}const Cp="nhl_savant_splash_seen";function iL(){const[n,e]=H.useState(!1),[t,i]=H.useState(!0);return H.useEffect(()=>{const c=localStorage.getItem(Cp),h=document.createElement("canvas"),g=!!(h.getContext("webgl")||h.getContext("experimental-webgl"));i(g),c||e(!0)},[]),{showSplash:n,hasWebGL:t,dismissSplash:()=>{e(!1),localStorage.setItem(Cp,"true"),localStorage.setItem("nhl_savant_splash_date",new Date().toISOString())},forceShowSplash:()=>{localStorage.removeItem(Cp),e(!0)}}}const rL=H.lazy(()=>DI(()=>import("./SplashScreen-BB_1FX2D.js"),__vite__mapDeps([0,1,2,3])));function sL(){const{showSplash:n,hasWebGL:e,dismissSplash:t}=iL(),[i,a]=H.useState(null),[l,c]=H.useState(null),[h,f]=H.useState(null),[g,v]=H.useState(null),[b,x]=H.useState(null),[_,w]=H.useState(null),[E,P]=H.useState(null),[N,V]=H.useState(!0),[L,ne]=H.useState(null);return H.useEffect(()=>{(async()=>{if(!n)try{V(!0),console.log("📅 Loading schedule data for B2B adjustments...");let q=null;try{const O="/nhl-savant/nhl-202526-asplayed.csv";console.log(`📂 Fetching schedule from: ${O}`);const X=await fetch(O);if(!X.ok)throw new Error(`Failed to fetch schedule: ${X.status} ${X.statusText}`);const le=await X.text();q=await new Promise((G,U)=>{E0.parse(le,{header:!0,skipEmptyLines:!0,complete:J=>{if(J.data&&J.data.length>0){const oe=new SM(J.data);console.log(`✅ Loaded ${Object.keys(oe.gamesByTeam).length} teams into schedule helper`),P(oe),G(oe)}else U(new Error("No schedule data parsed"))},error:J=>{U(J)}})})}catch(O){console.warn("⚠️ Could not load schedule data:",O.message),console.warn("   B2B adjustments will be disabled")}console.log("🏒 Loading team data...");const D=await yM(q);a(D),console.log("🥅 Loading goalie stats from CSV...");const I=await xM();f(I),console.log("📊 Initializing advanced stats analyzer...");const C=new AM(D);x(C),console.log("🎯 Initializing edge factor calculator...");const F=new wM(C);w(F),ne(null),console.log("💰 Loading odds data...");const k=await bM();if(k&&k.moneyText&&k.totalText){const O=qA(k.moneyText,k.totalText);k.todaysGames=_M(O),console.log(`📋 Extracted ${k.todaysGames.length} games for admin`)}console.log("🥅 Loading starting goalie selections...");const z=await vM();v(z),c(k),console.log("✅ All data loaded successfully")}catch(q){console.error("Failed to load NHL data:",q),ne("Failed to load NHL data. Please check if teams.csv is available.")}finally{V(!1)}})()},[n]),n?e?u.jsx(H.Suspense,{fallback:u.jsx(YS,{onComplete:t}),children:u.jsx(rL,{onComplete:t})}):u.jsx(YS,{onComplete:t}):N?u.jsx(YF,{}):L?u.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Error Loading Data"}),u.jsx("p",{className:"text-gray-300 mb-6",children:L}),u.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-yellow-400 text-gray-900 font-bold rounded hover:bg-yellow-300 transition",children:"Retry"})]})}):i?u.jsx(XF,{children:u.jsx(fI,{children:u.jsx(aL,{dataProcessor:i,oddsData:l,startingGoalies:g,goalieData:h,statsAnalyzer:b,edgeFactorCalc:_,loading:N,error:L})})}):u.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:u.jsx("div",{className:"text-center",children:u.jsx("h1",{className:"text-2xl font-bold text-gray-300",children:"No Data Available"})})})}function aL({dataProcessor:n,oddsData:e,startingGoalies:t,goalieData:i,statsAnalyzer:a,edgeFactorCalc:l,loading:c,error:h}){const f=XS(),g=H.useRef(Date.now());return H.useEffect(()=>{fM()},[]),H.useEffect(()=>{const v=gM(f.pathname);return uM(v),g.current=Date.now(),()=>{const b=Math.floor((Date.now()-g.current)/1e3);b>3&&dM(v,b)}},[f.pathname]),u.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"var(--color-background)"},children:[u.jsx(TO,{}),u.jsx("main",{children:u.jsxs(mI,{children:[u.jsx(Ra,{path:"/",element:u.jsx(zF,{dataProcessor:n,oddsData:e,startingGoalies:t,goalieData:i,statsAnalyzer:a,edgeFactorCalc:l})}),u.jsx(Ra,{path:"/dashboard",element:u.jsx(aF,{dataProcessor:n,loading:c,error:h})}),u.jsx(Ra,{path:"/matchup-insights",element:u.jsx(nL,{dataProcessor:n,goalieData:i,todaysGames:e?.todaysGames||[]})}),u.jsx(Ra,{path:"/methodology",element:u.jsx(KF,{})}),u.jsx(Ra,{path:"/inspector",element:u.jsx(oF,{dataProcessor:n})}),u.jsx(Ra,{path:"/performance",element:u.jsx(qF,{})}),u.jsx(Ra,{path:"/disclaimer",element:u.jsx(ZF,{})})]})}),u.jsx(QF,{})]})}II.createRoot(document.getElementById("root")).render(u.jsx(H.StrictMode,{children:u.jsx(sL,{})}));export{u as j};
