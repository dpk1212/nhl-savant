import{r as XT,a as QT,g as YT,b as de,u as ZT,L as Hu,R as JT,H as eS,c as tS,d as El}from"./vendor-CAbTx9Lg.js";import{r as nS}from"./utils-CpJM9g8Q.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Xf={exports:{}},Al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function iS(){if(rv)return Al;rv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:c}}return Al.Fragment=e,Al.jsx=n,Al.jsxs=n,Al}var sv;function rS(){return sv||(sv=1,Xf.exports=iS()),Xf.exports}var d=rS(),Qf={exports:{}},wl={},Yf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function sS(){return av||(av=1,(function(s){function e(X,se){var ge=X.length;X.push(se);e:for(;0<ge;){var Oe=ge-1>>>1,Me=X[Oe];if(0<o(Me,se))X[Oe]=se,X[ge]=Me,ge=Oe;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var se=X[0],ge=X.pop();if(ge!==se){X[0]=ge;e:for(var Oe=0,Me=X.length,gt=Me>>>1;Oe<gt;){var Ge=2*(Oe+1)-1,Re=X[Ge],Je=Ge+1,zt=X[Je];if(0>o(Re,ge))Je<Me&&0>o(zt,Re)?(X[Oe]=zt,X[Je]=ge,Oe=Je):(X[Oe]=Re,X[Ge]=ge,Oe=Ge);else if(Je<Me&&0>o(zt,ge))X[Oe]=zt,X[Je]=ge,Oe=Je;else break e}}return se}function o(X,se){var ge=X.sortIndex-se.sortIndex;return ge!==0?ge:X.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var p=[],v=[],b=1,T=null,S=3,A=!1,z=!1,M=!1,B=!1,te=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function ne(X){for(var se=n(v);se!==null;){if(se.callback===null)r(v);else if(se.startTime<=X)r(v),se.sortIndex=se.expirationTime,e(p,se);else break;se=n(v)}}function re(X){if(M=!1,ne(X),!z)if(n(p)!==null)z=!0,ue||(ue=!0,V());else{var se=n(v);se!==null&&ct(re,se.startTime-X)}}var ue=!1,I=-1,C=5,D=-1;function N(){return B?!0:!(s.unstable_now()-D<C)}function P(){if(B=!1,ue){var X=s.unstable_now();D=X;var se=!0;try{e:{z=!1,M&&(M=!1,$(I),I=-1),A=!0;var ge=S;try{t:{for(ne(X),T=n(p);T!==null&&!(T.expirationTime>X&&N());){var Oe=T.callback;if(typeof Oe=="function"){T.callback=null,S=T.priorityLevel;var Me=Oe(T.expirationTime<=X);if(X=s.unstable_now(),typeof Me=="function"){T.callback=Me,ne(X),se=!0;break t}T===n(p)&&r(p),ne(X)}else r(p);T=n(p)}if(T!==null)se=!0;else{var gt=n(v);gt!==null&&ct(re,gt.startTime-X),se=!1}}break e}finally{T=null,S=ge,A=!1}se=void 0}}finally{se?V():ue=!1}}}var V;if(typeof ee=="function")V=function(){ee(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Fe=j.port2;j.port1.onmessage=P,V=function(){Fe.postMessage(null)}}else V=function(){te(P,0)};function ct(X,se){I=te(function(){X(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(X){switch(S){case 1:case 2:case 3:var se=3;break;default:se=S}var ge=S;S=se;try{return X()}finally{S=ge}},s.unstable_requestPaint=function(){B=!0},s.unstable_runWithPriority=function(X,se){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ge=S;S=X;try{return se()}finally{S=ge}},s.unstable_scheduleCallback=function(X,se,ge){var Oe=s.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Oe+ge:Oe):ge=Oe,X){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ge+Me,X={id:b++,callback:se,priorityLevel:X,startTime:ge,expirationTime:Me,sortIndex:-1},ge>Oe?(X.sortIndex=ge,e(v,X),n(p)===null&&X===n(v)&&(M?($(I),I=-1):M=!0,ct(re,ge-Oe))):(X.sortIndex=Me,e(p,X),z||A||(z=!0,ue||(ue=!0,V()))),X},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(X){var se=S;return function(){var ge=S;S=se;try{return X.apply(this,arguments)}finally{S=ge}}}})(Zf)),Zf}var ov;function aS(){return ov||(ov=1,Yf.exports=sS()),Yf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function oS(){if(lv)return wl;lv=1;var s=aS(),e=XT(),n=QT();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function v(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),t;if(m===l)return p(f),i;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var _=!1,E=f.child;E;){if(E===a){_=!0,a=f,l=m;break}if(E===l){_=!0,l=f,a=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===a){_=!0,a=m,l=f;break}if(E===l){_=!0,l=m,a=f;break}E=E.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function b(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=b(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function Fe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case te:return"Profiler";case B:return"StrictMode";case re:return"Suspense";case ue:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ee:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case ne:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:Fe(t.type)||"Memo";case C:i=t._payload,t=t._init;try{return Fe(t(i))}catch{}}return null}var ct=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Oe=[],Me=-1;function gt(t){return{current:t}}function Ge(t){0>Me||(t.current=Oe[Me],Oe[Me]=null,Me--)}function Re(t,i){Me++,Oe[Me]=t.current,t.current=i}var Je=gt(null),zt=gt(null),Zt=gt(null),Di=gt(null);function or(t,i){switch(Re(Zt,i),Re(zt,t),Re(Je,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Ry(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Ry(i),t=Cy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ge(Je),Re(Je,t)}function Ni(){Ge(Je),Ge(zt),Ge(Zt)}function _o(t){t.memoizedState!==null&&Re(Di,t);var i=Je.current,a=Cy(i,t.type);i!==a&&(Re(zt,t),Re(Je,a))}function ta(t){zt.current===t&&(Ge(Je),Ge(zt)),Di.current===t&&(Ge(Di),xl._currentValue=ge)}var na,ia;function Zn(t){if(na===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);na=i&&i[1]||"",ia=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+na+t+ia}var xo=!1;function us(t,i){if(!t||xo)return"";xo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(W){var H=W}Reflect.construct(t,[],Y)}else{try{Y.call()}catch(W){H=W}t.call(Y.prototype)}}else{try{throw Error()}catch(W){H=W}(Y=t())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(W){if(W&&H&&typeof W.stack=="string")return[W.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var O=_.split(`
`),G=E.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===G.length)for(l=O.length-1,f=G.length-1;1<=l&&0<=f&&O[l]!==G[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==G[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==G[f]){var K=`
`+O[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=f);break}}}finally{xo=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Zn(a):""}function bo(t,i){switch(t.tag){case 26:case 27:case 5:return Zn(t.type);case 16:return Zn("Lazy");case 13:return t.child!==i&&i!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return us(t.type,!1);case 11:return us(t.type.render,!1);case 1:return us(t.type,!0);case 31:return Zn("Activity");default:return""}}function To(t){try{var i="",a=null;do i+=bo(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var pt=Object.prototype.hasOwnProperty,It=s.unstable_scheduleCallback,lr=s.unstable_cancelCallback,Qh=s.unstable_shouldYield,rc=s.unstable_requestPaint,Jt=s.unstable_now,hs=s.unstable_getCurrentPriorityLevel,So=s.unstable_ImmediatePriority,Eo=s.unstable_UserBlockingPriority,cr=s.unstable_NormalPriority,Yh=s.unstable_LowPriority,sc=s.unstable_IdlePriority,ac=s.log,oc=s.unstable_setDisableYieldValue,Mn=null,Vt=null;function Tn(t){if(typeof ac=="function"&&oc(t),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(Mn,t)}catch{}}var ut=Math.clz32?Math.clz32:cc,lc=Math.log,ra=Math.LN2;function cc(t){return t>>>=0,t===0?32:31-(lc(t)/ra|0)|0}var Jn=256,ds=262144,yt=4194304;function ei(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ti(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?f=ei(l):(_&=E,_!==0?f=ei(_):a||(a=E&~t,a!==0&&(f=ei(a))))):(E=l&~m,E!==0?f=ei(E):_!==0?f=ei(_):a||(a=l&~t,a!==0&&(f=ei(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function zn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Zh(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uc(){var t=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),t}function ni(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function fs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jh(t,i,a,l,f,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,O=t.expirationTimes,G=t.hiddenUpdates;for(a=_&~a;0<a;){var K=31-ut(a),Y=1<<K;E[K]=0,O[K]=-1;var H=G[K];if(H!==null)for(G[K]=null,K=0;K<H.length;K++){var W=H[K];W!==null&&(W.lane&=-536870913)}a&=~Y}l!==0&&ms(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~i))}function ms(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-ut(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ao(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-ut(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function wo(t,i){var a=i&-i;return a=(a&42)!==0?1:gs(a),(a&(t.suspendedLanes|i))!==0?0:a}function gs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ji(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hc(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:Yy(t.type))}function Vn(t,i){var a=se.p;try{return se.p=t,i()}finally{se.p=a}}var Ln=Math.random().toString(36).slice(2),vt="__reactFiber$"+Ln,Ot="__reactProps$"+Ln,ii="__reactContainer$"+Ln,sa="__reactEvents$"+Ln,ed="__reactListeners$"+Ln,dc="__reactHandles$"+Ln,fc="__reactResources$"+Ln,ri="__reactMarker$"+Ln;function aa(t){delete t[vt],delete t[Ot],delete t[sa],delete t[ed],delete t[dc]}function si(t){var i=t[vt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ii]||a[vt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=ky(t);t!==null;){if(a=t[vt])return a;t=ky(t)}return i}t=a,a=t.parentNode}return null}function Sn(t){if(t=t[vt]||t[ii]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function dn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function ai(t){var i=t[fc];return i||(i=t[fc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _t(t){t[ri]=!0}var Ro=new Set,Co={};function oi(t,i){li(t,i),li(t+"Capture",i)}function li(t,i){for(Co[t]=i,t=0;t<i.length;t++)Ro.add(i[t])}var Io=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Do={},No={};function mc(t){return pt.call(No,t)?!0:pt.call(Do,t)?!1:Io.test(t)?No[t]=!0:(Do[t]=!0,!1)}function oa(t,i,a){if(mc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function fn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function xt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Pt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ur(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function jo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function He(t){if(!t._valueTracker){var i=ur(t)?"checked":"value";t._valueTracker=jo(t,i,""+t[i])}}function ps(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=ur(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ci(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ys=/[\n"\\]/g;function nn(t){return t.replace(ys,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function la(t,i,a,l,f,m,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Pt(i)):t.value!==""+Pt(i)&&(t.value=""+Pt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Oo(t,_,Pt(i)):a!=null?Oo(t,_,Pt(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Pt(E):t.removeAttribute("name")}function gc(t,i,a,l,f,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){He(t);return}a=a!=null?""+Pt(a):"",i=i!=null?""+Pt(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),He(t)}function Oo(t,i,a){i==="number"&&ci(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function hr(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Pt(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function pc(t,i,a){if(i!=null&&(i=""+Pt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Pt(a):""}function dr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ct(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Pt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),He(t)}function rn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var yc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Po(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||yc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function ko(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Po(t,f,l)}else for(var m in i)i.hasOwnProperty(m)&&Po(t,m,i[m])}function ca(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(t){return fr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Bn(){}var Mo=null;function En(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mr=null,ui=null;function vs(t){var i=Sn(t);if(i&&(t=i.stateNode)){var a=t[Ot]||null;e:switch(t=i.stateNode,i.type){case"input":if(la(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+nn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[Ot]||null;if(!f)throw Error(r(90));la(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&ps(l)}break e;case"textarea":pc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&hr(t,!!a.multiple,i,!1)}}}var ha=!1;function gr(t,i,a){if(ha)return t(i,a);ha=!0;try{var l=t(i);return l}finally{if(ha=!1,(mr!==null||ui!==null)&&(hu(),mr&&(i=mr,t=ui,ui=mr=null,vs(i),t)))for(i=0;i<t.length;i++)vs(t[i])}}function Fn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Ot]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_s=!1;if(An)try{var We={};Object.defineProperty(We,"passive",{get:function(){_s=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{_s=!1}var hi=null,zo=null,xs=null;function Vo(){if(xs)return xs;var t,i=zo,a=i.length,l,f="value"in hi?hi.value:hi.textContent,m=f.length;for(t=0;t<a&&i[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===f[m-l];l++);return xs=f.slice(t,1<l?1-l:void 0)}function bs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Oi(){return!0}function Un(){return!1}function Lt(t){function i(a,l,f,m,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Oi:Un,this.isPropagationStopped=Un,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),i}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=Lt(Pi),pr=T({},Pi,{view:0,detail:0}),Lo=Lt(pr),yr,da,fi,fa=T({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fi&&(fi&&t.type==="mousemove"?(yr=t.screenX-fi.screenX,da=t.screenY-fi.screenY):da=yr=0,fi=t),yr)},movementY:function(t){return"movementY"in t?t.movementY:da}}),Bo=Lt(fa),Ts=T({},fa,{dataTransfer:0}),_c=Lt(Ts),xc=T({},pr,{relatedTarget:0}),Ss=Lt(xc),Fo=T({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),bc=Lt(Fo),ma=T({},Pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tc=Lt(ma),Sc=T({},Pi,{data:0}),mi=Lt(Sc),Ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ac={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=wc[t])?!!i[t]:!1}function vr(){return Rc}var en=T({},pr,{key:function(t){if(t.key){var i=Ec[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=bs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ac[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(t){return t.type==="keypress"?bs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cc=Lt(en),Ic=T({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ki=Lt(Ic),u=T({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),y=Lt(u),x=T({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Lt(x),F=T({},fa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q=Lt(F),ie=T({},Pi,{newState:0,oldState:0}),be=Lt(ie),ht=[9,13,27,32],Le=An&&"CompositionEvent"in window,rt=null;An&&"documentMode"in document&&(rt=document.documentMode);var wn=An&&"TextEvent"in window&&!rt,gi=An&&(!Le||rt&&8<rt&&11>=rt),Gn=" ",Hn=!1;function Es(t,i){switch(t){case"keyup":return ht.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ga(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pa=!1;function _b(t,i){switch(t){case"compositionend":return ga(i);case"keypress":return i.which!==32?null:(Hn=!0,Gn);case"textInput":return t=i.data,t===Gn&&Hn?null:t;default:return null}}function xb(t,i){if(pa)return t==="compositionend"||!Le&&Es(t,i)?(t=Vo(),xs=zo=hi=null,pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return gi&&i.locale!=="ko"?null:i.data;default:return null}}var bb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!bb[t.type]:i==="textarea"}function Lg(t,i,a,l){mr?ui?ui.push(l):ui=[l]:mr=l,i=vu(i,"onChange"),0<i.length&&(a=new di("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Uo=null,Go=null;function Tb(t){by(t,0)}function Dc(t){var i=dn(t);if(ps(i))return t}function Bg(t,i){if(t==="change")return i}var Fg=!1;if(An){var td;if(An){var nd="oninput"in document;if(!nd){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),nd=typeof Ug.oninput=="function"}td=nd}else td=!1;Fg=td&&(!document.documentMode||9<document.documentMode)}function Gg(){Uo&&(Uo.detachEvent("onpropertychange",Hg),Go=Uo=null)}function Hg(t){if(t.propertyName==="value"&&Dc(Go)){var i=[];Lg(i,Go,t,En(t)),gr(Tb,i)}}function Sb(t,i,a){t==="focusin"?(Gg(),Uo=i,Go=a,Uo.attachEvent("onpropertychange",Hg)):t==="focusout"&&Gg()}function Eb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dc(Go)}function Ab(t,i){if(t==="click")return Dc(i)}function wb(t,i){if(t==="input"||t==="change")return Dc(i)}function Rb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var mn=typeof Object.is=="function"?Object.is:Rb;function Ho(t,i){if(mn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!pt.call(i,f)||!mn(t[f],i[f]))return!1}return!0}function $g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,i){var a=$g(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=$g(a)}}function Wg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Wg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Kg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ci(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ci(t.document)}return i}function id(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Cb=An&&"documentMode"in document&&11>=document.documentMode,ya=null,rd=null,$o=null,sd=!1;function Xg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sd||ya==null||ya!==ci(l)||(l=ya,"selectionStart"in l&&id(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),$o&&Ho($o,l)||($o=l,l=vu(rd,"onSelect"),0<l.length&&(i=new di("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ya)))}function As(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var va={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},ad={},Qg={};An&&(Qg=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function ws(t){if(ad[t])return ad[t];if(!va[t])return t;var i=va[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Qg)return ad[t]=i[a];return t}var Yg=ws("animationend"),Zg=ws("animationiteration"),Jg=ws("animationstart"),Ib=ws("transitionrun"),Db=ws("transitionstart"),Nb=ws("transitioncancel"),ep=ws("transitionend"),tp=new Map,od="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");od.push("scrollEnd");function $n(t,i){tp.set(t,i),oi(i,[t])}var Nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Rn=[],_a=0,ld=0;function jc(){for(var t=_a,i=ld=_a=0;i<t;){var a=Rn[i];Rn[i++]=null;var l=Rn[i];Rn[i++]=null;var f=Rn[i];Rn[i++]=null;var m=Rn[i];if(Rn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}m!==0&&np(a,f,m)}}function Oc(t,i,a,l){Rn[_a++]=t,Rn[_a++]=i,Rn[_a++]=a,Rn[_a++]=l,ld|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function cd(t,i,a,l){return Oc(t,i,a,l),Pc(t)}function Rs(t,i){return Oc(t,null,null,i),Pc(t)}function np(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&i!==null&&(f=31-ut(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),m):null}function Pc(t){if(50<fl)throw fl=0,_f=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var xa={};function jb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,i,a,l){return new jb(t,i,a,l)}function ud(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mi(t,i){var a=t.alternate;return a===null?(a=gn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ip(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function kc(t,i,a,l,f,m){var _=0;if(l=t,typeof t=="function")ud(t)&&(_=1);else if(typeof t=="string")_=zT(t,a,Je.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=gn(31,a,i,f),t.elementType=D,t.lanes=m,t;case M:return Cs(a.children,f,m,i);case B:_=8,f|=24;break;case te:return t=gn(12,a,i,f|2),t.elementType=te,t.lanes=m,t;case re:return t=gn(13,a,i,f),t.elementType=re,t.lanes=m,t;case ue:return t=gn(19,a,i,f),t.elementType=ue,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:_=10;break e;case $:_=9;break e;case ne:_=11;break e;case I:_=14;break e;case C:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=gn(_,a,i,f),i.elementType=t,i.type=l,i.lanes=m,i}function Cs(t,i,a,l){return t=gn(7,t,l,i),t.lanes=a,t}function hd(t,i,a){return t=gn(6,t,null,i),t.lanes=a,t}function rp(t){var i=gn(18,null,null,0);return i.stateNode=t,i}function dd(t,i,a){return i=gn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var sp=new WeakMap;function Cn(t,i){if(typeof t=="object"&&t!==null){var a=sp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:To(i)},sp.set(t,i),i)}return{value:t,source:i,stack:To(i)}}var ba=[],Ta=0,Mc=null,qo=0,In=[],Dn=0,_r=null,pi=1,yi="";function zi(t,i){ba[Ta++]=qo,ba[Ta++]=Mc,Mc=t,qo=i}function ap(t,i,a){In[Dn++]=pi,In[Dn++]=yi,In[Dn++]=_r,_r=t;var l=pi;t=yi;var f=32-ut(l)-1;l&=~(1<<f),a+=1;var m=32-ut(i)+f;if(30<m){var _=f-f%5;m=(l&(1<<_)-1).toString(32),l>>=_,f-=_,pi=1<<32-ut(i)+f|a<<f|l,yi=m+t}else pi=1<<m|a<<f|l,yi=t}function fd(t){t.return!==null&&(zi(t,1),ap(t,1,0))}function md(t){for(;t===Mc;)Mc=ba[--Ta],ba[Ta]=null,qo=ba[--Ta],ba[Ta]=null;for(;t===_r;)_r=In[--Dn],In[Dn]=null,yi=In[--Dn],In[Dn]=null,pi=In[--Dn],In[Dn]=null}function op(t,i){In[Dn++]=pi,In[Dn++]=yi,In[Dn++]=_r,pi=i.id,yi=i.overflow,_r=t}var Bt=null,et=null,Pe=!1,xr=null,Nn=!1,gd=Error(r(519));function br(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wo(Cn(i,t)),gd}function lp(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[vt]=t,i[Ot]=l,a){case"dialog":Ae("cancel",i),Ae("close",i);break;case"iframe":case"object":case"embed":Ae("load",i);break;case"video":case"audio":for(a=0;a<gl.length;a++)Ae(gl[a],i);break;case"source":Ae("error",i);break;case"img":case"image":case"link":Ae("error",i),Ae("load",i);break;case"details":Ae("toggle",i);break;case"input":Ae("invalid",i),gc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ae("invalid",i);break;case"textarea":Ae("invalid",i),dr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Ay(i.textContent,a)?(l.popover!=null&&(Ae("beforetoggle",i),Ae("toggle",i)),l.onScroll!=null&&Ae("scroll",i),l.onScrollEnd!=null&&Ae("scrollend",i),l.onClick!=null&&(i.onclick=Bn),i=!0):i=!1,i||br(t,!0)}function cp(t){for(Bt=t.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Bt=Bt.return}}function Sa(t){if(t!==Bt)return!1;if(!Pe)return cp(t),Pe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Pf(t.type,t.memoizedProps)),a=!a),a&&et&&br(t),cp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));et=Py(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));et=Py(t)}else i===27?(i=et,kr(t.type)?(t=Lf,Lf=null,et=t):et=i):et=Bt?On(t.stateNode.nextSibling):null;return!0}function Is(){et=Bt=null,Pe=!1}function pd(){var t=xr;return t!==null&&(ln===null?ln=t:ln.push.apply(ln,t),xr=null),t}function Wo(t){xr===null?xr=[t]:xr.push(t)}var yd=gt(null),Ds=null,Vi=null;function Tr(t,i,a){Re(yd,i._currentValue),i._currentValue=a}function Li(t){t._currentValue=yd.current,Ge(yd)}function vd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function _d(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var O=0;O<i.length;O++)if(E.context===i[O]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),vd(m.return,a,t),l||(_=null);break e}m=E.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),vd(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ea(t,i,a,l){t=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=f.type;mn(f.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(f===Di.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(xl):t=[xl])}f=f.return}t!==null&&_d(i,t,a,l),i.flags|=262144}function zc(t){for(t=t.firstContext;t!==null;){if(!mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ns(t){Ds=t,Vi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return up(Ds,t)}function Vc(t,i){return Ds===null&&Ns(t),up(t,i)}function up(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Vi===null){if(t===null)throw Error(r(308));Vi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Vi=Vi.next=i;return a}var Ob=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Pb=s.unstable_scheduleCallback,kb=s.unstable_NormalPriority,bt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xd(){return{controller:new Ob,data:new Map,refCount:0}}function Ko(t){t.refCount--,t.refCount===0&&Pb(kb,function(){t.controller.abort()})}var Xo=null,bd=0,Aa=0,wa=null;function Mb(t,i){if(Xo===null){var a=Xo=[];bd=0,Aa=Af(),wa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return bd++,i.then(hp,hp),i}function hp(){if(--bd===0&&Xo!==null){wa!==null&&(wa.status="fulfilled");var t=Xo;Xo=null,Aa=0,wa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function zb(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var dp=X.S;X.S=function(t,i){X0=Jt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Mb(t,i),dp!==null&&dp(t,i)};var js=gt(null);function Td(){var t=js.current;return t!==null?t:Ye.pooledCache}function Lc(t,i){i===null?Re(js,js.current):Re(js,i.pool)}function fp(){var t=Td();return t===null?null:{parent:bt._currentValue,pool:t}}var Ra=Error(r(460)),Sd=Error(r(474)),Bc=Error(r(542)),Fc={then:function(){}};function mp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function gp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Bn,Bn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,yp(t),t;default:if(typeof i.status=="string")i.then(Bn,Bn);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,yp(t),t}throw Ps=i,Ra}}function Os(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ps=a,Ra):a}}var Ps=null;function pp(){if(Ps===null)throw Error(r(459));var t=Ps;return Ps=null,t}function yp(t){if(t===Ra||t===Bc)throw Error(r(483))}var Ca=null,Qo=0;function Uc(t){var i=Qo;return Qo+=1,Ca===null&&(Ca=[]),gp(Ca,t,i)}function Yo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Gc(t,i){throw i.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function vp(t){function i(L,k){if(t){var U=L.deletions;U===null?(L.deletions=[k],L.flags|=16):U.push(k)}}function a(L,k){if(!t)return null;for(;k!==null;)i(L,k),k=k.sibling;return null}function l(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function f(L,k){return L=Mi(L,k),L.index=0,L.sibling=null,L}function m(L,k,U){return L.index=U,t?(U=L.alternate,U!==null?(U=U.index,U<k?(L.flags|=67108866,k):U):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function _(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function E(L,k,U,Q){return k===null||k.tag!==6?(k=hd(U,L.mode,Q),k.return=L,k):(k=f(k,U),k.return=L,k)}function O(L,k,U,Q){var fe=U.type;return fe===M?K(L,k,U.props.children,Q,U.key):k!==null&&(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===C&&Os(fe)===k.type)?(k=f(k,U.props),Yo(k,U),k.return=L,k):(k=kc(U.type,U.key,U.props,null,L.mode,Q),Yo(k,U),k.return=L,k)}function G(L,k,U,Q){return k===null||k.tag!==4||k.stateNode.containerInfo!==U.containerInfo||k.stateNode.implementation!==U.implementation?(k=dd(U,L.mode,Q),k.return=L,k):(k=f(k,U.children||[]),k.return=L,k)}function K(L,k,U,Q,fe){return k===null||k.tag!==7?(k=Cs(U,L.mode,Q,fe),k.return=L,k):(k=f(k,U),k.return=L,k)}function Y(L,k,U){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=hd(""+k,L.mode,U),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return U=kc(k.type,k.key,k.props,null,L.mode,U),Yo(U,k),U.return=L,U;case z:return k=dd(k,L.mode,U),k.return=L,k;case C:return k=Os(k),Y(L,k,U)}if(ct(k)||V(k))return k=Cs(k,L.mode,U,null),k.return=L,k;if(typeof k.then=="function")return Y(L,Uc(k),U);if(k.$$typeof===ee)return Y(L,Vc(L,k),U);Gc(L,k)}return null}function H(L,k,U,Q){var fe=k!==null?k.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return fe!==null?null:E(L,k,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===fe?O(L,k,U,Q):null;case z:return U.key===fe?G(L,k,U,Q):null;case C:return U=Os(U),H(L,k,U,Q)}if(ct(U)||V(U))return fe!==null?null:K(L,k,U,Q,null);if(typeof U.then=="function")return H(L,k,Uc(U),Q);if(U.$$typeof===ee)return H(L,k,Vc(L,U),Q);Gc(L,U)}return null}function W(L,k,U,Q,fe){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return L=L.get(U)||null,E(k,L,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return L=L.get(Q.key===null?U:Q.key)||null,O(k,L,Q,fe);case z:return L=L.get(Q.key===null?U:Q.key)||null,G(k,L,Q,fe);case C:return Q=Os(Q),W(L,k,U,Q,fe)}if(ct(Q)||V(Q))return L=L.get(U)||null,K(k,L,Q,fe,null);if(typeof Q.then=="function")return W(L,k,U,Uc(Q),fe);if(Q.$$typeof===ee)return W(L,k,U,Vc(k,Q),fe);Gc(k,Q)}return null}function le(L,k,U,Q){for(var fe=null,ze=null,he=k,Se=k=0,Ie=null;he!==null&&Se<U.length;Se++){he.index>Se?(Ie=he,he=null):Ie=he.sibling;var Ve=H(L,he,U[Se],Q);if(Ve===null){he===null&&(he=Ie);break}t&&he&&Ve.alternate===null&&i(L,he),k=m(Ve,k,Se),ze===null?fe=Ve:ze.sibling=Ve,ze=Ve,he=Ie}if(Se===U.length)return a(L,he),Pe&&zi(L,Se),fe;if(he===null){for(;Se<U.length;Se++)he=Y(L,U[Se],Q),he!==null&&(k=m(he,k,Se),ze===null?fe=he:ze.sibling=he,ze=he);return Pe&&zi(L,Se),fe}for(he=l(he);Se<U.length;Se++)Ie=W(he,L,Se,U[Se],Q),Ie!==null&&(t&&Ie.alternate!==null&&he.delete(Ie.key===null?Se:Ie.key),k=m(Ie,k,Se),ze===null?fe=Ie:ze.sibling=Ie,ze=Ie);return t&&he.forEach(function(Br){return i(L,Br)}),Pe&&zi(L,Se),fe}function pe(L,k,U,Q){if(U==null)throw Error(r(151));for(var fe=null,ze=null,he=k,Se=k=0,Ie=null,Ve=U.next();he!==null&&!Ve.done;Se++,Ve=U.next()){he.index>Se?(Ie=he,he=null):Ie=he.sibling;var Br=H(L,he,Ve.value,Q);if(Br===null){he===null&&(he=Ie);break}t&&he&&Br.alternate===null&&i(L,he),k=m(Br,k,Se),ze===null?fe=Br:ze.sibling=Br,ze=Br,he=Ie}if(Ve.done)return a(L,he),Pe&&zi(L,Se),fe;if(he===null){for(;!Ve.done;Se++,Ve=U.next())Ve=Y(L,Ve.value,Q),Ve!==null&&(k=m(Ve,k,Se),ze===null?fe=Ve:ze.sibling=Ve,ze=Ve);return Pe&&zi(L,Se),fe}for(he=l(he);!Ve.done;Se++,Ve=U.next())Ve=W(he,L,Se,Ve.value,Q),Ve!==null&&(t&&Ve.alternate!==null&&he.delete(Ve.key===null?Se:Ve.key),k=m(Ve,k,Se),ze===null?fe=Ve:ze.sibling=Ve,ze=Ve);return t&&he.forEach(function(KT){return i(L,KT)}),Pe&&zi(L,Se),fe}function Qe(L,k,U,Q){if(typeof U=="object"&&U!==null&&U.type===M&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:e:{for(var fe=U.key;k!==null;){if(k.key===fe){if(fe=U.type,fe===M){if(k.tag===7){a(L,k.sibling),Q=f(k,U.props.children),Q.return=L,L=Q;break e}}else if(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===C&&Os(fe)===k.type){a(L,k.sibling),Q=f(k,U.props),Yo(Q,U),Q.return=L,L=Q;break e}a(L,k);break}else i(L,k);k=k.sibling}U.type===M?(Q=Cs(U.props.children,L.mode,Q,U.key),Q.return=L,L=Q):(Q=kc(U.type,U.key,U.props,null,L.mode,Q),Yo(Q,U),Q.return=L,L=Q)}return _(L);case z:e:{for(fe=U.key;k!==null;){if(k.key===fe)if(k.tag===4&&k.stateNode.containerInfo===U.containerInfo&&k.stateNode.implementation===U.implementation){a(L,k.sibling),Q=f(k,U.children||[]),Q.return=L,L=Q;break e}else{a(L,k);break}else i(L,k);k=k.sibling}Q=dd(U,L.mode,Q),Q.return=L,L=Q}return _(L);case C:return U=Os(U),Qe(L,k,U,Q)}if(ct(U))return le(L,k,U,Q);if(V(U)){if(fe=V(U),typeof fe!="function")throw Error(r(150));return U=fe.call(U),pe(L,k,U,Q)}if(typeof U.then=="function")return Qe(L,k,Uc(U),Q);if(U.$$typeof===ee)return Qe(L,k,Vc(L,U),Q);Gc(L,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,k!==null&&k.tag===6?(a(L,k.sibling),Q=f(k,U),Q.return=L,L=Q):(a(L,k),Q=hd(U,L.mode,Q),Q.return=L,L=Q),_(L)):a(L,k)}return function(L,k,U,Q){try{Qo=0;var fe=Qe(L,k,U,Q);return Ca=null,fe}catch(he){if(he===Ra||he===Bc)throw he;var ze=gn(29,he,null,L.mode);return ze.lanes=Q,ze.return=L,ze}finally{}}}var ks=vp(!0),_p=vp(!1),Sr=!1;function Ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ad(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Er(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ar(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Be&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Pc(t),np(t,null,a),i}return Oc(t,l,i,a),Pc(t)}function Zo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ao(t,a)}}function wd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Rd=!1;function Jo(){if(Rd){var t=wa;if(t!==null)throw t}}function el(t,i,a,l){Rd=!1;var f=t.updateQueue;Sr=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var O=E,G=O.next;O.next=null,_===null?m=G:_.next=G,_=O;var K=t.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==_&&(E===null?K.firstBaseUpdate=G:E.next=G,K.lastBaseUpdate=O))}if(m!==null){var Y=f.baseState;_=0,K=G=O=null,E=m;do{var H=E.lane&-536870913,W=H!==E.lane;if(W?(Ce&H)===H:(l&H)===H){H!==0&&H===Aa&&(Rd=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var le=t,pe=E;H=i;var Qe=a;switch(pe.tag){case 1:if(le=pe.payload,typeof le=="function"){Y=le.call(Qe,Y,H);break e}Y=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=pe.payload,H=typeof le=="function"?le.call(Qe,Y,H):le,H==null)break e;Y=T({},Y,H);break e;case 2:Sr=!0}}H=E.callback,H!==null&&(t.flags|=64,W&&(t.flags|=8192),W=f.callbacks,W===null?f.callbacks=[H]:W.push(H))}else W={lane:H,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(G=K=W,O=Y):K=K.next=W,_|=H;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;W=E,E=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);K===null&&(O=Y),f.baseState=O,f.firstBaseUpdate=G,f.lastBaseUpdate=K,m===null&&(f.shared.lanes=0),Dr|=_,t.lanes=_,t.memoizedState=Y}}function xp(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function bp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)xp(a[t],i)}var Ia=gt(null),Hc=gt(0);function Tp(t,i){t=Ki,Re(Hc,t),Re(Ia,i),Ki=t|i.baseLanes}function Cd(){Re(Hc,Ki),Re(Ia,Ia.current)}function Id(){Ki=Hc.current,Ge(Ia),Ge(Hc)}var pn=gt(null),jn=null;function wr(t){var i=t.alternate;Re(dt,dt.current&1),Re(pn,t),jn===null&&(i===null||Ia.current!==null||i.memoizedState!==null)&&(jn=t)}function Dd(t){Re(dt,dt.current),Re(pn,t),jn===null&&(jn=t)}function Sp(t){t.tag===22?(Re(dt,dt.current),Re(pn,t),jn===null&&(jn=t)):Rr()}function Rr(){Re(dt,dt.current),Re(pn,pn.current)}function yn(t){Ge(pn),jn===t&&(jn=null),Ge(dt)}var dt=gt(0);function $c(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||zf(a)||Vf(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Bi=0,Te=null,Ke=null,Tt=null,qc=!1,Da=!1,Ms=!1,Wc=0,tl=0,Na=null,Vb=0;function ot(){throw Error(r(321))}function Nd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!mn(t[a],i[a]))return!1;return!0}function jd(t,i,a,l,f,m){return Bi=m,Te=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=t===null||t.memoizedState===null?a0:Wd,Ms=!1,m=a(l,f),Ms=!1,Da&&(m=Ap(i,a,l,f)),Ep(t),m}function Ep(t){X.H=rl;var i=Ke!==null&&Ke.next!==null;if(Bi=0,Tt=Ke=Te=null,qc=!1,tl=0,Na=null,i)throw Error(r(300));t===null||St||(t=t.dependencies,t!==null&&zc(t)&&(St=!0))}function Ap(t,i,a,l){Te=t;var f=0;do{if(Da&&(Na=null),tl=0,Da=!1,25<=f)throw Error(r(301));if(f+=1,Tt=Ke=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=o0,m=i(a,l)}while(Da);return m}function Lb(){var t=X.H,i=t.useState()[0];return i=typeof i.then=="function"?nl(i):i,t=t.useState()[0],(Ke!==null?Ke.memoizedState:null)!==t&&(Te.flags|=1024),i}function Od(){var t=Wc!==0;return Wc=0,t}function Pd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function kd(t){if(qc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}qc=!1}Bi=0,Tt=Ke=Te=null,Da=!1,tl=Wc=0,Na=null}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Te.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function ft(){if(Ke===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var i=Tt===null?Te.memoizedState:Tt.next;if(i!==null)Tt=i,Ke=t;else{if(t===null)throw Te.alternate===null?Error(r(467)):Error(r(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Tt===null?Te.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(t){var i=tl;return tl+=1,Na===null&&(Na=[]),t=gp(Na,t,i),i=Te,(Tt===null?i.memoizedState:Tt.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?a0:Wd),t}function Xc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return nl(t);if(t.$$typeof===ee)return Ft(t)}throw Error(r(438,String(t)))}function Md(t){var i=null,a=Te.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Te.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Kc(),Te.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=N;return i.index++,a}function Fi(t,i){return typeof i=="function"?i(t):i}function Qc(t){var i=ft();return zd(i,Ke,t)}function zd(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}i.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{i=f.next;var E=_=null,O=null,G=i,K=!1;do{var Y=G.lane&-536870913;if(Y!==G.lane?(Ce&Y)===Y:(Bi&Y)===Y){var H=G.revertLane;if(H===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),Y===Aa&&(K=!0);else if((Bi&H)===H){G=G.next,H===Aa&&(K=!0);continue}else Y={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(E=O=Y,_=m):O=O.next=Y,Te.lanes|=H,Dr|=H;Y=G.action,Ms&&a(m,Y),m=G.hasEagerState?G.eagerState:a(m,Y)}else H={lane:Y,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(E=O=H,_=m):O=O.next=H,Te.lanes|=Y,Dr|=Y;G=G.next}while(G!==null&&G!==i);if(O===null?_=m:O.next=E,!mn(m,t.memoizedState)&&(St=!0,K&&(a=wa,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=O,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Vd(t){var i=ft(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);mn(m,i.memoizedState)||(St=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,l]}function wp(t,i,a){var l=Te,f=ft(),m=Pe;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!mn((Ke||f).memoizedState,a);if(_&&(f.memoizedState=a,St=!0),f=f.queue,Fd(Ip.bind(null,l,f,t),[t]),f.getSnapshot!==i||_||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,ja(9,{destroy:void 0},Cp.bind(null,l,f,a,i),null),Ye===null)throw Error(r(349));m||(Bi&127)!==0||Rp(l,i,a)}return a}function Rp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Te.updateQueue,i===null?(i=Kc(),Te.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Cp(t,i,a,l){i.value=a,i.getSnapshot=l,Dp(i)&&Np(t)}function Ip(t,i,a){return a(function(){Dp(i)&&Np(t)})}function Dp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!mn(t,a)}catch{return!0}}function Np(t){var i=Rs(t,2);i!==null&&cn(i,t,2)}function Ld(t){var i=tn();if(typeof t=="function"){var a=t;if(t=a(),Ms){Tn(!0);try{a()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:t},i}function jp(t,i,a,l){return t.baseState=a,zd(t,Ke,typeof l=="function"?l:Fi)}function Bb(t,i,a,l,f){if(Jc(t))throw Error(r(485));if(t=i.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};X.T!==null?a(!0):m.isTransition=!1,l(m),a=i.pending,a===null?(m.next=i.pending=m,Op(i,m)):(m.next=a.next,i.pending=a.next=m)}}function Op(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var m=X.T,_={};X.T=_;try{var E=a(f,l),O=X.S;O!==null&&O(_,E),Pp(t,i,E)}catch(G){Bd(t,i,G)}finally{m!==null&&_.types!==null&&(m.types=_.types),X.T=m}}else try{m=a(f,l),Pp(t,i,m)}catch(G){Bd(t,i,G)}}function Pp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){kp(t,i,l)},function(l){return Bd(t,i,l)}):kp(t,i,a)}function kp(t,i,a){i.status="fulfilled",i.value=a,Mp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Op(t,a)))}function Bd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Mp(i),i=i.next;while(i!==l)}t.action=null}function Mp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function zp(t,i){return i}function Vp(t,i){if(Pe){var a=Ye.formState;if(a!==null){e:{var l=Te;if(Pe){if(et){t:{for(var f=et,m=Nn;f.nodeType!==8;){if(!m){f=null;break t}if(f=On(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){et=On(f.nextSibling),l=f.data==="F!";break e}}br(l)}l=!1}l&&(i=a[0])}}return a=tn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:i},a.queue=l,a=i0.bind(null,Te,l),l.dispatch=a,l=Ld(!1),m=qd.bind(null,Te,!1,l.queue),l=tn(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=Bb.bind(null,Te,f,m,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function Lp(t){var i=ft();return Bp(i,Ke,t)}function Bp(t,i,a){if(i=zd(t,i,zp)[0],t=Qc(Fi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=nl(i)}catch(_){throw _===Ra?Bc:_}else l=i;i=ft();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(Te.flags|=2048,ja(9,{destroy:void 0},Fb.bind(null,f,a),null)),[l,m,t]}function Fb(t,i){t.action=i}function Fp(t){var i=ft(),a=Ke;if(a!==null)return Bp(i,a,t);ft(),i=i.memoizedState,a=ft();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ja(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Te.updateQueue,i===null&&(i=Kc(),Te.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Up(){return ft().memoizedState}function Yc(t,i,a,l){var f=tn();Te.flags|=t,f.memoizedState=ja(1|i,{destroy:void 0},a,l===void 0?null:l)}function Zc(t,i,a,l){var f=ft();l=l===void 0?null:l;var m=f.memoizedState.inst;Ke!==null&&l!==null&&Nd(l,Ke.memoizedState.deps)?f.memoizedState=ja(i,m,a,l):(Te.flags|=t,f.memoizedState=ja(1|i,m,a,l))}function Gp(t,i){Yc(8390656,8,t,i)}function Fd(t,i){Zc(2048,8,t,i)}function Ub(t){Te.flags|=4;var i=Te.updateQueue;if(i===null)i=Kc(),Te.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Hp(t){var i=ft().memoizedState;return Ub({ref:i,nextImpl:t}),function(){if((Be&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function $p(t,i){return Zc(4,2,t,i)}function qp(t,i){return Zc(4,4,t,i)}function Wp(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Kp(t,i,a){a=a!=null?a.concat([t]):null,Zc(4,4,Wp.bind(null,i,t),a)}function Ud(){}function Xp(t,i){var a=ft();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Nd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Qp(t,i){var a=ft();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Nd(i,l[1]))return l[0];if(l=t(),Ms){Tn(!0);try{t()}finally{Tn(!1)}}return a.memoizedState=[l,i],l}function Gd(t,i,a){return a===void 0||(Bi&1073741824)!==0&&(Ce&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Y0(),Te.lanes|=t,Dr|=t,a)}function Yp(t,i,a,l){return mn(a,i)?a:Ia.current!==null?(t=Gd(t,a,l),mn(t,i)||(St=!0),t):(Bi&42)===0||(Bi&1073741824)!==0&&(Ce&261930)===0?(St=!0,t.memoizedState=a):(t=Y0(),Te.lanes|=t,Dr|=t,i)}function Zp(t,i,a,l,f){var m=se.p;se.p=m!==0&&8>m?m:8;var _=X.T,E={};X.T=E,qd(t,!1,i,a);try{var O=f(),G=X.S;if(G!==null&&G(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var K=zb(O,l);il(t,i,K,xn(t))}else il(t,i,l,xn(t))}catch(Y){il(t,i,{then:function(){},status:"rejected",reason:Y},xn())}finally{se.p=m,_!==null&&E.types!==null&&(_.types=E.types),X.T=_}}function Gb(){}function Hd(t,i,a,l){if(t.tag!==5)throw Error(r(476));var f=Jp(t).queue;Zp(t,f,i,ge,a===null?Gb:function(){return e0(t),a(l)})}function Jp(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function e0(t){var i=Jp(t);i.next===null&&(i=t.alternate.memoizedState),il(t,i.next.queue,{},xn())}function $d(){return Ft(xl)}function t0(){return ft().memoizedState}function n0(){return ft().memoizedState}function Hb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();t=Er(a);var l=Ar(i,t,a);l!==null&&(cn(l,i,a),Zo(l,i,a)),i={cache:xd()},t.payload=i;return}i=i.return}}function $b(t,i,a){var l=xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Jc(t)?r0(i,a):(a=cd(t,i,a,l),a!==null&&(cn(a,t,l),s0(a,i,l)))}function i0(t,i,a){var l=xn();il(t,i,a,l)}function il(t,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jc(t))r0(i,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,E=m(_,a);if(f.hasEagerState=!0,f.eagerState=E,mn(E,_))return Oc(t,i,f,0),Ye===null&&jc(),!1}catch{}finally{}if(a=cd(t,i,f,l),a!==null)return cn(a,t,l),s0(a,i,l),!0}return!1}function qd(t,i,a,l){if(l={lane:2,revertLane:Af(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jc(t)){if(i)throw Error(r(479))}else i=cd(t,a,l,2),i!==null&&cn(i,t,2)}function Jc(t){var i=t.alternate;return t===Te||i!==null&&i===Te}function r0(t,i){Da=qc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function s0(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ao(t,a)}}var rl={readContext:Ft,use:Xc,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};rl.useEffectEvent=ot;var a0={readContext:Ft,use:Xc,useCallback:function(t,i){return tn().memoizedState=[t,i===void 0?null:i],t},useContext:Ft,useEffect:Gp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Yc(4194308,4,Wp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Yc(4194308,4,t,i)},useInsertionEffect:function(t,i){Yc(4,2,t,i)},useMemo:function(t,i){var a=tn();i=i===void 0?null:i;var l=t();if(Ms){Tn(!0);try{t()}finally{Tn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=tn();if(a!==void 0){var f=a(i);if(Ms){Tn(!0);try{a(i)}finally{Tn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=$b.bind(null,Te,t),[l.memoizedState,t]},useRef:function(t){var i=tn();return t={current:t},i.memoizedState=t},useState:function(t){t=Ld(t);var i=t.queue,a=i0.bind(null,Te,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Ud,useDeferredValue:function(t,i){var a=tn();return Gd(a,t,i)},useTransition:function(){var t=Ld(!1);return t=Zp.bind(null,Te,t.queue,!0,!1),tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Te,f=tn();if(Pe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Ye===null)throw Error(r(349));(Ce&127)!==0||Rp(l,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,Gp(Ip.bind(null,l,m,t),[t]),l.flags|=2048,ja(9,{destroy:void 0},Cp.bind(null,l,m,a,i),null),a},useId:function(){var t=tn(),i=Ye.identifierPrefix;if(Pe){var a=yi,l=pi;a=(l&~(1<<32-ut(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Wc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Vb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:$d,useFormState:Vp,useActionState:Vp,useOptimistic:function(t){var i=tn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=qd.bind(null,Te,!0,a),a.dispatch=i,[t,i]},useMemoCache:Md,useCacheRefresh:function(){return tn().memoizedState=Hb.bind(null,Te)},useEffectEvent:function(t){var i=tn(),a={impl:t};return i.memoizedState=a,function(){if((Be&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Wd={readContext:Ft,use:Xc,useCallback:Xp,useContext:Ft,useEffect:Fd,useImperativeHandle:Kp,useInsertionEffect:$p,useLayoutEffect:qp,useMemo:Qp,useReducer:Qc,useRef:Up,useState:function(){return Qc(Fi)},useDebugValue:Ud,useDeferredValue:function(t,i){var a=ft();return Yp(a,Ke.memoizedState,t,i)},useTransition:function(){var t=Qc(Fi)[0],i=ft().memoizedState;return[typeof t=="boolean"?t:nl(t),i]},useSyncExternalStore:wp,useId:t0,useHostTransitionStatus:$d,useFormState:Lp,useActionState:Lp,useOptimistic:function(t,i){var a=ft();return jp(a,Ke,t,i)},useMemoCache:Md,useCacheRefresh:n0};Wd.useEffectEvent=Hp;var o0={readContext:Ft,use:Xc,useCallback:Xp,useContext:Ft,useEffect:Fd,useImperativeHandle:Kp,useInsertionEffect:$p,useLayoutEffect:qp,useMemo:Qp,useReducer:Vd,useRef:Up,useState:function(){return Vd(Fi)},useDebugValue:Ud,useDeferredValue:function(t,i){var a=ft();return Ke===null?Gd(a,t,i):Yp(a,Ke.memoizedState,t,i)},useTransition:function(){var t=Vd(Fi)[0],i=ft().memoizedState;return[typeof t=="boolean"?t:nl(t),i]},useSyncExternalStore:wp,useId:t0,useHostTransitionStatus:$d,useFormState:Fp,useActionState:Fp,useOptimistic:function(t,i){var a=ft();return Ke!==null?jp(a,Ke,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Md,useCacheRefresh:n0};o0.useEffectEvent=Hp;function Kd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Xd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=xn(),f=Er(l);f.payload=i,a!=null&&(f.callback=a),i=Ar(t,f,l),i!==null&&(cn(i,t,l),Zo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=xn(),f=Er(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ar(t,f,l),i!==null&&(cn(i,t,l),Zo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=xn(),l=Er(a);l.tag=2,i!=null&&(l.callback=i),i=Ar(t,l,a),i!==null&&(cn(i,t,a),Zo(i,t,a))}};function l0(t,i,a,l,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):i.prototype&&i.prototype.isPureReactComponent?!Ho(a,l)||!Ho(f,m):!0}function c0(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Xd.enqueueReplaceState(i,i.state,null)}function zs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function u0(t){Nc(t)}function h0(t){console.error(t)}function d0(t){Nc(t)}function eu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function f0(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qd(t,i,a){return a=Er(a),a.tag=3,a.payload={element:null},a.callback=function(){eu(t,i)},a}function m0(t){return t=Er(t),t.tag=3,t}function g0(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){f0(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){f0(i,a,l),typeof f!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function qb(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ea(i,a,f,!0),a=pn.current,a!==null){switch(a.tag){case 31:case 13:return jn===null?du():a.alternate===null&&lt===0&&(lt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Fc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Tf(t,l,f)),!1;case 22:return a.flags|=65536,l===Fc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Tf(t,l,f)),!1}throw Error(r(435,a.tag))}return Tf(t,l,f),du(),!1}if(Pe)return i=pn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==gd&&(t=Error(r(422),{cause:l}),Wo(Cn(t,a)))):(l!==gd&&(i=Error(r(423),{cause:l}),Wo(Cn(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Cn(l,a),f=Qd(t.stateNode,l,f),wd(t,f),lt!==4&&(lt=2)),!1;var m=Error(r(520),{cause:l});if(m=Cn(m,a),dl===null?dl=[m]:dl.push(m),lt!==4&&(lt=2),i===null)return!0;l=Cn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Qd(a.stateNode,l,t),wd(a,t),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Nr===null||!Nr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=m0(f),g0(f,t,a,l),wd(a,f),!1}a=a.return}while(a!==null);return!1}var Yd=Error(r(461)),St=!1;function Ut(t,i,a,l){i.child=t===null?_p(i,null,a,l):ks(i,t.child,a,l)}function p0(t,i,a,l,f){a=a.render;var m=i.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return Ns(i),l=jd(t,i,a,_,m,f),E=Od(),t!==null&&!St?(Pd(t,i,f),Ui(t,i,f)):(Pe&&E&&fd(i),i.flags|=1,Ut(t,i,l,f),i.child)}function y0(t,i,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!ud(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,v0(t,i,m,l,f)):(t=kc(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!af(t,f)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ho,a(_,l)&&t.ref===i.ref)return Ui(t,i,f)}return i.flags|=1,t=Mi(m,l),t.ref=i.ref,t.return=i,i.child=t}function v0(t,i,a,l,f){if(t!==null){var m=t.memoizedProps;if(Ho(m,l)&&t.ref===i.ref)if(St=!1,i.pendingProps=l=m,af(t,f))(t.flags&131072)!==0&&(St=!0);else return i.lanes=t.lanes,Ui(t,i,f)}return Zd(t,i,a,l,f)}function _0(t,i,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,i.child=null;return x0(t,i,m,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Lc(i,m!==null?m.cachePool:null),m!==null?Tp(i,m):Cd(),Sp(i);else return l=i.lanes=536870912,x0(t,i,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Lc(i,m.cachePool),Tp(i,m),Rr(),i.memoizedState=null):(t!==null&&Lc(i,null),Cd(),Rr());return Ut(t,i,f,a),i.child}function sl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function x0(t,i,a,l,f){var m=Td();return m=m===null?null:{parent:bt._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},t!==null&&Lc(i,null),Cd(),Sp(i),t!==null&&Ea(t,i,l,!0),i.childLanes=f,null}function tu(t,i){return i=iu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function b0(t,i,a){return ks(i,t.child,null,a),t=tu(i,i.pendingProps),t.flags|=2,yn(i),i.memoizedState=null,t}function Wb(t,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Pe){if(l.mode==="hidden")return t=tu(i,l),i.lanes=536870912,sl(null,t);if(Dd(i),(t=et)?(t=Oy(t,Nn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:_r!==null?{id:pi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},a=rp(t),a.return=i,i.child=a,Bt=i,et=null)):t=null,t===null)throw br(i);return i.lanes=536870912,null}return tu(i,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Dd(i),f)if(i.flags&256)i.flags&=-257,i=b0(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(St||Ea(t,i,a,!1),f=(a&t.childLanes)!==0,St||f){if(l=Ye,l!==null&&(_=wo(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Rs(t,_),cn(l,t,_),Yd;du(),i=b0(t,i,a)}else t=m.treeContext,et=On(_.nextSibling),Bt=i,Pe=!0,xr=null,Nn=!1,t!==null&&op(i,t),i=tu(i,l),i.flags|=4096;return i}return t=Mi(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function nu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Zd(t,i,a,l,f){return Ns(i),a=jd(t,i,a,l,void 0,f),l=Od(),t!==null&&!St?(Pd(t,i,f),Ui(t,i,f)):(Pe&&l&&fd(i),i.flags|=1,Ut(t,i,a,f),i.child)}function T0(t,i,a,l,f,m){return Ns(i),i.updateQueue=null,a=Ap(i,l,a,f),Ep(t),l=Od(),t!==null&&!St?(Pd(t,i,m),Ui(t,i,m)):(Pe&&l&&fd(i),i.flags|=1,Ut(t,i,a,m),i.child)}function S0(t,i,a,l,f){if(Ns(i),i.stateNode===null){var m=xa,_=a.contextType;typeof _=="object"&&_!==null&&(m=Ft(_)),m=new a(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Xd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},Ed(i),_=a.contextType,m.context=typeof _=="object"&&_!==null?Ft(_):xa,m.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Kd(i,a,_,l),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Xd.enqueueReplaceState(m,m.state,null),el(i,l,m,f),Jo(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){m=i.stateNode;var E=i.memoizedProps,O=zs(a,E);m.props=O;var G=m.context,K=a.contextType;_=xa,typeof K=="object"&&K!==null&&(_=Ft(K));var Y=a.getDerivedStateFromProps;K=typeof Y=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,K||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||G!==_)&&c0(i,m,l,_),Sr=!1;var H=i.memoizedState;m.state=H,el(i,l,m,f),Jo(),G=i.memoizedState,E||H!==G||Sr?(typeof Y=="function"&&(Kd(i,a,Y,l),G=i.memoizedState),(O=Sr||l0(i,a,O,l,H,G,_))?(K||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),m.props=l,m.state=G,m.context=_,l=O):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,Ad(t,i),_=i.memoizedProps,K=zs(a,_),m.props=K,Y=i.pendingProps,H=m.context,G=a.contextType,O=xa,typeof G=="object"&&G!==null&&(O=Ft(G)),E=a.getDerivedStateFromProps,(G=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==Y||H!==O)&&c0(i,m,l,O),Sr=!1,H=i.memoizedState,m.state=H,el(i,l,m,f),Jo();var W=i.memoizedState;_!==Y||H!==W||Sr||t!==null&&t.dependencies!==null&&zc(t.dependencies)?(typeof E=="function"&&(Kd(i,a,E,l),W=i.memoizedState),(K=Sr||l0(i,a,K,l,H,W,O)||t!==null&&t.dependencies!==null&&zc(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,W,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,W,O)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=W),m.props=l,m.state=W,m.context=O,l=K):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return m=l,nu(t,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&l?(i.child=ks(i,t.child,null,f),i.child=ks(i,null,a,f)):Ut(t,i,a,f),i.memoizedState=m.state,t=i.child):t=Ui(t,i,f),t}function E0(t,i,a,l){return Is(),i.flags|=256,Ut(t,i,a,l),i.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ef(t){return{baseLanes:t,cachePool:fp()}}function tf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=_n),t}function A0(t,i,a){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(dt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Pe){if(f?wr(i):Rr(),(t=et)?(t=Oy(t,Nn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:_r!==null?{id:pi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},a=rp(t),a.return=i,i.child=a,Bt=i,et=null)):t=null,t===null)throw br(i);return Vf(t)?i.lanes=32:i.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(Rr(),f=i.mode,E=iu({mode:"hidden",children:E},f),l=Cs(l,f,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,l=i.child,l.memoizedState=ef(a),l.childLanes=tf(t,_,a),i.memoizedState=Jd,sl(null,l)):(wr(i),nf(i,E))}var O=t.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(m)i.flags&256?(wr(i),i.flags&=-257,i=rf(t,i,a)):i.memoizedState!==null?(Rr(),i.child=t.child,i.flags|=128,i=null):(Rr(),E=l.fallback,f=i.mode,l=iu({mode:"visible",children:l.children},f),E=Cs(E,f,a,null),E.flags|=2,l.return=i,E.return=i,l.sibling=E,i.child=l,ks(i,t.child,null,a),l=i.child,l.memoizedState=ef(a),l.childLanes=tf(t,_,a),i.memoizedState=Jd,i=sl(null,l));else if(wr(i),Vf(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var G=_.dgst;_=G,l=Error(r(419)),l.stack="",l.digest=_,Wo({value:l,source:null,stack:null}),i=rf(t,i,a)}else if(St||Ea(t,i,a,!1),_=(a&t.childLanes)!==0,St||_){if(_=Ye,_!==null&&(l=wo(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Rs(t,l),cn(_,t,l),Yd;zf(E)||du(),i=rf(t,i,a)}else zf(E)?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,et=On(E.nextSibling),Bt=i,Pe=!0,xr=null,Nn=!1,t!==null&&op(i,t),i=nf(i,l.children),i.flags|=4096);return i}return f?(Rr(),E=l.fallback,f=i.mode,O=t.child,G=O.sibling,l=Mi(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,G!==null?E=Mi(G,E):(E=Cs(E,f,a,null),E.flags|=2),E.return=i,l.return=i,l.sibling=E,i.child=l,sl(null,l),l=i.child,E=t.child.memoizedState,E===null?E=ef(a):(f=E.cachePool,f!==null?(O=bt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=fp(),E={baseLanes:E.baseLanes|a,cachePool:f}),l.memoizedState=E,l.childLanes=tf(t,_,a),i.memoizedState=Jd,sl(t.child,l)):(wr(i),a=t.child,t=a.sibling,a=Mi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function nf(t,i){return i=iu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function iu(t,i){return t=gn(22,t,null,i),t.lanes=0,t}function rf(t,i,a){return ks(i,t.child,null,a),t=nf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function w0(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),vd(t.return,i,a)}function sf(t,i,a,l,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=m)}function R0(t,i,a){var l=i.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var _=dt.current,E=(_&2)!==0;if(E?(_=_&1|2,i.flags|=128):_&=1,Re(dt,_),Ut(t,i,l,a),l=Pe?qo:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w0(t,a,i);else if(t.tag===19)w0(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&$c(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),sf(i,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&$c(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}sf(i,!0,a,null,m,l);break;case"together":sf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Ui(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Dr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ea(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Mi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Mi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function af(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&zc(t)))}function Kb(t,i,a){switch(i.tag){case 3:or(i,i.stateNode.containerInfo),Tr(i,bt,t.memoizedState.cache),Is();break;case 27:case 5:_o(i);break;case 4:or(i,i.stateNode.containerInfo);break;case 10:Tr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Dd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(wr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?A0(t,i,a):(wr(i),t=Ui(t,i,a),t!==null?t.sibling:null);wr(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ea(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return R0(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Re(dt,dt.current),l)break;return null;case 22:return i.lanes=0,_0(t,i,a,i.pendingProps);case 24:Tr(i,bt,t.memoizedState.cache)}return Ui(t,i,a)}function C0(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)St=!0;else{if(!af(t,a)&&(i.flags&128)===0)return St=!1,Kb(t,i,a);St=(t.flags&131072)!==0}else St=!1,Pe&&(i.flags&1048576)!==0&&ap(i,qo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Os(i.elementType),i.type=t,typeof t=="function")ud(t)?(l=zs(t,l),i.tag=1,i=S0(null,i,t,l,a)):(i.tag=0,i=Zd(null,i,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===ne){i.tag=11,i=p0(null,i,t,l,a);break e}else if(f===I){i.tag=14,i=y0(null,i,t,l,a);break e}}throw i=Fe(t)||t,Error(r(306,i,""))}}return i;case 0:return Zd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=zs(l,i.pendingProps),S0(t,i,l,f,a);case 3:e:{if(or(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var m=i.memoizedState;f=m.element,Ad(t,i),el(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Tr(i,bt,l),l!==m.cache&&_d(i,[bt],a,!0),Jo(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=E0(t,i,l,a);break e}else if(l!==f){f=Cn(Error(r(424)),i),Wo(f),i=E0(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(et=On(t.firstChild),Bt=i,Pe=!0,xr=null,Nn=!0,a=_p(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Is(),l===f){i=Ui(t,i,a);break e}Ut(t,i,l,a)}i=i.child}return i;case 26:return nu(t,i),t===null?(a=Ly(i.type,null,i.pendingProps,null))?i.memoizedState=a:Pe||(a=i.type,t=i.pendingProps,l=_u(Zt.current).createElement(a),l[vt]=i,l[Ot]=t,Gt(l,a,t),_t(l),i.stateNode=l):i.memoizedState=Ly(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return _o(i),t===null&&Pe&&(l=i.stateNode=My(i.type,i.pendingProps,Zt.current),Bt=i,Nn=!0,f=et,kr(i.type)?(Lf=f,et=On(l.firstChild)):et=f),Ut(t,i,i.pendingProps.children,a),nu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Pe&&((f=l=et)&&(l=ET(l,i.type,i.pendingProps,Nn),l!==null?(i.stateNode=l,Bt=i,et=On(l.firstChild),Nn=!1,f=!0):f=!1),f||br(i)),_o(i),f=i.type,m=i.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Pf(f,m)?l=null:_!==null&&Pf(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=jd(t,i,Lb,null,null,a),xl._currentValue=f),nu(t,i),Ut(t,i,l,a),i.child;case 6:return t===null&&Pe&&((t=a=et)&&(a=AT(a,i.pendingProps,Nn),a!==null?(i.stateNode=a,Bt=i,et=null,t=!0):t=!1),t||br(i)),null;case 13:return A0(t,i,a);case 4:return or(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=ks(i,null,l,a):Ut(t,i,l,a),i.child;case 11:return p0(t,i,i.type,i.pendingProps,a);case 7:return Ut(t,i,i.pendingProps,a),i.child;case 8:return Ut(t,i,i.pendingProps.children,a),i.child;case 12:return Ut(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Tr(i,i.type,l.value),Ut(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ns(i),f=Ft(f),l=l(f),i.flags|=1,Ut(t,i,l,a),i.child;case 14:return y0(t,i,i.type,i.pendingProps,a);case 15:return v0(t,i,i.type,i.pendingProps,a);case 19:return R0(t,i,a);case 31:return Wb(t,i,a);case 22:return _0(t,i,a,i.pendingProps);case 24:return Ns(i),l=Ft(bt),t===null?(f=Td(),f===null&&(f=Ye,m=xd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:l,cache:f},Ed(i),Tr(i,bt,f)):((t.lanes&a)!==0&&(Ad(t,i),el(i,null,null,a),Jo()),f=t.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Tr(i,bt,l)):(l=m.cache,Tr(i,bt,l),l!==f.cache&&_d(i,[bt],a,!0))),Ut(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Gi(t){t.flags|=4}function of(t,i,a,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(ty())t.flags|=8192;else throw Ps=Fc,Sd}else t.flags&=-16777217}function I0(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Hy(i))if(ty())t.flags|=8192;else throw Ps=Fc,Sd}function ru(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?uc():536870912,t.lanes|=i,Ma|=i)}function al(t,i){if(!Pe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function tt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function Xb(t,i,a){var l=i.pendingProps;switch(md(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(i),null;case 1:return tt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Li(bt),Ni(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Sa(i)?Gi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pd())),tt(i),null;case 26:var f=i.type,m=i.memoizedState;return t===null?(Gi(i),m!==null?(tt(i),I0(i,m)):(tt(i),of(i,f,null,l,a))):m?m!==t.memoizedState?(Gi(i),tt(i),I0(i,m)):(tt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Gi(i),tt(i),of(i,f,t,l,a)),null;case 27:if(ta(i),a=Zt.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return tt(i),null}t=Je.current,Sa(i)?lp(i):(t=My(f,l,a),i.stateNode=t,Gi(i))}return tt(i),null;case 5:if(ta(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return tt(i),null}if(m=Je.current,Sa(i))lp(i);else{var _=_u(Zt.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}m[vt]=i,m[Ot]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(Gt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Gi(i)}}return tt(i),of(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Zt.current,Sa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=Bt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[vt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Ay(t.nodeValue,a)),t||br(i,!0)}else t=_u(t).createTextNode(l),t[vt]=i,i.stateNode=t}return tt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Sa(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[vt]=i}else Is(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tt(i),t=!1}else a=pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(yn(i),i):(yn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return tt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Sa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[vt]=i}else Is(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tt(i),f=!1}else f=pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(yn(i),i):(yn(i),null)}return yn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),ru(i,i.updateQueue),tt(i),null);case 4:return Ni(),t===null&&If(i.stateNode.containerInfo),tt(i),null;case 10:return Li(i.type),tt(i),null;case 19:if(Ge(dt),l=i.memoizedState,l===null)return tt(i),null;if(f=(i.flags&128)!==0,m=l.rendering,m===null)if(f)al(l,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=$c(t),m!==null){for(i.flags|=128,al(l,!1),t=m.updateQueue,i.updateQueue=t,ru(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ip(a,t),a=a.sibling;return Re(dt,dt.current&1|2),Pe&&zi(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Jt()>cu&&(i.flags|=128,f=!0,al(l,!1),i.lanes=4194304)}else{if(!f)if(t=$c(m),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,ru(i,t),al(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Pe)return tt(i),null}else 2*Jt()-l.renderingStartTime>cu&&a!==536870912&&(i.flags|=128,f=!0,al(l,!1),i.lanes=4194304);l.isBackwards?(m.sibling=i.child,i.child=m):(t=l.last,t!==null?t.sibling=m:i.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Jt(),t.sibling=null,a=dt.current,Re(dt,f?a&1|2:a&1),Pe&&zi(i,l.treeForkCount),t):(tt(i),null);case 22:case 23:return yn(i),Id(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(tt(i),i.subtreeFlags&6&&(i.flags|=8192)):tt(i),a=i.updateQueue,a!==null&&ru(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&Ge(js),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Li(bt),tt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Qb(t,i){switch(md(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Li(bt),Ni(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ta(i),null;case 31:if(i.memoizedState!==null){if(yn(i),i.alternate===null)throw Error(r(340));Is()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(yn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Is()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Ge(dt),null;case 4:return Ni(),null;case 10:return Li(i.type),null;case 22:case 23:return yn(i),Id(),t!==null&&Ge(js),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Li(bt),null;case 25:return null;default:return null}}function D0(t,i){switch(md(i),i.tag){case 3:Li(bt),Ni();break;case 26:case 27:case 5:ta(i);break;case 4:Ni();break;case 31:i.memoizedState!==null&&yn(i);break;case 13:yn(i);break;case 19:Ge(dt);break;case 10:Li(i.type);break;case 22:case 23:yn(i),Id(),t!==null&&Ge(js);break;case 24:Li(bt)}}function ol(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==f)}}catch(E){qe(i,i.return,E)}}function Cr(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,f=i;var O=a,G=E;try{G()}catch(K){qe(f,O,K)}}}l=l.next}while(l!==m)}}catch(K){qe(i,i.return,K)}}function N0(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{bp(i,a)}catch(l){qe(t,t.return,l)}}}function j0(t,i,a){a.props=zs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){qe(t,i,l)}}function ll(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){qe(t,i,f)}}function vi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){qe(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){qe(t,i,f)}else a.current=null}function O0(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){qe(t,t.return,f)}}function lf(t,i,a){try{var l=t.stateNode;vT(l,t.type,a,i),l[Ot]=i}catch(f){qe(t,t.return,f)}}function P0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&kr(t.type)||t.tag===4}function cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||P0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&kr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Bn));else if(l!==4&&(l===27&&kr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(uf(t,i,a),t=t.sibling;t!==null;)uf(t,i,a),t=t.sibling}function su(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&kr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(su(t,i,a),t=t.sibling;t!==null;)su(t,i,a),t=t.sibling}function k0(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Gt(i,l,a),i[vt]=t,i[Ot]=a}catch(m){qe(t,t.return,m)}}var Hi=!1,Et=!1,hf=!1,M0=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Yb(t,i){if(t=t.containerInfo,jf=wu,t=Kg(t),id(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,E=-1,O=-1,G=0,K=0,Y=t,H=null;t:for(;;){for(var W;Y!==a||f!==0&&Y.nodeType!==3||(E=_+f),Y!==m||l!==0&&Y.nodeType!==3||(O=_+l),Y.nodeType===3&&(_+=Y.nodeValue.length),(W=Y.firstChild)!==null;)H=Y,Y=W;for(;;){if(Y===t)break t;if(H===a&&++G===f&&(E=_),H===m&&++K===l&&(O=_),(W=Y.nextSibling)!==null)break;Y=H,H=Y.parentNode}Y=W}a=E===-1||O===-1?null:{start:E,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Of={focusedElem:t,selectionRange:a},wu=!1,kt=i;kt!==null;)if(i=kt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,kt=t;else for(;kt!==null;){switch(i=kt,m=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var le=zs(a.type,f);t=l.getSnapshotBeforeUpdate(le,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(pe){qe(a,a.return,pe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Mf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Mf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,kt=t;break}kt=i.return}}function z0(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:qi(t,a),l&4&&ol(5,a);break;case 1:if(qi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){qe(a,a.return,_)}else{var f=zs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){qe(a,a.return,_)}}l&64&&N0(a),l&512&&ll(a,a.return);break;case 3:if(qi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{bp(t,i)}catch(_){qe(a,a.return,_)}}break;case 27:i===null&&l&4&&k0(a);case 26:case 5:qi(t,a),i===null&&l&4&&O0(a),l&512&&ll(a,a.return);break;case 12:qi(t,a);break;case 31:qi(t,a),l&4&&B0(t,a);break;case 13:qi(t,a),l&4&&F0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=aT.bind(null,a),wT(t,a))));break;case 22:if(l=a.memoizedState!==null||Hi,!l){i=i!==null&&i.memoizedState!==null||Et,f=Hi;var m=Et;Hi=l,(Et=i)&&!m?Wi(t,a,(a.subtreeFlags&8772)!==0):qi(t,a),Hi=f,Et=m}break;case 30:break;default:qi(t,a)}}function V0(t){var i=t.alternate;i!==null&&(t.alternate=null,V0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&aa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,sn=!1;function $i(t,i,a){for(a=a.child;a!==null;)L0(t,i,a),a=a.sibling}function L0(t,i,a){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(Mn,a)}catch{}switch(a.tag){case 26:Et||vi(a,i),$i(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Et||vi(a,i);var l=st,f=sn;kr(a.type)&&(st=a.stateNode,sn=!1),$i(t,i,a),yl(a.stateNode),st=l,sn=f;break;case 5:Et||vi(a,i);case 6:if(l=st,f=sn,st=null,$i(t,i,a),st=l,sn=f,st!==null)if(sn)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(m){qe(a,i,m)}else try{st.removeChild(a.stateNode)}catch(m){qe(a,i,m)}break;case 18:st!==null&&(sn?(t=st,Ny(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ha(t)):Ny(st,a.stateNode));break;case 4:l=st,f=sn,st=a.stateNode.containerInfo,sn=!0,$i(t,i,a),st=l,sn=f;break;case 0:case 11:case 14:case 15:Cr(2,a,i),Et||Cr(4,a,i),$i(t,i,a);break;case 1:Et||(vi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&j0(a,i,l)),$i(t,i,a);break;case 21:$i(t,i,a);break;case 22:Et=(l=Et)||a.memoizedState!==null,$i(t,i,a),Et=l;break;default:$i(t,i,a)}}function B0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ha(t)}catch(a){qe(i,i.return,a)}}}function F0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ha(t)}catch(a){qe(i,i.return,a)}}function Zb(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new M0),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new M0),i;default:throw Error(r(435,t.tag))}}function au(t,i){var a=Zb(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=oT.bind(null,t,l);l.then(f,f)}})}function an(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,_=i,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(kr(E.type)){st=E.stateNode,sn=!1;break e}break;case 5:st=E.stateNode,sn=!1;break e;case 3:case 4:st=E.stateNode.containerInfo,sn=!0;break e}E=E.return}if(st===null)throw Error(r(160));L0(m,_,f),st=null,sn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)U0(i,t),i=i.sibling}var qn=null;function U0(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:an(i,t),on(t),l&4&&(Cr(3,t,t.return),ol(3,t),Cr(5,t,t.return));break;case 1:an(i,t),on(t),l&512&&(Et||a===null||vi(a,a.return)),l&64&&Hi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=qn;if(an(i,t),on(t),l&512&&(Et||a===null||vi(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ri]||m[vt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Gt(m,l,a),m[vt]=t,_t(m),l=m;break e;case"link":var _=Uy("link","href",f).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}m=f.createElement(l),Gt(m,l,a),f.head.appendChild(m);break;case"meta":if(_=Uy("meta","content",f).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}m=f.createElement(l),Gt(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[vt]=t,_t(m),l=m}t.stateNode=l}else Gy(f,t.type,t.stateNode);else t.stateNode=Fy(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Gy(f,t.type,t.stateNode):Fy(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&lf(t,t.memoizedProps,a.memoizedProps)}break;case 27:an(i,t),on(t),l&512&&(Et||a===null||vi(a,a.return)),a!==null&&l&4&&lf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(an(i,t),on(t),l&512&&(Et||a===null||vi(a,a.return)),t.flags&32){f=t.stateNode;try{rn(f,"")}catch(le){qe(t,t.return,le)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,lf(t,f,a!==null?a.memoizedProps:f)),l&1024&&(hf=!0);break;case 6:if(an(i,t),on(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(le){qe(t,t.return,le)}}break;case 3:if(Tu=null,f=qn,qn=xu(i.containerInfo),an(i,t),qn=f,on(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ha(i.containerInfo)}catch(le){qe(t,t.return,le)}hf&&(hf=!1,G0(t));break;case 4:l=qn,qn=xu(t.stateNode.containerInfo),an(i,t),on(t),qn=l;break;case 12:an(i,t),on(t);break;case 31:an(i,t),on(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,au(t,l)));break;case 13:an(i,t),on(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lu=Jt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,au(t,l)));break;case 22:f=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,G=Hi,K=Et;if(Hi=G||f,Et=K||O,an(i,t),Et=K,Hi=G,on(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||O||Hi||Et||Vs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(m=O.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=O.stateNode;var Y=O.memoizedProps.style,H=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(le){qe(O,O.return,le)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(le){qe(O,O.return,le)}}}else if(i.tag===18){if(a===null){O=i;try{var W=O.stateNode;f?jy(W,!0):jy(O.stateNode,!1)}catch(le){qe(O,O.return,le)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,au(t,a))));break;case 19:an(i,t),on(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,au(t,l)));break;case 30:break;case 21:break;default:an(i,t),on(t)}}function on(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(P0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=cf(t);su(t,m,f);break;case 5:var _=a.stateNode;a.flags&32&&(rn(_,""),a.flags&=-33);var E=cf(t);su(t,E,_);break;case 3:case 4:var O=a.stateNode.containerInfo,G=cf(t);uf(t,G,O);break;default:throw Error(r(161))}}catch(K){qe(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function G0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;G0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function qi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)z0(t,i.alternate,i),i=i.sibling}function Vs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Cr(4,i,i.return),Vs(i);break;case 1:vi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&j0(i,i.return,a),Vs(i);break;case 27:yl(i.stateNode);case 26:case 5:vi(i,i.return),Vs(i);break;case 22:i.memoizedState===null&&Vs(i);break;case 30:Vs(i);break;default:Vs(i)}t=t.sibling}}function Wi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:Wi(f,m,a),ol(4,m);break;case 1:if(Wi(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){qe(l,l.return,G)}if(l=m,f=l.updateQueue,f!==null){var E=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)xp(O[f],E)}catch(G){qe(l,l.return,G)}}a&&_&64&&N0(m),ll(m,m.return);break;case 27:k0(m);case 26:case 5:Wi(f,m,a),a&&l===null&&_&4&&O0(m),ll(m,m.return);break;case 12:Wi(f,m,a);break;case 31:Wi(f,m,a),a&&_&4&&B0(f,m);break;case 13:Wi(f,m,a),a&&_&4&&F0(f,m);break;case 22:m.memoizedState===null&&Wi(f,m,a),ll(m,m.return);break;case 30:break;default:Wi(f,m,a)}i=i.sibling}}function df(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ko(a))}function ff(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ko(t))}function Wn(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)H0(t,i,a,l),i=i.sibling}function H0(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Wn(t,i,a,l),f&2048&&ol(9,i);break;case 1:Wn(t,i,a,l);break;case 3:Wn(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ko(t)));break;case 12:if(f&2048){Wn(t,i,a,l),t=i.stateNode;try{var m=i.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){qe(i,i.return,O)}}else Wn(t,i,a,l);break;case 31:Wn(t,i,a,l);break;case 13:Wn(t,i,a,l);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?Wn(t,i,a,l):cl(t,i):m._visibility&2?Wn(t,i,a,l):(m._visibility|=2,Oa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&df(_,i);break;case 24:Wn(t,i,a,l),f&2048&&ff(i.alternate,i);break;default:Wn(t,i,a,l)}}function Oa(t,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=t,_=i,E=a,O=l,G=_.flags;switch(_.tag){case 0:case 11:case 15:Oa(m,_,E,O,f),ol(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?Oa(m,_,E,O,f):cl(m,_):(K._visibility|=2,Oa(m,_,E,O,f)),f&&G&2048&&df(_.alternate,_);break;case 24:Oa(m,_,E,O,f),f&&G&2048&&ff(_.alternate,_);break;default:Oa(m,_,E,O,f)}i=i.sibling}}function cl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:cl(a,l),f&2048&&df(l.alternate,l);break;case 24:cl(a,l),f&2048&&ff(l.alternate,l);break;default:cl(a,l)}i=i.sibling}}var ul=8192;function Pa(t,i,a){if(t.subtreeFlags&ul)for(t=t.child;t!==null;)$0(t,i,a),t=t.sibling}function $0(t,i,a){switch(t.tag){case 26:Pa(t,i,a),t.flags&ul&&t.memoizedState!==null&&VT(a,qn,t.memoizedState,t.memoizedProps);break;case 5:Pa(t,i,a);break;case 3:case 4:var l=qn;qn=xu(t.stateNode.containerInfo),Pa(t,i,a),qn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ul,ul=16777216,Pa(t,i,a),ul=l):Pa(t,i,a));break;default:Pa(t,i,a)}}function q0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function hl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,K0(l,t)}q0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)W0(t),t=t.sibling}function W0(t){switch(t.tag){case 0:case 11:case 15:hl(t),t.flags&2048&&Cr(9,t,t.return);break;case 3:hl(t);break;case 12:hl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,ou(t)):hl(t);break;default:hl(t)}}function ou(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,K0(l,t)}q0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Cr(8,i,i.return),ou(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ou(i));break;default:ou(i)}t=t.sibling}}function K0(t,i){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:Cr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ko(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,kt=l;else e:for(a=t;kt!==null;){l=kt;var f=l.sibling,m=l.return;if(V0(l),l===a){kt=null;break e}if(f!==null){f.return=m,kt=f;break e}kt=m}}}var Jb={getCacheForType:function(t){var i=Ft(bt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Ft(bt).controller.signal}},eT=typeof WeakMap=="function"?WeakMap:Map,Be=0,Ye=null,Ee=null,Ce=0,$e=0,vn=null,Ir=!1,ka=!1,mf=!1,Ki=0,lt=0,Dr=0,Ls=0,gf=0,_n=0,Ma=0,dl=null,ln=null,pf=!1,lu=0,X0=0,cu=1/0,uu=null,Nr=null,Dt=0,jr=null,za=null,Xi=0,yf=0,vf=null,Q0=null,fl=0,_f=null;function xn(){return(Be&2)!==0&&Ce!==0?Ce&-Ce:X.T!==null?Af():hc()}function Y0(){if(_n===0)if((Ce&536870912)===0||Pe){var t=ds;ds<<=1,(ds&3932160)===0&&(ds=262144),_n=t}else _n=536870912;return t=pn.current,t!==null&&(t.flags|=32),_n}function cn(t,i,a){(t===Ye&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(Va(t,0),Or(t,Ce,_n,!1)),fs(t,a),((Be&2)===0||t!==Ye)&&(t===Ye&&((Be&2)===0&&(Ls|=a),lt===4&&Or(t,Ce,_n,!1)),_i(t))}function Z0(t,i,a){if((Be&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||zn(t,i),f=l?iT(t,i):bf(t,i,!0),m=l;do{if(f===0){ka&&!l&&Or(t,i,0,!1);break}else{if(a=t.current.alternate,m&&!tT(a)){f=bf(t,i,!1),m=!1;continue}if(f===2){if(m=i,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var E=t;f=dl;var O=E.current.memoizedState.isDehydrated;if(O&&(Va(E,_).flags|=256),_=bf(E,_,!1),_!==2){if(mf&&!O){E.errorRecoveryDisabledLanes|=m,Ls|=m,f=4;break e}m=ln,ln=f,m!==null&&(ln===null?ln=m:ln.push.apply(ln,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){Va(t,0),Or(t,i,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Or(l,i,_n,!Ir);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=lu+300-Jt(),10<f)){if(Or(l,i,_n,!Ir),ti(l,0,!0)!==0)break e;Xi=i,l.timeoutHandle=Iy(J0.bind(null,l,a,ln,uu,pf,i,_n,Ls,Ma,Ir,m,"Throttled",-0,0),f);break e}J0(l,a,ln,uu,pf,i,_n,Ls,Ma,Ir,m,null,-0,0)}}break}while(!0);_i(t)}function J0(t,i,a,l,f,m,_,E,O,G,K,Y,H,W){if(t.timeoutHandle=-1,Y=i.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},$0(i,m,Y);var le=(m&62914560)===m?lu-Jt():(m&4194048)===m?X0-Jt():0;if(le=LT(Y,le),le!==null){Xi=m,t.cancelPendingCommit=le(oy.bind(null,t,i,m,a,l,f,_,E,O,K,Y,null,H,W)),Or(t,m,_,!G);return}}oy(t,i,m,a,l,f,_,E,O)}function tT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!mn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Or(t,i,a,l){i&=~gf,i&=~Ls,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var m=31-ut(f),_=1<<m;l[m]=-1,f&=~_}a!==0&&ms(t,a,i)}function hu(){return(Be&6)===0?(ml(0),!1):!0}function xf(){if(Ee!==null){if($e===0)var t=Ee.return;else t=Ee,Vi=Ds=null,kd(t),Ca=null,Qo=0,t=Ee;for(;t!==null;)D0(t.alternate,t),t=t.return;Ee=null}}function Va(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,bT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Xi=0,xf(),Ye=t,Ee=a=Mi(t.current,null),Ce=i,$e=0,vn=null,Ir=!1,ka=zn(t,i),mf=!1,Ma=_n=gf=Ls=Dr=lt=0,ln=dl=null,pf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-ut(l),m=1<<f;i|=t[f],l&=~m}return Ki=i,jc(),a}function ey(t,i){Te=null,X.H=rl,i===Ra||i===Bc?(i=pp(),$e=3):i===Sd?(i=pp(),$e=4):$e=i===Yd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,Ee===null&&(lt=1,eu(t,Cn(i,t.current)))}function ty(){var t=pn.current;return t===null?!0:(Ce&4194048)===Ce?jn===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?t===jn:!1}function ny(){var t=X.H;return X.H=rl,t===null?rl:t}function iy(){var t=X.A;return X.A=Jb,t}function du(){lt=4,Ir||(Ce&4194048)!==Ce&&pn.current!==null||(ka=!0),(Dr&134217727)===0&&(Ls&134217727)===0||Ye===null||Or(Ye,Ce,_n,!1)}function bf(t,i,a){var l=Be;Be|=2;var f=ny(),m=iy();(Ye!==t||Ce!==i)&&(uu=null,Va(t,i)),i=!1;var _=lt;e:do try{if($e!==0&&Ee!==null){var E=Ee,O=vn;switch($e){case 8:xf(),_=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(i=!0);var G=$e;if($e=0,vn=null,La(t,E,O,G),a&&ka){_=0;break e}break;default:G=$e,$e=0,vn=null,La(t,E,O,G)}}nT(),_=lt;break}catch(K){ey(t,K)}while(!0);return i&&t.shellSuspendCounter++,Vi=Ds=null,Be=l,X.H=f,X.A=m,Ee===null&&(Ye=null,Ce=0,jc()),_}function nT(){for(;Ee!==null;)ry(Ee)}function iT(t,i){var a=Be;Be|=2;var l=ny(),f=iy();Ye!==t||Ce!==i?(uu=null,cu=Jt()+500,Va(t,i)):ka=zn(t,i);e:do try{if($e!==0&&Ee!==null){i=Ee;var m=vn;t:switch($e){case 1:$e=0,vn=null,La(t,i,m,1);break;case 2:case 9:if(mp(m)){$e=0,vn=null,sy(i);break}i=function(){$e!==2&&$e!==9||Ye!==t||($e=7),_i(t)},m.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:mp(m)?($e=0,vn=null,sy(i)):($e=0,vn=null,La(t,i,m,7));break;case 5:var _=null;switch(Ee.tag){case 26:_=Ee.memoizedState;case 5:case 27:var E=Ee;if(_?Hy(_):E.stateNode.complete){$e=0,vn=null;var O=E.sibling;if(O!==null)Ee=O;else{var G=E.return;G!==null?(Ee=G,fu(G)):Ee=null}break t}}$e=0,vn=null,La(t,i,m,5);break;case 6:$e=0,vn=null,La(t,i,m,6);break;case 8:xf(),lt=6;break e;default:throw Error(r(462))}}rT();break}catch(K){ey(t,K)}while(!0);return Vi=Ds=null,X.H=l,X.A=f,Be=a,Ee!==null?0:(Ye=null,Ce=0,jc(),lt)}function rT(){for(;Ee!==null&&!Qh();)ry(Ee)}function ry(t){var i=C0(t.alternate,t,Ki);t.memoizedProps=t.pendingProps,i===null?fu(t):Ee=i}function sy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=T0(a,i,i.pendingProps,i.type,void 0,Ce);break;case 11:i=T0(a,i,i.pendingProps,i.type.render,i.ref,Ce);break;case 5:kd(i);default:D0(a,i),i=Ee=ip(i,Ki),i=C0(a,i,Ki)}t.memoizedProps=t.pendingProps,i===null?fu(t):Ee=i}function La(t,i,a,l){Vi=Ds=null,kd(i),Ca=null,Qo=0;var f=i.return;try{if(qb(t,f,i,a,Ce)){lt=1,eu(t,Cn(a,t.current)),Ee=null;return}}catch(m){if(f!==null)throw Ee=f,m;lt=1,eu(t,Cn(a,t.current)),Ee=null;return}i.flags&32768?(Pe||l===1?t=!0:ka||(Ce&536870912)!==0?t=!1:(Ir=t=!0,(l===2||l===9||l===3||l===6)&&(l=pn.current,l!==null&&l.tag===13&&(l.flags|=16384))),ay(i,t)):fu(i)}function fu(t){var i=t;do{if((i.flags&32768)!==0){ay(i,Ir);return}t=i.return;var a=Xb(i.alternate,i,Ki);if(a!==null){Ee=a;return}if(i=i.sibling,i!==null){Ee=i;return}Ee=i=t}while(i!==null);lt===0&&(lt=5)}function ay(t,i){do{var a=Qb(t.alternate,t);if(a!==null){a.flags&=32767,Ee=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ee=t;return}Ee=t=a}while(t!==null);lt=6,Ee=null}function oy(t,i,a,l,f,m,_,E,O){t.cancelPendingCommit=null;do mu();while(Dt!==0);if((Be&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=ld,Jh(t,a,m,_,E,O),t===Ye&&(Ee=Ye=null,Ce=0),za=i,jr=t,Xi=a,yf=m,vf=f,Q0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,lT(cr,function(){return dy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=se.p,se.p=2,_=Be,Be|=4;try{Yb(t,i,a)}finally{Be=_,se.p=f,X.T=l}}Dt=1,ly(),cy(),uy()}}function ly(){if(Dt===1){Dt=0;var t=jr,i=za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=se.p;se.p=2;var f=Be;Be|=4;try{U0(i,t);var m=Of,_=Kg(t.containerInfo),E=m.focusedElem,O=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&Wg(E.ownerDocument.documentElement,E)){if(O!==null&&id(E)){var G=O.start,K=O.end;if(K===void 0&&(K=G),"selectionStart"in E)E.selectionStart=G,E.selectionEnd=Math.min(K,E.value.length);else{var Y=E.ownerDocument||document,H=Y&&Y.defaultView||window;if(H.getSelection){var W=H.getSelection(),le=E.textContent.length,pe=Math.min(O.start,le),Qe=O.end===void 0?pe:Math.min(O.end,le);!W.extend&&pe>Qe&&(_=Qe,Qe=pe,pe=_);var L=qg(E,pe),k=qg(E,Qe);if(L&&k&&(W.rangeCount!==1||W.anchorNode!==L.node||W.anchorOffset!==L.offset||W.focusNode!==k.node||W.focusOffset!==k.offset)){var U=Y.createRange();U.setStart(L.node,L.offset),W.removeAllRanges(),pe>Qe?(W.addRange(U),W.extend(k.node,k.offset)):(U.setEnd(k.node,k.offset),W.addRange(U))}}}}for(Y=[],W=E;W=W.parentNode;)W.nodeType===1&&Y.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var Q=Y[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}wu=!!jf,Of=jf=null}finally{Be=f,se.p=l,X.T=a}}t.current=i,Dt=2}}function cy(){if(Dt===2){Dt=0;var t=jr,i=za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=se.p;se.p=2;var f=Be;Be|=4;try{z0(t,i.alternate,i)}finally{Be=f,se.p=l,X.T=a}}Dt=3}}function uy(){if(Dt===4||Dt===3){Dt=0,rc();var t=jr,i=za,a=Xi,l=Q0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Dt=5:(Dt=0,za=jr=null,hy(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Nr=null),ji(a),i=i.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(Mn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,f=se.p,se.p=2,X.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];m(E.value,{componentStack:E.stack})}}finally{X.T=i,se.p=f}}(Xi&3)!==0&&mu(),_i(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===_f?fl++:(fl=0,_f=t):fl=0,ml(0)}}function hy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ko(i)))}function mu(){return ly(),cy(),uy(),dy()}function dy(){if(Dt!==5)return!1;var t=jr,i=yf;yf=0;var a=ji(Xi),l=X.T,f=se.p;try{se.p=32>a?32:a,X.T=null,a=vf,vf=null;var m=jr,_=Xi;if(Dt=0,za=jr=null,Xi=0,(Be&6)!==0)throw Error(r(331));var E=Be;if(Be|=4,W0(m.current),H0(m,m.current,_,a),Be=E,ml(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(Mn,m)}catch{}return!0}finally{se.p=f,X.T=l,hy(t,i)}}function fy(t,i,a){i=Cn(a,i),i=Qd(t.stateNode,i,2),t=Ar(t,i,2),t!==null&&(fs(t,2),_i(t))}function qe(t,i,a){if(t.tag===3)fy(t,t,a);else for(;i!==null;){if(i.tag===3){fy(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Nr===null||!Nr.has(l))){t=Cn(a,t),a=m0(2),l=Ar(i,a,2),l!==null&&(g0(a,l,i,t),fs(l,2),_i(l));break}}i=i.return}}function Tf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new eT;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(mf=!0,f.add(a),t=sT.bind(null,t,i,a),i.then(t,t))}function sT(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ye===t&&(Ce&a)===a&&(lt===4||lt===3&&(Ce&62914560)===Ce&&300>Jt()-lu?(Be&2)===0&&Va(t,0):gf|=a,Ma===Ce&&(Ma=0)),_i(t)}function my(t,i){i===0&&(i=uc()),t=Rs(t,i),t!==null&&(fs(t,i),_i(t))}function aT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),my(t,a)}function oT(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),my(t,a)}function lT(t,i){return It(t,i)}var gu=null,Ba=null,Sf=!1,pu=!1,Ef=!1,Pr=0;function _i(t){t!==Ba&&t.next===null&&(Ba===null?gu=Ba=t:Ba=Ba.next=t),pu=!0,Sf||(Sf=!0,uT())}function ml(t,i){if(!Ef&&pu){Ef=!0;do for(var a=!1,l=gu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var _=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-ut(42|t)+1)-1,m&=f&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,vy(l,m))}else m=Ce,m=ti(l,l===Ye?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||zn(l,m)||(a=!0,vy(l,m));l=l.next}while(a);Ef=!1}}function cT(){gy()}function gy(){pu=Sf=!1;var t=0;Pr!==0&&xT()&&(t=Pr);for(var i=Jt(),a=null,l=gu;l!==null;){var f=l.next,m=py(l,i);m===0?(l.next=null,a===null?gu=f:a.next=f,f===null&&(Ba=a)):(a=l,(t!==0||(m&3)!==0)&&(pu=!0)),l=f}Dt!==0&&Dt!==5||ml(t),Pr!==0&&(Pr=0)}function py(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-ut(m),E=1<<_,O=f[_];O===-1?((E&a)===0||(E&l)!==0)&&(f[_]=Zh(E,i)):O<=i&&(t.expiredLanes|=E),m&=~E}if(i=Ye,a=Ce,a=ti(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&($e===2||$e===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&lr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||zn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&lr(l),ji(a)){case 2:case 8:a=Eo;break;case 32:a=cr;break;case 268435456:a=sc;break;default:a=cr}return l=yy.bind(null,t),a=It(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&lr(l),t.callbackPriority=2,t.callbackNode=null,2}function yy(t,i){if(Dt!==0&&Dt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mu()&&t.callbackNode!==a)return null;var l=Ce;return l=ti(t,t===Ye?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Z0(t,l,i),py(t,Jt()),t.callbackNode!=null&&t.callbackNode===a?yy.bind(null,t):null)}function vy(t,i){if(mu())return null;Z0(t,i,!0)}function uT(){TT(function(){(Be&6)!==0?It(So,cT):gy()})}function Af(){if(Pr===0){var t=Aa;t===0&&(t=Jn,Jn<<=1,(Jn&261888)===0&&(Jn=256)),Pr=t}return Pr}function _y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ua(""+t)}function xy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function hT(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var m=_y((f[Ot]||null).action),_=l.submitter;_&&(i=(i=_[Ot]||null)?_y(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var E=new di("action","action",null,l,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Pr!==0){var O=_?xy(f,_):new FormData(f);Hd(a,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(E.preventDefault(),O=_?xy(f,_):new FormData(f),Hd(a,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var wf=0;wf<od.length;wf++){var Rf=od[wf],dT=Rf.toLowerCase(),fT=Rf[0].toUpperCase()+Rf.slice(1);$n(dT,"on"+fT)}$n(Yg,"onAnimationEnd"),$n(Zg,"onAnimationIteration"),$n(Jg,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(Ib,"onTransitionRun"),$n(Db,"onTransitionStart"),$n(Nb,"onTransitionCancel"),$n(ep,"onTransitionEnd"),li("onMouseEnter",["mouseout","mouseover"]),li("onMouseLeave",["mouseout","mouseover"]),li("onPointerEnter",["pointerout","pointerover"]),li("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function by(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var _=l.length-1;0<=_;_--){var E=l[_],O=E.instance,G=E.currentTarget;if(E=E.listener,O!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=G;try{m(f)}catch(K){Nc(K)}f.currentTarget=null,m=O}else for(_=0;_<l.length;_++){if(E=l[_],O=E.instance,G=E.currentTarget,E=E.listener,O!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=G;try{m(f)}catch(K){Nc(K)}f.currentTarget=null,m=O}}}}function Ae(t,i){var a=i[sa];a===void 0&&(a=i[sa]=new Set);var l=t+"__bubble";a.has(l)||(Ty(i,t,2,!1),a.add(l))}function Cf(t,i,a){var l=0;i&&(l|=4),Ty(a,t,l,i)}var yu="_reactListening"+Math.random().toString(36).slice(2);function If(t){if(!t[yu]){t[yu]=!0,Ro.forEach(function(a){a!=="selectionchange"&&(mT.has(a)||Cf(a,!1,t),Cf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[yu]||(i[yu]=!0,Cf("selectionchange",!1,i))}}function Ty(t,i,a,l){switch(Yy(i)){case 2:var f=UT;break;case 8:f=GT;break;default:f=Hf}a=f.bind(null,i,a,t),f=void 0,!_s||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function Df(t,i,a,l,f){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===f)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;E!==null;){if(_=si(E),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=m=_;continue e}E=E.parentNode}}l=l.return}gr(function(){var G=m,K=En(a),Y=[];e:{var H=tp.get(t);if(H!==void 0){var W=di,le=t;switch(t){case"keypress":if(bs(a)===0)break e;case"keydown":case"keyup":W=Cc;break;case"focusin":le="focus",W=Ss;break;case"focusout":le="blur",W=Ss;break;case"beforeblur":case"afterblur":W=Ss;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=_c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case Yg:case Zg:case Jg:W=bc;break;case ep:W=w;break;case"scroll":case"scrollend":W=Lo;break;case"wheel":W=q;break;case"copy":case"cut":case"paste":W=Tc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ki;break;case"toggle":case"beforetoggle":W=be}var pe=(i&4)!==0,Qe=!pe&&(t==="scroll"||t==="scrollend"),L=pe?H!==null?H+"Capture":null:H;pe=[];for(var k=G,U;k!==null;){var Q=k;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||L===null||(Q=Fn(k,L),Q!=null&&pe.push(pl(k,Q,U))),Qe)break;k=k.return}0<pe.length&&(H=new W(H,le,null,a,K),Y.push({event:H,listeners:pe}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",H&&a!==Mo&&(le=a.relatedTarget||a.fromElement)&&(si(le)||le[ii]))break e;if((W||H)&&(H=K.window===K?K:(H=K.ownerDocument)?H.defaultView||H.parentWindow:window,W?(le=a.relatedTarget||a.toElement,W=G,le=le?si(le):null,le!==null&&(Qe=c(le),pe=le.tag,le!==Qe||pe!==5&&pe!==27&&pe!==6)&&(le=null)):(W=null,le=G),W!==le)){if(pe=Bo,Q="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(pe=ki,Q="onPointerLeave",L="onPointerEnter",k="pointer"),Qe=W==null?H:dn(W),U=le==null?H:dn(le),H=new pe(Q,k+"leave",W,a,K),H.target=Qe,H.relatedTarget=U,Q=null,si(K)===G&&(pe=new pe(L,k+"enter",le,a,K),pe.target=U,pe.relatedTarget=Qe,Q=pe),Qe=Q,W&&le)t:{for(pe=gT,L=W,k=le,U=0,Q=L;Q;Q=pe(Q))U++;Q=0;for(var fe=k;fe;fe=pe(fe))Q++;for(;0<U-Q;)L=pe(L),U--;for(;0<Q-U;)k=pe(k),Q--;for(;U--;){if(L===k||k!==null&&L===k.alternate){pe=L;break t}L=pe(L),k=pe(k)}pe=null}else pe=null;W!==null&&Sy(Y,H,W,pe,!1),le!==null&&Qe!==null&&Sy(Y,Qe,le,pe,!0)}}e:{if(H=G?dn(G):window,W=H.nodeName&&H.nodeName.toLowerCase(),W==="select"||W==="input"&&H.type==="file")var ze=Bg;else if(Vg(H))if(Fg)ze=wb;else{ze=Eb;var he=Sb}else W=H.nodeName,!W||W.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?G&&ca(G.elementType)&&(ze=Bg):ze=Ab;if(ze&&(ze=ze(t,G))){Lg(Y,ze,a,K);break e}he&&he(t,H,G),t==="focusout"&&G&&H.type==="number"&&G.memoizedProps.value!=null&&Oo(H,"number",H.value)}switch(he=G?dn(G):window,t){case"focusin":(Vg(he)||he.contentEditable==="true")&&(ya=he,rd=G,$o=null);break;case"focusout":$o=rd=ya=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,Xg(Y,a,K);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":Xg(Y,a,K)}var Se;if(Le)e:{switch(t){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else pa?Es(t,a)&&(Ie="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(gi&&a.locale!=="ko"&&(pa||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&pa&&(Se=Vo()):(hi=K,zo="value"in hi?hi.value:hi.textContent,pa=!0)),he=vu(G,Ie),0<he.length&&(Ie=new mi(Ie,t,null,a,K),Y.push({event:Ie,listeners:he}),Se?Ie.data=Se:(Se=ga(a),Se!==null&&(Ie.data=Se)))),(Se=wn?_b(t,a):xb(t,a))&&(Ie=vu(G,"onBeforeInput"),0<Ie.length&&(he=new mi("onBeforeInput","beforeinput",null,a,K),Y.push({event:he,listeners:Ie}),he.data=Se)),hT(Y,t,G,a,K)}by(Y,i)})}function pl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function vu(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Fn(t,a),f!=null&&l.unshift(pl(t,f,m)),f=Fn(t,i),f!=null&&l.push(pl(t,f,m))),t.tag===3)return l;t=t.return}return[]}function gT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sy(t,i,a,l,f){for(var m=i._reactName,_=[];a!==null&&a!==l;){var E=a,O=E.alternate,G=E.stateNode;if(E=E.tag,O!==null&&O===l)break;E!==5&&E!==26&&E!==27||G===null||(O=G,f?(G=Fn(a,m),G!=null&&_.unshift(pl(a,G,O))):f||(G=Fn(a,m),G!=null&&_.push(pl(a,G,O)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var pT=/\r\n?/g,yT=/\u0000|\uFFFD/g;function Ey(t){return(typeof t=="string"?t:""+t).replace(pT,`
`).replace(yT,"")}function Ay(t,i){return i=Ey(i),Ey(t)===i}function Xe(t,i,a,l,f,m){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||rn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&rn(t,""+l);break;case"className":fn(t,"class",l);break;case"tabIndex":fn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":fn(t,a,l);break;case"style":ko(t,l,m);break;case"data":if(i!=="object"){fn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ua(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&Xe(t,i,"name",f.name,f,null),Xe(t,i,"formEncType",f.formEncType,f,null),Xe(t,i,"formMethod",f.formMethod,f,null),Xe(t,i,"formTarget",f.formTarget,f,null)):(Xe(t,i,"encType",f.encType,f,null),Xe(t,i,"method",f.method,f,null),Xe(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ua(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Bn);break;case"onScroll":l!=null&&Ae("scroll",t);break;case"onScrollEnd":l!=null&&Ae("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ua(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ae("beforetoggle",t),Ae("toggle",t),oa(t,"popover",l);break;case"xlinkActuate":xt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":oa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=vc.get(a)||a,oa(t,a,l))}}function Nf(t,i,a,l,f,m){switch(a){case"style":ko(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?rn(t,l):(typeof l=="number"||typeof l=="bigint")&&rn(t,""+l);break;case"onScroll":l!=null&&Ae("scroll",t);break;case"onScrollEnd":l!=null&&Ae("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=t[Ot]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):oa(t,a,l)}}}function Gt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",t),Ae("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Xe(t,i,m,_,a,null)}}f&&Xe(t,i,"srcSet",a.srcSet,a,null),l&&Xe(t,i,"src",a.src,a,null);return;case"input":Ae("invalid",t);var E=m=_=f=null,O=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":f=K;break;case"type":_=K;break;case"checked":O=K;break;case"defaultChecked":G=K;break;case"value":m=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:Xe(t,i,l,K,a,null)}}gc(t,m,E,O,G,_,f,!1);return;case"select":Ae("invalid",t),l=_=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:Xe(t,i,f,E,a,null)}i=m,a=_,t.multiple=!!l,i!=null?hr(t,!!l,i,!1):a!=null&&hr(t,!!l,a,!0);return;case"textarea":Ae("invalid",t),m=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Xe(t,i,_,E,a,null)}dr(t,l,f,m);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xe(t,i,O,l,a,null)}return;case"dialog":Ae("beforetoggle",t),Ae("toggle",t),Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":Ae("load",t);break;case"video":case"audio":for(l=0;l<gl.length;l++)Ae(gl[l],t);break;case"image":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"embed":case"source":case"link":Ae("error",t),Ae("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Xe(t,i,G,l,a,null)}return;default:if(ca(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&Nf(t,i,K,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Xe(t,i,E,l,a,null))}function vT(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,E=null,O=null,G=null,K=null;for(W in a){var Y=a[W];if(a.hasOwnProperty(W)&&Y!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=Y;default:l.hasOwnProperty(W)||Xe(t,i,W,null,l,Y)}}for(var H in l){var W=l[H];if(Y=a[H],l.hasOwnProperty(H)&&(W!=null||Y!=null))switch(H){case"type":m=W;break;case"name":f=W;break;case"checked":G=W;break;case"defaultChecked":K=W;break;case"value":_=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:W!==Y&&Xe(t,i,H,W,l,Y)}}la(t,_,E,O,G,K,m,f);return;case"select":W=_=E=H=null;for(m in a)if(O=a[m],a.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":W=O;default:l.hasOwnProperty(m)||Xe(t,i,m,null,l,O)}for(f in l)if(m=l[f],O=a[f],l.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":H=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==O&&Xe(t,i,f,m,l,O)}i=E,a=_,l=W,H!=null?hr(t,!!a,H,!1):!!l!=!!a&&(i!=null?hr(t,!!a,i,!0):hr(t,!!a,a?[]:"",!1));return;case"textarea":W=H=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xe(t,i,E,null,l,f)}for(_ in l)if(f=l[_],m=a[_],l.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":H=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Xe(t,i,_,f,l,m)}pc(t,H,W);return;case"option":for(var le in a)if(H=a[le],a.hasOwnProperty(le)&&H!=null&&!l.hasOwnProperty(le))switch(le){case"selected":t.selected=!1;break;default:Xe(t,i,le,null,l,H)}for(O in l)if(H=l[O],W=a[O],l.hasOwnProperty(O)&&H!==W&&(H!=null||W!=null))switch(O){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Xe(t,i,O,H,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)H=a[pe],a.hasOwnProperty(pe)&&H!=null&&!l.hasOwnProperty(pe)&&Xe(t,i,pe,null,l,H);for(G in l)if(H=l[G],W=a[G],l.hasOwnProperty(G)&&H!==W&&(H!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:Xe(t,i,G,H,l,W)}return;default:if(ca(i)){for(var Qe in a)H=a[Qe],a.hasOwnProperty(Qe)&&H!==void 0&&!l.hasOwnProperty(Qe)&&Nf(t,i,Qe,void 0,l,H);for(K in l)H=l[K],W=a[K],!l.hasOwnProperty(K)||H===W||H===void 0&&W===void 0||Nf(t,i,K,H,l,W);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&Xe(t,i,L,null,l,H);for(Y in l)H=l[Y],W=a[Y],!l.hasOwnProperty(Y)||H===W||H==null&&W==null||Xe(t,i,Y,H,l,W)}function wy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _T(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,_=f.initiatorType,E=f.duration;if(m&&E&&wy(_)){for(_=0,E=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],G=O.startTime;if(G>E)break;var K=O.transferSize,Y=O.initiatorType;K&&wy(Y)&&(O=O.responseEnd,_+=K*(O<E?1:(E-G)/(O-G)))}if(--l,i+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var jf=null,Of=null;function _u(t){return t.nodeType===9?t:t.ownerDocument}function Ry(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Pf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var kf=null;function xT(){var t=window.event;return t&&t.type==="popstate"?t===kf?!1:(kf=t,!0):(kf=null,!1)}var Iy=typeof setTimeout=="function"?setTimeout:void 0,bT=typeof clearTimeout=="function"?clearTimeout:void 0,Dy=typeof Promise=="function"?Promise:void 0,TT=typeof queueMicrotask=="function"?queueMicrotask:typeof Dy<"u"?function(t){return Dy.resolve(null).then(t).catch(ST)}:Iy;function ST(t){setTimeout(function(){throw t})}function kr(t){return t==="head"}function Ny(t,i){var a=i,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Ha(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")yl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,yl(a);for(var m=a.firstChild;m;){var _=m.nextSibling,E=m.nodeName;m[ri]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&yl(t.ownerDocument.body);a=f}while(a);Ha(i)}function jy(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Mf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mf(a),aa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function ET(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ri])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=On(t.nextSibling),t===null)break}return null}function AT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=On(t.nextSibling),t===null))return null;return t}function Oy(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=On(t.nextSibling),t===null))return null;return t}function zf(t){return t.data==="$?"||t.data==="$~"}function Vf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function wT(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function On(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Lf=null;function Py(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return On(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function ky(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function My(t,i,a){switch(i=_u(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function yl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);aa(t)}var Pn=new Map,zy=new Set;function xu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Qi=se.d;se.d={f:RT,r:CT,D:IT,C:DT,L:NT,m:jT,X:PT,S:OT,M:kT};function RT(){var t=Qi.f(),i=hu();return t||i}function CT(t){var i=Sn(t);i!==null&&i.tag===5&&i.type==="form"?e0(i):Qi.r(t)}var Fa=typeof document>"u"?null:document;function Vy(t,i,a){var l=Fa;if(l&&typeof i=="string"&&i){var f=nn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),zy.has(f)||(zy.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Gt(i,"link",t),_t(i),l.head.appendChild(i)))}}function IT(t){Qi.D(t),Vy("dns-prefetch",t,null)}function DT(t,i){Qi.C(t,i),Vy("preconnect",t,i)}function NT(t,i,a){Qi.L(t,i,a);var l=Fa;if(l&&t&&i){var f='link[rel="preload"][as="'+nn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+nn(a.imageSizes)+'"]')):f+='[href="'+nn(t)+'"]';var m=f;switch(i){case"style":m=Ua(t);break;case"script":m=Ga(t)}Pn.has(m)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Pn.set(m,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(vl(m))||i==="script"&&l.querySelector(_l(m))||(i=l.createElement("link"),Gt(i,"link",t),_t(i),l.head.appendChild(i)))}}function jT(t,i){Qi.m(t,i);var a=Fa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+nn(l)+'"][href="'+nn(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ga(t)}if(!Pn.has(m)&&(t=T({rel:"modulepreload",href:t},i),Pn.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(_l(m)))return}l=a.createElement("link"),Gt(l,"link",t),_t(l),a.head.appendChild(l)}}}function OT(t,i,a){Qi.S(t,i,a);var l=Fa;if(l&&t){var f=ai(l).hoistableStyles,m=Ua(t);i=i||"default";var _=f.get(m);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(vl(m)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Pn.get(m))&&Bf(t,a);var O=_=l.createElement("link");_t(O),Gt(O,"link",t),O._p=new Promise(function(G,K){O.onload=G,O.onerror=K}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,bu(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:E},f.set(m,_)}}}function PT(t,i){Qi.X(t,i);var a=Fa;if(a&&t){var l=ai(a).hoistableScripts,f=Ga(t),m=l.get(f);m||(m=a.querySelector(_l(f)),m||(t=T({src:t,async:!0},i),(i=Pn.get(f))&&Ff(t,i),m=a.createElement("script"),_t(m),Gt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function kT(t,i){Qi.M(t,i);var a=Fa;if(a&&t){var l=ai(a).hoistableScripts,f=Ga(t),m=l.get(f);m||(m=a.querySelector(_l(f)),m||(t=T({src:t,async:!0,type:"module"},i),(i=Pn.get(f))&&Ff(t,i),m=a.createElement("script"),_t(m),Gt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function Ly(t,i,a,l){var f=(f=Zt.current)?xu(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ua(a.href),a=ai(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ua(a.href);var m=ai(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(vl(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Pn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pn.set(t,a),m||MT(f,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ga(a),a=ai(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ua(t){return'href="'+nn(t)+'"'}function vl(t){return'link[rel="stylesheet"]['+t+"]"}function By(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function MT(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Gt(i,"link",a),_t(i),t.head.appendChild(i))}function Ga(t){return'[src="'+nn(t)+'"]'}function _l(t){return"script[async]"+t}function Fy(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+nn(a.href)+'"]');if(l)return i.instance=l,_t(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),_t(l),Gt(l,"style",f),bu(l,a.precedence,t),i.instance=l;case"stylesheet":f=Ua(a.href);var m=t.querySelector(vl(f));if(m)return i.state.loading|=4,i.instance=m,_t(m),m;l=By(a),(f=Pn.get(f))&&Bf(l,f),m=(t.ownerDocument||t).createElement("link"),_t(m);var _=m;return _._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),Gt(m,"link",l),i.state.loading|=4,bu(m,a.precedence,t),i.instance=m;case"script":return m=Ga(a.src),(f=t.querySelector(_l(m)))?(i.instance=f,_t(f),f):(l=a,(f=Pn.get(m))&&(l=T({},a),Ff(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),_t(f),Gt(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,bu(l,a.precedence,t));return i.instance}function bu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===i)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Bf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Ff(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Tu=null;function Uy(t,i,a){if(Tu===null){var l=new Map,f=Tu=new Map;f.set(a,l)}else f=Tu,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[ri]||m[vt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=t+_;var E=l.get(_);E?E.push(m):l.set(_,[m])}}return l}function Gy(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function zT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Hy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function VT(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Ua(l.href),m=i.querySelector(vl(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Su.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=m,_t(m);return}m=i.ownerDocument||i,l=By(l),(f=Pn.get(f))&&Bf(l,f),m=m.createElement("link"),_t(m);var _=m;_._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),Gt(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Su.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Uf=0;function LT(t,i){return t.stylesheets&&t.count===0&&Au(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Au(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+i);0<t.imgBytes&&Uf===0&&(Uf=62500*_T());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Au(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Uf?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Su(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Au(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Eu=null;function Au(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Eu=new Map,i.forEach(BT,t),Eu=null,Su.call(t))}function BT(t,i){if(!(i.state.loading&4)){var a=Eu.get(t);if(a)var l=a.get(null);else{a=new Map,Eu.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,f),a.set(_,f),this.count++,l=Su.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var xl={$$typeof:ee,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function FT(t,i,a,l,f,m,_,E,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.hiddenUpdates=ni(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function $y(t,i,a,l,f,m,_,E,O,G,K,Y){return t=new FT(t,i,a,_,O,G,K,Y,E),i=1,m===!0&&(i|=24),m=gn(3,null,null,i),t.current=m,m.stateNode=t,i=xd(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:i},Ed(m),t}function qy(t){return t?(t=xa,t):xa}function Wy(t,i,a,l,f,m){f=qy(f),l.context===null?l.context=f:l.pendingContext=f,l=Er(i),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Ar(t,l,i),a!==null&&(cn(a,t,i),Zo(a,t,i))}function Ky(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Gf(t,i){Ky(t,i),(t=t.alternate)&&Ky(t,i)}function Xy(t){if(t.tag===13||t.tag===31){var i=Rs(t,67108864);i!==null&&cn(i,t,67108864),Gf(t,67108864)}}function Qy(t){if(t.tag===13||t.tag===31){var i=xn();i=gs(i);var a=Rs(t,i);a!==null&&cn(a,t,i),Gf(t,i)}}var wu=!0;function UT(t,i,a,l){var f=X.T;X.T=null;var m=se.p;try{se.p=2,Hf(t,i,a,l)}finally{se.p=m,X.T=f}}function GT(t,i,a,l){var f=X.T;X.T=null;var m=se.p;try{se.p=8,Hf(t,i,a,l)}finally{se.p=m,X.T=f}}function Hf(t,i,a,l){if(wu){var f=$f(l);if(f===null)Df(t,i,l,Ru,a),Zy(t,l);else if($T(f,t,i,a,l))l.stopPropagation();else if(Zy(t,l),i&4&&-1<HT.indexOf(t)){for(;f!==null;){var m=Sn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=ei(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var O=1<<31-ut(_);E.entanglements[1]|=O,_&=~O}_i(m),(Be&6)===0&&(cu=Jt()+500,ml(0))}}break;case 31:case 13:E=Rs(m,2),E!==null&&cn(E,m,2),hu(),Gf(m,2)}if(m=$f(l),m===null&&Df(t,i,l,Ru,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Df(t,i,l,null,a)}}function $f(t){return t=En(t),qf(t)}var Ru=null;function qf(t){if(Ru=null,t=si(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===31){if(t=g(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ru=t,null}function Yy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hs()){case So:return 2;case Eo:return 8;case cr:case Yh:return 32;case sc:return 268435456;default:return 32}default:return 32}}var Wf=!1,Mr=null,zr=null,Vr=null,bl=new Map,Tl=new Map,Lr=[],HT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zy(t,i){switch(t){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":bl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(i.pointerId)}}function Sl(t,i,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Sn(i),i!==null&&Xy(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function $T(t,i,a,l,f){switch(i){case"focusin":return Mr=Sl(Mr,t,i,a,l,f),!0;case"dragenter":return zr=Sl(zr,t,i,a,l,f),!0;case"mouseover":return Vr=Sl(Vr,t,i,a,l,f),!0;case"pointerover":var m=f.pointerId;return bl.set(m,Sl(bl.get(m)||null,t,i,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Tl.set(m,Sl(Tl.get(m)||null,t,i,a,l,f)),!0}return!1}function Jy(t){var i=si(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,Vn(t.priority,function(){Qy(a)});return}}else if(i===31){if(i=g(a),i!==null){t.blockedOn=i,Vn(t.priority,function(){Qy(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=$f(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Mo=l,a.target.dispatchEvent(l),Mo=null}else return i=Sn(a),i!==null&&Xy(i),t.blockedOn=a,!1;i.shift()}return!0}function ev(t,i,a){Cu(t)&&a.delete(i)}function qT(){Wf=!1,Mr!==null&&Cu(Mr)&&(Mr=null),zr!==null&&Cu(zr)&&(zr=null),Vr!==null&&Cu(Vr)&&(Vr=null),bl.forEach(ev),Tl.forEach(ev)}function Iu(t,i){t.blockedOn===i&&(t.blockedOn=null,Wf||(Wf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,qT)))}var Du=null;function tv(t){Du!==t&&(Du=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Du===t&&(Du=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(qf(l||a)===null)continue;break}var m=Sn(a);m!==null&&(t.splice(i,3),i-=3,Hd(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Ha(t){function i(O){return Iu(O,t)}Mr!==null&&Iu(Mr,t),zr!==null&&Iu(zr,t),Vr!==null&&Iu(Vr,t),bl.forEach(i),Tl.forEach(i);for(var a=0;a<Lr.length;a++){var l=Lr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Lr.length&&(a=Lr[0],a.blockedOn===null);)Jy(a),a.blockedOn===null&&Lr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],_=f[Ot]||null;if(typeof m=="function")_||tv(a);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Ot]||null)E=_.formAction;else if(qf(f)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),tv(a)}}}function nv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Kf(t){this._internalRoot=t}Nu.prototype.render=Kf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=xn();Wy(a,l,t,i,null,null)},Nu.prototype.unmount=Kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Wy(t.current,2,null,t,null,null),hu(),i[ii]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var i=hc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Lr.length&&i!==0&&i<Lr[a].priority;a++);Lr.splice(a,0,t),a===0&&Jy(t)}};var iv=e.version;if(iv!=="19.2.0")throw Error(r(527,iv,"19.2.0"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=v(i),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var WT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{Mn=ju.inject(WT),Vt=ju}catch{}}return wl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",f=u0,m=h0,_=d0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=$y(t,1,!1,null,null,a,l,null,f,m,_,nv),t[ii]=i.current,If(t),new Kf(i)},wl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,f="",m=u0,_=h0,E=d0,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=$y(t,1,!0,i,a??null,l,f,O,m,_,E,nv),i.context=qy(null),a=i.current,l=xn(),l=gs(l),f=Er(l),f.callback=null,Ar(a,f,l),a=l,i.current.lanes=a,fs(i,a),_i(i),t[ii]=i.current,If(t),new Nu(i)},wl.version="19.2.0",wl}var cv;function lS(){if(cv)return Qf.exports;cv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Qf.exports=oS(),Qf.exports}var cS=lS(),uS=nS();const Gm=YT(uS);class hS{constructor(e,n=null,r=null){this.rawData=e,this.goalieProcessor=n,this.scheduleHelper=r,this.processedData=this.processAllTeams()}calculatePer60Rate(e,n){return!n||n===0?0:e/n*3600}calculatePDO(e,n,r,o){if(!n||!o||n===0||o===0)return 100;const c=e/n*100,h=(1-r/o)*100;return c+h}calculateShootingEfficiency(e,n){return!n||n===0?1:e/n}calculateSavePerformance(e,n){return!n||n===0?0:1-e/n}calculateXGDiffPer60(e,n,r){const o=this.calculatePer60Rate(e,r),c=this.calculatePer60Rate(n,r);return o-c}calculateRegressionScore(e){const n=(h,g=0)=>h==null||isNaN(h)?g:parseFloat(h),r=this.calculateShootingEfficiency(n(e.goalsFor),n(e.xGoalsFor));this.calculateSavePerformance(n(e.goalsAgainst),n(e.xGoalsAgainst));const o=this.calculatePDO(n(e.goalsFor),n(e.shotsOnGoalFor),n(e.goalsAgainst),n(e.shotsOnGoalAgainst));let c=0;return r>1.1&&(c+=(r-1)*20),r<.9&&(c-=(1-r)*20),o>102&&(c+=(o-100)*2),o<98&&(c-=(100-o)*2),c}processTeamData(e){const n={...e},r=(o,c=0)=>o==null||isNaN(o)?c:parseFloat(o);return n.gamesPlayed=r(e.games_played,20),n.xGF_per60=this.calculatePer60Rate(r(e.xGoalsFor),r(e.iceTime)),n.xGA_per60=this.calculatePer60Rate(r(e.xGoalsAgainst),r(e.iceTime)),n.corsi_per60=this.calculatePer60Rate(r(e.shotAttemptsFor),r(e.iceTime)),n.fenwick_per60=this.calculatePer60Rate(r(e.unblockedShotAttemptsFor),r(e.iceTime)),n.highDanger_xGF_per60=this.calculatePer60Rate(r(e.highDangerxGoalsFor),r(e.iceTime)),n.highDanger_xGA_per60=this.calculatePer60Rate(r(e.highDangerxGoalsAgainst),r(e.iceTime)),n.scoreAdj_xGF_per60=this.calculatePer60Rate(r(e.scoreVenueAdjustedxGoalsFor),r(e.iceTime)),n.scoreAdj_xGA_per60=this.calculatePer60Rate(r(e.scoreVenueAdjustedxGoalsAgainst),r(e.iceTime)),e.situation==="5on4"&&(n.pp_efficiency=this.calculatePer60Rate(r(e.xGoalsFor),r(e.iceTime))),e.situation==="4on5"&&(n.pk_efficiency=this.calculatePer60Rate(r(e.xGoalsAgainst),r(e.iceTime))),n.pdo=this.calculatePDO(r(e.goalsFor),r(e.shotsOnGoalFor),r(e.goalsAgainst),r(e.shotsOnGoalAgainst)),n.shooting_efficiency=this.calculateShootingEfficiency(r(e.goalsFor),r(e.xGoalsFor)),n.save_performance=this.calculateSavePerformance(r(e.goalsAgainst),r(e.xGoalsAgainst)),n.xGD_per60=this.calculateXGDiffPer60(r(e.xGoalsFor),r(e.xGoalsAgainst),r(e.iceTime)),n.regression_score=this.calculateRegressionScore(e),n.situational_weight=this.getSituationalWeight(e.situation),n}getSituationalWeight(e){return{"5on5":.77,"5on4":.12,"4on5":.11,all:1,other:0}[e]||0}calculateDynamicSituationalWeights(e,n){const r=this.getTeamData(e,"all"),o=this.getTeamData(n,"all");if(!r||!o)return{"5on5":.77,"5on4":.12,"4on5":.11};const c=parseFloat(r.penalityMinutesFor)||0,h=parseFloat(o.penalityMinutesFor)||0,g=parseFloat(r.games_played)||1,p=c/g,b=h/g,T=p,S=b/60,A=T/60,z=1-S-A;return{"5on5":Math.max(.6,Math.min(.85,z)),"5on4":Math.max(.05,Math.min(.2,S)),"4on5":Math.max(.05,Math.min(.2,A))}}processAllTeams(){return this.rawData.map(e=>this.processTeamData(e))}getTeamsBySituation(e){return this.processedData.filter(n=>n.situation===e)}getTeamData(e,n="all"){return this.processedData.find(r=>r.team===e&&r.situation===n)}calculateLeagueAverage(){const e=this.getTeamsBySituation("5on5");if(!e||e.length===0)return 2.45;let n=0,r=0;e.forEach(v=>{n+=v.goalsFor||0,r+=v.scoreVenueAdjustedxGoalsFor||v.xGoalsFor||0});const c=1.215,h=e.map(v=>v.xGF_per60).filter(v=>v&&v>0);if(h.length===0)return 2.45;const g=h.reduce((v,b)=>v+b,0)/h.length,p=g*c;return console.log(`📊 League avg: base=${g.toFixed(2)} xGF/60, cal=${c.toFixed(3)}, result=${p.toFixed(2)} goals/60`),p}calculateRegressionWeight(e){return!e||e<0||e<5?.5:e<10?.4:e<20?.3:e<40?.2:.1}applyRegressionToMean(e,n,r){if(!e||e===0)return n;const o=this.calculateRegressionWeight(r);return e*(1-o)+n*o}getShootingTalent(e){const n=this.getTeamData(e,"5on5");if(!n||!n.goalsFor||!n.xGoalsFor)return 1;const r=n.goalsFor/n.xGoalsFor;return r>1.08?1.03:r<.92?.97:1}calculateExpectedGoals(e,n){const r=this.getTeamData(e,"5on5"),o=this.getTeamData(e,"5on4"),c=this.getTeamData(n,"4on5");if(!r)return 0;let h=r.xGF_per60*.77;if(o&&c){const g=(o.pp_efficiency-c.pk_efficiency)*.12;h+=g}return Math.max(0,h)}predictGameTotal(e,n){const r=this.predictTeamScore(e,n),o=this.predictTeamScore(n,e);return r+o}predictTeamScore(e,n,r=!1,o=null,c=null){const h=this.getTeamData(e,"5on5"),g=this.getTeamData(n,"5on5"),p=this.getTeamData(e,"5on4"),v=this.getTeamData(n,"4on5");if(!h||!g)return 0;const b=this.calculateLeagueAverage(),T=h.gamesPlayed||82,S=g.gamesPlayed||82,A=h.scoreAdj_xGF_per60||h.xGF_per60,z=g.scoreAdj_xGA_per60||g.xGA_per60,M=this.applyRegressionToMean(A,b,T),B=this.applyRegressionToMean(z,b,S),te=this.calculatePDO(h.goalsFor,h.shotsOnGoalFor,h.goalsAgainst,h.shotsOnGoalAgainst),$=this.calculatePDO(g.goalsFor,g.shotsOnGoalFor,g.goalsAgainst,g.shotsOnGoalAgainst),ee=this.applyPDORegression(M,te),ne=this.applyPDORegression(B,$),re=ee*.4+ne*.6,ue=this.getShootingTalent(e),I=re*ue,C=this.calculateDynamicSituationalWeights(e,n),D=C["5on5"]*60;let N=I/60*D;r&&(N*=1.058);let P=0;if(p&&v){const Fe=p.xGF_per60,ct=v.xGA_per60,X=this.applyRegressionToMean(Fe,b,T),se=this.applyRegressionToMean(ct,b,S),Oe=(X*.4+se*.6)*ue,Me=C["5on4"]*60;P=Oe/60*Me}let V=N+P;if(this.scheduleHelper){const Fe=this.scheduleHelper.getRestAdjustment(e,c);Fe!==0&&(V*=1+Fe,console.log(`  B2B adjustment for ${e}: ${Fe>0?"+":""}${(Fe*100).toFixed(1)}% (${V.toFixed(2)} goals)`))}const j=this.adjustForGoalie(V,n,o);return Math.max(0,j)}applyPDORegression(e,n){if(!n||n===100)return e;if(n>106){const r=Math.min(.02,(n-106)*.01);return e*(1-r)}else if(n<94){const r=Math.min(.02,(94-n)*.01);return e*(1+r)}return e}adjustForGoalie(e,n,r=null){if(!this.goalieProcessor)return e;let o=0;if(r)o=this.goalieProcessor.calculateGSAE(r,"5on5");else{const p=this.goalieProcessor.getTeamGoalies(n,"5on5");if(p&&p.length>0){let v=0,b=0;p.forEach(T=>{const S=parseFloat(T.games_played)||0,A=this.goalieProcessor.calculateGSAE(T.name,"5on5");v+=A*S,b+=S}),o=b>0?v/b:0}}const c=1+o*.001,h=r?1:.6,g=1+(c-1)*h;return Math.max(0,e*g)}probabilityToOdds(e){return e<=0||e>=1?0:e>=.5?Math.round(-1*(e/(1-e))*100):Math.round((1-e)/e*100)}oddsToProbability(e){return e<0?Math.abs(e)/(Math.abs(e)+100):100/(e+100)}calculateEV(e,n,r=100){if(e<=0||e>=1)return 0;let o;n>0?o=1+n/100:o=1+100/Math.abs(n);const c=r*o;return e*c-r}calculateKellyStake(e,n,r=1e3){if(e<=0||e>=1)return{fullKelly:0,fractionalKelly:0,recommendedStake:0};const o=n>0?n/100:100/Math.abs(n),c=e,h=1-c,g=(o*c-h)/o,p=Math.max(0,g*.25);return{fullKelly:g,fractionalKelly:p,recommendedStake:r*p}}normalCDF(e){const n=1/(1+.2316419*Math.abs(e)),o=.3989423*Math.exp(-e*e/2)*n*(.3193815+n*(-.3565638+n*(1.781478+n*(-1.821256+n*1.330274))));return e>0?1-o:o}factorial(e){if(e<=1)return 1;let n=1;for(let r=2;r<=e;r++)n*=r;return n}logFactorial(e){if(e<=1)return 0;let n=0;for(let r=2;r<=e;r++)n+=Math.log(r);return n}poissonPMF(e,n){if(n<=0||e<0)return 0;if(e>20){const r=e*Math.log(n)-n-this.logFactorial(e);return Math.exp(r)}return Math.pow(n,e)*Math.exp(-n)/this.factorial(e)}poissonCDF(e,n){if(n<=0)return 1;if(e<0)return 0;let r=0;const o=Math.floor(e);for(let c=0;c<=o;c++)r+=this.poissonPMF(c,n);return Math.min(1,r)}calculatePoissonWinProb(e,n){if(!e||!n||e<=0||n<=0)return .5;let r=0,o=0;for(let v=0;v<=10;v++){const b=this.poissonPMF(v,e);for(let T=0;T<=10;T++){const S=this.poissonPMF(T,n),A=b*S;v>T?r+=A:v===T&&(o+=A)}}const c=Math.abs(e-n),h=(e+n)/2,g=c/h;let p;return g<.1?p=.5:e>n?p=Math.min(.58,.52+g*.15):p=Math.max(.42,.48-g*.15),r+=o*p,Math.max(.05,Math.min(.95,r))}estimateWinProbability(e,n,r=!0){if(!e||!n)return .5;const o=e.team||e.name,c=n.team||n.name;if(!o||!c)return .5;let h,g;return r?(h=this.predictTeamScore(o,c,!0),g=this.predictTeamScore(c,o,!1)):(h=this.predictTeamScore(o,c,!1),g=this.predictTeamScore(c,o,!0)),this.calculatePoissonWinProb(h,g)}findRegressionCandidates(){const e=this.getTeamsBySituation("all"),n=e.filter(o=>o.regression_score>10).sort((o,c)=>c.regression_score-o.regression_score),r=e.filter(o=>o.regression_score<-10).sort((o,c)=>o.regression_score-c.regression_score);return{overperforming:n.slice(0,5),underperforming:r.slice(0,5)}}findSpecialTeamsMismatches(){const e=this.getTeamsBySituation("5on4"),n=this.getTeamsBySituation("4on5"),r=[];return e.forEach(o=>{n.forEach(c=>{if(o.team!==c.team){const h=o.pp_efficiency||0,g=c.pk_efficiency||0,p=h-g;p>2&&r.push({ppTeam:o.team,pkTeam:c.team,ppEfficiency:h,pkEfficiency:g,mismatch:p,recommendation:"BET OVER on "+o.team+" team total"})}})}),r.sort((o,c)=>c.mismatch-o.mismatch)}calculateBettingEdge(e,n){const r=1/n;return e-r}getTopBettingOpportunities(){const e=this.findRegressionCandidates(),n=this.findSpecialTeamsMismatches(),r=[];return e.overperforming.forEach(o=>{r.push({type:"REGRESSION",team:o.team,recommendation:"BET UNDER/AGAINST",reason:`Overperforming (PDO: ${o.pdo.toFixed(1)}, Shooting Eff: ${o.shooting_efficiency.toFixed(2)})`,confidence:Math.min(95,Math.abs(o.regression_score)*2),edge:Math.abs(o.regression_score)/10})}),e.underperforming.forEach(o=>{r.push({type:"REGRESSION",team:o.team,recommendation:"BET OVER/WITH",reason:`Underperforming (PDO: ${o.pdo.toFixed(1)}, Shooting Eff: ${o.shooting_efficiency.toFixed(2)})`,confidence:Math.min(95,Math.abs(o.regression_score)*2),edge:Math.abs(o.regression_score)/10})}),n.slice(0,3).forEach(o=>{r.push({type:"SPECIAL_TEAMS",team:o.ppTeam,recommendation:o.recommendation,reason:`PP vs PK mismatch (${o.mismatch.toFixed(1)} per 60)`,confidence:Math.min(90,o.mismatch*10),edge:o.mismatch/5})}),r.sort((o,c)=>c.edge-o.edge)}}async function dS(s=null){try{let e;try{if(e=await fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/teams.csv"),!e.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw file failed, trying local file..."),e=await fetch("/teams.csv")}if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.text();return new Promise((r,o)=>{Gm.parse(n,{header:!0,skipEmptyLines:!0,transformHeader:c=>c.trim(),transform:c=>{if(c===""||c===null||c===void 0)return null;const h=c.toString().trim();return h===""||h==="null"||h==="undefined"?null:!isNaN(h)&&!isNaN(parseFloat(h))?parseFloat(h):h},complete:c=>{console.log("CSV parsing completed. Rows:",c.data.length),console.log("Parsing errors:",c.errors),c.errors.length>0&&console.warn("CSV parsing warnings:",c.errors);const h=c.data.filter(p=>p&&Object.keys(p).some(v=>p[v]!==null&&p[v]!==""));if(h.length===0){o(new Error("No valid data found in CSV file"));return}console.log("Clean data rows:",h.length);const g=new hS(h,null,s);r(g)},error:c=>{console.error("CSV parsing error:",c),o(c)}})})}catch(e){throw console.error("Error loading NHL data:",e),e}}async function fS(){const s=["https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/starting_goalies.json","/starting_goalies.json"];for(const e of s)try{const n=await fetch(e);if(!n.ok)continue;const r=await n.json();return console.log("✅ Loaded starting goalies:",r.games?.length||0,"games"),r}catch{console.log(`⚠️ Could not load from ${e}`)}return console.log("ℹ️ No starting goalies file found, using team averages"),null}async function mS(){try{let s;try{if(s=await fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/goalies.csv"),!s.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw file failed, trying local file..."),s=await fetch("/goalies.csv")}if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const e=await s.text();return new Promise((n,r)=>{Gm.parse(e,{header:!0,skipEmptyLines:!0,transformHeader:o=>o.trim(),complete:o=>{const c=o.data.filter(h=>h&&h.name&&h.team&&h.situation);console.log(`✅ Loaded ${c.length} goalie records`),n(c)},error:o=>{console.error("Goalie CSV parsing error:",o),r(o)}})})}catch(s){throw console.error("Error loading goalies.csv:",s),s}}async function gS(){try{console.log("🏒 Loading Money file..."),console.log("🏒 Loading Total file...");let s,e;try{if([s,e]=await Promise.all([fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/odds_money.md"),fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/odds_total.md")]),!s.ok||!e.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw files failed, trying local files..."),[s,e]=await Promise.all([fetch("/odds_money.md"),fetch("/odds_total.md")])}if(!s.ok||!e.ok)return console.warn("One or both odds files not found"),null;const n=await s.text(),r=await e.text();return console.log("✅ Both odds files loaded successfully"),{moneyText:n,totalText:r}}catch(s){return console.warn("Error loading odds files:",s),null}}class pS{constructor(e){this.goalieData=e}getGoalieStats(e,n){if(!this.goalieData||!Array.isArray(this.goalieData))return null;let r=this.goalieData.filter(z=>z.name===e&&z.team===n&&z.situation==="all");if(!r.length){const z=e.toLowerCase().trim();r=this.goalieData.filter(M=>{if(M.team!==n||M.situation!=="all")return!1;const B=M.name.toLowerCase(),te=B.split(" ");return te[te.length-1]===z||B.includes(z)})}if(!r.length)return console.log(`ℹ️ Goalie stats not in database: ${e} (${n})`),null;const o=r[0],c=parseInt(o.games_played)||0;if(c===0)return console.warn(`No games played for: ${e}`),null;parseFloat(o.icetime);const h=parseFloat(o.xGoals)||0,g=parseFloat(o.goals)||0,p=parseFloat(o.ongoal)||0,v=h-g,b=p>0?1-g/p:.9,T=parseFloat(o.highDangerShots)||0,S=parseFloat(o.highDangerGoals)||0,A=T>0?1-S/T:.85;return{name:e,team:n,gamesPlayed:c,gsae:v.toFixed(2),savePct:(b*100).toFixed(1),hdSavePct:(A*100).toFixed(1),xGoalsAgainst:(h/c).toFixed(2),goalsAgainst:(g/c).toFixed(2),lowDangerSavePct:this.calculateLowDangerSavePct(o),mediumDangerSavePct:this.calculateMediumDangerSavePct(o),reboundControl:this.calculateReboundControl(o),recentForm:this.calculateRecentForm(v,c)}}calculateLowDangerSavePct(e){const n=parseFloat(e.lowDangerShots)||0,r=parseFloat(e.lowDangerGoals)||0;return n>0?((1-r/n)*100).toFixed(1):"97.0"}calculateMediumDangerSavePct(e){const n=parseFloat(e.mediumDangerShots)||0,r=parseFloat(e.mediumDangerGoals)||0;return n>0?((1-r/n)*100).toFixed(1):"92.0"}calculateReboundControl(e){const n=parseFloat(e.xRebounds)||0,r=parseFloat(e.rebounds)||0;if(n===0)return"Average";const o=r/n;return o<.9?"Excellent":o>1.15?"Poor":"Average"}calculateRecentForm(e,n){return n<5?"Limited Sample":e>5?"Hot":e<-3?"Cold":"Average"}getLeagueRank(e){const n=parseFloat(e);return n>10?{rank:5,tier:"ELITE"}:n>5?{rank:12,tier:"STRONG"}:n>-5?{rank:18,tier:"AVERAGE"}:{rank:28,tier:"WEAK"}}getGoalieFromStartingData(e,n){if(!n||!n.games)return null;const r=n.games.find(h=>h.away?.team===e||h.home?.team===e);if(!r)return null;const c=r.away?.team===e?r.away:r.home;return!c||!c.goalie?null:c.stats?c.stats:this.getGoalieStats(c.goalie,e)}}class yS{constructor(e){this.teamNameToCode=this.buildTeamMapping(),this.gamesByTeam=this.indexSchedule(e)}buildTeamMapping(){return{"Anaheim Ducks":"ANA","Arizona Coyotes":"ARI","Boston Bruins":"BOS","Buffalo Sabres":"BUF","Calgary Flames":"CGY","Carolina Hurricanes":"CAR","Chicago Blackhawks":"CHI","Colorado Avalanche":"COL","Columbus Blue Jackets":"CBJ","Dallas Stars":"DAL","Detroit Red Wings":"DET","Edmonton Oilers":"EDM","Florida Panthers":"FLA","Los Angeles Kings":"LAK","Minnesota Wild":"MIN","Montreal Canadiens":"MTL","Nashville Predators":"NSH","New Jersey Devils":"NJ","New York Islanders":"NYI","New York Rangers":"NYR","Ottawa Senators":"OTT","Philadelphia Flyers":"PHI","Pittsburgh Penguins":"PIT","San Jose Sharks":"SJ","Seattle Kraken":"SEA","St. Louis Blues":"STL","Tampa Bay Lightning":"TB","Toronto Maple Leafs":"TOR","Utah Mammoth":"UTA","Vancouver Canucks":"VAN","Vegas Golden Knights":"VEG","Washington Capitals":"WSH","Winnipeg Jets":"WPG"}}indexSchedule(e){const n={};return!e||!Array.isArray(e)?(console.warn("⚠️ Schedule data invalid, B2B disabled"),n):(e.forEach(r=>{const o=r.Date,c=r.Visitor,h=r.Home,g=this.teamNameToCode[c],p=this.teamNameToCode[h];if(!o||!g||!p){(c||h)&&console.warn(`⚠️ Could not map team names: ${c} vs ${h}`);return}n[g]||(n[g]=[]),n[p]||(n[p]=[]),n[g].push({date:o,opponent:p,location:"away",timestamp:this.parseDate(o)}),n[p].push({date:o,opponent:g,location:"home",timestamp:this.parseDate(o)})}),Object.values(n).forEach(r=>{r.sort((o,c)=>o.timestamp-c.timestamp)}),console.log(`✅ Indexed schedule for ${Object.keys(n).length} teams (2025-26 season)`),n)}parseDate(e){if(!e)return 0;if(e.includes("-")){const[n,r,o]=e.split("-");return new Date(n,r-1,o).getTime()}if(e.includes("/")){const[n,r,o]=e.split("/");return new Date(o,n-1,r).getTime()}return 0}getDaysRest(e,n){const r=this.gamesByTeam[e];if(!r||r.length===0)return null;const o=this.parseDate(n);if(!o)return null;const c=r.filter(g=>g.timestamp<o).sort((g,p)=>p.timestamp-g.timestamp)[0];return c?Math.floor((o-c.timestamp)/(1e3*60*60*24)):null}isBackToBack(e,n){return this.getDaysRest(e,n)===1}getRestAdjustment(e,n){const r=this.getDaysRest(e,n);return r===null?0:r===1?-.03:r===2?0:r>=3?.04:r<=0?-.04:0}getRestInfo(e,n){const r=this.getDaysRest(e,n),o=this.getRestAdjustment(e,n);return{daysRest:r,isB2B:r===1,adjustment:o,description:r===null?"Season start":r===1?"Back-to-back":r===2?"Normal rest":r>=3?`Extra rest (${r} days)`:"Unknown"}}}const uv={Minnesota:"MIN","N.Y. Rangers":"NYR",Seattle:"SEA",Philadelphia:"PHI",Buffalo:"BUF",Detroit:"DET",Montreal:"MTL",Winnipeg:"WPG",Calgary:"CGY",Carolina:"CAR",Vegas:"VGK","San Jose":"SJS","N.Y. Islanders":"NYI","New Jersey":"NJD",Toronto:"TOR",Vancouver:"VAN",Pittsburgh:"PIT",Washington:"WSH",Edmonton:"EDM",Ottawa:"OTT",Florida:"FLA",Boston:"BOS","Los Angeles":"LAK","St. Louis":"STL",Columbus:"CBJ",Dallas:"DAL",Anaheim:"ANA",Nashville:"NSH",Colorado:"COL",Utah:"UTA","Tampa Bay":"TBL",Chicago:"CHI"};function hv(s){if(!s||s.trim()==="")return console.warn("No odds data provided"),[];const e=[],n=s.split(`
`),r=new Date,o=["SUN","MON","TUE","WED","THU","FRI","SAT"],c=o[r.getDay()],h=r.getMonth()+1,g=r.getDate(),p=`${c} ${h}/${g}`;console.log(`🏒 Starting OddsTrader parser... Looking for: ${p}`);for(let v=0;v<n.length;v++){const b=n[v];if(b.includes(p)){console.log(`
📅 Found game line at ${v}: ${b.substring(0,100)}...`);const B=b.match(/\/\d{1,2}(\d{1,2}:\d{2} [AP]M)/);if(!B){console.log("  ⚠️ No time found, skipping");continue}const te=B[1];console.log(`  ⏰ Time: ${te}`);const $={gameTime:te,awayTeam:null,homeTeam:null,moneyline:{away:null,home:null},puckLine:{away:{spread:null,odds:null},home:{spread:null,odds:null}},total:{line:null,overLine:null,underLine:null,over:null,under:null}};for(const[ue,I]of Object.entries(uv))if(b.includes(ue)){$.awayTeam=I,console.log(`  🏒 Away team: ${ue} (${I})`);break}const ee=b.match(/(o|u)(\d+(?:½)?)\s*([-+]\d{3,})[A-Za-z]/);if(ee){const ue=ee[1],I=ee[2].replace("½",".5"),C=parseInt(ee[3]);ue==="o"?($.total.overLine=parseFloat(I),$.total.over=C,console.log(`  📊 OVER ${I} ${C}`)):($.total.underLine=parseFloat(I),$.total.under=C,console.log(`  📊 UNDER ${I} ${C}`))}else{const ue=b.match(/([-+]\d{3,})(Bet365|Caesars|BetMGM|BetRivers|SugarHouse|FanDuel)/);ue&&($.moneyline.away=parseInt(ue[1]),console.log(`  💰 Away odds: ${$.moneyline.away} (from ${ue[2]})`))}const ne=n[v+1];if(!ne){console.log("  ⚠️ No next line found for home team, skipping");continue}for(const[ue,I]of Object.entries(uv))if(ne.includes(ue)){$.homeTeam=I,console.log(`  🏒 Home team: ${ue} (${I})`);break}const re=ne.match(/(o|u)(\d+(?:½)?)\s*([-+]\d{3,})[A-Za-z]/);if(re){const ue=re[1],I=re[2].replace("½",".5"),C=parseInt(re[3]);ue==="o"?($.total.overLine=parseFloat(I),$.total.over=C,console.log(`  📊 OVER ${I} ${C}`)):($.total.underLine=parseFloat(I),$.total.under=C,console.log(`  📊 UNDER ${I} ${C}`))}else{const ue=ne.match(/([-+]\d{3,})(Bet365|Caesars|BetMGM|BetRivers|SugarHouse|FanDuel)/);ue&&($.moneyline.home=parseInt(ue[1]),console.log(`  💰 Home odds: ${$.moneyline.home} (from ${ue[2]})`))}$.awayTeam&&$.homeTeam?($.total.overLine&&$.total.underLine?($.total.overLine,$.total.underLine,$.total.line=$.total.overLine):$.total.overLine?$.total.line=$.total.overLine:$.total.underLine&&($.total.line=$.total.underLine),$.date=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,e.push($),console.log(`  ✅ Added game: ${$.awayTeam} @ ${$.homeTeam}`),console.log(`     Moneyline: ${$.moneyline.away}/${$.moneyline.home}`),console.log(`     Total: ${$.total.line?`O/U ${$.total.line} (${$.total.over}/${$.total.under})`:"N/A"}`)):console.log(`  ❌ Missing team data - away: ${$.awayTeam}, home: ${$.homeTeam}`)}const T=new Date(r);T.setDate(T.getDate()+1);const S=o[T.getDay()],A=T.getMonth()+1,z=T.getDate(),M=`${S} ${A}/${z}`;if(b.includes(M)){console.log(`
🛑 Reached tomorrow's games (${M}), stopping parser`);break}}return console.log(`
✅ Parsed ${e.length} games from OddsTrader`),e.length>0&&console.log("📋 Games:",e.map(v=>`${v.awayTeam} @ ${v.homeTeam}`).join(", ")),e}function W1(s,e){console.log("🔄 Merging moneylines + totals...");const n=hv(s);console.log(`✅ Parsed ${n.length} games from Money file`);const r=hv(e);console.log(`✅ Parsed ${r.length} games from Total file`);const o=n.map((c,h)=>{const g=r[h];return g&&g.total&&g.total.line?{...c,total:g.total}:c});return console.log(`📋 Final merged games: ${o.map(c=>`${c.awayTeam} @ ${c.homeTeam}`).join(", ")}`),o}function vS(s){return!s||s.length===0?[]:s.map(e=>({away:e.awayTeam,home:e.homeTeam,time:e.time||"TBD"}))}class _S{constructor(e){this.dataProcessor=e,this.leagueAverages={},this.calculateLeagueAverages()}calculateLeagueAverages(){const e=this.dataProcessor.getTeamsBySituation("5on5");if(!e||e.length===0)return;["highDangerxGoalsFor","highDangerxGoalsAgainst","highDangerShotsFor","highDangerShotsAgainst","highDangerGoalsFor","highDangerGoalsAgainst","mediumDangerxGoalsFor","mediumDangerxGoalsAgainst","lowDangerxGoalsFor","lowDangerxGoalsAgainst","xReboundsFor","xReboundsAgainst","reboundGoalsFor","reboundGoalsAgainst","xGoalsFromActualReboundsOfShotsFor","xGoalsFromActualReboundsOfShotsAgainst","blockedShotAttemptsFor","blockedShotAttemptsAgainst","shotAttemptsFor","shotAttemptsAgainst","takeawaysFor","takeawaysAgainst","giveawaysFor","giveawaysAgainst","dZoneGiveawaysFor","dZoneGiveawaysAgainst","hitsFor","hitsAgainst","corsiPercentage","fenwickPercentage","xGoalsPercentage"].forEach(r=>{const o=e.map(c=>c[r]).filter(c=>c!=null&&!isNaN(c));o.length>0&&(this.leagueAverages[r]=o.reduce((c,h)=>c+h,0)/o.length)}),this.calculatePer60Averages()}calculatePer60Averages(){const e=this.dataProcessor.getTeamsBySituation("5on5");if(!e||e.length===0)return;const n=[];e.forEach(r=>{const c=(r.iceTime||1)/60;n.push({hdXgfPer60:(r.highDangerxGoalsFor||0)/c*60,hdXgaPer60:(r.highDangerxGoalsAgainst||0)/c*60,rebXgfPer60:(r.xGoalsFromActualReboundsOfShotsFor||0)/c*60,rebXgaPer60:(r.xGoalsFromActualReboundsOfShotsAgainst||0)/c*60,blocksPer60:(r.blockedShotAttemptsFor||0)/c*60,blocksAgainstPer60:(r.blockedShotAttemptsAgainst||0)/c*60})}),this.leagueAverages.hdXgfPer60=this.avg(n.map(r=>r.hdXgfPer60)),this.leagueAverages.hdXgaPer60=this.avg(n.map(r=>r.hdXgaPer60)),this.leagueAverages.rebXgfPer60=this.avg(n.map(r=>r.rebXgfPer60)),this.leagueAverages.rebXgaPer60=this.avg(n.map(r=>r.rebXgaPer60)),this.leagueAverages.blocksPer60=this.avg(n.map(r=>r.blocksPer60)),this.leagueAverages.blocksAgainstPer60=this.avg(n.map(r=>r.blocksAgainstPer60))}avg(e){return e.reduce((n,r)=>n+r,0)/e.length}getPercentileRank(e,n,r="5on5"){const o=this.dataProcessor.getTeamsBySituation(r);if(!o||o.length===0)return 50;const c=o.find(v=>v.team===e);if(!c||c[n]===void 0)return 50;const h=c[n],g=o.map(v=>v[n]).filter(v=>v!=null&&!isNaN(v)).sort((v,b)=>v-b),p=g.findIndex(v=>v>=h);return Math.round(p/g.length*100)}getLeagueRank(e,n,r="5on5",o=!0){const c=this.dataProcessor.getTeamsBySituation(r);if(!c||c.length===0)return null;const h=c.find(v=>v.team===e);return!h||h[n]===void 0?null:c.map(v=>({team:v.team,value:v[n]||0})).sort((v,b)=>o?b.value-v.value:v.value-b.value).findIndex(v=>v.team===e)+1}getHighDangerMetrics(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);if(!r)return null;const c=(r.iceTime||1)/60;return{hdXgFor:r.highDangerxGoalsFor||0,hdXgAgainst:r.highDangerxGoalsAgainst||0,hdXgfPer60:(r.highDangerxGoalsFor||0)/c*60,hdXgaPer60:(r.highDangerxGoalsAgainst||0)/c*60,hdShotsFor:r.highDangerShotsFor||0,hdShotsAgainst:r.highDangerShotsAgainst||0,hdGoalsFor:r.highDangerGoalsFor||0,hdGoalsAgainst:r.highDangerGoalsAgainst||0,hdConversionRate:r.highDangerShotsFor>0?r.highDangerGoalsFor/r.highDangerShotsFor*100:0,hdSavePercent:r.highDangerShotsAgainst>0?(r.highDangerShotsAgainst-r.highDangerGoalsAgainst)/r.highDangerShotsAgainst*100:0}}getReboundMetrics(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);if(!r)return null;const c=(r.iceTime||1)/60;return{xRebFor:r.xReboundsFor||0,xRebAgainst:r.xReboundsAgainst||0,rebXgFor:r.xGoalsFromActualReboundsOfShotsFor||0,rebXgAgainst:r.xGoalsFromActualReboundsOfShotsAgainst||0,rebXgfPer60:(r.xGoalsFromActualReboundsOfShotsFor||0)/c*60,rebXgaPer60:(r.xGoalsFromActualReboundsOfShotsAgainst||0)/c*60,rebGoalsFor:r.reboundGoalsFor||0,rebGoalsAgainst:r.reboundGoalsAgainst||0,rebConversion:r.xReboundsFor>0?r.reboundGoalsFor/r.xReboundsFor*100:0}}getPhysicalMetrics(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);if(!r)return null;const c=(r.iceTime||1)/60,h=r.shotAttemptsFor||0,g=r.shotAttemptsAgainst||0;return{blockedShots:r.blockedShotAttemptsFor||0,blockedShotsAgainst:r.blockedShotAttemptsAgainst||0,blockingRate:g>0?r.blockedShotAttemptsAgainst/g*100:0,blocksGiven:h>0?r.blockedShotAttemptsFor/h*100:0,hits:r.hitsFor||0,hitsAgainst:r.hitsAgainst||0,hitsPer60:(r.hitsFor||0)/c,takeaways:r.takeawaysFor||0,giveaways:r.giveawaysFor||0,takeawaysPer60:(r.takeawaysFor||0)/c,giveawaysPer60:(r.giveawaysFor||0)/c,dZoneGiveaways:r.dZoneGiveawaysFor||0,dZoneGiveawaysPer60:(r.dZoneGiveawaysFor||0)/c}}getDangerZoneBreakdown(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);return r?{offense:{low:{shots:r.lowDangerShotsFor||0,xGoals:r.lowDangerxGoalsFor||0,goals:r.lowDangerGoalsFor||0},medium:{shots:r.mediumDangerShotsFor||0,xGoals:r.mediumDangerxGoalsFor||0,goals:r.mediumDangerGoalsFor||0},high:{shots:r.highDangerShotsFor||0,xGoals:r.highDangerxGoalsFor||0,goals:r.highDangerGoalsFor||0}},defense:{low:{shots:r.lowDangerShotsAgainst||0,xGoals:r.lowDangerxGoalsAgainst||0,goals:r.lowDangerGoalsAgainst||0},medium:{shots:r.mediumDangerShotsAgainst||0,xGoals:r.mediumDangerxGoalsAgainst||0,goals:r.mediumDangerGoalsAgainst||0},high:{shots:r.highDangerShotsAgainst||0,xGoals:r.highDangerxGoalsAgainst||0,goals:r.highDangerGoalsAgainst||0}}}:null}getRegressionIndicators(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);if(!r)return null;const o=r.shotsOnGoalFor||0,c=r.goalsFor||0,h=r.shotsOnGoalAgainst||0,g=r.goalsAgainst||0,p=o>0?c/o*100:0,v=h>0?(h-g)/h*100:0,b=p+v,T=r.scoreVenueAdjustedxGoalsFor||r.xGoalsFor||0,S=o>0?T/o*100:0,A=p-S;return{pdo:b,shootingPct:p,savePct:v,expectedShPct:S,shPctDiff:A,goalsVsExpected:c-T,isUnderperforming:c<T*.9,isOverperforming:c>T*1.1,regressionExpected:Math.abs(A)>1.5?A:0}}getPossessionMetrics(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);return r?{corsiPct:(r.corsiPercentage||.5)*100,fenwickPct:(r.fenwickPercentage||.5)*100,xGoalsPct:(r.xGoalsPercentage||.5)*100,shotAttempts:r.shotAttemptsFor||0,shotAttemptsAgainst:r.shotAttemptsAgainst||0,faceoffWins:r.faceOffsWonFor||0,faceoffLosses:r.faceOffsWonAgainst||0,faceoffPct:r.faceOffsWonFor+r.faceOffsWonAgainst>0?r.faceOffsWonFor/(r.faceOffsWonFor+r.faceOffsWonAgainst)*100:50}:null}getTier(e){return!e||e<1?"AVERAGE":e<=3?"ELITE":e<=10?"STRONG":e<=22?"AVERAGE":"WEAK"}getStatWithContext(e,n,r="5on5",o=!0){const c=this.dataProcessor.getTeamData(e,r);if(!c)return null;const h=c[n];if(h==null)return null;const g=this.getLeagueRank(e,n,r,o),p=this.getPercentileRank(e,n,r),v=this.leagueAverages[n]||0;return{value:h,rank:g,percentile:p,leagueAvg:v,vsLeague:h-v,vsLeaguePct:v>0?(h-v)/v*100:0,tier:this.getTier(g)}}getSpecialTeamsMetrics(e){const n=this.dataProcessor.getTeamData(e,"5on4"),r=this.dataProcessor.getTeamData(e,"4on5");return!n&&!r?null:{powerPlay:n?{xGF_per60:n.xGF_per60||0,hdXgF_per60:n.highDangerxGoalsFor?n.highDangerxGoalsFor/(n.iceTime/3600):0,rank:this.getLeagueRank(e,"xGF_per60","5on4",!0)}:null,penaltyKill:r?{xGA_per60:r.xGA_per60||0,hdXgA_per60:r.highDangerxGoalsAgainst?r.highDangerxGoalsAgainst/(r.iceTime/3600):0,rank:this.getLeagueRank(e,"xGA_per60","4on5",!1)}:null}}getGoalieMetrics(e,n){if(!n)return null;const r=n.getGoaliesByTeam(e);if(!r||r.length===0)return null;let o=0,c=0,h=0;return r.forEach(g=>{o+=g.goalsagainstextexpected||0,c+=g.highDangerSavePercentage||0,h++}),{avgGSAE:h>0?o/h:0,avgHDSavePercentage:h>0?c/h:0,goalieCount:h}}}class xS{constructor(e){this.analyzer=e}getKeyFactors(e,n,r="TOTAL"){return r==="TOTAL"?this.getTotalBetFactors(e,n):r==="MONEYLINE"?this.getMoneylineFactors(e,n):r==="PUCKLINE"?this.getPucklineFactors(e,n):[]}getTotalBetFactors(e,n){const r=[],o=this.calculateHighDangerFactor(e,n);o&&r.push(o);const c=this.calculateReboundFactor(e,n);c&&r.push(c);const h=this.calculatePhysicalFactor(e,n);h&&r.push(h);const g=this.calculateDisciplineFactor(e,n);g&&r.push(g);const p=this.calculateSpecialTeamsFactor(e,n);p&&r.push(p);const v=this.calculateRegressionFactor(e,n);return v&&r.push(v),r}calculateHighDangerFactor(e,n){const r=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(n);if(!r||!o)return null;const c=r.hdXgfPer60-o.hdXgaPer60,h=o.hdXgfPer60-r.hdXgaPer60,p=(c+h)/2*.25,v=this.analyzer.getLeagueRank(e,"highDangerxGoalsFor","5on5",!0),b=this.analyzer.getLeagueRank(n,"highDangerxGoalsAgainst","5on5",!1),T=c>h?e:h>c?n:"even";return{name:"High-Danger Shot Quality",importance:"CRITICAL",stars:3,impact:p,awayMetric:{value:r.hdXgfPer60,rank:v,label:`${e} Offense (HD-xGF/60)`,detail:`${r.hdGoalsFor} HD goals scored`},homeMetric:{value:o.hdXgaPer60,rank:b,label:`${n} Defense (HD-xGA/60)`,detail:`${o.hdGoalsAgainst} HD goals allowed`},leagueAvg:this.analyzer.leagueAverages.hdXgfPer60||.85,explanation:T==="even"?"Evenly matched high-danger shot creation and prevention. Both teams effective in key scoring areas.":`${T} has the edge in high-danger situations. ${Math.abs(p)>.05?`Quality scoring chances favor this matchup by ~${Math.abs(p*3).toFixed(1)} HD shots/game.`:"Marginal difference in quality chances."}`,dataPoints:{awayHDShots:r.hdShotsFor,homeHDAllowed:o.hdShotsAgainst,awayAdvantage:c,homeAdvantage:h}}}calculateReboundFactor(e,n){const r=this.analyzer.getReboundMetrics(e),o=this.analyzer.getReboundMetrics(n);if(!r||!o)return null;const c=r.rebXgfPer60-o.rebXgaPer60,h=o.rebXgfPer60-r.rebXgaPer60,p=(c+h)/2*.15,v=c>h?e:h>c?n:"even";return{name:"Rebound Control & Second Chances",importance:"CRITICAL",stars:3,impact:p,awayMetric:{value:r.rebXgfPer60,rank:this.analyzer.getLeagueRank(e,"xReboundsFor","5on5",!0),label:`${e} Offense (Reb xGF/60)`,detail:`${r.rebGoalsFor} rebound goals scored`},homeMetric:{value:o.rebXgaPer60,rank:this.analyzer.getLeagueRank(n,"xReboundsAgainst","5on5",!1),label:`${n} Defense (Reb xGA/60)`,detail:`${o.rebGoalsAgainst} rebound goals allowed`},leagueAvg:this.analyzer.leagueAverages.rebXgfPer60||10,explanation:v==="even"?"Evenly matched rebound creation and control. Expect typical second-chance opportunities.":`${v} creates more second-chance opportunities in this matchup. ${Math.abs(p)>.05?`Could add ~${Math.abs(p*2).toFixed(1)} extra scoring chances.`:"Minor impact on total scoring."}`,dataPoints:{awayRebGoals:r.rebGoalsFor,homeRebAllowed:o.rebGoalsAgainst,awayAdvantage:c,homeAdvantage:h}}}calculatePhysicalFactor(e,n){const r=this.analyzer.getPhysicalMetrics(e),o=this.analyzer.getPhysicalMetrics(n);if(!r||!o)return null;o.blockedShotsAgainst,r.blockedShotsAgainst;const c=this.analyzer.leagueAverages.blocksAgainstPer60||30,g=-(((r.blockingRate+o.blockingRate)/2-c)/5)*.08,p=this.analyzer.getLeagueRank(n,"blockedShotAttemptsAgainst","5on5",!0);return{name:"Shot Blocking & Physical Defense",importance:"HIGH",stars:2,impact:g,awayMetric:{value:r.blockingRate,label:`${e} Shot Block %`,detail:`${r.blockedShotsAgainst} blocks`},homeMetric:{value:o.blockingRate,rank:p,label:`${n} Shot Block %`,detail:`${o.blockedShotsAgainst} blocks`},leagueAvg:c,explanation:`Physical teams that block shots effectively reduce scoring chances. ${g<0?`Above-average blocking removes ${Math.abs(g*10).toFixed(1)} shot attempts/game.`:"Below-average blocking allows more dangerous attempts."}`,dataPoints:{awayBlocks:r.blockedShotsAgainst,homeBlocks:o.blockedShotsAgainst,awayHits:r.hits,homeHits:o.hits}}}calculateDisciplineFactor(e,n){const r=this.analyzer.getPhysicalMetrics(e),o=this.analyzer.getPhysicalMetrics(n);if(!r||!o)return null;const c=this.analyzer.leagueAverages.dZoneGiveawaysFor||12,h=(r.dZoneGiveawaysPer60+o.dZoneGiveawaysPer60)/2,p=(c-h)*.02,v=this.analyzer.leagueAverages.takeawaysFor||7,T=((r.takeawaysPer60+o.takeawaysPer60)/2-v)*.015,S=p+T;return{name:"Defensive Zone Discipline",importance:"HIGH",stars:2,impact:-Math.abs(S),awayMetric:{value:r.dZoneGiveaways,label:`${e} DZ Giveaways`,detail:`${r.takeaways} takeaways`},homeMetric:{value:o.dZoneGiveaways,label:`${n} DZ Giveaways`,detail:`${o.takeaways} takeaways`},leagueAvg:c,explanation:`Careful puck management in the defensive zone prevents high-danger chances. ${S<0?"Both teams are disciplined, limiting turnovers.":"Defensive mistakes create extra opportunities."}`,dataPoints:{awayDZGA:r.dZoneGiveaways,homeDZGA:o.dZoneGiveaways,awayTakeaways:r.takeaways,homeTakeaways:o.takeaways}}}calculateSpecialTeamsFactor(e,n){const r=this.analyzer.getHighDangerMetrics(e,"5on4"),o=this.analyzer.getHighDangerMetrics(n,"4on5"),c=this.analyzer.getHighDangerMetrics(n,"5on4"),h=this.analyzer.getHighDangerMetrics(e,"4on5");if(!r||!o||!c||!h)return null;const g=(r.hdXgfPer60||0)-(o.hdXgaPer60||0),p=(c.hdXgfPer60||0)-(h.hdXgaPer60||0),b=(g+p)/2*.07;return{name:"Special Teams Matchup",importance:"HIGH",stars:2,impact:b,awayMetric:{value:r.hdXgfPer60||0,label:`${e} PP HD-xGF/60`,detail:`vs ${o.hdXgaPer60?.toFixed(2)||0} PK`},homeMetric:{value:c.hdXgfPer60||0,label:`${n} PP HD-xGF/60`,detail:`vs ${h.hdXgaPer60?.toFixed(2)||0} PK`},leagueAvg:8.5,explanation:`Power plays account for ~7% of game time but can swing totals significantly. ${Math.abs(b)<.1?"Both matchups are balanced - PP and PK quality neutralize.":b>0?`Power plays have the advantage, adding ${b.toFixed(2)} expected goals.`:"Penalty kills are dominant, limiting PP opportunities."}`,dataPoints:{awayPPQuality:r.hdXgfPer60,homePKQuality:o.hdXgaPer60,homePPQuality:c.hdXgfPer60,awayPKQuality:h.hdXgaPer60}}}calculateRegressionFactor(e,n){const r=this.analyzer.getRegressionIndicators(e),o=this.analyzer.getRegressionIndicators(n);if(!r||!o)return null;const c=r.goalsVsExpected/(r.gamesSoFar||8),h=o.goalsVsExpected/(o.gamesSoFar||8),g=(c+h)*-.4;return{name:"Shooting Talent vs Luck",importance:"MODERATE",stars:1,impact:g,awayMetric:{value:r.shootingPct,label:`${e} Shooting %`,detail:`${r.pdo.toFixed(1)} PDO`},homeMetric:{value:o.shootingPct,label:`${n} Shooting %`,detail:`${o.pdo.toFixed(1)} PDO`},leagueAvg:r.expectedShPct||10,explanation:`Teams shooting ${r.isUnderperforming||o.isUnderperforming?"below":"above"} their expected rates should regress toward the mean. ${g<0?`Cold shooting is due for a bounce-back, adding ~${Math.abs(g).toFixed(2)} goals.`:"Hot shooting should cool off slightly."}`,dataPoints:{awayPDO:r.pdo,homePDO:o.pdo,awayGoalsVsXg:r.goalsVsExpected,homeGoalsVsXg:o.goalsVsExpected}}}generateStory(e,n,r){if(!e||e.length===0)return"Analyzing statistical matchup...";const c=[...e].sort((T,S)=>Math.abs(S.impact)-Math.abs(T.impact)).slice(0,3),h=e.reduce((T,S)=>T+S.impact,0),g=h<0;let p="";const v=c[0];v.importance==="CRITICAL"&&(p+=`${v.name.toLowerCase()} is the key driver. `),g?p+="Strong defensive metrics suggest a low-scoring affair. ":p+="Offensive advantages point to a higher-scoring game. ",c.forEach((T,S)=>{if(S<2&&T.explanation){const A=T.explanation.split(".")[0];A&&A.length<100&&(p+=A+". ")}});const b=Math.abs(h);return b>.5?p+=`Combined factors create a ${b.toFixed(1)}-goal edge ${g?"UNDER":"OVER"} market expectations.`:p+="Statistical edges are modest, suggesting the market line is fairly efficient.",p}calculateTotalImpact(e){return!e||e.length===0?0:e.reduce((n,r)=>n+r.impact,0)}getMoneylineFactors(e,n){const r=[],o=this.calculateExpectedGoalsDifferential(e,n);o&&r.push(o);const c=this.calculateGoalieAdvantage(e,n);c&&r.push(c);const h=this.calculateOffensiveRating(e,n);h&&r.push(h);const g=this.calculateDefensiveRating(e,n);g&&r.push(g);const p=this.calculateSpecialTeamsEdge(e,n);p&&r.push(p);const v=this.calculatePossessionAdvantage(e,n);return v&&r.push(v),r}calculateExpectedGoalsDifferential(e,n){const r=this.analyzer.dataProcessor.getTeamData(e,"5on5"),o=this.analyzer.dataProcessor.getTeamData(n,"5on5");if(!r||!o)return null;const c=r.iceTime/60,h=o.iceTime/60,g=(r.xGoalsFor||0)/c*60,p=(r.xGoalsAgainst||0)/c*60,v=(o.xGoalsFor||0)/h*60,b=(o.xGoalsAgainst||0)/h*60,T=(g+b)/2,S=(v+p)/2,A=T-S;return{name:"Expected Goals",importance:"CRITICAL",stars:3,impact:A,awayMetric:{value:T,rank:this.analyzer.getLeagueRank(e,"xGoalsFor","5on5",!0),label:`${e} Expected Goals`,detail:`${g.toFixed(2)} xGF/60`},homeMetric:{value:S,rank:this.analyzer.getLeagueRank(n,"xGoalsFor","5on5",!0),label:`${n} Expected Goals`,detail:`${v.toFixed(2)} xGF/60`},leagueAvg:2.8,explanation:A>0?`${e} projects to score ${Math.abs(A).toFixed(2)} more goals based on shot quality.`:`${n} projects to score ${Math.abs(A).toFixed(2)} more goals based on shot quality.`,dataPoints:{awayXgf:g,awayXga:p,homeXgf:v,homeXga:b}}}calculateGoalieAdvantage(e,n){return null}calculateOffensiveRating(e,n){const r=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(n);if(!r||!o)return null;const c=r.hdXgfPer60||0,h=o.hdXgfPer60||0,g=c-h;return{name:"Offensive Rating",importance:"HIGH",stars:2,impact:g*.2,awayMetric:{value:c,rank:this.analyzer.getLeagueRank(e,"highDangerxGoalsFor","5on5",!0),label:`${e} HD-xGF/60`,detail:`${r.hdGoalsFor} HD goals`},homeMetric:{value:h,rank:this.analyzer.getLeagueRank(n,"highDangerxGoalsFor","5on5",!0),label:`${n} HD-xGF/60`,detail:`${o.hdGoalsFor} HD goals`},leagueAvg:.85,explanation:g>0?`${e} generates ${(g/h*100).toFixed(0)}% more high-danger chances.`:`${n} generates ${(Math.abs(g)/c*100).toFixed(0)}% more high-danger chances.`,dataPoints:{awayHDGoals:r.hdGoalsFor,homeHDGoals:o.hdGoalsFor}}}calculateDefensiveRating(e,n){const r=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(n);if(!r||!o)return null;const c=r.hdXgaPer60||0,h=o.hdXgaPer60||0,g=h-c;return{name:"Defensive Rating",importance:"HIGH",stars:2,impact:g*.2,awayMetric:{value:c,rank:this.analyzer.getLeagueRank(e,"highDangerxGoalsAgainst","5on5",!1),label:`${e} HD-xGA/60`,detail:`${r.hdGoalsAgainst} HD goals allowed`},homeMetric:{value:h,rank:this.analyzer.getLeagueRank(n,"highDangerxGoalsAgainst","5on5",!1),label:`${n} HD-xGA/60`,detail:`${o.hdGoalsAgainst} HD goals allowed`},leagueAvg:.85,explanation:g>0?`${e} allows ${(g/h*100).toFixed(0)}% fewer high-danger chances.`:`${n} allows ${(Math.abs(g)/c*100).toFixed(0)}% fewer high-danger chances.`,dataPoints:{awayHDAllowed:r.hdGoalsAgainst,homeHDAllowed:o.hdGoalsAgainst}}}calculateSpecialTeamsEdge(e,n){const r=this.analyzer.getHighDangerMetrics(e,"5on4"),o=this.analyzer.getHighDangerMetrics(n,"5on4");if(!r||!o)return null;const c=r.hdXgfPer60||0,h=o.hdXgfPer60||0,g=c-h;return{name:"Special Teams",importance:"MODERATE",stars:1,impact:g*.05,awayMetric:{value:c,label:`${e} PP Quality`,detail:`${c.toFixed(2)} HD-xGF/60`},homeMetric:{value:h,label:`${n} PP Quality`,detail:`${h.toFixed(2)} HD-xGF/60`},leagueAvg:8.5,explanation:g>0?`${e} has superior power play execution.`:`${n} has superior power play execution.`,dataPoints:{awayPP:c,homePP:h}}}calculatePossessionAdvantage(e,n){const r=this.analyzer.getPossessionMetrics(e),o=this.analyzer.getPossessionMetrics(n);if(!r||!o)return null;const c=r.corsiForPct||50,h=o.corsiForPct||50,g=c-h;return{name:"Possession & Control",importance:"MODERATE",stars:1,impact:g*.02,awayMetric:{value:c,label:`${e} Corsi%`,detail:`${r.shotsForPct?.toFixed(1)}% shots`},homeMetric:{value:h,label:`${n} Corsi%`,detail:`${o.shotsForPct?.toFixed(1)}% shots`},leagueAvg:50,explanation:g>0?`${e} controls ${Math.abs(g).toFixed(1)}% more of the play.`:`${n} controls ${Math.abs(g).toFixed(1)}% more of the play.`,dataPoints:{awayCF:c,homeCF:h,awaySF:r.shotsForPct,homeSF:o.shotsForPct}}}getPucklineFactors(e,n){return[]}}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),dv=s=>{const e=TS(s);return e.charAt(0).toUpperCase()+e.slice(1)},K1=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),SS=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ES={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=de.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:h,...g},p)=>de.createElement("svg",{ref:p,...ES,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:K1("lucide",o),...!c&&!SS(g)&&{"aria-hidden":"true"},...g},[...h.map(([v,b])=>de.createElement(v,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(s,e)=>{const n=de.forwardRef(({className:r,...o},c)=>de.createElement(AS,{ref:c,iconNode:e,className:K1(`lucide-${bS(dv(s))}`,`lucide-${s}`,r),...o}));return n.displayName=dv(s),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],oh=it("activity",wS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],CS=it("arrow-right",RS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Hm=it("award",IS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ou=it("book-open",DS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Qa=it("calendar",NS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],lh=it("chart-column",jS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mm=it("chevron-down",OS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gm=it("chevron-up",PS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],X1=it("circle-alert",kS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Q1=it("circle-check-big",MS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],VS=it("clock",zS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],BS=it("code",LS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],US=it("database",FS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],HS=it("dollar-sign",GS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],qS=it("download",$S);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],KS=it("menu",WS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Hr=it("shield",XS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],YS=it("star",QS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Yi=it("target",ZS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],fv=it("trending-down",JS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],er=it("trending-up",eE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nE=it("triangle-alert",tE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],rE=it("trophy",iE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aE=it("x",sE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Y1=it("zap",oE),lE=()=>{const s=ZT(),[e,n]=de.useState(!1),r=[{path:"/",label:"Today's Games",icon:"🎯"},{path:"/dashboard",label:"Dashboard",icon:"📊"},{path:"/performance",label:"Performance",icon:"📈"},{path:"/methodology",label:"Methodology",icon:"📚"},{path:"/inspector",label:"Data Inspector",icon:"🔍"}];return d.jsxs("nav",{style:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"var(--color-background)",borderBottom:"1px solid var(--color-border)",padding:"0.75rem 1rem"},children:[d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx(Hu,{to:"/",style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--color-accent)",textDecoration:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:"🏒 NHL Savant"}),d.jsx("div",{className:"desktop-nav",style:{display:"none",gap:"0.5rem"},children:r.map(o=>d.jsxs(Hu,{to:o.path,style:{padding:"0.5rem 0.875rem",borderRadius:"6px",fontSize:"0.875rem",fontWeight:"500",textDecoration:"none",color:s.pathname===o.path?"var(--color-accent)":"var(--color-text-secondary)",backgroundColor:s.pathname===o.path?"rgba(212, 175, 55, 0.1)":"transparent",transition:"all 0.2s",whiteSpace:"nowrap"},children:[d.jsx("span",{style:{marginRight:"0.375rem"},children:o.icon}),o.label]},o.path))}),d.jsx("button",{className:"mobile-menu-btn",onClick:()=>n(!e),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"transparent",border:"1px solid var(--color-border)",borderRadius:"6px",color:"var(--color-text-primary)",cursor:"pointer"},children:e?d.jsx(aE,{size:20}):d.jsx(KS,{size:20})})]}),e&&d.jsx("div",{className:"mobile-nav",style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"var(--color-background)",borderBottom:"1px solid var(--color-border)",padding:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)"},children:r.map(o=>d.jsxs(Hu,{to:o.path,onClick:()=>n(!1),style:{display:"block",padding:"0.875rem 1rem",borderRadius:"6px",fontSize:"0.938rem",fontWeight:"500",textDecoration:"none",color:s.pathname===o.path?"var(--color-accent)":"var(--color-text-secondary)",backgroundColor:s.pathname===o.path?"rgba(212, 175, 55, 0.1)":"transparent",marginBottom:"0.25rem"},children:[d.jsx("span",{style:{marginRight:"0.5rem",fontSize:"1.125rem"},children:o.icon}),o.label]},o.path))}),d.jsx("style",{children:`
        @media (min-width: 768px) {
          .desktop-nav { display: flex !important; }
          .mobile-menu-btn { display: none !important; }
        }
        @media (max-width: 767px) {
          .desktop-nav { display: none !important; }
          .mobile-menu-btn { display: flex !important; }
        }
      `})]})},cE=({dataProcessor:s,loading:e,error:n})=>{if(e)return d.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 mb-6",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"animate-spin",children:d.jsx(US,{className:"w-5 h-5 text-yellow-400"})}),d.jsx("span",{className:"text-gray-300",children:"Loading NHL data..."})]})});if(n)return d.jsx("div",{className:"bg-red-900/30 border border-red-500 rounded-lg p-4 mb-6",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(X1,{className:"w-5 h-5 text-red-400"}),d.jsx("span",{className:"text-red-300",children:n})]})});if(!s)return null;const r=s.processedData?.length||0,o=[...new Set(s.processedData.map(h=>h.name))].length,c=[...new Set(s.processedData.map(h=>h.situation))].length;return d.jsx("div",{className:"bg-gradient-to-r from-green-900/30 to-green-900/10 border border-green-500/50 rounded-lg p-4 mb-6",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Q1,{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-green-300 mb-1",children:"Data Verified & Loaded"}),d.jsxs("div",{className:"grid grid-cols-3 gap-6 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Data Points: "}),d.jsx("span",{className:"font-bold text-white",children:r})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Teams: "}),d.jsx("span",{className:"font-bold text-white",children:o})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Situations: "}),d.jsx("span",{className:"font-bold text-white",children:c})]})]}),d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"All calculations verified and ready for analysis"})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-xs text-gray-400",children:"Source:"}),d.jsx("p",{className:"text-xs text-gray-300 font-mono",children:"nhl_data.csv"})]})]})})},uE=({dataProcessor:s,loading:e,error:n})=>{const[r,o]=de.useState([]),[c,h]=de.useState(null),[g,p]=de.useState(!1);de.useEffect(()=>{const b=()=>{p(window.innerWidth<=640)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),de.useEffect(()=>{if(s){const b=s.getTopBettingOpportunities();o(b);const T=s.getTeamsBySituation("all"),S=T.reduce((M,B)=>M+B.pdo,0)/T.length,A=T.reduce((M,B)=>M+B.xGD_per60,0)/T.length,z=s.findRegressionCandidates();h({totalTeams:T.length,avgPDO:S.toFixed(1),avgXGD:A.toFixed(2),overperformingTeams:z.overperforming.length,underperformingTeams:z.underperforming.length})}},[s]);const v=b=>b>=70?"high":b>=50?"medium":"low";return d.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},className:"animate-fade-in",children:[d.jsxs("div",{style:{padding:g?"2rem 1rem 1.5rem":"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"500px",height:"500px",background:"radial-gradient(circle, var(--color-accent-glow) 0%, transparent 70%)",opacity:.3,pointerEvents:"none"}}),d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[d.jsx("div",{style:{width:"44px",height:"44px",background:"linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px var(--color-accent-glow)"},children:d.jsx(lh,{size:24,color:"var(--color-background)",strokeWidth:2.5})}),d.jsx("h1",{className:"text-gradient",style:{fontSize:g?"1.75rem":"2.25rem",fontWeight:"800"},children:"Analytics Dashboard"})]}),d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:g?"0.875rem":"0.938rem",lineHeight:"1.7",maxWidth:"800px",marginLeft:g?"0":"60px"},children:"Real-time statistical overview of betting opportunities based on institutional-grade analytics. Featuring xG differentials, PDO regression, and predictive modeling."})]})]}),d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:g?"1rem":"2rem"},children:[d.jsx("div",{style:{marginBottom:g?"1.5rem":"2rem"},children:d.jsx(cE,{dataProcessor:s,loading:e,error:n})}),c&&d.jsxs("div",{className:"dashboard-stats-grid",style:{display:"grid",gridTemplateColumns:g?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:g?"0.75rem":"1rem",marginBottom:g?"1.5rem":"2rem"},children:[d.jsxs("div",{className:"stat-card elevated-card",style:{padding:g?"1.25rem":"1.5rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"60px",height:"60px",opacity:.1},children:d.jsx(Yi,{size:60,color:"var(--color-accent)"})}),d.jsx("div",{className:"stat-card-value metric-number",style:{fontSize:g?"2.25rem":"2.75rem",marginBottom:"0.5rem"},children:c.totalTeams}),d.jsx("div",{className:"stat-card-label",style:{fontSize:g?"0.688rem":"0.75rem"},children:"TEAMS ANALYZED"}),d.jsx("div",{className:"stat-card-description",style:{fontSize:g?"0.75rem":"0.813rem"},children:"Complete league coverage"})]}),d.jsxs("div",{className:"stat-card elevated-card",style:{padding:g?"1.25rem":"1.5rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"60px",height:"60px",opacity:.1},children:d.jsx(oh,{size:60,color:"var(--color-accent)"})}),d.jsx("div",{className:"stat-card-value metric-number",style:{fontSize:g?"2.25rem":"2.75rem",marginBottom:"0.5rem"},children:c.avgPDO}),d.jsx("div",{className:"stat-card-label",style:{fontSize:g?"0.688rem":"0.75rem"},children:"AVG PDO"}),d.jsx("div",{className:"stat-card-description",style:{fontSize:g?"0.75rem":"0.813rem"},children:"Luck regression metric"})]}),d.jsxs("div",{className:"stat-card elevated-card",style:{padding:g?"1.25rem":"1.5rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"60px",height:"60px",opacity:.1},children:d.jsx(er,{size:60,color:"var(--color-accent)"})}),d.jsx("div",{className:"stat-card-value metric-number",style:{fontSize:g?"2.25rem":"2.75rem",marginBottom:"0.5rem"},children:c.avgXGD}),d.jsx("div",{className:"stat-card-label",style:{fontSize:g?"0.688rem":"0.75rem"},children:"AVG XG DIFFERENTIAL"}),d.jsx("div",{className:"stat-card-description",style:{fontSize:g?"0.75rem":"0.813rem"},children:"Score-adjusted per 60"})]}),d.jsxs("div",{className:"stat-card elevated-card",style:{padding:g?"1.25rem":"1.5rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"60px",height:"60px",opacity:.1},children:d.jsx(Hm,{size:60,color:"var(--color-accent)"})}),d.jsx("div",{className:"stat-card-value metric-number",style:{fontSize:g?"2.25rem":"2.75rem",marginBottom:"0.5rem"},children:c.overperformingTeams+c.underperformingTeams}),d.jsx("div",{className:"stat-card-label",style:{fontSize:g?"0.688rem":"0.75rem"},children:"BETTING EDGES"}),d.jsx("div",{className:"stat-card-description",style:{fontSize:g?"0.75rem":"0.813rem"},children:"PDO anomaly detection"})]})]}),d.jsxs("div",{className:"elevated-card",children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:g?"1rem":"1.5rem"},children:[d.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:g?"1.25rem":"1.5rem"},children:[d.jsx(lh,{size:g?18:20}),"Top Betting Opportunities"]}),d.jsx(Hu,{to:"/opportunities",style:{color:"var(--color-accent)",textDecoration:"none",fontSize:g?"0.813rem":"0.875rem",fontWeight:"600"},children:"View All →"})]}),r.length===0?d.jsx("div",{style:{padding:g?"2rem 1rem":"3rem",textAlign:"center"},children:d.jsx("p",{style:{color:"var(--color-text-muted)",fontSize:g?"0.875rem":"1rem"},children:"No significant opportunities found in current data"})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"desktop-only",style:{overflowX:"auto"},children:d.jsxs("table",{className:"data-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"TEAM"}),d.jsx("th",{children:"TYPE"}),d.jsx("th",{children:"RECOMMENDATION"}),d.jsx("th",{children:"REASON"}),d.jsx("th",{style:{textAlign:"right"},children:"CONFIDENCE"}),d.jsx("th",{style:{textAlign:"right"},children:"EDGE"})]})}),d.jsx("tbody",{children:r.slice(0,10).map((b,T)=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("span",{style:{fontWeight:600,color:"var(--color-text-primary)"},children:b.team})}),d.jsx("td",{children:d.jsx("span",{className:b.type==="REGRESSION"?"badge-danger":"badge-accent",style:{display:"inline-block",padding:"0.25rem 0.5rem",borderRadius:"2px",fontSize:"0.625rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",border:"1px solid"},children:b.type.replace("_"," ")})}),d.jsx("td",{children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[b.recommendation.includes("UNDER")||b.recommendation.includes("AGAINST")?d.jsx(fv,{size:14,color:"var(--color-danger)"}):d.jsx(er,{size:14,color:"var(--color-success)"}),d.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:b.recommendation})]})}),d.jsx("td",{style:{fontSize:"0.8125rem",maxWidth:"300px"},children:b.reason}),d.jsx("td",{style:{textAlign:"right"},children:d.jsxs("div",{style:{textAlign:"right"},children:[d.jsxs("div",{style:{fontWeight:600,color:"var(--color-text-primary)",marginBottom:"0.25rem",fontSize:"0.875rem"},children:[b.confidence.toFixed(0),"%"]}),d.jsx("div",{className:"confidence-bar",style:{width:"60px",marginLeft:"auto"},children:d.jsx("div",{className:`confidence-bar-fill ${v(b.confidence)}`,style:{width:`${b.confidence}%`}})})]})}),d.jsx("td",{style:{textAlign:"right"},children:d.jsxs("span",{style:{fontWeight:600,color:"var(--color-success)",fontSize:"0.875rem"},children:[(b.edge*100).toFixed(1),"%"]})})]},T))})]})}),d.jsx("div",{className:"mobile-only",children:r.slice(0,10).map((b,T)=>d.jsxs("div",{style:{backgroundColor:"var(--color-background)",border:"1px solid var(--color-border)",borderRadius:"6px",padding:"1rem",marginBottom:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:b.team}),d.jsx("span",{className:b.type==="REGRESSION"?"badge-danger":"badge-accent",style:{display:"inline-block",padding:"0.25rem 0.5rem",borderRadius:"2px",fontSize:"0.625rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",border:"1px solid"},children:b.type.replace("_"," ")})]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-success)",lineHeight:1},children:[(b.edge*100).toFixed(1),"%"]}),d.jsx("div",{style:{fontSize:"0.688rem",color:"var(--color-text-muted)",marginTop:"0.25rem"},children:"Edge"})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[b.recommendation.includes("UNDER")||b.recommendation.includes("AGAINST")?d.jsx(fv,{size:16,color:"var(--color-danger)"}):d.jsx(er,{size:16,color:"var(--color-success)"}),d.jsx("span",{style:{fontSize:"0.938rem",fontWeight:"600",color:"var(--color-text-primary)"},children:b.recommendation})]}),d.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:"1.5",marginBottom:"0.75rem"},children:b.reason}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:"1px solid var(--color-border)"},children:[d.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Confidence"}),d.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"var(--color-text-primary)"},children:[b.confidence.toFixed(0),"%"]})]})]},T))})]})]})]})]})},hE=({dataProcessor:s})=>{const[e,n]=de.useState(""),[r,o]=de.useState("all"),[c,h]=de.useState(null),[g,p]=de.useState(null),[v,b]=de.useState([]);de.useEffect(()=>{if(s){const S=[...new Set(s.processedData.map(A=>A.name))].sort();b(S),S.length>0&&n(S[0])}},[s]),de.useEffect(()=>{if(s&&e){const S=s.processedData.find(A=>A.name===e&&A.situation===r);if(h(S),S){const A=S.goalsFor/S.shotsOnGoalFor*100,z=(1-S.goalsAgainst/S.shotsOnGoalAgainst)*100,M=A+z,B={pdo:{formula:"(Goals For / Shots On Goal For) × 100 + (1 - Goals Against / Shots On Goal Against) × 100",shootingPct:A.toFixed(2),savePct:z.toFixed(2),calculation:`(${S.goalsFor} / ${S.shotsOnGoalFor}) × 100 + (1 - ${S.goalsAgainst} / ${S.shotsOnGoalAgainst}) × 100`,step1:`${A.toFixed(2)} + ${z.toFixed(2)}`,result:S.pdo.toFixed(2),match:Math.abs(S.pdo-M)<.1},xGF_per60:{formula:"(xGoals For / Ice Time in seconds) × 3600",calculation:`(${S.xGoalsFor} / ${S.iceTime}) × 3600`,result:S.xGF_per60?.toFixed(2)||"N/A",expected:(S.xGoalsFor/S.iceTime*3600).toFixed(2),match:S.xGF_per60?Math.abs(S.xGF_per60-S.xGoalsFor/S.iceTime*3600)<.01:!1},xGA_per60:{formula:"(xGoals Against / Ice Time in seconds) × 3600",calculation:`(${S.xGoalsAgainst} / ${S.iceTime}) × 3600`,result:S.xGA_per60?.toFixed(2)||"N/A",expected:(S.xGoalsAgainst/S.iceTime*3600).toFixed(2),match:S.xGA_per60?Math.abs(S.xGA_per60-S.xGoalsAgainst/S.iceTime*3600)<.01:!1},shootingEff:{formula:"Actual Goals For / Expected Goals For",calculation:`${S.goalsFor} / ${S.xGoalsFor}`,result:S.shooting_efficiency?.toFixed(3)||"N/A",expected:(S.goalsFor/S.xGoalsFor).toFixed(3),match:S.shooting_efficiency?Math.abs(S.shooting_efficiency-S.goalsFor/S.xGoalsFor)<.01:!1},xGD_per60:{formula:"xGF/60 - xGA/60",calculation:`${S.xGF_per60?.toFixed(2)} - ${S.xGA_per60?.toFixed(2)}`,result:S.xGD_per60?.toFixed(2)||"N/A",expected:(S.xGF_per60-S.xGA_per60).toFixed(2),match:S.xGD_per60?Math.abs(S.xGD_per60-(S.xGF_per60-S.xGA_per60))<.01:!1}};p(B)}}},[s,e,r]);const T=()=>{if(!c||!g)return;const S=`NHL SAVANT - DATA VERIFICATION REPORT
Team: ${e}
Situation: ${r}
Generated: ${new Date().toLocaleString()}

RAW CSV DATA:
-------------
Goals For: ${c.goalsFor}
Shots On Goal For: ${c.shotsOnGoalFor}
Goals Against: ${c.goalsAgainst}
Shots On Goal Against: ${c.shotsOnGoalAgainst}
xGoals For: ${c.xGoalsFor}
xGoals Against: ${c.xGoalsAgainst}
Ice Time: ${c.iceTime}

CALCULATED METRICS:
------------------
PDO:
  Formula: ${g.pdo.formula}
  Calculation: ${g.pdo.calculation}
  Shooting %: ${g.pdo.shootingPct}
  Save %: ${g.pdo.savePct}
  Result: ${g.pdo.result}
  ✓ Verified: ${g.pdo.match?"PASS":"FAIL"}

xGF/60:
  Formula: ${g.xGF_per60.formula}
  Calculation: ${g.xGF_per60.calculation}
  Result: ${g.xGF_per60.result}
  Expected: ${g.xGF_per60.expected}
  ✓ Verified: ${g.xGF_per60.match?"PASS":"FAIL"}

Shooting Efficiency:
  Formula: ${g.shootingEff.formula}
  Calculation: ${g.shootingEff.calculation}
  Result: ${g.shootingEff.result}
  Expected: ${g.shootingEff.expected}
  ✓ Verified: ${g.shootingEff.match?"PASS":"FAIL"}
`,A=new Blob([S],{type:"text/plain"}),z=URL.createObjectURL(A),M=document.createElement("a");M.href=z,M.download=`data-verification-${e}-${r}.txt`,M.click(),URL.revokeObjectURL(z)};return s?d.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},children:[d.jsx("div",{style:{padding:"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)"},children:d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[d.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Data Inspector"}),d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"0.875rem"},children:"Verify raw CSV data against calculated metrics with step-by-step breakdowns"})]})}),d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem"},children:[d.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",alignItems:"center"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Team"}),d.jsx("select",{value:e,onChange:S=>n(S.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",fontSize:"0.875rem"},children:v.map(S=>d.jsx("option",{value:S,children:S},S))})]}),d.jsxs("div",{style:{flex:1},children:[d.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Situation"}),d.jsxs("select",{value:r,onChange:S=>o(S.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",fontSize:"0.875rem"},children:[d.jsx("option",{value:"all",children:"All Situations"}),d.jsx("option",{value:"5on5",children:"5-on-5"}),d.jsx("option",{value:"5on4",children:"Power Play (5-on-4)"}),d.jsx("option",{value:"4on5",children:"Penalty Kill (4-on-5)"}),d.jsx("option",{value:"other",children:"Other"})]})]}),d.jsx("div",{style:{marginTop:"1.5rem"},children:d.jsxs("button",{onClick:T,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(qS,{size:16}),"Export Report"]})})]}),c&&g&&d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(600px, 1fr))",gap:"1rem"},children:[d.jsxs("div",{className:"card",children:[d.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.125rem"},children:"Raw CSV Data"}),d.jsx("div",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"0.8125rem",lineHeight:"1.8"},children:d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"0.5rem 2rem"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"team:"}),d.jsx("span",{style:{color:"var(--color-text-primary)",textAlign:"right"},children:c.team}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"situation:"}),d.jsx("span",{style:{color:"var(--color-text-primary)",textAlign:"right"},children:c.situation}),d.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-border)",gridColumn:"1 / -1",margin:"0.5rem 0"}}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"goalsFor:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.goalsFor}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"shotsOnGoalFor:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.shotsOnGoalFor}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"goalsAgainst:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.goalsAgainst}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"shotsOnGoalAgainst:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.shotsOnGoalAgainst}),d.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-border)",gridColumn:"1 / -1",margin:"0.5rem 0"}}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"xGoalsFor:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.xGoalsFor}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"xGoalsAgainst:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.xGoalsAgainst}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"iceTime:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.iceTime})]})})]}),d.jsxs("div",{className:"card",children:[d.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.125rem"},children:"Calculated Metrics"}),Object.entries(g).map(([S,A])=>d.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--color-border)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[d.jsx("h3",{style:{fontSize:"0.875rem",textTransform:"uppercase",fontWeight:600},children:S.replace("_"," ")}),A.match?d.jsx(Q1,{size:16,color:"var(--color-success)"}):d.jsx(X1,{size:16,color:"var(--color-danger)"})]}),d.jsxs("div",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"0.75rem",lineHeight:"1.6",color:"var(--color-text-secondary)"},children:[d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Formula: "}),d.jsx("span",{style:{color:"var(--color-text-primary)"},children:A.formula})]}),d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Calculation: "}),d.jsx("span",{style:{color:"var(--color-warning)"},children:A.calculation})]}),A.step1&&d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Step: "}),d.jsx("span",{style:{color:"var(--color-warning)"},children:A.step1})]}),d.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"2rem"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Result: "}),d.jsx("span",{style:{color:A.match?"var(--color-success)":"var(--color-danger)",fontWeight:700},children:A.result})]}),A.expected&&d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Expected: "}),d.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:600},children:A.expected})]})]})]})]},S))]})]})]})]}):d.jsx("div",{style:{padding:"2rem"},children:"Loading..."})};class dE{constructor(e,n,r=null){this.dataProcessor=e,this.startingGoalies=r,n&&n.moneyText&&n.totalText?this.games=W1(n.moneyText,n.totalText):this.games=[]}getStartingGoalie(e,n){if(!this.startingGoalies||!this.startingGoalies.games)return null;const r=`${n.awayTeam} @ ${n.homeTeam}`,o=this.startingGoalies.games.find(c=>c.matchup===r);return o?o.away.team===e?o.away.goalie:o.home.team===e?o.home.goalie:null:null}calculateAllEdges(){return this.games.map(e=>{try{const n=this.getStartingGoalie(e.awayTeam,e),r=this.getStartingGoalie(e.homeTeam,e),o=this.dataProcessor.predictTeamScore(e.awayTeam,e.homeTeam,!1,n),c=this.dataProcessor.predictTeamScore(e.homeTeam,e.awayTeam,!0,r);return{game:`${e.awayTeam} @ ${e.homeTeam}`,gameTime:e.gameTime,awayTeam:e.awayTeam,homeTeam:e.homeTeam,date:e.date||new Date().toISOString().split("T")[0],startTimestamp:e.startTimestamp||null,goalies:{away:n,home:r},edges:{moneyline:this.calculateMoneylineEdge(e,o,c),puckLine:this.calculatePuckLineEdge(e,o,c),total:this.calculateTotalEdge(e,o,c),teamTotals:this.calculateTeamTotalEdges(e,o,c)},rawOdds:{moneyline:e.moneyline,puckLine:e.puckLine,total:e.total}}}catch(n){return console.error(`Error calculating edges for ${e.awayTeam} @ ${e.homeTeam}:`,n),null}}).filter(e=>e!==null)}calculateMoneylineEdge(e,n,r){if(!e.moneyline.away||!e.moneyline.home)return{away:null,home:null};const o=this.dataProcessor.calculatePoissonWinProb(r,n),c=this.dataProcessor.calculatePoissonWinProb(n,r),h=this.dataProcessor.calculateEV(c,e.moneyline.away),g=this.dataProcessor.calculateEV(o,e.moneyline.home),p=this.dataProcessor.calculateKellyStake(c,e.moneyline.away),v=this.dataProcessor.calculateKellyStake(o,e.moneyline.home);return{away:{ev:h,evPercent:h,modelProb:c,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.away),kelly:p,odds:e.moneyline.away},home:{ev:g,evPercent:g,modelProb:o,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.home),kelly:v,odds:e.moneyline.home}}}calculatePuckLineEdge(e,n,r){if(!e.puckLine.away.odds||!e.puckLine.home.odds)return{away:null,home:null};const o=r-n,c=e.puckLine.home.spread||-1.5,h=e.puckLine.away.spread||1.5,g=o>c?.55:.45,p=1-g,v=this.dataProcessor.calculateEV(p,e.puckLine.away.odds),b=this.dataProcessor.calculateEV(g,e.puckLine.home.odds);return{away:{ev:v,evPercent:v,modelProb:p,spread:h,odds:e.puckLine.away.odds},home:{ev:b,evPercent:b,modelProb:g,spread:c,odds:e.puckLine.home.odds}}}calculateTotalEdge(e,n,r){if(!e.total.line||!e.total.over||!e.total.under)return null;const o=n+r,c=e.total.line,h=o-c,g=1-this.dataProcessor.poissonCDF(Math.floor(c),o),p=1-g,v=this.dataProcessor.calculateEV(g,e.total.over),b=this.dataProcessor.calculateEV(p,e.total.under);let T="NO BET";h>.3&&v>0?T="OVER":h<-.3&&b>0&&(T="UNDER");const S=this.dataProcessor.calculateKellyStake(g,e.total.over),A=this.dataProcessor.calculateKellyStake(p,e.total.under);return{predictedTotal:o,awayScore:n,homeScore:r,marketTotal:c,edge:h,recommendation:T,over:{ev:v,evPercent:v,modelProb:g,odds:e.total.over,kelly:S},under:{ev:b,evPercent:b,modelProb:p,odds:e.total.under,kelly:A}}}calculateTeamTotalEdges(e,n,r){return{away:{predicted:n,team:e.awayTeam},home:{predicted:r,team:e.homeTeam}}}getTopEdges(e=0){const n=this.calculateAllEdges(),r=[];return n.forEach(o=>{o.edges.moneyline.away&&o.edges.moneyline.away.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"MONEYLINE",pick:`${o.awayTeam} (AWAY)`,team:o.awayTeam,odds:o.edges.moneyline.away.odds,ev:o.edges.moneyline.away.ev,evPercent:o.edges.moneyline.away.evPercent,modelProb:o.edges.moneyline.away.modelProb,kelly:o.edges.moneyline.away.kelly}),o.edges.moneyline.home&&o.edges.moneyline.home.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"MONEYLINE",pick:`${o.homeTeam} (HOME)`,team:o.homeTeam,odds:o.edges.moneyline.home.odds,ev:o.edges.moneyline.home.ev,evPercent:o.edges.moneyline.home.evPercent,modelProb:o.edges.moneyline.home.modelProb,kelly:o.edges.moneyline.home.kelly}),o.edges.puckLine.away&&o.edges.puckLine.away.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"PUCK LINE",pick:`${o.awayTeam} ${o.edges.puckLine.away.spread>0?"+":""}${o.edges.puckLine.away.spread}`,team:o.awayTeam,odds:o.edges.puckLine.away.odds,ev:o.edges.puckLine.away.ev,evPercent:o.edges.puckLine.away.evPercent,modelProb:o.edges.puckLine.away.modelProb,kelly:null}),o.edges.puckLine.home&&o.edges.puckLine.home.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"PUCK LINE",pick:`${o.homeTeam} ${o.edges.puckLine.home.spread>0?"+":""}${o.edges.puckLine.home.spread}`,team:o.homeTeam,odds:o.edges.puckLine.home.odds,ev:o.edges.puckLine.home.ev,evPercent:o.edges.puckLine.home.evPercent,modelProb:o.edges.puckLine.home.modelProb,kelly:null}),o.edges.total&&(o.edges.total.over.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"TOTAL",pick:`OVER ${o.edges.total.marketTotal}`,team:null,odds:o.edges.total.over.odds,ev:o.edges.total.over.ev,evPercent:o.edges.total.over.evPercent,modelProb:o.edges.total.over.modelProb,kelly:o.edges.total.over.kelly,predictedTotal:o.edges.total.predictedTotal}),o.edges.total.under.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"TOTAL",pick:`UNDER ${o.edges.total.marketTotal}`,team:null,odds:o.edges.total.under.odds,ev:o.edges.total.under.ev,evPercent:o.edges.total.under.evPercent,modelProb:o.edges.total.under.modelProb,kelly:o.edges.total.under.kelly,predictedTotal:o.edges.total.predictedTotal}))}),r.sort((o,c)=>c.evPercent-o.evPercent)}}class $u{static generateComparisonBar(e,n,r,o=!0){const c=e/r*100,h=n/r*100,g=Math.min(Math.max(c,0),200),p=Math.min(Math.max(h,0),200),v=this.getBarColor(e,r,o),b=this.getBarColor(n,r,o),T=o?e>n:e<n;return{away:{value:e,width:g,color:v,hasAdvantage:T,vsLeague:((e-r)/r*100).toFixed(1)},home:{value:n,width:p,color:b,hasAdvantage:!T,vsLeague:((n-r)/r*100).toFixed(1)},leagueAvg:r,difference:Math.abs(e-n),advantageTeam:T?"away":"home"}}static getBarColor(e,n,r){const c=(e-n)/n*100;return r&&c>15||!r&&c<-15?"#10B981":r&&c>5||!r&&c<-5?"#0EA5E9":Math.abs(c)<=5?"#64748B":"#EF4444"}static generateDangerZoneHeatmap(e,n){return{away:{low:{shots:e.offense.low.shots,xGoals:e.offense.low.xGoals,goals:e.offense.low.goals,width:this.calculateHeatmapWidth(e.offense.low.shots,250)},medium:{shots:e.offense.medium.shots,xGoals:e.offense.medium.xGoals,goals:e.offense.medium.goals,width:this.calculateHeatmapWidth(e.offense.medium.shots,80)},high:{shots:e.offense.high.shots,xGoals:e.offense.high.xGoals,goals:e.offense.high.goals,width:this.calculateHeatmapWidth(e.offense.high.shots,35)}},home:{low:{shots:n.defense.low.shots,xGoals:n.defense.low.xGoals,goals:n.defense.low.goals,width:this.calculateHeatmapWidth(n.defense.low.shots,250)},medium:{shots:n.defense.medium.shots,xGoals:n.defense.medium.xGoals,goals:n.defense.medium.goals,width:this.calculateHeatmapWidth(n.defense.medium.shots,80)},high:{shots:n.defense.high.shots,xGoals:n.defense.high.xGoals,goals:n.defense.high.goals,width:this.calculateHeatmapWidth(n.defense.high.shots,35)}},analysis:this.analyzeDangerZoneMatchup(e,n)}}static calculateHeatmapWidth(e,n){return Math.min(e/n*100,100)}static analyzeDangerZoneMatchup(e,n){const r=e.offense.high.shots,o=n.defense.high.shots,c=r-o,h=o>0?c/o*100:0;let g="";return Math.abs(h)<10?g="Balanced high-danger shot generation":h>0?g=`Away offense generates ${Math.abs(h).toFixed(0)}% more HD shots`:g=`Home defense allows ${Math.abs(h).toFixed(0)}% fewer HD shots`,g}static generateReboundTable(e,n){return{awayOffense:{rebounds:Math.round(e.xRebFor),reboundXg:e.rebXgFor.toFixed(2),reboundGoals:e.rebGoalsFor,conversion:e.rebConversion.toFixed(1),vsLeague:e.rebConversion-15,status:e.rebConversion>18?"Hot":e.rebConversion<12?"Cold":"Average"},homeDefense:{rebounds:Math.round(n.xRebAgainst),reboundXg:n.rebXgAgainst.toFixed(2),reboundGoals:n.rebGoalsAgainst,allowedPct:n.xRebAgainst>0?(n.rebGoalsAgainst/n.xRebAgainst*100).toFixed(1):0,control:n.rebXgaPer60<(n.rebXgfPer60||4)?"Excellent":"Average"},matchupEdge:{favors:e.rebConversion>15&&n.rebXgaPer60>4?"away":n.rebXgaPer60<3&&e.rebConversion<15?"home":"neutral",summary:this.generateReboundSummary(e,n,15)}}}static generateReboundSummary(e,n,r){const o=e.rebConversion-r,c=n.rebXgaPer60;return Math.abs(o)<3&&c>3&&c<5?"Balanced rebound battle - neither team has clear edge":o<-3?`Away team cold on rebounds (${e.rebConversion.toFixed(1)}% vs ${r}% avg)`:c<3?"Home defense controls rebound positioning effectively":"Standard rebound metrics for both teams"}static generatePhysicalMetrics(e,n){return[{stat:"Shot Blocks",away:{value:e.blockingRate.toFixed(1)+"%",raw:e.blockedShotsAgainst,label:`${e.blockedShotsAgainst} blocks`},home:{value:n.blockingRate.toFixed(1)+"%",raw:n.blockedShotsAgainst,label:`${n.blockedShotsAgainst} blocks`},advantage:n.blockingRate>e.blockingRate?"home":"away",diff:Math.abs(n.blockingRate-e.blockingRate).toFixed(1)+"%"},{stat:"Takeaways",away:{value:e.takeawaysPer60.toFixed(1),raw:e.takeaways,label:`${e.takeaways} total`},home:{value:n.takeawaysPer60.toFixed(1),raw:n.takeaways,label:`${n.takeaways} total`},advantage:e.takeaways>n.takeaways?"away":"home",diff:Math.abs(e.takeaways-n.takeaways)},{stat:"DZ Giveaways",away:{value:e.dZoneGiveawaysPer60.toFixed(1),raw:e.dZoneGiveaways,label:`${e.dZoneGiveaways} mistakes`},home:{value:n.dZoneGiveawaysPer60.toFixed(1),raw:n.dZoneGiveaways,label:`${n.dZoneGiveaways} mistakes`},advantage:e.dZoneGiveaways<n.dZoneGiveaways?"away":"home",diff:Math.abs(e.dZoneGiveaways-n.dZoneGiveaways)},{stat:"Hits",away:{value:e.hitsPer60.toFixed(1),raw:e.hits,label:`${e.hits} hits`},home:{value:n.hitsPer60.toFixed(1),raw:n.hits,label:`${n.hits} hits`},advantage:e.hits>n.hits?"away":"home",diff:Math.abs(e.hits-n.hits)}]}static getImpactBadge(e){switch(e){case"CRITICAL":return{emoji:"🔥",label:"CRITICAL",color:"#EF4444"};case"HIGH":return{emoji:"🎯",label:"HIGH IMPACT",color:"#F59E0B"};case"MODERATE":return{emoji:"⚡",label:"MODERATE",color:"#3B82F6"};default:return{emoji:"📊",label:"FACTOR",color:"#64748B"}}}static getTierBadge(e){return e?e<=3?{label:"ELITE",color:"#10B981",icon:"↑"}:e<=10?{label:"STRONG",color:"#0EA5E9",icon:"↑"}:e<=22?{label:"AVERAGE",color:"#64748B",icon:"="}:{label:"WEAK",color:"#EF4444",icon:"↓"}:{label:"N/A",color:"#64748B"}}static formatGoalImpact(e){return`${e>=0?"+":""}${e.toFixed(2)}`}static getImpactColor(e,n=!0){return n?e<-.2?"#10B981":e<-.05?"#34D399":e>.2?"#EF4444":e>.05?"#F87171":"#64748B":e>0?"#10B981":"#EF4444"}}const fE=()=>{const[s,e]=de.useState(new Date);return de.useEffect(()=>{const n=setInterval(()=>e(new Date),1e3);return()=>clearInterval(n)},[]),d.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"4px"},children:[d.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--color-success)",animation:"pulse 2s infinite"}}),d.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--color-success)",fontFeatureSettings:"'tnum'"},children:s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})},mE=()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"sparkle",style:{top:"20%",left:"15%",animationDelay:"0s"}}),d.jsx("div",{className:"sparkle",style:{top:"60%",right:"20%",animationDelay:"0.5s"}}),d.jsx("div",{className:"sparkle",style:{bottom:"30%",left:"30%",animationDelay:"1s"}})]}),mv=({icon:s,value:e,label:n,color:r,sparkle:o})=>{const[c,h]=de.useState(0);de.useEffect(()=>{const T=e/30;let S=0;const A=setInterval(()=>{S+=T,S>=e?(h(e),clearInterval(A)):h(Math.floor(S))},1e3/30);return()=>clearInterval(A)},[e]);const g={success:{rgb:"16, 185, 129",var:"var(--color-success)"},info:{rgb:"59, 130, 246",var:"var(--color-info)"}},p=g[r]||g.info;return d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",background:`rgba(${p.rgb}, 0.1)`,border:`1px solid rgba(${p.rgb}, 0.3)`,borderRadius:"8px",position:"relative",overflow:"hidden"},children:[o&&d.jsx(mE,{}),d.jsx("div",{style:{color:p.var},children:s}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:p.var,fontFeatureSettings:"'tnum'",lineHeight:"1"},children:c}),d.jsx("div",{style:{fontSize:"0.625rem",color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600"},children:n})]})]})},gE=({type:s})=>{const e={ML:{label:"ML",color:"#3B82F6",icon:"⚡"},MONEYLINE:{label:"ML",color:"#3B82F6",icon:"⚡"},TOTAL:{label:"O/U",color:"#8B5CF6",icon:"📊"},PL:{label:"PL",color:"#EC4899",icon:"🎯"},"PUCK LINE":{label:"PL",color:"#EC4899",icon:"🎯"}},{label:n,color:r,icon:o}=e[s]||e.TOTAL;return d.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.5rem",background:`${r}15`,border:`1px solid ${r}40`,borderRadius:"4px",fontSize:"0.688rem",fontWeight:"700",color:r,textTransform:"uppercase",letterSpacing:"0.05em"},children:[d.jsx("span",{children:o}),d.jsx("span",{children:n})]})},pE=({evPercent:s,showConfidence:e})=>{const n=o=>o>=10?"#10B981":o>=5?"#059669":"#34D399",r=o=>o>=8?3:o>=4?2:1;return d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",alignItems:"flex-start"},children:[d.jsxs("span",{style:{color:n(s),fontWeight:"700",fontSize:"1rem",fontFeatureSettings:"'tnum'"},children:["+",s.toFixed(1),"%"]}),e&&d.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3].map(o=>d.jsx("div",{style:{width:"8px",height:"3px",borderRadius:"2px",background:o<=r(s)?n(s):"rgba(100, 116, 139, 0.3)",transition:"all 0.3s"}},o))})]})},yE=({edge:s})=>{const e=()=>Math.abs(s)>.5?"var(--color-success)":Math.abs(s)>.3?"var(--color-warning)":"var(--color-text-secondary)";return d.jsxs("span",{style:{color:e(),fontWeight:"600",fontFeatureSettings:"'tnum'",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[s>0&&d.jsx("span",{style:{fontSize:"0.75rem"},children:"▲"}),s<0&&d.jsx("span",{style:{fontSize:"0.75rem"},children:"▼"}),s>0?"+":"",s.toFixed(1)]})},vE=({time:s})=>d.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.5rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"4px",fontSize:"0.813rem",fontWeight:"600",color:"var(--color-info)",fontFeatureSettings:"'tnum'"},children:[d.jsx("span",{children:"🕐"}),d.jsx("span",{children:s})]}),_E=({onClick:s,game:e})=>d.jsxs("button",{onClick:s,className:"view-button-enhanced",children:[d.jsx("span",{children:"View"}),d.jsx(CS,{size:14})]}),xE=({firstGameTime:s})=>{const[e,n]=de.useState("");return de.useEffect(()=>{const r=()=>{const[c,h]=s.split(" "),[g,p]=c.split(":").map(Number);let v=g;h==="PM"&&g!==12&&(v+=12),h==="AM"&&g===12&&(v=0);const b=new Date;b.setHours(v,p,0,0);const S=b-new Date;if(S<=0)return"Game Starting Soon!";const A=Math.floor(S/(1e3*60*60)),z=Math.floor(S%(1e3*60*60)/(1e3*60));return`First game in ${A}h ${z}m`};n(r());const o=setInterval(()=>{n(r())},6e4);return()=>clearInterval(o)},[s]),d.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("span",{style:{fontSize:"1.25rem"},children:"⏱️"}),d.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"var(--color-info)",fontFeatureSettings:"'tnum'"},children:e})]})},bE=({allEdges:s,dataProcessor:e,onGameClick:n})=>{const[r,o]=de.useState(!1),[c,h]=de.useState(!1),[g,p]=de.useState(!1);de.useEffect(()=>{const A=()=>{o(window.innerWidth<=640),p(window.innerWidth>1024)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const v=A=>A>=10?{grade:"A+",tier:"ELITE",color:"#10B981",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"#10B981"}:A>=7?{grade:"A",tier:"EXCELLENT",color:"#059669",bgColor:"rgba(5, 150, 105, 0.15)",borderColor:"#059669"}:A>=5?{grade:"B+",tier:"STRONG",color:"#0EA5E9",bgColor:"rgba(14, 165, 233, 0.15)",borderColor:"#0EA5E9"}:A>=3?{grade:"B",tier:"GOOD",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"#8B5CF6"}:{grade:"C",tier:"VALUE",color:"#64748B",bgColor:"rgba(100, 116, 139, 0.15)",borderColor:"#64748B"},b=s.map(A=>{let z=null,M=0;if(A.edges.moneyline&&(A.edges.moneyline.away&&A.edges.moneyline.away.evPercent>M&&(M=A.edges.moneyline.away.evPercent,z={...A.edges.moneyline.away,type:"ML",displayPick:`${A.awayTeam} ML`}),A.edges.moneyline.home&&A.edges.moneyline.home.evPercent>M&&(M=A.edges.moneyline.home.evPercent,z={...A.edges.moneyline.home,type:"ML",displayPick:`${A.homeTeam} ML`})),A.edges.total){const B=A.edges.total.over?.line||A.edges.total.under?.line||"N/A";A.edges.total.over&&A.edges.total.over.evPercent>M&&(M=A.edges.total.over.evPercent,z={...A.edges.total.over,type:"TOTAL",displayPick:`OVER ${B}`}),A.edges.total.under&&A.edges.total.under.evPercent>M&&(M=A.edges.total.under.evPercent,z={...A.edges.total.under,type:"TOTAL",displayPick:`UNDER ${B}`})}return{game:A.game,time:A.gameTime,bestBet:z,edge:A.edges.total?.edge||0}}).filter(A=>A.bestBet&&A.bestBet.evPercent>0),T=b.filter(A=>A.bestBet.evPercent>5).length,S=[...b].sort((A,z)=>z.bestBet.evPercent-A.bestBet.evPercent).slice(0,3);return g&&!c?d.jsxs("div",{style:{position:"sticky",top:"60px",zIndex:100,background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)",backdropFilter:"blur(12px)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"12px",padding:"1rem 1.5rem",marginBottom:"1.5rem",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>h(!0),onMouseEnter:A=>{A.currentTarget.style.transform="translateY(-2px)",A.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.25)"},onMouseLeave:A=>{A.currentTarget.style.transform="translateY(0)",A.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.2)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[d.jsx(Yi,{size:20,color:"var(--color-accent)"}),d.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)"},children:"Today's Opportunities"}),d.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",fontWeight:"500"},children:[b.length," Games • ",T," High Value"]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(212, 175, 55, 0.2)",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",color:"var(--color-accent)"},children:[d.jsx("span",{children:"Click to expand"}),d.jsx(mm,{size:18})]})]}),d.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:S.map((A,z)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",padding:"0.5rem 1rem",background:"linear-gradient(135deg, rgba(21, 25, 35, 0.8) 0%, rgba(26, 31, 46, 0.7) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[d.jsx("span",{style:{fontWeight:"700",fontSize:"0.938rem",color:"var(--color-text-primary)"},children:A.game}),d.jsxs("span",{style:{padding:"0.25rem 0.625rem",background:A.bestBet.evPercent>10?"linear-gradient(135deg, #10B981 0%, #059669 100%)":A.bestBet.evPercent>5?"linear-gradient(135deg, #059669 0%, #047857 100%)":"linear-gradient(135deg, #34D399 0%, #10B981 100%)",color:"white",borderRadius:"6px",fontSize:"0.813rem",fontWeight:"800",letterSpacing:"-0.01em"},children:["+",A.bestBet.evPercent.toFixed(1),"%"]})]},z))})]}):r&&!c?d.jsx("div",{style:{position:"sticky",top:"60px",zIndex:10,background:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:d.jsxs("button",{onClick:()=>h(!0),style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",background:"none",border:"none",cursor:"pointer",color:"var(--color-text-primary)",fontWeight:"600"},children:[d.jsx(Yi,{size:18,color:"var(--color-accent)",style:{marginRight:"0.5rem"}}),d.jsxs("span",{children:["Opportunities (",b.length,")"]}),d.jsx(mm,{size:20,color:"var(--color-accent)"})]})}):d.jsxs("div",{style:{position:r?"relative":"sticky",top:r?"0":"60px",zIndex:100,background:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"8px",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",overflow:"hidden",backdropFilter:"blur(8px)"},children:[d.jsxs("div",{style:{background:"linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%)",padding:"1rem",color:"var(--color-background)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{textAlign:"center",flex:1},children:[d.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"700",marginBottom:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[d.jsx(Yi,{size:20}),d.jsx("span",{children:"Today's Betting Opportunities"})]}),d.jsxs("div",{style:{fontSize:"0.875rem",opacity:.9},children:[b.length," Games • ",T," High Value"]})]}),g&&d.jsxs("button",{onClick:()=>h(!1),style:{padding:"0.5rem 1rem",background:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",cursor:"pointer",color:"white",fontSize:"0.813rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.375rem",transition:"all 0.2s ease"},onMouseEnter:A=>{A.currentTarget.style.background="rgba(0, 0, 0, 0.3)"},onMouseLeave:A=>{A.currentTarget.style.background="rgba(0, 0, 0, 0.2)"},children:[d.jsx(gm,{size:16}),"Collapse"]})]}),r&&d.jsxs("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.5rem",background:"rgba(212, 175, 55, 0.1)",border:"none",borderBottom:"1px solid var(--color-border)",cursor:"pointer",color:"var(--color-text-secondary)",fontSize:"0.813rem",display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsx(gm,{size:16,style:{marginRight:"0.25rem"}}),"Collapse"]}),r?d.jsx("div",{style:{padding:"1.25rem 1rem"},children:b.map((A,z)=>{const M=v(A.bestBet.evPercent);return d.jsxs("div",{className:"mobile-opp-card",style:{background:"linear-gradient(135deg, rgba(21, 25, 35, 0.95) 0%, rgba(26, 31, 46, 0.9) 100%)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.25rem",border:`1px solid ${M.borderColor}`,boxShadow:`0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ${M.borderColor}`,position:"relative",overflow:"hidden",animation:"slideInUp 0.4s ease-out",animationDelay:`${z*.1}s`,animationFillMode:"both"},children:[M.tier==="ELITE"||M.tier==="EXCELLENT"&&d.jsx("div",{className:"shimmer-overlay",style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:`linear-gradient(90deg, transparent, ${M.bgColor}, transparent)`,animation:"shimmer 3s infinite"}}),d.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.375rem"},children:[d.jsx("div",{style:{background:`linear-gradient(135deg, ${M.color} 0%, ${M.borderColor} 100%)`,color:"white",padding:"0.5rem 0.875rem",borderRadius:"8px",fontSize:"1.25rem",fontWeight:"900",letterSpacing:"-0.02em",boxShadow:`0 4px 12px ${M.bgColor}`,textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)",minWidth:"52px",textAlign:"center"},children:M.grade}),d.jsx("div",{style:{fontSize:"0.688rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.1em",color:M.color,textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:M.tier}),d.jsxs("div",{style:{fontSize:"0.813rem",fontWeight:"700",color:"white",opacity:.9},children:["+",A.bestBet.evPercent.toFixed(1),"%"]})]}),d.jsxs("div",{style:{marginBottom:"1.25rem",paddingRight:"5rem"},children:[d.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"800",color:"var(--color-text-primary)",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:A.game}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.938rem",color:"var(--color-text-muted)",fontWeight:"500"},children:[d.jsx(VS,{size:14}),d.jsx("span",{children:A.time})]})]}),d.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.125rem",background:A.bestBet.type==="ML"?"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(37, 99, 235, 0.15) 100%)":"linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(126, 34, 206, 0.15) 100%)",border:A.bestBet.type==="ML"?"1px solid rgba(59, 130, 246, 0.4)":"1px solid rgba(168, 85, 247, 0.4)",borderRadius:"8px",marginBottom:"1rem"},children:d.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.1em",color:A.bestBet.type==="ML"?"#60A5FA":"#A78BFA",display:"flex",alignItems:"center",gap:"0.375rem"},children:[A.bestBet.type==="ML"?d.jsx(Y1,{size:12}):d.jsx(Yi,{size:12}),d.jsx("span",{children:A.bestBet.type==="ML"?"MONEYLINE":"TOTAL"})]})}),d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"900",color:"var(--color-accent)",marginBottom:"1.25rem",letterSpacing:"-0.03em",textShadow:"0 2px 8px rgba(212, 175, 55, 0.3)"},children:A.bestBet.pick}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",marginBottom:"1.25rem",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[d.jsx("span",{style:{fontSize:"0.813rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--color-text-muted)"},children:"Edge"}),d.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"900",color:A.edge>0?"var(--color-success)":"var(--color-danger)",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em"},children:[A.edge>0?"+":"",A.edge.toFixed(1)]})]}),d.jsx("button",{onClick:()=>n(A.game),style:{width:"100%",padding:"1.125rem",background:"linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%)",color:"var(--color-background)",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1.063rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.05em",boxShadow:"0 6px 20px rgba(212, 175, 55, 0.4)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseDown:B=>{B.currentTarget.style.transform="scale(0.98)"},onMouseUp:B=>{B.currentTarget.style.transform="scale(1)"},children:"View Full Analysis →"})]},z)})}):d.jsx("div",{className:"table-container",style:{overflowX:"auto",overflowY:"hidden"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed",minWidth:"800px"},children:[d.jsxs("colgroup",{children:[d.jsx("col",{style:{width:"20%"}}),d.jsx("col",{style:{width:"10%"}}),d.jsx("col",{style:{width:"20%"}}),d.jsx("col",{style:{width:"12%"}}),d.jsx("col",{style:{width:"13%"}}),d.jsx("col",{style:{width:"13%"}}),d.jsx("col",{style:{width:"12%"}})]}),d.jsx("thead",{children:d.jsxs("tr",{style:{background:"var(--color-background)"},children:[d.jsx("th",{style:Bs,children:"Game"}),d.jsx("th",{style:Bs,children:"Time"}),d.jsx("th",{style:Bs,children:"Best Bet"}),d.jsx("th",{style:Bs,children:"Edge"}),d.jsx("th",{style:Bs,children:"EV"}),d.jsx("th",{style:Bs,children:"Rating"}),d.jsx("th",{style:Bs})]})}),d.jsx("tbody",{children:b.map((A,z)=>{const M=v(A.bestBet.evPercent);return d.jsxs("tr",{className:"summary-row",style:{borderTop:"1px solid var(--color-border)",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[d.jsx("td",{colSpan:"6",style:{position:"absolute",left:0,top:0,right:0,bottom:0,width:"100%",height:"100%",padding:0,border:"none",pointerEvents:"none",zIndex:0},children:d.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${Math.min(A.bestBet.evPercent*3,100)}%`,background:`linear-gradient(90deg, ${M.bgColor} 0%, transparent 100%)`,pointerEvents:"none"}})}),d.jsx("td",{style:{...Fs,position:"relative",zIndex:1},children:d.jsx("span",{style:{fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:A.game})}),d.jsx("td",{style:{...Fs,position:"relative",zIndex:1},children:d.jsx(vE,{time:A.time})}),d.jsx("td",{style:{...Fs,position:"relative",zIndex:1},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(gE,{type:A.bestBet.type}),d.jsx("span",{style:{fontWeight:"600",whiteSpace:"nowrap"},children:A.bestBet.displayPick||A.bestBet.pick})]})}),d.jsx("td",{style:{...Fs,position:"relative",zIndex:1},children:d.jsx(yE,{edge:A.edge})}),d.jsx("td",{style:{...Fs,position:"relative",zIndex:1},children:d.jsx(pE,{evPercent:A.bestBet.evPercent,showConfidence:!0})}),d.jsx("td",{style:{...Fs,position:"relative",zIndex:1},children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[d.jsx("div",{style:{padding:"0.375rem 0.75rem",background:M.bgColor,border:`1px solid ${M.borderColor}`,borderRadius:"6px",fontWeight:"800",fontSize:"0.875rem",color:M.color,letterSpacing:"-0.01em",minWidth:"42px",textAlign:"center"},children:M.grade}),d.jsx("div",{style:{fontSize:"0.625rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:M.color,opacity:.8},children:M.tier})]})}),d.jsx("td",{style:{...Fs,position:"relative",zIndex:1,textAlign:"center"},children:d.jsx(_E,{onClick:()=>n(A.game),game:A.game})})]},z)})})]})})]})},Bs={padding:"0.75rem 1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--color-text-muted)"},Fs={padding:"0.875rem 1rem",fontSize:"0.875rem"},TE=s=>s>=10?{grade:"A+",tier:"ELITE",color:"#10B981",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"#10B981",icon:Hm}:s>=7?{grade:"A",tier:"EXCELLENT",color:"#059669",bgColor:"rgba(5, 150, 105, 0.15)",borderColor:"#059669",icon:YS}:s>=5?{grade:"B+",tier:"STRONG",color:"#0EA5E9",bgColor:"rgba(14, 165, 233, 0.15)",borderColor:"#0EA5E9",icon:er}:s>=3?{grade:"B",tier:"GOOD",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"#8B5CF6",icon:null}:{grade:"C",tier:"VALUE",color:"#64748B",bgColor:"rgba(100, 116, 139, 0.15)",borderColor:"#64748B",icon:null},SE=({evPercent:s,size:e="default",showIcon:n=!1,showTier:r=!0})=>{const o=TE(s),c=o.icon,g={small:{padding:"0.25rem 0.5rem",gradeFont:"0.75rem",tierFont:"0.563rem",iconSize:12,gap:"0.25rem"},default:{padding:"0.375rem 0.75rem",gradeFont:"0.875rem",tierFont:"0.625rem",iconSize:14,gap:"0.25rem"},large:{padding:"0.5rem 1rem",gradeFont:"1.125rem",tierFont:"0.688rem",iconSize:16,gap:"0.375rem"}}[e];return d.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:g.gap},children:[d.jsxs("div",{style:{padding:g.padding,background:o.bgColor,border:`1px solid ${o.borderColor}`,borderRadius:"6px",fontWeight:"800",fontSize:g.gradeFont,color:o.color,letterSpacing:"-0.01em",display:"flex",alignItems:"center",gap:"0.375rem",minWidth:e==="small"?"36px":"42px",justifyContent:"center"},children:[n&&c&&d.jsx(c,{size:g.iconSize}),d.jsx("span",{children:o.grade})]}),r&&d.jsx("div",{style:{fontSize:g.tierFont,fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:o.color,opacity:.8},children:o.tier})]})},we={flat:{border:"1px solid rgba(100, 116, 139, 0.2)"},raised:{border:"1px solid rgba(212, 175, 55, 0.25)",shadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},elevated:{border:"2px solid rgba(16, 185, 129, 0.3)",shadow:"0 4px 16px rgba(16, 185, 129, 0.15)"}},R={hero:{size:"1.5rem",weight:"900",lineHeight:"1.2"},heading:{size:"1.125rem",weight:"800",lineHeight:"1.3",letterSpacing:"-0.01em"},subheading:{size:"0.938rem",weight:"700"},body:{size:"0.875rem",weight:"600",lineHeight:"1.5"},label:{size:"0.75rem",weight:"600",letterSpacing:"0.03em",textTransform:"uppercase"},caption:{size:"0.688rem",weight:"500",lineHeight:"1.5"}},ce={cardPadding:"0.875rem",sectionGap:"0.75rem",innerPadding:"0.75rem",borderRadius:"10px"},Nt={hero:"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.04) 50%, rgba(16, 185, 129, 0.08) 100%)",factors:"linear-gradient(180deg, rgba(212, 175, 55, 0.05) 0%, rgba(212, 175, 55, 0.02) 100%)",moneyline:"linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0.02) 100%)",total:"linear-gradient(135deg, rgba(168, 85, 247, 0.08) 0%, rgba(168, 85, 247, 0.02) 100%)"},Z1=s=>s>=10?{color:"#10B981",bg:"rgba(16, 185, 129, 0.15)",label:"ELITE",intensity:5}:s>=5?{color:"#059669",bg:"rgba(5, 150, 105, 0.12)",label:"STRONG",intensity:4}:s>=2?{color:"#0EA5E9",bg:"rgba(14, 165, 233, 0.12)",label:"GOOD",intensity:3}:s>=0?{color:"#8B5CF6",bg:"rgba(139, 92, 246, 0.12)",label:"SLIGHT",intensity:2}:{color:"#64748B",bg:"rgba(100, 116, 139, 0.08)",label:"NEGATIVE",intensity:1},EE=(s,e)=>{const n=Math.abs(e-.5);return s>10&&n>.15?{level:"VERY HIGH",color:"#10B981"}:s>5&&n>.1?{level:"HIGH",color:"#059669"}:s>2?{level:"MEDIUM",color:"#0EA5E9"}:{level:"LOW",color:"#8B5CF6"}},Qn={normal:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",slow:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},AE=({awayGoalie:s,homeGoalie:e,awayTeam:n,homeTeam:r,isMobile:o})=>{const c=s&&s.name,h=e&&e.name;if(!c&&!h)return d.jsx(Rl,{title:"Goaltender Matchup",icon:d.jsx(Hr,{size:18}),isMobile:o,importance:"HIGH",children:d.jsxs("div",{style:{padding:o?ce.innerPadding:"1.5rem",textAlign:"center",background:Nt.factors,border:we.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:"⏳"}),d.jsx("div",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:"Waiting for Goalie Confirmation"}),d.jsx("div",{style:{fontSize:R.body.size,color:"var(--color-text-muted)",lineHeight:R.body.lineHeight},children:"Starting goalies typically confirmed 1-2 hours before game time. Check back closer to puck drop."})]})});if(!c||!h)return d.jsx(Rl,{title:"Goaltender Matchup",icon:d.jsx(Hr,{size:18}),isMobile:o,importance:"HIGH",children:d.jsxs("div",{style:{padding:o?ce.innerPadding:"1.5rem",textAlign:"center",background:Nt.factors,border:we.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:"⏳"}),d.jsxs("div",{style:{fontSize:R.body.size,color:"var(--color-text-muted)",marginBottom:"1rem"},children:[c?`✅ ${n} goalie confirmed`:`⏳ ${n} goalie TBD`," • ",h?`✅ ${r} goalie confirmed`:`⏳ ${r} goalie TBD`]}),c&&d.jsxs("div",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",marginTop:"0.5rem"},children:[s.name," (",n,")"]}),h&&d.jsxs("div",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",marginTop:"0.5rem"},children:[e.name," (",r,")"]})]})});const g=s&&s.gsae!==void 0,p=e&&e.gsae!==void 0;if(g&&!p||!g&&p){const z=g?s:e,M=g?n:r,B=g?r:n,te=g?e:s,$=parseFloat(z.gsae)||0,ee=$>10?"ELITE":$>5?"STRONG":$>-5?"AVERAGE":"WEAK",ne=$>10?"#10B981":$>5?"#60A5FA":$>-5?"#8B5CF6":"#EF4444";return d.jsxs(Rl,{title:"Goaltender Matchup",icon:d.jsx(Hr,{size:18}),isMobile:o,importance:"HIGH",children:[d.jsxs("div",{style:{padding:o?ce.innerPadding:"1rem",background:`linear-gradient(135deg, ${ne}15 0%, ${ne}08 100%)`,border:`1px solid ${ne}40`,borderRadius:"8px",marginBottom:o?ce.innerPadding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[d.jsx(Hr,{size:20,color:ne}),d.jsxs("span",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:ne},children:[ee," GOALTENDER - ",M]})]}),d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-secondary)",textAlign:"center",fontStyle:"italic"},children:[z.name," • ",$>=0?"+":"",$.toFixed(2)," GSAE • ",B," goalie stats unavailable"]})]}),d.jsx(Jf,{goalie:z,team:M,isMobile:o,isAway:!1}),d.jsxs("div",{style:{marginTop:o?ce.innerPadding:"1rem",padding:o?"0.75rem":"1rem",background:"rgba(139, 92, 246, 0.08)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",textAlign:"center"},children:[d.jsxs("div",{style:{fontSize:R.body.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:[d.jsx("strong",{children:B})," ",te?.name||"Goalie"]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",fontStyle:"italic"},children:"Advanced stats not yet available"})]})]})}if(!g&&!p)return d.jsx(Rl,{title:"Goaltender Matchup",icon:d.jsx(Hr,{size:18}),isMobile:o,importance:"HIGH",children:d.jsxs("div",{style:{padding:o?ce.innerPadding:"1.5rem",textAlign:"center",background:Nt.factors,border:we.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:"📊"}),d.jsxs("div",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:[n," ",s?.name||"TBD"," vs ",r," ",e?.name||"TBD"]}),d.jsx("div",{style:{fontSize:R.body.size,color:"var(--color-text-muted)",lineHeight:R.body.lineHeight},children:"Advanced goalie statistics not yet available for these netminders. Check back later for detailed analytics."})]})});const v=parseFloat(s.gsae)||0,b=parseFloat(e.gsae)||0,T=Math.abs(v-b),S=v>b?n:r,A=T/10;return d.jsxs(Rl,{title:"Goaltender Matchup",icon:d.jsx(Hr,{size:18}),isMobile:o,importance:"HIGH",children:[d.jsxs("div",{style:{padding:o?ce.innerPadding:"1.125rem",background:T>5?"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.06) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.12) 0%, rgba(139, 92, 246, 0.06) 100%)",border:T>5?"1px solid rgba(16, 185, 129, 0.35)":"1px solid rgba(139, 92, 246, 0.35)",borderRadius:"10px",marginBottom:o?ce.innerPadding:"1.25rem",boxShadow:T>5?"0 4px 12px rgba(16, 185, 129, 0.1)":"0 4px 12px rgba(139, 92, 246, 0.1)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.625rem",marginBottom:"0.5rem"},children:[d.jsx(Hr,{size:22,color:T>5?"#10B981":"#8B5CF6",strokeWidth:2.5}),d.jsx("span",{style:{fontSize:o?"0.95rem":"1.05rem",fontWeight:"700",color:T>5?"#10B981":"#8B5CF6",letterSpacing:"0.5px"},children:T>5?`${S} HAS GOALIE ADVANTAGE`:"PRETTY EVEN GOALIE MATCHUP"})]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-secondary)",lineHeight:R.body.lineHeight,fontStyle:"italic",textAlign:"center",paddingTop:"0.25rem",borderTop:T>5?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(139, 92, 246, 0.2)"},children:T>5?`${T.toFixed(1)} GSAE difference • Expected impact: ~${A.toFixed(2)} goals`:"Both goalies performing at similar levels. Goaltending unlikely to be deciding factor."})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:o?"1fr":"1fr auto 1fr",gap:o?ce.innerPadding:"1.5rem",alignItems:"stretch"},children:[d.jsx(Jf,{goalie:s,team:n,isMobile:o,isAway:!0}),!o&&d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:R.heading.size,fontWeight:R.heading.weight,color:"var(--color-accent)",padding:"0 0.5rem"},children:"VS"}),d.jsx(Jf,{goalie:e,team:r,isMobile:o,isAway:!1})]}),d.jsxs("div",{style:{marginTop:o?ce.innerPadding:"1rem",padding:o?ce.innerPadding:"1rem",background:Nt.factors,border:we.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:R.caption.size,fontWeight:R.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:"SAVE PERCENTAGE BY DANGER ZONE"}),d.jsx(wE,{awayGoalie:s,homeGoalie:e,awayTeam:n,homeTeam:r,isMobile:o})]})]})},Jf=({goalie:s,team:e,isMobile:n,isAway:r})=>{const o=parseFloat(s.gsae)||0,c=CE(o),h=c.tier==="ELITE",g=c.tier==="STRONG";return d.jsxs("div",{style:{padding:n?ce.innerPadding:"1rem",background:Nt.factors,border:we.flat.border,borderRadius:"8px",position:"relative",overflow:"hidden"},children:[d.jsxs("div",{style:{marginBottom:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"0.5rem"},children:[d.jsx("div",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:s.name}),d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[d.jsx("span",{children:e}),d.jsx("span",{children:"•"}),d.jsxs("span",{children:[s.gamesPlayed," GP"]}),s.recentForm&&s.recentForm!=="Limited Sample"&&d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"•"}),d.jsx("span",{style:{color:s.recentForm==="Hot"?"#10B981":s.recentForm==="Cold"?"#EF4444":"#8B5CF6",fontWeight:R.label.weight},children:s.recentForm})]})]})]}),d.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"0.75rem",background:h?"rgba(16, 185, 129, 0.1)":g?"rgba(14, 165, 233, 0.1)":"rgba(139, 92, 246, 0.05)",borderRadius:"6px"},children:[d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Goals Saved Above Expected"}),d.jsxs("div",{style:{fontSize:"2rem",fontWeight:R.heading.weight,color:h?"#10B981":g?"#0EA5E9":o>0?"#8B5CF6":"#EF4444",fontFeatureSettings:"'tnum'",marginBottom:"0.25rem"},children:[o>0?"+":"",s.gsae]}),d.jsx(RE,{rank:c.rank,tier:c.tier})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginBottom:"0.75rem"},children:[d.jsx(Pu,{label:"Save %",value:`${s.savePct}%`}),d.jsx(Pu,{label:"HD Sv%",value:`${s.hdSavePct}%`,isHighlight:!0}),d.jsx(Pu,{label:"xGA/GP",value:s.xGoalsAgainst}),d.jsx(Pu,{label:"GA/GP",value:s.goalsAgainst})]}),d.jsxs("div",{style:{padding:"0.5rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"4px",fontSize:R.caption.size,textAlign:"center"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Rebound Control: "}),d.jsx("span",{style:{color:s.reboundControl==="Excellent"?"#10B981":s.reboundControl==="Poor"?"#EF4444":"#8B5CF6",fontWeight:R.label.weight},children:s.reboundControl})]})]})},wE=({awayGoalie:s,homeGoalie:e,awayTeam:n,homeTeam:r,isMobile:o})=>{const c=[{label:"Low Danger",away:parseFloat(s.lowDangerSavePct)||97,home:parseFloat(e.lowDangerSavePct)||97,color:"#64748B"},{label:"Medium Danger",away:parseFloat(s.mediumDangerSavePct)||92,home:parseFloat(e.mediumDangerSavePct)||92,color:"#F59E0B"},{label:"High Danger",away:parseFloat(s.hdSavePct)||85,home:parseFloat(e.hdSavePct)||85,color:"#EF4444"}];return d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:c.map((h,g)=>d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:R.caption.size,color:h.color,marginBottom:"0.375rem",fontWeight:R.label.weight},children:h.label}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.5rem",alignItems:"center"},children:[d.jsxs("div",{style:{textAlign:"right",fontSize:R.body.size,fontWeight:R.body.weight},children:[d.jsxs("span",{style:{color:h.away>h.home?"#10B981":"var(--color-text-secondary)",fontFeatureSettings:"'tnum'"},children:[h.away.toFixed(1),"%"]}),d.jsx("span",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginLeft:"0.25rem"},children:n})]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)"},children:"vs"}),d.jsxs("div",{style:{textAlign:"left",fontSize:R.body.size,fontWeight:R.body.weight},children:[d.jsx("span",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginRight:"0.25rem"},children:r}),d.jsxs("span",{style:{color:h.home>h.away?"#10B981":"var(--color-text-secondary)",fontFeatureSettings:"'tnum'"},children:[h.home.toFixed(1),"%"]})]})]})]},g))})},Pu=({label:s,value:e,isHighlight:n})=>d.jsxs("div",{style:{padding:"0.5rem",background:n?"rgba(239, 68, 68, 0.1)":"rgba(26, 31, 46, 0.4)",borderRadius:"4px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginBottom:"0.125rem"},children:s}),d.jsx("div",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:n?"#EF4444":"var(--color-text-primary)",fontFeatureSettings:"'tnum'"},children:e})]}),RE=({rank:s,tier:e})=>d.jsxs("span",{style:{fontSize:R.caption.size,fontWeight:R.label.weight,color:e==="ELITE"?"#10B981":e==="STRONG"?"#0EA5E9":e==="AVERAGE"?"#8B5CF6":"#EF4444",background:e==="ELITE"?"rgba(16, 185, 129, 0.2)":e==="STRONG"?"rgba(14, 165, 233, 0.2)":e==="AVERAGE"?"rgba(139, 92, 246, 0.2)":"rgba(239, 68, 68, 0.2)",padding:"0.125rem 0.375rem",borderRadius:"4px",textTransform:"uppercase"},children:["#",s," ",e]}),Rl=({title:s,icon:e,children:n,isMobile:r,importance:o})=>d.jsxs("div",{style:{marginBottom:r?ce.sectionGap:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:r?ce.innerPadding:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e,d.jsx("span",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)"},children:s})]}),o&&d.jsx("span",{style:{fontSize:R.caption.size,fontWeight:R.label.weight,color:o==="HIGH"?"#10B981":o==="MODERATE"?"#F59E0B":"#64748B",textTransform:"uppercase"},children:o})]}),n]});function CE(s){return s>10?{rank:5,tier:"ELITE"}:s>5?{rank:12,tier:"STRONG"}:s>-5?{rank:18,tier:"AVERAGE"}:{rank:28,tier:"WEAK"}}const IE=({awayTeam:s,homeTeam:e,dangerZoneData:n,reboundData:r,physicalData:o,possessionData:c,regressionData:h,awayGoalie:g,homeGoalie:p,isMobile:v,bestEdge:b,statsAnalyzer:T})=>{const[S,A]=de.useState(!1),M=S?[]:(()=>{const B=[],te=b?.type||"TOTAL";if(te==="TOTAL"||te==="OVER"||te==="UNDER"){if(n&&n.away&&n.home){const $=n.away.high?.shots||0,ee=n.home.high?.shots||0;if(Math.abs($-ee)>2){const ne=$>ee?s:e,re=Math.abs($-ee).toFixed(1);B.push(`${ne} generates ${re} more high-danger chances per game`)}}if(o&&o.length>0){const $=o.find(ee=>ee.stat==="Shot Blocks");if($){const ee=$.advantage==="away"?s:e;B.push(`${ee} blocks ${$.diff} more shots per game`)}}}if(h&&h.away&&h.home){const $=h.away.pdo||100,ee=h.home.pdo||100;$>102?B.push(`${s}'s PDO (${$.toFixed(1)}) suggests regression due`):ee>102?B.push(`${e}'s PDO (${ee.toFixed(1)}) suggests regression due`):$<98?B.push(`${s}'s PDO (${$.toFixed(1)}) indicates potential bounce-back`):ee<98&&B.push(`${e}'s PDO (${ee.toFixed(1)}) indicates potential bounce-back`)}if(c&&c.away&&c.home&&B.length<3){const $=c.away.corsiPct||50,ee=c.home.corsiPct||50;if(Math.abs($-ee)>5){const ne=$>ee?s:e,re=Math.max($,ee).toFixed(1);B.push(`${ne} controls ${re}% of shot attempts (elite possession)`)}}return B.slice(0,3)})();return d.jsxs("div",{style:{background:Nt.factors,border:we.raised.border,boxShadow:we.raised.shadow,borderRadius:ce.borderRadius,overflow:"hidden",marginBottom:v?ce.sectionGap:"1.5rem",transition:Qn.normal},children:[d.jsxs("button",{onClick:()=>A(!S),"aria-expanded":S,"aria-controls":"advanced-metrics-content","aria-label":`${S?"Collapse":"Expand"} advanced metrics section`,style:{width:"100%",padding:v?ce.cardPadding:"1.25rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:Qn.normal},onMouseEnter:B=>B.currentTarget.style.background="rgba(212, 175, 55, 0.1)",onMouseLeave:B=>B.currentTarget.style.background="transparent",children:[d.jsxs("div",{style:{textAlign:"left"},children:[d.jsxs("div",{style:{fontSize:v?R.body.size:R.heading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem",letterSpacing:R.heading.letterSpacing},children:[d.jsx(Yi,{size:20,style:{color:"var(--color-accent)"}}),"Deep Dive: Advanced Metrics"]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",fontWeight:R.caption.weight,lineHeight:R.caption.lineHeight},children:S?"7 statistical categories expanded":"Danger zones, goalies, special teams, and more"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-accent)"},children:[d.jsx("span",{style:{fontSize:R.label.size,fontWeight:R.label.weight,textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:S?"Collapse":"Expand"}),S?d.jsx(gm,{size:20}):d.jsx(mm,{size:20})]})]}),!S&&M.length>0&&d.jsxs("div",{style:{padding:v?ce.cardPadding:"1.25rem",paddingTop:0,borderTop:we.flat.border},children:[d.jsxs("div",{style:{fontSize:R.label.size,fontWeight:R.label.weight,color:"var(--color-accent)",marginBottom:"0.75rem",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Y1,{size:16}),"Quick Hits"]}),d.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:M.map((B,te)=>d.jsxs("li",{style:{fontSize:R.body.size,color:"var(--color-text-primary)",marginBottom:te<M.length-1?"0.5rem":0,paddingLeft:"1.25rem",position:"relative",lineHeight:R.body.lineHeight,fontWeight:R.body.weight},children:[d.jsx("span",{style:{position:"absolute",left:0,color:"var(--color-accent)",fontWeight:R.heading.weight},children:"•"}),B]},te))}),d.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:we.flat.border,textAlign:"center"},children:d.jsx("button",{onClick:()=>A(!0),style:{background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:R.label.size,fontWeight:R.body.weight,color:"var(--color-accent)",cursor:"pointer",transition:Qn.normal},onMouseEnter:B=>{B.currentTarget.style.background="rgba(212, 175, 55, 0.15)",B.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:B=>{B.currentTarget.style.background="rgba(212, 175, 55, 0.1)",B.currentTarget.style.transform="translateY(0)"},children:"View Full Breakdown →"})})]}),S&&d.jsx("div",{id:"advanced-metrics-content",role:"region","aria-label":"Advanced metrics detailed breakdown",style:{padding:v?ce.cardPadding:"1.5rem",paddingTop:0,borderTop:we.flat.border,maxHeight:S?"10000px":"0",overflow:S?"visible":"hidden",transition:"max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:(()=>{const B=b?.market==="TOTAL";return[{id:"danger-zone",priority:B?1:4,component:n&&d.jsx(DE,{data:n,awayTeam:s,homeTeam:e,isMobile:v,statsAnalyzer:T,bestEdge:b},"danger-zone")},{id:"goalie",priority:3,component:d.jsx(AE,{awayGoalie:g,homeGoalie:p,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:b},"goalie")},{id:"rebound",priority:B?1:4,component:r&&d.jsx(NE,{data:r,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:b},"rebound")},{id:"physical",priority:B?2:5,component:o&&d.jsx(jE,{data:o,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:b},"physical")},{id:"possession",priority:B?5:1,component:c&&d.jsx(PE,{data:c,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:b},"possession")},{id:"regression",priority:4,component:h&&d.jsx(kE,{data:h,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:b},"regression")}].sort(($,ee)=>$.priority-ee.priority).map($=>$.component).filter(Boolean)})()})]})},DE=({data:s,awayTeam:e,homeTeam:n,isMobile:r,statsAnalyzer:o})=>{const c=s.away.high?.shots||0,h=s.home.high?.shots||0,g=Math.abs(c-h),p=c>h?e:n,v=c>h?n:e,b=g*.23;return d.jsxs(ql,{title:"Shot Danger Distribution",icon:d.jsx(Yi,{size:18}),isMobile:r,importance:"HIGH",children:[d.jsxs("div",{style:{padding:r?ce.innerPadding:"0.875rem",background:g>2?"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:g>2?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:r?ce.innerPadding:"1rem",textAlign:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx(Yi,{size:20,color:g>2?"#EF4444":"#8B5CF6"}),d.jsx("span",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:g>2?"#EF4444":"#8B5CF6"},children:g>2?`${p} GENERATES MORE HIGH-DANGER SHOTS`:"PRETTY EVEN MATCHUP - HIGH-DANGER CHANCES"})]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-secondary)",lineHeight:R.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:g>2?`${g.toFixed(1)} more HD shots/game vs ${v} • ~${b.toFixed(2)} goal impact`:"Both teams generate similar high-danger opportunities. Expect tight scoring chances."})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:r?"1fr":"repeat(3, 1fr)",gap:r?ce.innerPadding:"1rem",marginBottom:"1rem"},children:[d.jsx(em,{title:"Low Danger",color:"#64748B",awayShots:s.away.low.shots,homeShots:s.home.low.shots,awayXg:s.away.low.xGoals,homeXg:s.home.low.xGoals,awayTeam:e,homeTeam:n,isMobile:r}),d.jsx(em,{title:"Medium Danger",color:"#F59E0B",awayShots:s.away.medium.shots,homeShots:s.home.medium.shots,awayXg:s.away.medium.xGoals,homeXg:s.home.medium.xGoals,awayTeam:e,homeTeam:n,isMobile:r}),d.jsx(em,{title:"High Danger",color:"#EF4444",awayShots:s.away.high.shots,homeShots:s.home.high.shots,awayXg:s.away.high.xGoals,homeXg:s.home.high.xGoals,awayTeam:e,homeTeam:n,isMobile:r})]}),s.analysis&&d.jsxs("div",{style:{padding:r?ce.innerPadding:"0.75rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"6px",fontSize:R.label.size,color:"var(--color-text-secondary)",fontStyle:"italic",lineHeight:R.body.lineHeight},children:["💡 ",s.analysis]})]})},em=({title:s,color:e,awayShots:n,homeShots:r,awayXg:o,homeXg:c,awayTeam:h,homeTeam:g,isMobile:p})=>{const v=Math.max(n,r),b=v>0?n/v*100:0,T=v>0?r/v*100:0;return d.jsxs("div",{style:{padding:p?ce.innerPadding:"1rem",background:Nt.factors,border:`1px solid ${e}40`,borderRadius:"8px",transition:Qn.normal},children:[d.jsx("div",{style:{fontSize:R.label.size,fontWeight:R.heading.weight,textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,color:e,marginBottom:p?"0.5rem":"0.75rem"},children:s}),d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem",display:"flex",justifyContent:"space-between",fontWeight:R.body.weight},children:[d.jsxs("span",{children:[h," OFF"]}),d.jsxs("span",{style:{fontWeight:R.heading.weight,fontFeatureSettings:"'tnum'"},children:[n," shots (",o.toFixed(2)," xG)"]})]}),d.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"6px",overflow:"hidden"},children:d.jsx("div",{style:{width:`${b}%`,height:"100%",background:`linear-gradient(90deg, ${e} 0%, ${e}CC 100%)`,borderRadius:"6px",transition:Qn.normal}})})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem",display:"flex",justifyContent:"space-between",fontWeight:R.body.weight},children:[d.jsxs("span",{children:[g," DEF"]}),d.jsxs("span",{style:{fontWeight:R.heading.weight,fontFeatureSettings:"'tnum'"},children:[r," shots (",c.toFixed(2)," xG)"]})]}),d.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"6px",overflow:"hidden"},children:d.jsx("div",{style:{width:`${T}%`,height:"100%",background:`linear-gradient(90deg, ${e} 0%, ${e}CC 100%)`,borderRadius:"6px",transition:Qn.normal}})})]})]})},NE=({data:s,awayTeam:e,homeTeam:n,isMobile:r})=>{const o=parseFloat(s.awayOffense.conversion)||0,c=s.homeDefense.control,h=s.matchupEdge.favors;return d.jsxs(ql,{title:"Second-Chance Opportunities",icon:d.jsx(oh,{size:18}),isMobile:r,importance:"HIGH",children:[d.jsxs("div",{style:{padding:r?ce.innerPadding:"0.875rem",background:h==="away"?"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)":h==="home"?"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:h==="away"?"1px solid rgba(16, 185, 129, 0.3)":h==="home"?"1px solid rgba(14, 165, 233, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:r?ce.innerPadding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx(oh,{size:20,color:h==="away"?"#10B981":h==="home"?"#0EA5E9":"#8B5CF6"}),d.jsx("span",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:h==="away"?"#10B981":h==="home"?"#0EA5E9":"#8B5CF6"},children:h==="away"?`${e} OFFENSE CREATES MORE SECOND CHANCES`:h==="home"?`${n} DEFENSE CONTROLS REBOUND POSITIONING`:"PRETTY EVEN MATCHUP - REBOUND CONTROL"})]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-secondary)",lineHeight:R.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:h!=="neutral"?s.matchupEdge.summary:"Both teams balanced in creating and controlling rebounds. No significant advantage."})]}),d.jsxs("div",{style:{padding:r?ce.innerPadding:"1rem",background:Nt.factors,border:we.flat.border,borderRadius:"8px",marginBottom:r?ce.innerPadding:"1rem"},children:[d.jsxs("div",{style:{fontSize:R.caption.size,fontWeight:R.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,textAlign:"center"},children:[e," OFFENSE vs ",n," DEFENSE"]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"1rem",alignItems:"center"},children:[d.jsxs("div",{style:{textAlign:"center"},children:[d.jsxs("div",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:o>15?"#10B981":"#EF4444",marginBottom:"0.25rem",fontFeatureSettings:"'tnum'"},children:[s.awayOffense.conversion,"%"]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginBottom:"0.375rem"},children:"Conversion"}),d.jsxs("div",{style:{fontSize:R.caption.size,fontWeight:R.body.weight,color:"var(--color-text-primary)"},children:[s.awayOffense.rebounds," reb • ",s.awayOffense.reboundXg," xG"]}),s.awayOffense.status&&d.jsx("div",{style:{marginTop:"0.375rem",display:"inline-block",padding:"0.125rem 0.375rem",borderRadius:"3px",background:s.awayOffense.status==="Hot"?"#10B98120":s.awayOffense.status==="Cold"?"#EF444420":"#64748B20",color:s.awayOffense.status==="Hot"?"#10B981":s.awayOffense.status==="Cold"?"#EF4444":"#64748B",fontSize:R.caption.size,fontWeight:R.label.weight,textTransform:"uppercase"},children:s.awayOffense.status})]}),d.jsx("div",{style:{fontSize:R.subheading.size,color:"var(--color-accent)",fontWeight:R.heading.weight},children:"→"}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:c==="Excellent"?"#10B981":"#64748B",marginBottom:"0.25rem"},children:c}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginBottom:"0.375rem"},children:"Control"}),d.jsxs("div",{style:{fontSize:R.caption.size,fontWeight:R.body.weight,color:"var(--color-text-primary)"},children:[s.homeDefense.rebounds," reb • ",s.homeDefense.reboundXg," xG"]})]})]})]})]})},jE=({data:s,awayTeam:e,homeTeam:n,isMobile:r})=>{let o=e,c=0,h=0;s.forEach(v=>{v.advantage==="away"&&c++,v.advantage==="home"&&h++}),o=c>h?e:n;const g=s.find(v=>v.stat==="Shot Blocks"),p=s.find(v=>v.stat==="Hits");return d.jsxs(ql,{title:"Physical Play & Defense",icon:d.jsx(Hr,{size:18}),isMobile:r,importance:"MODERATE",children:[c!==h&&d.jsxs("div",{style:{padding:r?ce.innerPadding:"0.875rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"8px",marginBottom:r?ce.innerPadding:"1rem",textAlign:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx(rE,{size:20,color:"var(--color-accent)"}),d.jsxs("span",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:"var(--color-accent)"},children:[o," has the PHYSICAL EDGE"]})]}),g&&p&&d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",fontWeight:R.caption.weight},children:[Math.abs(parseFloat(g.diff))," more blocks, ",Math.abs(parseFloat(p.diff))," more hits"]})]}),d.jsx("div",{style:{display:"grid",gap:r?ce.innerPadding:"0.75rem"},children:s.map((v,b)=>d.jsx(OE,{stat:v.stat,awayValue:v.away.value,awayLabel:v.away.label,homeValue:v.home.value,homeLabel:v.home.label,advantage:v.advantage,diff:v.diff,awayTeam:e,homeTeam:n,isMobile:r},b))})]})},OE=({stat:s,awayValue:e,awayLabel:n,homeValue:r,homeLabel:o,advantage:c,diff:h,awayTeam:g,homeTeam:p,isMobile:v})=>d.jsxs("div",{style:{padding:v?ce.innerPadding:"0.875rem",background:Nt.factors,border:we.flat.border,borderRadius:"6px",transition:Qn.normal},children:[d.jsx("div",{style:{fontSize:R.caption.size,fontWeight:R.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.625rem",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:s}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:v?"0.5rem":"1rem",alignItems:"center"},children:[d.jsxs("div",{style:{textAlign:"left",color:c==="away"?"#10B981":"var(--color-text-secondary)",fontWeight:c==="away"?R.heading.weight:R.body.weight},children:[d.jsx("div",{style:{fontSize:R.body.size,fontFeatureSettings:"'tnum'",lineHeight:R.body.lineHeight},children:e}),d.jsx("div",{style:{fontSize:R.caption.size,opacity:.7,fontWeight:R.caption.weight},children:n})]}),d.jsxs("div",{style:{fontSize:R.caption.size,fontWeight:R.heading.weight,color:"var(--color-text-muted)",textAlign:"center"},children:["Δ ",h]}),d.jsxs("div",{style:{textAlign:"right",color:c==="home"?"#10B981":"var(--color-text-secondary)",fontWeight:c==="home"?R.heading.weight:R.body.weight},children:[d.jsx("div",{style:{fontSize:R.body.size,fontFeatureSettings:"'tnum'",lineHeight:R.body.lineHeight},children:r}),d.jsx("div",{style:{fontSize:R.caption.size,opacity:.7,fontWeight:R.caption.weight},children:o})]})]})]}),PE=({data:s,awayTeam:e,homeTeam:n,isMobile:r})=>{const o=s.away?.corsiPct||50,c=s.home?.corsiPct||50,h=s.away?.fenwickPct||50,g=s.home?.fenwickPct||50,p=s.away?.xGoalsPct||50,v=s.home?.xGoalsPct||50,b=s.away?.faceoffPct||50,T=s.home?.faceoffPct||50,S=(o+h+p)/3,A=(c+g+v)/3,z=S>A?e:n,M=Math.abs(S-A).toFixed(1);return d.jsxs(ql,{title:"Possession & Control",icon:d.jsx(er,{size:18}),isMobile:r,importance:"MODERATE",children:[d.jsxs("div",{style:{padding:r?ce.innerPadding:"0.875rem",background:M>3?"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:M>3?"1px solid rgba(14, 165, 233, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:r?ce.innerPadding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx(er,{size:20,color:M>3?"#0EA5E9":"#8B5CF6"}),d.jsx("span",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:M>3?"#0EA5E9":"#8B5CF6"},children:M>3?`${z} CONTROLS POSSESSION`:"PRETTY EVEN MATCHUP - POSSESSION"})]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-secondary)",lineHeight:R.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:M>3?`${M}% advantage in shot attempts. More zone time = more scoring chances.`:"Both teams control the puck equally. Possession unlikely to be a deciding factor."})]}),d.jsx(tm,{label:"Shot Attempts (Corsi)",awayValue:o,homeValue:c,awayTeam:e,homeTeam:n,isMobile:r}),d.jsx(tm,{label:"Unblocked Shots (Fenwick)",awayValue:h,homeValue:g,awayTeam:e,homeTeam:n,isMobile:r}),d.jsx(tm,{label:"Expected Goals Share",awayValue:p,homeValue:v,awayTeam:e,homeTeam:n,isMobile:r}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:r?ce.innerPadding:"1rem",marginTop:r?ce.innerPadding:"1rem"},children:[d.jsx(gv,{team:e,percentage:b,isMobile:r}),d.jsx(gv,{team:n,percentage:T,isMobile:r})]})]})},tm=({label:s,awayValue:e,homeValue:n,awayTeam:r,homeTeam:o,isMobile:c})=>{const g=e>n?"#10B981":"#64748B",p=n>e?"#10B981":"#64748B";return d.jsxs("div",{style:{marginBottom:c?ce.innerPadding:"1rem",padding:c?ce.innerPadding:"0.875rem",background:Nt.factors,border:we.flat.border,borderRadius:"8px"},children:[d.jsxs("div",{style:{fontSize:R.caption.size,fontWeight:R.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("span",{children:s}),d.jsxs("span",{style:{fontSize:R.caption.size,color:"rgba(212, 175, 55, 0.8)"},children:["League Avg: ",50,"%"]})]}),d.jsxs("div",{style:{marginBottom:"0.625rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:R.caption.size},children:[d.jsx("span",{style:{fontWeight:R.body.weight,color:"var(--color-text-primary)"},children:r}),d.jsxs("span",{style:{fontWeight:R.heading.weight,color:g,fontFeatureSettings:"'tnum'"},children:[e.toFixed(1),"%",e>50&&d.jsx("span",{style:{color:"#10B981",marginLeft:"0.25rem"},children:"↑"}),e<50&&d.jsx("span",{style:{color:"#EF4444",marginLeft:"0.25rem"},children:"↓"})]})]}),d.jsxs("div",{style:{width:"100%",height:"10px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"5px",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(212, 175, 55, 0.6)",zIndex:2}}),d.jsx("div",{style:{width:`${e}%`,height:"100%",background:`linear-gradient(90deg, ${g} 0%, ${g}CC 100%)`,borderRadius:"5px",transition:Qn.normal,position:"relative",zIndex:1}})]})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:R.caption.size},children:[d.jsx("span",{style:{fontWeight:R.body.weight,color:"var(--color-text-primary)"},children:o}),d.jsxs("span",{style:{fontWeight:R.heading.weight,color:p,fontFeatureSettings:"'tnum'"},children:[n.toFixed(1),"%",n>50&&d.jsx("span",{style:{color:"#10B981",marginLeft:"0.25rem"},children:"↑"}),n<50&&d.jsx("span",{style:{color:"#EF4444",marginLeft:"0.25rem"},children:"↓"})]})]}),d.jsxs("div",{style:{width:"100%",height:"10px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"5px",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(212, 175, 55, 0.6)",zIndex:2}}),d.jsx("div",{style:{width:`${n}%`,height:"100%",background:`linear-gradient(90deg, ${p} 0%, ${p}CC 100%)`,borderRadius:"5px",transition:Qn.normal,position:"relative",zIndex:1}})]})]})]})},gv=({team:s,percentage:e,isMobile:n})=>{const o=2*Math.PI*40,c=e/100*o,h=e>50?"#10B981":e<50?"#EF4444":"#8B5CF6";return d.jsxs("div",{style:{padding:n?ce.innerPadding:"1rem",background:Nt.factors,border:we.flat.border,borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[d.jsxs("div",{style:{fontSize:R.caption.size,fontWeight:R.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.5rem",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:[s," Faceoffs"]}),d.jsxs("svg",{width:"100",height:"100",children:[d.jsx("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:"rgba(100, 116, 139, 0.2)",strokeWidth:"8"}),d.jsx("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:h,strokeWidth:"8",strokeDasharray:o,strokeDashoffset:o-c,strokeLinecap:"round",transform:"rotate(-90 50 50)",style:{transition:Qn.slow}}),d.jsxs("text",{x:"50",y:"50",textAnchor:"middle",dominantBaseline:"middle",style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,fill:h,fontFeatureSettings:"'tnum'"},children:[e.toFixed(1),"%"]})]})]})},kE=({data:s,awayTeam:e,homeTeam:n,isMobile:r})=>d.jsx(ql,{title:"Luck & Regression Indicators",icon:d.jsx(er,{size:18}),isMobile:r,importance:"MODERATE",children:d.jsxs("div",{style:{display:"grid",gridTemplateColumns:r?"1fr":"repeat(2, 1fr)",gap:r?ce.innerPadding:"1rem"},children:[d.jsx(pv,{team:e,pdo:s.away?.pdo||100,shootingPct:s.away?.shootingPct||10,savePct:s.away?.savePct||90,goalsVsXg:s.away?.goalsVsExpected||0,isMobile:r}),d.jsx(pv,{team:n,pdo:s.home?.pdo||100,shootingPct:s.home?.shootingPct||10,savePct:s.home?.savePct||90,goalsVsXg:s.home?.goalsVsExpected||0,isMobile:r})]})}),pv=({team:s,pdo:e,shootingPct:n,savePct:r,goalsVsXg:o,isMobile:c})=>{const g=e>104?{status:"LIKELY TO DECLINE",color:"#EF4444",icon:"📉",explanation:"PDO >104 indicates unsustainable luck. Expect fewer goals.",arrow:"↘️"}:e>102?{status:"MILD DECLINE LIKELY",color:"#F59E0B",icon:"⚠️",explanation:"PDO >102 suggests slight overperformance. Some regression expected.",arrow:"↘️"}:e<96?{status:"LIKELY TO IMPROVE",color:"#10B981",icon:"📈",explanation:"PDO <96 indicates bad luck. Expect more goals.",arrow:"↗️"}:e<98?{status:"MILD IMPROVEMENT LIKELY",color:"#0EA5E9",icon:"⬆️",explanation:"PDO <98 suggests slight underperformance. Some improvement expected.",arrow:"↗️"}:{status:"SUSTAINABLE",color:"#8B5CF6",icon:"✓",explanation:"PDO 98-102 indicates sustainable performance.",arrow:"→"};return d.jsxs("div",{style:{padding:c?ce.innerPadding:"1rem",background:Nt.factors,border:we.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:R.caption.size,fontWeight:R.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.5rem",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:s}),d.jsxs("div",{style:{padding:c?ce.innerPadding:"0.75rem",background:`${g.color}15`,border:`1px solid ${g.color}40`,borderRadius:"6px",marginBottom:c?"0.5rem":"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx("span",{style:{fontSize:R.body.size},children:g.icon}),d.jsx("span",{style:{fontSize:R.caption.size,fontWeight:R.heading.weight,color:g.color,textTransform:"uppercase",letterSpacing:"0.05em"},children:g.status})]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-secondary)",lineHeight:R.body.lineHeight,fontStyle:"italic"},children:g.explanation})]}),d.jsx(ku,{label:`PDO ${g.arrow}`,value:e.toFixed(1),badge:e>102?"Hot":e<98?"Cold":"Average",badgeColor:g.color}),d.jsx(ku,{label:"Shooting %",value:`${n.toFixed(1)}%`}),d.jsx(ku,{label:"Save %",value:`${r.toFixed(1)}%`}),d.jsx(ku,{label:"Goals vs xG",value:o>=0?`+${o.toFixed(1)}`:o.toFixed(1),badgeColor:o>0?"#10B981":o<0?"#EF4444":"#64748B"})]})},ql=({title:s,icon:e,children:n,isMobile:r,importance:o})=>{const c={HIGH:"var(--color-accent)",MODERATE:"#0EA5E9",LOW:"#8B5CF6"};return d.jsxs("div",{style:{marginBottom:r?ce.sectionGap:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",marginBottom:r?"0.5rem":"1rem",paddingBottom:"0.5rem",borderBottom:we.flat.border},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("div",{style:{color:"var(--color-accent)"},children:e}),d.jsx("h4",{style:{fontSize:r?R.body.size:R.subheading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",margin:0,lineHeight:R.heading.lineHeight},children:s})]}),o&&d.jsx("span",{style:{fontSize:R.caption.size,fontWeight:R.label.weight,color:c[o],textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:o})]}),n]})},ku=({label:s,value:e,badge:n,badgeColor:r})=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[d.jsx("span",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",fontWeight:R.caption.weight,lineHeight:R.caption.lineHeight},children:s}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("span",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'",lineHeight:R.body.lineHeight},children:e}),n&&d.jsx("span",{style:{fontSize:R.caption.size,fontWeight:R.label.weight,textTransform:R.label.textTransform,letterSpacing:"0.03em",padding:"0.125rem 0.375rem",borderRadius:"3px",background:`${r}20`,color:r},children:n})]})]});function ME(s){if(!s||s.length===0)return null;let e=0,n=0,r=0,o=0,c=0,h=0,g=0;if(s.forEach(z=>{const M=z.edges?.total?.predictedTotal,B=z.rawOdds?.total?.line;if(!M||!B)return;g++;const te=M-B;e+=Math.abs(te),n+=M,r+=B,te<-.3?o++:te>.3?c++:h++}),g===0)return null;const p=e/g,v=n/g,b=r/g,T=o/g,S=c/g,A={avgPredicted:v.toFixed(2),avgMarket:b.toFixed(2),avgDifference:p.toFixed(2),systematicBias:(v-b).toFixed(2),underBias:(T*100).toFixed(0)+"%",overBias:(S*100).toFixed(0)+"%",neutralBias:(h/g*100).toFixed(0)+"%",warnings:[]};return Math.abs(v-b)>.3&&A.warnings.push(`⚠️ Systematic bias: ${(v-b).toFixed(2)} goals`),T>.6&&A.warnings.push(`⚠️ UNDER bias: ${(T*100).toFixed(0)}% of games`),S>.6&&A.warnings.push(`⚠️ OVER bias: ${(S*100).toFixed(0)}% of games`),p>.4&&A.warnings.push(`⚠️ Predictions diverging from market by ${p.toFixed(2)} goals on average`),console.log("═══════════════════════════════════════"),console.log("📊 MODEL VALIDATION REPORT"),console.log("═══════════════════════════════════════"),console.log(`Avg Predicted Total: ${A.avgPredicted} goals`),console.log(`Avg Market Total:    ${A.avgMarket} goals`),console.log(`Avg Difference:      ${A.avgDifference} goals`),console.log(`Systematic Bias:     ${A.systematicBias} goals`),console.log("───────────────────────────────────────"),console.log(`UNDER recommendations: ${A.underBias}`),console.log(`OVER recommendations:  ${A.overBias}`),console.log(`Neutral (±0.3):        ${A.neutralBias}`),console.log("───────────────────────────────────────"),A.warnings.length>0?(console.log("⚠️ WARNINGS:"),A.warnings.forEach(z=>console.log(z))):console.log("✅ No systematic bias detected"),console.log("═══════════════════════════════════════"),A}const zE=()=>{};var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},VE=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],h=s[n++],g=s[n++],p=((o&7)<<18|(c&63)<<12|(h&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const c=s[n++],h=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},e_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,g=h?s[o+1]:0,p=o+2<s.length,v=p?s[o+2]:0,b=c>>2,T=(c&3)<<4|g>>4;let S=(g&15)<<2|v>>6,A=v&63;p||(A=64,h||(S=64)),r.push(n[b],n[T],n[S],n[A])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(J1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):VE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const v=o<s.length?n[s.charAt(o)]:64;++o;const T=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||g==null||v==null||T==null)throw new LE;const S=c<<2|g>>4;if(r.push(S),v!==64){const A=g<<4&240|v>>2;if(r.push(A),T!==64){const z=v<<6&192|T;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class LE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BE=function(s){const e=J1(s);return e_.encodeByteArray(e,!0)},ch=function(s){return BE(s).replace(/\./g,"")},t_=function(s){try{return e_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=()=>FE().__FIREBASE_DEFAULTS__,GE=()=>{if(typeof process>"u"||typeof yv>"u")return;const s=yv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},HE=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&t_(s[1]);return e&&JSON.parse(e)},Ch=()=>{try{return zE()||UE()||GE()||HE()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},n_=s=>Ch()?.emulatorHosts?.[s],i_=s=>{const e=n_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},r_=()=>Ch()?.config,s_=s=>Ch()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $m(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ch(JSON.stringify(n)),ch(JSON.stringify(h)),""].join(".")}const Nl={};function WE(){const s={prod:[],emulator:[]};for(const e of Object.keys(Nl))Nl[e]?s.emulator.push(e):s.prod.push(e);return s}function KE(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let vv=!1;function qm(s,e){if(typeof window>"u"||typeof document>"u"||!Ys(window.location.host)||Nl[s]===e||Nl[s]||vv)return;Nl[s]=e;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",c=WE().prod.length>0;function h(){const S=document.getElementById(r);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,A){S.setAttribute("width","24"),S.setAttribute("id",A),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{vv=!0,h()},S}function b(S,A){S.setAttribute("id",A),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=KE(r),A=n("text"),z=document.getElementById(A)||document.createElement("span"),M=n("learnmore"),B=document.getElementById(M)||document.createElement("a"),te=n("preprendIcon"),$=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;g(ee),b(B,M);const ne=v();p($,te),ee.append($,z,B,ne),document.body.appendChild(ee)}c?(z.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function QE(){const s=Ch()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZE(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function JE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eA(){const s=Yt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function tA(){return!QE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nA(){try{return typeof indexedDB=="object"}catch{return!1}}function iA(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rA,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wl.prototype.create)}}class Wl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?sA(c,r):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new ar(o,g,r)}}function sA(s,e){return s.replace(aA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const aA=/\{\$([^}]+)}/g;function oA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function $s(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=s[o],h=e[o];if(_v(c)&&_v(h)){if(!$s(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function _v(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lA(s,e){const n=new cA(s,e);return n.subscribe.bind(n)}class cA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=nm),o.error===void 0&&(o.error=nm),o.complete===void 0&&(o.complete=nm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uA(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(s){return s&&s._delegate?s._delegate:s}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $E;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fA(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&h.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dA(s){return s===Us?void 0:s}function fA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(De||(De={}));const gA={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},pA=De.INFO,yA={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},vA=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=yA[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wm{constructor(e){this.name=e,this._logLevel=pA,this._logHandler=vA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const _A=(s,e)=>e.some(n=>s instanceof n);let xv,bv;function xA(){return xv||(xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a_=new WeakMap,pm=new WeakMap,o_=new WeakMap,im=new WeakMap,Km=new WeakMap;function TA(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{n(Qr(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&a_.set(n,s)}).catch(()=>{}),Km.set(e,s),e}function SA(s){if(pm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});pm.set(s,e)}let ym={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return pm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||o_.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function EA(s){ym=s(ym)}function AA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(rm(this),e,...n);return o_.set(r,e.sort?e.sort():[e]),Qr(r)}:bA().includes(s)?function(...e){return s.apply(rm(this),e),Qr(a_.get(this))}:function(...e){return Qr(s.apply(rm(this),e))}}function wA(s){return typeof s=="function"?AA(s):(s instanceof IDBTransaction&&SA(s),_A(s,xA())?new Proxy(s,ym):s)}function Qr(s){if(s instanceof IDBRequest)return TA(s);if(im.has(s))return im.get(s);const e=wA(s);return e!==s&&(im.set(s,e),Km.set(e,s)),e}const rm=s=>Km.get(s);function RA(s,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),g=Qr(h);return r&&h.addEventListener("upgradeneeded",p=>{r(Qr(h.result),p.oldVersion,p.newVersion,Qr(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const CA=["get","getKey","getAll","getAllKeys","count"],IA=["put","add","delete","clear"],sm=new Map;function Tv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=IA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||CA.includes(n)))return;const c=async function(h,...g){const p=this.transaction(h,o?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),o&&p.done]))[0]};return sm.set(e,c),c}EA(s=>({...s,get:(e,n,r)=>Tv(e,n)||s.get(e,n,r),has:(e,n)=>!!Tv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NA(s){return s.getComponent()?.type==="VERSION"}const vm="@firebase/app",Sv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Wm("@firebase/app"),jA="@firebase/app-compat",OA="@firebase/analytics-compat",PA="@firebase/analytics",kA="@firebase/app-check-compat",MA="@firebase/app-check",zA="@firebase/auth",VA="@firebase/auth-compat",LA="@firebase/database",BA="@firebase/data-connect",FA="@firebase/database-compat",UA="@firebase/functions",GA="@firebase/functions-compat",HA="@firebase/installations",$A="@firebase/installations-compat",qA="@firebase/messaging",WA="@firebase/messaging-compat",KA="@firebase/performance",XA="@firebase/performance-compat",QA="@firebase/remote-config",YA="@firebase/remote-config-compat",ZA="@firebase/storage",JA="@firebase/storage-compat",ew="@firebase/firestore",tw="@firebase/ai",nw="@firebase/firestore-compat",iw="firebase",rw="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="[DEFAULT]",sw={[vm]:"fire-core",[jA]:"fire-core-compat",[PA]:"fire-analytics",[OA]:"fire-analytics-compat",[MA]:"fire-app-check",[kA]:"fire-app-check-compat",[zA]:"fire-auth",[VA]:"fire-auth-compat",[LA]:"fire-rtdb",[BA]:"fire-data-connect",[FA]:"fire-rtdb-compat",[UA]:"fire-fn",[GA]:"fire-fn-compat",[HA]:"fire-iid",[$A]:"fire-iid-compat",[qA]:"fire-fcm",[WA]:"fire-fcm-compat",[KA]:"fire-perf",[XA]:"fire-perf-compat",[QA]:"fire-rc",[YA]:"fire-rc-compat",[ZA]:"fire-gcs",[JA]:"fire-gcs-compat",[ew]:"fire-fst",[nw]:"fire-fst-compat",[tw]:"fire-vertex","fire-js":"fire-js",[iw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,aw=new Map,xm=new Map;function Ev(s,e){try{s.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function qs(s){const e=s.name;if(xm.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;xm.set(e,s);for(const n of uh.values())Ev(n,s);for(const n of aw.values())Ev(n,s);return!0}function Ih(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Kn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new Wl("app","Firebase",ow);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=rw;function l_(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:_m,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Yr.create("bad-app-name",{appName:String(o)});if(n||(n=r_()),!n)throw Yr.create("no-options");const c=uh.get(o);if(c){if($s(n,c.options)&&$s(r,c.config))return c;throw Yr.create("duplicate-app",{appName:o})}const h=new mA(o);for(const p of xm.values())h.addComponent(p);const g=new lw(n,r,h);return uh.set(o,g),g}function Xm(s=_m){const e=uh.get(s);if(!e&&s===_m&&r_())return l_();if(!e)throw Yr.create("no-app",{appName:s});return e}function bi(s,e,n){let r=sw[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(h.join(" "));return}qs(new ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="firebase-heartbeat-database",uw=1,zl="firebase-heartbeat-store";let am=null;function c_(){return am||(am=RA(cw,uw,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(zl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Yr.create("idb-open",{originalErrorMessage:s.message})})),am}async function hw(s){try{const n=(await c_()).transaction(zl),r=await n.objectStore(zl).get(u_(s));return await n.done,r}catch(e){if(e instanceof ar)tr.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e?.message});tr.warn(n.message)}}}async function Av(s,e){try{const r=(await c_()).transaction(zl,"readwrite");await r.objectStore(zl).put(e,u_(s)),await r.done}catch(n){if(n instanceof ar)tr.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n?.message});tr.warn(r.message)}}}function u_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=1024,fw=30;class mw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>fw){const o=yw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){tr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=wv(),{heartbeatsToSend:n,unsentEntries:r}=gw(this._heartbeatsCache.heartbeats),o=ch(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return tr.warn(e),""}}}function wv(){return new Date().toISOString().substring(0,10)}function gw(s,e=dw){const n=[];let r=s.slice();for(const o of s){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),Rv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Rv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nA()?iA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rv(s){return ch(JSON.stringify({version:2,heartbeats:s})).length}function yw(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(s){qs(new ts("platform-logger",e=>new DA(e),"PRIVATE")),qs(new ts("heartbeat",e=>new mw(e),"PRIVATE")),bi(vm,Sv,s),bi(vm,Sv,"esm2020"),bi("fire-js","")}vw("");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,h_;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,C){function D(){}D.prototype=C.prototype,I.F=C.prototype,I.prototype=new D,I.prototype.constructor=I,I.D=function(N,P,V){for(var j=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)j[Fe-2]=arguments[Fe];return C.prototype[P].apply(N,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,C,D){D||(D=0);const N=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)N[P]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(P=0;P<16;++P)N[P]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=I.g[0],D=I.g[1],P=I.g[2];let V=I.g[3],j;j=C+(V^D&(P^V))+N[0]+3614090360&4294967295,C=D+(j<<7&4294967295|j>>>25),j=V+(P^C&(D^P))+N[1]+3905402710&4294967295,V=C+(j<<12&4294967295|j>>>20),j=P+(D^V&(C^D))+N[2]+606105819&4294967295,P=V+(j<<17&4294967295|j>>>15),j=D+(C^P&(V^C))+N[3]+3250441966&4294967295,D=P+(j<<22&4294967295|j>>>10),j=C+(V^D&(P^V))+N[4]+4118548399&4294967295,C=D+(j<<7&4294967295|j>>>25),j=V+(P^C&(D^P))+N[5]+1200080426&4294967295,V=C+(j<<12&4294967295|j>>>20),j=P+(D^V&(C^D))+N[6]+2821735955&4294967295,P=V+(j<<17&4294967295|j>>>15),j=D+(C^P&(V^C))+N[7]+4249261313&4294967295,D=P+(j<<22&4294967295|j>>>10),j=C+(V^D&(P^V))+N[8]+1770035416&4294967295,C=D+(j<<7&4294967295|j>>>25),j=V+(P^C&(D^P))+N[9]+2336552879&4294967295,V=C+(j<<12&4294967295|j>>>20),j=P+(D^V&(C^D))+N[10]+4294925233&4294967295,P=V+(j<<17&4294967295|j>>>15),j=D+(C^P&(V^C))+N[11]+2304563134&4294967295,D=P+(j<<22&4294967295|j>>>10),j=C+(V^D&(P^V))+N[12]+1804603682&4294967295,C=D+(j<<7&4294967295|j>>>25),j=V+(P^C&(D^P))+N[13]+4254626195&4294967295,V=C+(j<<12&4294967295|j>>>20),j=P+(D^V&(C^D))+N[14]+2792965006&4294967295,P=V+(j<<17&4294967295|j>>>15),j=D+(C^P&(V^C))+N[15]+1236535329&4294967295,D=P+(j<<22&4294967295|j>>>10),j=C+(P^V&(D^P))+N[1]+4129170786&4294967295,C=D+(j<<5&4294967295|j>>>27),j=V+(D^P&(C^D))+N[6]+3225465664&4294967295,V=C+(j<<9&4294967295|j>>>23),j=P+(C^D&(V^C))+N[11]+643717713&4294967295,P=V+(j<<14&4294967295|j>>>18),j=D+(V^C&(P^V))+N[0]+3921069994&4294967295,D=P+(j<<20&4294967295|j>>>12),j=C+(P^V&(D^P))+N[5]+3593408605&4294967295,C=D+(j<<5&4294967295|j>>>27),j=V+(D^P&(C^D))+N[10]+38016083&4294967295,V=C+(j<<9&4294967295|j>>>23),j=P+(C^D&(V^C))+N[15]+3634488961&4294967295,P=V+(j<<14&4294967295|j>>>18),j=D+(V^C&(P^V))+N[4]+3889429448&4294967295,D=P+(j<<20&4294967295|j>>>12),j=C+(P^V&(D^P))+N[9]+568446438&4294967295,C=D+(j<<5&4294967295|j>>>27),j=V+(D^P&(C^D))+N[14]+3275163606&4294967295,V=C+(j<<9&4294967295|j>>>23),j=P+(C^D&(V^C))+N[3]+4107603335&4294967295,P=V+(j<<14&4294967295|j>>>18),j=D+(V^C&(P^V))+N[8]+1163531501&4294967295,D=P+(j<<20&4294967295|j>>>12),j=C+(P^V&(D^P))+N[13]+2850285829&4294967295,C=D+(j<<5&4294967295|j>>>27),j=V+(D^P&(C^D))+N[2]+4243563512&4294967295,V=C+(j<<9&4294967295|j>>>23),j=P+(C^D&(V^C))+N[7]+1735328473&4294967295,P=V+(j<<14&4294967295|j>>>18),j=D+(V^C&(P^V))+N[12]+2368359562&4294967295,D=P+(j<<20&4294967295|j>>>12),j=C+(D^P^V)+N[5]+4294588738&4294967295,C=D+(j<<4&4294967295|j>>>28),j=V+(C^D^P)+N[8]+2272392833&4294967295,V=C+(j<<11&4294967295|j>>>21),j=P+(V^C^D)+N[11]+1839030562&4294967295,P=V+(j<<16&4294967295|j>>>16),j=D+(P^V^C)+N[14]+4259657740&4294967295,D=P+(j<<23&4294967295|j>>>9),j=C+(D^P^V)+N[1]+2763975236&4294967295,C=D+(j<<4&4294967295|j>>>28),j=V+(C^D^P)+N[4]+1272893353&4294967295,V=C+(j<<11&4294967295|j>>>21),j=P+(V^C^D)+N[7]+4139469664&4294967295,P=V+(j<<16&4294967295|j>>>16),j=D+(P^V^C)+N[10]+3200236656&4294967295,D=P+(j<<23&4294967295|j>>>9),j=C+(D^P^V)+N[13]+681279174&4294967295,C=D+(j<<4&4294967295|j>>>28),j=V+(C^D^P)+N[0]+3936430074&4294967295,V=C+(j<<11&4294967295|j>>>21),j=P+(V^C^D)+N[3]+3572445317&4294967295,P=V+(j<<16&4294967295|j>>>16),j=D+(P^V^C)+N[6]+76029189&4294967295,D=P+(j<<23&4294967295|j>>>9),j=C+(D^P^V)+N[9]+3654602809&4294967295,C=D+(j<<4&4294967295|j>>>28),j=V+(C^D^P)+N[12]+3873151461&4294967295,V=C+(j<<11&4294967295|j>>>21),j=P+(V^C^D)+N[15]+530742520&4294967295,P=V+(j<<16&4294967295|j>>>16),j=D+(P^V^C)+N[2]+3299628645&4294967295,D=P+(j<<23&4294967295|j>>>9),j=C+(P^(D|~V))+N[0]+4096336452&4294967295,C=D+(j<<6&4294967295|j>>>26),j=V+(D^(C|~P))+N[7]+1126891415&4294967295,V=C+(j<<10&4294967295|j>>>22),j=P+(C^(V|~D))+N[14]+2878612391&4294967295,P=V+(j<<15&4294967295|j>>>17),j=D+(V^(P|~C))+N[5]+4237533241&4294967295,D=P+(j<<21&4294967295|j>>>11),j=C+(P^(D|~V))+N[12]+1700485571&4294967295,C=D+(j<<6&4294967295|j>>>26),j=V+(D^(C|~P))+N[3]+2399980690&4294967295,V=C+(j<<10&4294967295|j>>>22),j=P+(C^(V|~D))+N[10]+4293915773&4294967295,P=V+(j<<15&4294967295|j>>>17),j=D+(V^(P|~C))+N[1]+2240044497&4294967295,D=P+(j<<21&4294967295|j>>>11),j=C+(P^(D|~V))+N[8]+1873313359&4294967295,C=D+(j<<6&4294967295|j>>>26),j=V+(D^(C|~P))+N[15]+4264355552&4294967295,V=C+(j<<10&4294967295|j>>>22),j=P+(C^(V|~D))+N[6]+2734768916&4294967295,P=V+(j<<15&4294967295|j>>>17),j=D+(V^(P|~C))+N[13]+1309151649&4294967295,D=P+(j<<21&4294967295|j>>>11),j=C+(P^(D|~V))+N[4]+4149444226&4294967295,C=D+(j<<6&4294967295|j>>>26),j=V+(D^(C|~P))+N[11]+3174756917&4294967295,V=C+(j<<10&4294967295|j>>>22),j=P+(C^(V|~D))+N[2]+718787259&4294967295,P=V+(j<<15&4294967295|j>>>17),j=D+(V^(P|~C))+N[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(P+(j<<21&4294967295|j>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+V&4294967295}r.prototype.v=function(I,C){C===void 0&&(C=I.length);const D=C-this.blockSize,N=this.C;let P=this.h,V=0;for(;V<C;){if(P==0)for(;V<=D;)o(this,I,V),V+=this.blockSize;if(typeof I=="string"){for(;V<C;)if(N[P++]=I.charCodeAt(V++),P==this.blockSize){o(this,N),P=0;break}}else for(;V<C;)if(N[P++]=I[V++],P==this.blockSize){o(this,N),P=0;break}}this.h=P,this.o+=C},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var D=I.length-8;D<I.length;++D)I[D]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,D=0;D<4;++D)for(let N=0;N<32;N+=8)I[C++]=this.g[D]>>>N&255;return I};function c(I,C){var D=g;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=C(I)}function h(I,C){this.h=C;const D=[];let N=!0;for(let P=I.length-1;P>=0;P--){const V=I[P]|0;N&&V==C||(D[P]=V,N=!1)}this.g=D}var g={};function p(I){return-128<=I&&I<128?c(I,function(C){return new h([C|0],C<0?-1:0)}):new h([I|0],I<0?-1:0)}function v(I){if(isNaN(I)||!isFinite(I))return T;if(I<0)return B(v(-I));const C=[];let D=1;for(let N=0;I>=D;N++)C[N]=I/D|0,D*=4294967296;return new h(C,0)}function b(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return B(b(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=v(Math.pow(C,8));let N=T;for(let V=0;V<I.length;V+=8){var P=Math.min(8,I.length-V);const j=parseInt(I.substring(V,V+P),C);P<8?(P=v(Math.pow(C,P)),N=N.j(P).add(v(j))):(N=N.j(D),N=N.add(v(j)))}return N}var T=p(0),S=p(1),A=p(16777216);s=h.prototype,s.m=function(){if(M(this))return-B(this).m();let I=0,C=1;for(let D=0;D<this.g.length;D++){const N=this.i(D);I+=(N>=0?N:4294967296+N)*C,C*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(z(this))return"0";if(M(this))return"-"+B(this).toString(I);const C=v(Math.pow(I,6));var D=this;let N="";for(;;){const P=ne(D,C).g;D=te(D,P.j(C));let V=((D.g.length>0?D.g[0]:D.h)>>>0).toString(I);if(D=P,z(D))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function z(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function M(I){return I.h==-1}s.l=function(I){return I=te(this,I),M(I)?-1:z(I)?0:1};function B(I){const C=I.g.length,D=[];for(let N=0;N<C;N++)D[N]=~I.g[N];return new h(D,~I.h).add(S)}s.abs=function(){return M(this)?B(this):this},s.add=function(I){const C=Math.max(this.g.length,I.g.length),D=[];let N=0;for(let P=0;P<=C;P++){let V=N+(this.i(P)&65535)+(I.i(P)&65535),j=(V>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);N=j>>>16,V&=65535,j&=65535,D[P]=j<<16|V}return new h(D,D[D.length-1]&-2147483648?-1:0)};function te(I,C){return I.add(B(C))}s.j=function(I){if(z(this)||z(I))return T;if(M(this))return M(I)?B(this).j(B(I)):B(B(this).j(I));if(M(I))return B(this.j(B(I)));if(this.l(A)<0&&I.l(A)<0)return v(this.m()*I.m());const C=this.g.length+I.g.length,D=[];for(var N=0;N<2*C;N++)D[N]=0;for(N=0;N<this.g.length;N++)for(let P=0;P<I.g.length;P++){const V=this.i(N)>>>16,j=this.i(N)&65535,Fe=I.i(P)>>>16,ct=I.i(P)&65535;D[2*N+2*P]+=j*ct,$(D,2*N+2*P),D[2*N+2*P+1]+=V*ct,$(D,2*N+2*P+1),D[2*N+2*P+1]+=j*Fe,$(D,2*N+2*P+1),D[2*N+2*P+2]+=V*Fe,$(D,2*N+2*P+2)}for(I=0;I<C;I++)D[I]=D[2*I+1]<<16|D[2*I];for(I=C;I<2*C;I++)D[I]=0;return new h(D,0)};function $(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function ee(I,C){this.g=I,this.h=C}function ne(I,C){if(z(C))throw Error("division by zero");if(z(I))return new ee(T,T);if(M(I))return C=ne(B(I),C),new ee(B(C.g),B(C.h));if(M(C))return C=ne(I,B(C)),new ee(B(C.g),C.h);if(I.g.length>30){if(M(I)||M(C))throw Error("slowDivide_ only works with positive integers.");for(var D=S,N=C;N.l(I)<=0;)D=re(D),N=re(N);var P=ue(D,1),V=ue(N,1);for(N=ue(N,2),D=ue(D,2);!z(N);){var j=V.add(N);j.l(I)<=0&&(P=P.add(D),V=j),N=ue(N,1),D=ue(D,1)}return C=te(I,P.j(C)),new ee(P,C)}for(P=T;I.l(C)>=0;){for(D=Math.max(1,Math.floor(I.m()/C.m())),N=Math.ceil(Math.log(D)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=v(D),j=V.j(C);M(j)||j.l(I)>0;)D-=N,V=v(D),j=V.j(C);z(V)&&(V=S),P=P.add(V),I=te(I,j)}return new ee(P,I)}s.B=function(I){return ne(this,I).h},s.and=function(I){const C=Math.max(this.g.length,I.g.length),D=[];for(let N=0;N<C;N++)D[N]=this.i(N)&I.i(N);return new h(D,this.h&I.h)},s.or=function(I){const C=Math.max(this.g.length,I.g.length),D=[];for(let N=0;N<C;N++)D[N]=this.i(N)|I.i(N);return new h(D,this.h|I.h)},s.xor=function(I){const C=Math.max(this.g.length,I.g.length),D=[];for(let N=0;N<C;N++)D[N]=this.i(N)^I.i(N);return new h(D,this.h^I.h)};function re(I){const C=I.g.length+1,D=[];for(let N=0;N<C;N++)D[N]=I.i(N)<<1|I.i(N-1)>>>31;return new h(D,I.h)}function ue(I,C){const D=C>>5;C%=32;const N=I.g.length-D,P=[];for(let V=0;V<N;V++)P[V]=C>0?I.i(V+D)>>>C|I.i(V+D+1)<<32-C:I.i(V+D);return new h(P,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,h_=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=b,Zr=h}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d_,Cl,f_,qu,bm,m_,g_,p_;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mu=="object"&&Mu];for(var y=0;y<u.length;++y){var x=u[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function o(u,y){if(y)e:{var x=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var F=u[w];if(!(F in x))break e;x=x[F]}u=u[u.length-1],w=x[u],y=y(w),y!=w&&y!=null&&e(x,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var x=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&x.push([w,y[w]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function g(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function p(u,y,x){return u.call.apply(u.bind,arguments)}function v(u,y,x){return v=p,v.apply(null,arguments)}function b(u,y){var x=Array.prototype.slice.call(arguments,1);return function(){var w=x.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function T(u,y){function x(){}x.prototype=y.prototype,u.Z=y.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(w,F,q){for(var ie=Array(arguments.length-2),be=2;be<arguments.length;be++)ie[be-2]=arguments[be];return y.prototype[F].apply(w,ie)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function A(u){const y=u.length;if(y>0){const x=Array(y);for(let w=0;w<y;w++)x[w]=u[w];return x}return[]}function z(u,y){for(let w=1;w<arguments.length;w++){const F=arguments[w];var x=typeof F;if(x=x!="object"?x:F?Array.isArray(F)?"array":x:"null",x=="array"||x=="object"&&typeof F.length=="number"){x=u.length||0;const q=F.length||0;u.length=x+q;for(let ie=0;ie<q;ie++)u[x+ie]=F[ie]}else u.push(F)}}class M{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(u){h.setTimeout(()=>{throw u},0)}function te(){var u=I;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,x){const w=ee.get();w.set(y,x),this.h?this.h.next=w:this.g=w,this.h=w}}var ee=new M(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ue=!1,I=new $,C=()=>{const u=Promise.resolve(void 0);re=()=>{u.then(D)}};function D(){for(var u;u=te();){try{u.h.call(u.g)}catch(x){B(x)}var y=ee;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}ue=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};h.addEventListener("test",x,y),h.removeEventListener("test",x,y)}catch{}return u})();function j(u){return/^[\s\xa0]*$/.test(u)}function Fe(u,y){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}T(Fe,P),Fe.prototype.init=function(u,y){const x=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(x=="mouseover"?y=u.fromElement:x=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ct="closure_listenable_"+(Math.random()*1e6|0),X=0;function se(u,y,x,w,F){this.listener=u,this.proxy=null,this.src=y,this.type=x,this.capture=!!w,this.ha=F,this.key=++X,this.da=this.fa=!1}function ge(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Oe(u,y,x){for(const w in u)y.call(x,u[w],w,u)}function Me(u,y){for(const x in u)y.call(void 0,u[x],x,u)}function gt(u){const y={};for(const x in u)y[x]=u[x];return y}const Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(u,y){let x,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(x in w)u[x]=w[x];for(let q=0;q<Ge.length;q++)x=Ge[q],Object.prototype.hasOwnProperty.call(w,x)&&(u[x]=w[x])}}function Je(u){this.src=u,this.g={},this.h=0}Je.prototype.add=function(u,y,x,w,F){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const ie=Zt(u,y,w,F);return ie>-1?(y=u[ie],x||(y.fa=!1)):(y=new se(y,this.src,q,!!w,F),y.fa=x,u.push(y)),y};function zt(u,y){const x=y.type;if(x in u.g){var w=u.g[x],F=Array.prototype.indexOf.call(w,y,void 0),q;(q=F>=0)&&Array.prototype.splice.call(w,F,1),q&&(ge(y),u.g[x].length==0&&(delete u.g[x],u.h--))}}function Zt(u,y,x,w){for(let F=0;F<u.length;++F){const q=u[F];if(!q.da&&q.listener==y&&q.capture==!!x&&q.ha==w)return F}return-1}var Di="closure_lm_"+(Math.random()*1e6|0),or={};function Ni(u,y,x,w,F){if(Array.isArray(y)){for(let q=0;q<y.length;q++)Ni(u,y[q],x,w,F);return null}return x=To(x),u&&u[ct]?u.J(y,x,g(w)?!!w.capture:!1,F):_o(u,y,x,!1,w,F)}function _o(u,y,x,w,F,q){if(!y)throw Error("Invalid event type");const ie=g(F)?!!F.capture:!!F;let be=us(u);if(be||(u[Di]=be=new Je(u)),x=be.add(y,x,w,ie,q),x.proxy)return x;if(w=ta(),x.proxy=w,w.src=u,w.listener=x,u.addEventListener)V||(F=ie),F===void 0&&(F=!1),u.addEventListener(y.toString(),w,F);else if(u.attachEvent)u.attachEvent(Zn(y.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ta(){function u(x){return y.call(u.src,u.listener,x)}const y=xo;return u}function na(u,y,x,w,F){if(Array.isArray(y))for(var q=0;q<y.length;q++)na(u,y[q],x,w,F);else w=g(w)?!!w.capture:!!w,x=To(x),u&&u[ct]?(u=u.i,q=String(y).toString(),q in u.g&&(y=u.g[q],x=Zt(y,x,w,F),x>-1&&(ge(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete u.g[q],u.h--)))):u&&(u=us(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Zt(y,x,w,F)),(x=u>-1?y[u]:null)&&ia(x))}function ia(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[ct])zt(y.i,u);else{var x=u.type,w=u.proxy;y.removeEventListener?y.removeEventListener(x,w,u.capture):y.detachEvent?y.detachEvent(Zn(x),w):y.addListener&&y.removeListener&&y.removeListener(w),(x=us(y))?(zt(x,u),x.h==0&&(x.src=null,y[Di]=null)):ge(u)}}}function Zn(u){return u in or?or[u]:or[u]="on"+u}function xo(u,y){if(u.da)u=!0;else{y=new Fe(y,this);const x=u.listener,w=u.ha||u.src;u.fa&&ia(u),u=x.call(w,y)}return u}function us(u){return u=u[Di],u instanceof Je?u:null}var bo="__closure_events_fn_"+(Math.random()*1e9>>>0);function To(u){return typeof u=="function"?u:(u[bo]||(u[bo]=function(y){return u.handleEvent(y)}),u[bo])}function pt(){N.call(this),this.i=new Je(this),this.M=this,this.G=null}T(pt,N),pt.prototype[ct]=!0,pt.prototype.removeEventListener=function(u,y,x,w){na(this,u,y,x,w)};function It(u,y){var x,w=u.G;if(w)for(x=[];w;w=w.G)x.push(w);if(u=u.M,w=y.type||y,typeof y=="string")y=new P(y,u);else if(y instanceof P)y.target=y.target||u;else{var F=y;y=new P(w,u),Re(y,F)}F=!0;let q,ie;if(x)for(ie=x.length-1;ie>=0;ie--)q=y.g=x[ie],F=lr(q,w,!0,y)&&F;if(q=y.g=u,F=lr(q,w,!0,y)&&F,F=lr(q,w,!1,y)&&F,x)for(ie=0;ie<x.length;ie++)q=y.g=x[ie],F=lr(q,w,!1,y)&&F}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const x=u.g[y];for(let w=0;w<x.length;w++)ge(x[w]);delete u.g[y],u.h--}}this.G=null},pt.prototype.J=function(u,y,x,w){return this.i.add(String(u),y,!1,x,w)},pt.prototype.K=function(u,y,x,w){return this.i.add(String(u),y,!0,x,w)};function lr(u,y,x,w){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let q=0;q<y.length;++q){const ie=y[q];if(ie&&!ie.da&&ie.capture==x){const be=ie.listener,ht=ie.ha||ie.src;ie.fa&&zt(u.i,ie),F=be.call(ht,w)!==!1&&F}}return F&&!w.defaultPrevented}function Qh(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(u,y||0)}function rc(u){u.g=Qh(()=>{u.g=null,u.i&&(u.i=!1,rc(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Jt extends N{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:rc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(u){N.call(this),this.h=u,this.g={}}T(hs,N);var So=[];function Eo(u){Oe(u.g,function(y,x){this.g.hasOwnProperty(x)&&ia(y)},u),u.g={}}hs.prototype.N=function(){hs.Z.N.call(this),Eo(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=h.JSON.stringify,Yh=h.JSON.parse,sc=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ac(){}function oc(){}var Mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vt(){P.call(this,"d")}T(Vt,P);function Tn(){P.call(this,"c")}T(Tn,P);var ut={},lc=null;function ra(){return lc=lc||new pt}ut.Ia="serverreachability";function cc(u){P.call(this,ut.Ia,u)}T(cc,P);function Jn(u){const y=ra();It(y,new cc(y))}ut.STAT_EVENT="statevent";function ds(u,y){P.call(this,ut.STAT_EVENT,u),this.stat=y}T(ds,P);function yt(u){const y=ra();It(y,new ds(y,u))}ut.Ja="timingevent";function ei(u,y){P.call(this,ut.Ja,u),this.size=y}T(ei,P);function ti(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},y)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function Zh(u,y,x,w,F,q){u.info(function(){if(u.g)if(q){var ie="",be=q.split("&");for(let Le=0;Le<be.length;Le++){var ht=be[Le].split("=");if(ht.length>1){const rt=ht[0];ht=ht[1];const wn=rt.split("_");ie=wn.length>=2&&wn[1]=="type"?ie+(rt+"="+ht+"&"):ie+(rt+"=redacted&")}}}else ie=null;else ie=q;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+y+`
`+x+`
`+ie})}function uc(u,y,x,w,F,q,ie){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+y+`
`+x+`
`+q+" "+ie})}function ni(u,y,x,w){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Jh(u,x)+(w?" "+w:"")})}function fs(u,y){u.info(function(){return"TIMEOUT: "+y})}zn.prototype.info=function(){};function Jh(u,y){if(!u.g)return y;if(!y)return null;try{const q=JSON.parse(y);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var x=q[u];if(!(x.length<2)){var w=x[1];if(Array.isArray(w)&&!(w.length<1)){var F=w[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ie=1;ie<w.length;ie++)w[ie]=""}}}}return cr(q)}catch{return y}}var ms={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ao={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wo;function gs(){}T(gs,ac),gs.prototype.g=function(){return new XMLHttpRequest},wo=new gs;function ji(u){return encodeURIComponent(String(u))}function hc(u){var y=1;u=u.split(":");const x=[];for(;y>0&&u.length;)x.push(u.shift()),y--;return u.length&&x.push(u.join(":")),x}function Vn(u,y,x,w){this.j=u,this.i=y,this.l=x,this.S=w||1,this.V=new hs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ln}function Ln(){this.i=null,this.g="",this.h=!1}var vt={},Ot={};function ii(u,y,x){u.M=1,u.A=ps(xt(y)),u.u=x,u.R=!0,sa(u,null)}function sa(u,y){u.F=Date.now(),ri(u),u.B=xt(u.A);var x=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),ca(x.i,"t",w),u.C=0,x=u.j.L,u.h=new Ln,u.g=wc(u.j,x?y:null,!u.u),u.P>0&&(u.O=new Jt(v(u.Y,u,u.g),u.P)),y=u.V,x=u.g,w=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(So[0]=F.toString()),F=So);for(let q=0;q<F.length;q++){const ie=Ni(x,F[q],w||y.handleEvent,!1,y.h||y);if(!ie)break;y.g[ie.key]=ie}y=u.J?gt(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Jn(),Zh(u.i,u.v,u.B,u.l,u.S,u.u)}Vn.prototype.ba=function(u){u=u.target;const y=this.O;y&&Un(u)==3?y.j():this.Y(u)},Vn.prototype.Y=function(u){try{if(u==this.g)e:{const be=Un(this.g),ht=this.g.ya(),Le=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||Lt(this.g)))){this.K||be!=4||ht==7||(ht==8||Le<=0?Jn(3):Jn(2)),si(this);var y=this.g.ca();this.X=y;var x=ed(this);if(this.o=y==200,uc(this.i,this.v,this.B,this.l,this.S,be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,F=this.g;if((w=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(w)){var q=w;break t}}q=null}if(u=q)ni(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ai(this,u);else{this.o=!1,this.m=3,yt(12),dn(this),Sn(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<x.length;)if(rt=fc(this,x),rt==Ot){be==4&&(this.m=4,yt(14),u=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==vt){this.m=4,yt(15),ni(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else ni(this.i,this.l,rt,null),ai(this,rt);if(dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||x.length!=0||this.h.h||(this.m=1,yt(16),u=!1),this.o=this.o&&u,!u)ni(this.i,this.l,x,"[Invalid Chunked Response]"),dn(this),Sn(this);else if(x.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Fo(ie),ie.P=!0,yt(11))}}else ni(this.i,this.l,x,null),ai(this,x);be==4&&dn(this),this.o&&!this.K&&(be==4?Tc(this.j,this):(this.o=!1,ri(this)))}else Pi(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),dn(this),Sn(this)}}}catch{}finally{}};function ed(u){if(!dc(u))return u.g.la();const y=Lt(u.g);if(y==="")return"";let x="";const w=y.length,F=Un(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return dn(u),Sn(u),"";u.h.i=new h.TextDecoder}for(let q=0;q<w;q++)u.h.h=!0,x+=u.h.i.decode(y[q],{stream:!(F&&q==w-1)});return y.length=0,u.h.g+=x,u.C=0,u.h.g}function dc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function fc(u,y){var x=u.C,w=y.indexOf(`
`,x);return w==-1?Ot:(x=Number(y.substring(x,w)),isNaN(x)?vt:(w+=1,w+x>y.length?Ot:(y=y.slice(w,w+x),u.C=w+x,y)))}Vn.prototype.cancel=function(){this.K=!0,dn(this)};function ri(u){u.T=Date.now()+u.H,aa(u,u.H)}function aa(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ti(v(u.aa,u),y)}function si(u){u.D&&(h.clearTimeout(u.D),u.D=null)}Vn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(fs(this.i,this.B),this.M!=2&&(Jn(),yt(17)),dn(this),this.m=2,Sn(this)):aa(this,this.T-u)};function Sn(u){u.j.I==0||u.K||Tc(u.j,u)}function dn(u){si(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Eo(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function ai(u,y){try{var x=u.j;if(x.I!=0&&(x.g==u||li(x.h,u))){if(!u.L&&li(x.h,u)&&x.I==3){try{var w=x.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)ma(x),yr(x);else break e;Ss(x),yt(18)}}else x.xa=F[1],0<x.xa-x.K&&F[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=ti(v(x.Va,x),6e3));oi(x.h)<=1&&x.ta&&(x.ta=void 0)}else mi(x,11)}else if((u.L||x.g==u)&&ma(x),!j(y))for(F=x.Ba.g.parse(y),y=0;y<F.length;y++){let Le=F[y];const rt=Le[0];if(!(rt<=x.K))if(x.K=rt,Le=Le[1],x.I==2)if(Le[0]=="c"){x.M=Le[1],x.ba=Le[2];const wn=Le[3];wn!=null&&(x.ka=wn,x.j.info("VER="+x.ka));const gi=Le[4];gi!=null&&(x.za=gi,x.j.info("SVER="+x.za));const Gn=Le[5];Gn!=null&&typeof Gn=="number"&&Gn>0&&(w=1.5*Gn,x.O=w,x.j.info("backChannelRequestTimeoutMs_="+w)),w=x;const Hn=u.g;if(Hn){const Es=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var q=w.h;q.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Io(q,q.h),q.h=null))}if(w.G){const ga=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;ga&&(w.wa=ga,He(w.J,w.G,ga))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),w=x;var ie=u;if(w.na=Ac(w,w.L?w.ba:null,w.W),ie.L){Do(w.h,ie);var be=ie,ht=w.O;ht&&(be.H=ht),be.D&&(si(be),ri(be)),w.g=ie}else xc(w);x.i.length>0&&fi(x)}else Le[0]!="stop"&&Le[0]!="close"||mi(x,7);else x.I==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?mi(x,7):Lo(x):Le[0]!="noop"&&x.l&&x.l.qa(Le),x.A=0)}}Jn(4)}catch{}}var _t=class{constructor(u,y){this.g=u,this.map=y}};function Ro(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Co(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function oi(u){return u.h?1:u.g?u.g.size:0}function li(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Io(u,y){u.g?u.g.add(y):u.h=y}function Do(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Ro.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function No(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const x of u.g.values())y=y.concat(x.G);return y}return A(u.i)}var mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oa(u,y){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const w=u[x].indexOf("=");let F,q=null;w>=0?(F=u[x].substring(0,w),q=u[x].substring(w+1)):F=u[x],y(F,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function fn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof fn?(this.l=u.l,Pt(this,u.j),this.o=u.o,this.g=u.g,ur(this,u.u),this.h=u.h,jo(this,vc(u.i)),this.m=u.m):u&&(y=String(u).match(mc))?(this.l=!1,Pt(this,y[1]||"",!0),this.o=ci(y[2]||""),this.g=ci(y[3]||"",!0),ur(this,y[4]),this.h=ci(y[5]||"",!0),jo(this,y[6]||"",!0),this.m=ci(y[7]||"")):(this.l=!1,this.i=new dr(null,this.l))}fn.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(ys(y,la,!0),":");var x=this.g;return(x||y=="file")&&(u.push("//"),(y=this.o)&&u.push(ys(y,la,!0),"@"),u.push(ji(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(ys(x,x.charAt(0)=="/"?Oo:gc,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",ys(x,pc)),u.join("")},fn.prototype.resolve=function(u){const y=xt(this);let x=!!u.j;x?Pt(y,u.j):x=!!u.o,x?y.o=u.o:x=!!u.g,x?y.g=u.g:x=u.u!=null;var w=u.h;if(x)ur(y,u.u);else if(x=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var F=y.h.lastIndexOf("/");F!=-1&&(w=y.h.slice(0,F+1)+w)}if(F=w,F==".."||F==".")w="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){w=F.lastIndexOf("/",0)==0,F=F.split("/");const q=[];for(let ie=0;ie<F.length;){const be=F[ie++];be=="."?w&&ie==F.length&&q.push(""):be==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),w&&ie==F.length&&q.push("")):(q.push(be),w=!0)}w=q.join("/")}else w=F}return x?y.h=w:x=u.i.toString()!=="",x?jo(y,vc(u.i)):x=!!u.m,x&&(y.m=u.m),y};function xt(u){return new fn(u)}function Pt(u,y,x){u.j=x?ci(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function ur(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function jo(u,y,x){y instanceof dr?(u.i=y,ua(u.i,u.l)):(x||(y=ys(y,hr)),u.i=new dr(y,u.l))}function He(u,y,x){u.i.set(y,x)}function ps(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ci(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ys(u,y,x){return typeof u=="string"?(u=encodeURI(u).replace(y,nn),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var la=/[#\/\?@]/g,gc=/[#\?:]/g,Oo=/[#\?]/g,hr=/[#\?@]/g,pc=/#/g;function dr(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function rn(u){u.g||(u.g=new Map,u.h=0,u.i&&oa(u.i,function(y,x){u.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}s=dr.prototype,s.add=function(u,y){rn(this),this.i=null,u=fr(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(y),this.h+=1,this};function yc(u,y){rn(u),y=fr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Po(u,y){return rn(u),y=fr(u,y),u.g.has(y)}s.forEach=function(u,y){rn(this),this.g.forEach(function(x,w){x.forEach(function(F){u.call(y,F,w,this)},this)},this)};function ko(u,y){rn(u);let x=[];if(typeof y=="string")Po(u,y)&&(x=x.concat(u.g.get(fr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)x=x.concat(u[y]);return x}s.set=function(u,y){return rn(this),this.i=null,u=fr(this,u),Po(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},s.get=function(u,y){return u?(u=ko(this,u),u.length>0?String(u[0]):y):y};function ca(u,y,x){yc(u,y),x.length>0&&(u.i=null,u.g.set(fr(u,y),A(x)),u.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var x=y[w];const F=ji(x);x=ko(this,x);for(let q=0;q<x.length;q++){let ie=F;x[q]!==""&&(ie+="="+ji(x[q])),u.push(ie)}}return this.i=u.join("&")};function vc(u){const y=new dr;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function fr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function ua(u,y){y&&!u.j&&(rn(u),u.i=null,u.g.forEach(function(x,w){const F=w.toLowerCase();w!=F&&(yc(this,w),ca(this,F,x))},u)),u.j=y}function Bn(u,y){const x=new zn;if(h.Image){const w=new Image;w.onload=b(En,x,"TestLoadImage: loaded",!0,y,w),w.onerror=b(En,x,"TestLoadImage: error",!1,y,w),w.onabort=b(En,x,"TestLoadImage: abort",!1,y,w),w.ontimeout=b(En,x,"TestLoadImage: timeout",!1,y,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else y(!1)}function Mo(u,y){const x=new zn,w=new AbortController,F=setTimeout(()=>{w.abort(),En(x,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:w.signal}).then(q=>{clearTimeout(F),q.ok?En(x,"TestPingServer: ok",!0,y):En(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),En(x,"TestPingServer: error",!1,y)})}function En(u,y,x,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(x)}catch{}}function mr(){this.g=new sc}function ui(u){this.i=u.Sb||null,this.h=u.ab||!1}T(ui,ac),ui.prototype.g=function(){return new vs(this.i,this.h)};function vs(u,y){pt.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(vs,pt),s=vs.prototype,s.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,Fn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ha(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ha(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?gr(this):Fn(this),this.readyState==3&&ha(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,gr(this))},s.Na=function(u){this.g&&(this.response=u,gr(this))},s.ga=function(){this.g&&gr(this)};function gr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Fn(u)}s.setRequestHeader=function(u,y){this.A.append(u,y)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=y.next();return u.join(`\r
`)};function Fn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function An(u){let y="";return Oe(u,function(x,w){y+=w,y+=":",y+=x,y+=`\r
`}),y}function _s(u,y,x){e:{for(w in x){var w=!1;break e}w=!0}w||(x=An(x),typeof u=="string"?x!=null&&ji(x):He(u,y,x))}function We(u){pt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(We,pt);var hi=/^https?$/i,zo=["POST","PUT"];s=We.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,y,x,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wo.g(),this.g.onreadystatechange=S(v(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(q){xs(this,q);return}if(u=x||"",x=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)x.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const q of w.keys())x.set(q,w.get(q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(x.keys()).find(q=>q.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(zo,y,void 0)>=0)||w||F||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of x)this.g.setRequestHeader(q,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){xs(this,q)}};function xs(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,Vo(u),Oi(u)}function Vo(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,It(this,"complete"),It(this,"abort"),Oi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),We.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?bs(this):this.Xa())},s.Xa=function(){bs(this)};function bs(u){if(u.h&&typeof c<"u"){if(u.v&&Un(u)==4)setTimeout(u.Ca.bind(u),0);else if(It(u,"readystatechange"),Un(u)==4){u.h=!1;try{const q=u.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var w;if(w=q===0){let ie=String(u.D).match(mc)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),w=!hi.test(ie?ie.toLowerCase():"")}x=w}if(x)It(u,"complete"),It(u,"success");else{u.o=6;try{var F=Un(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",Vo(u)}}finally{Oi(u)}}}}function Oi(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,y||It(u,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Un(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Un(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Yh(y)}};function Lt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Pi(u){const y={};u=(u.g&&Un(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(j(u[w]))continue;var x=hc(u[w]);const F=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const q=y[F]||[];y[F]=q,q.push(x)}Me(y,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(u,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||y}function pr(u){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=di("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=di("baseRetryDelayMs",5e3,u),this.Za=di("retryDelaySeedMs",1e4,u),this.Ta=di("forwardChannelMaxRetries",2,u),this.va=di("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ro(u&&u.concurrentRequestLimit),this.Ba=new mr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=pr.prototype,s.ka=8,s.I=1,s.connect=function(u,y,x,w){yt(0),this.W=u,this.H=y||{},x&&w!==void 0&&(this.H.OSID=x,this.H.OAID=w),this.F=this.X,this.J=Ac(this,null,this.W),fi(this)};function Lo(u){if(da(u),u.I==3){var y=u.V++,x=xt(u.J);if(He(x,"SID",u.M),He(x,"RID",y),He(x,"TYPE","terminate"),Ts(u,x),y=new Vn(u,u.j,y),y.M=2,y.A=ps(xt(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&h.Image&&(new Image().src=y.A,x=!0),x||(y.g=wc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ri(y)}Ec(u)}function yr(u){u.g&&(Fo(u),u.g.cancel(),u.g=null)}function da(u){yr(u),u.v&&(h.clearTimeout(u.v),u.v=null),ma(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function fi(u){if(!Co(u.h)&&!u.m){u.m=!0;var y=u.Ea;re||C(),ue||(re(),ue=!0),I.add(y,u),u.D=0}}function fa(u,y){return oi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ti(v(u.Ea,u,y),Sc(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Vn(this,this.j,u);let q=this.o;if(this.U&&(q?(q=gt(q),Re(q,this.U)):q=this.U),this.u!==null||this.R||(F.J=q,q=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var w=this.i[x];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=_c(this,F,y),x=xt(this.J),He(x,"RID",u),He(x,"CVER",22),this.G&&He(x,"X-HTTP-Session-Id",this.G),Ts(this,x),q&&(this.R?y="headers="+ji(An(q))+"&"+y:this.u&&_s(x,this.u,q)),Io(this.h,F),this.Ra&&He(x,"TYPE","init"),this.S?(He(x,"$req",y),He(x,"SID","null"),F.U=!0,ii(F,x,null)):ii(F,x,y),this.I=2}}else this.I==3&&(u?Bo(this,u):this.i.length==0||Co(this.h)||Bo(this))};function Bo(u,y){var x;y?x=y.l:x=u.V++;const w=xt(u.J);He(w,"SID",u.M),He(w,"RID",x),He(w,"AID",u.K),Ts(u,w),u.u&&u.o&&_s(w,u.u,u.o),x=new Vn(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),y&&(u.i=y.G.concat(u.i)),y=_c(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Io(u.h,x),ii(x,w,y)}function Ts(u,y){u.H&&Oe(u.H,function(x,w){He(y,w,x)}),u.l&&Oe({},function(x,w){He(y,w,x)})}function _c(u,y,x){x=Math.min(u.i.length,x);const w=u.l?v(u.l.Ka,u.l,u):null;e:{var F=u.i;let be=-1;for(;;){const ht=["count="+x];be==-1?x>0?(be=F[0].g,ht.push("ofs="+be)):be=0:ht.push("ofs="+be);let Le=!0;for(let rt=0;rt<x;rt++){var q=F[rt].g;const wn=F[rt].map;if(q-=be,q<0)be=Math.max(0,F[rt].g-100),Le=!1;else try{q="req"+q+"_"||"";try{var ie=wn instanceof Map?wn:Object.entries(wn);for(const[gi,Gn]of ie){let Hn=Gn;g(Gn)&&(Hn=cr(Gn)),ht.push(q+gi+"="+encodeURIComponent(Hn))}}catch(gi){throw ht.push(q+"type="+encodeURIComponent("_badmap")),gi}}catch{w&&w(wn)}}if(Le){ie=ht.join("&");break e}}ie=void 0}return u=u.i.splice(0,x),y.G=u,ie}function xc(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;re||C(),ue||(re(),ue=!0),I.add(y,u),u.A=0}}function Ss(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ti(v(u.Da,u),Sc(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ti(v(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),yr(this),bc(this))};function Fo(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function bc(u){u.g=new Vn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=xt(u.na);He(y,"RID","rpc"),He(y,"SID",u.M),He(y,"AID",u.K),He(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(y,"TO",u.ia),He(y,"TYPE","xmlhttp"),Ts(u,y),u.u&&u.o&&_s(y,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=ps(xt(y)),x.u=null,x.R=!0,sa(x,u)}s.Va=function(){this.C!=null&&(this.C=null,yr(this),Ss(this),yt(19))};function ma(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Tc(u,y){var x=null;if(u.g==y){ma(u),Fo(u),u.g=null;var w=2}else if(li(u.h,y))x=y.G,Do(u.h,y),w=1;else return;if(u.I!=0){if(y.o)if(w==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var F=u.D;w=ra(),It(w,new ei(w,x)),fi(u)}else xc(u);else if(F=y.m,F==3||F==0&&y.X>0||!(w==1&&fa(u,y)||w==2&&Ss(u)))switch(x&&x.length>0&&(y=u.h,y.i=y.i.concat(x)),F){case 1:mi(u,5);break;case 4:mi(u,10);break;case 3:mi(u,6);break;default:mi(u,2)}}}function Sc(u,y){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*y}function mi(u,y){if(u.j.info("Error code "+y),y==2){var x=v(u.bb,u),w=u.Ua;const F=!w;w=new fn(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Pt(w,"https"),ps(w),F?Bn(w.toString(),x):Mo(w.toString(),x)}else yt(2);u.I=0,u.l&&u.l.pa(y),Ec(u),da(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Ec(u){if(u.I=0,u.ja=[],u.l){const y=No(u.h);(y.length!=0||u.i.length!=0)&&(z(u.ja,y),z(u.ja,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.oa()}}function Ac(u,y,x){var w=x instanceof fn?xt(x):new fn(x);if(w.g!="")y&&(w.g=y+"."+w.g),ur(w,w.u);else{var F=h.location;w=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const q=new fn(null);w&&Pt(q,w),y&&(q.g=y),F&&ur(q,F),x&&(q.h=x),w=q}return x=u.G,y=u.wa,x&&y&&He(w,x,y),He(w,"VER",u.ka),Ts(u,w),w}function wc(u,y,x){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new We(new ui({ab:x})):new We(u.ma),y.Fa(u.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rc(){}s=Rc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function vr(){}vr.prototype.g=function(u,y){return new en(u,y)};function en(u,y){pt.call(this),this.g=new pr(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!j(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!j(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new ki(this)}T(en,pt),en.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Lo(this.g)},en.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=cr(u),u=x);y.i.push(new _t(y.Ya++,u)),y.I==3&&fi(y)},en.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,en.Z.N.call(this)};function Cc(u){Vt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const x in y){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}T(Cc,Vt);function Ic(){Tn.call(this),this.status=1}T(Ic,Tn);function ki(u){this.g=u}T(ki,Rc),ki.prototype.ra=function(){It(this.g,"a")},ki.prototype.qa=function(u){It(this.g,new Cc(u))},ki.prototype.pa=function(u){It(this.g,new Ic)},ki.prototype.oa=function(){It(this.g,"b")},vr.prototype.createWebChannel=vr.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,p_=function(){return new vr},g_=function(){return ra()},m_=ut,bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,qu=ms,Ao.COMPLETE="complete",f_=Ao,oc.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",pt.prototype.listen=pt.prototype.J,Cl=oc,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,d_=We}).apply(typeof Mu<"u"?Mu:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",Dv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Wm("@firebase/firestore");function $a(){return Ws.logLevel}function oe(s,...e){if(Ws.logLevel<=De.DEBUG){const n=e.map(Qm);Ws.debug(`Firestore (${fo}): ${s}`,...n)}}function nr(s,...e){if(Ws.logLevel<=De.ERROR){const n=e.map(Qm);Ws.error(`Firestore (${fo}): ${s}`,...n)}}function ro(s,...e){if(Ws.logLevel<=De.WARN){const n=e.map(Qm);Ws.warn(`Firestore (${fo}): ${s}`,...n)}}function Qm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,y_(s,r,n)}function y_(s,e,n){let r=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw nr(r),new Error(r)}function Ue(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||y_(e,o,r)}function xe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _w{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class xw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class bw{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let c=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Jr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Jr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new v_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class Tw{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sw{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Tw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ew{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const r=c=>{c.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Nv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Aw(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ne(s,e){return s<e?-1:s>e?1:0}function Tm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),c=e.charAt(r);if(o!==c)return om(o)===om(c)?Ne(o,c):om(o)?1:-1}return Ne(s.length,e.length)}const ww=55296,Rw=57343;function om(s){const e=s.charCodeAt(0);return e>=ww&&e<=Rw}function so(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="__name__";class xi{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ye(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=xi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ne(e.length,n.length)}static compareSegments(e,n){const r=xi.isNumericId(e),o=xi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?xi.extractNumericId(e).compare(xi.extractNumericId(n)):Tm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zr.fromString(e.substring(4,e.length-2))}}class Ze extends xi{construct(e,n,r){return new Ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new Ze(n)}static emptyPath(){return new Ze([])}}const Cw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends xi{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return Cw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jv}static keyField(){return new $t([jv])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ae(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(r+=g,o++):(c(),o++)}if(c(),h)throw new ae(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Ze.fromString(e))}static fromName(e){return new me(Ze.fromString(e).popFirst(5))}static empty(){return new me(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(s,e,n){if(!n)throw new ae(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Iw(s,e,n,r){if(e===!0&&r===!0)throw new ae(Z.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Ov(s){if(!me.isDocumentKey(s))throw new ae(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Pv(s){if(me.isDocumentKey(s))throw new ae(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function x_(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Dh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ye(12329,{type:typeof s})}function Ks(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ae(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dh(s);throw new ae(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Xl(s,e){if(!x_(s))throw new ae(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const h=s[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new ae(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=-62135596800,Mv=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Mv);return new nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kv)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mv}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xl(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:Rt("string",nt._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new nt(0,0))}static max(){return new _e(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function Dw(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=_e.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new ns(o,me.empty(),e)}function Nw(s){return new ns(s.readTime,s.key,Vl)}class ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ns(_e.min(),me.empty(),Vl)}static max(){return new ns(_e.max(),me.empty(),Vl)}}function jw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(s.documentKey,e.documentKey),n!==0?n:Ne(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==Ow)throw s;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):J.reject(n)}static resolve(e){return new J(((n,r)=>{n(e)}))}static reject(e){return new J(((n,r)=>{r(e)}))}static waitFor(e){return new J(((n,r)=>{let o=0,c=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++c,h&&c===o&&n()}),(p=>r(p)))})),h=!0,c===o&&n()}))}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next((o=>o?J.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new J(((r,o)=>{const c=e.length,h=new Array(c);let g=0;for(let p=0;p<c;p++){const v=p;n(e[v]).next((b=>{h[v]=b,++g,g===c&&r(h)}),(b=>o(b)))}}))}static doWhile(e,n){return new J(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function kw(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function go(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=-1;function jh(s){return s==null}function hh(s){return s===0&&1/s==-1/0}function Mw(s){return typeof s=="number"&&Number.isInteger(s)&&!hh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="";function zw(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=zv(e)),e=Vw(s.get(n),e);return zv(e)}function Vw(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case b_:n+="";break;default:n+=c}}return n}function zv(s){return s+b_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ls(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function T_(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=o??Ht.EMPTY,this.right=c??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Ht(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lv(this.data.getIterator())}getIteratorFrom(e){return new Lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class Lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new bn([])}unionWith(e){let n=new jt($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new S_("Invalid base64 string: "+c):c}})(e);return new Wt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const Lw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(s){if(Ue(!!s,39018),typeof s=="string"){let e=0;const n=Lw.exec(s);if(Ue(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(s.seconds),nanos:mt(s.nanos)}}function mt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function rs(s){return typeof s=="string"?Wt.fromBase64String(s):Wt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="server_timestamp",A_="__type__",w_="__previous_value__",R_="__local_write_time__";function Jm(s){return(s?.mapValue?.fields||{})[A_]?.stringValue===E_}function Oh(s){const e=s.mapValue.fields[w_];return Jm(e)?Oh(e):e}function Ll(s){const e=is(s.mapValue.fields[R_].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r,o,c,h,g,p,v,b){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=b}}const dh="(default)";class Bl{constructor(e,n){this.projectId=e,this.database=n||dh}static empty(){return new Bl("","")}get isDefaultDatabase(){return this.database===dh}isEqual(e){return e instanceof Bl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="__type__",Fw="__max__",Vu={mapValue:{}},I_="__vector__",fh="value";function ss(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Jm(s)?4:Gw(s)?9007199254740991:Uw(s)?10:11:ye(28295,{value:s})}function Ii(s,e){if(s===e)return!0;const n=ss(s);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ll(s).isEqual(Ll(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=is(o.timestampValue),g=is(c.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return rs(o.bytesValue).isEqual(rs(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return mt(o.geoPointValue.latitude)===mt(c.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return mt(o.integerValue)===mt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=mt(o.doubleValue),g=mt(c.doubleValue);return h===g?hh(h)===hh(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return so(s.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},g=c.mapValue.fields||{};if(Vv(h)!==Vv(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!Ii(h[p],g[p])))return!1;return!0})(s,e);default:return ye(52216,{left:s})}}function Fl(s,e){return(s.values||[]).find((n=>Ii(n,e)))!==void 0}function ao(s,e){if(s===e)return 0;const n=ss(s),r=ss(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(s.booleanValue,e.booleanValue);case 2:return(function(c,h){const g=mt(c.integerValue||c.doubleValue),p=mt(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,e);case 3:return Bv(s.timestampValue,e.timestampValue);case 4:return Bv(Ll(s),Ll(e));case 5:return Tm(s.stringValue,e.stringValue);case 6:return(function(c,h){const g=rs(c),p=rs(h);return g.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(c,h){const g=c.split("/"),p=h.split("/");for(let v=0;v<g.length&&v<p.length;v++){const b=Ne(g[v],p[v]);if(b!==0)return b}return Ne(g.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,h){const g=Ne(mt(c.latitude),mt(h.latitude));return g!==0?g:Ne(mt(c.longitude),mt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Fv(s.arrayValue,e.arrayValue);case 10:return(function(c,h){const g=c.fields||{},p=h.fields||{},v=g[fh]?.arrayValue,b=p[fh]?.arrayValue,T=Ne(v?.values?.length||0,b?.values?.length||0);return T!==0?T:Fv(v,b)})(s.mapValue,e.mapValue);case 11:return(function(c,h){if(c===Vu.mapValue&&h===Vu.mapValue)return 0;if(c===Vu.mapValue)return 1;if(h===Vu.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),v=h.fields||{},b=Object.keys(v);p.sort(),b.sort();for(let T=0;T<p.length&&T<b.length;++T){const S=Tm(p[T],b[T]);if(S!==0)return S;const A=ao(g[p[T]],v[b[T]]);if(A!==0)return A}return Ne(p.length,b.length)})(s.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function Bv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ne(s,e);const n=is(s),r=is(e),o=Ne(n.seconds,r.seconds);return o!==0?o:Ne(n.nanos,r.nanos)}function Fv(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=ao(n[o],r[o]);if(c)return c}return Ne(n.length,r.length)}function oo(s){return Sm(s)}function Sm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return rs(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return me.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Sm(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${Sm(n.fields[h])}`;return o+"}"})(s.mapValue):ye(61005,{value:s})}function Wu(s){switch(ss(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Oh(s);return e?16+Wu(e):16;case 5:return 2*s.stringValue.length;case 6:return rs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Wu(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return ls(r.fields,((c,h)=>{o+=c.length+Wu(h)})),o})(s.mapValue);default:throw ye(13486,{value:s})}}function Uv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Em(s){return!!s&&"integerValue"in s}function eg(s){return!!s&&"arrayValue"in s}function Gv(s){return!!s&&"nullValue"in s}function Hv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ku(s){return!!s&&"mapValue"in s}function Uw(s){return(s?.mapValue?.fields||{})[C_]?.stringValue===I_}function jl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ls(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=jl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jl(s.arrayValue.values[n]);return e}return{...s}}function Gw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Fw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(n)}setAll(e){let n=$t.emptyPath(),r={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,r,o),r={},o=[],n=g.popLast()}h?r[g.lastSegment()]=jl(h):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Ku(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){ls(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new hn(jl(this.value))}}function D_(s){const e=[];return ls(s.fields,((n,r)=>{const o=new $t([n]);if(Ku(r)){const c=D_(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,o,c,h,g){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Qt(e,0,_e.min(),_e.min(),_e.min(),hn.empty(),0)}static newFoundDocument(e,n,r,o){return new Qt(e,1,n,_e.min(),r,o,0)}static newNoDocument(e,n){return new Qt(e,2,n,_e.min(),_e.min(),hn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,_e.min(),_e.min(),hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.position=e,this.inclusive=n}}function $v(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?r=me.comparator(me.fromName(h.referenceValue),n.key):r=ao(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function qv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ii(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function Hw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{}class wt extends N_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qw(e,n,r):n==="array-contains"?new Xw(e,r):n==="in"?new Qw(e,r):n==="not-in"?new Yw(e,r):n==="array-contains-any"?new Zw(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ww(e,r):new Kw(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ao(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends N_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yn(e,n)}matches(e){return j_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function j_(s){return s.op==="and"}function O_(s){return $w(s)&&j_(s)}function $w(s){for(const e of s.filters)if(e instanceof Yn)return!1;return!0}function Am(s){if(s instanceof wt)return s.field.canonicalString()+s.op.toString()+oo(s.value);if(O_(s))return s.filters.map((e=>Am(e))).join(",");{const e=s.filters.map((n=>Am(n))).join(",");return`${s.op}(${e})`}}function P_(s,e){return s instanceof wt?(function(r,o){return o instanceof wt&&r.op===o.op&&r.field.isEqual(o.field)&&Ii(r.value,o.value)})(s,e):s instanceof Yn?(function(r,o){return o instanceof Yn&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,h,g)=>c&&P_(h,o.filters[g])),!0):!1})(s,e):void ye(19439)}function k_(s){return s instanceof wt?(function(n){return`${n.field.canonicalString()} ${n.op} ${oo(n.value)}`})(s):s instanceof Yn?(function(n){return n.op.toString()+" {"+n.getFilters().map(k_).join(" ,")+"}"})(s):"Filter"}class qw extends wt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ww extends wt{constructor(e,n){super(e,"in",n),this.keys=M_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Kw extends wt{constructor(e,n){super(e,"not-in",n),this.keys=M_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function M_(s,e){return(e.arrayValue?.values||[]).map((n=>me.fromName(n.referenceValue)))}class Xw extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Fl(n.arrayValue,this.value)}}class Qw extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fl(this.value.arrayValue,n)}}class Yw extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fl(this.value.arrayValue,n)}}class Zw extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Fl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n=null,r=[],o=[],c=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=g,this.Te=null}}function Wv(s,e=null,n=[],r=[],o=null,c=null,h=null){return new Jw(s,e,n,r,o,c,h)}function tg(s){const e=xe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Am(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>oo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>oo(r))).join(",")),e.Te=n}return e.Te}function ng(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Hw(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!P_(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!qv(s.startAt,e.startAt)&&qv(s.endAt,e.endAt)}function wm(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n=null,r=[],o=[],c=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function e2(s,e,n,r,o,c,h,g){return new po(s,e,n,r,o,c,h,g)}function z_(s){return new po(s)}function Kv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function V_(s){return s.collectionGroup!==null}function Ol(s){const e=xe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new jt($t.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((v=>{v.isInequality()&&(g=g.add(v.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Ul(c,r))})),n.has($t.keyField().canonicalString())||e.Ie.push(new Ul($t.keyField(),r))}return e.Ie}function Ti(s){const e=xe(s);return e.Ee||(e.Ee=t2(e,Ol(s))),e.Ee}function t2(s,e){if(s.limitType==="F")return Wv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Ul(o.field,c)}));const n=s.endAt?new mh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new mh(s.startAt.position,s.startAt.inclusive):null;return Wv(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Rm(s,e){const n=s.filters.concat([e]);return new po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Cm(s,e,n){return new po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Ph(s,e){return ng(Ti(s),Ti(e))&&s.limitType===e.limitType}function L_(s){return`${tg(Ti(s))}|lt:${s.limitType}`}function qa(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>k_(o))).join(", ")}]`),jh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>oo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>oo(o))).join(",")),`Target(${r})`})(Ti(s))}; limitType=${s.limitType})`}function kh(s,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,o){for(const c of Ol(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(h,g,p){const v=$v(h,g,p);return h.inclusive?v<=0:v<0})(r.startAt,Ol(r),o)||r.endAt&&!(function(h,g,p){const v=$v(h,g,p);return h.inclusive?v>=0:v>0})(r.endAt,Ol(r),o))})(s,e)}function n2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function B_(s){return(e,n)=>{let r=!1;for(const o of Ol(s)){const c=i2(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function i2(s,e,n){const r=s.field.isKeyField()?me.comparator(e.key,n.key):(function(c,h,g){const p=h.data.field(c),v=g.data.field(c);return p!==null&&v!==null?ao(p,v):ye(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return T_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new at(me.comparator);function ir(){return r2}const F_=new at(me.comparator);function Il(...s){let e=F_;for(const n of s)e=e.insert(n.key,n);return e}function U_(s){let e=F_;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Gs(){return Pl()}function G_(){return Pl()}function Pl(){return new Zs((s=>s.toString()),((s,e)=>s.isEqual(e)))}const s2=new at(me.comparator),a2=new jt(me.comparator);function je(...s){let e=a2;for(const n of s)e=e.add(n);return e}const o2=new jt(Ne);function l2(){return o2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function H_(s){return{integerValue:""+s}}function c2(s,e){return Mw(e)?H_(e):ig(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function u2(s,e,n){return s instanceof gh?(function(o,c){const h={fields:{[A_]:{stringValue:E_},[R_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Jm(c)&&(c=Oh(c)),c&&(h.fields[w_]=c),{mapValue:h}})(n,e):s instanceof Gl?q_(s,e):s instanceof Hl?W_(s,e):(function(o,c){const h=$_(o,c),g=Xv(h)+Xv(o.Ae);return Em(h)&&Em(o.Ae)?H_(g):ig(o.serializer,g)})(s,e)}function h2(s,e,n){return s instanceof Gl?q_(s,e):s instanceof Hl?W_(s,e):n}function $_(s,e){return s instanceof ph?(function(r){return Em(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class gh extends Mh{}class Gl extends Mh{constructor(e){super(),this.elements=e}}function q_(s,e){const n=K_(e);for(const r of s.elements)n.some((o=>Ii(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Hl extends Mh{constructor(e){super(),this.elements=e}}function W_(s,e){let n=K_(e);for(const r of s.elements)n=n.filter((o=>!Ii(o,r)));return{arrayValue:{values:n}}}class ph extends Mh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xv(s){return mt(s.integerValue||s.doubleValue)}function K_(s){return eg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function d2(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Gl&&o instanceof Gl||r instanceof Hl&&o instanceof Hl?so(r.elements,o.elements,Ii):r instanceof ph&&o instanceof ph?Ii(r.Ae,o.Ae):r instanceof gh&&o instanceof gh})(s.transform,e.transform)}class f2{constructor(e,n){this.version=e,this.transformResults=n}}class Si{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class zh{}function X_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Y_(s.key,Si.none()):new Ql(s.key,s.data,Si.none());{const n=s.data,r=hn.empty();let o=new jt($t.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new cs(s.key,r,new bn(o.toArray()),Si.none())}}function m2(s,e,n){s instanceof Ql?(function(o,c,h){const g=o.value.clone(),p=Yv(o.fieldTransforms,c,h.transformResults);g.setAll(p),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof cs?(function(o,c,h){if(!Xu(o.precondition,c))return void c.convertToUnknownDocument(h.version);const g=Yv(o.fieldTransforms,c,h.transformResults),p=c.data;p.setAll(Q_(o)),p.setAll(g),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function kl(s,e,n,r){return s instanceof Ql?(function(c,h,g,p){if(!Xu(c.precondition,h))return g;const v=c.value.clone(),b=Zv(c.fieldTransforms,p,h);return v.setAll(b),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(s,e,n,r):s instanceof cs?(function(c,h,g,p){if(!Xu(c.precondition,h))return g;const v=Zv(c.fieldTransforms,p,h),b=h.data;return b.setAll(Q_(c)),b.setAll(v),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((T=>T.field)))})(s,e,n,r):(function(c,h,g){return Xu(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function g2(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),c=$_(r.transform,o||null);c!=null&&(n===null&&(n=hn.empty()),n.set(r.field,c))}return n||null}function Qv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&so(r,o,((c,h)=>d2(c,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ql extends zh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class cs extends zh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Q_(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function Yv(s,e,n){const r=new Map;Ue(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],h=c.transform,g=e.data.field(c.field);r.set(c.field,h2(h,g,n[o]))}return r}function Zv(s,e,n){const r=new Map;for(const o of s){const c=o.transform,h=n.data.field(o.field);r.set(o.field,u2(c,h,e))}return r}class Y_ extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p2 extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&m2(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=kl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=kl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=G_();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let g=this.applyToLocalView(h,c.mutatedFields);g=n.has(o.key)?null:g;const p=X_(h,g);p!==null&&r.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(_e.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),je())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,((n,r)=>Qv(n,r)))&&so(this.baseMutations,e.baseMutations,((n,r)=>Qv(n,r)))}}class rg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return s2})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new rg(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,ke;function x2(s){switch(s){case Z.OK:return ye(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return ye(15467,{code:s})}}function Z_(s){if(s===void 0)return nr("GRPC error has no .code"),Z.UNKNOWN;switch(s){case At.OK:return Z.OK;case At.CANCELLED:return Z.CANCELLED;case At.UNKNOWN:return Z.UNKNOWN;case At.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case At.INTERNAL:return Z.INTERNAL;case At.UNAVAILABLE:return Z.UNAVAILABLE;case At.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case At.NOT_FOUND:return Z.NOT_FOUND;case At.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case At.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case At.ABORTED:return Z.ABORTED;case At.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case At.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case At.DATA_LOSS:return Z.DATA_LOSS;default:return ye(39323,{code:s})}}(ke=At||(At={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new Zr([4294967295,4294967295],0);function Jv(s){const e=b2().encode(s),n=new h_;return n.update(e),new Uint8Array(n.digest())}function e1(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([o,c],0)]}class sg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dl(`Invalid padding: ${n}`);if(r<0)throw new Dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Zr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Zr.fromNumber(r)));return o.compare(T2)===1&&(o=new Zr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Jv(e),[r,o]=e1(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);if(!this.we(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new sg(c,o,n);return r.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=Jv(e),[r,o]=e1(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vh(_e.min(),o,new at(Ne),ir(),je())}}class Yl{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yl(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class J_{constructor(e,n){this.targetId=e,this.Ce=n}}class ex{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class t1{constructor(){this.ve=0,this.Fe=n1(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),r=je();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:ye(38017,{changeType:c})}})),new Yl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=n1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class S2{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=Lu(),this.He=Lu(),this.Ye=new at(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(wm(c))if(r===0){const h=new me(c.path);this.et(n,h,Qt.newNoDocument(h,_e.min()))}else Ue(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(n);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,g;try{h=rs(r).toUint8Array()}catch(p){if(p instanceof S_)return ro("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new sg(h,o,c)}catch(p){return ro(p instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const g=this.ot(h);if(g){if(c.current&&wm(g.target)){const p=new me(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Qt.newNoDocument(p,e))}c.Be&&(n.set(h,c.ke()),c.qe())}}));let r=je();this.He.forEach(((c,h)=>{let g=!0;h.forEachWhile((p=>{const v=this.ot(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new Vh(e,n,this.Ye,this.je,r);return this.je=ir(),this.Je=Lu(),this.He=Lu(),this.Ye=new at(Ne),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new t1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new jt(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new jt(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new t1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lu(){return new at(me.comparator)}function n1(){return new at(me.comparator)}const E2={asc:"ASCENDING",desc:"DESCENDING"},A2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w2={and:"AND",or:"OR"};class R2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Im(s,e){return s.useProto3Json||jh(e)?e:{value:e}}function yh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tx(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function C2(s,e){return yh(s,e.toTimestamp())}function Ei(s){return Ue(!!s,49232),_e.fromTimestamp((function(n){const r=is(n);return new nt(r.seconds,r.nanos)})(s))}function ag(s,e){return Dm(s,e).canonicalString()}function Dm(s,e){const n=(function(o){return new Ze(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function nx(s){const e=Ze.fromString(s);return Ue(ox(e),10190,{key:e.toString()}),e}function Nm(s,e){return ag(s.databaseId,e.path)}function lm(s,e){const n=nx(e);if(n.get(1)!==s.databaseId.projectId)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new me(rx(n))}function ix(s,e){return ag(s.databaseId,e)}function I2(s){const e=nx(s);return e.length===4?Ze.emptyPath():rx(e)}function jm(s){return new Ze(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function rx(s){return Ue(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function i1(s,e,n){return{name:Nm(s,e),fields:n.value.mapValue.fields}}function D2(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ye(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(v,b){return v.useProto3Json?(Ue(b===void 0||typeof b=="string",58123),Wt.fromBase64String(b||"")):(Ue(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Wt.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(v){const b=v.code===void 0?Z.UNKNOWN:Z_(v.code);return new ae(b,v.message||"")})(h);n=new ex(r,o,c,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=lm(s,r.document.name),c=Ei(r.document.updateTime),h=r.document.createTime?Ei(r.document.createTime):_e.min(),g=new hn({mapValue:{fields:r.document.fields}}),p=Qt.newFoundDocument(o,c,h,g),v=r.targetIds||[],b=r.removedTargetIds||[];n=new Qu(v,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=lm(s,r.document),c=r.readTime?Ei(r.readTime):_e.min(),h=Qt.newNoDocument(o,c),g=r.removedTargetIds||[];n=new Qu([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=lm(s,r.document),c=r.removedTargetIds||[];n=new Qu([],c,o,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new _2(o,c),g=r.targetId;n=new J_(g,h)}}return n}function N2(s,e){let n;if(e instanceof Ql)n={update:i1(s,e.key,e.value)};else if(e instanceof Y_)n={delete:Nm(s,e.key)};else if(e instanceof cs)n={update:i1(s,e.key,e.data),updateMask:B2(e.fieldMask)};else{if(!(e instanceof p2))return ye(16599,{Vt:e.type});n={verify:Nm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const g=h.transform;if(g instanceof gh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Gl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Hl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof ph)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw ye(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:C2(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ye(27497)})(s,e.precondition)),n}function j2(s,e){return s&&s.length>0?(Ue(e!==void 0,14353),s.map((n=>(function(o,c){let h=o.updateTime?Ei(o.updateTime):Ei(c);return h.isEqual(_e.min())&&(h=Ei(c)),new f2(h,o.transformResults||[])})(n,e)))):[]}function O2(s,e){return{documents:[ix(s,e.path)]}}function P2(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ix(s,o);const c=(function(v){if(v.length!==0)return ax(Yn.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(v){if(v.length!==0)return v.map((b=>(function(S){return{field:Wa(S.field),direction:z2(S.dir)}})(b)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=Im(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:o}}function k2(s){let e=I2(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ue(r===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(T){const S=sx(T);return S instanceof Yn&&O_(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(z){return new Ul(Ka(z.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let S;return S=typeof T=="object"?T.value:T,jh(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(T){const S=!!T.before,A=T.values||[];return new mh(A,S)})(n.startAt));let v=null;return n.endAt&&(v=(function(T){const S=!T.before,A=T.values||[];return new mh(A,S)})(n.endAt)),e2(e,o,h,c,g,"F",p,v)}function M2(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sx(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ka(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ka(n.unaryFilter.field);return wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ka(n.unaryFilter.field);return wt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ka(n.unaryFilter.field);return wt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(s):s.fieldFilter!==void 0?(function(n){return wt.create(Ka(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Yn.create(n.compositeFilter.filters.map((r=>sx(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(n.compositeFilter.op))})(s):ye(30097,{filter:s})}function z2(s){return E2[s]}function V2(s){return A2[s]}function L2(s){return w2[s]}function Wa(s){return{fieldPath:s.canonicalString()}}function Ka(s){return $t.fromServerFormat(s.fieldPath)}function ax(s){return s instanceof wt?(function(n){if(n.op==="=="){if(Hv(n.value))return{unaryFilter:{field:Wa(n.field),op:"IS_NAN"}};if(Gv(n.value))return{unaryFilter:{field:Wa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hv(n.value))return{unaryFilter:{field:Wa(n.field),op:"IS_NOT_NAN"}};if(Gv(n.value))return{unaryFilter:{field:Wa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(n.field),op:V2(n.op),value:n.value}}})(s):s instanceof Yn?(function(n){const r=n.getFilters().map((o=>ax(o)));return r.length===1?r[0]:{compositeFilter:{op:L2(n.op),filters:r}}})(s):ye(54877,{filter:s})}function B2(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ox(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r,o,c=_e.min(),h=_e.min(),g=Wt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.yt=e}}function U2(s){const e=k2({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Cm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.Cn=new H2}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(ns.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class H2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new jt(Ze.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new jt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lx=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(lx,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lo(0)}static cr(){return new lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="LruGarbageCollector",$2=1048576;function a1([s,e],[n,r]){const o=Ne(s,n);return o===0?Ne(e,r):o}class q2{constructor(e){this.Ir=e,this.buffer=new jt(a1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();a1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class W2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(s1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){go(n)?oe(s1,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.Vr(3e5)}))}}class K2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Nh.ce);const r=new q2(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(r1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r1):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,h,g,p,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(r=T,g=Date.now(),this.removeTargets(e,r,n)))).next((T=>(c=T,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(v=Date.now(),$a()<=De.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${T} documents in `+(v-p)+`ms
Total Duration: ${v-b}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T}))))}}function X2(s,e){return new K2(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.changes=new Zs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&kl(r.mutation,o,bn.empty(),nt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=je()){const o=Gs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let h=Il();return c.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=Gs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,je())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,r,o){let c=ir();const h=Pl(),g=(function(){return Pl()})();return n.forEach(((p,v)=>{const b=r.get(v.key);o.has(v.key)&&(b===void 0||b.mutation instanceof cs)?c=c.insert(v.key,v):b!==void 0?(h.set(v.key,b.mutation.getFieldMask()),kl(b.mutation,v,b.mutation.getFieldMask(),nt.now())):h.set(v.key,bn.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((v,b)=>h.set(v,b))),n.forEach(((v,b)=>g.set(v,new Y2(b,h.get(v)??null)))),g)))}recalculateAndSaveOverlays(e,n){const r=Pl();let o=new at(((h,g)=>h-g)),c=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((p=>{const v=n.get(p);if(v===null)return;let b=r.get(p)||bn.empty();b=g.applyToLocalView(v,b),r.set(p,b);const T=(o.get(g.batchId)||je()).add(p);o=o.insert(g.batchId,T)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),v=p.key,b=p.value,T=G_();b.forEach((S=>{if(!c.has(S)){const A=X_(n.get(S),r.get(S));A!==null&&T.set(S,A),c=c.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,T))}return J.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(h){return me.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):J.resolve(Gs());let g=Vl,p=c;return h.next((v=>J.forEach(v,((b,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),c.get(b)?J.resolve():this.remoteDocumentCache.getEntry(e,b).next((S=>{p=p.insert(b,S)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,p,v,je()))).next((b=>({batchId:g,changes:U_(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((r=>{let o=Il();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=Il();return this.indexManager.getCollectionParents(e,c).next((g=>J.forEach(g,(p=>{const v=(function(T,S){return new po(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next((b=>{b.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((h=>{c.forEach(((p,v)=>{const b=v.getKey();h.get(b)===null&&(h=h.insert(b,Qt.newInvalidDocument(b)))}));let g=Il();return h.forEach(((p,v)=>{const b=c.get(p);b!==void 0&&kl(b.mutation,v,bn.empty(),nt.now()),kh(n,v)&&(g=g.insert(p,v))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ei(o.createTime)}})(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:U2(o.bundledQuery),readTime:Ei(o.readTime)}})(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.overlays=new at(me.comparator),this.qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gs();return J.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),J.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const o=Gs(),c=n.length+1,h=new me(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,v=p.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&p.largestBatchId>r&&o.set(p.getKey(),p)}return J.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new at(((v,b)=>v-b));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>r){let b=c.get(v.largestBatchId);b===null&&(b=Gs(),c=c.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const g=Gs(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((v,b)=>g.set(v,b))),!(g.size()>=o)););return J.resolve(g)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new v2(n,r));let c=this.qr.get(n);c===void 0&&(c=je(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Qr=new jt(Mt.$r),this.Ur=new jt(Mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Mt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Mt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new me(new Ze([])),r=new Mt(n,e),o=new Mt(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new Ze([])),r=new Mt(n,e),o=new Mt(n,e+1);let c=je();return this.Ur.forEachInRange([r,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new Mt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new jt(Mt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new y2(c,n,r,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new Mt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return J.resolve(h)}lookupMutationBatch(e,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Zm:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mt(n,0),o=new Mt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(h=>{const g=this.Xr(h.Yr);c.push(g)})),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(Ne);return n.forEach((o=>{const c=new Mt(o,0),h=new Mt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(g=>{r=r.add(g.Yr)}))})),J.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;me.isDocumentKey(c)||(c=c.child(""));const h=new Mt(new me(c),0);let g=new jt(Ne);return this.Zr.forEachWhile((p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(g=g.add(p.Yr)),!0)}),h),J.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return J.forEach(n.mutations,(o=>{const c=new Mt(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Mt(n,0),o=this.Zr.firstAfterOrEqual(r);return J.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.ri=e,this.docs=(function(){return new at(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Qt.newInvalidDocument(o))})),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=ir();const h=n.path,g=new me(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:v,value:{document:b}}=p.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||jw(Nw(b),r)<=0||(o.has(b.key)||kh(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(e,n,r,o){ye(9500)}ii(e,n){return J.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new r5(this)}getSize(e){return J.resolve(this.size)}}class r5 extends Q2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),J.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e){this.persistence=e,this.si=new Zs((n=>tg(n)),ng),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new og,this.targetCount=0,this.ai=lo.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),J.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new lo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Pr(n),J.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),J.waitFor(c).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),J.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nh(0),this.li=!1,this.li=!0,this.hi=new t5,this.referenceDelegate=e(this),this.Pi=new s5(this),this.indexManager=new G2,this.remoteDocumentCache=(function(o){return new i5(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new F2(n),this.Ii=new J2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new e5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new n5(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const o=new a5(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return J.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class a5 extends Pw{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Ri=new og,this.Vi=null}static mi(e){return new lg(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(r=>{const o=me.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,_e.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class vh{constructor(e,n){this.persistence=e,this.pi=new Zs((r=>zw(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=X2(this,n)}static mi(e,n){return new vh(e,n)}Ei(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return J.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?J.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(r++,c.removeEntry(h,_e.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wu(e.data.value)),n}br(e,n,r){return J.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return J.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=je(),o=je();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new cg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tA()?8:kw(Yt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new o5;return this.Ss(e,n,h).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?($a()<=De.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):($a()<=De.DEBUG&&oe("QueryEngine","Query:",qa(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?($a()<=De.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(n))):J.resolve())}ys(e,n){if(Kv(n))return J.resolve(null);let r=Ti(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Cm(n,null,"F"),r=Ti(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=je(...c);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,r).next((p=>{const v=this.Ds(n,g);return this.Cs(n,v,h,p.readTime)?this.ys(e,Cm(n,null,"F")):this.vs(e,v,n,p)}))))})))))}ws(e,n,r,o){return Kv(n)||o.isEqual(_e.min())?J.resolve(null):this.ps.getDocuments(e,r).next((c=>{const h=this.Ds(n,c);return this.Cs(n,h,r,o)?J.resolve(null):($a()<=De.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qa(n)),this.vs(e,h,n,Dw(o,Vl)).next((g=>g)))}))}Ds(e,n){let r=new jt(B_(e));return n.forEach(((o,c)=>{kh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return $a()<=De.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",qa(n)),this.ps.getDocumentsMatchingQuery(e,n,ns.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="LocalStore",c5=3e8;class u5{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new at(Ne),this.xs=new Zs((c=>tg(c)),ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function h5(s,e,n,r){return new u5(s,e,n,r)}async function ux(s,e){const n=xe(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],g=[];let p=je();for(const v of o){h.push(v.batchId);for(const b of v.mutations)p=p.add(b.key)}for(const v of c){g.push(v.batchId);for(const b of v.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(r,p).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:g})))}))}))}function d5(s,e){const n=xe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,v,b){const T=v.batch,S=T.keys();let A=J.resolve();return S.forEach((z=>{A=A.next((()=>b.getEntry(p,z))).next((M=>{const B=v.docVersions.get(z);Ue(B!==null,48541),M.version.compareTo(B)<0&&(T.applyToRemoteDocument(M,v),M.isValidDocument()&&(M.setReadTime(v.commitVersion),b.addEntry(M)))}))})),A.next((()=>g.mutationQueue.removeMutationBatch(p,T)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let p=je();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(p=p.add(g.batch.mutations[v].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function hx(s){const e=xe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function f5(s,e){const n=xe(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((b,T)=>{const S=o.get(T);if(!S)return;g.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(c,b.addedDocuments,T))));let A=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(T)!==null?A=A.withResumeToken(Wt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):b.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(b.resumeToken,r)),o=o.insert(T,A),(function(M,B,te){return M.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=c5?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(S,A,b)&&g.push(n.Pi.updateTargetData(c,A))}));let p=ir(),v=je();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),g.push(m5(c,h,e.documentUpdates).next((b=>{p=b.ks,v=b.qs}))),!r.isEqual(_e.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next((T=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));g.push(b)}return J.waitFor(g).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,v))).next((()=>p))})).then((c=>(n.Ms=o,c)))}function m5(s,e,n){let r=je(),o=je();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let h=ir();return n.forEach(((g,p)=>{const v=c.get(g);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(_e.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):oe(ug,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function g5(s,e){const n=xe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Zm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function p5(s,e){const n=xe(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,J.resolve(o)):n.Pi.allocateTargetId(r).next((h=>(o=new Xr(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Om(s,e,n){const r=xe(s),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!go(h))throw h;oe(ug,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function o1(s,e,n){const r=xe(s);let o=_e.min(),c=je();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,v,b){const T=xe(p),S=T.xs.get(b);return S!==void 0?J.resolve(T.Ms.get(S)):T.Pi.getTargetData(v,b)})(r,h,Ti(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,g.targetId).next((p=>{c=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,n?o:_e.min(),n?c:je()))).next((g=>(y5(r,n2(e),g),{documents:g,Qs:c})))))}function y5(s,e,n){let r=s.Os.get(e)||_e.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class l1{constructor(){this.activeTargetIds=l2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v5{constructor(){this.Mo=new l1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new l1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="ConnectivityMonitor";class u1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(c1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(c1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=null;function Pm(){return Bu===null?Bu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bu++,"0x"+Bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="RestConnection",x5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===dh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const h=Pm(),g=this.zo(e,n.toUriEncodedString());oe(cm,`Sending RPC '${e}' ${h}:`,g,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:v}=new URL(g),b=Ys(v);return this.Jo(e,g,p,r,b).then((T=>(oe(cm,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw ro(cm,`RPC '${e}' ${h} failed with error: `,T,"url: ",g,"request:",r),T}))}Ho(e,n,r,o,c,h){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=x5[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class S5 extends b5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const h=Pm();return new Promise(((g,p)=>{const v=new d_;v.setWithCredentials(!0),v.listenOnce(f_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case qu.NO_ERROR:const T=v.getResponseJson();oe(Kt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),g(T);break;case qu.TIMEOUT:oe(Kt,`RPC '${e}' ${h} timed out`),p(new ae(Z.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const S=v.getStatus();if(oe(Kt,`RPC '${e}' ${h} failed with status:`,S,"response text:",v.getResponseText()),S>0){let A=v.getResponseJson();Array.isArray(A)&&(A=A[0]);const z=A?.error;if(z&&z.status&&z.message){const M=(function(te){const $=te.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf($)>=0?$:Z.UNKNOWN})(z.status);p(new ae(M,z.message))}else p(new ae(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new ae(Z.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{oe(Kt,`RPC '${e}' ${h} completed.`)}}));const b=JSON.stringify(o);oe(Kt,`RPC '${e}' ${h} sending request:`,o),v.send(n,"POST",b,r,15)}))}T_(e,n,r){const o=Pm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=p_(),g=g_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const b=c.join("");oe(Kt,`Creating RPC '${e}' stream ${o}: ${b}`,p);const T=h.createWebChannel(b,p);this.I_(T);let S=!1,A=!1;const z=new T5({Yo:B=>{A?oe(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(oe(Kt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),oe(Kt,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Zo:()=>T.close()}),M=(B,te,$)=>{B.listen(te,(ee=>{try{$(ee)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return M(T,Cl.EventType.OPEN,(()=>{A||(oe(Kt,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),M(T,Cl.EventType.CLOSE,(()=>{A||(A=!0,oe(Kt,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(T))})),M(T,Cl.EventType.ERROR,(B=>{A||(A=!0,ro(Kt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),z.a_(new ae(Z.UNAVAILABLE,"The operation could not be completed")))})),M(T,Cl.EventType.MESSAGE,(B=>{if(!A){const te=B.data[0];Ue(!!te,16349);const $=te,ee=$?.error||$[0]?.error;if(ee){oe(Kt,`RPC '${e}' stream ${o} received error:`,ee);const ne=ee.status;let re=(function(C){const D=At[C];if(D!==void 0)return Z_(D)})(ne),ue=ee.message;re===void 0&&(re=Z.INTERNAL,ue="Unknown error status: "+ne+" with message "+ee.message),A=!0,z.a_(new ae(re,ue)),T.close()}else oe(Kt,`RPC '${e}' stream ${o} received:`,te),z.u_(te)}})),M(g,m_.STAT_EVENT,(B=>{B.stat===bm.PROXY?oe(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===bm.NOPROXY&&oe(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(s){return new R2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="PersistentStream";class fx{constructor(e,n,r,o,c,h,g,p){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(nr(n.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ae(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(h1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(oe(h1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class E5 extends fx{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=D2(this.serializer,e),r=(function(c){if(!("targetChange"in c))return _e.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?_e.min():h.readTime?Ei(h.readTime):_e.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jm(this.serializer),n.addTarget=(function(c,h){let g;const p=h.target;if(g=wm(p)?{documents:O2(c,p)}:{query:P2(c,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=tx(c,h.resumeToken);const v=Im(c,h.expectedCount);v!==null&&(g.expectedCount=v)}else if(h.snapshotVersion.compareTo(_e.min())>0){g.readTime=yh(c,h.snapshotVersion.toTimestamp());const v=Im(c,h.expectedCount);v!==null&&(g.expectedCount=v)}return g})(this.serializer,e);const r=M2(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jm(this.serializer),n.removeTarget=e,this.q_(n)}}class A5 extends fx{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=j2(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>N2(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{}class R5 extends w5{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Dm(n,r),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(Z.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,Dm(n,r),o,h,g,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class C5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class I5{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{Js(this)&&(oe(Xs,"Restarting streams for network reachability change."),await(async function(p){const v=xe(p);v.Ea.add(4),await Zl(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Bh(v)})(this))}))})),this.Ra=new C5(r,o)}}async function Bh(s){if(Js(s))for(const e of s.da)await e(!0)}async function Zl(s){for(const e of s.da)await e(!1)}function mx(s,e){const n=xe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mg(n)?fg(n):yo(n).O_()&&dg(n,e))}function hg(s,e){const n=xe(s),r=yo(n);n.Ia.delete(e),r.O_()&&gx(n,e),n.Ia.size===0&&(r.O_()?r.L_():Js(n)&&n.Ra.set("Unknown"))}function dg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(s).Y_(e)}function gx(s,e){s.Va.Ue(e),yo(s).Z_(e)}function fg(s){s.Va=new S2({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),yo(s).start(),s.Ra.ua()}function mg(s){return Js(s)&&!yo(s).x_()&&s.Ia.size>0}function Js(s){return xe(s).Ea.size===0}function px(s){s.Va=void 0}async function D5(s){s.Ra.set("Online")}async function N5(s){s.Ia.forEach(((e,n)=>{dg(s,e)}))}async function j5(s,e){px(s),mg(s)?(s.Ra.ha(e),fg(s)):s.Ra.set("Unknown")}async function O5(s,e,n){if(s.Ra.set("Online"),e instanceof ex&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(r){oe(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _h(s,r)}else if(e instanceof Qu?s.Va.Ze(e):e instanceof J_?s.Va.st(e):s.Va.tt(e),!n.isEqual(_e.min()))try{const r=await hx(s.localStore);n.compareTo(r)>=0&&await(function(c,h){const g=c.Va.Tt(h);return g.targetChanges.forEach(((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const b=c.Ia.get(v);b&&c.Ia.set(v,b.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,v)=>{const b=c.Ia.get(p);if(!b)return;c.Ia.set(p,b.withResumeToken(Wt.EMPTY_BYTE_STRING,b.snapshotVersion)),gx(c,p);const T=new Xr(b.target,p,v,b.sequenceNumber);dg(c,T)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(r){oe(Xs,"Failed to raise snapshot:",r),await _h(s,r)}}async function _h(s,e,n){if(!go(e))throw e;s.Ea.add(1),await Zl(s),s.Ra.set("Offline"),n||(n=()=>hx(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(Xs,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Bh(s)}))}function yx(s,e){return e().catch((n=>_h(s,n,e)))}async function Fh(s){const e=xe(s),n=as(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zm;for(;P5(e);)try{const o=await g5(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,k5(e,o)}catch(o){await _h(e,o)}vx(e)&&_x(e)}function P5(s){return Js(s)&&s.Ta.length<10}function k5(s,e){s.Ta.push(e);const n=as(s);n.O_()&&n.X_&&n.ea(e.mutations)}function vx(s){return Js(s)&&!as(s).x_()&&s.Ta.length>0}function _x(s){as(s).start()}async function M5(s){as(s).ra()}async function z5(s){const e=as(s);for(const n of s.Ta)e.ea(n.mutations)}async function V5(s,e,n){const r=s.Ta.shift(),o=rg.from(r,e,n);await yx(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Fh(s)}async function L5(s,e){e&&as(s).X_&&await(async function(r,o){if((function(h){return x2(h)&&h!==Z.ABORTED})(o.code)){const c=r.Ta.shift();as(r).B_(),await yx(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Fh(r)}})(s,e),vx(s)&&_x(s)}async function d1(s,e){const n=xe(s);n.asyncQueue.verifyOperationInProgress(),oe(Xs,"RemoteStore received new credentials");const r=Js(n);n.Ea.add(3),await Zl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function B5(s,e){const n=xe(s);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await Zl(n),n.Ra.set("Unknown"))}function yo(s){return s.ma||(s.ma=(function(n,r,o){const c=xe(n);return c.sa(),new E5(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:D5.bind(null,s),t_:N5.bind(null,s),r_:j5.bind(null,s),H_:O5.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),mg(s)?fg(s):s.Ra.set("Unknown")):(await s.ma.stop(),px(s))}))),s.ma}function as(s){return s.fa||(s.fa=(function(n,r,o){const c=xe(n);return c.sa(),new A5(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:M5.bind(null,s),r_:L5.bind(null,s),ta:z5.bind(null,s),na:V5.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Fh(s)):(await s.fa.stop(),s.Ta.length>0&&(oe(Xs,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,g=new gg(e,n,h,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(s,e){if(nr("AsyncQueue",`${e}: ${s}`),go(s))return new ae(Z.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(e){return new Za(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=Il(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.ga=new at(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class co{constructor(e,n,r,o,c,h,g,p,v){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new co(e,n,Za.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class U5{constructor(){this.queries=m1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=xe(n),c=o.queries;o.queries=m1(),c.forEach(((h,g)=>{for(const p of g.Sa)p.onError(r)}))})(this,new ae(Z.ABORTED,"Firestore shutting down"))}}function m1(){return new Zs((s=>L_(s)),Ph)}async function G5(s,e){const n=xe(s);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new F5,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=pg(h,`Initialization of query '${qa(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&yg(n)}async function H5(s,e){const n=xe(s),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $5(s,e){const n=xe(s);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const g of h.Sa)g.Fa(o)&&(r=!0);h.wa=o}}r&&yg(n)}function q5(s,e,n){const r=xe(s),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function yg(s){s.Ca.forEach((e=>{e.next()}))}var km,g1;(g1=km||(km={})).Ma="default",g1.Cache="cache";class W5{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.key=e}}class bx{constructor(e){this.key=e}}class K5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=B_(e),this.tu=new Za(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new f1,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,T)=>{const S=o.get(b),A=kh(this.query,T)?T:null,z=!!S&&this.mutatedKeys.has(S.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let B=!1;S&&A?S.data.isEqual(A.data)?z!==M&&(r.track({type:3,doc:A}),B=!0):this.su(S,A)||(r.track({type:2,doc:A}),B=!0,(p&&this.eu(A,p)>0||v&&this.eu(A,v)<0)&&(g=!0)):!S&&A?(r.track({type:0,doc:A}),B=!0):S&&!A&&(r.track({type:1,doc:S}),B=!0,(p||v)&&(g=!0)),B&&(A?(h=h.add(A),c=M?c.add(b):c.delete(b)):(h=h.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),c=c.delete(b.key),r.track({type:1,doc:b})}return{tu:h,iu:r,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((b,T)=>(function(A,z){const M=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:B})}};return M(A)-M(z)})(b.type,T.type)||this.eu(b.doc,T.doc))),this.ou(r),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,v=p!==this.Za;return this.Za=p,h.length!==0||v?{snapshot:new co(this.query,e.tu,c,h,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new f1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new bx(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new xx(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vg="SyncEngine";class X5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Q5{constructor(e){this.key=e,this.hu=!1}}class Y5{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Zs((g=>L_(g)),Ph),this.Iu=new Map,this.Eu=new Set,this.du=new at(me.comparator),this.Au=new Map,this.Ru=new og,this.Vu={},this.mu=new Map,this.fu=lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Z5(s,e,n=!0){const r=Rx(s);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Tx(r,e,n,!0),o}async function J5(s,e){const n=Rx(s);await Tx(n,e,!0,!1)}async function Tx(s,e,n,r){const o=await p5(s.localStore,Ti(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,n);let g;return r&&(g=await eR(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&mx(s.remoteStore,o),g}async function eR(s,e,n,r,o){s.pu=(T,S,A)=>(async function(M,B,te,$){let ee=B.view.ru(te);ee.Cs&&(ee=await o1(M.localStore,B.query,!1).then((({documents:I})=>B.view.ru(I,ee))));const ne=$&&$.targetChanges.get(B.targetId),re=$&&$.targetMismatches.get(B.targetId)!=null,ue=B.view.applyChanges(ee,M.isPrimaryClient,ne,re);return y1(M,B.targetId,ue.au),ue.snapshot})(s,T,S,A);const c=await o1(s.localStore,e,!0),h=new K5(e,c.Qs),g=h.ru(c.documents),p=Yl.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),v=h.applyChanges(g,s.isPrimaryClient,p);y1(s,n,v.au);const b=new X5(e,n,h);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),v.snapshot}async function tR(s,e,n){const r=xe(s),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((h=>!Ph(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Om(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&hg(r.remoteStore,o.targetId),Mm(r,o.targetId)})).catch(mo)):(Mm(r,o.targetId),await Om(r.localStore,o.targetId,!0))}async function nR(s,e){const n=xe(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hg(n.remoteStore,r.targetId))}async function iR(s,e,n){const r=uR(s);try{const o=await(function(h,g){const p=xe(h),v=nt.now(),b=g.reduce(((A,z)=>A.add(z.key)),je());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let z=ir(),M=je();return p.Ns.getEntries(A,b).next((B=>{z=B,z.forEach(((te,$)=>{$.isValidDocument()||(M=M.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,z))).next((B=>{T=B;const te=[];for(const $ of g){const ee=g2($,T.get($.key).overlayedDocument);ee!=null&&te.push(new cs($.key,ee,D_(ee.value.mapValue),Si.exists(!0)))}return p.mutationQueue.addMutationBatch(A,v,te,g)})).next((B=>{S=B;const te=B.applyToLocalDocumentSet(T,M);return p.documentOverlayCache.saveOverlays(A,B.batchId,te)}))})).then((()=>({batchId:S.batchId,changes:U_(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,g,p){let v=h.Vu[h.currentUser.toKey()];v||(v=new at(Ne)),v=v.insert(g,p),h.Vu[h.currentUser.toKey()]=v})(r,o.batchId,n),await Jl(r,o.changes),await Fh(r.remoteStore)}catch(o){const c=pg(o,"Failed to persist write");n.reject(c)}}async function Sx(s,e){const n=xe(s);try{const r=await f5(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ue(h.hu,14607):o.removedDocuments.size>0&&(Ue(h.hu,42227),h.hu=!1))})),await Jl(n,r,e)}catch(r){await mo(r)}}function p1(s,e,n){const r=xe(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const p=xe(h);p.onlineState=g;let v=!1;p.queries.forEach(((b,T)=>{for(const S of T.Sa)S.va(g)&&(v=!0)})),v&&yg(p)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rR(s,e,n){const r=xe(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let h=new at(me.comparator);h=h.insert(c,Qt.newNoDocument(c,_e.min()));const g=je().add(c),p=new Vh(_e.min(),new Map,new at(Ne),h,g);await Sx(r,p),r.du=r.du.remove(c),r.Au.delete(e),_g(r)}else await Om(r.localStore,e,!1).then((()=>Mm(r,e,n))).catch(mo)}async function sR(s,e){const n=xe(s),r=e.batch.batchId;try{const o=await d5(n.localStore,e);Ax(n,r,null),Ex(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jl(n,o)}catch(o){await mo(o)}}async function aR(s,e,n){const r=xe(s);try{const o=await(function(h,g){const p=xe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let b;return p.mutationQueue.lookupMutationBatch(v,g).next((T=>(Ue(T!==null,37113),b=T.keys(),p.mutationQueue.removeMutationBatch(v,T)))).next((()=>p.mutationQueue.performConsistencyCheck(v))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(v,b,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b))).next((()=>p.localDocuments.getDocuments(v,b)))}))})(r.localStore,e);Ax(r,e,n),Ex(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jl(r,o)}catch(o){await mo(o)}}function Ex(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function Ax(s,e,n){const r=xe(s);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Mm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||wx(s,r)}))}function wx(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(hg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),_g(s))}function y1(s,e,n){for(const r of n)r instanceof xx?(s.Ru.addReference(r.key,e),oR(s,r)):r instanceof bx?(oe(vg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||wx(s,r.key)):ye(19791,{wu:r})}function oR(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(oe(vg,"New document in limbo: "+n),s.Eu.add(r),_g(s))}function _g(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new me(Ze.fromString(e)),r=s.fu.next();s.Au.set(r,new Q5(n)),s.du=s.du.insert(n,r),mx(s.remoteStore,new Xr(Ti(z_(n.path)),r,"TargetPurposeLimboResolution",Nh.ce))}}async function Jl(s,e,n){const r=xe(s),o=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,p)=>{h.push(r.pu(p,e,n).then((v=>{if((v||n)&&r.isPrimaryClient){const b=v?!v.fromCache:n?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(v){o.push(v);const b=cg.As(p.targetId,v);c.push(b)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(p,v){const b=xe(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>J.forEach(v,(S=>J.forEach(S.Es,(A=>b.persistence.referenceDelegate.addReference(T,S.targetId,A))).next((()=>J.forEach(S.ds,(A=>b.persistence.referenceDelegate.removeReference(T,S.targetId,A)))))))))}catch(T){if(!go(T))throw T;oe(ug,"Failed to update sequence numbers: "+T)}for(const T of v){const S=T.targetId;if(!T.fromCache){const A=b.Ms.get(S),z=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(z);b.Ms=b.Ms.insert(S,M)}}})(r.localStore,c))}async function lR(s,e){const n=xe(s);if(!n.currentUser.isEqual(e)){oe(vg,"User change. New user:",e.toKey());const r=await ux(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new ae(Z.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jl(n,r.Ls)}}function cR(s,e){const n=xe(s),r=n.Au.get(e);if(r&&r.hu)return je().add(r.key);{let o=je();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function Rx(s){const e=xe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rR.bind(null,e),e.Pu.H_=$5.bind(null,e.eventManager),e.Pu.yu=q5.bind(null,e.eventManager),e}function uR(s){const e=xe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aR.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return h5(this.persistence,new l5,e.initialUser,this.serializer)}Cu(e){return new cx(lg.mi,this.serializer)}Du(e){return new v5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class hR extends xh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof vh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new W2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new cx((r=>vh.mi(r,n)),this.serializer)}}class zm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lR.bind(null,this.syncEngine),await B5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new U5})()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),r=(function(c){return new S5(c)})(e.databaseInfo);return(function(c,h,g,p){return new R5(c,h,g,p)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,h,g){return new I5(r,o,c,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>p1(this.syncEngine,n,0)),(function(){return u1.v()?new u1:new _5})())}createSyncEngine(e,n){return(function(o,c,h,g,p,v,b){const T=new Y5(o,c,h,g,p,v);return b&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=xe(n);oe(Xs,"RemoteStore shutting down."),r.Ea.add(5),await Zl(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zm.provider={build:()=>new zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class fR{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{oe(os,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(oe(os,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function hm(s,e){s.asyncQueue.verifyOperationInProgress(),oe(os,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await ux(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function v1(s,e){s.asyncQueue.verifyOperationInProgress();const n=await mR(s);oe(os,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>d1(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>d1(e.remoteStore,o))),s._onlineComponents=e}async function mR(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(os,"Using user provided OfflineComponentProvider");try{await hm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ro("Error using user provided cache. Falling back to memory cache: "+n),await hm(s,new xh)}}else oe(os,"Using default OfflineComponentProvider"),await hm(s,new hR(void 0));return s._offlineComponents}async function Cx(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(os,"Using user provided OnlineComponentProvider"),await v1(s,s._uninitializedComponentsProvider._online)):(oe(os,"Using default OnlineComponentProvider"),await v1(s,new zm))),s._onlineComponents}function gR(s){return Cx(s).then((e=>e.syncEngine))}async function pR(s){const e=await Cx(s),n=e.eventManager;return n.onListen=Z5.bind(null,e.syncEngine),n.onUnlisten=tR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nR.bind(null,e.syncEngine),n}function yR(s,e,n={}){const r=new Jr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,g,p,v){const b=new dR({next:S=>{b.Nu(),h.enqueueAndForget((()=>H5(c,T))),S.fromCache&&p.source==="server"?v.reject(new ae(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),T=new W5(g,b,{includeMetadataChanges:!0,qa:!0});return G5(c,T)})(await pR(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="firestore.googleapis.com",x1=!0;class b1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dx,this.ssl=x1}else this.host=e.host,this.ssl=e.ssl??x1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$2)throw new ae(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Iw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ix(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _w;switch(r.type){case"firstParty":return new Sw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=_1.get(n);r&&(oe("ComponentProvider","Removing Datastore"),_1.delete(n),r.terminate())})(this),Promise.resolve()}}function vR(s,e,n,r={}){s=Ks(s,Uh);const o=Ys(e),c=s._getSettings(),h={...c,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&($m(`https://${g}`),qm("Firestore",!0)),c.host!==Dx&&c.host!==g&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:o,emulatorOptions:r};if(!$s(p,h)&&(s._setSettings(p),r.mockUserToken)){let v,b;if(typeof r.mockUserToken=="string")v=r.mockUserToken,b=Xt.MOCK_USER;else{v=qE(r.mockUserToken,s._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ae(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Xt(T)}s._authCredentials=new xw(new v_(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ea(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xl(n,Ct._jsonSchema))return new Ct(e,r||null,new me(Ze.fromString(n.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Rt("string",Ct._jsonSchemaVersion),referencePath:Rt("string")};class es extends ea{constructor(e,n,r){super(e,n,z_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new me(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function Yu(s,e,...n){if(s=qt(s),__("collection","path",e),s instanceof Uh){const r=Ze.fromString(e,...n);return Pv(r),new es(s,null,r)}{if(!(s instanceof Ct||s instanceof es))throw new ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ze.fromString(e,...n));return Pv(r),new es(s.firestore,null,r)}}function T1(s,e,...n){if(s=qt(s),arguments.length===1&&(e=Ym.newId()),__("doc","path",e),s instanceof Uh){const r=Ze.fromString(e,...n);return Ov(r),new Ct(s,null,new me(r))}{if(!(s instanceof Ct||s instanceof es))throw new ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ze.fromString(e,...n));return Ov(r),new Ct(s.firestore,s instanceof es?s.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="AsyncQueue";class E1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dx(this,"async_queue_retry"),this._c=()=>{const r=um();r&&oe(S1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!go(e))throw e;oe(S1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",A1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=gg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&ye(47125,{Pc:A1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function A1(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Gh extends Uh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new E1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E1(e),this._firestoreClient=void 0,await e}}}function _R(s,e){const n=typeof s=="object"?s:Xm(),r=typeof s=="string"?s:dh,o=Ih(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=i_("firestore");c&&vR(o,...c)}return o}function Nx(s){if(s._terminated)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||xR(s),s._firestoreClient}function xR(s){const e=s._freezeSettings(),n=(function(o,c,h,g){return new Bw(o,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Ix(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new fR(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(Wt.fromBase64String(e))}catch(n){throw new ae(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xl(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:Rt("string",kn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Xl(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Rt("string",Ai._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xl(e,wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new wi(e.vectorValues);throw new ae(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wi._jsonSchemaVersion="firestore/vectorValue/1.0",wi._jsonSchema={type:Rt("string",wi._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=/^__.*__$/;class TR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class jx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ox(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:s})}}class bg{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ox(this.Ac)&&bR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lh(e)}Cc(e,n,r,o=!1){return new bg({Ac:e,methodName:n,Dc:r,path:$t.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tg(s){const e=s._freezeSettings(),n=Lh(s._databaseId);return new SR(s._databaseId,!!e.ignoreUndefinedProperties,n)}function ER(s,e,n,r,o,c={}){const h=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);Sg("Data must be an object, but it was:",h,r);const g=Px(r,h);let p,v;if(c.merge)p=new bn(h.fieldMask),v=h.fieldTransforms;else if(c.mergeFields){const b=[];for(const T of c.mergeFields){const S=Vm(e,T,n);if(!h.contains(S))throw new ae(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Mx(b,S)||b.push(S)}p=new bn(b),v=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,v=h.fieldTransforms;return new TR(new hn(g),p,v)}class $h extends xg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $h}}function AR(s,e,n,r){const o=s.Cc(1,e,n);Sg("Data must be an object, but it was:",o,r);const c=[],h=hn.empty();ls(r,((p,v)=>{const b=Eg(e,p,n);v=qt(v);const T=o.yc(b);if(v instanceof $h)c.push(b);else{const S=ec(v,T);S!=null&&(c.push(b),h.set(b,S))}}));const g=new bn(c);return new jx(h,g,o.fieldTransforms)}function wR(s,e,n,r,o,c){const h=s.Cc(1,e,n),g=[Vm(e,r,n)],p=[o];if(c.length%2!=0)throw new ae(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)g.push(Vm(e,c[S])),p.push(c[S+1]);const v=[],b=hn.empty();for(let S=g.length-1;S>=0;--S)if(!Mx(v,g[S])){const A=g[S];let z=p[S];z=qt(z);const M=h.yc(A);if(z instanceof $h)v.push(A);else{const B=ec(z,M);B!=null&&(v.push(A),b.set(A,B))}}const T=new bn(v);return new jx(b,T,h.fieldTransforms)}function RR(s,e,n,r=!1){return ec(n,s.Cc(r?4:3,e))}function ec(s,e){if(kx(s=qt(s)))return Sg("Unsupported field value:",e,s),Px(s,e);if(s instanceof xg)return(function(r,o){if(!Ox(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let h=0;for(const g of r){let p=ec(g,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),h++}return{arrayValue:{values:c}}})(s,e)}return(function(r,o){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return c2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=nt.fromDate(r);return{timestampValue:yh(o.serializer,c)}}if(r instanceof nt){const c=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yh(o.serializer,c)}}if(r instanceof Ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kn)return{bytesValue:tx(o.serializer,r._byteString)};if(r instanceof Ct){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ag(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof wi)return(function(h,g){return{mapValue:{fields:{[C_]:{stringValue:I_},[fh]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw g.Sc("VectorValues must only contain numeric values.");return ig(g.serializer,v)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Dh(r)}`)})(s,e)}function Px(s,e){const n={};return T_(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(s,((r,o)=>{const c=ec(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function kx(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof nt||s instanceof Ai||s instanceof kn||s instanceof Ct||s instanceof xg||s instanceof wi)}function Sg(s,e,n){if(!kx(n)||!x_(n)){const r=Dh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Vm(s,e,n){if((e=qt(e))instanceof Hh)return e._internalPath;if(typeof e=="string")return Eg(s,e);throw bh("Field path arguments must be of type string or ",s,!1,void 0,n)}const CR=new RegExp("[~\\*/\\[\\]]");function Eg(s,e,n){if(e.search(CR)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Hh(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function bh(s,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||h)&&(p+=" (found",c&&(p+=` in field ${r}`),h&&(p+=` in document ${o}`),p+=")"),new ae(Z.INVALID_ARGUMENT,g+s+p)}function Mx(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IR extends zx{data(){return super.data()}}function qh(s,e){return typeof e=="string"?Eg(s,e):e instanceof Hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ae(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ag{}class Vx extends Ag{}function Zu(s,e,...n){let r=[];e instanceof Ag&&r.push(e),r=r.concat(n),(function(c){const h=c.filter((p=>p instanceof wg)).length,g=c.filter((p=>p instanceof Wh)).length;if(h>1||h>0&&g>0)throw new ae(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Wh extends Vx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wh(e,n,r)}_apply(e){const n=this._parse(e);return Lx(e._query,n),new ea(e.firestore,e.converter,Rm(e._query,n))}_parse(e){const n=Tg(e.firestore);return(function(c,h,g,p,v,b,T){let S;if(v.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ae(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){R1(T,b);const z=[];for(const M of T)z.push(w1(p,c,M));S={arrayValue:{values:z}}}else S=w1(p,c,T)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||R1(T,b),S=RR(g,h,T,b==="in"||b==="not-in");return wt.create(v,b,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ju(s,e,n){const r=e,o=qh("where",s);return Wh._create(o,r,n)}class wg extends Ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let h=o;const g=c.getFlattenedFilters();for(const p of g)Lx(h,p),h=Rm(h,p)})(e._query,n),new ea(e.firestore,e.converter,Rm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rg extends Vx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rg(e,n)}_apply(e){const n=(function(o,c,h){if(o.startAt!==null)throw new ae(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ul(c,h)})(e._query,this._field,this._direction);return new ea(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new po(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function eh(s,e="asc"){const n=e,r=qh("orderBy",s);return Rg._create(r,n)}function w1(s,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new ae(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&n.indexOf("/")!==-1)throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ze.fromString(n));if(!me.isDocumentKey(r))throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uv(s,new me(r))}if(n instanceof Ct)return Uv(s,n._key);throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dh(n)}.`)}function R1(s,e){if(!Array.isArray(s)||s.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lx(s,e){const n=(function(o,c){for(const h of o)for(const g of h.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ae(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NR{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ls(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[fh].arrayValue?.values?.map((r=>mt(r.doubleValue)));return new wi(n)}convertGeoPoint(e){return new Ai(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Oh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const n=is(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ze.fromString(e);Ue(ox(r),9688,{name:e});const o=new Bl(r.get(1),r.get(3)),c=new me(r.popFirst(5));return o.isEqual(n)||nr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Fu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ja extends zx{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ja._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ja._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ja._jsonSchema={type:Rt("string",Ja._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class th extends Ja{data(e={}){return super.data(e)}}class eo{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Fu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new th(this._firestore,this._userDataWriter,r.key,r,new Fu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const p=new th(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Fu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new th(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Fu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,b=-1;return g.type!==0&&(v=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),b=h.indexOf(g.doc.key)),{type:OR(g.type),doc:p,oldIndex:v,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:s})}}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:Rt("string",eo._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class PR extends NR{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function nh(s){s=Ks(s,ea);const e=Ks(s.firestore,Gh),n=Nx(e),r=new PR(e);return DR(s._query),yR(n,s._query).then((o=>new eo(e,r,s,o)))}function kR(s,e,n){s=Ks(s,Ct);const r=Ks(s.firestore,Gh),o=jR(s.converter,e);return Bx(r,[ER(Tg(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Si.none())])}function MR(s,e,n,...r){s=Ks(s,Ct);const o=Ks(s.firestore,Gh),c=Tg(o);let h;return h=typeof(e=qt(e))=="string"||e instanceof Hh?wR(c,"updateDoc",s._key,e,n,r):AR(c,"updateDoc",s._key,e),Bx(o,[h.toMutation(s._key,Si.exists(!0))])}function Bx(s,e){return(function(r,o){const c=new Jr;return r.asyncQueue.enqueueAndForget((async()=>iR(await gR(r),o,c))),c.promise})(Nx(s),e)}(function(e,n=!0){(function(o){fo=o})(ho),qs(new ts("firestore",((r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),g=new Gh(new bw(r.getProvider("auth-internal")),new Ew(h,r.getProvider("app-check-internal")),(function(v,b){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ae(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bl(v.options.projectId,b)})(h,o),h);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),bi(Iv,Dv,e),bi(Iv,Dv,"esm2020")})();var zR="firebase",VR="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi(zR,VR,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n,r,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Kn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||r.get().then(c=>this.messaging=c,()=>{}),this.appCheck||o?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="us-central1";class BR{constructor(e,n,r,o,c=Lm,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new LR(e,n,r,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(c);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Lm}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function FR(s,e,n){const r=Ys(e);s.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&($m(s.emulatorOrigin+"/backends"),qm("Functions",!0))}const C1="@firebase/functions",I1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="auth-internal",GR="app-check-internal",HR="messaging-internal";function $R(s){const e=(n,{instanceIdentifier:r})=>{const o=n.getProvider("app").getImmediate(),c=n.getProvider(UR),h=n.getProvider(HR),g=n.getProvider(GR);return new BR(o,c,h,g,r)};qs(new ts(Fx,e,"PUBLIC").setMultipleInstances(!0)),bi(C1,I1,s),bi(C1,I1,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(s=Xm(),e=Lm){const r=Ih(qt(s),Fx).getImmediate({identifier:e}),o=i_("functions");return o&&WR(r,...o),r}function WR(s,e,n){FR(qt(s),e,n)}$R();function Ux(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KR=Ux,Gx=new Wl("auth","Firebase",Ux());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Wm("@firebase/auth");function XR(s,...e){Th.logLevel<=De.WARN&&Th.warn(`Auth (${ho}): ${s}`,...e)}function ih(s,...e){Th.logLevel<=De.ERROR&&Th.error(`Auth (${ho}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(s,...e){throw Cg(s,...e)}function Ri(s,...e){return Cg(s,...e)}function Hx(s,e,n){const r={...KR(),[e]:n};return new Wl("auth","Firebase",r).create(e,{appName:s.name})}function Hs(s){return Hx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return Gx.create(s,...e)}function ve(s,e,...n){if(!s)throw Cg(e,...n)}function Zi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw ih(e),new Error(e)}function sr(s,e){s||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){return typeof self<"u"&&self.location?.href||""}function QR(){return D1()==="http:"||D1()==="https:"}function D1(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QR()||ZE()||"connection"in navigator)?navigator.onLine:!0}function ZR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=XE()||JE()}get(){return YR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(s,e){sr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tC=new tc(3e4,6e4);function Dg(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function vo(s,e,n,r,o={}){return qx(s,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const g=Kl({key:s.config.apiKey,...h}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const v={method:e,headers:p,...c};return YE()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&Ys(s.emulatorConfig.host)&&(v.credentials="include"),$x.fetch()(await Wx(s,s.config.apiHost,n,g),v)})}async function qx(s,e,n){s._canInitEmulator=!1;const r={...JR,...e};try{const o=new iC(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw Uu(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const g=c.ok?h.errorMessage:h.error.message,[p,v]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uu(s,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Uu(s,"email-already-in-use",h);if(p==="USER_DISABLED")throw Uu(s,"user-disabled",h);const b=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Hx(s,b,v);rr(s,b)}}catch(o){if(o instanceof ar)throw o;rr(s,"network-request-failed",{message:String(o)})}}async function nC(s,e,n,r,o={}){const c=await vo(s,e,n,r,o);return"mfaPendingCredential"in c&&rr(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function Wx(s,e,n,r){const o=`${e}${n}?${r}`,c=s,h=c.config.emulator?Ig(s.config,o):`${s.config.apiScheme}://${o}`;return eC.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}class iC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ri(this.auth,"network-request-failed")),tC.get())})}}function Uu(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ri(s,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(s,e){return vo(s,"POST","/v1/accounts:delete",e)}async function Sh(s,e){return vo(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sC(s,e=!1){const n=qt(s),r=await n.getIdToken(e),o=Ng(r);ve(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:r,authTime:Ml(dm(o.auth_time)),issuedAtTime:Ml(dm(o.iat)),expirationTime:Ml(dm(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function dm(s){return Number(s)*1e3}function Ng(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const o=t_(n);return o?JSON.parse(o):(ih("Failed to decode base64 JWT payload"),null)}catch(o){return ih("Caught error parsing JWT payload as JSON",o?.toString()),null}}function N1(s){const e=Ng(s);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&aC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function aC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(s){const e=s.auth,n=await s.getIdToken(),r=await $l(s,Sh(e,{idToken:n}));ve(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?Kx(o.providerUserInfo):[],h=cC(s.providerData,c),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!h?.length,v=g?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(s,b)}async function lC(s){const e=qt(s);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cC(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Kx(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(s,e){const n=await qx(s,{},async()=>{const r=Kl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await Wx(s,o,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:r};return s.emulatorConfig&&Ys(s.emulatorConfig.host)&&(p.credentials="include"),$x.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hC(s,e){return vo(s,"POST","/v2/accounts:revokeToken",Dg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=N1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await uC(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new to;return r&&(ve(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(ve(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(ve(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(s,e){ve(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new oC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sC(this,e)}reload(){return lC(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Eh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Hs(this.auth));const e=await this.getIdToken();return await $l(this,rC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,v=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:A,providerData:z,stsTokenManager:M}=n;ve(T&&M,e,"internal-error");const B=to.fromJSON(this.name,M);ve(typeof T=="string",e,"internal-error"),Fr(r,e.name),Fr(o,e.name),ve(typeof S=="boolean",e,"internal-error"),ve(typeof A=="boolean",e,"internal-error"),Fr(c,e.name),Fr(h,e.name),Fr(g,e.name),Fr(p,e.name),Fr(v,e.name),Fr(b,e.name);const te=new Xn({uid:T,auth:e,email:o,emailVerified:S,displayName:r,isAnonymous:A,photoURL:h,phoneNumber:c,tenantId:g,stsTokenManager:B,createdAt:v,lastLoginAt:b});return z&&Array.isArray(z)&&(te.providerData=z.map($=>({...$}))),p&&(te._redirectEventId=p),te}static async _fromIdTokenResponse(e,n,r=!1){const o=new to;o.updateFromServerResponse(n);const c=new Xn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Eh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];ve(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Kx(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,g=new to;g.updateFromIdToken(r);const p=new Xn({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Map;function Ji(s){sr(s instanceof Function,"Expected a class definition");let e=j1.get(s);return e?(sr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,j1.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Xx.type="NONE";const O1=Xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(s,e,n){return`firebase:${s}:${e}:${n}`}class no{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=rh(this.userKey,o.apiKey,c),this.fullPersistenceKey=rh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sh(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new no(Ji(O1),e,r);const o=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=o[0]||Ji(O1);const h=rh(r,e.config.apiKey,e.name);let g=null;for(const v of n)try{const b=await v._get(h);if(b){let T;if(typeof b=="string"){const S=await Sh(e,{idToken:b}).catch(()=>{});if(!S)break;T=await Xn._fromGetAccountInfoResponse(e,S,b)}else T=Xn._fromJSON(e,b);v!==c&&(g=T),c=v;break}}catch{}const p=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new no(c,e,r):(c=p[0],g&&await c._set(h,g.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(h)}catch{}})),new no(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tb(e))return"Blackberry";if(nb(e))return"Webos";if(Yx(e))return"Safari";if((e.includes("chrome/")||Zx(e))&&!e.includes("edge/"))return"Chrome";if(eb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function Qx(s=Yt()){return/firefox\//i.test(s)}function Yx(s=Yt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zx(s=Yt()){return/crios\//i.test(s)}function Jx(s=Yt()){return/iemobile/i.test(s)}function eb(s=Yt()){return/android/i.test(s)}function tb(s=Yt()){return/blackberry/i.test(s)}function nb(s=Yt()){return/webos/i.test(s)}function jg(s=Yt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function dC(s=Yt()){return jg(s)&&!!window.navigator?.standalone}function fC(){return eA()&&document.documentMode===10}function ib(s=Yt()){return jg(s)||eb(s)||nb(s)||tb(s)||/windows phone/i.test(s)||Jx(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(s,e=[]){let n;switch(s){case"Browser":n=P1(Yt());break;case"Worker":n=`${P1(Yt())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,g)=>{try{const p=e(c);h(p)}catch(p){g(p)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(s,e={}){return vo(s,"GET","/v2/passwordPolicy",Dg(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=6;class yC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k1(this),this.idTokenSubscription=new k1(this),this.beforeStateQueue=new mC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ji(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await no.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sh(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=r?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===h)&&g?.user&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Hs(this));const n=e?qt(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gC(this),n=new yC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ji(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await no.create(this,[Ji(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(g,this,"internal-error"),g.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&XR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Og(s){return qt(s)}class k1{constructor(e){this.auth=e,this.observer=null,this.addObserver=lA(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _C(s){Pg=s}function xC(s){return Pg.loadJS(s)}function bC(){return Pg.gapiScript}function TC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(s,e){const n=Ih(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if($s(c,e??{}))return o;rr(o,"already-initialized")}return n.initialize({options:e})}function EC(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ji);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function AC(s,e,n){const r=Og(s);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=sb(e),{host:h,port:g}=wC(e),p=g===null?"":`:${g}`,v={url:`${c}//${h}${p}/`},b=Object.freeze({host:h,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve($s(v,r.config.emulator)&&$s(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Ys(h)?($m(`${c}//${h}${p}`),qm("Auth",!0)):RC()}function sb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function wC(s){const e=sb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:M1(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:M1(h)}}}function M1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function RC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,n){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(s,e){return nC(s,"POST","/v1/accounts:signInWithIdp",Dg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="http://localhost";class Qs extends ab{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const h=new Qs(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,io(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:CC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends ob{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends nc{constructor(){super("facebook.com")}static credential(e){return Qs._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qs._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends nc{constructor(){super("github.com")}static credential(e){return Qs._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends nc{constructor(){super("twitter.com")}static credential(e,n){return Qs._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Kr.credential(n,r)}catch{return null}}}Kr.TWITTER_SIGN_IN_METHOD="twitter.com";Kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await Xn._fromIdTokenResponse(e,r,o),h=z1(r);return new uo({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=z1(r);return new uo({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function z1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends ar{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Ah(e,n,r,o)}}function lb(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(s,c,e,r):c})}async function IC(s,e,n=!1){const r=await $l(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return uo._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(s,e,n=!1){const{auth:r}=s;if(Kn(r.app))return Promise.reject(Hs(r));const o="reauthenticate";try{const c=await $l(s,lb(r,o,e,s),n);ve(c.idToken,r,"internal-error");const h=Ng(c.idToken);ve(h,r,"internal-error");const{sub:g}=h;return ve(s.uid===g,r,"user-mismatch"),uo._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&rr(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(s,e,n=!1){if(Kn(s.app))return Promise.reject(Hs(s));const r="signIn",o=await lb(s,r,e),c=await uo._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(c.user),c}function jC(s,e,n,r){return qt(s).onIdTokenChanged(e,n,r)}function OC(s,e,n){return qt(s).beforeAuthStateChanged(e,n)}const wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=1e3,kC=10;class ub extends cb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ib(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);fC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,kC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ub.type="LOCAL";const MC=ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends cb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hb.type="SESSION";const db=hb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Kh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(h).map(async v=>v(n.origin,c)),p=await zC(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((g,p)=>{const v=kg("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(S.data.response);break;default:clearTimeout(b),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function LC(s){Ci().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function BC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FC(){return navigator?.serviceWorker?.controller||null}function UC(){return fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firebaseLocalStorageDb",GC=1,Rh="firebaseLocalStorage",gb="fbase_key";class ic{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xh(s,e){return s.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function HC(){const s=indexedDB.deleteDatabase(mb);return new ic(s).toPromise()}function Um(){const s=indexedDB.open(mb,GC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Rh,{keyPath:gb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Rh)?e(r):(r.close(),await HC(),e(await Um()))})})}async function V1(s,e,n){const r=Xh(s,!0).put({[gb]:e,value:n});return new ic(r).toPromise()}async function $C(s,e){const n=Xh(s,!1).get(e),r=await new ic(n).toPromise();return r===void 0?null:r.value}function L1(s,e){const n=Xh(s,!0).delete(e);return new ic(n).toPromise()}const qC=800,WC=3;class pb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>WC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kh._getInstance(UC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await BC(),!this.activeServiceWorker)return;this.sender=new VC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await V1(e,wh,"1"),await L1(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>V1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$C(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Xh(o,!1).getAll();return new ic(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pb.type="LOCAL";const KC=pb;new tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(s,e){return e?Ji(e):(ve(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends ab{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QC(s){return NC(s.auth,new Mg(s),s.bypassAuthState)}function YC(s){const{auth:e,user:n}=s;return ve(n,e,"internal-error"),DC(n,new Mg(s),s.bypassAuthState)}async function ZC(s){const{auth:e,user:n}=s;return ve(n,e,"internal-error"),IC(n,new Mg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QC;case"linkViaPopup":case"linkViaRedirect":return ZC;case"reauthViaPopup":case"reauthViaRedirect":return YC;default:rr(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new tc(2e3,1e4);class Ya extends yb{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JC.get())};e()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="pendingRedirect",sh=new Map;class tI extends yb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const r=await nI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nI(s,e){const n=sI(e),r=rI(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function iI(s,e){sh.set(s._key(),e)}function rI(s){return Ji(s._redirectPersistence)}function sI(s){return rh(eI,s.config.apiKey,s.name)}async function aI(s,e,n=!1){if(Kn(s.app))return Promise.reject(Hs(s));const r=Og(s),o=XC(r,e),h=await new tI(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=600*1e3;class lI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!vb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ri(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oI&&this.cachedEventUids.clear(),this.cachedEventUids.has(B1(e))}saveEventToCache(e){this.cachedEventUids.add(B1(e)),this.lastProcessedEventTime=Date.now()}}function B1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function vb({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function cI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(s,e={}){return vo(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dI=/^https?/;async function fI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await uI(s);for(const n of e)try{if(mI(n))return}catch{}rr(s,"unauthorized-domain")}function mI(s){const e=Bm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!dI.test(n))return!1;if(hI.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new tc(3e4,6e4);function F1(){const s=Ci().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function pI(s){return new Promise((e,n)=>{function r(){F1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F1(),n(Ri(s,"network-request-failed"))},timeout:gI.get()})}if(Ci().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ci().gapi?.load)r();else{const o=TC("iframefcb");return Ci()[o]=()=>{gapi.load?r():n(Ri(s,"network-request-failed"))},xC(`${bC()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw ah=null,e})}let ah=null;function yI(s){return ah=ah||pI(s),ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new tc(5e3,15e3),_I="__/auth/iframe",xI="emulator/auth/iframe",bI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SI(s){const e=s.config;ve(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Ig(e,xI):`https://${s.config.authDomain}/${_I}`,r={apiKey:e.apiKey,appName:s.name,v:ho},o=TI.get(s.config.apiHost);o&&(r.eid=o);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Kl(r).slice(1)}`}async function EI(s){const e=await yI(s),n=Ci().gapi;return ve(n,s,"internal-error"),e.open({where:document.body,url:SI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bI,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Ri(s,"network-request-failed"),g=Ci().setTimeout(()=>{c(h)},vI.get());function p(){Ci().clearTimeout(g),o(r)}r.ping(p).then(p,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wI=500,RI=600,CI="_blank",II="http://localhost";class U1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DI(s,e,n,r=wI,o=RI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const p={...AI,width:r.toString(),height:o.toString(),top:c,left:h},v=Yt().toLowerCase();n&&(g=Zx(v)?CI:n),Qx(v)&&(e=e||II,p.scrollbars="yes");const b=Object.entries(p).reduce((S,[A,z])=>`${S}${A}=${z},`,"");if(dC(v)&&g!=="_self")return NI(e||"",g),new U1(null);const T=window.open(e||"",g,b);ve(T,s,"popup-blocked");try{T.focus()}catch{}return new U1(T)}function NI(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="__/auth/handler",OI="emulator/auth/handler",PI=encodeURIComponent("fac");async function G1(s,e,n,r,o,c){ve(s.config.authDomain,s,"auth-domain-config-required"),ve(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:ho,eventId:o};if(e instanceof ob){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",oA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,T]of Object.entries({}))h[b]=T}if(e instanceof nc){const b=e.getScopes().filter(T=>T!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const p=await s._getAppCheckToken(),v=p?`#${PI}=${encodeURIComponent(p)}`:"";return`${kI(s)}?${Kl(g).slice(1)}${v}`}function kI({config:s}){return s.emulator?Ig(s,OI):`https://${s.authDomain}/${jI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class MI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=db,this._completeRedirectFn=aI,this._overrideRedirectResult=iI}async _openPopup(e,n,r,o){sr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await G1(e,n,r,Bm(),o);return DI(e,c,kg())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await G1(e,n,r,Bm(),o);return LC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(sr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await EI(e),r=new lI(e);return n.register("authEvent",o=>(ve(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},o=>{const c=o?.[0]?.[fm];c!==void 0&&n(!!c),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ib()||Yx()||jg()}}const zI=MI;var H1="@firebase/auth",$1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BI(s){qs(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=r.options;ve(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rb(s)},v=new vC(r,o,c,p);return EC(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qs(new ts("auth-internal",e=>{const n=Og(e.getProvider("auth").getImmediate());return(r=>new VI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(H1,$1,LI(s)),bi(H1,$1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=300,UI=s_("authIdTokenMaxAge")||FI;let q1=null;const GI=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UI)return;const o=n?.token;q1!==o&&(q1=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function HI(s=Xm()){const e=Ih(s,"auth");if(e.isInitialized())return e.getImmediate();const n=SC(s,{popupRedirectResolver:zI,persistence:[KC,MC,db]}),r=s_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=GI(c.toString());OC(n,h,()=>h(n.currentUser)),jC(n,g=>h(g))}}const o=n_("auth");return o&&AC(n,`http://${o}`),n}function $I(){return document.getElementsByTagName("head")?.[0]??document}_C({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const c=Ri("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",$I().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BI("Browser");const qI={apiKey:"AIzaSyCebVxfa6FmlE8Kuyey_0P1LMCquacjez0",authDomain:"nhl-savant.firebaseapp.com",projectId:"nhl-savant",storageBucket:"nhl-savant.firebasestorage.app",messagingSenderId:"801983550873",appId:"1:801983550873:web:79681f2fff98afb9f7af08"},zg=l_(qI),Xa=_R(zg);qR(zg);HI(zg);class WI{async saveBet(e,n,r){const o=e.date||new Date().toISOString().split("T")[0],c=`${o}_${e.awayTeam}_${e.homeTeam}_${n.market}_${n.pick.replace(/\s+/g,"_")}`,h={id:c,date:o,timestamp:Date.now(),game:{awayTeam:e.awayTeam,homeTeam:e.homeTeam,gameTime:e.gameTime,actualStartTime:e.startTimestamp||null},bet:{market:n.market,pick:n.pick,line:n.line||null,odds:n.odds,team:n.team||null,side:this.extractSide(n)},prediction:{awayScore:r.awayScore,homeScore:r.homeScore,totalScore:r.totalScore,awayWinProb:r.awayWinProb,homeWinProb:r.homeWinProb,modelProb:n.modelProb,marketProb:this.calculateMarketProb(n.odds),evPercent:n.evPercent,ev:n.ev,kelly:n.kelly,rating:n.rating||this.getRating(n.evPercent),confidence:n.tier||this.getTier(n.evPercent)},goalies:{away:e.goalies?.away||null,home:e.goalies?.home||null},result:{awayScore:null,homeScore:null,totalScore:null,winner:null,outcome:null,profit:null,actualProfit:null,fetched:!1,fetchedAt:null,source:null},status:"PENDING",recommended:!0,tracked:!0,modelVersion:"v2.1-consultant-fix",notes:""};try{return await kR(T1(Xa,"bets",c),h),console.log(`✅ Saved bet: ${c}`),c}catch(g){throw console.error("❌ Error saving bet:",g),g}}async updateBetResult(e,n,r){const o=T1(Xa,"bets",e),c=this.calculateOutcome(n,r.bet),h=this.calculateProfit(c,r.bet.odds);await MR(o,{"result.awayScore":n.awayScore,"result.homeScore":n.homeScore,"result.totalScore":n.awayScore+n.homeScore,"result.winner":n.awayScore>n.homeScore?"AWAY":"HOME","result.outcome":c,"result.profit":h,"result.fetched":!0,"result.fetchedAt":Date.now(),"result.source":n.source||"API",status:"COMPLETED"}),console.log(`✅ Updated bet result: ${e} → ${c} (${h} units)`)}async getPendingBets(){const e=Zu(Yu(Xa,"bets"),Ju("status","==","PENDING"),eh("timestamp","desc"));return(await nh(e)).docs.map(r=>({id:r.id,...r.data()}))}async getBetsByDate(e){const n=Zu(Yu(Xa,"bets"),Ju("date","==",e),eh("timestamp","desc"));return(await nh(n)).docs.map(o=>({id:o.id,...o.data()}))}async getCompletedBets(){const e=Zu(Yu(Xa,"bets"),Ju("status","==","COMPLETED"),eh("timestamp","desc"));return(await nh(e)).docs.map(r=>({id:r.id,...r.data()}))}calculateOutcome(e,n){switch(n.market){case"TOTAL":return n.side==="OVER"?e.totalScore>n.line?"WIN":e.totalScore<n.line?"LOSS":"PUSH":e.totalScore<n.line?"WIN":e.totalScore>n.line?"LOSS":"PUSH";case"MONEYLINE":return n.side==="HOME"?e.winner==="HOME"?"WIN":"LOSS":e.winner==="AWAY"?"WIN":"LOSS";case"PUCK_LINE":case"PUCKLINE":const r=n.line||1.5;if(n.side==="HOME"){const c=e.homeScore-e.awayScore;return c>r?"WIN":c<r?"LOSS":"PUSH"}else{const c=e.awayScore-e.homeScore;return c>r?"WIN":c<r?"LOSS":"PUSH"}case"TEAM_TOTAL":const o=n.team===n.game?.homeTeam?e.homeScore:e.awayScore;return n.side==="OVER"?o>n.line?"WIN":o<n.line?"LOSS":"PUSH":o<n.line?"WIN":o>n.line?"LOSS":"PUSH";default:return null}}calculateProfit(e,n){return e==="PUSH"?0:e==="LOSS"?-1:n<0?100/Math.abs(n):n/100}extractSide(e){const n=e.pick.toUpperCase();return e.market==="TOTAL"?n.includes("OVER")?"OVER":"UNDER":e.market==="MONEYLINE"||e.market==="PUCK_LINE"||e.market==="PUCKLINE"?n.includes("(HOME)")?"HOME":"AWAY":e.market==="TEAM_TOTAL"?n.includes("OVER")?"OVER":"UNDER":null}calculateMarketProb(e){return e<0?Math.abs(e)/(Math.abs(e)+100):100/(e+100)}getRating(e){return e>=10?"A+":e>=7?"A":e>=5?"B+":e>=3?"B":"C"}getTier(e){return e>=10?"ELITE":e>=7?"EXCELLENT":e>=5?"STRONG":e>=3?"GOOD":"VALUE"}}function KI(s,e){const n=de.useRef(new WI),r=de.useRef(new Set);de.useEffect(()=>{if(!s||s.length===0)return;const c=s.filter(h=>{const g=o(h);return g&&g.evPercent>0});console.log(`📊 Found ${c.length} betting opportunities to track`),c.forEach(async h=>{const g=o(h),p=`${h.date}_${h.awayTeam}_${h.homeTeam}`;if(!r.current.has(p))try{await n.current.saveBet(h,g,{awayScore:h.edges.total?.awayScore||0,homeScore:h.edges.total?.homeScore||0,totalScore:h.edges.total?.predictedTotal||0,awayWinProb:h.edges.moneyline?.away?.modelProb||.5,homeWinProb:h.edges.moneyline?.home?.modelProb||.5}),r.current.add(p)}catch(v){console.error(`Failed to save bet for ${p}:`,v)}})},[s]);function o(c){let h=null,g=0;return c.edges.moneyline?.away&&c.edges.moneyline.away.evPercent>g&&(g=c.edges.moneyline.away.evPercent,h={...c.edges.moneyline.away,market:"MONEYLINE",pick:`${c.awayTeam} (AWAY)`,team:c.awayTeam}),c.edges.moneyline?.home&&c.edges.moneyline.home.evPercent>g&&(g=c.edges.moneyline.home.evPercent,h={...c.edges.moneyline.home,market:"MONEYLINE",pick:`${c.homeTeam} (HOME)`,team:c.homeTeam}),c.edges.total?.over&&c.edges.total.over.evPercent>g&&(g=c.edges.total.over.evPercent,h={...c.edges.total.over,market:"TOTAL",pick:`OVER ${c.rawOdds.total?.line||c.edges.total.over.line}`,line:c.rawOdds.total?.line||c.edges.total.over.line}),c.edges.total?.under&&c.edges.total.under.evPercent>g&&(g=c.edges.total.under.evPercent,h={...c.edges.total.under,market:"TOTAL",pick:`UNDER ${c.rawOdds.total?.line||c.edges.total.under.line}`,line:c.rawOdds.total?.line||c.edges.total.under.line}),c.edges.puckLine?.away&&c.edges.puckLine.away.evPercent>g&&(g=c.edges.puckLine.away.evPercent,h={...c.edges.puckLine.away,market:"PUCK_LINE",pick:`${c.awayTeam} ${c.edges.puckLine.away.line>0?"+":""}${c.edges.puckLine.away.line}`,team:c.awayTeam}),c.edges.puckLine?.home&&c.edges.puckLine.home.evPercent>g&&(g=c.edges.puckLine.home.evPercent,h={...c.edges.puckLine.home,market:"PUCK_LINE",pick:`${c.homeTeam} ${c.edges.puckLine.home.line>0?"+":""}${c.edges.puckLine.home.line}`,team:c.homeTeam}),Array.isArray(c.edges.teamTotals)&&c.edges.teamTotals.forEach(p=>{p&&p.evPercent>g&&(g=p.evPercent,h={...p,market:"TEAM_TOTAL",pick:p.pick||`${p.team} ${p.side} ${p.line}`})}),h}return n.current}const XI=({game:s,bestEdge:e,factors:n,isMobile:r})=>{if(!e||!n||n.length===0)return null;const c=(()=>{const h=n.slice(0,3),{awayTeam:g,homeTeam:p}=s,v=e.type||e.market,b=e.pick||e.displayPick,T={away:0,home:0};h.forEach(M=>{M.awayMetric&&M.homeMetric&&(M.awayMetric.value>M.homeMetric.value?T.away++:T.home++)});const S=T.away>T.home?g:p,A=S===g?p:g;let z="";if(v==="TOTAL"||v==="total"){const M=b.includes("UNDER")||b.includes("U "),B=s.edges.total?.predictedTotal||0,te=s.edges.total?.marketTotal||0,$=Math.abs(B-te);M?(h.filter(ne=>ne.name.includes("Against")||ne.name.includes("Defense")||ne.name.includes("Save")).length>=2?z=`Both teams show strong defensive metrics. ${S} ranks in the top third for preventing high-danger chances, while ${A}'s recent games have trended under. `:z=`Defensive matchup favors a lower-scoring game. ${S}'s ability to limit quality chances combined with ${A}'s offensive struggles create conditions for an UNDER. `,z+=`Our model projects ${B.toFixed(1)} total goals; market has ${te.toFixed(1)}. Edge: ${$.toFixed(1)} goals.`):(h.filter(ne=>ne.name.includes("For")||ne.name.includes("Offense")||ne.name.includes("Scoring")).length>=2?z=`High-octane offensive matchup. ${S} generates elite scoring chances, and ${A} allows them at an above-average rate. `:z=`Offensive conditions favor a high-scoring game. ${S}'s recent form shows increased scoring, while ${A}'s defense has struggled. `,z+=`Our model projects ${B.toFixed(1)} total goals; market has ${te.toFixed(1)}. Edge: ${$.toFixed(1)} goals.`)}else{const M=b.includes(g)?g:p,B=M===g?p:g,te=(M===g?s.edges.moneyline?.away?.modelProb:s.edges.moneyline?.home?.modelProb)||0;if(z=`${M}'s advanced metrics show clear advantages in key areas. `,h.length>0){const $=h[0];z+=`Their ${$.name.toLowerCase()} ranks significantly better than ${B}, `}if(h.length>1){const $=h[1];z+=`and they also excel in ${$.name.toLowerCase()}. `}z+=`Our model gives ${M} a ${(te*100).toFixed(0)}% chance to win, creating value at current odds.`}return z})();return d.jsxs("div",{style:{padding:r?"1rem":"1.25rem",background:"rgba(212, 175, 55, 0.08)",border:we.flat.border,borderRadius:"10px",margin:r?"0.75rem":"1.25rem"},children:[d.jsx("div",{style:{fontSize:R.label.size,fontWeight:R.heading.weight,color:"var(--color-accent)",marginBottom:"0.625rem",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,display:"flex",alignItems:"center",gap:"0.5rem"},children:"📖 THE QUICK STORY"}),d.jsx("div",{style:{fontSize:R.body.size,lineHeight:"1.6",color:"var(--color-text-primary)",fontWeight:R.caption.weight},children:c})]})},QI=({awayTeam:s,homeTeam:e,gameTime:n,rating:r,awayWinProb:o,homeWinProb:c,isMobile:h})=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:h?ce.cardPadding:"1.25rem",borderBottom:we.flat.border,background:"rgba(26, 31, 46, 0.3)"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:h?"0.5rem":"0.75rem",flexWrap:"wrap",marginBottom:"0.25rem"},children:[d.jsxs("span",{style:{fontSize:h?R.heading.size:"1.25rem",fontWeight:R.heading.weight,color:"var(--color-text-primary)",letterSpacing:R.heading.letterSpacing},children:[s," ",d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"@"})," ",e]}),d.jsxs("span",{style:{fontSize:R.label.size,color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.375rem",fontWeight:R.label.weight},children:[d.jsx(Qa,{size:14}),n]})]}),o&&c&&d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",fontWeight:R.caption.weight,display:"flex",gap:"0.5rem"},children:[d.jsxs("span",{style:{color:o>c?"#10B981":"var(--color-text-muted)"},children:[s,": ",(o*100).toFixed(0),"%"]}),d.jsx("span",{children:"|"}),d.jsxs("span",{style:{color:c>o?"#10B981":"var(--color-text-muted)"},children:[e,": ",(c*100).toFixed(0),"%"]})]})]}),r>0&&d.jsx(SE,{evPercent:r,size:"small"})]}),YI=s=>s>0?100/(s+100):Math.abs(s)/(Math.abs(s)+100),Ur=s=>s>0?100/(s+100):Math.abs(s)/(Math.abs(s)+100),ZI=({modelProb:s,marketProb:e})=>d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[d.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Model"}),d.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#10B981"},children:[(s*100).toFixed(1),"%"]})]}),d.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"4px",overflow:"hidden"},children:d.jsx("div",{style:{width:`${s*100}%`,height:"100%",background:"#10B981",borderRadius:"4px",transition:"width 0.3s ease"}})})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[d.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Market"}),d.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--color-text-secondary)"},children:[(e*100).toFixed(1),"%"]})]}),d.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"4px",overflow:"hidden"},children:d.jsx("div",{style:{width:`${e*100}%`,height:"100%",background:"#64748B",borderRadius:"4px",transition:"width 0.3s ease"}})})]})]}),JI=({bestEdge:s,game:e,isMobile:n,factors:r})=>{if(!s)return null;const o=YI(s.odds),c=e.edges.total?.predictedTotal||0,h=e.edges.total?.marketTotal||0,g=c-h,p=EE(s.evPercent,s.modelProb),b=(()=>{if(!r||r.length===0)return[];const T=[];if(s.market==="TOTAL"){const A=s.pick.includes("OVER");r.forEach(z=>{(A&&z.impact>.05||!A&&z.impact<-.05)&&Math.abs(z.impact)>.05&&T.push(`${z.name}: ${Math.abs(z.impact).toFixed(2)} goal impact`)})}else{const A=s.team;r.forEach(z=>{const M=z.awayMetric?.value||0,B=z.homeMetric?.value||0,te=M>B?e.awayTeam:e.homeTeam,$=Math.abs(M-B)/((M+B)/2);if(te===A&&$>.1){const ee=($*100).toFixed(0);T.push(`${z.name}: ${A} has ${ee}% edge`)}})}return T.slice(0,3)})();return d.jsxs("div",{style:{background:Nt.hero,border:we.elevated.border,boxShadow:we.elevated.shadow,borderRadius:"12px",padding:n?ce.cardPadding:"1.5rem",margin:n?ce.sectionGap:"1.25rem",position:"relative",overflow:"hidden"},children:[s.evPercent>10&&d.jsx("div",{className:"shimmer-overlay"}),d.jsxs("div",{style:{fontSize:n?R.heading.size:"1.25rem",fontWeight:R.heading.weight,marginBottom:"1rem",color:"var(--color-text-primary)",position:"relative",zIndex:1,letterSpacing:R.heading.letterSpacing},children:["💰 BEST VALUE: ",s.pick]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:n?"1fr 1fr":"repeat(4, 1fr)",gap:"0.875rem",marginBottom:"1rem",position:"relative",zIndex:1},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:R.label.size,color:"var(--color-text-muted)",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,fontWeight:R.label.weight,marginBottom:"0.25rem"},children:"Our Edge"}),d.jsxs("div",{style:{fontSize:n?"1.125rem":R.hero.size,fontWeight:R.hero.weight,color:"#10B981",fontFeatureSettings:"'tnum'",lineHeight:R.hero.lineHeight},children:[g>0?"+":"",Math.abs(g).toFixed(1)]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)"},children:"goals"})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:R.label.size,color:"var(--color-text-muted)",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,fontWeight:R.label.weight,marginBottom:"0.25rem"},children:"Value"}),d.jsxs("div",{style:{fontSize:n?"1.125rem":R.hero.size,fontWeight:R.hero.weight,color:"#10B981",fontFeatureSettings:"'tnum'",lineHeight:R.hero.lineHeight},children:["+",s.evPercent.toFixed(1),"%"]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)"},children:"EV"})]}),!n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:R.label.size,color:"var(--color-text-muted)",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,fontWeight:R.label.weight,marginBottom:"0.25rem"},children:"Confidence"}),d.jsx("div",{style:{fontSize:R.subheading.size,fontWeight:R.subheading.weight,color:p.color,lineHeight:R.hero.lineHeight},children:p.level}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)"},children:"level"})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:R.label.size,color:"var(--color-text-muted)",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing,fontWeight:R.label.weight,marginBottom:"0.25rem"},children:"Odds"}),d.jsxs("div",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'",lineHeight:R.hero.lineHeight},children:[s.odds>0?"+":"",s.odds]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)"},children:"line"})]})]})]}),d.jsx(ZI,{modelProb:s.modelProb,marketProb:o}),b.length>0&&d.jsxs("div",{style:{marginTop:"1rem",marginBottom:"0.75rem",padding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.1)",position:"relative",zIndex:1},children:[d.jsxs("div",{style:{fontSize:R.label.size,color:"#10B981",fontWeight:R.heading.weight,marginBottom:"0.625rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("span",{style:{fontSize:"1rem"},children:"✓"}),"Why this is the best value:"]}),b.map((T,S)=>d.jsxs("div",{style:{fontSize:R.body.size,color:"var(--color-text-primary)",marginBottom:S<b.length-1?"0.5rem":0,paddingLeft:"1.25rem",position:"relative",lineHeight:"1.5"},children:[d.jsx("span",{style:{position:"absolute",left:0,color:"#10B981",fontSize:"1.25rem",fontWeight:"bold"},children:"•"}),T]},S))]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:R.body.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(16, 185, 129, 0.2)",position:"relative",zIndex:1,fontWeight:R.caption.weight},children:[n&&d.jsxs("span",{children:["Odds: ",s.odds>0?"+":"",s.odds]}),d.jsxs("span",{children:["Model: ",c.toFixed(1)]}),d.jsxs("span",{children:["Market: ",h.toFixed(1)]})]})]})},eD=({factors:s,totalImpact:e,awayTeam:n,homeTeam:r,isMobile:o,bestEdge:c})=>{if(!s||s.length===0)return null;const h=s.filter(b=>{const T=Math.abs(b.impact)>.05,S=b.awayMetric?.value||0,A=b.homeMetric?.value||0,z=S&&A&&Math.abs(S-A)/((S+A)/2)>.1,M=!c||c.market==="TOTAL"&&c.pick&&c.pick.includes("UNDER")&&b.impact<-.05||c.market==="TOTAL"&&c.pick&&c.pick.includes("OVER")&&b.impact>.05||c.market==="MONEYLINE";return T&&z&&M}).sort((b,T)=>Math.abs(T.impact)-Math.abs(b.impact)).slice(0,3);if(h.length===0)return d.jsxs("div",{style:{background:Nt.factors,border:we.raised.border,boxShadow:we.raised.shadow,borderRadius:ce.borderRadius,padding:o?ce.cardPadding:"1.5rem",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:R.body.size,color:"var(--color-text-muted)",marginBottom:"0.5rem"},children:"📊 KEY ADVANTAGES"}),d.jsx("div",{style:{fontSize:R.subheading.size,color:"var(--color-text-primary)",fontWeight:R.heading.weight},children:"Even Matchup"}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginTop:"0.5rem"},children:"No dominant statistical advantages detected. Both teams are closely matched in key metrics."})]});const g=c?.market==="TOTAL"?`Why ${c.pick} is our model's pick:`:c?.market==="MONEYLINE"?`Why ${c.team} ML is our model's pick:`:c?.market==="PUCK_LINE"?`Why ${c.pick} is our model's pick:`:"📊 KEY ADVANTAGES",p=h,v=h.length;return d.jsxs("div",{style:{background:Nt.factors,border:we.raised.border,boxShadow:we.raised.shadow,borderRadius:ce.borderRadius,overflow:"hidden"},children:[d.jsxs("div",{style:{padding:o?ce.innerPadding:"1rem",background:"rgba(0, 0, 0, 0.15)",borderBottom:we.flat.border},children:[d.jsx("h3",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,margin:0,marginBottom:"0.25rem",color:"var(--color-accent)",letterSpacing:R.heading.letterSpacing},children:g}),d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",fontWeight:R.caption.weight},children:[v," key factor",v!==1?"s":""," with significant impact"]})]}),d.jsx("div",{style:{padding:o?ce.innerPadding:"1rem"},children:p.map((b,T)=>{const S=b.awayMetric?.value||0,A=b.homeMetric?.value||0,M=(Math.abs(S-A)/((S+A)/2)*100).toFixed(0),B=S>A?n:r,te=S>A?"#0EA5E9":"#10B981",$=Math.abs(b.impact)<.03?"NEUTRAL":b.impact<0?"UNDER":"OVER",ee=$==="UNDER"?"#8B5CF6":$==="OVER"?"#F59E0B":"#6B7280",ne=c&&(c.market==="TOTAL"&&c.pick.includes("OVER")&&b.impact>.05||c.market==="TOTAL"&&c.pick.includes("UNDER")&&b.impact<-.05||c.market==="MONEYLINE"&&B===c.team),re=ne?"✓ SUPPORTS":"○ CONTEXT",ue=ne?"#10B981":"#6B7280";return d.jsxs("div",{style:{marginBottom:T<p.length-1?"1rem":"0",paddingBottom:T<p.length-1?"1rem":"0",borderBottom:T<p.length-1?we.flat.border:"none",background:"rgba(0, 0, 0, 0.1)",padding:"0.75rem",borderRadius:"8px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:R.label.weight},children:[b.stars===3?"🔥":b.stars===2?"🎯":"⚡"," ",b.name]}),d.jsx("div",{style:{fontSize:R.caption.size,fontWeight:R.label.weight,color:ue,padding:"0.125rem 0.375rem",background:`${ue}15`,borderRadius:"4px"},children:re})]}),d.jsxs("div",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:te,marginBottom:"0.5rem",lineHeight:1.4},children:[B," has ",M,"% edge"]}),d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginBottom:"0.75rem",lineHeight:1.5},children:b.explanation}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)"},children:[n,": ",S.toFixed(2)," | ",r,": ",A.toFixed(2)]}),$!=="NEUTRAL"&&d.jsxs("div",{style:{padding:"0.25rem 0.5rem",background:`${ee}22`,border:`1px solid ${ee}`,borderRadius:"4px",fontSize:R.caption.size,fontWeight:R.label.weight,color:ee},children:["Favors ",$]})]})]},T)})}),d.jsxs("div",{style:{textAlign:"center",fontSize:R.subheading.size,fontWeight:R.heading.weight,padding:o?ce.innerPadding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%)",border:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:ce.borderRadius,color:"#10B981",fontFeatureSettings:"'tnum'",margin:o?ce.innerPadding:"1rem",marginTop:"1rem"},children:[d.jsx("div",{style:{fontSize:R.caption.size,fontWeight:R.caption.weight,color:"rgba(16, 185, 129, 0.8)",marginBottom:"0.25rem"},children:"TOTAL EDGE"}),$u.formatGoalImpact(e)," goals vs market"]})]})},tD=({game:s,bestEdge:e,awayTeam:n,homeTeam:r,isMobile:o,factors:c})=>{if(!s||!e)return null;const h=e.market==="TOTAL",g=h?"MONEYLINE":"TOTAL";let p=null,v="",b=null;if(h){const z=s.edges?.moneyline?.away,M=s.edges?.moneyline?.home;z&&M&&(p=z.evPercent>M.evPercent?z:M,v=z.evPercent>M.evPercent?`${n} ML`:`${r} ML`,b=z.evPercent>M.evPercent?n:r)}else{const z=s.edges?.total?.over,M=s.edges?.total?.under;if(z&&M){p=z.evPercent>M.evPercent?z:M;const B=s.rawOdds?.total?.line||z.line||M.line;v=z.evPercent>M.evPercent?`OVER ${B}`:`UNDER ${B}`}}if(!p||p.evPercent<=0)return null;const S=(()=>{if(!c||c.length===0)return[];const z=[];if(h)c.forEach(M=>{const B=M.awayMetric?.value||0,te=M.homeMetric?.value||0;if((B>te?n:r)===b&&Math.abs(B-te)/((B+te)/2)>.1){const ee=(Math.abs(B-te)/((B+te)/2)*100).toFixed(0);z.push(`${M.name}: ${b} has ${ee}% edge`)}});else{const M=v.includes("OVER");c.forEach(B=>{(M&&B.impact>.05||!M&&B.impact<-.05)&&Math.abs(B.impact)>.05&&z.push(`${B.name}: ${Math.abs(B.impact).toFixed(2)} goal impact`)})}return z.slice(0,2)})(),A=Z1(p.evPercent);return d.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:ce.borderRadius,padding:o?ce.innerPadding:"1rem",margin:o?`${ce.sectionGap} ${ce.cardPadding}`:"1.25rem",opacity:.9},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:R.label.weight,marginBottom:"0.25rem"},children:"💡 Alternative Opportunity"}),d.jsxs("div",{style:{fontSize:R.body.size,fontWeight:R.heading.weight,color:"var(--color-text-primary)"},children:[g,": ",v]})]}),d.jsxs("div",{style:{fontSize:R.subheading.size,fontWeight:R.heading.weight,color:A.color},children:["+",p.evPercent.toFixed(1),"%"]})]}),S.length>0&&d.jsxs("div",{style:{marginTop:"0.75rem",marginBottom:"0.5rem",padding:"0.5rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"6px",borderLeft:"3px solid rgba(212, 175, 55, 0.5)"},children:[d.jsx("div",{style:{fontSize:R.caption.size,color:"var(--color-accent)",fontWeight:R.label.weight,marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Why this bet:"}),S.map((z,M)=>d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",marginBottom:M<S.length-1?"0.25rem":0,paddingLeft:"0.5rem",position:"relative"},children:[d.jsx("span",{style:{position:"absolute",left:0,color:"var(--color-accent)"},children:"•"}),z]},M))]}),d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)"},children:["Odds: ",p.odds>0?"+":"",p.odds," • Model Prob: ",(p.modelProb*100).toFixed(1),"%"]})]})},Gr=({team:s,odds:e,ev:n,isPositive:r,isBestBet:o,modelProb:c,impliedProb:h})=>{const[g,p]=de.useState(!1),v=Z1(n),b=c&&h?(c-h)*100:null;return d.jsxs("div",{onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),style:{padding:"0.75rem",marginBottom:"0.5rem",background:o?v.bg:g?"rgba(100, 116, 139, 0.08)":"transparent",border:o?`2px solid ${v.color}40`:we.flat.border,borderRadius:"8px",transition:Qn.normal,transform:g?"translateX(4px)":"translateX(0)",cursor:"pointer",boxShadow:o&&g?`0 4px 12px ${v.color}30`:"none"},role:"button",tabIndex:0,"aria-label":`${s} ${e>0?"+":""}${e}, EV ${n.toFixed(1)}%`,onKeyPress:T=>T.key==="Enter"&&console.log("Market selected:",s),children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.375rem"},children:[d.jsx("span",{style:{fontSize:R.body.size,fontWeight:R.body.weight,color:"var(--color-text-primary)"},children:s}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[d.jsxs("span",{style:{fontSize:R.body.size,fontWeight:R.body.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'"},children:[e>0?"+":"",e]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",minWidth:"70px"},children:[d.jsxs("span",{style:{fontSize:R.label.size,fontWeight:R.heading.weight,color:v.color,fontFeatureSettings:"'tnum'"},children:[r?"+":"",n.toFixed(1),"%"]}),o&&d.jsx("span",{style:{fontSize:R.caption.size,color:v.color,fontWeight:R.body.weight},children:v.label})]}),o&&d.jsx("span",{style:{fontSize:"1.125rem",color:v.color},children:"✓"})]})]}),(g||o)&&c&&h&&d.jsxs("div",{style:{fontSize:R.caption.size,color:"var(--color-text-muted)",display:"flex",justifyContent:"space-between",paddingTop:"0.375rem",borderTop:"1px solid rgba(100, 116, 139, 0.15)"},children:[d.jsxs("span",{children:["Book: ",(h*100).toFixed(0),"%"]}),d.jsxs("span",{children:["Model: ",(c*100).toFixed(0),"%"]}),b!==null&&d.jsxs("span",{style:{color:b>0?v.color:"var(--color-text-muted)"},children:["(",b>0?"+":"",b.toFixed(1),"pts)"]})]})]})},nD=({game:s,isMobile:e})=>{if(!s.edges)return null;const n=Math.max(s.edges.moneyline?.away?.evPercent||0,s.edges.moneyline?.home?.evPercent||0,s.edges.total?.over?.evPercent||0,s.edges.total?.under?.evPercent||0);return e?d.jsxs("div",{style:{overflowX:"auto",scrollSnapType:"x mandatory",display:"flex",gap:ce.sectionGap,padding:ce.cardPadding,borderTop:we.flat.border,scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"hide-scrollbar",children:[s.edges.moneyline&&d.jsxs("div",{style:{background:Nt.moneyline,border:we.raised.border,boxShadow:we.raised.shadow,borderRadius:ce.borderRadius,padding:ce.innerPadding,minWidth:"85%",scrollSnapAlign:"center",flex:"0 0 auto"},children:[d.jsx("div",{style:{fontSize:R.label.size,fontWeight:R.heading.weight,marginBottom:"0.75rem",color:"rgba(59, 130, 246, 0.95)",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:"⚡ MONEYLINE"}),d.jsx(Gr,{team:s.awayTeam,odds:s.edges.moneyline.away.odds,ev:s.edges.moneyline.away.evPercent,isPositive:s.edges.moneyline.away.evPercent>0,isBestBet:s.edges.moneyline.away.evPercent===n&&s.edges.moneyline.away.evPercent>5,modelProb:s.edges.moneyline.away.modelProb,impliedProb:Ur(s.edges.moneyline.away.odds)}),d.jsx(Gr,{team:s.homeTeam,odds:s.edges.moneyline.home.odds,ev:s.edges.moneyline.home.evPercent,isPositive:s.edges.moneyline.home.evPercent>0,isBestBet:s.edges.moneyline.home.evPercent===n&&s.edges.moneyline.home.evPercent>5,modelProb:s.edges.moneyline.home.modelProb,impliedProb:Ur(s.edges.moneyline.home.odds)})]}),s.edges.total&&s.rawOdds?.total?.line&&d.jsxs("div",{style:{background:Nt.total,border:we.raised.border,boxShadow:we.raised.shadow,borderRadius:ce.borderRadius,padding:ce.innerPadding,minWidth:"85%",scrollSnapAlign:"center",flex:"0 0 auto"},children:[d.jsx("div",{style:{fontSize:R.label.size,fontWeight:R.heading.weight,marginBottom:"0.75rem",color:"rgba(168, 85, 247, 0.95)",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:"🎯 TOTAL"}),d.jsx(Gr,{team:`O ${s.rawOdds.total.line}`,odds:s.edges.total.over.odds,ev:s.edges.total.over.evPercent,isPositive:s.edges.total.over.evPercent>0,isBestBet:s.edges.total.over.evPercent===n&&s.edges.total.over.evPercent>5,modelProb:s.edges.total.over.modelProb,impliedProb:Ur(s.edges.total.over.odds)}),d.jsx(Gr,{team:`U ${s.rawOdds.total.line}`,odds:s.edges.total.under.odds,ev:s.edges.total.under.evPercent,isPositive:s.edges.total.under.evPercent>0,isBestBet:s.edges.total.under.evPercent===n&&s.edges.total.under.evPercent>5,modelProb:s.edges.total.under.modelProb,impliedProb:Ur(s.edges.total.under.odds)})]})]}):d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.25rem",padding:"1.25rem",borderTop:we.flat.border},children:[s.edges.moneyline&&d.jsxs("div",{style:{background:Nt.moneyline,border:we.raised.border,boxShadow:we.raised.shadow,borderRadius:"10px",padding:"1.25rem"},children:[d.jsx("div",{style:{fontSize:R.label.size,fontWeight:R.heading.weight,marginBottom:"0.875rem",color:"rgba(59, 130, 246, 0.95)",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:"⚡ MONEYLINE"}),d.jsx(Gr,{team:s.awayTeam,odds:s.edges.moneyline.away.odds,ev:s.edges.moneyline.away.evPercent,isPositive:s.edges.moneyline.away.evPercent>0,isBestBet:s.edges.moneyline.away.evPercent===n&&s.edges.moneyline.away.evPercent>5,modelProb:s.edges.moneyline.away.modelProb,impliedProb:Ur(s.edges.moneyline.away.odds)}),d.jsx(Gr,{team:s.homeTeam,odds:s.edges.moneyline.home.odds,ev:s.edges.moneyline.home.evPercent,isPositive:s.edges.moneyline.home.evPercent>0,isBestBet:s.edges.moneyline.home.evPercent===n&&s.edges.moneyline.home.evPercent>5,modelProb:s.edges.moneyline.home.modelProb,impliedProb:Ur(s.edges.moneyline.home.odds)})]}),s.edges.total&&s.rawOdds?.total?.line&&d.jsxs("div",{style:{background:Nt.total,border:we.raised.border,boxShadow:we.raised.shadow,borderRadius:"10px",padding:"1.25rem"},children:[d.jsx("div",{style:{fontSize:R.label.size,fontWeight:R.heading.weight,marginBottom:"0.875rem",color:"rgba(168, 85, 247, 0.95)",textTransform:R.label.textTransform,letterSpacing:R.label.letterSpacing},children:"🎯 TOTAL"}),d.jsx(Gr,{team:`O ${s.rawOdds.total.line}`,odds:s.edges.total.over.odds,ev:s.edges.total.over.evPercent,isPositive:s.edges.total.over.evPercent>0,isBestBet:s.edges.total.over.evPercent===n&&s.edges.total.over.evPercent>5,modelProb:s.edges.total.over.modelProb,impliedProb:Ur(s.edges.total.over.odds)}),d.jsx(Gr,{team:`U ${s.rawOdds.total.line}`,odds:s.edges.total.under.odds,ev:s.edges.total.under.evPercent,isPositive:s.edges.total.under.evPercent>0,isBestBet:s.edges.total.under.evPercent===n&&s.edges.total.under.evPercent>5,modelProb:s.edges.total.under.modelProb,impliedProb:Ur(s.edges.total.under.odds)})]})]})},iD=({dataProcessor:s,oddsData:e,startingGoalies:n,goalieData:r,statsAnalyzer:o,edgeFactorCalc:c})=>{const[h,g]=de.useState(null),[p,v]=de.useState([]),[b,T]=de.useState([]),[S,A]=de.useState(!1),[z,M]=de.useState(null),[B,te]=de.useState(null);KI(p),de.useEffect(()=>{if(r&&Array.isArray(r)&&r.length>0){console.log(`🥅 Initializing GoalieProcessor with ${r.length} goalie records`);const I=new pS(r);te(I)}},[r]),de.useEffect(()=>{const I=()=>{A(window.innerWidth<=640)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),de.useEffect(()=>{if(s&&e){const I=new dE(s,e,n);g(I);const C=I.calculateAllEdges();v(C),ME(C);const D=I.getTopEdges(0);T(D)}},[s,e,n]);const $=I=>{if(!n||!n.games)return null;const C=n.games.find(V=>V.away?.team===I||V.home?.team===I);if(!C)return null;const N=C.away?.team===I?C.away:C.home;if(!N||!N.goalie||!N.confirmed)return null;const P=B?B.getGoalieStats(N.goalie,I):null;return{name:N.goalie,team:I,confirmed:!0,...P||{}}},ne=(()=>{const I=p.filter(D=>{let N=!1;return(D.edges.moneyline?.away?.evPercent>0||D.edges.moneyline?.home?.evPercent>0)&&(N=!0),(D.edges.total?.over?.evPercent>0||D.edges.total?.under?.evPercent>0)&&(N=!0),N}),C=I.filter(D=>{let N=0;return D.edges.moneyline&&(D.edges.moneyline.away?.evPercent>N&&(N=D.edges.moneyline.away.evPercent),D.edges.moneyline.home?.evPercent>N&&(N=D.edges.moneyline.home.evPercent)),D.edges.total&&(D.edges.total.over?.evPercent>N&&(N=D.edges.total.over.evPercent),D.edges.total.under?.evPercent>N&&(N=D.edges.total.under.evPercent)),N>5}).length;return{total:I.length,highValue:C}})(),re=I=>{const C=`game-${I.replace(/\s/g,"-")}`,D=document.getElementById(C);D&&D.scrollIntoView({behavior:"smooth",block:"center"})},ue=(I,C)=>{if(!o||!c)return null;try{const D=C?.market||"TOTAL",N=c.getKeyFactors(I.awayTeam,I.homeTeam,D),P=c.generateStory(N,I.awayTeam,I.homeTeam),V=c.calculateTotalImpact(N),j=o.getDangerZoneBreakdown(I.awayTeam),Fe=o.getDangerZoneBreakdown(I.homeTeam),ct=j&&Fe?$u.generateDangerZoneHeatmap(j,Fe):null,X=o.getReboundMetrics(I.awayTeam),se=o.getReboundMetrics(I.homeTeam),ge=X&&se?$u.generateReboundTable(X,se):null,Oe=o.getPhysicalMetrics(I.awayTeam),Me=o.getPhysicalMetrics(I.homeTeam),gt=Oe&&Me?$u.generatePhysicalMetrics(Oe,Me):null,Ge=o.getPossessionMetrics(I.awayTeam),Re=o.getPossessionMetrics(I.homeTeam),Je=Ge&&Re?{away:Ge,home:Re}:null,zt=o.getRegressionIndicators(I.awayTeam),Zt=o.getRegressionIndicators(I.homeTeam);return{factors:N,story:P,totalImpact:V,dangerZoneData:ct,reboundData:ge,physicalData:gt,possessionData:Je,regressionData:zt&&Zt?{away:zt,home:Zt}:null}}catch(D){return console.error("Error generating analytics data:",D),null}};return e?d.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:S?"1rem":"2rem 1rem"},className:"animate-fade-in",children:[d.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(59, 130, 246, 0.08) 100%)",backdropFilter:"blur(12px)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"16px",padding:S?"1.5rem":"2rem",marginBottom:"2rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{className:"shine-overlay"}),d.jsxs("div",{style:{display:"flex",flexDirection:S?"column":"row",justifyContent:"space-between",alignItems:"flex-start",gap:S?"1.5rem":"2rem",position:"relative",zIndex:1},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[d.jsx(Qa,{size:32,color:"var(--color-accent)"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-gradient",style:{fontSize:S?"1.75rem":"2.5rem",fontWeight:"800",marginBottom:"0.25rem",letterSpacing:"-0.02em",lineHeight:"1.1"},children:"Today's Games"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",fontWeight:"500"},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),d.jsx(fE,{}),n&&n.games&&d.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",borderRadius:"4px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",color:"#10B981",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.25rem"},children:["🥅 ",(()=>{let I=0,C=0;return n.games.forEach(D=>{D.away?.goalie&&D.away?.confirmed!==!1&&I++,D.home?.goalie&&D.home?.confirmed!==!1&&I++,C+=2}),`${I}/${C} Goalies`})()]}),n?.oddsLastUpdated&&d.jsxs("span",{style:{fontSize:"0.8rem",padding:"0.375rem 0.625rem",borderRadius:"6px",background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#60A5FA",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.375rem"},children:["📊 Odds: ",(()=>{const I=new Date(n.oddsLastUpdated),D=Math.floor((new Date-I)/(1e3*60));if(D<1)return"Just updated";if(D<60)return`Updated ${D}m ago`;const N=Math.floor(D/60);return N<24?`Updated ${N}h ago`:`Updated ${I.toLocaleTimeString()}`})()]})]})]})]}),!S&&d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"0.875rem",lineHeight:"1.6",maxWidth:"45rem",marginTop:"0.75rem"},children:"Institutional-grade analysis using advanced metrics to identify betting edges. Full mathematical transparency with score-adjusted xG, PDO regression, and probabilistic modeling."})]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexDirection:S?"row":"column",alignItems:S?"flex-start":"flex-end"},children:[d.jsx(mv,{icon:d.jsx(lh,{size:16}),value:ne.total,label:"Opportunities",color:"info"}),d.jsx(mv,{icon:d.jsx(er,{size:16}),value:ne.highValue,label:"High Value",color:"success",sparkle:!0})]})]}),p.length>0&&p[0].gameTime&&d.jsx(xE,{firstGameTime:p[0].gameTime})]}),d.jsx(bE,{allEdges:p,dataProcessor:s,onGameClick:re}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:S?"1.5rem":"2rem"},children:p.map((I,C)=>{const D=b.filter(N=>N.game===I.game&&N.evPercent>0).sort((N,P)=>P.evPercent-N.evPercent)[0];return d.jsxs("div",{id:`game-${I.game.replace(/\s/g,"-")}`,className:"elevated-card game-card hover-lift",style:{animationDelay:`${C*.1}s`,position:"relative"},children:[d.jsx(QI,{awayTeam:I.awayTeam,homeTeam:I.homeTeam,gameTime:I.gameTime,rating:D?.evPercent||0,awayWinProb:I.edges.moneyline?.away?.modelProb,homeWinProb:I.edges.moneyline?.home?.modelProb,isMobile:S}),(()=>{const N=ue(I,D);return d.jsx(JI,{bestEdge:D,game:I,isMobile:S,factors:N?.factors||[]})})(),(()=>{const N=ue(I,D);return D&&N&&N.factors?d.jsx(XI,{game:I,bestEdge:D,factors:N.factors,isMobile:S}):null})(),(()=>{const N=ue(I,D);return N&&N.factors&&N.factors.length>0?d.jsx(eD,{factors:N.factors,totalImpact:N.totalImpact,awayTeam:I.awayTeam,homeTeam:I.homeTeam,isMobile:S,bestEdge:D}):null})(),(()=>{const N=ue(I,D);return d.jsx(tD,{game:I,bestEdge:D,awayTeam:I.awayTeam,homeTeam:I.homeTeam,isMobile:S,factors:N?.factors||[]})})(),d.jsx(nD,{game:I,isMobile:S}),(()=>{const N=ue(I,D);return N?d.jsx(IE,{awayTeam:I.awayTeam,homeTeam:I.homeTeam,dangerZoneData:N.dangerZoneData,reboundData:N.reboundData,physicalData:N.physicalData,possessionData:N.possessionData,regressionData:N.regressionData,awayGoalie:$(I.awayTeam),homeGoalie:$(I.homeTeam),isMobile:S,bestEdge:D,statsAnalyzer:o}):null})()]},C)})}),p.length===0&&d.jsxs("div",{className:"elevated-card",style:{textAlign:"center",padding:S?"2rem 1rem":"3rem"},children:[d.jsx(Qa,{size:48,color:"var(--color-text-muted)",style:{margin:"0 auto 1rem auto"}}),d.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Games Today"}),d.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Check back later for today's matchups and analysis."})]})]}):d.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:S?"1rem":"2rem 1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:S?"1rem":"2rem",borderBottom:"1px solid var(--color-border)",marginBottom:S?"1rem":"2rem"},children:[d.jsx(Qa,{size:S?24:32,color:"var(--color-accent)"}),d.jsxs("div",{children:[d.jsx("h1",{style:{marginBottom:"0.25rem"},children:"Today's Games"}),d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:S?"0.875rem":"0.938rem",margin:0},children:"In-depth analysis of today's matchups with advanced metrics"})]})]}),d.jsxs("div",{className:"elevated-card",style:{textAlign:"center",padding:S?"2rem 1rem":"3rem"},children:[d.jsx(Qa,{size:48,color:"var(--color-text-muted)",style:{margin:"0 auto 1rem auto"}}),d.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Games Available"}),d.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Add today's odds files to see game analysis and betting opportunities."})]})]})};function Gu({icon:s,label:e,value:n,target:r,status:o}){return d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[d.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(59, 130, 246, 0.15) 100%)"},children:s}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:e}),d.jsx("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)"},children:n})]})]}),r&&d.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",paddingTop:"0.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:["Target: ",r,o&&d.jsx("span",{style:{marginLeft:"0.5rem",color:o==="good"?"#10B981":"#F59E0B"},children:o==="good"?"✓":"○"})]})]})}function rD(){const[s,e]=de.useState(null),[n,r]=de.useState([]),[o,c]=de.useState(!0),[h,g]=de.useState({}),[p,v]=de.useState({});de.useEffect(()=>{b()},[]);async function b(){try{const T=Zu(Yu(Xa,"bets"),Ju("status","==","COMPLETED"),eh("timestamp","desc")),A=(await nh(T)).docs.map(ne=>({docId:ne.id,...ne.data()}));if(A.length===0){e({totalBets:0,wins:0,losses:0,pushes:0,winRate:0,roi:0,profit:0}),c(!1);return}const z=A.filter(ne=>ne.result?.outcome==="WIN").length,M=A.filter(ne=>ne.result?.outcome==="LOSS").length,B=A.filter(ne=>ne.result?.outcome==="PUSH").length,te=A.reduce((ne,re)=>ne+(re.result?.profit||0),0);e({totalBets:A.length,wins:z,losses:M,pushes:B,winRate:z+M>0?z/(z+M)*100:0,roi:A.length>0?te/A.length*100:0,profit:te});const $={};A.forEach(ne=>{const re=ne.bet?.market||"UNKNOWN";$[re]||($[re]={bets:0,wins:0,losses:0,profit:0}),$[re].bets++,ne.result?.outcome==="WIN"&&$[re].wins++,ne.result?.outcome==="LOSS"&&$[re].losses++,$[re].profit+=ne.result?.profit||0}),Object.keys($).forEach(ne=>{const re=$[ne];re.roi=re.bets>0?re.profit/re.bets*100:0,re.winRate=re.wins+re.losses>0?re.wins/(re.wins+re.losses)*100:0}),g($);const ee={};A.forEach(ne=>{const re=ne.prediction?.rating||"UNKNOWN";ee[re]||(ee[re]={bets:0,wins:0,losses:0,profit:0}),ee[re].bets++,ne.result?.outcome==="WIN"&&ee[re].wins++,ne.result?.outcome==="LOSS"&&ee[re].losses++,ee[re].profit+=ne.result?.profit||0}),Object.keys(ee).forEach(ne=>{const re=ee[ne];re.roi=re.bets>0?re.profit/re.bets*100:0,re.winRate=re.wins+re.losses>0?re.wins/(re.wins+re.losses)*100:0}),v(ee),r(A.slice(0,20)),c(!1)}catch(T){console.error("Error loading performance data:",T),c(!1)}}return o?d.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("div",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading performance data..."})]}):!s||s.totalBets===0?d.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"📊 No bet data yet"}),d.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Start tracking bets to see performance metrics"})]}):d.jsxs("div",{className:"performance-dashboard",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:"Model Performance"}),d.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Track betting results and validate model accuracy"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[d.jsx(Gu,{icon:d.jsx(Yi,{size:24,color:"#10B981"}),label:"Win Rate",value:`${s.winRate.toFixed(1)}%`,target:"52-58%",status:s.winRate>=52&&s.winRate<=58?"good":"warning"}),d.jsx(Gu,{icon:d.jsx(er,{size:24,color:"#3B82F6"}),label:"ROI",value:`${s.roi>0?"+":""}${s.roi.toFixed(1)}%`,target:"3-8%",status:s.roi>=3&&s.roi<=8?"good":"warning"}),d.jsx(Gu,{icon:d.jsx(HS,{size:24,color:"#D4AF37"}),label:"Total Profit",value:`${s.profit>0?"+":""}${s.profit.toFixed(2)}u`}),d.jsx(Gu,{icon:d.jsx(oh,{size:24,color:"#8B5CF6"}),label:"Bets Tracked",value:s.totalBets})]}),d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[d.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:"Record Breakdown"}),d.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Wins"}),d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10B981"},children:s.wins})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Losses"}),d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#EF4444"},children:s.losses})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Pushes"}),d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#64748B"},children:s.pushes})]})]})]}),Object.keys(h).length>0&&d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(lh,{size:20}),"Performance by Market"]}),d.jsx("div",{style:{overflowX:"auto"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Market"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Win Rate"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"ROI"}),d.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),d.jsx("tbody",{children:Object.entries(h).map(([T,S])=>d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[d.jsx("td",{style:{padding:"0.75rem",fontWeight:"500"},children:T}),d.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:S.bets}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:[S.winRate.toFixed(1),"%"]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:S.roi>0?"#10B981":"#EF4444"},children:[S.roi>0?"+":"",S.roi.toFixed(1),"%"]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:S.profit>0?"#10B981":"#EF4444"},children:[S.profit>0?"+":"",S.profit.toFixed(2),"u"]})]},T))})]})})]}),Object.keys(p).length>0&&d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Hm,{size:20}),"Performance by Rating"]}),d.jsx("div",{style:{overflowX:"auto"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Rating"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Win Rate"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"ROI"}),d.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),d.jsx("tbody",{children:Object.entries(p).sort((T,S)=>{const A={"A+":0,A:1,"B+":2,B:3,C:4};return(A[T[0]]||99)-(A[S[0]]||99)}).map(([T,S])=>d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[d.jsx("td",{style:{padding:"0.75rem",fontWeight:"600"},children:T}),d.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:S.bets}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:[S.winRate.toFixed(1),"%"]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:S.roi>0?"#10B981":"#EF4444"},children:[S.roi>0?"+":"",S.roi.toFixed(1),"%"]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:S.profit>0?"#10B981":"#EF4444"},children:[S.profit>0?"+":"",S.profit.toFixed(2),"u"]})]},T))})]})})]}),d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem"},children:[d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Qa,{size:20}),"Recent Bets"]}),d.jsx("div",{style:{overflowX:"auto"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Date"}),d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Game"}),d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bet"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Odds"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"EV%"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Rating"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Score"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Result"}),d.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),d.jsx("tbody",{children:n.map((T,S)=>d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[d.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:T.date}),d.jsxs("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:[T.game?.awayTeam," @ ",T.game?.homeTeam]}),d.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:T.bet?.pick}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[T.bet?.odds>0?"+":"",T.bet?.odds]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[T.prediction?.evPercent?.toFixed(1),"%"]}),d.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:d.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",background:T.prediction?.rating==="A+"?"rgba(16, 185, 129, 0.2)":T.prediction?.rating==="A"?"rgba(5, 150, 105, 0.2)":T.prediction?.rating==="B+"?"rgba(14, 165, 233, 0.2)":"rgba(139, 92, 246, 0.2)",color:T.prediction?.rating==="A+"?"#10B981":T.prediction?.rating==="A"?"#059669":T.prediction?.rating==="B+"?"#0EA5E9":"#8B5CF6"},children:T.prediction?.rating})}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[T.result?.awayScore," - ",T.result?.homeScore]}),d.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:d.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",background:T.result?.outcome==="WIN"?"rgba(16, 185, 129, 0.2)":T.result?.outcome==="LOSS"?"rgba(239, 68, 68, 0.2)":"rgba(100, 116, 139, 0.2)",color:T.result?.outcome==="WIN"?"#10B981":T.result?.outcome==="LOSS"?"#EF4444":"#64748B"},children:T.result?.outcome})}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:T.result?.profit>0?"#10B981":T.result?.profit<0?"#EF4444":"#64748B"},children:[T.result?.profit>0?"+":"",T.result?.profit?.toFixed(2),"u"]})]},S))})]})})]})]})}const sD=()=>{const[s,e]=de.useState(!1);return de.useEffect(()=>{const n=()=>{e(window.innerWidth<=640)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),d.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},children:[d.jsx("div",{style:{padding:s?"2rem 1rem 1rem":"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)"},children:d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[d.jsx("h1",{style:{marginBottom:"0.5rem",fontSize:s?"1.5rem":"2rem"},children:"📚 Methodology"}),d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:s?"0.875rem":"0.938rem",lineHeight:"1.6"},children:"Mathematical foundations and betting strategies behind NHL Savant analytics. All formulas are transparent, verifiable, and backed by real data."})]})}),d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:s?"1rem":"2rem"},children:[d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(Ou,{size:s?18:20}),"Expected Goals (xG) Analysis"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is xG?"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Expected Goals (xG) is a statistical metric that measures the quality of scoring chances. Each shot is assigned a probability of becoming a goal based on historical data, considering factors like shot location, type, and game situation."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Per-60 Normalization"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:"To compare teams fairly, we normalize all metrics to a 60-minute rate:"}),d.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:s?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.75rem":"1rem",color:"var(--color-accent)",overflowX:"auto"},children:"xG per 60 = (xGoals / Ice Time in seconds) × 3600"})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Why xG Matters for Betting"}),d.jsxs("ul",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.8",paddingLeft:s?"1.25rem":"1.5rem"},children:[d.jsx("li",{children:"Reveals true team quality beyond results influenced by luck"}),d.jsx("li",{children:"Identifies teams with strong underlying metrics but poor record (value bets)"}),d.jsx("li",{children:"Predicts future performance more accurately than goals scored"}),d.jsx("li",{children:"Situational xG (5v5, PP, PK) exposes specific strengths and weaknesses"})]})]})]}),d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(BS,{size:s?18:20}),"PDO & Regression Theory"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"PDO Calculation"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:'PDO measures "puck luck" by combining shooting percentage and save percentage:'}),d.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:s?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.75rem":"1rem",color:"var(--color-accent)",overflowX:"auto"},children:"PDO = (Goals For / Shots For) × 100 + (1 - Goals Against / Shots Against) × 100"})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Regression to the Mean"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Over time, PDO regresses toward 100.0 (league average). Teams with PDO significantly above or below 100 are experiencing unsustainable luck and will likely regress."})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Betting Applications"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:s?"0.75rem":"1rem"},children:[d.jsxs("div",{style:{padding:s?"0.875rem":"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:"4px"},children:[d.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--color-danger)",fontSize:s?"0.938rem":"1rem"},children:"PDO > 102"}),d.jsx("div",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:"Overperforming due to luck. Bet UNDER or AGAINST."})]}),d.jsxs("div",{style:{padding:s?"0.875rem":"1rem",backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--color-success)",borderRadius:"4px"},children:[d.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--color-success)",fontSize:s?"0.938rem":"1rem"},children:"PDO < 98"}),d.jsx("div",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:"Underperforming due to bad luck. Bet OVER or WITH."})]})]})]})]}),d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(Ou,{size:s?18:20}),"Expected Value (EV) Calculation"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is EV?"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Expected Value (EV) measures the average amount you can expect to win or lose per bet over the long term. A positive EV indicates a profitable bet over time, while negative EV indicates a losing bet."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Formula"}),d.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:s?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.75rem":"1rem",color:"var(--color-accent)",marginBottom:"1rem",overflowX:"auto"},children:"EV = (P_model × Total Return) - Stake"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Where P_model is your model's win probability, Total Return is your stake plus winnings, and Stake is your bet amount."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Example"}),d.jsxs("div",{className:"methodology-example",style:{backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.875rem":"1rem"},children:[d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:[d.jsx("strong",{children:"Scenario:"})," Our model gives Team A a 55% win probability, but the market odds are +150 (implied 40% probability)."]}),d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:[d.jsx("strong",{children:"Calculation:"})," On a $100 bet at +150 odds, total return is $250 ($100 stake + $150 winnings)."]}),d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:["EV = (0.55 × $250) - $100 = $137.50 - $100 = ",d.jsx("strong",{style:{color:"var(--color-success)"},children:"+$37.50"})]}),d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-success)",lineHeight:"1.6"},children:[d.jsx("strong",{children:"Result:"})," This is a +37.5% EV bet — excellent value!"]})]})]}),d.jsx("div",{style:{backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--color-success)",borderRadius:"4px",padding:s?"0.875rem":"1rem"},children:d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:[d.jsx("strong",{style:{color:"var(--color-success)"},children:"Betting Rule:"})," Only bet when EV > 0. The higher the EV percentage, the better the opportunity."]})})]}),d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(Ou,{size:s?18:20}),"Kelly Criterion (Stake Sizing)"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is Kelly?"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"The Kelly Criterion is a formula for determining the optimal bet size to maximize long-term growth while minimizing risk of ruin. It calculates what percentage of your bankroll to wager on a positive EV bet."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Formula"}),d.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:s?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.75rem":"1rem",color:"var(--color-accent)",marginBottom:"0.5rem",overflowX:"auto"},children:"f* = (bp - q) / b"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:"Where:"}),d.jsxs("ul",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",paddingLeft:s?"1.25rem":"1.5rem"},children:[d.jsxs("li",{children:[d.jsx("code",{children:"b"})," = decimal odds - 1 (e.g., +150 → 1.5)"]}),d.jsxs("li",{children:[d.jsx("code",{children:"p"})," = your model's win probability"]}),d.jsxs("li",{children:[d.jsx("code",{children:"q"})," = 1 - p (loss probability)"]})]})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Fractional Kelly (Recommended)"}),d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:["Full Kelly can be aggressive and lead to large swings. We recommend ",d.jsx("strong",{children:"25% Kelly"})," (Quarter Kelly) for more conservative, sustainable bankroll growth."]}),d.jsx("div",{className:"methodology-example",style:{backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.875rem":"1rem"},children:d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[d.jsx("strong",{children:"Example:"})," If Kelly suggests 8% of bankroll, we recommend betting 2% (8% × 0.25). On a $1,000 bankroll, that's $20 instead of $80."]})})]}),d.jsx("div",{style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:"4px",padding:s?"0.875rem":"1rem"},children:d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:[d.jsx("strong",{style:{color:"var(--color-danger)"},children:"Risk Management:"})," Never bet more than 5% of your bankroll on a single game, even if Kelly suggests higher. This protects against model errors and variance."]})})]}),d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(Ou,{size:s?18:20}),"Game Total Prediction Model"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"How We Predict Game Totals"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Our model uses score-adjusted expected goals (xG), applies PDO regression, and weights both teams' offense and defense (55% offense / 45% defense) to predict individual team scores and total goals."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Key Components"}),d.jsxs("ul",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",paddingLeft:s?"1.25rem":"1.5rem"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Score-Adjusted xG:"})," Removes bias from teams protecting leads or chasing deficits"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"PDO Regression:"})," Adjusts for unsustainable luck (high/low shooting % or save %)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"5v5 Weight:"})," 77% of game time (46.2 minutes)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"PP/PK Weight:"})," 23% of game time (13.8 minutes)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Home Ice:"})," +5% win probability boost"]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Win Probability"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"We use a logistic regression model that accounts for xG differential, PDO regression, and home-ice advantage to estimate moneyline win probabilities. This S-curve approach reflects real-world probabilities better than linear models."})]})]}),d.jsx("div",{style:{padding:s?"0.875rem":"1rem",backgroundColor:"rgba(212, 175, 55, 0.05)",border:"1px solid var(--color-accent)",borderRadius:"4px"},children:d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[d.jsx("strong",{style:{color:"var(--color-accent)"},children:"Verify the Math:"})," All calculations are performed in"," ",d.jsx("code",{style:{fontFamily:"Monaco, Consolas, monospace",backgroundColor:"var(--color-card)",padding:"0.125rem 0.25rem",borderRadius:"2px",fontSize:s?"0.75rem":"0.813rem"},children:"src/utils/dataProcessing.js"})," ","and"," ",d.jsx("code",{style:{fontFamily:"Monaco, Consolas, monospace",backgroundColor:"var(--color-card)",padding:"0.125rem 0.25rem",borderRadius:"2px",fontSize:s?"0.75rem":"0.813rem"},children:"src/utils/edgeCalculator.js"}),". ","Every metric displayed uses real CSV data with transparent, verifiable calculations. Audit them in the Data Inspector page."]})})]})]})},aD=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-nhl-gold mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Loading NHL Data"}),d.jsx("p",{className:"text-gray-400",children:"Processing advanced statistics..."})]})});class oD extends JT.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?d.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md text-center",children:[d.jsx(nE,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),d.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-gray-400 mb-4",children:"An unexpected error occurred. Please refresh the page."}),!1,d.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-yellow-400 text-gray-900 font-bold rounded hover:bg-yellow-300 transition",children:"Refresh Page"})]})}):this.props.children}}function lD(){const[s,e]=de.useState(null),[n,r]=de.useState(null),[o,c]=de.useState(null),[h,g]=de.useState(null),[p,v]=de.useState(null),[b,T]=de.useState(null),[S,A]=de.useState(null),[z,M]=de.useState(!0),[B,te]=de.useState(null);return de.useEffect(()=>{(async()=>{try{M(!0),console.log("📅 Loading schedule data for B2B adjustments...");let ee=null;try{const N=await fetch("/nhl-202526-asplayed.csv").then(P=>P.text());Gm.parse(N,{header:!0,skipEmptyLines:!0,complete:P=>{P.data&&P.data.length>0&&(ee=new yS(P.data),console.log(`✅ Loaded ${Object.keys(ee.gamesByTeam).length} teams into schedule helper`),A(ee))},error:P=>{console.warn("⚠️ Schedule file not found, B2B adjustments disabled:",P.message)}})}catch(N){console.warn("⚠️ Could not load schedule data:",N.message)}console.log("🏒 Loading team data...");const ne=await dS(ee);e(ne),console.log("🥅 Loading goalie stats from CSV...");const re=await mS();c(re),console.log("📊 Initializing advanced stats analyzer...");const ue=new _S(ne);v(ue),console.log("🎯 Initializing edge factor calculator...");const I=new xS(ue);T(I),te(null),console.log("💰 Loading odds data...");const C=await gS();if(C&&C.moneyText&&C.totalText){const N=W1(C.moneyText,C.totalText);C.todaysGames=vS(N),console.log(`📋 Extracted ${C.todaysGames.length} games for admin`)}console.log("🥅 Loading starting goalie selections...");const D=await fS();g(D),r(C),console.log("✅ All data loaded successfully")}catch(ee){console.error("Failed to load NHL data:",ee),te("Failed to load NHL data. Please check if teams.csv is available.")}finally{M(!1)}})()},[]),z?d.jsx(aD,{}):B?d.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Error Loading Data"}),d.jsx("p",{className:"text-gray-300 mb-6",children:B}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-yellow-400 text-gray-900 font-bold rounded hover:bg-yellow-300 transition",children:"Retry"})]})}):s?d.jsx(oD,{children:d.jsx(eS,{children:d.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"var(--color-background)"},children:[d.jsx(lE,{}),d.jsx("main",{children:d.jsxs(tS,{children:[d.jsx(El,{path:"/",element:d.jsx(iD,{dataProcessor:s,oddsData:n,startingGoalies:h,goalieData:o,statsAnalyzer:p,edgeFactorCalc:b})}),d.jsx(El,{path:"/dashboard",element:d.jsx(uE,{dataProcessor:s,loading:z,error:B})}),d.jsx(El,{path:"/methodology",element:d.jsx(sD,{})}),d.jsx(El,{path:"/inspector",element:d.jsx(hE,{dataProcessor:s})}),d.jsx(El,{path:"/performance",element:d.jsx(rD,{})})]})})]})})}):d.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:d.jsx("div",{className:"text-center",children:d.jsx("h1",{className:"text-2xl font-bold text-gray-300",children:"No Data Available"})})})}cS.createRoot(document.getElementById("root")).render(d.jsx(de.StrictMode,{children:d.jsx(lD,{})}));
