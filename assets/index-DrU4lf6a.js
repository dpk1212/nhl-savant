const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/spinTracker-BnSdwEot.js","assets/vendor-DTH4L_Dn.js","assets/utils-CpJM9g8Q.js","assets/charts-C6-kGR6E.js","assets/SplashScreen-hZdpTWp6.js"])))=>i.map(i=>d[i]);
import{a as U_,c as q_,g as Y_,r as O,b as K_,u as nj,L as vt,d as Xd,e as as,H as X_,f as Q_,h as _r}from"./vendor-DTH4L_Dn.js";import{r as Z_}from"./utils-CpJM9g8Q.js";import{R as ij,L as sj,C as oj,X as aj,Y as lj,T as cj,a as $l}from"./charts-C6-kGR6E.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var cp={exports:{}},jd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function J_(){if(wv)return jd;wv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var u in o)u!=="key"&&(l[u]=o[u])}else l=o;return o=l.ref,{$$typeof:r,type:i,key:c,ref:o!==void 0?o:null,props:l}}return jd.Fragment=e,jd.jsx=t,jd.jsxs=t,jd}var Tv;function e8(){return Tv||(Tv=1,cp.exports=J_()),cp.exports}var n=e8(),dp={exports:{}},Ad={},up={exports:{}},hp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function t8(){return jv||(jv=1,(function(r){function e(H,U){var K=H.length;H.push(U);e:for(;0<K;){var X=K-1>>>1,re=H[X];if(0<o(re,U))H[X]=U,H[K]=re,K=X;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var U=H[0],K=H.pop();if(K!==U){H[0]=K;e:for(var X=0,re=H.length,me=re>>>1;X<me;){var ke=2*(X+1)-1,te=H[ke],le=ke+1,ve=H[le];if(0>o(te,K))le<re&&0>o(ve,te)?(H[X]=ve,H[le]=K,X=le):(H[X]=te,H[ke]=K,X=ke);else if(le<re&&0>o(ve,K))H[X]=ve,H[le]=K,X=le;else break e}}return U}function o(H,U){var K=H.sortIndex-U.sortIndex;return K!==0?K:H.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var h=[],m=[],f=1,x=null,b=3,S=!1,w=!1,T=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function I(H){for(var U=t(m);U!==null;){if(U.callback===null)i(m);else if(U.startTime<=H)i(m),U.sortIndex=U.expirationTime,e(h,U);else break;U=t(m)}}function L(H){if(T=!1,I(H),!w)if(t(h)!==null)w=!0,M||(M=!0,V());else{var U=t(m);U!==null&&Q(L,U.startTime-H)}}var M=!1,R=-1,j=5,F=-1;function z(){return E?!0:!(r.unstable_now()-F<j)}function P(){if(E=!1,M){var H=r.unstable_now();F=H;var U=!0;try{e:{w=!1,T&&(T=!1,_(R),R=-1),S=!0;var K=b;try{t:{for(I(H),x=t(h);x!==null&&!(x.expirationTime>H&&z());){var X=x.callback;if(typeof X=="function"){x.callback=null,b=x.priorityLevel;var re=X(x.expirationTime<=H);if(H=r.unstable_now(),typeof re=="function"){x.callback=re,I(H),U=!0;break t}x===t(h)&&i(h),I(H)}else i(h);x=t(h)}if(x!==null)U=!0;else{var me=t(m);me!==null&&Q(L,me.startTime-H),U=!1}}break e}finally{x=null,b=K,S=!1}U=void 0}}finally{U?V():M=!1}}}var V;if(typeof B=="function")V=function(){B(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Z=N.port2;N.port1.onmessage=P,V=function(){Z.postMessage(null)}}else V=function(){A(P,0)};function Q(H,U){R=A(function(){H(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(H){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var K=b;b=U;try{return H()}finally{b=K}},r.unstable_requestPaint=function(){E=!0},r.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=b;b=H;try{return U()}finally{b=K}},r.unstable_scheduleCallback=function(H,U,K){var X=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,H){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=K+re,H={id:f++,callback:U,priorityLevel:H,startTime:K,expirationTime:re,sortIndex:-1},K>X?(H.sortIndex=K,e(m,H),t(h)===null&&H===t(m)&&(T?(_(R),R=-1):T=!0,Q(L,K-X))):(H.sortIndex=re,e(h,H),w||S||(w=!0,M||(M=!0,V()))),H},r.unstable_shouldYield=z,r.unstable_wrapCallback=function(H){var U=b;return function(){var K=b;b=U;try{return H.apply(this,arguments)}finally{b=K}}}})(hp)),hp}var Av;function r8(){return Av||(Av=1,up.exports=t8()),up.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function n8(){if(kv)return Ad;kv=1;var r=r8(),e=U_(),t=q_();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(l(s)!==s)throw Error(i(188))}function m(s){var a=s.alternate;if(!a){if(a=l(s),a===null)throw Error(i(188));return a!==s?null:s}for(var d=s,g=a;;){var y=d.return;if(y===null)break;var v=y.alternate;if(v===null){if(g=y.return,g!==null){d=g;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===d)return h(y),s;if(v===g)return h(y),a;v=v.sibling}throw Error(i(188))}if(d.return!==g.return)d=y,g=v;else{for(var C=!1,$=y.child;$;){if($===d){C=!0,d=y,g=v;break}if($===g){C=!0,g=y,d=v;break}$=$.sibling}if(!C){for($=v.child;$;){if($===d){C=!0,d=v,g=y;break}if($===g){C=!0,g=v,d=y;break}$=$.sibling}if(!C)throw Error(i(189))}}if(d.alternate!==g)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?s:a}function f(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=f(s),a!==null)return a;s=s.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),B=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function Z(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case M:return"SuspenseList";case F:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case B:return s.displayName||"Context";case _:return(s._context.displayName||"Context")+".Consumer";case I:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:Z(s.type)||"Memo";case j:a=s._payload,s=s._init;try{return Z(s(a))}catch{}}return null}var Q=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},X=[],re=-1;function me(s){return{current:s}}function ke(s){0>re||(s.current=X[re],X[re]=null,re--)}function te(s,a){re++,X[re]=s.current,s.current=a}var le=me(null),ve=me(null),xe=me(null),ue=me(null);function Re(s,a){switch(te(xe,a),te(ve,s),te(le,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?H2(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=H2(a),s=U2(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ke(le),te(le,s)}function Te(){ke(le),ke(ve),ke(xe)}function $e(s){s.memoizedState!==null&&te(ue,s);var a=le.current,d=U2(a,s.type);a!==d&&(te(ve,s),te(le,d))}function rt(s){ve.current===s&&(ke(le),ke(ve)),ue.current===s&&(ke(ue),vd._currentValue=K)}var Ke,et;function Tt(s){if(Ke===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);Ke=a&&a[1]||"",et=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ke+s+et}var Dt=!1;function Ce(s,a){if(!s||Dt)return"";Dt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(de){var ae=de}Reflect.construct(s,[],we)}else{try{we.call()}catch(de){ae=de}s.call(we.prototype)}}else{try{throw Error()}catch(de){ae=de}(we=s())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(de){if(de&&ae&&typeof de.stack=="string")return[de.stack,ae.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=g.DetermineComponentFrameRoot(),C=v[0],$=v[1];if(C&&$){var q=C.split(`
`),se=$.split(`
`);for(y=g=0;g<q.length&&!q[g].includes("DetermineComponentFrameRoot");)g++;for(;y<se.length&&!se[y].includes("DetermineComponentFrameRoot");)y++;if(g===q.length||y===se.length)for(g=q.length-1,y=se.length-1;1<=g&&0<=y&&q[g]!==se[y];)y--;for(;1<=g&&0<=y;g--,y--)if(q[g]!==se[y]){if(g!==1||y!==1)do if(g--,y--,0>y||q[g]!==se[y]){var ge=`
`+q[g].replace(" at new "," at ");return s.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",s.displayName)),ge}while(1<=g&&0<=y);break}}}finally{Dt=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Tt(d):""}function ot(s,a){switch(s.tag){case 26:case 27:case 5:return Tt(s.type);case 16:return Tt("Lazy");case 13:return s.child!==a&&a!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return Ce(s.type,!1);case 11:return Ce(s.type.render,!1);case 1:return Ce(s.type,!0);case 31:return Tt("Activity");default:return""}}function Ae(s){try{var a="",d=null;do a+=ot(s,d),d=s,s=s.return;while(s);return a}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var fe=Object.prototype.hasOwnProperty,Ue=r.unstable_scheduleCallback,We=r.unstable_cancelCallback,kt=r.unstable_shouldYield,Ve=r.unstable_requestPaint,J=r.unstable_now,Ee=r.unstable_getCurrentPriorityLevel,Xe=r.unstable_ImmediatePriority,ut=r.unstable_UserBlockingPriority,mt=r.unstable_NormalPriority,be=r.unstable_LowPriority,oe=r.unstable_IdlePriority,Ie=r.log,Pe=r.unstable_setDisableYieldValue,Fe=null,he=null;function He(s){if(typeof Ie=="function"&&Pe(s),he&&typeof he.setStrictMode=="function")try{he.setStrictMode(Fe,s)}catch{}}var Qe=Math.clz32?Math.clz32:Se,Oe=Math.log,Le=Math.LN2;function Se(s){return s>>>=0,s===0?32:31-(Oe(s)/Le|0)|0}var qe=256,Ne=262144,ze=4194304;function tt(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function _e(s,a,d){var g=s.pendingLanes;if(g===0)return 0;var y=0,v=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var $=g&134217727;return $!==0?(g=$&~v,g!==0?y=tt(g):(C&=$,C!==0?y=tt(C):d||(d=$&~s,d!==0&&(y=tt(d))))):($=g&~v,$!==0?y=tt($):C!==0?y=tt(C):d||(d=g&~s,d!==0&&(y=tt(d)))),y===0?0:a!==0&&a!==y&&(a&v)===0&&(v=y&-y,d=a&-a,v>=d||v===32&&(d&4194048)!==0)?a:y}function xt(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Zt(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var s=ze;return ze<<=1,(ze&62914560)===0&&(ze=4194304),s}function Ut(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Dr(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function _n(s,a,d,g,y,v){var C=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var $=s.entanglements,q=s.expirationTimes,se=s.hiddenUpdates;for(d=C&~d;0<d;){var ge=31-Qe(d),we=1<<ge;$[ge]=0,q[ge]=-1;var ae=se[ge];if(ae!==null)for(se[ge]=null,ge=0;ge<ae.length;ge++){var de=ae[ge];de!==null&&(de.lane&=-536870913)}d&=~we}g!==0&&Vr(s,g,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(C&~a))}function Vr(s,a,d){s.pendingLanes|=a,s.suspendedLanes&=~a;var g=31-Qe(a);s.entangledLanes|=a,s.entanglements[g]=s.entanglements[g]|1073741824|d&261930}function it(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var g=31-Qe(d),y=1<<g;y&a|s[g]&a&&(s[g]|=a),d&=~y}}function Be(s,a){var d=a&-a;return d=(d&42)!==0?1:$t(d),(d&(s.suspendedLanes|a))!==0?0:d}function $t(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Vt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ua(){var s=U.p;return s!==0?s:(s=window.event,s===void 0?32:fv(s.type))}function gi(s,a){var d=U.p;try{return U.p=s,a()}finally{U.p=d}}var mi=Math.random().toString(36).slice(2),Sr="__reactFiber$"+mi,zr="__reactProps$"+mi,_i="__reactContainer$"+mi,qa="__reactEvents$"+mi,m0="__reactListeners$"+mi,Mu="__reactHandles$"+mi,Lu="__reactResources$"+mi,Ri="__reactMarker$"+mi;function Ya(s){delete s[Sr],delete s[zr],delete s[qa],delete s[m0],delete s[Mu]}function Ci(s){var a=s[Sr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[_i]||d[Sr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=J2(s);s!==null;){if(d=s[Sr])return d;s=J2(s)}return a}s=d,d=s.parentNode}return null}function Gn(s){if(s=s[Sr]||s[_i]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Rn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Ii(s){var a=s[Lu];return a||(a=s[Lu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function wr(s){s[Ri]=!0}var Ec=new Set,_c={};function Fi(s,a){Di(s,a),Di(s+"Capture",a)}function Di(s,a){for(_c[s]=a,s=0;s<a.length;s++)Ec.add(a[s])}var Rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cc={},Ic={};function Nu(s){return fe.call(Ic,s)?!0:fe.call(Cc,s)?!1:Rc.test(s)?Ic[s]=!0:(Cc[s]=!0,!1)}function Ka(s,a,d){if(Nu(a))if(d===null)s.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+d)}}function Cn(s,a,d){if(d===null)s.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+d)}}function Tr(s,a,d,g){if(g===null)s.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(a,d,""+g)}}function Or(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ws(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Fc(s,a,d){var g=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var y=g.get,v=g.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){d=""+C,v.call(this,C)}}),Object.defineProperty(s,a,{enumerable:g.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Wt(s){if(!s._valueTracker){var a=Ws(s)?"checked":"value";s._valueTracker=Fc(s,a,""+s[a])}}function ta(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),g="";return s&&(g=Ws(s)?s.checked?"true":"false":s.value),s=g,s!==d?(a.setValue(s),!0):!1}function Pi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ra=/[\n"\\]/g;function pn(s){return s.replace(ra,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Xa(s,a,d,g,y,v,C,$){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),a!=null?C==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Or(a)):s.value!==""+Or(a)&&(s.value=""+Or(a)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),a!=null?Dc(s,C,Or(a)):d!=null?Dc(s,C,Or(d)):g!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.name=""+Or($):s.removeAttribute("name")}function $u(s,a,d,g,y,v,C,$){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),a!=null||d!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){Wt(s);return}d=d!=null?""+Or(d):"",a=a!=null?""+Or(a):d,$||a===s.value||(s.value=a),s.defaultValue=a}g=g??y,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=$?s.checked:!!g,s.defaultChecked=!!g,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),Wt(s)}function Dc(s,a,d){a==="number"&&Pi(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function Gs(s,a,d,g){if(s=s.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<s.length;d++)y=a.hasOwnProperty("$"+s[d].value),s[d].selected!==y&&(s[d].selected=y),y&&g&&(s[d].defaultSelected=!0)}else{for(d=""+Or(d),a=null,y=0;y<s.length;y++){if(s[y].value===d){s[y].selected=!0,g&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function Vu(s,a,d){if(a!=null&&(a=""+Or(a),a!==s.value&&(s.value=a),d==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=d!=null?""+Or(d):""}function Hs(s,a,d,g){if(a==null){if(g!=null){if(d!=null)throw Error(i(92));if(Q(g)){if(1<g.length)throw Error(i(93));g=g[0]}d=g}d==null&&(d=""),a=d}d=Or(a),s.defaultValue=d,g=s.textContent,g===d&&g!==""&&g!==null&&(s.value=g),Wt(s)}function yn(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var Wu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pc(s,a,d){var g=a.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":g?s.setProperty(a,d):typeof d!="number"||d===0||Wu.has(a)?a==="float"?s.cssFloat=d:s[a]=(""+d).trim():s[a]=d+"px"}function Bc(s,a,d){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var y in a)g=a[y],a.hasOwnProperty(y)&&d[y]!==g&&Pc(s,y,g)}else for(var v in a)a.hasOwnProperty(v)&&Pc(s,v,a[v])}function Qa(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Us=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Za(s){return Us.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function fi(){}var zc=null;function Hn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var qs=null,Bi=null;function na(s){var a=Gn(s);if(a&&(s=a.stateNode)){var d=s[zr]||null;e:switch(s=a.stateNode,a.type){case"input":if(Xa(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+pn(""+a)+'"][type="radio"]'),a=0;a<d.length;a++){var g=d[a];if(g!==s&&g.form===s.form){var y=g[zr]||null;if(!y)throw Error(i(90));Xa(g,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<d.length;a++)g=d[a],g.form===s.form&&ta(g)}break e;case"textarea":Vu(s,d.value,d.defaultValue);break e;case"select":a=d.value,a!=null&&Gs(s,!!d.multiple,a,!1)}}}var Ja=!1;function Ys(s,a,d){if(Ja)return s(a,d);Ja=!0;try{var g=s(a);return g}finally{if(Ja=!1,(qs!==null||Bi!==null)&&(Oh(),qs&&(a=qs,s=Bi,Bi=qs=null,na(a),s)))for(a=0;a<s.length;a++)na(s[a])}}function pi(s,a){var d=s.stateNode;if(d===null)return null;var g=d[zr]||null;if(g===null)return null;d=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(i(231,a,typeof d));return d}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ia=!1;if(Un)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){ia=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch{ia=!1}var zi=null,Oc=null,sa=null;function Mc(){if(sa)return sa;var s,a=Oc,d=a.length,g,y="value"in zi?zi.value:zi.textContent,v=y.length;for(s=0;s<d&&a[s]===y[s];s++);var C=d-s;for(g=1;g<=C&&a[d-g]===y[v-g];g++);return sa=y.slice(s,1<g?1-g:void 0)}function oa(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function cs(){return!0}function yi(){return!1}function Wr(s){function a(d,g,y,v,C){this._reactName=d,this._targetInst=y,this.type=g,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var $ in s)s.hasOwnProperty($)&&(d=s[$],this[$]=d?d(v):v[$]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?cs:yi,this.isPropagationStopped=yi,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=cs)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=cs)},persist:function(){},isPersistent:cs}),a}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Wr(ds),Ks=x({},ds,{view:0,detail:0}),Lc=Wr(Ks),Xs,el,Mi,tl=x({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mi&&(Mi&&s.type==="mousemove"?(Xs=s.screenX-Mi.screenX,el=s.screenY-Mi.screenY):el=Xs=0,Mi=s),Xs)},movementY:function(s){return"movementY"in s?s.movementY:el}}),Nc=Wr(tl),aa=x({},tl,{dataTransfer:0}),Hu=Wr(aa),Uu=x({},Ks,{relatedTarget:0}),la=Wr(Uu),$c=x({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=Wr($c),rl=x({},ds,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Yu=Wr(rl),Ku=x({},ds,{data:0}),Li=Wr(Ku),Xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Zu[s])?!!a[s]:!1}function Qs(){return Ju}var dn=x({},Ks,{key:function(s){if(s.key){var a=Xu[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=oa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Qu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(s){return s.type==="keypress"?oa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?oa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),eh=Wr(dn),th=x({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),us=Wr(th),p=x({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),k=Wr(p),D=x({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),W=Wr(D),ne=x({},tl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=Wr(ne),De=x({},ds,{newState:0,oldState:0}),pt=Wr(De),pr=[9,13,27,32],Lt=Un&&"CompositionEvent"in window,ir=null;Un&&"documentMode"in document&&(ir=document.documentMode);var qn=Un&&"TextEvent"in window&&!ir,Ni=Un&&(!Lt||ir&&8<ir&&11>=ir),xi=" ",bi=!1;function ca(s,a){switch(s){case"keyup":return pr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var il=!1;function p3(s,a){switch(s){case"compositionend":return nl(a);case"keypress":return a.which!==32?null:(bi=!0,xi);case"textInput":return s=a.data,s===xi&&bi?null:s;default:return null}}function y3(s,a){if(il)return s==="compositionend"||!Lt&&ca(s,a)?(s=Mc(),sa=Oc=zi=null,il=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ni&&a.locale!=="ko"?null:a.data;default:return null}}var x3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r5(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!x3[s.type]:a==="textarea"}function n5(s,a,d,g){qs?Bi?Bi.push(g):Bi=[g]:qs=g,a=Gh(a,"onChange"),0<a.length&&(d=new Oi("onChange","change",null,d,g),s.push({event:d,listeners:a}))}var Vc=null,Wc=null;function b3(s){L2(s,0)}function rh(s){var a=Rn(s);if(ta(a))return s}function i5(s,a){if(s==="change")return a}var s5=!1;if(Un){var f0;if(Un){var p0="oninput"in document;if(!p0){var o5=document.createElement("div");o5.setAttribute("oninput","return;"),p0=typeof o5.oninput=="function"}f0=p0}else f0=!1;s5=f0&&(!document.documentMode||9<document.documentMode)}function a5(){Vc&&(Vc.detachEvent("onpropertychange",l5),Wc=Vc=null)}function l5(s){if(s.propertyName==="value"&&rh(Wc)){var a=[];n5(a,Wc,s,Hn(s)),Ys(b3,a)}}function v3(s,a,d){s==="focusin"?(a5(),Vc=a,Wc=d,Vc.attachEvent("onpropertychange",l5)):s==="focusout"&&a5()}function S3(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return rh(Wc)}function w3(s,a){if(s==="click")return rh(a)}function T3(s,a){if(s==="input"||s==="change")return rh(a)}function j3(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var In=typeof Object.is=="function"?Object.is:j3;function Gc(s,a){if(In(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),g=Object.keys(a);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var y=d[g];if(!fe.call(a,y)||!In(s[y],a[y]))return!1}return!0}function c5(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function d5(s,a){var d=c5(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=a&&g>=a)return{node:d,offset:a-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=c5(d)}}function u5(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?u5(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function h5(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Pi(s.document);a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=Pi(s.document)}return a}function y0(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var A3=Un&&"documentMode"in document&&11>=document.documentMode,sl=null,x0=null,Hc=null,b0=!1;function g5(s,a,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;b0||sl==null||sl!==Pi(g)||(g=sl,"selectionStart"in g&&y0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Hc&&Gc(Hc,g)||(Hc=g,g=Gh(x0,"onSelect"),0<g.length&&(a=new Oi("onSelect","select",null,a,d),s.push({event:a,listeners:g}),a.target=sl)))}function da(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var ol={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},v0={},m5={};Un&&(m5=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function ua(s){if(v0[s])return v0[s];if(!ol[s])return s;var a=ol[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in m5)return v0[s]=a[d];return s}var f5=ua("animationend"),p5=ua("animationiteration"),y5=ua("animationstart"),k3=ua("transitionrun"),E3=ua("transitionstart"),_3=ua("transitioncancel"),x5=ua("transitionend"),b5=new Map,S0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");S0.push("scrollEnd");function vi(s,a){b5.set(s,a),Fi(a,[s])}var nh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Yn=[],al=0,w0=0;function ih(){for(var s=al,a=w0=al=0;a<s;){var d=Yn[a];Yn[a++]=null;var g=Yn[a];Yn[a++]=null;var y=Yn[a];Yn[a++]=null;var v=Yn[a];if(Yn[a++]=null,g!==null&&y!==null){var C=g.pending;C===null?y.next=y:(y.next=C.next,C.next=y),g.pending=y}v!==0&&v5(d,y,v)}}function sh(s,a,d,g){Yn[al++]=s,Yn[al++]=a,Yn[al++]=d,Yn[al++]=g,w0|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function T0(s,a,d,g){return sh(s,a,d,g),oh(s)}function ha(s,a){return sh(s,null,null,a),oh(s)}function v5(s,a,d){s.lanes|=d;var g=s.alternate;g!==null&&(g.lanes|=d);for(var y=!1,v=s.return;v!==null;)v.childLanes|=d,g=v.alternate,g!==null&&(g.childLanes|=d),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&a!==null&&(y=31-Qe(d),s=v.hiddenUpdates,g=s[y],g===null?s[y]=[a]:g.push(a),a.lane=d|536870912),v):null}function oh(s){if(50<gd)throw gd=0,Df=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ll={};function R3(s,a,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(s,a,d,g){return new R3(s,a,d,g)}function j0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function hs(s,a){var d=s.alternate;return d===null?(d=Fn(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function S5(s,a){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,a=d.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function ah(s,a,d,g,y,v){var C=0;if(g=s,typeof s=="function")j0(s)&&(C=1);else if(typeof s=="string")C=P_(s,d,le.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case F:return s=Fn(31,d,a,y),s.elementType=F,s.lanes=v,s;case T:return ga(d.children,y,v,a);case E:C=8,y|=24;break;case A:return s=Fn(12,d,a,y|2),s.elementType=A,s.lanes=v,s;case L:return s=Fn(13,d,a,y),s.elementType=L,s.lanes=v,s;case M:return s=Fn(19,d,a,y),s.elementType=M,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case B:C=10;break e;case _:C=9;break e;case I:C=11;break e;case R:C=14;break e;case j:C=16,g=null;break e}C=29,d=Error(i(130,s===null?"null":typeof s,"")),g=null}return a=Fn(C,d,a,y),a.elementType=s,a.type=g,a.lanes=v,a}function ga(s,a,d,g){return s=Fn(7,s,g,a),s.lanes=d,s}function A0(s,a,d){return s=Fn(6,s,null,a),s.lanes=d,s}function w5(s){var a=Fn(18,null,null,0);return a.stateNode=s,a}function k0(s,a,d){return a=Fn(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var T5=new WeakMap;function Kn(s,a){if(typeof s=="object"&&s!==null){var d=T5.get(s);return d!==void 0?d:(a={value:s,source:a,stack:Ae(a)},T5.set(s,a),a)}return{value:s,source:a,stack:Ae(a)}}var cl=[],dl=0,lh=null,Uc=0,Xn=[],Qn=0,Zs=null,$i=1,Vi="";function gs(s,a){cl[dl++]=Uc,cl[dl++]=lh,lh=s,Uc=a}function j5(s,a,d){Xn[Qn++]=$i,Xn[Qn++]=Vi,Xn[Qn++]=Zs,Zs=s;var g=$i;s=Vi;var y=32-Qe(g)-1;g&=~(1<<y),d+=1;var v=32-Qe(a)+y;if(30<v){var C=y-y%5;v=(g&(1<<C)-1).toString(32),g>>=C,y-=C,$i=1<<32-Qe(a)+y|d<<y|g,Vi=v+s}else $i=1<<v|d<<y|g,Vi=s}function E0(s){s.return!==null&&(gs(s,1),j5(s,1,0))}function _0(s){for(;s===lh;)lh=cl[--dl],cl[dl]=null,Uc=cl[--dl],cl[dl]=null;for(;s===Zs;)Zs=Xn[--Qn],Xn[Qn]=null,Vi=Xn[--Qn],Xn[Qn]=null,$i=Xn[--Qn],Xn[Qn]=null}function A5(s,a){Xn[Qn++]=$i,Xn[Qn++]=Vi,Xn[Qn++]=Zs,$i=a.id,Vi=a.overflow,Zs=s}var Gr=null,tr=null,Ft=!1,Js=null,Zn=!1,R0=Error(i(519));function eo(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qc(Kn(a,s)),R0}function k5(s){var a=s.stateNode,d=s.type,g=s.memoizedProps;switch(a[Sr]=s,a[zr]=g,d){case"dialog":At("cancel",a),At("close",a);break;case"iframe":case"object":case"embed":At("load",a);break;case"video":case"audio":for(d=0;d<fd.length;d++)At(fd[d],a);break;case"source":At("error",a);break;case"img":case"image":case"link":At("error",a),At("load",a);break;case"details":At("toggle",a);break;case"input":At("invalid",a),$u(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":At("invalid",a);break;case"textarea":At("invalid",a),Hs(a,g.value,g.defaultValue,g.children)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||a.textContent===""+d||g.suppressHydrationWarning===!0||W2(a.textContent,d)?(g.popover!=null&&(At("beforetoggle",a),At("toggle",a)),g.onScroll!=null&&At("scroll",a),g.onScrollEnd!=null&&At("scrollend",a),g.onClick!=null&&(a.onclick=fi),a=!0):a=!1,a||eo(s,!0)}function E5(s){for(Gr=s.return;Gr;)switch(Gr.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:Gr=Gr.return}}function ul(s){if(s!==Gr)return!1;if(!Ft)return E5(s),Ft=!0,!1;var a=s.tag,d;if((d=a!==3&&a!==27)&&((d=a===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||Yf(s.type,s.memoizedProps)),d=!d),d&&tr&&eo(s),E5(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));tr=Z2(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));tr=Z2(s)}else a===27?(a=tr,fo(s.type)?(s=Jf,Jf=null,tr=s):tr=a):tr=Gr?ei(s.stateNode.nextSibling):null;return!0}function ma(){tr=Gr=null,Ft=!1}function C0(){var s=Js;return s!==null&&(Sn===null?Sn=s:Sn.push.apply(Sn,s),Js=null),s}function qc(s){Js===null?Js=[s]:Js.push(s)}var I0=me(null),fa=null,ms=null;function to(s,a,d){te(I0,a._currentValue),a._currentValue=d}function fs(s){s._currentValue=I0.current,ke(I0)}function F0(s,a,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),s===d)break;s=s.return}}function D0(s,a,d,g){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var C=y.child;v=v.firstContext;e:for(;v!==null;){var $=v;v=y;for(var q=0;q<a.length;q++)if($.context===a[q]){v.lanes|=d,$=v.alternate,$!==null&&($.lanes|=d),F0(v.return,d,s),g||(C=null);break e}v=$.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=d,v=C.alternate,v!==null&&(v.lanes|=d),F0(C,d,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function hl(s,a,d,g){s=null;for(var y=a,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var $=y.type;In(y.pendingProps.value,C.value)||(s!==null?s.push($):s=[$])}}else if(y===ue.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(vd):s=[vd])}y=y.return}s!==null&&D0(a,s,d,g),a.flags|=262144}function ch(s){for(s=s.firstContext;s!==null;){if(!In(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function pa(s){fa=s,ms=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Hr(s){return _5(fa,s)}function dh(s,a){return fa===null&&pa(s),_5(s,a)}function _5(s,a){var d=a._currentValue;if(a={context:a,memoizedValue:d,next:null},ms===null){if(s===null)throw Error(i(308));ms=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ms=ms.next=a;return d}var C3=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(d,g){s.push(g)}};this.abort=function(){a.aborted=!0,s.forEach(function(d){return d()})}},I3=r.unstable_scheduleCallback,F3=r.unstable_NormalPriority,jr={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function P0(){return{controller:new C3,data:new Map,refCount:0}}function Yc(s){s.refCount--,s.refCount===0&&I3(F3,function(){s.controller.abort()})}var Kc=null,B0=0,gl=0,ml=null;function D3(s,a){if(Kc===null){var d=Kc=[];B0=0,gl=Lf(),ml={status:"pending",value:void 0,then:function(g){d.push(g)}}}return B0++,a.then(R5,R5),a}function R5(){if(--B0===0&&Kc!==null){ml!==null&&(ml.status="fulfilled");var s=Kc;Kc=null,gl=0,ml=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function P3(s,a){var d=[],g={status:"pending",value:null,reason:null,then:function(y){d.push(y)}};return s.then(function(){g.status="fulfilled",g.value=a;for(var y=0;y<d.length;y++)(0,d[y])(a)},function(y){for(g.status="rejected",g.reason=y,y=0;y<d.length;y++)(0,d[y])(void 0)}),g}var C5=H.S;H.S=function(s,a){g2=J(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&D3(s,a),C5!==null&&C5(s,a)};var ya=me(null);function z0(){var s=ya.current;return s!==null?s:Jt.pooledCache}function uh(s,a){a===null?te(ya,ya.current):te(ya,a.pool)}function I5(){var s=z0();return s===null?null:{parent:jr._currentValue,pool:s}}var fl=Error(i(460)),O0=Error(i(474)),hh=Error(i(542)),gh={then:function(){}};function F5(s){return s=s.status,s==="fulfilled"||s==="rejected"}function D5(s,a,d){switch(d=s[d],d===void 0?s.push(a):d!==a&&(a.then(fi,fi),a=d),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,B5(s),s;default:if(typeof a.status=="string")a.then(fi,fi);else{if(s=Jt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(g){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=g}},function(g){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,B5(s),s}throw ba=a,fl}}function xa(s){try{var a=s._init;return a(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(ba=d,fl):d}}var ba=null;function P5(){if(ba===null)throw Error(i(459));var s=ba;return ba=null,s}function B5(s){if(s===fl||s===hh)throw Error(i(483))}var pl=null,Xc=0;function mh(s){var a=Xc;return Xc+=1,pl===null&&(pl=[]),D5(pl,s,a)}function Qc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function fh(s,a){throw a.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function z5(s){function a(ee,Y){if(s){var ie=ee.deletions;ie===null?(ee.deletions=[Y],ee.flags|=16):ie.push(Y)}}function d(ee,Y){if(!s)return null;for(;Y!==null;)a(ee,Y),Y=Y.sibling;return null}function g(ee){for(var Y=new Map;ee!==null;)ee.key!==null?Y.set(ee.key,ee):Y.set(ee.index,ee),ee=ee.sibling;return Y}function y(ee,Y){return ee=hs(ee,Y),ee.index=0,ee.sibling=null,ee}function v(ee,Y,ie){return ee.index=ie,s?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<Y?(ee.flags|=67108866,Y):ie):(ee.flags|=67108866,Y)):(ee.flags|=1048576,Y)}function C(ee){return s&&ee.alternate===null&&(ee.flags|=67108866),ee}function $(ee,Y,ie,ye){return Y===null||Y.tag!==6?(Y=A0(ie,ee.mode,ye),Y.return=ee,Y):(Y=y(Y,ie),Y.return=ee,Y)}function q(ee,Y,ie,ye){var st=ie.type;return st===T?ge(ee,Y,ie.props.children,ye,ie.key):Y!==null&&(Y.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===j&&xa(st)===Y.type)?(Y=y(Y,ie.props),Qc(Y,ie),Y.return=ee,Y):(Y=ah(ie.type,ie.key,ie.props,null,ee.mode,ye),Qc(Y,ie),Y.return=ee,Y)}function se(ee,Y,ie,ye){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ie.containerInfo||Y.stateNode.implementation!==ie.implementation?(Y=k0(ie,ee.mode,ye),Y.return=ee,Y):(Y=y(Y,ie.children||[]),Y.return=ee,Y)}function ge(ee,Y,ie,ye,st){return Y===null||Y.tag!==7?(Y=ga(ie,ee.mode,ye,st),Y.return=ee,Y):(Y=y(Y,ie),Y.return=ee,Y)}function we(ee,Y,ie){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=A0(""+Y,ee.mode,ie),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return ie=ah(Y.type,Y.key,Y.props,null,ee.mode,ie),Qc(ie,Y),ie.return=ee,ie;case w:return Y=k0(Y,ee.mode,ie),Y.return=ee,Y;case j:return Y=xa(Y),we(ee,Y,ie)}if(Q(Y)||V(Y))return Y=ga(Y,ee.mode,ie,null),Y.return=ee,Y;if(typeof Y.then=="function")return we(ee,mh(Y),ie);if(Y.$$typeof===B)return we(ee,dh(ee,Y),ie);fh(ee,Y)}return null}function ae(ee,Y,ie,ye){var st=Y!==null?Y.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return st!==null?null:$(ee,Y,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case S:return ie.key===st?q(ee,Y,ie,ye):null;case w:return ie.key===st?se(ee,Y,ie,ye):null;case j:return ie=xa(ie),ae(ee,Y,ie,ye)}if(Q(ie)||V(ie))return st!==null?null:ge(ee,Y,ie,ye,null);if(typeof ie.then=="function")return ae(ee,Y,mh(ie),ye);if(ie.$$typeof===B)return ae(ee,Y,dh(ee,ie),ye);fh(ee,ie)}return null}function de(ee,Y,ie,ye,st){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ee=ee.get(ie)||null,$(Y,ee,""+ye,st);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case S:return ee=ee.get(ye.key===null?ie:ye.key)||null,q(Y,ee,ye,st);case w:return ee=ee.get(ye.key===null?ie:ye.key)||null,se(Y,ee,ye,st);case j:return ye=xa(ye),de(ee,Y,ie,ye,st)}if(Q(ye)||V(ye))return ee=ee.get(ie)||null,ge(Y,ee,ye,st,null);if(typeof ye.then=="function")return de(ee,Y,ie,mh(ye),st);if(ye.$$typeof===B)return de(ee,Y,ie,dh(Y,ye),st);fh(Y,ye)}return null}function Ye(ee,Y,ie,ye){for(var st=null,zt=null,Ze=Y,bt=Y=0,_t=null;Ze!==null&&bt<ie.length;bt++){Ze.index>bt?(_t=Ze,Ze=null):_t=Ze.sibling;var Ot=ae(ee,Ze,ie[bt],ye);if(Ot===null){Ze===null&&(Ze=_t);break}s&&Ze&&Ot.alternate===null&&a(ee,Ze),Y=v(Ot,Y,bt),zt===null?st=Ot:zt.sibling=Ot,zt=Ot,Ze=_t}if(bt===ie.length)return d(ee,Ze),Ft&&gs(ee,bt),st;if(Ze===null){for(;bt<ie.length;bt++)Ze=we(ee,ie[bt],ye),Ze!==null&&(Y=v(Ze,Y,bt),zt===null?st=Ze:zt.sibling=Ze,zt=Ze);return Ft&&gs(ee,bt),st}for(Ze=g(Ze);bt<ie.length;bt++)_t=de(Ze,ee,bt,ie[bt],ye),_t!==null&&(s&&_t.alternate!==null&&Ze.delete(_t.key===null?bt:_t.key),Y=v(_t,Y,bt),zt===null?st=_t:zt.sibling=_t,zt=_t);return s&&Ze.forEach(function(vo){return a(ee,vo)}),Ft&&gs(ee,bt),st}function lt(ee,Y,ie,ye){if(ie==null)throw Error(i(151));for(var st=null,zt=null,Ze=Y,bt=Y=0,_t=null,Ot=ie.next();Ze!==null&&!Ot.done;bt++,Ot=ie.next()){Ze.index>bt?(_t=Ze,Ze=null):_t=Ze.sibling;var vo=ae(ee,Ze,Ot.value,ye);if(vo===null){Ze===null&&(Ze=_t);break}s&&Ze&&vo.alternate===null&&a(ee,Ze),Y=v(vo,Y,bt),zt===null?st=vo:zt.sibling=vo,zt=vo,Ze=_t}if(Ot.done)return d(ee,Ze),Ft&&gs(ee,bt),st;if(Ze===null){for(;!Ot.done;bt++,Ot=ie.next())Ot=we(ee,Ot.value,ye),Ot!==null&&(Y=v(Ot,Y,bt),zt===null?st=Ot:zt.sibling=Ot,zt=Ot);return Ft&&gs(ee,bt),st}for(Ze=g(Ze);!Ot.done;bt++,Ot=ie.next())Ot=de(Ze,ee,bt,Ot.value,ye),Ot!==null&&(s&&Ot.alternate!==null&&Ze.delete(Ot.key===null?bt:Ot.key),Y=v(Ot,Y,bt),zt===null?st=Ot:zt.sibling=Ot,zt=Ot);return s&&Ze.forEach(function(H_){return a(ee,H_)}),Ft&&gs(ee,bt),st}function Xt(ee,Y,ie,ye){if(typeof ie=="object"&&ie!==null&&ie.type===T&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case S:e:{for(var st=ie.key;Y!==null;){if(Y.key===st){if(st=ie.type,st===T){if(Y.tag===7){d(ee,Y.sibling),ye=y(Y,ie.props.children),ye.return=ee,ee=ye;break e}}else if(Y.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===j&&xa(st)===Y.type){d(ee,Y.sibling),ye=y(Y,ie.props),Qc(ye,ie),ye.return=ee,ee=ye;break e}d(ee,Y);break}else a(ee,Y);Y=Y.sibling}ie.type===T?(ye=ga(ie.props.children,ee.mode,ye,ie.key),ye.return=ee,ee=ye):(ye=ah(ie.type,ie.key,ie.props,null,ee.mode,ye),Qc(ye,ie),ye.return=ee,ee=ye)}return C(ee);case w:e:{for(st=ie.key;Y!==null;){if(Y.key===st)if(Y.tag===4&&Y.stateNode.containerInfo===ie.containerInfo&&Y.stateNode.implementation===ie.implementation){d(ee,Y.sibling),ye=y(Y,ie.children||[]),ye.return=ee,ee=ye;break e}else{d(ee,Y);break}else a(ee,Y);Y=Y.sibling}ye=k0(ie,ee.mode,ye),ye.return=ee,ee=ye}return C(ee);case j:return ie=xa(ie),Xt(ee,Y,ie,ye)}if(Q(ie))return Ye(ee,Y,ie,ye);if(V(ie)){if(st=V(ie),typeof st!="function")throw Error(i(150));return ie=st.call(ie),lt(ee,Y,ie,ye)}if(typeof ie.then=="function")return Xt(ee,Y,mh(ie),ye);if(ie.$$typeof===B)return Xt(ee,Y,dh(ee,ie),ye);fh(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Y!==null&&Y.tag===6?(d(ee,Y.sibling),ye=y(Y,ie),ye.return=ee,ee=ye):(d(ee,Y),ye=A0(ie,ee.mode,ye),ye.return=ee,ee=ye),C(ee)):d(ee,Y)}return function(ee,Y,ie,ye){try{Xc=0;var st=Xt(ee,Y,ie,ye);return pl=null,st}catch(Ze){if(Ze===fl||Ze===hh)throw Ze;var zt=Fn(29,Ze,null,ee.mode);return zt.lanes=ye,zt.return=ee,zt}finally{}}}var va=z5(!0),O5=z5(!1),ro=!1;function M0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function L0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function no(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function io(s,a,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(Nt&2)!==0){var y=g.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),g.pending=a,a=oh(s),v5(s,null,d),a}return sh(s,g,a,d),oh(s)}function Zc(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194048)!==0)){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,it(s,d)}}function N0(s,a){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var y=null,v=null;if(d=d.firstBaseUpdate,d!==null){do{var C={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};v===null?y=v=C:v=v.next=C,d=d.next}while(d!==null);v===null?y=v=a:v=v.next=a}else y=v=a;d={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:g.shared,callbacks:g.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}var $0=!1;function Jc(){if($0){var s=ml;if(s!==null)throw s}}function ed(s,a,d,g){$0=!1;var y=s.updateQueue;ro=!1;var v=y.firstBaseUpdate,C=y.lastBaseUpdate,$=y.shared.pending;if($!==null){y.shared.pending=null;var q=$,se=q.next;q.next=null,C===null?v=se:C.next=se,C=q;var ge=s.alternate;ge!==null&&(ge=ge.updateQueue,$=ge.lastBaseUpdate,$!==C&&($===null?ge.firstBaseUpdate=se:$.next=se,ge.lastBaseUpdate=q))}if(v!==null){var we=y.baseState;C=0,ge=se=q=null,$=v;do{var ae=$.lane&-536870913,de=ae!==$.lane;if(de?(Et&ae)===ae:(g&ae)===ae){ae!==0&&ae===gl&&($0=!0),ge!==null&&(ge=ge.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Ye=s,lt=$;ae=a;var Xt=d;switch(lt.tag){case 1:if(Ye=lt.payload,typeof Ye=="function"){we=Ye.call(Xt,we,ae);break e}we=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=lt.payload,ae=typeof Ye=="function"?Ye.call(Xt,we,ae):Ye,ae==null)break e;we=x({},we,ae);break e;case 2:ro=!0}}ae=$.callback,ae!==null&&(s.flags|=64,de&&(s.flags|=8192),de=y.callbacks,de===null?y.callbacks=[ae]:de.push(ae))}else de={lane:ae,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ge===null?(se=ge=de,q=we):ge=ge.next=de,C|=ae;if($=$.next,$===null){if($=y.shared.pending,$===null)break;de=$,$=de.next,de.next=null,y.lastBaseUpdate=de,y.shared.pending=null}}while(!0);ge===null&&(q=we),y.baseState=q,y.firstBaseUpdate=se,y.lastBaseUpdate=ge,v===null&&(y.shared.lanes=0),co|=C,s.lanes=C,s.memoizedState=we}}function M5(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function L5(s,a){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)M5(d[s],a)}var yl=me(null),ph=me(0);function N5(s,a){s=js,te(ph,s),te(yl,a),js=s|a.baseLanes}function V0(){te(ph,js),te(yl,yl.current)}function W0(){js=ph.current,ke(yl),ke(ph)}var Dn=me(null),Jn=null;function so(s){var a=s.alternate;te(yr,yr.current&1),te(Dn,s),Jn===null&&(a===null||yl.current!==null||a.memoizedState!==null)&&(Jn=s)}function G0(s){te(yr,yr.current),te(Dn,s),Jn===null&&(Jn=s)}function $5(s){s.tag===22?(te(yr,yr.current),te(Dn,s),Jn===null&&(Jn=s)):oo()}function oo(){te(yr,yr.current),te(Dn,Dn.current)}function Pn(s){ke(Dn),Jn===s&&(Jn=null),ke(yr)}var yr=me(0);function yh(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||Qf(d)||Zf(d)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ps=0,yt=null,Yt=null,Ar=null,xh=!1,xl=!1,Sa=!1,bh=0,td=0,bl=null,B3=0;function ur(){throw Error(i(321))}function H0(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!In(s[d],a[d]))return!1;return!0}function U0(s,a,d,g,y,v){return ps=v,yt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=s===null||s.memoizedState===null?jb:lf,Sa=!1,v=d(g,y),Sa=!1,xl&&(v=W5(a,d,g,y)),V5(s),v}function V5(s){H.H=id;var a=Yt!==null&&Yt.next!==null;if(ps=0,Ar=Yt=yt=null,xh=!1,td=0,bl=null,a)throw Error(i(300));s===null||kr||(s=s.dependencies,s!==null&&ch(s)&&(kr=!0))}function W5(s,a,d,g){yt=s;var y=0;do{if(xl&&(bl=null),td=0,xl=!1,25<=y)throw Error(i(301));if(y+=1,Ar=Yt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}H.H=Ab,v=a(d,g)}while(xl);return v}function z3(){var s=H.H,a=s.useState()[0];return a=typeof a.then=="function"?rd(a):a,s=s.useState()[0],(Yt!==null?Yt.memoizedState:null)!==s&&(yt.flags|=1024),a}function q0(){var s=bh!==0;return bh=0,s}function Y0(s,a,d){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~d}function K0(s){if(xh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}xh=!1}ps=0,Ar=Yt=yt=null,xl=!1,td=bh=0,bl=null}function un(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?yt.memoizedState=Ar=s:Ar=Ar.next=s,Ar}function xr(){if(Yt===null){var s=yt.alternate;s=s!==null?s.memoizedState:null}else s=Yt.next;var a=Ar===null?yt.memoizedState:Ar.next;if(a!==null)Ar=a,Yt=s;else{if(s===null)throw yt.alternate===null?Error(i(467)):Error(i(310));Yt=s,s={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Ar===null?yt.memoizedState=Ar=s:Ar=Ar.next=s}return Ar}function vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rd(s){var a=td;return td+=1,bl===null&&(bl=[]),s=D5(bl,s,a),a=yt,(Ar===null?a.memoizedState:Ar.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?jb:lf),s}function Sh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return rd(s);if(s.$$typeof===B)return Hr(s)}throw Error(i(438,String(s)))}function X0(s){var a=null,d=yt.updateQueue;if(d!==null&&(a=d.memoCache),a==null){var g=yt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),d===null&&(d=vh(),yt.updateQueue=d),d.memoCache=a,d=a.data[a.index],d===void 0)for(d=a.data[a.index]=Array(s),g=0;g<s;g++)d[g]=z;return a.index++,d}function ys(s,a){return typeof a=="function"?a(s):a}function wh(s){var a=xr();return Q0(a,Yt,s)}function Q0(s,a,d){var g=s.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=d;var y=s.baseQueue,v=g.pending;if(v!==null){if(y!==null){var C=y.next;y.next=v.next,v.next=C}a.baseQueue=y=v,g.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{a=y.next;var $=C=null,q=null,se=a,ge=!1;do{var we=se.lane&-536870913;if(we!==se.lane?(Et&we)===we:(ps&we)===we){var ae=se.revertLane;if(ae===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),we===gl&&(ge=!0);else if((ps&ae)===ae){se=se.next,ae===gl&&(ge=!0);continue}else we={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},q===null?($=q=we,C=v):q=q.next=we,yt.lanes|=ae,co|=ae;we=se.action,Sa&&d(v,we),v=se.hasEagerState?se.eagerState:d(v,we)}else ae={lane:we,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},q===null?($=q=ae,C=v):q=q.next=ae,yt.lanes|=we,co|=we;se=se.next}while(se!==null&&se!==a);if(q===null?C=v:q.next=$,!In(v,s.memoizedState)&&(kr=!0,ge&&(d=ml,d!==null)))throw d;s.memoizedState=v,s.baseState=C,s.baseQueue=q,g.lastRenderedState=v}return y===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function Z0(s){var a=xr(),d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=s;var g=d.dispatch,y=d.pending,v=a.memoizedState;if(y!==null){d.pending=null;var C=y=y.next;do v=s(v,C.action),C=C.next;while(C!==y);In(v,a.memoizedState)||(kr=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),d.lastRenderedState=v}return[v,g]}function G5(s,a,d){var g=yt,y=xr(),v=Ft;if(v){if(d===void 0)throw Error(i(407));d=d()}else d=a();var C=!In((Yt||y).memoizedState,d);if(C&&(y.memoizedState=d,kr=!0),y=y.queue,tf(q5.bind(null,g,y,s),[s]),y.getSnapshot!==a||C||Ar!==null&&Ar.memoizedState.tag&1){if(g.flags|=2048,vl(9,{destroy:void 0},U5.bind(null,g,y,d,a),null),Jt===null)throw Error(i(349));v||(ps&127)!==0||H5(g,a,d)}return d}function H5(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=yt.updateQueue,a===null?(a=vh(),yt.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function U5(s,a,d,g){a.value=d,a.getSnapshot=g,Y5(a)&&K5(s)}function q5(s,a,d){return d(function(){Y5(a)&&K5(s)})}function Y5(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!In(s,d)}catch{return!0}}function K5(s){var a=ha(s,2);a!==null&&wn(a,s,2)}function J0(s){var a=un();if(typeof s=="function"){var d=s;if(s=d(),Sa){He(!0);try{d()}finally{He(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:s},a}function X5(s,a,d,g){return s.baseState=d,Q0(s,Yt,typeof g=="function"?g:ys)}function O3(s,a,d,g,y){if(Ah(s))throw Error(i(485));if(s=a.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){v.listeners.push(C)}};H.T!==null?d(!0):v.isTransition=!1,g(v),d=a.pending,d===null?(v.next=a.pending=v,Q5(a,v)):(v.next=d.next,a.pending=d.next=v)}}function Q5(s,a){var d=a.action,g=a.payload,y=s.state;if(a.isTransition){var v=H.T,C={};H.T=C;try{var $=d(y,g),q=H.S;q!==null&&q(C,$),Z5(s,a,$)}catch(se){ef(s,a,se)}finally{v!==null&&C.types!==null&&(v.types=C.types),H.T=v}}else try{v=d(y,g),Z5(s,a,v)}catch(se){ef(s,a,se)}}function Z5(s,a,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){J5(s,a,g)},function(g){return ef(s,a,g)}):J5(s,a,d)}function J5(s,a,d){a.status="fulfilled",a.value=d,eb(a),s.state=d,a=s.pending,a!==null&&(d=a.next,d===a?s.pending=null:(d=d.next,a.next=d,Q5(s,d)))}function ef(s,a,d){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=d,eb(a),a=a.next;while(a!==g)}s.action=null}function eb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function tb(s,a){return a}function rb(s,a){if(Ft){var d=Jt.formState;if(d!==null){e:{var g=yt;if(Ft){if(tr){t:{for(var y=tr,v=Zn;y.nodeType!==8;){if(!v){y=null;break t}if(y=ei(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){tr=ei(y.nextSibling),g=y.data==="F!";break e}}eo(g)}g=!1}g&&(a=d[0])}}return d=un(),d.memoizedState=d.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tb,lastRenderedState:a},d.queue=g,d=Sb.bind(null,yt,g),g.dispatch=d,g=J0(!1),v=af.bind(null,yt,!1,g.queue),g=un(),y={state:a,dispatch:null,action:s,pending:null},g.queue=y,d=O3.bind(null,yt,y,v,d),y.dispatch=d,g.memoizedState=s,[a,d,!1]}function nb(s){var a=xr();return ib(a,Yt,s)}function ib(s,a,d){if(a=Q0(s,a,tb)[0],s=wh(ys)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var g=rd(a)}catch(C){throw C===fl?hh:C}else g=a;a=xr();var y=a.queue,v=y.dispatch;return d!==a.memoizedState&&(yt.flags|=2048,vl(9,{destroy:void 0},M3.bind(null,y,d),null)),[g,v,s]}function M3(s,a){s.action=a}function sb(s){var a=xr(),d=Yt;if(d!==null)return ib(a,d,s);xr(),a=a.memoizedState,d=xr();var g=d.queue.dispatch;return d.memoizedState=s,[a,g,!1]}function vl(s,a,d,g){return s={tag:s,create:d,deps:g,inst:a,next:null},a=yt.updateQueue,a===null&&(a=vh(),yt.updateQueue=a),d=a.lastEffect,d===null?a.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,a.lastEffect=s),s}function ob(){return xr().memoizedState}function Th(s,a,d,g){var y=un();yt.flags|=s,y.memoizedState=vl(1|a,{destroy:void 0},d,g===void 0?null:g)}function jh(s,a,d,g){var y=xr();g=g===void 0?null:g;var v=y.memoizedState.inst;Yt!==null&&g!==null&&H0(g,Yt.memoizedState.deps)?y.memoizedState=vl(a,v,d,g):(yt.flags|=s,y.memoizedState=vl(1|a,v,d,g))}function ab(s,a){Th(8390656,8,s,a)}function tf(s,a){jh(2048,8,s,a)}function L3(s){yt.flags|=4;var a=yt.updateQueue;if(a===null)a=vh(),yt.updateQueue=a,a.events=[s];else{var d=a.events;d===null?a.events=[s]:d.push(s)}}function lb(s){var a=xr().memoizedState;return L3({ref:a,nextImpl:s}),function(){if((Nt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function cb(s,a){return jh(4,2,s,a)}function db(s,a){return jh(4,4,s,a)}function ub(s,a){if(typeof a=="function"){s=s();var d=a(s);return function(){typeof d=="function"?d():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function hb(s,a,d){d=d!=null?d.concat([s]):null,jh(4,4,ub.bind(null,a,s),d)}function rf(){}function gb(s,a){var d=xr();a=a===void 0?null:a;var g=d.memoizedState;return a!==null&&H0(a,g[1])?g[0]:(d.memoizedState=[s,a],s)}function mb(s,a){var d=xr();a=a===void 0?null:a;var g=d.memoizedState;if(a!==null&&H0(a,g[1]))return g[0];if(g=s(),Sa){He(!0);try{s()}finally{He(!1)}}return d.memoizedState=[g,a],g}function nf(s,a,d){return d===void 0||(ps&1073741824)!==0&&(Et&261930)===0?s.memoizedState=a:(s.memoizedState=d,s=f2(),yt.lanes|=s,co|=s,d)}function fb(s,a,d,g){return In(d,a)?d:yl.current!==null?(s=nf(s,d,g),In(s,a)||(kr=!0),s):(ps&42)===0||(ps&1073741824)!==0&&(Et&261930)===0?(kr=!0,s.memoizedState=d):(s=f2(),yt.lanes|=s,co|=s,a)}function pb(s,a,d,g,y){var v=U.p;U.p=v!==0&&8>v?v:8;var C=H.T,$={};H.T=$,af(s,!1,a,d);try{var q=y(),se=H.S;if(se!==null&&se($,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ge=P3(q,g);nd(s,a,ge,On(s))}else nd(s,a,g,On(s))}catch(we){nd(s,a,{then:function(){},status:"rejected",reason:we},On())}finally{U.p=v,C!==null&&$.types!==null&&(C.types=$.types),H.T=C}}function N3(){}function sf(s,a,d,g){if(s.tag!==5)throw Error(i(476));var y=yb(s).queue;pb(s,y,a,K,d===null?N3:function(){return xb(s),d(g)})}function yb(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:K},next:null};var d={};return a.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:d},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function xb(s){var a=yb(s);a.next===null&&(a=s.alternate.memoizedState),nd(s,a.next.queue,{},On())}function of(){return Hr(vd)}function bb(){return xr().memoizedState}function vb(){return xr().memoizedState}function $3(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var d=On();s=no(d);var g=io(a,s,d);g!==null&&(wn(g,a,d),Zc(g,a,d)),a={cache:P0()},s.payload=a;return}a=a.return}}function V3(s,a,d){var g=On();d={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ah(s)?wb(a,d):(d=T0(s,a,d,g),d!==null&&(wn(d,s,g),Tb(d,a,g)))}function Sb(s,a,d){var g=On();nd(s,a,d,g)}function nd(s,a,d,g){var y={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Ah(s))wb(a,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var C=a.lastRenderedState,$=v(C,d);if(y.hasEagerState=!0,y.eagerState=$,In($,C))return sh(s,a,y,0),Jt===null&&ih(),!1}catch{}finally{}if(d=T0(s,a,y,g),d!==null)return wn(d,s,g),Tb(d,a,g),!0}return!1}function af(s,a,d,g){if(g={lane:2,revertLane:Lf(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ah(s)){if(a)throw Error(i(479))}else a=T0(s,d,g,2),a!==null&&wn(a,s,2)}function Ah(s){var a=s.alternate;return s===yt||a!==null&&a===yt}function wb(s,a){xl=xh=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function Tb(s,a,d){if((d&4194048)!==0){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,it(s,d)}}var id={readContext:Hr,use:Sh,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useInsertionEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useSyncExternalStore:ur,useId:ur,useHostTransitionStatus:ur,useFormState:ur,useActionState:ur,useOptimistic:ur,useMemoCache:ur,useCacheRefresh:ur};id.useEffectEvent=ur;var jb={readContext:Hr,use:Sh,useCallback:function(s,a){return un().memoizedState=[s,a===void 0?null:a],s},useContext:Hr,useEffect:ab,useImperativeHandle:function(s,a,d){d=d!=null?d.concat([s]):null,Th(4194308,4,ub.bind(null,a,s),d)},useLayoutEffect:function(s,a){return Th(4194308,4,s,a)},useInsertionEffect:function(s,a){Th(4,2,s,a)},useMemo:function(s,a){var d=un();a=a===void 0?null:a;var g=s();if(Sa){He(!0);try{s()}finally{He(!1)}}return d.memoizedState=[g,a],g},useReducer:function(s,a,d){var g=un();if(d!==void 0){var y=d(a);if(Sa){He(!0);try{d(a)}finally{He(!1)}}}else y=a;return g.memoizedState=g.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},g.queue=s,s=s.dispatch=V3.bind(null,yt,s),[g.memoizedState,s]},useRef:function(s){var a=un();return s={current:s},a.memoizedState=s},useState:function(s){s=J0(s);var a=s.queue,d=Sb.bind(null,yt,a);return a.dispatch=d,[s.memoizedState,d]},useDebugValue:rf,useDeferredValue:function(s,a){var d=un();return nf(d,s,a)},useTransition:function(){var s=J0(!1);return s=pb.bind(null,yt,s.queue,!0,!1),un().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,d){var g=yt,y=un();if(Ft){if(d===void 0)throw Error(i(407));d=d()}else{if(d=a(),Jt===null)throw Error(i(349));(Et&127)!==0||H5(g,a,d)}y.memoizedState=d;var v={value:d,getSnapshot:a};return y.queue=v,ab(q5.bind(null,g,v,s),[s]),g.flags|=2048,vl(9,{destroy:void 0},U5.bind(null,g,v,d,a),null),d},useId:function(){var s=un(),a=Jt.identifierPrefix;if(Ft){var d=Vi,g=$i;d=(g&~(1<<32-Qe(g)-1)).toString(32)+d,a="_"+a+"R_"+d,d=bh++,0<d&&(a+="H"+d.toString(32)),a+="_"}else d=B3++,a="_"+a+"r_"+d.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:of,useFormState:rb,useActionState:rb,useOptimistic:function(s){var a=un();a.memoizedState=a.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=d,a=af.bind(null,yt,!0,d),d.dispatch=a,[s,a]},useMemoCache:X0,useCacheRefresh:function(){return un().memoizedState=$3.bind(null,yt)},useEffectEvent:function(s){var a=un(),d={impl:s};return a.memoizedState=d,function(){if((Nt&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}},lf={readContext:Hr,use:Sh,useCallback:gb,useContext:Hr,useEffect:tf,useImperativeHandle:hb,useInsertionEffect:cb,useLayoutEffect:db,useMemo:mb,useReducer:wh,useRef:ob,useState:function(){return wh(ys)},useDebugValue:rf,useDeferredValue:function(s,a){var d=xr();return fb(d,Yt.memoizedState,s,a)},useTransition:function(){var s=wh(ys)[0],a=xr().memoizedState;return[typeof s=="boolean"?s:rd(s),a]},useSyncExternalStore:G5,useId:bb,useHostTransitionStatus:of,useFormState:nb,useActionState:nb,useOptimistic:function(s,a){var d=xr();return X5(d,Yt,s,a)},useMemoCache:X0,useCacheRefresh:vb};lf.useEffectEvent=lb;var Ab={readContext:Hr,use:Sh,useCallback:gb,useContext:Hr,useEffect:tf,useImperativeHandle:hb,useInsertionEffect:cb,useLayoutEffect:db,useMemo:mb,useReducer:Z0,useRef:ob,useState:function(){return Z0(ys)},useDebugValue:rf,useDeferredValue:function(s,a){var d=xr();return Yt===null?nf(d,s,a):fb(d,Yt.memoizedState,s,a)},useTransition:function(){var s=Z0(ys)[0],a=xr().memoizedState;return[typeof s=="boolean"?s:rd(s),a]},useSyncExternalStore:G5,useId:bb,useHostTransitionStatus:of,useFormState:sb,useActionState:sb,useOptimistic:function(s,a){var d=xr();return Yt!==null?X5(d,Yt,s,a):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:X0,useCacheRefresh:vb};Ab.useEffectEvent=lb;function cf(s,a,d,g){a=s.memoizedState,d=d(g,a),d=d==null?a:x({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var df={enqueueSetState:function(s,a,d){s=s._reactInternals;var g=On(),y=no(g);y.payload=a,d!=null&&(y.callback=d),a=io(s,y,g),a!==null&&(wn(a,s,g),Zc(a,s,g))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var g=On(),y=no(g);y.tag=1,y.payload=a,d!=null&&(y.callback=d),a=io(s,y,g),a!==null&&(wn(a,s,g),Zc(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=On(),g=no(d);g.tag=2,a!=null&&(g.callback=a),a=io(s,g,d),a!==null&&(wn(a,s,d),Zc(a,s,d))}};function kb(s,a,d,g,y,v,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,v,C):a.prototype&&a.prototype.isPureReactComponent?!Gc(d,g)||!Gc(y,v):!0}function Eb(s,a,d,g){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,g),a.state!==s&&df.enqueueReplaceState(a,a.state,null)}function wa(s,a){var d=a;if("ref"in a){d={};for(var g in a)g!=="ref"&&(d[g]=a[g])}if(s=s.defaultProps){d===a&&(d=x({},d));for(var y in s)d[y]===void 0&&(d[y]=s[y])}return d}function _b(s){nh(s)}function Rb(s){console.error(s)}function Cb(s){nh(s)}function kh(s,a){try{var d=s.onUncaughtError;d(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function Ib(s,a,d){try{var g=s.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function uf(s,a,d){return d=no(d),d.tag=3,d.payload={element:null},d.callback=function(){kh(s,a)},d}function Fb(s){return s=no(s),s.tag=3,s}function Db(s,a,d,g){var y=d.type.getDerivedStateFromError;if(typeof y=="function"){var v=g.value;s.payload=function(){return y(v)},s.callback=function(){Ib(a,d,g)}}var C=d.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){Ib(a,d,g),typeof y!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var $=g.stack;this.componentDidCatch(g.value,{componentStack:$!==null?$:""})})}function W3(s,a,d,g,y){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=d.alternate,a!==null&&hl(a,d,y,!0),d=Dn.current,d!==null){switch(d.tag){case 31:case 13:return Jn===null?Mh():d.alternate===null&&hr===0&&(hr=3),d.flags&=-257,d.flags|=65536,d.lanes=y,g===gh?d.flags|=16384:(a=d.updateQueue,a===null?d.updateQueue=new Set([g]):a.add(g),zf(s,g,y)),!1;case 22:return d.flags|=65536,g===gh?d.flags|=16384:(a=d.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=a):(d=a.retryQueue,d===null?a.retryQueue=new Set([g]):d.add(g)),zf(s,g,y)),!1}throw Error(i(435,d.tag))}return zf(s,g,y),Mh(),!1}if(Ft)return a=Dn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,g!==R0&&(s=Error(i(422),{cause:g}),qc(Kn(s,d)))):(g!==R0&&(a=Error(i(423),{cause:g}),qc(Kn(a,d))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,g=Kn(g,d),y=uf(s.stateNode,g,y),N0(s,y),hr!==4&&(hr=2)),!1;var v=Error(i(520),{cause:g});if(v=Kn(v,d),hd===null?hd=[v]:hd.push(v),hr!==4&&(hr=2),a===null)return!0;g=Kn(g,d),d=a;do{switch(d.tag){case 3:return d.flags|=65536,s=y&-y,d.lanes|=s,s=uf(d.stateNode,g,s),N0(d,s),!1;case 1:if(a=d.type,v=d.stateNode,(d.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(uo===null||!uo.has(v))))return d.flags|=65536,y&=-y,d.lanes|=y,y=Fb(y),Db(y,s,d,g),N0(d,y),!1}d=d.return}while(d!==null);return!1}var hf=Error(i(461)),kr=!1;function Ur(s,a,d,g){a.child=s===null?O5(a,null,d,g):va(a,s.child,d,g)}function Pb(s,a,d,g,y){d=d.render;var v=a.ref;if("ref"in g){var C={};for(var $ in g)$!=="ref"&&(C[$]=g[$])}else C=g;return pa(a),g=U0(s,a,d,C,v,y),$=q0(),s!==null&&!kr?(Y0(s,a,y),xs(s,a,y)):(Ft&&$&&E0(a),a.flags|=1,Ur(s,a,g,y),a.child)}function Bb(s,a,d,g,y){if(s===null){var v=d.type;return typeof v=="function"&&!j0(v)&&v.defaultProps===void 0&&d.compare===null?(a.tag=15,a.type=v,zb(s,a,v,g,y)):(s=ah(d.type,null,g,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,!vf(s,y)){var C=v.memoizedProps;if(d=d.compare,d=d!==null?d:Gc,d(C,g)&&s.ref===a.ref)return xs(s,a,y)}return a.flags|=1,s=hs(v,g),s.ref=a.ref,s.return=a,a.child=s}function zb(s,a,d,g,y){if(s!==null){var v=s.memoizedProps;if(Gc(v,g)&&s.ref===a.ref)if(kr=!1,a.pendingProps=g=v,vf(s,y))(s.flags&131072)!==0&&(kr=!0);else return a.lanes=s.lanes,xs(s,a,y)}return gf(s,a,d,g,y)}function Ob(s,a,d,g){var y=g.children,v=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|d:d,s!==null){for(g=a.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;g=y&~v}else g=0,a.child=null;return Mb(s,a,v,d,g)}if((d&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&uh(a,v!==null?v.cachePool:null),v!==null?N5(a,v):V0(),$5(a);else return g=a.lanes=536870912,Mb(s,a,v!==null?v.baseLanes|d:d,d,g)}else v!==null?(uh(a,v.cachePool),N5(a,v),oo(),a.memoizedState=null):(s!==null&&uh(a,null),V0(),oo());return Ur(s,a,y,d),a.child}function sd(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Mb(s,a,d,g,y){var v=z0();return v=v===null?null:{parent:jr._currentValue,pool:v},a.memoizedState={baseLanes:d,cachePool:v},s!==null&&uh(a,null),V0(),$5(a),s!==null&&hl(s,a,g,!0),a.childLanes=y,null}function Eh(s,a){return a=Rh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Lb(s,a,d){return va(a,s.child,null,d),s=Eh(a,a.pendingProps),s.flags|=2,Pn(a),a.memoizedState=null,s}function G3(s,a,d){var g=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Ft){if(g.mode==="hidden")return s=Eh(a,g),a.lanes=536870912,sd(null,s);if(G0(a),(s=tr)?(s=Q2(s,Zn),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Zs!==null?{id:$i,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},d=w5(s),d.return=a,a.child=d,Gr=a,tr=null)):s=null,s===null)throw eo(a);return a.lanes=536870912,null}return Eh(a,g)}var v=s.memoizedState;if(v!==null){var C=v.dehydrated;if(G0(a),y)if(a.flags&256)a.flags&=-257,a=Lb(s,a,d);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(kr||hl(s,a,d,!1),y=(d&s.childLanes)!==0,kr||y){if(g=Jt,g!==null&&(C=Be(g,d),C!==0&&C!==v.retryLane))throw v.retryLane=C,ha(s,C),wn(g,s,C),hf;Mh(),a=Lb(s,a,d)}else s=v.treeContext,tr=ei(C.nextSibling),Gr=a,Ft=!0,Js=null,Zn=!1,s!==null&&A5(a,s),a=Eh(a,g),a.flags|=4096;return a}return s=hs(s.child,{mode:g.mode,children:g.children}),s.ref=a.ref,a.child=s,s.return=a,s}function _h(s,a){var d=a.ref;if(d===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(s===null||s.ref!==d)&&(a.flags|=4194816)}}function gf(s,a,d,g,y){return pa(a),d=U0(s,a,d,g,void 0,y),g=q0(),s!==null&&!kr?(Y0(s,a,y),xs(s,a,y)):(Ft&&g&&E0(a),a.flags|=1,Ur(s,a,d,y),a.child)}function Nb(s,a,d,g,y,v){return pa(a),a.updateQueue=null,d=W5(a,g,d,y),V5(s),g=q0(),s!==null&&!kr?(Y0(s,a,v),xs(s,a,v)):(Ft&&g&&E0(a),a.flags|=1,Ur(s,a,d,v),a.child)}function $b(s,a,d,g,y){if(pa(a),a.stateNode===null){var v=ll,C=d.contextType;typeof C=="object"&&C!==null&&(v=Hr(C)),v=new d(g,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=df,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=g,v.state=a.memoizedState,v.refs={},M0(a),C=d.contextType,v.context=typeof C=="object"&&C!==null?Hr(C):ll,v.state=a.memoizedState,C=d.getDerivedStateFromProps,typeof C=="function"&&(cf(a,d,C,g),v.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(C=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),C!==v.state&&df.enqueueReplaceState(v,v.state,null),ed(a,g,v,y),Jc(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(s===null){v=a.stateNode;var $=a.memoizedProps,q=wa(d,$);v.props=q;var se=v.context,ge=d.contextType;C=ll,typeof ge=="object"&&ge!==null&&(C=Hr(ge));var we=d.getDerivedStateFromProps;ge=typeof we=="function"||typeof v.getSnapshotBeforeUpdate=="function",$=a.pendingProps!==$,ge||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||($||se!==C)&&Eb(a,v,g,C),ro=!1;var ae=a.memoizedState;v.state=ae,ed(a,g,v,y),Jc(),se=a.memoizedState,$||ae!==se||ro?(typeof we=="function"&&(cf(a,d,we,g),se=a.memoizedState),(q=ro||kb(a,d,q,g,ae,se,C))?(ge||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=se),v.props=g,v.state=se,v.context=C,g=q):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{v=a.stateNode,L0(s,a),C=a.memoizedProps,ge=wa(d,C),v.props=ge,we=a.pendingProps,ae=v.context,se=d.contextType,q=ll,typeof se=="object"&&se!==null&&(q=Hr(se)),$=d.getDerivedStateFromProps,(se=typeof $=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==we||ae!==q)&&Eb(a,v,g,q),ro=!1,ae=a.memoizedState,v.state=ae,ed(a,g,v,y),Jc();var de=a.memoizedState;C!==we||ae!==de||ro||s!==null&&s.dependencies!==null&&ch(s.dependencies)?(typeof $=="function"&&(cf(a,d,$,g),de=a.memoizedState),(ge=ro||kb(a,d,ge,g,ae,de,q)||s!==null&&s.dependencies!==null&&ch(s.dependencies))?(se||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(g,de,q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(g,de,q)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=de),v.props=g,v.state=de,v.context=q,g=ge):(typeof v.componentDidUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),g=!1)}return v=g,_h(s,a),g=(a.flags&128)!==0,v||g?(v=a.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,s!==null&&g?(a.child=va(a,s.child,null,y),a.child=va(a,null,d,y)):Ur(s,a,d,y),a.memoizedState=v.state,s=a.child):s=xs(s,a,y),s}function Vb(s,a,d,g){return ma(),a.flags|=256,Ur(s,a,d,g),a.child}var mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ff(s){return{baseLanes:s,cachePool:I5()}}function pf(s,a,d){return s=s!==null?s.childLanes&~d:0,a&&(s|=zn),s}function Wb(s,a,d){var g=a.pendingProps,y=!1,v=(a.flags&128)!==0,C;if((C=v)||(C=s!==null&&s.memoizedState===null?!1:(yr.current&2)!==0),C&&(y=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ft){if(y?so(a):oo(),(s=tr)?(s=Q2(s,Zn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Zs!==null?{id:$i,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},d=w5(s),d.return=a,a.child=d,Gr=a,tr=null)):s=null,s===null)throw eo(a);return Zf(s)?a.lanes=32:a.lanes=536870912,null}var $=g.children;return g=g.fallback,y?(oo(),y=a.mode,$=Rh({mode:"hidden",children:$},y),g=ga(g,y,d,null),$.return=a,g.return=a,$.sibling=g,a.child=$,g=a.child,g.memoizedState=ff(d),g.childLanes=pf(s,C,d),a.memoizedState=mf,sd(null,g)):(so(a),yf(a,$))}var q=s.memoizedState;if(q!==null&&($=q.dehydrated,$!==null)){if(v)a.flags&256?(so(a),a.flags&=-257,a=xf(s,a,d)):a.memoizedState!==null?(oo(),a.child=s.child,a.flags|=128,a=null):(oo(),$=g.fallback,y=a.mode,g=Rh({mode:"visible",children:g.children},y),$=ga($,y,d,null),$.flags|=2,g.return=a,$.return=a,g.sibling=$,a.child=g,va(a,s.child,null,d),g=a.child,g.memoizedState=ff(d),g.childLanes=pf(s,C,d),a.memoizedState=mf,a=sd(null,g));else if(so(a),Zf($)){if(C=$.nextSibling&&$.nextSibling.dataset,C)var se=C.dgst;C=se,g=Error(i(419)),g.stack="",g.digest=C,qc({value:g,source:null,stack:null}),a=xf(s,a,d)}else if(kr||hl(s,a,d,!1),C=(d&s.childLanes)!==0,kr||C){if(C=Jt,C!==null&&(g=Be(C,d),g!==0&&g!==q.retryLane))throw q.retryLane=g,ha(s,g),wn(C,s,g),hf;Qf($)||Mh(),a=xf(s,a,d)}else Qf($)?(a.flags|=192,a.child=s.child,a=null):(s=q.treeContext,tr=ei($.nextSibling),Gr=a,Ft=!0,Js=null,Zn=!1,s!==null&&A5(a,s),a=yf(a,g.children),a.flags|=4096);return a}return y?(oo(),$=g.fallback,y=a.mode,q=s.child,se=q.sibling,g=hs(q,{mode:"hidden",children:g.children}),g.subtreeFlags=q.subtreeFlags&65011712,se!==null?$=hs(se,$):($=ga($,y,d,null),$.flags|=2),$.return=a,g.return=a,g.sibling=$,a.child=g,sd(null,g),g=a.child,$=s.child.memoizedState,$===null?$=ff(d):(y=$.cachePool,y!==null?(q=jr._currentValue,y=y.parent!==q?{parent:q,pool:q}:y):y=I5(),$={baseLanes:$.baseLanes|d,cachePool:y}),g.memoizedState=$,g.childLanes=pf(s,C,d),a.memoizedState=mf,sd(s.child,g)):(so(a),d=s.child,s=d.sibling,d=hs(d,{mode:"visible",children:g.children}),d.return=a,d.sibling=null,s!==null&&(C=a.deletions,C===null?(a.deletions=[s],a.flags|=16):C.push(s)),a.child=d,a.memoizedState=null,d)}function yf(s,a){return a=Rh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Rh(s,a){return s=Fn(22,s,null,a),s.lanes=0,s}function xf(s,a,d){return va(a,s.child,null,d),s=yf(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Gb(s,a,d){s.lanes|=a;var g=s.alternate;g!==null&&(g.lanes|=a),F0(s.return,a,d)}function bf(s,a,d,g,y,v){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:y,treeForkCount:v}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=d,C.tailMode=y,C.treeForkCount=v)}function Hb(s,a,d){var g=a.pendingProps,y=g.revealOrder,v=g.tail;g=g.children;var C=yr.current,$=(C&2)!==0;if($?(C=C&1|2,a.flags|=128):C&=1,te(yr,C),Ur(s,a,g,d),g=Ft?Uc:0,!$&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Gb(s,d,a);else if(s.tag===19)Gb(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(d=a.child,y=null;d!==null;)s=d.alternate,s!==null&&yh(s)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),bf(a,!1,y,d,v,g);break;case"backwards":case"unstable_legacy-backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&yh(s)===null){a.child=y;break}s=y.sibling,y.sibling=d,d=y,y=s}bf(a,!0,d,null,v,g);break;case"together":bf(a,!1,null,null,void 0,g);break;default:a.memoizedState=null}return a.child}function xs(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),co|=a.lanes,(d&a.childLanes)===0)if(s!==null){if(hl(s,a,d,!1),(d&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,d=hs(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=hs(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function vf(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&ch(s)))}function H3(s,a,d){switch(a.tag){case 3:Re(a,a.stateNode.containerInfo),to(a,jr,s.memoizedState.cache),ma();break;case 27:case 5:$e(a);break;case 4:Re(a,a.stateNode.containerInfo);break;case 10:to(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,G0(a),null;break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(so(a),a.flags|=128,null):(d&a.child.childLanes)!==0?Wb(s,a,d):(so(a),s=xs(s,a,d),s!==null?s.sibling:null);so(a);break;case 19:var y=(s.flags&128)!==0;if(g=(d&a.childLanes)!==0,g||(hl(s,a,d,!1),g=(d&a.childLanes)!==0),y){if(g)return Hb(s,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),te(yr,yr.current),g)break;return null;case 22:return a.lanes=0,Ob(s,a,d,a.pendingProps);case 24:to(a,jr,s.memoizedState.cache)}return xs(s,a,d)}function Ub(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps)kr=!0;else{if(!vf(s,d)&&(a.flags&128)===0)return kr=!1,H3(s,a,d);kr=(s.flags&131072)!==0}else kr=!1,Ft&&(a.flags&1048576)!==0&&j5(a,Uc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var g=a.pendingProps;if(s=xa(a.elementType),a.type=s,typeof s=="function")j0(s)?(g=wa(s,g),a.tag=1,a=$b(null,a,s,g,d)):(a.tag=0,a=gf(null,a,s,g,d));else{if(s!=null){var y=s.$$typeof;if(y===I){a.tag=11,a=Pb(null,a,s,g,d);break e}else if(y===R){a.tag=14,a=Bb(null,a,s,g,d);break e}}throw a=Z(s)||s,Error(i(306,a,""))}}return a;case 0:return gf(s,a,a.type,a.pendingProps,d);case 1:return g=a.type,y=wa(g,a.pendingProps),$b(s,a,g,y,d);case 3:e:{if(Re(a,a.stateNode.containerInfo),s===null)throw Error(i(387));g=a.pendingProps;var v=a.memoizedState;y=v.element,L0(s,a),ed(a,g,null,d);var C=a.memoizedState;if(g=C.cache,to(a,jr,g),g!==v.cache&&D0(a,[jr],d,!0),Jc(),g=C.element,v.isDehydrated)if(v={element:g,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=Vb(s,a,g,d);break e}else if(g!==y){y=Kn(Error(i(424)),a),qc(y),a=Vb(s,a,g,d);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(tr=ei(s.firstChild),Gr=a,Ft=!0,Js=null,Zn=!0,d=O5(a,null,g,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(ma(),g===y){a=xs(s,a,d);break e}Ur(s,a,g,d)}a=a.child}return a;case 26:return _h(s,a),s===null?(d=nv(a.type,null,a.pendingProps,null))?a.memoizedState=d:Ft||(d=a.type,s=a.pendingProps,g=Hh(xe.current).createElement(d),g[Sr]=a,g[zr]=s,qr(g,d,s),wr(g),a.stateNode=g):a.memoizedState=nv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return $e(a),s===null&&Ft&&(g=a.stateNode=ev(a.type,a.pendingProps,xe.current),Gr=a,Zn=!0,y=tr,fo(a.type)?(Jf=y,tr=ei(g.firstChild)):tr=y),Ur(s,a,a.pendingProps.children,d),_h(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ft&&((y=g=tr)&&(g=S_(g,a.type,a.pendingProps,Zn),g!==null?(a.stateNode=g,Gr=a,tr=ei(g.firstChild),Zn=!1,y=!0):y=!1),y||eo(a)),$e(a),y=a.type,v=a.pendingProps,C=s!==null?s.memoizedProps:null,g=v.children,Yf(y,v)?g=null:C!==null&&Yf(y,C)&&(a.flags|=32),a.memoizedState!==null&&(y=U0(s,a,z3,null,null,d),vd._currentValue=y),_h(s,a),Ur(s,a,g,d),a.child;case 6:return s===null&&Ft&&((s=d=tr)&&(d=w_(d,a.pendingProps,Zn),d!==null?(a.stateNode=d,Gr=a,tr=null,s=!0):s=!1),s||eo(a)),null;case 13:return Wb(s,a,d);case 4:return Re(a,a.stateNode.containerInfo),g=a.pendingProps,s===null?a.child=va(a,null,g,d):Ur(s,a,g,d),a.child;case 11:return Pb(s,a,a.type,a.pendingProps,d);case 7:return Ur(s,a,a.pendingProps,d),a.child;case 8:return Ur(s,a,a.pendingProps.children,d),a.child;case 12:return Ur(s,a,a.pendingProps.children,d),a.child;case 10:return g=a.pendingProps,to(a,a.type,g.value),Ur(s,a,g.children,d),a.child;case 9:return y=a.type._context,g=a.pendingProps.children,pa(a),y=Hr(y),g=g(y),a.flags|=1,Ur(s,a,g,d),a.child;case 14:return Bb(s,a,a.type,a.pendingProps,d);case 15:return zb(s,a,a.type,a.pendingProps,d);case 19:return Hb(s,a,d);case 31:return G3(s,a,d);case 22:return Ob(s,a,d,a.pendingProps);case 24:return pa(a),g=Hr(jr),s===null?(y=z0(),y===null&&(y=Jt,v=P0(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=d),y=v),a.memoizedState={parent:g,cache:y},M0(a),to(a,jr,y)):((s.lanes&d)!==0&&(L0(s,a),ed(a,null,null,d),Jc()),y=s.memoizedState,v=a.memoizedState,y.parent!==g?(y={parent:g,cache:g},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),to(a,jr,g)):(g=v.cache,to(a,jr,g),g!==y.cache&&D0(a,[jr],d,!0))),Ur(s,a,a.pendingProps.children,d),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function bs(s){s.flags|=4}function Sf(s,a,d,g,y){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(b2())s.flags|=8192;else throw ba=gh,O0}else s.flags&=-16777217}function qb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!lv(a))if(b2())s.flags|=8192;else throw ba=gh,O0}function Ch(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?wt():536870912,s.lanes|=a,jl|=a)}function od(s,a){if(!Ft)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function rr(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(a)for(var y=s.child;y!==null;)d|=y.lanes|y.childLanes,g|=y.subtreeFlags&65011712,g|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)d|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=g,s.childLanes=d,a}function U3(s,a,d){var g=a.pendingProps;switch(_0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(a),null;case 1:return rr(a),null;case 3:return d=a.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),fs(jr),Te(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(ul(a)?bs(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,C0())),rr(a),null;case 26:var y=a.type,v=a.memoizedState;return s===null?(bs(a),v!==null?(rr(a),qb(a,v)):(rr(a),Sf(a,y,null,g,d))):v?v!==s.memoizedState?(bs(a),rr(a),qb(a,v)):(rr(a),a.flags&=-16777217):(s=s.memoizedProps,s!==g&&bs(a),rr(a),Sf(a,y,s,g,d)),null;case 27:if(rt(a),d=xe.current,y=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==g&&bs(a);else{if(!g){if(a.stateNode===null)throw Error(i(166));return rr(a),null}s=le.current,ul(a)?k5(a):(s=ev(y,g,d),a.stateNode=s,bs(a))}return rr(a),null;case 5:if(rt(a),y=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==g&&bs(a);else{if(!g){if(a.stateNode===null)throw Error(i(166));return rr(a),null}if(v=le.current,ul(a))k5(a);else{var C=Hh(xe.current);switch(v){case 1:v=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=C.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof g.is=="string"?C.createElement("select",{is:g.is}):C.createElement("select"),g.multiple?v.multiple=!0:g.size&&(v.size=g.size);break;default:v=typeof g.is=="string"?C.createElement(y,{is:g.is}):C.createElement(y)}}v[Sr]=a,v[zr]=g;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)v.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=v;e:switch(qr(v,y,g),y){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&bs(a)}}return rr(a),Sf(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,d),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==g&&bs(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(i(166));if(s=xe.current,ul(a)){if(s=a.stateNode,d=a.memoizedProps,g=null,y=Gr,y!==null)switch(y.tag){case 27:case 5:g=y.memoizedProps}s[Sr]=a,s=!!(s.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||W2(s.nodeValue,d)),s||eo(a,!0)}else s=Hh(s).createTextNode(g),s[Sr]=a,a.stateNode=s}return rr(a),null;case 31:if(d=a.memoizedState,s===null||s.memoizedState!==null){if(g=ul(a),d!==null){if(s===null){if(!g)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Sr]=a}else ma(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;rr(a),s=!1}else d=C0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return a.flags&256?(Pn(a),a):(Pn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return rr(a),null;case 13:if(g=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ul(a),g!==null&&g.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Sr]=a}else ma(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;rr(a),y=!1}else y=C0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Pn(a),a):(Pn(a),null)}return Pn(a),(a.flags&128)!==0?(a.lanes=d,a):(d=g!==null,s=s!==null&&s.memoizedState!==null,d&&(g=a.child,y=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(y=g.alternate.memoizedState.cachePool.pool),v=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(v=g.memoizedState.cachePool.pool),v!==y&&(g.flags|=2048)),d!==s&&d&&(a.child.flags|=8192),Ch(a,a.updateQueue),rr(a),null);case 4:return Te(),s===null&&Wf(a.stateNode.containerInfo),rr(a),null;case 10:return fs(a.type),rr(a),null;case 19:if(ke(yr),g=a.memoizedState,g===null)return rr(a),null;if(y=(a.flags&128)!==0,v=g.rendering,v===null)if(y)od(g,!1);else{if(hr!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(v=yh(s),v!==null){for(a.flags|=128,od(g,!1),s=v.updateQueue,a.updateQueue=s,Ch(a,s),a.subtreeFlags=0,s=d,d=a.child;d!==null;)S5(d,s),d=d.sibling;return te(yr,yr.current&1|2),Ft&&gs(a,g.treeForkCount),a.child}s=s.sibling}g.tail!==null&&J()>Bh&&(a.flags|=128,y=!0,od(g,!1),a.lanes=4194304)}else{if(!y)if(s=yh(v),s!==null){if(a.flags|=128,y=!0,s=s.updateQueue,a.updateQueue=s,Ch(a,s),od(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Ft)return rr(a),null}else 2*J()-g.renderingStartTime>Bh&&d!==536870912&&(a.flags|=128,y=!0,od(g,!1),a.lanes=4194304);g.isBackwards?(v.sibling=a.child,a.child=v):(s=g.last,s!==null?s.sibling=v:a.child=v,g.last=v)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=J(),s.sibling=null,d=yr.current,te(yr,y?d&1|2:d&1),Ft&&gs(a,g.treeForkCount),s):(rr(a),null);case 22:case 23:return Pn(a),W0(),g=a.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?(d&536870912)!==0&&(a.flags&128)===0&&(rr(a),a.subtreeFlags&6&&(a.flags|=8192)):rr(a),d=a.updateQueue,d!==null&&Ch(a,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==d&&(a.flags|=2048),s!==null&&ke(ya),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),fs(jr),rr(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function q3(s,a){switch(_0(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return fs(jr),Te(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return rt(a),null;case 31:if(a.memoizedState!==null){if(Pn(a),a.alternate===null)throw Error(i(340));ma()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Pn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ma()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ke(yr),null;case 4:return Te(),null;case 10:return fs(a.type),null;case 22:case 23:return Pn(a),W0(),s!==null&&ke(ya),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return fs(jr),null;case 25:return null;default:return null}}function Yb(s,a){switch(_0(a),a.tag){case 3:fs(jr),Te();break;case 26:case 27:case 5:rt(a);break;case 4:Te();break;case 31:a.memoizedState!==null&&Pn(a);break;case 13:Pn(a);break;case 19:ke(yr);break;case 10:fs(a.type);break;case 22:case 23:Pn(a),W0(),s!==null&&ke(ya);break;case 24:fs(jr)}}function ad(s,a){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&s)===s){g=void 0;var v=d.create,C=d.inst;g=v(),C.destroy=g}d=d.next}while(d!==y)}}catch($){Ht(a,a.return,$)}}function ao(s,a,d){try{var g=a.updateQueue,y=g!==null?g.lastEffect:null;if(y!==null){var v=y.next;g=v;do{if((g.tag&s)===s){var C=g.inst,$=C.destroy;if($!==void 0){C.destroy=void 0,y=a;var q=d,se=$;try{se()}catch(ge){Ht(y,q,ge)}}}g=g.next}while(g!==v)}}catch(ge){Ht(a,a.return,ge)}}function Kb(s){var a=s.updateQueue;if(a!==null){var d=s.stateNode;try{L5(a,d)}catch(g){Ht(s,s.return,g)}}}function Xb(s,a,d){d.props=wa(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(g){Ht(s,a,g)}}function ld(s,a){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof d=="function"?s.refCleanup=d(g):d.current=g}}catch(y){Ht(s,a,y)}}function Wi(s,a){var d=s.ref,g=s.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(y){Ht(s,a,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(y){Ht(s,a,y)}else d.current=null}function Qb(s){var a=s.type,d=s.memoizedProps,g=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(y){Ht(s,s.return,y)}}function wf(s,a,d){try{var g=s.stateNode;f_(g,s.type,d,a),g[zr]=a}catch(y){Ht(s,s.return,y)}}function Zb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&fo(s.type)||s.tag===4}function Tf(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Zb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&fo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function jf(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,a):(a=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,a.appendChild(s),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=fi));else if(g!==4&&(g===27&&fo(s.type)&&(d=s.stateNode,a=null),s=s.child,s!==null))for(jf(s,a,d),s=s.sibling;s!==null;)jf(s,a,d),s=s.sibling}function Ih(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(g!==4&&(g===27&&fo(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Ih(s,a,d),s=s.sibling;s!==null;)Ih(s,a,d),s=s.sibling}function Jb(s){var a=s.stateNode,d=s.memoizedProps;try{for(var g=s.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);qr(a,g,d),a[Sr]=s,a[zr]=d}catch(v){Ht(s,s.return,v)}}var vs=!1,Er=!1,Af=!1,e2=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function Y3(s,a){if(s=s.containerInfo,Uf=Zh,s=h5(s),y0(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var y=g.anchorOffset,v=g.focusNode;g=g.focusOffset;try{d.nodeType,v.nodeType}catch{d=null;break e}var C=0,$=-1,q=-1,se=0,ge=0,we=s,ae=null;t:for(;;){for(var de;we!==d||y!==0&&we.nodeType!==3||($=C+y),we!==v||g!==0&&we.nodeType!==3||(q=C+g),we.nodeType===3&&(C+=we.nodeValue.length),(de=we.firstChild)!==null;)ae=we,we=de;for(;;){if(we===s)break t;if(ae===d&&++se===y&&($=C),ae===v&&++ge===g&&(q=C),(de=we.nextSibling)!==null)break;we=ae,ae=we.parentNode}we=de}d=$===-1||q===-1?null:{start:$,end:q}}else d=null}d=d||{start:0,end:0}}else d=null;for(qf={focusedElem:s,selectionRange:d},Zh=!1,Mr=a;Mr!==null;)if(a=Mr,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Mr=s;else for(;Mr!==null;){switch(a=Mr,v=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)y=s[d],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,d=a,y=v.memoizedProps,v=v.memoizedState,g=d.stateNode;try{var Ye=wa(d.type,y);s=g.getSnapshotBeforeUpdate(Ye,v),g.__reactInternalSnapshotBeforeUpdate=s}catch(lt){Ht(d,d.return,lt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,d=s.nodeType,d===9)Xf(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Xf(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Mr=s;break}Mr=a.return}}function t2(s,a,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:ws(s,d),g&4&&ad(5,d);break;case 1:if(ws(s,d),g&4)if(s=d.stateNode,a===null)try{s.componentDidMount()}catch(C){Ht(d,d.return,C)}else{var y=wa(d.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(y,a,s.__reactInternalSnapshotBeforeUpdate)}catch(C){Ht(d,d.return,C)}}g&64&&Kb(d),g&512&&ld(d,d.return);break;case 3:if(ws(s,d),g&64&&(s=d.updateQueue,s!==null)){if(a=null,d.child!==null)switch(d.child.tag){case 27:case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}try{L5(s,a)}catch(C){Ht(d,d.return,C)}}break;case 27:a===null&&g&4&&Jb(d);case 26:case 5:ws(s,d),a===null&&g&4&&Qb(d),g&512&&ld(d,d.return);break;case 12:ws(s,d);break;case 31:ws(s,d),g&4&&i2(s,d);break;case 13:ws(s,d),g&4&&s2(s,d),g&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=n_.bind(null,d),T_(s,d))));break;case 22:if(g=d.memoizedState!==null||vs,!g){a=a!==null&&a.memoizedState!==null||Er,y=vs;var v=Er;vs=g,(Er=a)&&!v?Ts(s,d,(d.subtreeFlags&8772)!==0):ws(s,d),vs=y,Er=v}break;case 30:break;default:ws(s,d)}}function r2(s){var a=s.alternate;a!==null&&(s.alternate=null,r2(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ya(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var sr=null,xn=!1;function Ss(s,a,d){for(d=d.child;d!==null;)n2(s,a,d),d=d.sibling}function n2(s,a,d){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(Fe,d)}catch{}switch(d.tag){case 26:Er||Wi(d,a),Ss(s,a,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Er||Wi(d,a);var g=sr,y=xn;fo(d.type)&&(sr=d.stateNode,xn=!1),Ss(s,a,d),yd(d.stateNode),sr=g,xn=y;break;case 5:Er||Wi(d,a);case 6:if(g=sr,y=xn,sr=null,Ss(s,a,d),sr=g,xn=y,sr!==null)if(xn)try{(sr.nodeType===9?sr.body:sr.nodeName==="HTML"?sr.ownerDocument.body:sr).removeChild(d.stateNode)}catch(v){Ht(d,a,v)}else try{sr.removeChild(d.stateNode)}catch(v){Ht(d,a,v)}break;case 18:sr!==null&&(xn?(s=sr,K2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),Fl(s)):K2(sr,d.stateNode));break;case 4:g=sr,y=xn,sr=d.stateNode.containerInfo,xn=!0,Ss(s,a,d),sr=g,xn=y;break;case 0:case 11:case 14:case 15:ao(2,d,a),Er||ao(4,d,a),Ss(s,a,d);break;case 1:Er||(Wi(d,a),g=d.stateNode,typeof g.componentWillUnmount=="function"&&Xb(d,a,g)),Ss(s,a,d);break;case 21:Ss(s,a,d);break;case 22:Er=(g=Er)||d.memoizedState!==null,Ss(s,a,d),Er=g;break;default:Ss(s,a,d)}}function i2(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Fl(s)}catch(d){Ht(a,a.return,d)}}}function s2(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Fl(s)}catch(d){Ht(a,a.return,d)}}function K3(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new e2),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new e2),a;default:throw Error(i(435,s.tag))}}function Fh(s,a){var d=K3(s);a.forEach(function(g){if(!d.has(g)){d.add(g);var y=i_.bind(null,s,g);g.then(y,y)}})}function bn(s,a){var d=a.deletions;if(d!==null)for(var g=0;g<d.length;g++){var y=d[g],v=s,C=a,$=C;e:for(;$!==null;){switch($.tag){case 27:if(fo($.type)){sr=$.stateNode,xn=!1;break e}break;case 5:sr=$.stateNode,xn=!1;break e;case 3:case 4:sr=$.stateNode.containerInfo,xn=!0;break e}$=$.return}if(sr===null)throw Error(i(160));n2(v,C,y),sr=null,xn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)o2(a,s),a=a.sibling}var Si=null;function o2(s,a){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bn(a,s),vn(s),g&4&&(ao(3,s,s.return),ad(3,s),ao(5,s,s.return));break;case 1:bn(a,s),vn(s),g&512&&(Er||d===null||Wi(d,d.return)),g&64&&vs&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var y=Si;if(bn(a,s),vn(s),g&512&&(Er||d===null||Wi(d,d.return)),g&4){var v=d!==null?d.memoizedState:null;if(g=s.memoizedState,d===null)if(g===null)if(s.stateNode===null){e:{g=s.type,d=s.memoizedProps,y=y.ownerDocument||y;t:switch(g){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ri]||v[Sr]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(g),y.head.insertBefore(v,y.querySelector("head > title"))),qr(v,g,d),v[Sr]=s,wr(v),g=v;break e;case"link":var C=ov("link","href",y).get(g+(d.href||""));if(C){for(var $=0;$<C.length;$++)if(v=C[$],v.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&v.getAttribute("rel")===(d.rel==null?null:d.rel)&&v.getAttribute("title")===(d.title==null?null:d.title)&&v.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){C.splice($,1);break t}}v=y.createElement(g),qr(v,g,d),y.head.appendChild(v);break;case"meta":if(C=ov("meta","content",y).get(g+(d.content||""))){for($=0;$<C.length;$++)if(v=C[$],v.getAttribute("content")===(d.content==null?null:""+d.content)&&v.getAttribute("name")===(d.name==null?null:d.name)&&v.getAttribute("property")===(d.property==null?null:d.property)&&v.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&v.getAttribute("charset")===(d.charSet==null?null:d.charSet)){C.splice($,1);break t}}v=y.createElement(g),qr(v,g,d),y.head.appendChild(v);break;default:throw Error(i(468,g))}v[Sr]=s,wr(v),g=v}s.stateNode=g}else av(y,s.type,s.stateNode);else s.stateNode=sv(y,g,s.memoizedProps);else v!==g?(v===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):v.count--,g===null?av(y,s.type,s.stateNode):sv(y,g,s.memoizedProps)):g===null&&s.stateNode!==null&&wf(s,s.memoizedProps,d.memoizedProps)}break;case 27:bn(a,s),vn(s),g&512&&(Er||d===null||Wi(d,d.return)),d!==null&&g&4&&wf(s,s.memoizedProps,d.memoizedProps);break;case 5:if(bn(a,s),vn(s),g&512&&(Er||d===null||Wi(d,d.return)),s.flags&32){y=s.stateNode;try{yn(y,"")}catch(Ye){Ht(s,s.return,Ye)}}g&4&&s.stateNode!=null&&(y=s.memoizedProps,wf(s,y,d!==null?d.memoizedProps:y)),g&1024&&(Af=!0);break;case 6:if(bn(a,s),vn(s),g&4){if(s.stateNode===null)throw Error(i(162));g=s.memoizedProps,d=s.stateNode;try{d.nodeValue=g}catch(Ye){Ht(s,s.return,Ye)}}break;case 3:if(Yh=null,y=Si,Si=Uh(a.containerInfo),bn(a,s),Si=y,vn(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Fl(a.containerInfo)}catch(Ye){Ht(s,s.return,Ye)}Af&&(Af=!1,a2(s));break;case 4:g=Si,Si=Uh(s.stateNode.containerInfo),bn(a,s),vn(s),Si=g;break;case 12:bn(a,s),vn(s);break;case 31:bn(a,s),vn(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Fh(s,g)));break;case 13:bn(a,s),vn(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Ph=J()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Fh(s,g)));break;case 22:y=s.memoizedState!==null;var q=d!==null&&d.memoizedState!==null,se=vs,ge=Er;if(vs=se||y,Er=ge||q,bn(a,s),Er=ge,vs=se,vn(s),g&8192)e:for(a=s.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(d===null||q||vs||Er||Ta(s)),d=null,a=s;;){if(a.tag===5||a.tag===26){if(d===null){q=d=a;try{if(v=q.stateNode,y)C=v.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{$=q.stateNode;var we=q.memoizedProps.style,ae=we!=null&&we.hasOwnProperty("display")?we.display:null;$.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ye){Ht(q,q.return,Ye)}}}else if(a.tag===6){if(d===null){q=a;try{q.stateNode.nodeValue=y?"":q.memoizedProps}catch(Ye){Ht(q,q.return,Ye)}}}else if(a.tag===18){if(d===null){q=a;try{var de=q.stateNode;y?X2(de,!0):X2(q.stateNode,!1)}catch(Ye){Ht(q,q.return,Ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;d===a&&(d=null),a=a.return}d===a&&(d=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=s.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,Fh(s,d))));break;case 19:bn(a,s),vn(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Fh(s,g)));break;case 30:break;case 21:break;default:bn(a,s),vn(s)}}function vn(s){var a=s.flags;if(a&2){try{for(var d,g=s.return;g!==null;){if(Zb(g)){d=g;break}g=g.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var y=d.stateNode,v=Tf(s);Ih(s,v,y);break;case 5:var C=d.stateNode;d.flags&32&&(yn(C,""),d.flags&=-33);var $=Tf(s);Ih(s,$,C);break;case 3:case 4:var q=d.stateNode.containerInfo,se=Tf(s);jf(s,se,q);break;default:throw Error(i(161))}}catch(ge){Ht(s,s.return,ge)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function a2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;a2(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function ws(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)t2(s,a.alternate,a),a=a.sibling}function Ta(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:ao(4,a,a.return),Ta(a);break;case 1:Wi(a,a.return);var d=a.stateNode;typeof d.componentWillUnmount=="function"&&Xb(a,a.return,d),Ta(a);break;case 27:yd(a.stateNode);case 26:case 5:Wi(a,a.return),Ta(a);break;case 22:a.memoizedState===null&&Ta(a);break;case 30:Ta(a);break;default:Ta(a)}s=s.sibling}}function Ts(s,a,d){for(d=d&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,y=s,v=a,C=v.flags;switch(v.tag){case 0:case 11:case 15:Ts(y,v,d),ad(4,v);break;case 1:if(Ts(y,v,d),g=v,y=g.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(se){Ht(g,g.return,se)}if(g=v,y=g.updateQueue,y!==null){var $=g.stateNode;try{var q=y.shared.hiddenCallbacks;if(q!==null)for(y.shared.hiddenCallbacks=null,y=0;y<q.length;y++)M5(q[y],$)}catch(se){Ht(g,g.return,se)}}d&&C&64&&Kb(v),ld(v,v.return);break;case 27:Jb(v);case 26:case 5:Ts(y,v,d),d&&g===null&&C&4&&Qb(v),ld(v,v.return);break;case 12:Ts(y,v,d);break;case 31:Ts(y,v,d),d&&C&4&&i2(y,v);break;case 13:Ts(y,v,d),d&&C&4&&s2(y,v);break;case 22:v.memoizedState===null&&Ts(y,v,d),ld(v,v.return);break;case 30:break;default:Ts(y,v,d)}a=a.sibling}}function kf(s,a){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Yc(d))}function Ef(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Yc(s))}function wi(s,a,d,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)l2(s,a,d,g),a=a.sibling}function l2(s,a,d,g){var y=a.flags;switch(a.tag){case 0:case 11:case 15:wi(s,a,d,g),y&2048&&ad(9,a);break;case 1:wi(s,a,d,g);break;case 3:wi(s,a,d,g),y&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Yc(s)));break;case 12:if(y&2048){wi(s,a,d,g),s=a.stateNode;try{var v=a.memoizedProps,C=v.id,$=v.onPostCommit;typeof $=="function"&&$(C,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Ht(a,a.return,q)}}else wi(s,a,d,g);break;case 31:wi(s,a,d,g);break;case 13:wi(s,a,d,g);break;case 23:break;case 22:v=a.stateNode,C=a.alternate,a.memoizedState!==null?v._visibility&2?wi(s,a,d,g):cd(s,a):v._visibility&2?wi(s,a,d,g):(v._visibility|=2,Sl(s,a,d,g,(a.subtreeFlags&10256)!==0||!1)),y&2048&&kf(C,a);break;case 24:wi(s,a,d,g),y&2048&&Ef(a.alternate,a);break;default:wi(s,a,d,g)}}function Sl(s,a,d,g,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=s,C=a,$=d,q=g,se=C.flags;switch(C.tag){case 0:case 11:case 15:Sl(v,C,$,q,y),ad(8,C);break;case 23:break;case 22:var ge=C.stateNode;C.memoizedState!==null?ge._visibility&2?Sl(v,C,$,q,y):cd(v,C):(ge._visibility|=2,Sl(v,C,$,q,y)),y&&se&2048&&kf(C.alternate,C);break;case 24:Sl(v,C,$,q,y),y&&se&2048&&Ef(C.alternate,C);break;default:Sl(v,C,$,q,y)}a=a.sibling}}function cd(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var d=s,g=a,y=g.flags;switch(g.tag){case 22:cd(d,g),y&2048&&kf(g.alternate,g);break;case 24:cd(d,g),y&2048&&Ef(g.alternate,g);break;default:cd(d,g)}a=a.sibling}}var dd=8192;function wl(s,a,d){if(s.subtreeFlags&dd)for(s=s.child;s!==null;)c2(s,a,d),s=s.sibling}function c2(s,a,d){switch(s.tag){case 26:wl(s,a,d),s.flags&dd&&s.memoizedState!==null&&B_(d,Si,s.memoizedState,s.memoizedProps);break;case 5:wl(s,a,d);break;case 3:case 4:var g=Si;Si=Uh(s.stateNode.containerInfo),wl(s,a,d),Si=g;break;case 22:s.memoizedState===null&&(g=s.alternate,g!==null&&g.memoizedState!==null?(g=dd,dd=16777216,wl(s,a,d),dd=g):wl(s,a,d));break;default:wl(s,a,d)}}function d2(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function ud(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var g=a[d];Mr=g,h2(g,s)}d2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)u2(s),s=s.sibling}function u2(s){switch(s.tag){case 0:case 11:case 15:ud(s),s.flags&2048&&ao(9,s,s.return);break;case 3:ud(s);break;case 12:ud(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Dh(s)):ud(s);break;default:ud(s)}}function Dh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var g=a[d];Mr=g,h2(g,s)}d2(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:ao(8,a,a.return),Dh(a);break;case 22:d=a.stateNode,d._visibility&2&&(d._visibility&=-3,Dh(a));break;default:Dh(a)}s=s.sibling}}function h2(s,a){for(;Mr!==null;){var d=Mr;switch(d.tag){case 0:case 11:case 15:ao(8,d,a);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Yc(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Mr=g;else e:for(d=s;Mr!==null;){g=Mr;var y=g.sibling,v=g.return;if(r2(g),g===d){Mr=null;break e}if(y!==null){y.return=v,Mr=y;break e}Mr=v}}}var X3={getCacheForType:function(s){var a=Hr(jr),d=a.data.get(s);return d===void 0&&(d=s(),a.data.set(s,d)),d},cacheSignal:function(){return Hr(jr).controller.signal}},Q3=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Jt=null,jt=null,Et=0,Gt=0,Bn=null,lo=!1,Tl=!1,_f=!1,js=0,hr=0,co=0,ja=0,Rf=0,zn=0,jl=0,hd=null,Sn=null,Cf=!1,Ph=0,g2=0,Bh=1/0,zh=null,uo=null,Pr=0,ho=null,Al=null,As=0,If=0,Ff=null,m2=null,gd=0,Df=null;function On(){return(Nt&2)!==0&&Et!==0?Et&-Et:H.T!==null?Lf():Ua()}function f2(){if(zn===0)if((Et&536870912)===0||Ft){var s=Ne;Ne<<=1,(Ne&3932160)===0&&(Ne=262144),zn=s}else zn=536870912;return s=Dn.current,s!==null&&(s.flags|=32),zn}function wn(s,a,d){(s===Jt&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)&&(kl(s,0),go(s,Et,zn,!1)),Dr(s,d),((Nt&2)===0||s!==Jt)&&(s===Jt&&((Nt&2)===0&&(ja|=d),hr===4&&go(s,Et,zn,!1)),Gi(s))}function p2(s,a,d){if((Nt&6)!==0)throw Error(i(327));var g=!d&&(a&127)===0&&(a&s.expiredLanes)===0||xt(s,a),y=g?e_(s,a):Bf(s,a,!0),v=g;do{if(y===0){Tl&&!g&&go(s,a,0,!1);break}else{if(d=s.current.alternate,v&&!Z3(d)){y=Bf(s,a,!1),v=!1;continue}if(y===2){if(v=a,s.errorRecoveryDisabledLanes&v)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;e:{var $=s;y=hd;var q=$.current.memoizedState.isDehydrated;if(q&&(kl($,C).flags|=256),C=Bf($,C,!1),C!==2){if(_f&&!q){$.errorRecoveryDisabledLanes|=v,ja|=v,y=4;break e}v=Sn,Sn=y,v!==null&&(Sn===null?Sn=v:Sn.push.apply(Sn,v))}y=C}if(v=!1,y!==2)continue}}if(y===1){kl(s,0),go(s,a,0,!0);break}e:{switch(g=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:go(g,a,zn,!lo);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=Ph+300-J(),10<y)){if(go(g,a,zn,!lo),_e(g,0,!0)!==0)break e;As=a,g.timeoutHandle=q2(y2.bind(null,g,d,Sn,zh,Cf,a,zn,ja,jl,lo,v,"Throttled",-0,0),y);break e}y2(g,d,Sn,zh,Cf,a,zn,ja,jl,lo,v,null,-0,0)}}break}while(!0);Gi(s)}function y2(s,a,d,g,y,v,C,$,q,se,ge,we,ae,de){if(s.timeoutHandle=-1,we=a.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},c2(a,v,we);var Ye=(v&62914560)===v?Ph-J():(v&4194048)===v?g2-J():0;if(Ye=z_(we,Ye),Ye!==null){As=v,s.cancelPendingCommit=Ye(A2.bind(null,s,a,v,d,g,y,C,$,q,ge,we,null,ae,de)),go(s,v,C,!se);return}}A2(s,a,v,d,g,y,C,$,q)}function Z3(s){for(var a=s;;){var d=a.tag;if((d===0||d===11||d===15)&&a.flags&16384&&(d=a.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var y=d[g],v=y.getSnapshot;y=y.value;try{if(!In(v(),y))return!1}catch{return!1}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function go(s,a,d,g){a&=~Rf,a&=~ja,s.suspendedLanes|=a,s.pingedLanes&=~a,g&&(s.warmLanes|=a),g=s.expirationTimes;for(var y=a;0<y;){var v=31-Qe(y),C=1<<v;g[v]=-1,y&=~C}d!==0&&Vr(s,d,a)}function Oh(){return(Nt&6)===0?(md(0),!1):!0}function Pf(){if(jt!==null){if(Gt===0)var s=jt.return;else s=jt,ms=fa=null,K0(s),pl=null,Xc=0,s=jt;for(;s!==null;)Yb(s.alternate,s),s=s.return;jt=null}}function kl(s,a){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,x_(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),As=0,Pf(),Jt=s,jt=d=hs(s.current,null),Et=a,Gt=0,Bn=null,lo=!1,Tl=xt(s,a),_f=!1,jl=zn=Rf=ja=co=hr=0,Sn=hd=null,Cf=!1,(a&8)!==0&&(a|=a&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=a;0<g;){var y=31-Qe(g),v=1<<y;a|=s[y],g&=~v}return js=a,ih(),d}function x2(s,a){yt=null,H.H=id,a===fl||a===hh?(a=P5(),Gt=3):a===O0?(a=P5(),Gt=4):Gt=a===hf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Bn=a,jt===null&&(hr=1,kh(s,Kn(a,s.current)))}function b2(){var s=Dn.current;return s===null?!0:(Et&4194048)===Et?Jn===null:(Et&62914560)===Et||(Et&536870912)!==0?s===Jn:!1}function v2(){var s=H.H;return H.H=id,s===null?id:s}function S2(){var s=H.A;return H.A=X3,s}function Mh(){hr=4,lo||(Et&4194048)!==Et&&Dn.current!==null||(Tl=!0),(co&134217727)===0&&(ja&134217727)===0||Jt===null||go(Jt,Et,zn,!1)}function Bf(s,a,d){var g=Nt;Nt|=2;var y=v2(),v=S2();(Jt!==s||Et!==a)&&(zh=null,kl(s,a)),a=!1;var C=hr;e:do try{if(Gt!==0&&jt!==null){var $=jt,q=Bn;switch(Gt){case 8:Pf(),C=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(a=!0);var se=Gt;if(Gt=0,Bn=null,El(s,$,q,se),d&&Tl){C=0;break e}break;default:se=Gt,Gt=0,Bn=null,El(s,$,q,se)}}J3(),C=hr;break}catch(ge){x2(s,ge)}while(!0);return a&&s.shellSuspendCounter++,ms=fa=null,Nt=g,H.H=y,H.A=v,jt===null&&(Jt=null,Et=0,ih()),C}function J3(){for(;jt!==null;)w2(jt)}function e_(s,a){var d=Nt;Nt|=2;var g=v2(),y=S2();Jt!==s||Et!==a?(zh=null,Bh=J()+500,kl(s,a)):Tl=xt(s,a);e:do try{if(Gt!==0&&jt!==null){a=jt;var v=Bn;t:switch(Gt){case 1:Gt=0,Bn=null,El(s,a,v,1);break;case 2:case 9:if(F5(v)){Gt=0,Bn=null,T2(a);break}a=function(){Gt!==2&&Gt!==9||Jt!==s||(Gt=7),Gi(s)},v.then(a,a);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:F5(v)?(Gt=0,Bn=null,T2(a)):(Gt=0,Bn=null,El(s,a,v,7));break;case 5:var C=null;switch(jt.tag){case 26:C=jt.memoizedState;case 5:case 27:var $=jt;if(C?lv(C):$.stateNode.complete){Gt=0,Bn=null;var q=$.sibling;if(q!==null)jt=q;else{var se=$.return;se!==null?(jt=se,Lh(se)):jt=null}break t}}Gt=0,Bn=null,El(s,a,v,5);break;case 6:Gt=0,Bn=null,El(s,a,v,6);break;case 8:Pf(),hr=6;break e;default:throw Error(i(462))}}t_();break}catch(ge){x2(s,ge)}while(!0);return ms=fa=null,H.H=g,H.A=y,Nt=d,jt!==null?0:(Jt=null,Et=0,ih(),hr)}function t_(){for(;jt!==null&&!kt();)w2(jt)}function w2(s){var a=Ub(s.alternate,s,js);s.memoizedProps=s.pendingProps,a===null?Lh(s):jt=a}function T2(s){var a=s,d=a.alternate;switch(a.tag){case 15:case 0:a=Nb(d,a,a.pendingProps,a.type,void 0,Et);break;case 11:a=Nb(d,a,a.pendingProps,a.type.render,a.ref,Et);break;case 5:K0(a);default:Yb(d,a),a=jt=S5(a,js),a=Ub(d,a,js)}s.memoizedProps=s.pendingProps,a===null?Lh(s):jt=a}function El(s,a,d,g){ms=fa=null,K0(a),pl=null,Xc=0;var y=a.return;try{if(W3(s,y,a,d,Et)){hr=1,kh(s,Kn(d,s.current)),jt=null;return}}catch(v){if(y!==null)throw jt=y,v;hr=1,kh(s,Kn(d,s.current)),jt=null;return}a.flags&32768?(Ft||g===1?s=!0:Tl||(Et&536870912)!==0?s=!1:(lo=s=!0,(g===2||g===9||g===3||g===6)&&(g=Dn.current,g!==null&&g.tag===13&&(g.flags|=16384))),j2(a,s)):Lh(a)}function Lh(s){var a=s;do{if((a.flags&32768)!==0){j2(a,lo);return}s=a.return;var d=U3(a.alternate,a,js);if(d!==null){jt=d;return}if(a=a.sibling,a!==null){jt=a;return}jt=a=s}while(a!==null);hr===0&&(hr=5)}function j2(s,a){do{var d=q3(s.alternate,s);if(d!==null){d.flags&=32767,jt=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!a&&(s=s.sibling,s!==null)){jt=s;return}jt=s=d}while(s!==null);hr=6,jt=null}function A2(s,a,d,g,y,v,C,$,q){s.cancelPendingCommit=null;do Nh();while(Pr!==0);if((Nt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(v=a.lanes|a.childLanes,v|=w0,_n(s,d,v,C,$,q),s===Jt&&(jt=Jt=null,Et=0),Al=a,ho=s,As=d,If=v,Ff=y,m2=g,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,s_(mt,function(){return C2(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,y=U.p,U.p=2,C=Nt,Nt|=4;try{Y3(s,a,d)}finally{Nt=C,U.p=y,H.T=g}}Pr=1,k2(),E2(),_2()}}function k2(){if(Pr===1){Pr=0;var s=ho,a=Al,d=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||d){d=H.T,H.T=null;var g=U.p;U.p=2;var y=Nt;Nt|=4;try{o2(a,s);var v=qf,C=h5(s.containerInfo),$=v.focusedElem,q=v.selectionRange;if(C!==$&&$&&$.ownerDocument&&u5($.ownerDocument.documentElement,$)){if(q!==null&&y0($)){var se=q.start,ge=q.end;if(ge===void 0&&(ge=se),"selectionStart"in $)$.selectionStart=se,$.selectionEnd=Math.min(ge,$.value.length);else{var we=$.ownerDocument||document,ae=we&&we.defaultView||window;if(ae.getSelection){var de=ae.getSelection(),Ye=$.textContent.length,lt=Math.min(q.start,Ye),Xt=q.end===void 0?lt:Math.min(q.end,Ye);!de.extend&&lt>Xt&&(C=Xt,Xt=lt,lt=C);var ee=d5($,lt),Y=d5($,Xt);if(ee&&Y&&(de.rangeCount!==1||de.anchorNode!==ee.node||de.anchorOffset!==ee.offset||de.focusNode!==Y.node||de.focusOffset!==Y.offset)){var ie=we.createRange();ie.setStart(ee.node,ee.offset),de.removeAllRanges(),lt>Xt?(de.addRange(ie),de.extend(Y.node,Y.offset)):(ie.setEnd(Y.node,Y.offset),de.addRange(ie))}}}}for(we=[],de=$;de=de.parentNode;)de.nodeType===1&&we.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<we.length;$++){var ye=we[$];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Zh=!!Uf,qf=Uf=null}finally{Nt=y,U.p=g,H.T=d}}s.current=a,Pr=2}}function E2(){if(Pr===2){Pr=0;var s=ho,a=Al,d=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||d){d=H.T,H.T=null;var g=U.p;U.p=2;var y=Nt;Nt|=4;try{t2(s,a.alternate,a)}finally{Nt=y,U.p=g,H.T=d}}Pr=3}}function _2(){if(Pr===4||Pr===3){Pr=0,Ve();var s=ho,a=Al,d=As,g=m2;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Pr=5:(Pr=0,Al=ho=null,R2(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(uo=null),Vt(d),a=a.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(Fe,a,void 0,(a.current.flags&128)===128)}catch{}if(g!==null){a=H.T,y=U.p,U.p=2,H.T=null;try{for(var v=s.onRecoverableError,C=0;C<g.length;C++){var $=g[C];v($.value,{componentStack:$.stack})}}finally{H.T=a,U.p=y}}(As&3)!==0&&Nh(),Gi(s),y=s.pendingLanes,(d&261930)!==0&&(y&42)!==0?s===Df?gd++:(gd=0,Df=s):gd=0,md(0)}}function R2(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Yc(a)))}function Nh(){return k2(),E2(),_2(),C2()}function C2(){if(Pr!==5)return!1;var s=ho,a=If;If=0;var d=Vt(As),g=H.T,y=U.p;try{U.p=32>d?32:d,H.T=null,d=Ff,Ff=null;var v=ho,C=As;if(Pr=0,Al=ho=null,As=0,(Nt&6)!==0)throw Error(i(331));var $=Nt;if(Nt|=4,u2(v.current),l2(v,v.current,C,d),Nt=$,md(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(Fe,v)}catch{}return!0}finally{U.p=y,H.T=g,R2(s,a)}}function I2(s,a,d){a=Kn(d,a),a=uf(s.stateNode,a,2),s=io(s,a,2),s!==null&&(Dr(s,2),Gi(s))}function Ht(s,a,d){if(s.tag===3)I2(s,s,d);else for(;a!==null;){if(a.tag===3){I2(a,s,d);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(uo===null||!uo.has(g))){s=Kn(d,s),d=Fb(2),g=io(a,d,2),g!==null&&(Db(d,g,a,s),Dr(g,2),Gi(g));break}}a=a.return}}function zf(s,a,d){var g=s.pingCache;if(g===null){g=s.pingCache=new Q3;var y=new Set;g.set(a,y)}else y=g.get(a),y===void 0&&(y=new Set,g.set(a,y));y.has(d)||(_f=!0,y.add(d),s=r_.bind(null,s,a,d),a.then(s,s))}function r_(s,a,d){var g=s.pingCache;g!==null&&g.delete(a),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,Jt===s&&(Et&d)===d&&(hr===4||hr===3&&(Et&62914560)===Et&&300>J()-Ph?(Nt&2)===0&&kl(s,0):Rf|=d,jl===Et&&(jl=0)),Gi(s)}function F2(s,a){a===0&&(a=wt()),s=ha(s,a),s!==null&&(Dr(s,a),Gi(s))}function n_(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),F2(s,d)}function i_(s,a){var d=0;switch(s.tag){case 31:case 13:var g=s.stateNode,y=s.memoizedState;y!==null&&(d=y.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(a),F2(s,d)}function s_(s,a){return Ue(s,a)}var $h=null,_l=null,Of=!1,Vh=!1,Mf=!1,mo=0;function Gi(s){s!==_l&&s.next===null&&(_l===null?$h=_l=s:_l=_l.next=s),Vh=!0,Of||(Of=!0,a_())}function md(s,a){if(!Mf&&Vh){Mf=!0;do for(var d=!1,g=$h;g!==null;){if(s!==0){var y=g.pendingLanes;if(y===0)var v=0;else{var C=g.suspendedLanes,$=g.pingedLanes;v=(1<<31-Qe(42|s)+1)-1,v&=y&~(C&~$),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(d=!0,z2(g,v))}else v=Et,v=_e(g,g===Jt?v:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(v&3)===0||xt(g,v)||(d=!0,z2(g,v));g=g.next}while(d);Mf=!1}}function o_(){D2()}function D2(){Vh=Of=!1;var s=0;mo!==0&&y_()&&(s=mo);for(var a=J(),d=null,g=$h;g!==null;){var y=g.next,v=P2(g,a);v===0?(g.next=null,d===null?$h=y:d.next=y,y===null&&(_l=d)):(d=g,(s!==0||(v&3)!==0)&&(Vh=!0)),g=y}Pr!==0&&Pr!==5||md(s),mo!==0&&(mo=0)}function P2(s,a){for(var d=s.suspendedLanes,g=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var C=31-Qe(v),$=1<<C,q=y[C];q===-1?(($&d)===0||($&g)!==0)&&(y[C]=Zt($,a)):q<=a&&(s.expiredLanes|=$),v&=~$}if(a=Jt,d=Et,d=_e(s,s===a?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,d===0||s===a&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&We(g),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||xt(s,d)){if(a=d&-d,a===s.callbackPriority)return a;switch(g!==null&&We(g),Vt(d)){case 2:case 8:d=ut;break;case 32:d=mt;break;case 268435456:d=oe;break;default:d=mt}return g=B2.bind(null,s),d=Ue(d,g),s.callbackPriority=a,s.callbackNode=d,a}return g!==null&&g!==null&&We(g),s.callbackPriority=2,s.callbackNode=null,2}function B2(s,a){if(Pr!==0&&Pr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Nh()&&s.callbackNode!==d)return null;var g=Et;return g=_e(s,s===Jt?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(p2(s,g,a),P2(s,J()),s.callbackNode!=null&&s.callbackNode===d?B2.bind(null,s):null)}function z2(s,a){if(Nh())return null;p2(s,a,!0)}function a_(){b_(function(){(Nt&6)!==0?Ue(Xe,o_):D2()})}function Lf(){if(mo===0){var s=gl;s===0&&(s=qe,qe<<=1,(qe&261888)===0&&(qe=256)),mo=s}return mo}function O2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Za(""+s)}function M2(s,a){var d=a.ownerDocument.createElement("input");return d.name=a.name,d.value=a.value,s.id&&d.setAttribute("form",s.id),a.parentNode.insertBefore(d,a),s=new FormData(s),d.parentNode.removeChild(d),s}function l_(s,a,d,g,y){if(a==="submit"&&d&&d.stateNode===y){var v=O2((y[zr]||null).action),C=g.submitter;C&&(a=(a=C[zr]||null)?O2(a.formAction):C.getAttribute("formAction"),a!==null&&(v=a,C=null));var $=new Oi("action","action",null,g,y);s.push({event:$,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(mo!==0){var q=C?M2(y,C):new FormData(y);sf(d,{pending:!0,data:q,method:y.method,action:v},null,q)}}else typeof v=="function"&&($.preventDefault(),q=C?M2(y,C):new FormData(y),sf(d,{pending:!0,data:q,method:y.method,action:v},v,q))},currentTarget:y}]})}}for(var Nf=0;Nf<S0.length;Nf++){var $f=S0[Nf],c_=$f.toLowerCase(),d_=$f[0].toUpperCase()+$f.slice(1);vi(c_,"on"+d_)}vi(f5,"onAnimationEnd"),vi(p5,"onAnimationIteration"),vi(y5,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(k3,"onTransitionRun"),vi(E3,"onTransitionStart"),vi(_3,"onTransitionCancel"),vi(x5,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fd));function L2(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],y=g.event;g=g.listeners;e:{var v=void 0;if(a)for(var C=g.length-1;0<=C;C--){var $=g[C],q=$.instance,se=$.currentTarget;if($=$.listener,q!==v&&y.isPropagationStopped())break e;v=$,y.currentTarget=se;try{v(y)}catch(ge){nh(ge)}y.currentTarget=null,v=q}else for(C=0;C<g.length;C++){if($=g[C],q=$.instance,se=$.currentTarget,$=$.listener,q!==v&&y.isPropagationStopped())break e;v=$,y.currentTarget=se;try{v(y)}catch(ge){nh(ge)}y.currentTarget=null,v=q}}}}function At(s,a){var d=a[qa];d===void 0&&(d=a[qa]=new Set);var g=s+"__bubble";d.has(g)||(N2(a,s,2,!1),d.add(g))}function Vf(s,a,d){var g=0;a&&(g|=4),N2(d,s,g,a)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function Wf(s){if(!s[Wh]){s[Wh]=!0,Ec.forEach(function(d){d!=="selectionchange"&&(u_.has(d)||Vf(d,!1,s),Vf(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Wh]||(a[Wh]=!0,Vf("selectionchange",!1,a))}}function N2(s,a,d,g){switch(fv(a)){case 2:var y=L_;break;case 8:y=N_;break;default:y=ip}d=y.bind(null,a,d,s),y=void 0,!ia||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),g?y!==void 0?s.addEventListener(a,d,{capture:!0,passive:y}):s.addEventListener(a,d,!0):y!==void 0?s.addEventListener(a,d,{passive:y}):s.addEventListener(a,d,!1)}function Gf(s,a,d,g,y){var v=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var C=g.tag;if(C===3||C===4){var $=g.stateNode.containerInfo;if($===y)break;if(C===4)for(C=g.return;C!==null;){var q=C.tag;if((q===3||q===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;$!==null;){if(C=Ci($),C===null)return;if(q=C.tag,q===5||q===6||q===26||q===27){g=v=C;continue e}$=$.parentNode}}g=g.return}Ys(function(){var se=v,ge=Hn(d),we=[];e:{var ae=b5.get(s);if(ae!==void 0){var de=Oi,Ye=s;switch(s){case"keypress":if(oa(d)===0)break e;case"keydown":case"keyup":de=eh;break;case"focusin":Ye="focus",de=la;break;case"focusout":Ye="blur",de=la;break;case"beforeblur":case"afterblur":de=la;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=k;break;case f5:case p5:case y5:de=qu;break;case x5:de=W;break;case"scroll":case"scrollend":de=Lc;break;case"wheel":de=ce;break;case"copy":case"cut":case"paste":de=Yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=us;break;case"toggle":case"beforetoggle":de=pt}var lt=(a&4)!==0,Xt=!lt&&(s==="scroll"||s==="scrollend"),ee=lt?ae!==null?ae+"Capture":null:ae;lt=[];for(var Y=se,ie;Y!==null;){var ye=Y;if(ie=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ie===null||ee===null||(ye=pi(Y,ee),ye!=null&&lt.push(pd(Y,ye,ie))),Xt)break;Y=Y.return}0<lt.length&&(ae=new de(ae,Ye,null,d,ge),we.push({event:ae,listeners:lt}))}}if((a&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",ae&&d!==zc&&(Ye=d.relatedTarget||d.fromElement)&&(Ci(Ye)||Ye[_i]))break e;if((de||ae)&&(ae=ge.window===ge?ge:(ae=ge.ownerDocument)?ae.defaultView||ae.parentWindow:window,de?(Ye=d.relatedTarget||d.toElement,de=se,Ye=Ye?Ci(Ye):null,Ye!==null&&(Xt=l(Ye),lt=Ye.tag,Ye!==Xt||lt!==5&&lt!==27&&lt!==6)&&(Ye=null)):(de=null,Ye=se),de!==Ye)){if(lt=Nc,ye="onMouseLeave",ee="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(lt=us,ye="onPointerLeave",ee="onPointerEnter",Y="pointer"),Xt=de==null?ae:Rn(de),ie=Ye==null?ae:Rn(Ye),ae=new lt(ye,Y+"leave",de,d,ge),ae.target=Xt,ae.relatedTarget=ie,ye=null,Ci(ge)===se&&(lt=new lt(ee,Y+"enter",Ye,d,ge),lt.target=ie,lt.relatedTarget=Xt,ye=lt),Xt=ye,de&&Ye)t:{for(lt=h_,ee=de,Y=Ye,ie=0,ye=ee;ye;ye=lt(ye))ie++;ye=0;for(var st=Y;st;st=lt(st))ye++;for(;0<ie-ye;)ee=lt(ee),ie--;for(;0<ye-ie;)Y=lt(Y),ye--;for(;ie--;){if(ee===Y||Y!==null&&ee===Y.alternate){lt=ee;break t}ee=lt(ee),Y=lt(Y)}lt=null}else lt=null;de!==null&&$2(we,ae,de,lt,!1),Ye!==null&&Xt!==null&&$2(we,Xt,Ye,lt,!0)}}e:{if(ae=se?Rn(se):window,de=ae.nodeName&&ae.nodeName.toLowerCase(),de==="select"||de==="input"&&ae.type==="file")var zt=i5;else if(r5(ae))if(s5)zt=T3;else{zt=S3;var Ze=v3}else de=ae.nodeName,!de||de.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?se&&Qa(se.elementType)&&(zt=i5):zt=w3;if(zt&&(zt=zt(s,se))){n5(we,zt,d,ge);break e}Ze&&Ze(s,ae,se),s==="focusout"&&se&&ae.type==="number"&&se.memoizedProps.value!=null&&Dc(ae,"number",ae.value)}switch(Ze=se?Rn(se):window,s){case"focusin":(r5(Ze)||Ze.contentEditable==="true")&&(sl=Ze,x0=se,Hc=null);break;case"focusout":Hc=x0=sl=null;break;case"mousedown":b0=!0;break;case"contextmenu":case"mouseup":case"dragend":b0=!1,g5(we,d,ge);break;case"selectionchange":if(A3)break;case"keydown":case"keyup":g5(we,d,ge)}var bt;if(Lt)e:{switch(s){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else il?ca(s,d)&&(_t="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(_t="onCompositionStart");_t&&(Ni&&d.locale!=="ko"&&(il||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&il&&(bt=Mc()):(zi=ge,Oc="value"in zi?zi.value:zi.textContent,il=!0)),Ze=Gh(se,_t),0<Ze.length&&(_t=new Li(_t,s,null,d,ge),we.push({event:_t,listeners:Ze}),bt?_t.data=bt:(bt=nl(d),bt!==null&&(_t.data=bt)))),(bt=qn?p3(s,d):y3(s,d))&&(_t=Gh(se,"onBeforeInput"),0<_t.length&&(Ze=new Li("onBeforeInput","beforeinput",null,d,ge),we.push({event:Ze,listeners:_t}),Ze.data=bt)),l_(we,s,se,d,ge)}L2(we,a)})}function pd(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Gh(s,a){for(var d=a+"Capture",g=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=pi(s,d),y!=null&&g.unshift(pd(s,y,v)),y=pi(s,a),y!=null&&g.push(pd(s,y,v))),s.tag===3)return g;s=s.return}return[]}function h_(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function $2(s,a,d,g,y){for(var v=a._reactName,C=[];d!==null&&d!==g;){var $=d,q=$.alternate,se=$.stateNode;if($=$.tag,q!==null&&q===g)break;$!==5&&$!==26&&$!==27||se===null||(q=se,y?(se=pi(d,v),se!=null&&C.unshift(pd(d,se,q))):y||(se=pi(d,v),se!=null&&C.push(pd(d,se,q)))),d=d.return}C.length!==0&&s.push({event:a,listeners:C})}var g_=/\r\n?/g,m_=/\u0000|\uFFFD/g;function V2(s){return(typeof s=="string"?s:""+s).replace(g_,`
`).replace(m_,"")}function W2(s,a){return a=V2(a),V2(s)===a}function Kt(s,a,d,g,y,v){switch(d){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||yn(s,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&yn(s,""+g);break;case"className":Cn(s,"class",g);break;case"tabIndex":Cn(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(s,d,g);break;case"style":Bc(s,g,v);break;case"data":if(a!=="object"){Cn(s,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||d!=="href")){s.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=Za(""+g),s.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(d==="formAction"?(a!=="input"&&Kt(s,a,"name",y.name,y,null),Kt(s,a,"formEncType",y.formEncType,y,null),Kt(s,a,"formMethod",y.formMethod,y,null),Kt(s,a,"formTarget",y.formTarget,y,null)):(Kt(s,a,"encType",y.encType,y,null),Kt(s,a,"method",y.method,y,null),Kt(s,a,"target",y.target,y,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=Za(""+g),s.setAttribute(d,g);break;case"onClick":g!=null&&(s.onclick=fi);break;case"onScroll":g!=null&&At("scroll",s);break;case"onScrollEnd":g!=null&&At("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}d=Za(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""+g):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":g===!0?s.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,g):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(d,g):s.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(d):s.setAttribute(d,g);break;case"popover":At("beforetoggle",s),At("toggle",s),Ka(s,"popover",g);break;case"xlinkActuate":Tr(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Tr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Tr(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Tr(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Tr(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Tr(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Tr(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Tr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Tr(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ka(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Gu.get(d)||d,Ka(s,d,g))}}function Hf(s,a,d,g,y,v){switch(d){case"style":Bc(s,g,v);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"children":typeof g=="string"?yn(s,g):(typeof g=="number"||typeof g=="bigint")&&yn(s,""+g);break;case"onScroll":g!=null&&At("scroll",s);break;case"onScrollEnd":g!=null&&At("scrollend",s);break;case"onClick":g!=null&&(s.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_c.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(y=d.endsWith("Capture"),a=d.slice(2,y?d.length-7:void 0),v=s[zr]||null,v=v!=null?v[d]:null,typeof v=="function"&&s.removeEventListener(a,v,y),typeof g=="function")){typeof v!="function"&&v!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(a,g,y);break e}d in s?s[d]=g:g===!0?s.setAttribute(d,""):Ka(s,d,g)}}}function qr(s,a,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",s),At("load",s);var g=!1,y=!1,v;for(v in d)if(d.hasOwnProperty(v)){var C=d[v];if(C!=null)switch(v){case"src":g=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Kt(s,a,v,C,d,null)}}y&&Kt(s,a,"srcSet",d.srcSet,d,null),g&&Kt(s,a,"src",d.src,d,null);return;case"input":At("invalid",s);var $=v=C=y=null,q=null,se=null;for(g in d)if(d.hasOwnProperty(g)){var ge=d[g];if(ge!=null)switch(g){case"name":y=ge;break;case"type":C=ge;break;case"checked":q=ge;break;case"defaultChecked":se=ge;break;case"value":v=ge;break;case"defaultValue":$=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,a));break;default:Kt(s,a,g,ge,d,null)}}$u(s,v,$,q,se,C,y,!1);return;case"select":At("invalid",s),g=C=v=null;for(y in d)if(d.hasOwnProperty(y)&&($=d[y],$!=null))switch(y){case"value":v=$;break;case"defaultValue":C=$;break;case"multiple":g=$;default:Kt(s,a,y,$,d,null)}a=v,d=C,s.multiple=!!g,a!=null?Gs(s,!!g,a,!1):d!=null&&Gs(s,!!g,d,!0);return;case"textarea":At("invalid",s),v=y=g=null;for(C in d)if(d.hasOwnProperty(C)&&($=d[C],$!=null))switch(C){case"value":g=$;break;case"defaultValue":y=$;break;case"children":v=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(i(91));break;default:Kt(s,a,C,$,d,null)}Hs(s,g,y,v);return;case"option":for(q in d)if(d.hasOwnProperty(q)&&(g=d[q],g!=null))switch(q){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Kt(s,a,q,g,d,null)}return;case"dialog":At("beforetoggle",s),At("toggle",s),At("cancel",s),At("close",s);break;case"iframe":case"object":At("load",s);break;case"video":case"audio":for(g=0;g<fd.length;g++)At(fd[g],s);break;case"image":At("error",s),At("load",s);break;case"details":At("toggle",s);break;case"embed":case"source":case"link":At("error",s),At("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in d)if(d.hasOwnProperty(se)&&(g=d[se],g!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Kt(s,a,se,g,d,null)}return;default:if(Qa(a)){for(ge in d)d.hasOwnProperty(ge)&&(g=d[ge],g!==void 0&&Hf(s,a,ge,g,d,void 0));return}}for($ in d)d.hasOwnProperty($)&&(g=d[$],g!=null&&Kt(s,a,$,g,d,null))}function f_(s,a,d,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,C=null,$=null,q=null,se=null,ge=null;for(de in d){var we=d[de];if(d.hasOwnProperty(de)&&we!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":q=we;default:g.hasOwnProperty(de)||Kt(s,a,de,null,g,we)}}for(var ae in g){var de=g[ae];if(we=d[ae],g.hasOwnProperty(ae)&&(de!=null||we!=null))switch(ae){case"type":v=de;break;case"name":y=de;break;case"checked":se=de;break;case"defaultChecked":ge=de;break;case"value":C=de;break;case"defaultValue":$=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,a));break;default:de!==we&&Kt(s,a,ae,de,g,we)}}Xa(s,C,$,q,se,ge,v,y);return;case"select":de=C=$=ae=null;for(v in d)if(q=d[v],d.hasOwnProperty(v)&&q!=null)switch(v){case"value":break;case"multiple":de=q;default:g.hasOwnProperty(v)||Kt(s,a,v,null,g,q)}for(y in g)if(v=g[y],q=d[y],g.hasOwnProperty(y)&&(v!=null||q!=null))switch(y){case"value":ae=v;break;case"defaultValue":$=v;break;case"multiple":C=v;default:v!==q&&Kt(s,a,y,v,g,q)}a=$,d=C,g=de,ae!=null?Gs(s,!!d,ae,!1):!!g!=!!d&&(a!=null?Gs(s,!!d,a,!0):Gs(s,!!d,d?[]:"",!1));return;case"textarea":de=ae=null;for($ in d)if(y=d[$],d.hasOwnProperty($)&&y!=null&&!g.hasOwnProperty($))switch($){case"value":break;case"children":break;default:Kt(s,a,$,null,g,y)}for(C in g)if(y=g[C],v=d[C],g.hasOwnProperty(C)&&(y!=null||v!=null))switch(C){case"value":ae=y;break;case"defaultValue":de=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&Kt(s,a,C,y,g,v)}Vu(s,ae,de);return;case"option":for(var Ye in d)if(ae=d[Ye],d.hasOwnProperty(Ye)&&ae!=null&&!g.hasOwnProperty(Ye))switch(Ye){case"selected":s.selected=!1;break;default:Kt(s,a,Ye,null,g,ae)}for(q in g)if(ae=g[q],de=d[q],g.hasOwnProperty(q)&&ae!==de&&(ae!=null||de!=null))switch(q){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Kt(s,a,q,ae,g,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in d)ae=d[lt],d.hasOwnProperty(lt)&&ae!=null&&!g.hasOwnProperty(lt)&&Kt(s,a,lt,null,g,ae);for(se in g)if(ae=g[se],de=d[se],g.hasOwnProperty(se)&&ae!==de&&(ae!=null||de!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,a));break;default:Kt(s,a,se,ae,g,de)}return;default:if(Qa(a)){for(var Xt in d)ae=d[Xt],d.hasOwnProperty(Xt)&&ae!==void 0&&!g.hasOwnProperty(Xt)&&Hf(s,a,Xt,void 0,g,ae);for(ge in g)ae=g[ge],de=d[ge],!g.hasOwnProperty(ge)||ae===de||ae===void 0&&de===void 0||Hf(s,a,ge,ae,g,de);return}}for(var ee in d)ae=d[ee],d.hasOwnProperty(ee)&&ae!=null&&!g.hasOwnProperty(ee)&&Kt(s,a,ee,null,g,ae);for(we in g)ae=g[we],de=d[we],!g.hasOwnProperty(we)||ae===de||ae==null&&de==null||Kt(s,a,we,ae,g,de)}function G2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p_(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,d=performance.getEntriesByType("resource"),g=0;g<d.length;g++){var y=d[g],v=y.transferSize,C=y.initiatorType,$=y.duration;if(v&&$&&G2(C)){for(C=0,$=y.responseEnd,g+=1;g<d.length;g++){var q=d[g],se=q.startTime;if(se>$)break;var ge=q.transferSize,we=q.initiatorType;ge&&G2(we)&&(q=q.responseEnd,C+=ge*(q<$?1:($-se)/(q-se)))}if(--g,a+=8*(v+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Uf=null,qf=null;function Hh(s){return s.nodeType===9?s:s.ownerDocument}function H2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U2(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Yf(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kf=null;function y_(){var s=window.event;return s&&s.type==="popstate"?s===Kf?!1:(Kf=s,!0):(Kf=null,!1)}var q2=typeof setTimeout=="function"?setTimeout:void 0,x_=typeof clearTimeout=="function"?clearTimeout:void 0,Y2=typeof Promise=="function"?Promise:void 0,b_=typeof queueMicrotask=="function"?queueMicrotask:typeof Y2<"u"?function(s){return Y2.resolve(null).then(s).catch(v_)}:q2;function v_(s){setTimeout(function(){throw s})}function fo(s){return s==="head"}function K2(s,a){var d=a,g=0;do{var y=d.nextSibling;if(s.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"||d==="/&"){if(g===0){s.removeChild(y),Fl(a);return}g--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")g++;else if(d==="html")yd(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,yd(d);for(var v=d.firstChild;v;){var C=v.nextSibling,$=v.nodeName;v[Ri]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&v.rel.toLowerCase()==="stylesheet"||d.removeChild(v),v=C}}else d==="body"&&yd(s.ownerDocument.body);d=y}while(d);Fl(a)}function X2(s,a){var d=s;s=0;do{var g=d.nextSibling;if(d.nodeType===1?a?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(a?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=g}while(d)}function Xf(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var d=a;switch(a=a.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Xf(d),Ya(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function S_(s,a,d,g){for(;s.nodeType===1;){var y=d;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[Ri])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ei(s.nextSibling),s===null)break}return null}function w_(s,a,d){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=ei(s.nextSibling),s===null))return null;return s}function Q2(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ei(s.nextSibling),s===null))return null;return s}function Qf(s){return s.data==="$?"||s.data==="$~"}function Zf(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function T_(s,a){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||d.readyState!=="loading")a();else{var g=function(){a(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function ei(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Jf=null;function Z2(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(a===0)return ei(s.nextSibling);a--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||a++}s=s.nextSibling}return null}function J2(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(a===0)return s;a--}else d!=="/$"&&d!=="/&"||a++}s=s.previousSibling}return null}function ev(s,a,d){switch(a=Hh(d),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function yd(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ya(s)}var ti=new Map,tv=new Set;function Uh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ks=U.d;U.d={f:j_,r:A_,D:k_,C:E_,L:__,m:R_,X:I_,S:C_,M:F_};function j_(){var s=ks.f(),a=Oh();return s||a}function A_(s){var a=Gn(s);a!==null&&a.tag===5&&a.type==="form"?xb(a):ks.r(s)}var Rl=typeof document>"u"?null:document;function rv(s,a,d){var g=Rl;if(g&&typeof a=="string"&&a){var y=pn(a);y='link[rel="'+s+'"][href="'+y+'"]',typeof d=="string"&&(y+='[crossorigin="'+d+'"]'),tv.has(y)||(tv.add(y),s={rel:s,crossOrigin:d,href:a},g.querySelector(y)===null&&(a=g.createElement("link"),qr(a,"link",s),wr(a),g.head.appendChild(a)))}}function k_(s){ks.D(s),rv("dns-prefetch",s,null)}function E_(s,a){ks.C(s,a),rv("preconnect",s,a)}function __(s,a,d){ks.L(s,a,d);var g=Rl;if(g&&s&&a){var y='link[rel="preload"][as="'+pn(a)+'"]';a==="image"&&d&&d.imageSrcSet?(y+='[imagesrcset="'+pn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(y+='[imagesizes="'+pn(d.imageSizes)+'"]')):y+='[href="'+pn(s)+'"]';var v=y;switch(a){case"style":v=Cl(s);break;case"script":v=Il(s)}ti.has(v)||(s=x({rel:"preload",href:a==="image"&&d&&d.imageSrcSet?void 0:s,as:a},d),ti.set(v,s),g.querySelector(y)!==null||a==="style"&&g.querySelector(xd(v))||a==="script"&&g.querySelector(bd(v))||(a=g.createElement("link"),qr(a,"link",s),wr(a),g.head.appendChild(a)))}}function R_(s,a){ks.m(s,a);var d=Rl;if(d&&s){var g=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+pn(g)+'"][href="'+pn(s)+'"]',v=y;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Il(s)}if(!ti.has(v)&&(s=x({rel:"modulepreload",href:s},a),ti.set(v,s),d.querySelector(y)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(bd(v)))return}g=d.createElement("link"),qr(g,"link",s),wr(g),d.head.appendChild(g)}}}function C_(s,a,d){ks.S(s,a,d);var g=Rl;if(g&&s){var y=Ii(g).hoistableStyles,v=Cl(s);a=a||"default";var C=y.get(v);if(!C){var $={loading:0,preload:null};if(C=g.querySelector(xd(v)))$.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":a},d),(d=ti.get(v))&&ep(s,d);var q=C=g.createElement("link");wr(q),qr(q,"link",s),q._p=new Promise(function(se,ge){q.onload=se,q.onerror=ge}),q.addEventListener("load",function(){$.loading|=1}),q.addEventListener("error",function(){$.loading|=2}),$.loading|=4,qh(C,a,g)}C={type:"stylesheet",instance:C,count:1,state:$},y.set(v,C)}}}function I_(s,a){ks.X(s,a);var d=Rl;if(d&&s){var g=Ii(d).hoistableScripts,y=Il(s),v=g.get(y);v||(v=d.querySelector(bd(y)),v||(s=x({src:s,async:!0},a),(a=ti.get(y))&&tp(s,a),v=d.createElement("script"),wr(v),qr(v,"link",s),d.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},g.set(y,v))}}function F_(s,a){ks.M(s,a);var d=Rl;if(d&&s){var g=Ii(d).hoistableScripts,y=Il(s),v=g.get(y);v||(v=d.querySelector(bd(y)),v||(s=x({src:s,async:!0,type:"module"},a),(a=ti.get(y))&&tp(s,a),v=d.createElement("script"),wr(v),qr(v,"link",s),d.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},g.set(y,v))}}function nv(s,a,d,g){var y=(y=xe.current)?Uh(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(a=Cl(d.href),d=Ii(y).hoistableStyles,g=d.get(a),g||(g={type:"style",instance:null,count:0,state:null},d.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Cl(d.href);var v=Ii(y).hoistableStyles,C=v.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,C),(v=y.querySelector(xd(s)))&&!v._p&&(C.instance=v,C.state.loading=5),ti.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ti.set(s,d),v||D_(y,s,d,C.state))),a&&g===null)throw Error(i(528,""));return C}if(a&&g!==null)throw Error(i(529,""));return null;case"script":return a=d.async,d=d.src,typeof d=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Il(d),d=Ii(y).hoistableScripts,g=d.get(a),g||(g={type:"script",instance:null,count:0,state:null},d.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Cl(s){return'href="'+pn(s)+'"'}function xd(s){return'link[rel="stylesheet"]['+s+"]"}function iv(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function D_(s,a,d,g){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=s.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),qr(a,"link",d),wr(a),s.head.appendChild(a))}function Il(s){return'[src="'+pn(s)+'"]'}function bd(s){return"script[async]"+s}function sv(s,a,d){if(a.count++,a.instance===null)switch(a.type){case"style":var g=s.querySelector('style[data-href~="'+pn(d.href)+'"]');if(g)return a.instance=g,wr(g),g;var y=x({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),wr(g),qr(g,"style",y),qh(g,d.precedence,s),a.instance=g;case"stylesheet":y=Cl(d.href);var v=s.querySelector(xd(y));if(v)return a.state.loading|=4,a.instance=v,wr(v),v;g=iv(d),(y=ti.get(y))&&ep(g,y),v=(s.ownerDocument||s).createElement("link"),wr(v);var C=v;return C._p=new Promise(function($,q){C.onload=$,C.onerror=q}),qr(v,"link",g),a.state.loading|=4,qh(v,d.precedence,s),a.instance=v;case"script":return v=Il(d.src),(y=s.querySelector(bd(v)))?(a.instance=y,wr(y),y):(g=d,(y=ti.get(v))&&(g=x({},d),tp(g,y)),s=s.ownerDocument||s,y=s.createElement("script"),wr(y),qr(y,"link",g),s.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(g=a.instance,a.state.loading|=4,qh(g,d.precedence,s));return a.instance}function qh(s,a,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=g.length?g[g.length-1]:null,v=y,C=0;C<g.length;C++){var $=g[C];if($.dataset.precedence===a)v=$;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(a=d.nodeType===9?d.head:d,a.insertBefore(s,a.firstChild))}function ep(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function tp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Yh=null;function ov(s,a,d){if(Yh===null){var g=new Map,y=Yh=new Map;y.set(d,g)}else y=Yh,g=y.get(d),g||(g=new Map,y.set(d,g));if(g.has(s))return g;for(g.set(s,null),d=d.getElementsByTagName(s),y=0;y<d.length;y++){var v=d[y];if(!(v[Ri]||v[Sr]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var C=v.getAttribute(a)||"";C=s+C;var $=g.get(C);$?$.push(v):g.set(C,[v])}}return g}function av(s,a,d){s=s.ownerDocument||s,s.head.insertBefore(d,a==="title"?s.querySelector("head > title"):null)}function P_(s,a,d){if(d===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function lv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function B_(s,a,d,g){if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var y=Cl(g.href),v=a.querySelector(xd(y));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Kh.bind(s),a.then(s,s)),d.state.loading|=4,d.instance=v,wr(v);return}v=a.ownerDocument||a,g=iv(g),(y=ti.get(y))&&ep(g,y),v=v.createElement("link"),wr(v);var C=v;C._p=new Promise(function($,q){C.onload=$,C.onerror=q}),qr(v,"link",g),d.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,a),(a=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=Kh.bind(s),a.addEventListener("load",d),a.addEventListener("error",d))}}var rp=0;function z_(s,a){return s.stylesheets&&s.count===0&&Qh(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var g=setTimeout(function(){if(s.stylesheets&&Qh(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+a);0<s.imgBytes&&rp===0&&(rp=62500*p_());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Qh(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>rp?50:800)+a);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(g),clearTimeout(y)}}:null}function Kh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Xh=null;function Qh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Xh=new Map,a.forEach(O_,s),Xh=null,Kh.call(s))}function O_(s,a){if(!(a.state.loading&4)){var d=Xh.get(s);if(d)var g=d.get(null);else{d=new Map,Xh.set(s,d);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var C=y[v];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(d.set(C.dataset.precedence,C),g=C)}g&&d.set(null,g)}y=a.instance,C=y.getAttribute("data-precedence"),v=d.get(C)||g,v===g&&d.set(null,y),d.set(C,y),this.count++,g=Kh.bind(this),y.addEventListener("load",g),y.addEventListener("error",g),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),a.state.loading|=4}}var vd={$$typeof:B,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function M_(s,a,d,g,y,v,C,$,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.hiddenUpdates=Ut(null),this.identifierPrefix=g,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function cv(s,a,d,g,y,v,C,$,q,se,ge,we){return s=new M_(s,a,d,C,q,se,ge,we,$),a=1,v===!0&&(a|=24),v=Fn(3,null,null,a),s.current=v,v.stateNode=s,a=P0(),a.refCount++,s.pooledCache=a,a.refCount++,v.memoizedState={element:g,isDehydrated:d,cache:a},M0(v),s}function dv(s){return s?(s=ll,s):ll}function uv(s,a,d,g,y,v){y=dv(y),g.context===null?g.context=y:g.pendingContext=y,g=no(a),g.payload={element:d},v=v===void 0?null:v,v!==null&&(g.callback=v),d=io(s,g,a),d!==null&&(wn(d,s,a),Zc(d,s,a))}function hv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function np(s,a){hv(s,a),(s=s.alternate)&&hv(s,a)}function gv(s){if(s.tag===13||s.tag===31){var a=ha(s,67108864);a!==null&&wn(a,s,67108864),np(s,67108864)}}function mv(s){if(s.tag===13||s.tag===31){var a=On();a=$t(a);var d=ha(s,a);d!==null&&wn(d,s,a),np(s,a)}}var Zh=!0;function L_(s,a,d,g){var y=H.T;H.T=null;var v=U.p;try{U.p=2,ip(s,a,d,g)}finally{U.p=v,H.T=y}}function N_(s,a,d,g){var y=H.T;H.T=null;var v=U.p;try{U.p=8,ip(s,a,d,g)}finally{U.p=v,H.T=y}}function ip(s,a,d,g){if(Zh){var y=sp(g);if(y===null)Gf(s,a,g,Jh,d),pv(s,g);else if(V_(y,s,a,d,g))g.stopPropagation();else if(pv(s,g),a&4&&-1<$_.indexOf(s)){for(;y!==null;){var v=Gn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var C=tt(v.pendingLanes);if(C!==0){var $=v;for($.pendingLanes|=2,$.entangledLanes|=2;C;){var q=1<<31-Qe(C);$.entanglements[1]|=q,C&=~q}Gi(v),(Nt&6)===0&&(Bh=J()+500,md(0))}}break;case 31:case 13:$=ha(v,2),$!==null&&wn($,v,2),Oh(),np(v,2)}if(v=sp(g),v===null&&Gf(s,a,g,Jh,d),v===y)break;y=v}y!==null&&g.stopPropagation()}else Gf(s,a,g,null,d)}}function sp(s){return s=Hn(s),op(s)}var Jh=null;function op(s){if(Jh=null,s=Ci(s),s!==null){var a=l(s);if(a===null)s=null;else{var d=a.tag;if(d===13){if(s=c(a),s!==null)return s;s=null}else if(d===31){if(s=u(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Jh=s,null}function fv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case Xe:return 2;case ut:return 8;case mt:case be:return 32;case oe:return 268435456;default:return 32}default:return 32}}var ap=!1,po=null,yo=null,xo=null,Sd=new Map,wd=new Map,bo=[],$_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pv(s,a){switch(s){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":yo=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":Sd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":wd.delete(a.pointerId)}}function Td(s,a,d,g,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:d,eventSystemFlags:g,nativeEvent:v,targetContainers:[y]},a!==null&&(a=Gn(a),a!==null&&gv(a)),s):(s.eventSystemFlags|=g,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function V_(s,a,d,g,y){switch(a){case"focusin":return po=Td(po,s,a,d,g,y),!0;case"dragenter":return yo=Td(yo,s,a,d,g,y),!0;case"mouseover":return xo=Td(xo,s,a,d,g,y),!0;case"pointerover":var v=y.pointerId;return Sd.set(v,Td(Sd.get(v)||null,s,a,d,g,y)),!0;case"gotpointercapture":return v=y.pointerId,wd.set(v,Td(wd.get(v)||null,s,a,d,g,y)),!0}return!1}function yv(s){var a=Ci(s.target);if(a!==null){var d=l(a);if(d!==null){if(a=d.tag,a===13){if(a=c(d),a!==null){s.blockedOn=a,gi(s.priority,function(){mv(d)});return}}else if(a===31){if(a=u(d),a!==null){s.blockedOn=a,gi(s.priority,function(){mv(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function eg(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=sp(s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);zc=g,d.target.dispatchEvent(g),zc=null}else return a=Gn(d),a!==null&&gv(a),s.blockedOn=d,!1;a.shift()}return!0}function xv(s,a,d){eg(s)&&d.delete(a)}function W_(){ap=!1,po!==null&&eg(po)&&(po=null),yo!==null&&eg(yo)&&(yo=null),xo!==null&&eg(xo)&&(xo=null),Sd.forEach(xv),wd.forEach(xv)}function tg(s,a){s.blockedOn===a&&(s.blockedOn=null,ap||(ap=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,W_)))}var rg=null;function bv(s){rg!==s&&(rg=s,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){rg===s&&(rg=null);for(var a=0;a<s.length;a+=3){var d=s[a],g=s[a+1],y=s[a+2];if(typeof g!="function"){if(op(g||d)===null)continue;break}var v=Gn(d);v!==null&&(s.splice(a,3),a-=3,sf(v,{pending:!0,data:y,method:d.method,action:g},g,y))}}))}function Fl(s){function a(q){return tg(q,s)}po!==null&&tg(po,s),yo!==null&&tg(yo,s),xo!==null&&tg(xo,s),Sd.forEach(a),wd.forEach(a);for(var d=0;d<bo.length;d++){var g=bo[d];g.blockedOn===s&&(g.blockedOn=null)}for(;0<bo.length&&(d=bo[0],d.blockedOn===null);)yv(d),d.blockedOn===null&&bo.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var y=d[g],v=d[g+1],C=y[zr]||null;if(typeof v=="function")C||bv(d);else if(C){var $=null;if(v&&v.hasAttribute("formAction")){if(y=v,C=v[zr]||null)$=C.formAction;else if(op(y)!==null)continue}else $=C.action;typeof $=="function"?d[g+1]=$:(d.splice(g,3),g-=3),bv(d)}}}function vv(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),g||setTimeout(d,20)}function d(){if(!g&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(d,100),function(){g=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function lp(s){this._internalRoot=s}ng.prototype.render=lp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var d=a.current,g=On();uv(d,g,s,a,null,null)},ng.prototype.unmount=lp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;uv(s.current,2,null,s,null,null),Oh(),a[_i]=null}};function ng(s){this._internalRoot=s}ng.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ua();s={blockedOn:null,target:s,priority:a};for(var d=0;d<bo.length&&a!==0&&a<bo[d].priority;d++);bo.splice(d,0,s),d===0&&yv(s)}};var Sv=e.version;if(Sv!=="19.2.0")throw Error(i(527,Sv,"19.2.0"));U.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(a),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var G_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ig=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ig.isDisabled&&ig.supportsFiber)try{Fe=ig.inject(G_),he=ig}catch{}}return Ad.createRoot=function(s,a){if(!o(s))throw Error(i(299));var d=!1,g="",y=_b,v=Rb,C=Cb;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=cv(s,1,!1,null,null,d,g,null,y,v,C,vv),s[_i]=a.current,Wf(s),new lp(a)},Ad.hydrateRoot=function(s,a,d){if(!o(s))throw Error(i(299));var g=!1,y="",v=_b,C=Rb,$=Cb,q=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(v=d.onUncaughtError),d.onCaughtError!==void 0&&(C=d.onCaughtError),d.onRecoverableError!==void 0&&($=d.onRecoverableError),d.formState!==void 0&&(q=d.formState)),a=cv(s,1,!0,a,d??null,g,y,q,v,C,$,vv),a.context=dv(null),d=a.current,g=On(),g=$t(g),y=no(g),y.callback=null,io(d,y,g),d=g,a.current.lanes=d,Dr(a,d),Gi(a),s[_i]=a.current,Wf(s),new ng(a)},Ad.version="19.2.0",Ad}var Ev;function i8(){if(Ev)return dp.exports;Ev=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dp.exports=n8(),dp.exports}var s8=i8();const o8="modulepreload",a8=function(r){return"/"+r},_v={},Is=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");o=h(t.map(m=>{if(m=a8(m),m in _v)return;_v[m]=!0;const f=m.endsWith(".css"),x=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const b=document.createElement("link");if(b.rel=f?"stylesheet":o8,f||(b.as="script"),b.crossOrigin="",b.href=m,u&&b.setAttribute("nonce",u),document.head.appendChild(b),f)return new Promise((S,w)=>{b.addEventListener("load",S),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&l(u.reason);return e().catch(l)})};var l8=Z_();const fu=Y_(l8),c8=Object.freeze(Object.defineProperty({__proto__:null,default:fu},Symbol.toStringTag,{value:"Module"})),d8=()=>{};var Rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},u8=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],c=r[t++],u=r[t++],h=((o&7)<<18|(l&63)<<12|(c&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},uj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],c=o+1<r.length,u=c?r[o+1]:0,h=o+2<r.length,m=h?r[o+2]:0,f=l>>2,x=(l&3)<<4|u>>4;let b=(u&15)<<2|m>>6,S=m&63;h||(S=64,c||(b=64)),i.push(t[f],t[x],t[b],t[S])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(dj(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):u8(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],u=o<r.length?t[r.charAt(o)]:0;++o;const m=o<r.length?t[r.charAt(o)]:64;++o;const x=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||u==null||m==null||x==null)throw new h8;const b=l<<2|u>>4;if(i.push(b),m!==64){const S=u<<4&240|m>>2;if(i.push(S),x!==64){const w=m<<6&192|x;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class h8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g8=function(r){const e=dj(r);return uj.encodeByteArray(e,!0)},Zg=function(r){return g8(r).replace(/\./g,"")},hj=function(r){try{return uj.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=()=>m8().__FIREBASE_DEFAULTS__,p8=()=>{if(typeof process>"u"||typeof Rv>"u")return;const r=Rv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},y8=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&hj(r[1]);return e&&JSON.parse(e)},Im=()=>{try{return d8()||f8()||p8()||y8()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},gj=r=>Im()?.emulatorHosts?.[r],mj=r=>{const e=gj(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},fj=()=>Im()?.config,pj=r=>Im()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ny(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Zg(JSON.stringify(t)),Zg(JSON.stringify(c)),""].join(".")}const Bd={};function v8(){const r={prod:[],emulator:[]};for(const e of Object.keys(Bd))Bd[e]?r.emulator.push(e):r.prod.push(e);return r}function S8(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Cv=!1;function iy(r,e){if(typeof window>"u"||typeof document>"u"||!qo(window.location.host)||Bd[r]===e||Bd[r]||Cv)return;Bd[r]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=v8().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function u(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function h(b,S){b.setAttribute("width","24"),b.setAttribute("id",S),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function m(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Cv=!0,c()},b}function f(b,S){b.setAttribute("id",S),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function x(){const b=S8(i),S=t("text"),w=document.getElementById(S)||document.createElement("span"),T=t("learnmore"),E=document.getElementById(T)||document.createElement("a"),A=t("preprendIcon"),_=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const B=b.element;u(B),f(E,T);const I=m();h(_,A),B.append(_,w,E,I),document.body.appendChild(B)}l?(w.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function T8(){const r=Im()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yj(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function A8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k8(){const r=cn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function E8(){return!T8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xj(){try{return typeof indexedDB=="object"}catch{return!1}}function bj(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}function _8(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8="FirebaseError";class hi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=R8,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Va.prototype.create)}}class Va{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?C8(l,i):"Error",u=`${this.serviceName}: ${c} (${o}).`;return new hi(o,u,i)}}function C8(r,e){return r.replace(I8,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const I8=/\{\$([^}]+)}/g;function F8(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ds(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],c=e[o];if(Iv(l)&&Iv(c)){if(!Ds(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Iv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function D8(r,e){const t=new P8(r,e);return t.subscribe.bind(t)}class P8{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");B8(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=gp),o.error===void 0&&(o.error=gp),o.complete===void 0&&(o.complete=gp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B8(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function gp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=1e3,O8=2,M8=14400*1e3,L8=.5;function Fv(r,e=z8,t=O8){const i=e*Math.pow(t,r),o=Math.round(L8*i*(Math.random()-.5)*2);return Math.min(M8,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(r){return r&&r._delegate?r._delegate:r}class ui{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new x8;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V8(e))try{this.getOrInitializeService({instanceIdentifier:ka})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ka){return this.instances.has(e)}getOptions(e=ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(l);i===u&&c.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$8(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ka){return this.component?this.component.multipleInstances?e:ka:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $8(r){return r===ka?void 0:r}function V8(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new N8(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Rt||(Rt={}));const G8={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},H8=Rt.INFO,U8={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},q8=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=U8[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=H8,this._logHandler=q8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const Y8=(r,e)=>e.some(t=>r instanceof t);let Dv,Pv;function K8(){return Dv||(Dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X8(){return Pv||(Pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vj=new WeakMap,r1=new WeakMap,Sj=new WeakMap,mp=new WeakMap,sy=new WeakMap;function Q8(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Co(r.result)),o()},c=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&vj.set(t,r)}).catch(()=>{}),sy.set(e,r),e}function Z8(r){if(r1.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});r1.set(r,e)}let n1={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return r1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Sj.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Co(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function J8(r){n1=r(n1)}function e4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(fp(this),e,...t);return Sj.set(i,e.sort?e.sort():[e]),Co(i)}:X8().includes(r)?function(...e){return r.apply(fp(this),e),Co(vj.get(this))}:function(...e){return Co(r.apply(fp(this),e))}}function t4(r){return typeof r=="function"?e4(r):(r instanceof IDBTransaction&&Z8(r),Y8(r,K8())?new Proxy(r,n1):r)}function Co(r){if(r instanceof IDBRequest)return Q8(r);if(mp.has(r))return mp.get(r);const e=t4(r);return e!==r&&(mp.set(r,e),sy.set(e,r)),e}const fp=r=>sy.get(r);function wj(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(r,e),u=Co(c);return i&&c.addEventListener("upgradeneeded",h=>{i(Co(c.result),h.oldVersion,h.newVersion,Co(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{l&&h.addEventListener("close",()=>l()),o&&h.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const r4=["get","getKey","getAll","getAllKeys","count"],n4=["put","add","delete","clear"],pp=new Map;function Bv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(pp.get(e))return pp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=n4.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||r4.includes(t)))return;const l=async function(c,...u){const h=this.transaction(c,o?"readwrite":"readonly");let m=h.store;return i&&(m=m.index(u.shift())),(await Promise.all([m[t](...u),o&&h.done]))[0]};return pp.set(e,l),l}J8(r=>({...r,get:(e,t,i)=>Bv(e,t)||r.get(e,t,i),has:(e,t)=>!!Bv(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(s4(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function s4(r){return r.getComponent()?.type==="VERSION"}const i1="@firebase/app",zv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Fm("@firebase/app"),o4="@firebase/app-compat",a4="@firebase/analytics-compat",l4="@firebase/analytics",c4="@firebase/app-check-compat",d4="@firebase/app-check",u4="@firebase/auth",h4="@firebase/auth-compat",g4="@firebase/database",m4="@firebase/data-connect",f4="@firebase/database-compat",p4="@firebase/functions",y4="@firebase/functions-compat",x4="@firebase/installations",b4="@firebase/installations-compat",v4="@firebase/messaging",S4="@firebase/messaging-compat",w4="@firebase/performance",T4="@firebase/performance-compat",j4="@firebase/remote-config",A4="@firebase/remote-config-compat",k4="@firebase/storage",E4="@firebase/storage-compat",_4="@firebase/firestore",R4="@firebase/ai",C4="@firebase/firestore-compat",I4="firebase",F4="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="[DEFAULT]",D4={[i1]:"fire-core",[o4]:"fire-core-compat",[l4]:"fire-analytics",[a4]:"fire-analytics-compat",[d4]:"fire-app-check",[c4]:"fire-app-check-compat",[u4]:"fire-auth",[h4]:"fire-auth-compat",[g4]:"fire-rtdb",[m4]:"fire-data-connect",[f4]:"fire-rtdb-compat",[p4]:"fire-fn",[y4]:"fire-fn-compat",[x4]:"fire-iid",[b4]:"fire-iid-compat",[v4]:"fire-fcm",[S4]:"fire-fcm-compat",[w4]:"fire-perf",[T4]:"fire-perf-compat",[j4]:"fire-rc",[A4]:"fire-rc-compat",[k4]:"fire-gcs",[E4]:"fire-gcs-compat",[_4]:"fire-fst",[C4]:"fire-fst-compat",[R4]:"fire-vertex","fire-js":"fire-js",[I4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=new Map,P4=new Map,o1=new Map;function Ov(r,e){try{r.container.addComponent(e)}catch(t){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ki(r){const e=r.name;if(o1.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;o1.set(e,r);for(const t of Jg.values())Ov(t,r);for(const t of P4.values())Ov(t,r);return!0}function Yo(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function oi(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Io=new Va("app","Firebase",B4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=F4;function Tj(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:s1,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Io.create("bad-app-name",{appName:String(o)});if(t||(t=fj()),!t)throw Io.create("no-options");const l=Jg.get(o);if(l){if(Ds(t,l.options)&&Ds(i,l.config))return l;throw Io.create("duplicate-app",{appName:o})}const c=new W8(o);for(const h of o1.values())c.addComponent(h);const u=new z4(t,i,c);return Jg.set(o,u),u}function Dm(r=s1){const e=Jg.get(r);if(!e&&r===s1&&fj())return Tj();if(!e)throw Io.create("no-app",{appName:r});return e}function En(r,e,t){let i=D4[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(c.join(" "));return}ki(new ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="firebase-heartbeat-database",M4=1,Qd="firebase-heartbeat-store";let yp=null;function jj(){return yp||(yp=wj(O4,M4,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Qd)}catch(t){console.warn(t)}}}}).catch(r=>{throw Io.create("idb-open",{originalErrorMessage:r.message})})),yp}async function L4(r){try{const t=(await jj()).transaction(Qd),i=await t.objectStore(Qd).get(Aj(r));return await t.done,i}catch(e){if(e instanceof hi)Ps.warn(e.message);else{const t=Io.create("idb-get",{originalErrorMessage:e?.message});Ps.warn(t.message)}}}async function Mv(r,e){try{const i=(await jj()).transaction(Qd,"readwrite");await i.objectStore(Qd).put(e,Aj(r)),await i.done}catch(t){if(t instanceof hi)Ps.warn(t.message);else{const i=Io.create("idb-set",{originalErrorMessage:t?.message});Ps.warn(i.message)}}}function Aj(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=1024,$4=30;class V4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new G4(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Lv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>$4){const o=H4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ps.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lv(),{heartbeatsToSend:t,unsentEntries:i}=W4(this._heartbeatsCache.heartbeats),o=Zg(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ps.warn(e),""}}}function Lv(){return new Date().toISOString().substring(0,10)}function W4(r,e=N4){const t=[];let i=r.slice();for(const o of r){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Nv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Nv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class G4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xj()?bj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await L4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Mv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Mv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Nv(r){return Zg(JSON.stringify({version:2,heartbeats:r})).length}function H4(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(r){ki(new ui("platform-logger",e=>new i4(e),"PRIVATE")),ki(new ui("heartbeat",e=>new V4(e),"PRIVATE")),En(i1,zv,r),En(i1,zv,"esm2020"),En("fire-js","")}U4("");var q4="firebase",Y4="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En(q4,Y4,"app");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fo,kj;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,j){function F(){}F.prototype=j.prototype,R.F=j.prototype,R.prototype=new F,R.prototype.constructor=R,R.D=function(z,P,V){for(var N=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)N[Z-2]=arguments[Z];return j.prototype[P].apply(z,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,j,F){F||(F=0);const z=Array(16);if(typeof j=="string")for(var P=0;P<16;++P)z[P]=j.charCodeAt(F++)|j.charCodeAt(F++)<<8|j.charCodeAt(F++)<<16|j.charCodeAt(F++)<<24;else for(P=0;P<16;++P)z[P]=j[F++]|j[F++]<<8|j[F++]<<16|j[F++]<<24;j=R.g[0],F=R.g[1],P=R.g[2];let V=R.g[3],N;N=j+(V^F&(P^V))+z[0]+3614090360&4294967295,j=F+(N<<7&4294967295|N>>>25),N=V+(P^j&(F^P))+z[1]+3905402710&4294967295,V=j+(N<<12&4294967295|N>>>20),N=P+(F^V&(j^F))+z[2]+606105819&4294967295,P=V+(N<<17&4294967295|N>>>15),N=F+(j^P&(V^j))+z[3]+3250441966&4294967295,F=P+(N<<22&4294967295|N>>>10),N=j+(V^F&(P^V))+z[4]+4118548399&4294967295,j=F+(N<<7&4294967295|N>>>25),N=V+(P^j&(F^P))+z[5]+1200080426&4294967295,V=j+(N<<12&4294967295|N>>>20),N=P+(F^V&(j^F))+z[6]+2821735955&4294967295,P=V+(N<<17&4294967295|N>>>15),N=F+(j^P&(V^j))+z[7]+4249261313&4294967295,F=P+(N<<22&4294967295|N>>>10),N=j+(V^F&(P^V))+z[8]+1770035416&4294967295,j=F+(N<<7&4294967295|N>>>25),N=V+(P^j&(F^P))+z[9]+2336552879&4294967295,V=j+(N<<12&4294967295|N>>>20),N=P+(F^V&(j^F))+z[10]+4294925233&4294967295,P=V+(N<<17&4294967295|N>>>15),N=F+(j^P&(V^j))+z[11]+2304563134&4294967295,F=P+(N<<22&4294967295|N>>>10),N=j+(V^F&(P^V))+z[12]+1804603682&4294967295,j=F+(N<<7&4294967295|N>>>25),N=V+(P^j&(F^P))+z[13]+4254626195&4294967295,V=j+(N<<12&4294967295|N>>>20),N=P+(F^V&(j^F))+z[14]+2792965006&4294967295,P=V+(N<<17&4294967295|N>>>15),N=F+(j^P&(V^j))+z[15]+1236535329&4294967295,F=P+(N<<22&4294967295|N>>>10),N=j+(P^V&(F^P))+z[1]+4129170786&4294967295,j=F+(N<<5&4294967295|N>>>27),N=V+(F^P&(j^F))+z[6]+3225465664&4294967295,V=j+(N<<9&4294967295|N>>>23),N=P+(j^F&(V^j))+z[11]+643717713&4294967295,P=V+(N<<14&4294967295|N>>>18),N=F+(V^j&(P^V))+z[0]+3921069994&4294967295,F=P+(N<<20&4294967295|N>>>12),N=j+(P^V&(F^P))+z[5]+3593408605&4294967295,j=F+(N<<5&4294967295|N>>>27),N=V+(F^P&(j^F))+z[10]+38016083&4294967295,V=j+(N<<9&4294967295|N>>>23),N=P+(j^F&(V^j))+z[15]+3634488961&4294967295,P=V+(N<<14&4294967295|N>>>18),N=F+(V^j&(P^V))+z[4]+3889429448&4294967295,F=P+(N<<20&4294967295|N>>>12),N=j+(P^V&(F^P))+z[9]+568446438&4294967295,j=F+(N<<5&4294967295|N>>>27),N=V+(F^P&(j^F))+z[14]+3275163606&4294967295,V=j+(N<<9&4294967295|N>>>23),N=P+(j^F&(V^j))+z[3]+4107603335&4294967295,P=V+(N<<14&4294967295|N>>>18),N=F+(V^j&(P^V))+z[8]+1163531501&4294967295,F=P+(N<<20&4294967295|N>>>12),N=j+(P^V&(F^P))+z[13]+2850285829&4294967295,j=F+(N<<5&4294967295|N>>>27),N=V+(F^P&(j^F))+z[2]+4243563512&4294967295,V=j+(N<<9&4294967295|N>>>23),N=P+(j^F&(V^j))+z[7]+1735328473&4294967295,P=V+(N<<14&4294967295|N>>>18),N=F+(V^j&(P^V))+z[12]+2368359562&4294967295,F=P+(N<<20&4294967295|N>>>12),N=j+(F^P^V)+z[5]+4294588738&4294967295,j=F+(N<<4&4294967295|N>>>28),N=V+(j^F^P)+z[8]+2272392833&4294967295,V=j+(N<<11&4294967295|N>>>21),N=P+(V^j^F)+z[11]+1839030562&4294967295,P=V+(N<<16&4294967295|N>>>16),N=F+(P^V^j)+z[14]+4259657740&4294967295,F=P+(N<<23&4294967295|N>>>9),N=j+(F^P^V)+z[1]+2763975236&4294967295,j=F+(N<<4&4294967295|N>>>28),N=V+(j^F^P)+z[4]+1272893353&4294967295,V=j+(N<<11&4294967295|N>>>21),N=P+(V^j^F)+z[7]+4139469664&4294967295,P=V+(N<<16&4294967295|N>>>16),N=F+(P^V^j)+z[10]+3200236656&4294967295,F=P+(N<<23&4294967295|N>>>9),N=j+(F^P^V)+z[13]+681279174&4294967295,j=F+(N<<4&4294967295|N>>>28),N=V+(j^F^P)+z[0]+3936430074&4294967295,V=j+(N<<11&4294967295|N>>>21),N=P+(V^j^F)+z[3]+3572445317&4294967295,P=V+(N<<16&4294967295|N>>>16),N=F+(P^V^j)+z[6]+76029189&4294967295,F=P+(N<<23&4294967295|N>>>9),N=j+(F^P^V)+z[9]+3654602809&4294967295,j=F+(N<<4&4294967295|N>>>28),N=V+(j^F^P)+z[12]+3873151461&4294967295,V=j+(N<<11&4294967295|N>>>21),N=P+(V^j^F)+z[15]+530742520&4294967295,P=V+(N<<16&4294967295|N>>>16),N=F+(P^V^j)+z[2]+3299628645&4294967295,F=P+(N<<23&4294967295|N>>>9),N=j+(P^(F|~V))+z[0]+4096336452&4294967295,j=F+(N<<6&4294967295|N>>>26),N=V+(F^(j|~P))+z[7]+1126891415&4294967295,V=j+(N<<10&4294967295|N>>>22),N=P+(j^(V|~F))+z[14]+2878612391&4294967295,P=V+(N<<15&4294967295|N>>>17),N=F+(V^(P|~j))+z[5]+4237533241&4294967295,F=P+(N<<21&4294967295|N>>>11),N=j+(P^(F|~V))+z[12]+1700485571&4294967295,j=F+(N<<6&4294967295|N>>>26),N=V+(F^(j|~P))+z[3]+2399980690&4294967295,V=j+(N<<10&4294967295|N>>>22),N=P+(j^(V|~F))+z[10]+4293915773&4294967295,P=V+(N<<15&4294967295|N>>>17),N=F+(V^(P|~j))+z[1]+2240044497&4294967295,F=P+(N<<21&4294967295|N>>>11),N=j+(P^(F|~V))+z[8]+1873313359&4294967295,j=F+(N<<6&4294967295|N>>>26),N=V+(F^(j|~P))+z[15]+4264355552&4294967295,V=j+(N<<10&4294967295|N>>>22),N=P+(j^(V|~F))+z[6]+2734768916&4294967295,P=V+(N<<15&4294967295|N>>>17),N=F+(V^(P|~j))+z[13]+1309151649&4294967295,F=P+(N<<21&4294967295|N>>>11),N=j+(P^(F|~V))+z[4]+4149444226&4294967295,j=F+(N<<6&4294967295|N>>>26),N=V+(F^(j|~P))+z[11]+3174756917&4294967295,V=j+(N<<10&4294967295|N>>>22),N=P+(j^(V|~F))+z[2]+718787259&4294967295,P=V+(N<<15&4294967295|N>>>17),N=F+(V^(P|~j))+z[9]+3951481745&4294967295,R.g[0]=R.g[0]+j&4294967295,R.g[1]=R.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+P&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.v=function(R,j){j===void 0&&(j=R.length);const F=j-this.blockSize,z=this.C;let P=this.h,V=0;for(;V<j;){if(P==0)for(;V<=F;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<j;)if(z[P++]=R.charCodeAt(V++),P==this.blockSize){o(this,z),P=0;break}}else for(;V<j;)if(z[P++]=R[V++],P==this.blockSize){o(this,z),P=0;break}}this.h=P,this.o+=j},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var j=1;j<R.length-8;++j)R[j]=0;j=this.o*8;for(var F=R.length-8;F<R.length;++F)R[F]=j&255,j/=256;for(this.v(R),R=Array(16),j=0,F=0;F<4;++F)for(let z=0;z<32;z+=8)R[j++]=this.g[F]>>>z&255;return R};function l(R,j){var F=u;return Object.prototype.hasOwnProperty.call(F,R)?F[R]:F[R]=j(R)}function c(R,j){this.h=j;const F=[];let z=!0;for(let P=R.length-1;P>=0;P--){const V=R[P]|0;z&&V==j||(F[P]=V,z=!1)}this.g=F}var u={};function h(R){return-128<=R&&R<128?l(R,function(j){return new c([j|0],j<0?-1:0)}):new c([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return x;if(R<0)return E(m(-R));const j=[];let F=1;for(let z=0;R>=F;z++)j[z]=R/F|0,F*=4294967296;return new c(j,0)}function f(R,j){if(R.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(R.charAt(0)=="-")return E(f(R.substring(1),j));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const F=m(Math.pow(j,8));let z=x;for(let V=0;V<R.length;V+=8){var P=Math.min(8,R.length-V);const N=parseInt(R.substring(V,V+P),j);P<8?(P=m(Math.pow(j,P)),z=z.j(P).add(m(N))):(z=z.j(F),z=z.add(m(N)))}return z}var x=h(0),b=h(1),S=h(16777216);r=c.prototype,r.m=function(){if(T(this))return-E(this).m();let R=0,j=1;for(let F=0;F<this.g.length;F++){const z=this.i(F);R+=(z>=0?z:4294967296+z)*j,j*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(w(this))return"0";if(T(this))return"-"+E(this).toString(R);const j=m(Math.pow(R,6));var F=this;let z="";for(;;){const P=I(F,j).g;F=A(F,P.j(j));let V=((F.g.length>0?F.g[0]:F.h)>>>0).toString(R);if(F=P,w(F))return V+z;for(;V.length<6;)V="0"+V;z=V+z}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function w(R){if(R.h!=0)return!1;for(let j=0;j<R.g.length;j++)if(R.g[j]!=0)return!1;return!0}function T(R){return R.h==-1}r.l=function(R){return R=A(this,R),T(R)?-1:w(R)?0:1};function E(R){const j=R.g.length,F=[];for(let z=0;z<j;z++)F[z]=~R.g[z];return new c(F,~R.h).add(b)}r.abs=function(){return T(this)?E(this):this},r.add=function(R){const j=Math.max(this.g.length,R.g.length),F=[];let z=0;for(let P=0;P<=j;P++){let V=z+(this.i(P)&65535)+(R.i(P)&65535),N=(V>>>16)+(this.i(P)>>>16)+(R.i(P)>>>16);z=N>>>16,V&=65535,N&=65535,F[P]=N<<16|V}return new c(F,F[F.length-1]&-2147483648?-1:0)};function A(R,j){return R.add(E(j))}r.j=function(R){if(w(this)||w(R))return x;if(T(this))return T(R)?E(this).j(E(R)):E(E(this).j(R));if(T(R))return E(this.j(E(R)));if(this.l(S)<0&&R.l(S)<0)return m(this.m()*R.m());const j=this.g.length+R.g.length,F=[];for(var z=0;z<2*j;z++)F[z]=0;for(z=0;z<this.g.length;z++)for(let P=0;P<R.g.length;P++){const V=this.i(z)>>>16,N=this.i(z)&65535,Z=R.i(P)>>>16,Q=R.i(P)&65535;F[2*z+2*P]+=N*Q,_(F,2*z+2*P),F[2*z+2*P+1]+=V*Q,_(F,2*z+2*P+1),F[2*z+2*P+1]+=N*Z,_(F,2*z+2*P+1),F[2*z+2*P+2]+=V*Z,_(F,2*z+2*P+2)}for(R=0;R<j;R++)F[R]=F[2*R+1]<<16|F[2*R];for(R=j;R<2*j;R++)F[R]=0;return new c(F,0)};function _(R,j){for(;(R[j]&65535)!=R[j];)R[j+1]+=R[j]>>>16,R[j]&=65535,j++}function B(R,j){this.g=R,this.h=j}function I(R,j){if(w(j))throw Error("division by zero");if(w(R))return new B(x,x);if(T(R))return j=I(E(R),j),new B(E(j.g),E(j.h));if(T(j))return j=I(R,E(j)),new B(E(j.g),j.h);if(R.g.length>30){if(T(R)||T(j))throw Error("slowDivide_ only works with positive integers.");for(var F=b,z=j;z.l(R)<=0;)F=L(F),z=L(z);var P=M(F,1),V=M(z,1);for(z=M(z,2),F=M(F,2);!w(z);){var N=V.add(z);N.l(R)<=0&&(P=P.add(F),V=N),z=M(z,1),F=M(F,1)}return j=A(R,P.j(j)),new B(P,j)}for(P=x;R.l(j)>=0;){for(F=Math.max(1,Math.floor(R.m()/j.m())),z=Math.ceil(Math.log(F)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),V=m(F),N=V.j(j);T(N)||N.l(R)>0;)F-=z,V=m(F),N=V.j(j);w(V)&&(V=b),P=P.add(V),R=A(R,N)}return new B(P,R)}r.B=function(R){return I(this,R).h},r.and=function(R){const j=Math.max(this.g.length,R.g.length),F=[];for(let z=0;z<j;z++)F[z]=this.i(z)&R.i(z);return new c(F,this.h&R.h)},r.or=function(R){const j=Math.max(this.g.length,R.g.length),F=[];for(let z=0;z<j;z++)F[z]=this.i(z)|R.i(z);return new c(F,this.h|R.h)},r.xor=function(R){const j=Math.max(this.g.length,R.g.length),F=[];for(let z=0;z<j;z++)F[z]=this.i(z)^R.i(z);return new c(F,this.h^R.h)};function L(R){const j=R.g.length+1,F=[];for(let z=0;z<j;z++)F[z]=R.i(z)<<1|R.i(z-1)>>>31;return new c(F,R.h)}function M(R,j){const F=j>>5;j%=32;const z=R.g.length-F,P=[];for(let V=0;V<z;V++)P[V]=j>0?R.i(V+F)>>>j|R.i(V+F+1)<<32-j:R.i(V+F);return new c(P,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,kj=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=f,Fo=c}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ej,Rd,_j,Cg,a1,Rj,Cj,Ij;(function(){var r,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof sg=="object"&&sg];for(var k=0;k<p.length;++k){var D=p[k];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var i=t(this);function o(p,k){if(k)e:{var D=i;p=p.split(".");for(var W=0;W<p.length-1;W++){var ne=p[W];if(!(ne in D))break e;D=D[ne]}p=p[p.length-1],W=D[p],k=k(W),k!=W&&k!=null&&e(D,p,{configurable:!0,writable:!0,value:k})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(k){var D=[],W;for(W in k)Object.prototype.hasOwnProperty.call(k,W)&&D.push([W,k[W]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function u(p){var k=typeof p;return k=="object"&&p!=null||k=="function"}function h(p,k,D){return p.call.apply(p.bind,arguments)}function m(p,k,D){return m=h,m.apply(null,arguments)}function f(p,k){var D=Array.prototype.slice.call(arguments,1);return function(){var W=D.slice();return W.push.apply(W,arguments),p.apply(this,W)}}function x(p,k){function D(){}D.prototype=k.prototype,p.Z=k.prototype,p.prototype=new D,p.prototype.constructor=p,p.Ob=function(W,ne,ce){for(var De=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)De[pt-2]=arguments[pt];return k.prototype[ne].apply(W,De)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function S(p){const k=p.length;if(k>0){const D=Array(k);for(let W=0;W<k;W++)D[W]=p[W];return D}return[]}function w(p,k){for(let W=1;W<arguments.length;W++){const ne=arguments[W];var D=typeof ne;if(D=D!="object"?D:ne?Array.isArray(ne)?"array":D:"null",D=="array"||D=="object"&&typeof ne.length=="number"){D=p.length||0;const ce=ne.length||0;p.length=D+ce;for(let De=0;De<ce;De++)p[D+De]=ne[De]}else p.push(ne)}}class T{constructor(k,D){this.i=k,this.j=D,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function E(p){c.setTimeout(()=>{throw p},0)}function A(){var p=R;let k=null;return p.g&&(k=p.g,p.g=p.g.next,p.g||(p.h=null),k.next=null),k}class _{constructor(){this.h=this.g=null}add(k,D){const W=B.get();W.set(k,D),this.h?this.h.next=W:this.g=W,this.h=W}}var B=new T(()=>new I,p=>p.reset());class I{constructor(){this.next=this.g=this.h=null}set(k,D){this.h=k,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let L,M=!1,R=new _,j=()=>{const p=Promise.resolve(void 0);L=()=>{p.then(F)}};function F(){for(var p;p=A();){try{p.h.call(p.g)}catch(D){E(D)}var k=B;k.j(p),k.h<100&&(k.h++,p.next=k.g,k.g=p)}M=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(p,k){this.type=p,this.g=this.target=k,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,k=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};c.addEventListener("test",D,k),c.removeEventListener("test",D,k)}catch{}return p})();function N(p){return/^[\s\xa0]*$/.test(p)}function Z(p,k){P.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,k)}x(Z,P),Z.prototype.init=function(p,k){const D=this.type=p.type,W=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=k,k=p.relatedTarget,k||(D=="mouseover"?k=p.fromElement:D=="mouseout"&&(k=p.toElement)),this.relatedTarget=k,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),H=0;function U(p,k,D,W,ne){this.listener=p,this.proxy=null,this.src=k,this.type=D,this.capture=!!W,this.ha=ne,this.key=++H,this.da=this.fa=!1}function K(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function X(p,k,D){for(const W in p)k.call(D,p[W],W,p)}function re(p,k){for(const D in p)k.call(void 0,p[D],D,p)}function me(p){const k={};for(const D in p)k[D]=p[D];return k}const ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(p,k){let D,W;for(let ne=1;ne<arguments.length;ne++){W=arguments[ne];for(D in W)p[D]=W[D];for(let ce=0;ce<ke.length;ce++)D=ke[ce],Object.prototype.hasOwnProperty.call(W,D)&&(p[D]=W[D])}}function le(p){this.src=p,this.g={},this.h=0}le.prototype.add=function(p,k,D,W,ne){const ce=p.toString();p=this.g[ce],p||(p=this.g[ce]=[],this.h++);const De=xe(p,k,W,ne);return De>-1?(k=p[De],D||(k.fa=!1)):(k=new U(k,this.src,ce,!!W,ne),k.fa=D,p.push(k)),k};function ve(p,k){const D=k.type;if(D in p.g){var W=p.g[D],ne=Array.prototype.indexOf.call(W,k,void 0),ce;(ce=ne>=0)&&Array.prototype.splice.call(W,ne,1),ce&&(K(k),p.g[D].length==0&&(delete p.g[D],p.h--))}}function xe(p,k,D,W){for(let ne=0;ne<p.length;++ne){const ce=p[ne];if(!ce.da&&ce.listener==k&&ce.capture==!!D&&ce.ha==W)return ne}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),Re={};function Te(p,k,D,W,ne){if(Array.isArray(k)){for(let ce=0;ce<k.length;ce++)Te(p,k[ce],D,W,ne);return null}return D=Ae(D),p&&p[Q]?p.J(k,D,u(W)?!!W.capture:!1,ne):$e(p,k,D,!1,W,ne)}function $e(p,k,D,W,ne,ce){if(!k)throw Error("Invalid event type");const De=u(ne)?!!ne.capture:!!ne;let pt=Ce(p);if(pt||(p[ue]=pt=new le(p)),D=pt.add(k,D,W,De,ce),D.proxy)return D;if(W=rt(),D.proxy=W,W.src=p,W.listener=D,p.addEventListener)V||(ne=De),ne===void 0&&(ne=!1),p.addEventListener(k.toString(),W,ne);else if(p.attachEvent)p.attachEvent(Tt(k.toString()),W);else if(p.addListener&&p.removeListener)p.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return D}function rt(){function p(D){return k.call(p.src,p.listener,D)}const k=Dt;return p}function Ke(p,k,D,W,ne){if(Array.isArray(k))for(var ce=0;ce<k.length;ce++)Ke(p,k[ce],D,W,ne);else W=u(W)?!!W.capture:!!W,D=Ae(D),p&&p[Q]?(p=p.i,ce=String(k).toString(),ce in p.g&&(k=p.g[ce],D=xe(k,D,W,ne),D>-1&&(K(k[D]),Array.prototype.splice.call(k,D,1),k.length==0&&(delete p.g[ce],p.h--)))):p&&(p=Ce(p))&&(k=p.g[k.toString()],p=-1,k&&(p=xe(k,D,W,ne)),(D=p>-1?k[p]:null)&&et(D))}function et(p){if(typeof p!="number"&&p&&!p.da){var k=p.src;if(k&&k[Q])ve(k.i,p);else{var D=p.type,W=p.proxy;k.removeEventListener?k.removeEventListener(D,W,p.capture):k.detachEvent?k.detachEvent(Tt(D),W):k.addListener&&k.removeListener&&k.removeListener(W),(D=Ce(k))?(ve(D,p),D.h==0&&(D.src=null,k[ue]=null)):K(p)}}}function Tt(p){return p in Re?Re[p]:Re[p]="on"+p}function Dt(p,k){if(p.da)p=!0;else{k=new Z(k,this);const D=p.listener,W=p.ha||p.src;p.fa&&et(p),p=D.call(W,k)}return p}function Ce(p){return p=p[ue],p instanceof le?p:null}var ot="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ae(p){return typeof p=="function"?p:(p[ot]||(p[ot]=function(k){return p.handleEvent(k)}),p[ot])}function fe(){z.call(this),this.i=new le(this),this.M=this,this.G=null}x(fe,z),fe.prototype[Q]=!0,fe.prototype.removeEventListener=function(p,k,D,W){Ke(this,p,k,D,W)};function Ue(p,k){var D,W=p.G;if(W)for(D=[];W;W=W.G)D.push(W);if(p=p.M,W=k.type||k,typeof k=="string")k=new P(k,p);else if(k instanceof P)k.target=k.target||p;else{var ne=k;k=new P(W,p),te(k,ne)}ne=!0;let ce,De;if(D)for(De=D.length-1;De>=0;De--)ce=k.g=D[De],ne=We(ce,W,!0,k)&&ne;if(ce=k.g=p,ne=We(ce,W,!0,k)&&ne,ne=We(ce,W,!1,k)&&ne,D)for(De=0;De<D.length;De++)ce=k.g=D[De],ne=We(ce,W,!1,k)&&ne}fe.prototype.N=function(){if(fe.Z.N.call(this),this.i){var p=this.i;for(const k in p.g){const D=p.g[k];for(let W=0;W<D.length;W++)K(D[W]);delete p.g[k],p.h--}}this.G=null},fe.prototype.J=function(p,k,D,W){return this.i.add(String(p),k,!1,D,W)},fe.prototype.K=function(p,k,D,W){return this.i.add(String(p),k,!0,D,W)};function We(p,k,D,W){if(k=p.i.g[String(k)],!k)return!0;k=k.concat();let ne=!0;for(let ce=0;ce<k.length;++ce){const De=k[ce];if(De&&!De.da&&De.capture==D){const pt=De.listener,pr=De.ha||De.src;De.fa&&ve(p.i,De),ne=pt.call(pr,W)!==!1&&ne}}return ne&&!W.defaultPrevented}function kt(p,k){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:c.setTimeout(p,k||0)}function Ve(p){p.g=kt(()=>{p.g=null,p.i&&(p.i=!1,Ve(p))},p.l);const k=p.h;p.h=null,p.m.apply(null,k)}class J extends z{constructor(k,D){super(),this.m=k,this.l=D,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ee(p){z.call(this),this.h=p,this.g={}}x(Ee,z);var Xe=[];function ut(p){X(p.g,function(k,D){this.g.hasOwnProperty(D)&&et(k)},p),p.g={}}Ee.prototype.N=function(){Ee.Z.N.call(this),ut(this)},Ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=c.JSON.stringify,be=c.JSON.parse,oe=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Ie(){}function Pe(){}var Fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){P.call(this,"d")}x(he,P);function He(){P.call(this,"c")}x(He,P);var Qe={},Oe=null;function Le(){return Oe=Oe||new fe}Qe.Ia="serverreachability";function Se(p){P.call(this,Qe.Ia,p)}x(Se,P);function qe(p){const k=Le();Ue(k,new Se(k))}Qe.STAT_EVENT="statevent";function Ne(p,k){P.call(this,Qe.STAT_EVENT,p),this.stat=k}x(Ne,P);function ze(p){const k=Le();Ue(k,new Ne(k,p))}Qe.Ja="timingevent";function tt(p,k){P.call(this,Qe.Ja,p),this.size=k}x(tt,P);function _e(p,k){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},k)}function xt(){this.g=!0}xt.prototype.ua=function(){this.g=!1};function Zt(p,k,D,W,ne,ce){p.info(function(){if(p.g)if(ce){var De="",pt=ce.split("&");for(let Lt=0;Lt<pt.length;Lt++){var pr=pt[Lt].split("=");if(pr.length>1){const ir=pr[0];pr=pr[1];const qn=ir.split("_");De=qn.length>=2&&qn[1]=="type"?De+(ir+"="+pr+"&"):De+(ir+"=redacted&")}}}else De=null;else De=ce;return"XMLHTTP REQ ("+W+") [attempt "+ne+"]: "+k+`
`+D+`
`+De})}function wt(p,k,D,W,ne,ce,De){p.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ne+"]: "+k+`
`+D+`
`+ce+" "+De})}function Ut(p,k,D,W){p.info(function(){return"XMLHTTP TEXT ("+k+"): "+_n(p,D)+(W?" "+W:"")})}function Dr(p,k){p.info(function(){return"TIMEOUT: "+k})}xt.prototype.info=function(){};function _n(p,k){if(!p.g)return k;if(!k)return null;try{const ce=JSON.parse(k);if(ce){for(p=0;p<ce.length;p++)if(Array.isArray(ce[p])){var D=ce[p];if(!(D.length<2)){var W=D[1];if(Array.isArray(W)&&!(W.length<1)){var ne=W[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(let De=1;De<W.length;De++)W[De]=""}}}}return mt(ce)}catch{return k}}var Vr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},it={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Be;function $t(){}x($t,Ie),$t.prototype.g=function(){return new XMLHttpRequest},Be=new $t;function Vt(p){return encodeURIComponent(String(p))}function Ua(p){var k=1;p=p.split(":");const D=[];for(;k>0&&p.length;)D.push(p.shift()),k--;return p.length&&D.push(p.join(":")),D}function gi(p,k,D,W){this.j=p,this.i=k,this.l=D,this.S=W||1,this.V=new Ee(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mi}function mi(){this.i=null,this.g="",this.h=!1}var Sr={},zr={};function _i(p,k,D){p.M=1,p.A=ta(Tr(k)),p.u=D,p.R=!0,qa(p,null)}function qa(p,k){p.F=Date.now(),Ri(p),p.B=Tr(p.A);var D=p.B,W=p.S;Array.isArray(W)||(W=[String(W)]),Qa(D.i,"t",W),p.C=0,D=p.j.L,p.h=new mi,p.g=Zu(p.j,D?k:null,!p.u),p.P>0&&(p.O=new J(m(p.Y,p,p.g),p.P)),k=p.V,D=p.g,W=p.ba;var ne="readystatechange";Array.isArray(ne)||(ne&&(Xe[0]=ne.toString()),ne=Xe);for(let ce=0;ce<ne.length;ce++){const De=Te(D,ne[ce],W||k.handleEvent,!1,k.h||k);if(!De)break;k.g[De.key]=De}k=p.J?me(p.J):{},p.u?(p.v||(p.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,k)):(p.v="GET",p.g.ea(p.B,p.v,null,k)),qe(),Zt(p.i,p.v,p.B,p.l,p.S,p.u)}gi.prototype.ba=function(p){p=p.target;const k=this.O;k&&yi(p)==3?k.j():this.Y(p)},gi.prototype.Y=function(p){try{if(p==this.g)e:{const pt=yi(this.g),pr=this.g.ya(),Lt=this.g.ca();if(!(pt<3)&&(pt!=3||this.g&&(this.h.h||this.g.la()||Wr(this.g)))){this.K||pt!=4||pr==7||(pr==8||Lt<=0?qe(3):qe(2)),Ci(this);var k=this.g.ca();this.X=k;var D=m0(this);if(this.o=k==200,wt(this.i,this.v,this.B,this.l,this.S,pt,k),this.o){if(this.U&&!this.L){t:{if(this.g){var W,ne=this.g;if((W=ne.g?ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(W)){var ce=W;break t}}ce=null}if(p=ce)Ut(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ii(this,p);else{this.o=!1,this.m=3,ze(12),Rn(this),Gn(this);break e}}if(this.R){p=!0;let ir;for(;!this.K&&this.C<D.length;)if(ir=Lu(this,D),ir==zr){pt==4&&(this.m=4,ze(14),p=!1),Ut(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==Sr){this.m=4,ze(15),Ut(this.i,this.l,D,"[Invalid Chunk]"),p=!1;break}else Ut(this.i,this.l,ir,null),Ii(this,ir);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||D.length!=0||this.h.h||(this.m=1,ze(16),p=!1),this.o=this.o&&p,!p)Ut(this.i,this.l,D,"[Invalid Chunked Response]"),Rn(this),Gn(this);else if(D.length>0&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.aa&&!De.P&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),$c(De),De.P=!0,ze(11))}}else Ut(this.i,this.l,D,null),Ii(this,D);pt==4&&Rn(this),this.o&&!this.K&&(pt==4?Yu(this.j,this):(this.o=!1,Ri(this)))}else ds(this.g),k==400&&D.indexOf("Unknown SID")>0?(this.m=3,ze(12)):(this.m=0,ze(13)),Rn(this),Gn(this)}}}catch{}finally{}};function m0(p){if(!Mu(p))return p.g.la();const k=Wr(p.g);if(k==="")return"";let D="";const W=k.length,ne=yi(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Rn(p),Gn(p),"";p.h.i=new c.TextDecoder}for(let ce=0;ce<W;ce++)p.h.h=!0,D+=p.h.i.decode(k[ce],{stream:!(ne&&ce==W-1)});return k.length=0,p.h.g+=D,p.C=0,p.h.g}function Mu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Lu(p,k){var D=p.C,W=k.indexOf(`
`,D);return W==-1?zr:(D=Number(k.substring(D,W)),isNaN(D)?Sr:(W+=1,W+D>k.length?zr:(k=k.slice(W,W+D),p.C=W+D,k)))}gi.prototype.cancel=function(){this.K=!0,Rn(this)};function Ri(p){p.T=Date.now()+p.H,Ya(p,p.H)}function Ya(p,k){if(p.D!=null)throw Error("WatchDog timer not null");p.D=_e(m(p.aa,p),k)}function Ci(p){p.D&&(c.clearTimeout(p.D),p.D=null)}gi.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Dr(this.i,this.B),this.M!=2&&(qe(),ze(17)),Rn(this),this.m=2,Gn(this)):Ya(this,this.T-p)};function Gn(p){p.j.I==0||p.K||Yu(p.j,p)}function Rn(p){Ci(p);var k=p.O;k&&typeof k.dispose=="function"&&k.dispose(),p.O=null,ut(p.V),p.g&&(k=p.g,p.g=null,k.abort(),k.dispose())}function Ii(p,k){try{var D=p.j;if(D.I!=0&&(D.g==p||Di(D.h,p))){if(!p.L&&Di(D.h,p)&&D.I==3){try{var W=D.Ba.g.parse(k)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ne=W;if(ne[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<p.F)rl(D),Xs(D);else break e;la(D),ze(18)}}else D.xa=ne[1],0<D.xa-D.K&&ne[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=_e(m(D.Va,D),6e3));Fi(D.h)<=1&&D.ta&&(D.ta=void 0)}else Li(D,11)}else if((p.L||D.g==p)&&rl(D),!N(k))for(ne=D.Ba.g.parse(k),k=0;k<ne.length;k++){let Lt=ne[k];const ir=Lt[0];if(!(ir<=D.K))if(D.K=ir,Lt=Lt[1],D.I==2)if(Lt[0]=="c"){D.M=Lt[1],D.ba=Lt[2];const qn=Lt[3];qn!=null&&(D.ka=qn,D.j.info("VER="+D.ka));const Ni=Lt[4];Ni!=null&&(D.za=Ni,D.j.info("SVER="+D.za));const xi=Lt[5];xi!=null&&typeof xi=="number"&&xi>0&&(W=1.5*xi,D.O=W,D.j.info("backChannelRequestTimeoutMs_="+W)),W=D;const bi=p.g;if(bi){const ca=bi.g?bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ca){var ce=W.h;ce.g||ca.indexOf("spdy")==-1&&ca.indexOf("quic")==-1&&ca.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Rc(ce,ce.h),ce.h=null))}if(W.G){const nl=bi.g?bi.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(W.wa=nl,Wt(W.J,W.G,nl))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-p.F,D.j.info("Handshake RTT: "+D.T+"ms")),W=D;var De=p;if(W.na=Qu(W,W.L?W.ba:null,W.W),De.L){Cc(W.h,De);var pt=De,pr=W.O;pr&&(pt.H=pr),pt.D&&(Ci(pt),Ri(pt)),W.g=De}else Uu(W);D.i.length>0&&Mi(D)}else Lt[0]!="stop"&&Lt[0]!="close"||Li(D,7);else D.I==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Li(D,7):Lc(D):Lt[0]!="noop"&&D.l&&D.l.qa(Lt),D.A=0)}}qe(4)}catch{}}var wr=class{constructor(p,k){this.g=p,this.map=k}};function Ec(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _c(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Fi(p){return p.h?1:p.g?p.g.size:0}function Di(p,k){return p.h?p.h==k:p.g?p.g.has(k):!1}function Rc(p,k){p.g?p.g.add(k):p.h=k}function Cc(p,k){p.h&&p.h==k?p.h=null:p.g&&p.g.has(k)&&p.g.delete(k)}Ec.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ic(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let k=p.i;for(const D of p.g.values())k=k.concat(D.G);return k}return S(p.i)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ka(p,k){if(p){p=p.split("&");for(let D=0;D<p.length;D++){const W=p[D].indexOf("=");let ne,ce=null;W>=0?(ne=p[D].substring(0,W),ce=p[D].substring(W+1)):ne=p[D],k(ne,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Cn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;p instanceof Cn?(this.l=p.l,Or(this,p.j),this.o=p.o,this.g=p.g,Ws(this,p.u),this.h=p.h,Fc(this,Gu(p.i)),this.m=p.m):p&&(k=String(p).match(Nu))?(this.l=!1,Or(this,k[1]||"",!0),this.o=Pi(k[2]||""),this.g=Pi(k[3]||"",!0),Ws(this,k[4]),this.h=Pi(k[5]||"",!0),Fc(this,k[6]||"",!0),this.m=Pi(k[7]||"")):(this.l=!1,this.i=new Hs(null,this.l))}Cn.prototype.toString=function(){const p=[];var k=this.j;k&&p.push(ra(k,Xa,!0),":");var D=this.g;return(D||k=="file")&&(p.push("//"),(k=this.o)&&p.push(ra(k,Xa,!0),"@"),p.push(Vt(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&p.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(ra(D,D.charAt(0)=="/"?Dc:$u,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",ra(D,Vu)),p.join("")},Cn.prototype.resolve=function(p){const k=Tr(this);let D=!!p.j;D?Or(k,p.j):D=!!p.o,D?k.o=p.o:D=!!p.g,D?k.g=p.g:D=p.u!=null;var W=p.h;if(D)Ws(k,p.u);else if(D=!!p.h){if(W.charAt(0)!="/")if(this.g&&!this.h)W="/"+W;else{var ne=k.h.lastIndexOf("/");ne!=-1&&(W=k.h.slice(0,ne+1)+W)}if(ne=W,ne==".."||ne==".")W="";else if(ne.indexOf("./")!=-1||ne.indexOf("/.")!=-1){W=ne.lastIndexOf("/",0)==0,ne=ne.split("/");const ce=[];for(let De=0;De<ne.length;){const pt=ne[De++];pt=="."?W&&De==ne.length&&ce.push(""):pt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),W&&De==ne.length&&ce.push("")):(ce.push(pt),W=!0)}W=ce.join("/")}else W=ne}return D?k.h=W:D=p.i.toString()!=="",D?Fc(k,Gu(p.i)):D=!!p.m,D&&(k.m=p.m),k};function Tr(p){return new Cn(p)}function Or(p,k,D){p.j=D?Pi(k,!0):k,p.j&&(p.j=p.j.replace(/:$/,""))}function Ws(p,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);p.u=k}else p.u=null}function Fc(p,k,D){k instanceof Hs?(p.i=k,Za(p.i,p.l)):(D||(k=ra(k,Gs)),p.i=new Hs(k,p.l))}function Wt(p,k,D){p.i.set(k,D)}function ta(p){return Wt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Pi(p,k){return p?k?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ra(p,k,D){return typeof p=="string"?(p=encodeURI(p).replace(k,pn),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function pn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Xa=/[#\/\?@]/g,$u=/[#\?:]/g,Dc=/[#\?]/g,Gs=/[#\?@]/g,Vu=/#/g;function Hs(p,k){this.h=this.g=null,this.i=p||null,this.j=!!k}function yn(p){p.g||(p.g=new Map,p.h=0,p.i&&Ka(p.i,function(k,D){p.add(decodeURIComponent(k.replace(/\+/g," ")),D)}))}r=Hs.prototype,r.add=function(p,k){yn(this),this.i=null,p=Us(this,p);let D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(k),this.h+=1,this};function Wu(p,k){yn(p),k=Us(p,k),p.g.has(k)&&(p.i=null,p.h-=p.g.get(k).length,p.g.delete(k))}function Pc(p,k){return yn(p),k=Us(p,k),p.g.has(k)}r.forEach=function(p,k){yn(this),this.g.forEach(function(D,W){D.forEach(function(ne){p.call(k,ne,W,this)},this)},this)};function Bc(p,k){yn(p);let D=[];if(typeof k=="string")Pc(p,k)&&(D=D.concat(p.g.get(Us(p,k))));else for(p=Array.from(p.g.values()),k=0;k<p.length;k++)D=D.concat(p[k]);return D}r.set=function(p,k){return yn(this),this.i=null,p=Us(this,p),Pc(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[k]),this.h+=1,this},r.get=function(p,k){return p?(p=Bc(this,p),p.length>0?String(p[0]):k):k};function Qa(p,k,D){Wu(p,k),D.length>0&&(p.i=null,p.g.set(Us(p,k),S(D)),p.h+=D.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],k=Array.from(this.g.keys());for(let W=0;W<k.length;W++){var D=k[W];const ne=Vt(D);D=Bc(this,D);for(let ce=0;ce<D.length;ce++){let De=ne;D[ce]!==""&&(De+="="+Vt(D[ce])),p.push(De)}}return this.i=p.join("&")};function Gu(p){const k=new Hs;return k.i=p.i,p.g&&(k.g=new Map(p.g),k.h=p.h),k}function Us(p,k){return k=String(k),p.j&&(k=k.toLowerCase()),k}function Za(p,k){k&&!p.j&&(yn(p),p.i=null,p.g.forEach(function(D,W){const ne=W.toLowerCase();W!=ne&&(Wu(this,W),Qa(this,ne,D))},p)),p.j=k}function fi(p,k){const D=new xt;if(c.Image){const W=new Image;W.onload=f(Hn,D,"TestLoadImage: loaded",!0,k,W),W.onerror=f(Hn,D,"TestLoadImage: error",!1,k,W),W.onabort=f(Hn,D,"TestLoadImage: abort",!1,k,W),W.ontimeout=f(Hn,D,"TestLoadImage: timeout",!1,k,W),c.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=p}else k(!1)}function zc(p,k){const D=new xt,W=new AbortController,ne=setTimeout(()=>{W.abort(),Hn(D,"TestPingServer: timeout",!1,k)},1e4);fetch(p,{signal:W.signal}).then(ce=>{clearTimeout(ne),ce.ok?Hn(D,"TestPingServer: ok",!0,k):Hn(D,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(ne),Hn(D,"TestPingServer: error",!1,k)})}function Hn(p,k,D,W,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),W(D)}catch{}}function qs(){this.g=new oe}function Bi(p){this.i=p.Sb||null,this.h=p.ab||!1}x(Bi,Ie),Bi.prototype.g=function(){return new na(this.i,this.h)};function na(p,k){fe.call(this),this.H=p,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(na,fe),r=na.prototype,r.open=function(p,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=k,this.readyState=1,pi(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(k.body=p),(this.H||c).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ys(this)),this.readyState=0},r.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}r.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var k=p.value?p.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!p.done}))&&(this.response=this.responseText+=k)}p.done?Ys(this):pi(this),this.readyState==3&&Ja(this)}},r.Oa=function(p){this.g&&(this.response=this.responseText=p,Ys(this))},r.Na=function(p){this.g&&(this.response=p,Ys(this))},r.ga=function(){this.g&&Ys(this)};function Ys(p){p.readyState=4,p.l=null,p.j=null,p.B=null,pi(p)}r.setRequestHeader=function(p,k){this.A.append(p,k)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],k=this.h.entries();for(var D=k.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=k.next();return p.join(`\r
`)};function pi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Un(p){let k="";return X(p,function(D,W){k+=W,k+=":",k+=D,k+=`\r
`}),k}function ia(p,k,D){e:{for(W in D){var W=!1;break e}W=!0}W||(D=Un(D),typeof p=="string"?D!=null&&Vt(D):Wt(p,k,D))}function qt(p){fe.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(qt,fe);var zi=/^https?$/i,Oc=["POST","PUT"];r=qt.prototype,r.Fa=function(p){this.H=p},r.ea=function(p,k,D,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);k=k?k.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Be.g(),this.g.onreadystatechange=b(m(this.Ca,this));try{this.B=!0,this.g.open(k,String(p),!0),this.B=!1}catch(ce){sa(this,ce);return}if(p=D||"",D=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ne in W)D.set(ne,W[ne]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const ce of W.keys())D.set(ce,W.get(ce));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(D.keys()).find(ce=>ce.toLowerCase()=="content-type"),ne=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(Oc,k,void 0)>=0)||W||ne||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,De]of D)this.g.setRequestHeader(ce,De);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ce){sa(this,ce)}};function sa(p,k){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=k,p.o=5,Mc(p),cs(p)}function Mc(p){p.A||(p.A=!0,Ue(p,"complete"),Ue(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Ue(this,"complete"),Ue(this,"abort"),cs(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cs(this,!0)),qt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?oa(this):this.Xa())},r.Xa=function(){oa(this)};function oa(p){if(p.h&&typeof l<"u"){if(p.v&&yi(p)==4)setTimeout(p.Ca.bind(p),0);else if(Ue(p,"readystatechange"),yi(p)==4){p.h=!1;try{const ce=p.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var D;if(!(D=k)){var W;if(W=ce===0){let De=String(p.D).match(Nu)[1]||null;!De&&c.self&&c.self.location&&(De=c.self.location.protocol.slice(0,-1)),W=!zi.test(De?De.toLowerCase():"")}D=W}if(D)Ue(p,"complete"),Ue(p,"success");else{p.o=6;try{var ne=yi(p)>2?p.g.statusText:""}catch{ne=""}p.l=ne+" ["+p.ca()+"]",Mc(p)}}finally{cs(p)}}}}function cs(p,k){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const D=p.g;p.g=null,k||Ue(p,"ready");try{D.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function yi(p){return p.g?p.g.readyState:0}r.ca=function(){try{return yi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(p){if(this.g){var k=this.g.responseText;return p&&k.indexOf(p)==0&&(k=k.substring(p.length)),be(k)}};function Wr(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ds(p){const k={};p=(p.g&&yi(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<p.length;W++){if(N(p[W]))continue;var D=Ua(p[W]);const ne=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const ce=k[ne]||[];k[ne]=ce,ce.push(D)}re(k,function(W){return W.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(p,k,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||k}function Ks(p){this.za=0,this.i=[],this.j=new xt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,p),this.Za=Oi("retryDelaySeedMs",1e4,p),this.Ta=Oi("forwardChannelMaxRetries",2,p),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ec(p&&p.concurrentRequestLimit),this.Ba=new qs,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ks.prototype,r.ka=8,r.I=1,r.connect=function(p,k,D,W){ze(0),this.W=p,this.H=k||{},D&&W!==void 0&&(this.H.OSID=D,this.H.OAID=W),this.F=this.X,this.J=Qu(this,null,this.W),Mi(this)};function Lc(p){if(el(p),p.I==3){var k=p.V++,D=Tr(p.J);if(Wt(D,"SID",p.M),Wt(D,"RID",k),Wt(D,"TYPE","terminate"),aa(p,D),k=new gi(p,p.j,k),k.M=2,k.A=ta(Tr(D)),D=!1,c.navigator&&c.navigator.sendBeacon)try{D=c.navigator.sendBeacon(k.A.toString(),"")}catch{}!D&&c.Image&&(new Image().src=k.A,D=!0),D||(k.g=Zu(k.j,null),k.g.ea(k.A)),k.F=Date.now(),Ri(k)}Xu(p)}function Xs(p){p.g&&($c(p),p.g.cancel(),p.g=null)}function el(p){Xs(p),p.v&&(c.clearTimeout(p.v),p.v=null),rl(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Mi(p){if(!_c(p.h)&&!p.m){p.m=!0;var k=p.Ea;L||j(),M||(L(),M=!0),R.add(k,p),p.D=0}}function tl(p,k){return Fi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=k.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=_e(m(p.Ea,p,k),Ku(p,p.D)),p.D++,!0)}r.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ne=new gi(this,this.j,p);let ce=this.o;if(this.U&&(ce?(ce=me(ce),te(ce,this.U)):ce=this.U),this.u!==null||this.R||(ne.J=ce,ce=null),this.S)e:{for(var k=0,D=0;D<this.i.length;D++){t:{var W=this.i[D];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(k+=W,k>4096){k=D;break e}if(k===4096||D===this.i.length-1){k=D+1;break e}}k=1e3}else k=1e3;k=Hu(this,ne,k),D=Tr(this.J),Wt(D,"RID",p),Wt(D,"CVER",22),this.G&&Wt(D,"X-HTTP-Session-Id",this.G),aa(this,D),ce&&(this.R?k="headers="+Vt(Un(ce))+"&"+k:this.u&&ia(D,this.u,ce)),Rc(this.h,ne),this.Ra&&Wt(D,"TYPE","init"),this.S?(Wt(D,"$req",k),Wt(D,"SID","null"),ne.U=!0,_i(ne,D,null)):_i(ne,D,k),this.I=2}}else this.I==3&&(p?Nc(this,p):this.i.length==0||_c(this.h)||Nc(this))};function Nc(p,k){var D;k?D=k.l:D=p.V++;const W=Tr(p.J);Wt(W,"SID",p.M),Wt(W,"RID",D),Wt(W,"AID",p.K),aa(p,W),p.u&&p.o&&ia(W,p.u,p.o),D=new gi(p,p.j,D,p.D+1),p.u===null&&(D.J=p.o),k&&(p.i=k.G.concat(p.i)),k=Hu(p,D,1e3),D.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Rc(p.h,D),_i(D,W,k)}function aa(p,k){p.H&&X(p.H,function(D,W){Wt(k,W,D)}),p.l&&X({},function(D,W){Wt(k,W,D)})}function Hu(p,k,D){D=Math.min(p.i.length,D);const W=p.l?m(p.l.Ka,p.l,p):null;e:{var ne=p.i;let pt=-1;for(;;){const pr=["count="+D];pt==-1?D>0?(pt=ne[0].g,pr.push("ofs="+pt)):pt=0:pr.push("ofs="+pt);let Lt=!0;for(let ir=0;ir<D;ir++){var ce=ne[ir].g;const qn=ne[ir].map;if(ce-=pt,ce<0)pt=Math.max(0,ne[ir].g-100),Lt=!1;else try{ce="req"+ce+"_"||"";try{var De=qn instanceof Map?qn:Object.entries(qn);for(const[Ni,xi]of De){let bi=xi;u(xi)&&(bi=mt(xi)),pr.push(ce+Ni+"="+encodeURIComponent(bi))}}catch(Ni){throw pr.push(ce+"type="+encodeURIComponent("_badmap")),Ni}}catch{W&&W(qn)}}if(Lt){De=pr.join("&");break e}}De=void 0}return p=p.i.splice(0,D),k.G=p,De}function Uu(p){if(!p.g&&!p.v){p.Y=1;var k=p.Da;L||j(),M||(L(),M=!0),R.add(k,p),p.A=0}}function la(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=_e(m(p.Da,p),Ku(p,p.A)),p.A++,!0)}r.Da=function(){if(this.v=null,qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=_e(m(this.Wa,this),p)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ze(10),Xs(this),qu(this))};function $c(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function qu(p){p.g=new gi(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var k=Tr(p.na);Wt(k,"RID","rpc"),Wt(k,"SID",p.M),Wt(k,"AID",p.K),Wt(k,"CI",p.F?"0":"1"),!p.F&&p.ia&&Wt(k,"TO",p.ia),Wt(k,"TYPE","xmlhttp"),aa(p,k),p.u&&p.o&&ia(k,p.u,p.o),p.O&&(p.g.H=p.O);var D=p.g;p=p.ba,D.M=1,D.A=ta(Tr(k)),D.u=null,D.R=!0,qa(D,p)}r.Va=function(){this.C!=null&&(this.C=null,Xs(this),la(this),ze(19))};function rl(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function Yu(p,k){var D=null;if(p.g==k){rl(p),$c(p),p.g=null;var W=2}else if(Di(p.h,k))D=k.G,Cc(p.h,k),W=1;else return;if(p.I!=0){if(k.o)if(W==1){D=k.u?k.u.length:0,k=Date.now()-k.F;var ne=p.D;W=Le(),Ue(W,new tt(W,D)),Mi(p)}else Uu(p);else if(ne=k.m,ne==3||ne==0&&k.X>0||!(W==1&&tl(p,k)||W==2&&la(p)))switch(D&&D.length>0&&(k=p.h,k.i=k.i.concat(D)),ne){case 1:Li(p,5);break;case 4:Li(p,10);break;case 3:Li(p,6);break;default:Li(p,2)}}}function Ku(p,k){let D=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(D*=2),D*k}function Li(p,k){if(p.j.info("Error code "+k),k==2){var D=m(p.bb,p),W=p.Ua;const ne=!W;W=new Cn(W||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Or(W,"https"),ta(W),ne?fi(W.toString(),D):zc(W.toString(),D)}else ze(2);p.I=0,p.l&&p.l.pa(k),Xu(p),el(p)}r.bb=function(p){p?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function Xu(p){if(p.I=0,p.ja=[],p.l){const k=Ic(p.h);(k.length!=0||p.i.length!=0)&&(w(p.ja,k),w(p.ja,p.i),p.h.i.length=0,S(p.i),p.i.length=0),p.l.oa()}}function Qu(p,k,D){var W=D instanceof Cn?Tr(D):new Cn(D);if(W.g!="")k&&(W.g=k+"."+W.g),Ws(W,W.u);else{var ne=c.location;W=ne.protocol,k=k?k+"."+ne.hostname:ne.hostname,ne=+ne.port;const ce=new Cn(null);W&&Or(ce,W),k&&(ce.g=k),ne&&Ws(ce,ne),D&&(ce.h=D),W=ce}return D=p.G,k=p.wa,D&&k&&Wt(W,D,k),Wt(W,"VER",p.ka),aa(p,W),W}function Zu(p,k,D){if(k&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=p.Aa&&!p.ma?new qt(new Bi({ab:D})):new qt(p.ma),k.Fa(p.L),k}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ju(){}r=Ju.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Qs(){}Qs.prototype.g=function(p,k){return new dn(p,k)};function dn(p,k){fe.call(this),this.g=new Ks(k),this.l=p,this.h=k&&k.messageUrlParams||null,p=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(p?p["X-WebChannel-Content-Type"]=k.messageContentType:p={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(p?p["X-WebChannel-Client-Profile"]=k.sa:p={"X-WebChannel-Client-Profile":k.sa}),this.g.U=p,(p=k&&k.Qb)&&!N(p)&&(this.g.u=p),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!N(k)&&(this.g.G=k,p=this.h,p!==null&&k in p&&(p=this.h,k in p&&delete p[k])),this.j=new us(this)}x(dn,fe),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Lc(this.g)},dn.prototype.o=function(p){var k=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.v&&(D={},D.__data__=mt(p),p=D);k.i.push(new wr(k.Ya++,p)),k.I==3&&Mi(k)},dn.prototype.N=function(){this.g.l=null,delete this.j,Lc(this.g),delete this.g,dn.Z.N.call(this)};function eh(p){he.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var k=p.__sm__;if(k){e:{for(const D in k){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,k=k!==null&&p in k?k[p]:void 0),this.data=k}else this.data=p}x(eh,he);function th(){He.call(this),this.status=1}x(th,He);function us(p){this.g=p}x(us,Ju),us.prototype.ra=function(){Ue(this.g,"a")},us.prototype.qa=function(p){Ue(this.g,new eh(p))},us.prototype.pa=function(p){Ue(this.g,new th)},us.prototype.oa=function(){Ue(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,Ij=function(){return new Qs},Cj=function(){return Le()},Rj=Qe,a1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,Cg=Vr,it.COMPLETE="complete",_j=it,Pe.EventType=Fe,Fe.OPEN="a",Fe.CLOSE="b",Fe.ERROR="c",Fe.MESSAGE="d",fe.prototype.listen=fe.prototype.J,Rd=Pe,qt.prototype.listenOnce=qt.prototype.K,qt.prototype.getLastError=qt.prototype.Ha,qt.prototype.getLastErrorCode=qt.prototype.ya,qt.prototype.getStatus=qt.prototype.ca,qt.prototype.getResponseJson=qt.prototype.La,qt.prototype.getResponseText=qt.prototype.la,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Fa,Ej=qt}).apply(typeof sg<"u"?sg:typeof self<"u"?self:typeof window<"u"?window:{});const Vv="@firebase/firestore",Wv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Fm("@firebase/firestore");function Ol(){return Oa.logLevel}function Ge(r,...e){if(Oa.logLevel<=Rt.DEBUG){const t=e.map(oy);Oa.debug(`Firestore (${pc}): ${r}`,...t)}}function Bs(r,...e){if(Oa.logLevel<=Rt.ERROR){const t=e.map(oy);Oa.error(`Firestore (${pc}): ${r}`,...t)}}function nc(r,...e){if(Oa.logLevel<=Rt.WARN){const t=e.map(oy);Oa.warn(`Firestore (${pc}): ${r}`,...t)}}function oy(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Fj(r,i,t)}function Fj(r,e,t){let i=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Bs(i),new Error(i)}function Bt(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||Fj(e,o,i)}function ft(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class X4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Q4{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Bt(this.o===void 0,42304);let i=this.i;const o=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let l=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const h=l;e.enqueueRetryable((async()=>{await h.promise,await o(this.currentUser)}))},u=h=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Bt(typeof i.accessToken=="string",31837,{l:i}),new Dj(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bt(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Z4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class J4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Z4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Bt(this.o===void 0,3512);const i=l=>{l.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Gv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Gv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=tR(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ct(r,e){return r<e?-1:r>e?1:0}function l1(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return xp(o)===xp(l)?Ct(o,l):xp(o)?1:-1}return Ct(r.length,e.length)}const rR=55296,nR=57343;function xp(r){const e=r.charCodeAt(0);return e>=rR&&e<=nR}function ic(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="__name__";class Ki{constructor(e,t,i){t===void 0?t=0:t>e.length&&at(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&at(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Ki.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ct(e.length,t.length)}static compareSegments(e,t){const i=Ki.isNumericId(e),o=Ki.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ki.extractNumericId(e).compare(Ki.extractNumericId(t)):l1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fo.fromString(e.substring(4,e.length-2))}}class Qt extends Ki{construct(e,t,i){return new Qt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Me(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Qt(t)}static emptyPath(){return new Qt([])}}const iR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Ki{construct(e,t,i){return new Qr(e,t,i)}static isValidIdentifier(e){return iR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hv}static keyField(){return new Qr([Hv])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Me(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const u=e[o];if(u==="\\"){if(o+1===e.length)throw new Me(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[o+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Me(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,o+=2}else u==="`"?(c=!c,o++):u!=="."||c?(i+=u,o++):(l(),o++)}if(l(),c)throw new Me(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(t)}static emptyPath(){return new Qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(Qt.fromString(e))}static fromName(e){return new nt(Qt.fromString(e).popFirst(5))}static empty(){return new nt(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(r,e,t){if(!t)throw new Me(pe.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function sR(r,e,t,i){if(e===!0&&i===!0)throw new Me(pe.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Uv(r){if(!nt.isDocumentKey(r))throw new Me(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function qv(r){if(nt.isDocumentKey(r))throw new Me(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Bj(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Pm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":at(12329,{type:typeof r})}function mn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Me(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pm(r);throw new Me(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(r,e){const t={typeString:r};return e&&(t.value=e),t}function yu(r,e){if(!Bj(r))throw new Me(pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Me(pe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=-62135596800,Kv=1e6;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Kv);return new nr(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Yv)throw new Me(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kv}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yu(e,nr._jsonSchema))return new nr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nr._jsonSchemaVersion="firestore/timestamp/1.0",nr._jsonSchema={type:Fr("string",nr._jsonSchemaVersion),seconds:Fr("number"),nanoseconds:Fr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{static fromTimestamp(e){return new ct(e)}static min(){return new ct(new nr(0,0))}static max(){return new ct(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=-1;function oR(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=ct.fromTimestamp(i===1e9?new nr(t+1,0):new nr(t,i));return new Oo(o,nt.empty(),e)}function aR(r){return new Oo(r.readTime,r.key,Zd)}class Oo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Oo(ct.min(),nt.empty(),Zd)}static max(){return new Oo(ct.max(),nt.empty(),Zd)}}function lR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=nt.comparator(r.documentKey,e.documentKey),t!==0?t:Ct(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(r){if(r.code!==pe.FAILED_PRECONDITION||r.message!==cR)throw r;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new je(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof je?t:je.resolve(t)}catch(t){return je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):je.reject(t)}static resolve(e){return new je(((t,i)=>{t(e)}))}static reject(e){return new je(((t,i)=>{i(e)}))}static waitFor(e){return new je(((t,i)=>{let o=0,l=0,c=!1;e.forEach((u=>{++o,u.next((()=>{++l,c&&l===o&&t()}),(h=>i(h)))})),c=!0,l===o&&t()}))}static or(e){let t=je.resolve(!1);for(const i of e)t=t.next((o=>o?je.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new je(((i,o)=>{const l=e.length,c=new Array(l);let u=0;for(let h=0;h<l;h++){const m=h;t(e[m]).next((f=>{c[m]=f,++u,u===l&&i(c)}),(f=>o(f)))}}))}static doWhile(e,t){return new je(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function uR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xc(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function xu(r){return r==null}function em(r){return r===0&&1/r==-1/0}function hR(r){return typeof r=="number"&&Number.isInteger(r)&&!em(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj="";function gR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Xv(e)),e=mR(r.get(t),e);return Xv(e)}function mR(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case zj:t+="";break;default:t+=l}}return t}function Xv(r){return r+zj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ko(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Oj(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new og(this.root,e,this.comparator,!1)}getReverseIterator(){return new og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new og(this.root,e,this.comparator,!0)}}class og{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Xr.RED,this.left=o??Xr.EMPTY,this.right=l??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Xr(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xr.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.comparator=e,this.data=new dr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zv(this.data.getIterator())}getIteratorFrom(e){return new Zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Br(this.comparator);return t.data=e,t}}class Zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new Br(Qr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Mj("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const fR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mo(r){if(Bt(!!r,39018),typeof r=="string"){let e=0;const t=fR.exec(r);if(Bt(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vr(r.seconds),nanos:vr(r.nanos)}}function vr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lo(r){return typeof r=="string"?en.fromBase64String(r):en.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="server_timestamp",Nj="__type__",$j="__previous_value__",Vj="__local_write_time__";function cy(r){return(r?.mapValue?.fields||{})[Nj]?.stringValue===Lj}function zm(r){const e=r.mapValue.fields[$j];return cy(e)?zm(e):e}function Jd(r){const e=Mo(r.mapValue.fields[Vj].timestampValue);return new nr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t,i,o,l,c,u,h,m,f){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=f}}const tm="(default)";class eu{constructor(e,t){this.projectId=e,this.database=t||tm}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===tm}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="__type__",yR="__max__",ag={mapValue:{}},Gj="__vector__",rm="value";function No(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?cy(r)?4:bR(r)?9007199254740991:xR(r)?10:11:at(28295,{value:r})}function is(r,e){if(r===e)return!0;const t=No(r);if(t!==No(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Jd(r).isEqual(Jd(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Mo(o.timestampValue),u=Mo(l.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Lo(o.bytesValue).isEqual(Lo(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return vr(o.geoPointValue.latitude)===vr(l.geoPointValue.latitude)&&vr(o.geoPointValue.longitude)===vr(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return vr(o.integerValue)===vr(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=vr(o.doubleValue),u=vr(l.doubleValue);return c===u?em(c)===em(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return ic(r.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},u=l.mapValue.fields||{};if(Qv(c)!==Qv(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!is(c[h],u[h])))return!1;return!0})(r,e);default:return at(52216,{left:r})}}function tu(r,e){return(r.values||[]).find((t=>is(t,e)))!==void 0}function sc(r,e){if(r===e)return 0;const t=No(r),i=No(e);if(t!==i)return Ct(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ct(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const u=vr(l.integerValue||l.doubleValue),h=vr(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(r,e);case 3:return Jv(r.timestampValue,e.timestampValue);case 4:return Jv(Jd(r),Jd(e));case 5:return l1(r.stringValue,e.stringValue);case 6:return(function(l,c){const u=Lo(l),h=Lo(c);return u.compareTo(h)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const u=l.split("/"),h=c.split("/");for(let m=0;m<u.length&&m<h.length;m++){const f=Ct(u[m],h[m]);if(f!==0)return f}return Ct(u.length,h.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const u=Ct(vr(l.latitude),vr(c.latitude));return u!==0?u:Ct(vr(l.longitude),vr(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return eS(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const u=l.fields||{},h=c.fields||{},m=u[rm]?.arrayValue,f=h[rm]?.arrayValue,x=Ct(m?.values?.length||0,f?.values?.length||0);return x!==0?x:eS(m,f)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ag.mapValue&&c===ag.mapValue)return 0;if(l===ag.mapValue)return 1;if(c===ag.mapValue)return-1;const u=l.fields||{},h=Object.keys(u),m=c.fields||{},f=Object.keys(m);h.sort(),f.sort();for(let x=0;x<h.length&&x<f.length;++x){const b=l1(h[x],f[x]);if(b!==0)return b;const S=sc(u[h[x]],m[f[x]]);if(S!==0)return S}return Ct(h.length,f.length)})(r.mapValue,e.mapValue);default:throw at(23264,{he:t})}}function Jv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ct(r,e);const t=Mo(r),i=Mo(e),o=Ct(t.seconds,i.seconds);return o!==0?o:Ct(t.nanos,i.nanos)}function eS(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=sc(t[o],i[o]);if(l)return l}return Ct(t.length,i.length)}function oc(r){return c1(r)}function c1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Mo(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Lo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return nt.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=c1(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${c1(t.fields[c])}`;return o+"}"})(r.mapValue):at(61005,{value:r})}function Ig(r){switch(No(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zm(r);return e?16+Ig(e):16;case 5:return 2*r.stringValue.length;case 6:return Lo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Ig(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Ko(i.fields,((l,c)=>{o+=l.length+Ig(c)})),o})(r.mapValue);default:throw at(13486,{value:r})}}function tS(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function d1(r){return!!r&&"integerValue"in r}function dy(r){return!!r&&"arrayValue"in r}function rS(r){return!!r&&"nullValue"in r}function nS(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Fg(r){return!!r&&"mapValue"in r}function xR(r){return(r?.mapValue?.fields||{})[Wj]?.stringValue===Gj}function zd(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ko(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=zd(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zd(r.arrayValue.values[t]);return e}return{...r}}function bR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===yR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Fg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zd(t)}setAll(e){let t=Qr.emptyPath(),i={},o=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,i,o),i={},o=[],t=u.popLast()}c?i[u.lastSegment()]=zd(c):o.push(u.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Fg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Fg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ko(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new hn(zd(this.value))}}function Hj(r){const e=[];return Ko(r.fields,((t,i)=>{const o=new Qr([t]);if(Fg(i)){const l=Hj(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t,i,o,l,c,u){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Nr(e,0,ct.min(),ct.min(),ct.min(),hn.empty(),0)}static newFoundDocument(e,t,i,o){return new Nr(e,1,t,ct.min(),i,o,0)}static newNoDocument(e,t){return new Nr(e,2,t,ct.min(),ct.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new Nr(e,3,t,ct.min(),ct.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t){this.position=e,this.inclusive=t}}function iS(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],c=r.position[o];if(l.field.isKeyField()?i=nt.comparator(nt.fromName(c.referenceValue),t.key):i=sc(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function sS(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!is(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t="asc"){this.field=e,this.dir=t}}function vR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{}class Ir extends Uj{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new wR(e,t,i):t==="array-contains"?new AR(e,i):t==="in"?new kR(e,i):t==="not-in"?new ER(e,i):t==="array-contains-any"?new _R(e,i):new Ir(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new TR(e,i):new jR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sc(t,this.value)):t!==null&&No(this.value)===No(t)&&this.matchesComparison(sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends Uj{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ei(e,t)}matches(e){return qj(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qj(r){return r.op==="and"}function Yj(r){return SR(r)&&qj(r)}function SR(r){for(const e of r.filters)if(e instanceof Ei)return!1;return!0}function u1(r){if(r instanceof Ir)return r.field.canonicalString()+r.op.toString()+oc(r.value);if(Yj(r))return r.filters.map((e=>u1(e))).join(",");{const e=r.filters.map((t=>u1(t))).join(",");return`${r.op}(${e})`}}function Kj(r,e){return r instanceof Ir?(function(i,o){return o instanceof Ir&&i.op===o.op&&i.field.isEqual(o.field)&&is(i.value,o.value)})(r,e):r instanceof Ei?(function(i,o){return o instanceof Ei&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,u)=>l&&Kj(c,o.filters[u])),!0):!1})(r,e):void at(19439)}function Xj(r){return r instanceof Ir?(function(t){return`${t.field.canonicalString()} ${t.op} ${oc(t.value)}`})(r):r instanceof Ei?(function(t){return t.op.toString()+" {"+t.getFilters().map(Xj).join(" ,")+"}"})(r):"Filter"}class wR extends Ir{constructor(e,t,i){super(e,t,i),this.key=nt.fromName(i.referenceValue)}matches(e){const t=nt.comparator(e.key,this.key);return this.matchesComparison(t)}}class TR extends Ir{constructor(e,t){super(e,"in",t),this.keys=Qj("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jR extends Ir{constructor(e,t){super(e,"not-in",t),this.keys=Qj("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qj(r,e){return(e.arrayValue?.values||[]).map((t=>nt.fromName(t.referenceValue)))}class AR extends Ir{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dy(t)&&tu(t.arrayValue,this.value)}}class kR extends Ir{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tu(this.value.arrayValue,t)}}class ER extends Ir{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tu(this.value.arrayValue,t)}}class _R extends Ir{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>tu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t=null,i=[],o=[],l=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=u,this.Te=null}}function oS(r,e=null,t=[],i=[],o=null,l=null,c=null){return new RR(r,e,t,i,o,l,c)}function uy(r){const e=ft(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>u1(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),xu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>oc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>oc(i))).join(",")),e.Te=t}return e.Te}function hy(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!vR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Kj(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!sS(r.startAt,e.startAt)&&sS(r.endAt,e.endAt)}function h1(r){return nt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t=null,i=[],o=[],l=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CR(r,e,t,i,o,l,c,u){return new bc(r,e,t,i,o,l,c,u)}function Om(r){return new bc(r)}function aS(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Zj(r){return r.collectionGroup!==null}function Od(r){const e=ft(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Br(Qr.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((m=>{m.isInequality()&&(u=u.add(m.field))}))})),u})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ru(l,i))})),t.has(Qr.keyField().canonicalString())||e.Ie.push(new ru(Qr.keyField(),i))}return e.Ie}function Qi(r){const e=ft(r);return e.Ee||(e.Ee=IR(e,Od(r))),e.Ee}function IR(r,e){if(r.limitType==="F")return oS(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new ru(o.field,l)}));const t=r.endAt?new nm(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new nm(r.startAt.position,r.startAt.inclusive):null;return oS(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function g1(r,e){const t=r.filters.concat([e]);return new bc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function m1(r,e,t){return new bc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Mm(r,e){return hy(Qi(r),Qi(e))&&r.limitType===e.limitType}function Jj(r){return`${uy(Qi(r))}|lt:${r.limitType}`}function Ml(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Xj(o))).join(", ")}]`),xu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>oc(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>oc(o))).join(",")),`Target(${i})`})(Qi(r))}; limitType=${r.limitType})`}function Lm(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):nt.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Od(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(c,u,h){const m=iS(c,u,h);return c.inclusive?m<=0:m<0})(i.startAt,Od(i),o)||i.endAt&&!(function(c,u,h){const m=iS(c,u,h);return c.inclusive?m>=0:m>0})(i.endAt,Od(i),o))})(r,e)}function FR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function eA(r){return(e,t)=>{let i=!1;for(const o of Od(r)){const l=DR(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function DR(r,e,t){const i=r.field.isKeyField()?nt.comparator(e.key,t.key):(function(l,c,u){const h=c.data.field(l),m=u.data.field(l);return h!==null&&m!==null?sc(h,m):at(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return at(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return Oj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new dr(nt.comparator);function zs(){return PR}const tA=new dr(nt.comparator);function Cd(...r){let e=tA;for(const t of r)e=e.insert(t.key,t);return e}function rA(r){let e=tA;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function _a(){return Md()}function nA(){return Md()}function Md(){return new Wa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const BR=new dr(nt.comparator),zR=new Br(nt.comparator);function It(...r){let e=zR;for(const t of r)e=e.add(t);return e}const OR=new Br(Ct);function MR(){return OR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:em(e)?"-0":e}}function iA(r){return{integerValue:""+r}}function LR(r,e){return hR(e)?iA(e):gy(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this._=void 0}}function NR(r,e,t){return r instanceof nu?(function(o,l){const c={fields:{[Nj]:{stringValue:Lj},[Vj]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&cy(l)&&(l=zm(l)),l&&(c.fields[$j]=l),{mapValue:c}})(t,e):r instanceof ac?oA(r,e):r instanceof iu?aA(r,e):(function(o,l){const c=sA(o,l),u=lS(c)+lS(o.Ae);return d1(c)&&d1(o.Ae)?iA(u):gy(o.serializer,u)})(r,e)}function $R(r,e,t){return r instanceof ac?oA(r,e):r instanceof iu?aA(r,e):t}function sA(r,e){return r instanceof im?(function(i){return d1(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class nu extends Nm{}class ac extends Nm{constructor(e){super(),this.elements=e}}function oA(r,e){const t=lA(e);for(const i of r.elements)t.some((o=>is(o,i)))||t.push(i);return{arrayValue:{values:t}}}class iu extends Nm{constructor(e){super(),this.elements=e}}function aA(r,e){let t=lA(e);for(const i of r.elements)t=t.filter((o=>!is(o,i)));return{arrayValue:{values:t}}}class im extends Nm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lS(r){return vr(r.integerValue||r.doubleValue)}function lA(r){return dy(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,t){this.field=e,this.transform=t}}function VR(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ac&&o instanceof ac||i instanceof iu&&o instanceof iu?ic(i.elements,o.elements,is):i instanceof im&&o instanceof im?is(i.Ae,o.Ae):i instanceof nu&&o instanceof nu})(r.transform,e.transform)}class WR{constructor(e,t){this.version=e,this.transformResults=t}}class Zr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zr}static exists(e){return new Zr(void 0,e)}static updateTime(e){return new Zr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dg(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class $m{}function dA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Vm(r.key,Zr.none()):new bu(r.key,r.data,Zr.none());{const t=r.data,i=hn.empty();let o=new Br(Qr.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Xo(r.key,i,new Ln(o.toArray()),Zr.none())}}function GR(r,e,t){r instanceof bu?(function(o,l,c){const u=o.value.clone(),h=dS(o.fieldTransforms,l,c.transformResults);u.setAll(h),l.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof Xo?(function(o,l,c){if(!Dg(o.precondition,l))return void l.convertToUnknownDocument(c.version);const u=dS(o.fieldTransforms,l,c.transformResults),h=l.data;h.setAll(uA(o)),h.setAll(u),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(r,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ld(r,e,t,i){return r instanceof bu?(function(l,c,u,h){if(!Dg(l.precondition,c))return u;const m=l.value.clone(),f=uS(l.fieldTransforms,h,c);return m.setAll(f),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(r,e,t,i):r instanceof Xo?(function(l,c,u,h){if(!Dg(l.precondition,c))return u;const m=uS(l.fieldTransforms,h,c),f=c.data;return f.setAll(uA(l)),f.setAll(m),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),u===null?null:u.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(r,e,t,i):(function(l,c,u){return Dg(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function HR(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=sA(i.transform,o||null);l!=null&&(t===null&&(t=hn.empty()),t.set(i.field,l))}return t||null}function cS(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ic(i,o,((l,c)=>VR(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class bu extends $m{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Xo extends $m{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function uA(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function dS(r,e,t){const i=new Map;Bt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],c=l.transform,u=e.data.field(l.field);i.set(l.field,$R(c,u,t[o]))}return i}function uS(r,e,t){const i=new Map;for(const o of r){const l=o.transform,c=t.data.field(o.field);i.set(o.field,NR(l,c,e))}return i}class Vm extends $m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hA extends $m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&GR(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ld(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ld(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nA();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let u=this.applyToLocalView(c,l.mutatedFields);u=t.has(o.key)?null:u;const h=dA(c,u);h!==null&&i.set(o.key,h),c.isValidDocument()||c.convertToNoDocument(ct.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),It())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,((t,i)=>cS(t,i)))&&ic(this.baseMutations,e.baseMutations,((t,i)=>cS(t,i)))}}class my{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Bt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return BR})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new my(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr,Pt;function gA(r){switch(r){case pe.OK:return at(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return at(15467,{code:r})}}function mA(r){if(r===void 0)return Bs("GRPC error has no .code"),pe.UNKNOWN;switch(r){case Rr.OK:return pe.OK;case Rr.CANCELLED:return pe.CANCELLED;case Rr.UNKNOWN:return pe.UNKNOWN;case Rr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Rr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Rr.INTERNAL:return pe.INTERNAL;case Rr.UNAVAILABLE:return pe.UNAVAILABLE;case Rr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Rr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Rr.NOT_FOUND:return pe.NOT_FOUND;case Rr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Rr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Rr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Rr.ABORTED:return pe.ABORTED;case Rr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Rr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Rr.DATA_LOSS:return pe.DATA_LOSS;default:return at(39323,{code:r})}}(Pt=Rr||(Rr={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Fo([4294967295,4294967295],0);function hS(r){const e=KR().encode(r),t=new kj;return t.update(e),new Uint8Array(t.digest())}function gS(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Fo([t,i],0),new Fo([o,l],0)]}class fy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Id(`Invalid padding: ${t}`);if(i<0)throw new Id(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Id(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Id(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Fo.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Fo.fromNumber(i)));return o.compare(XR)===1&&(o=new Fo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=hS(e),[i,o]=gS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new fy(l,o,t);return i.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=hS(e),[i,o]=gS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Id extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wm(ct.min(),o,new dr(Ct),zs(),It())}}class vu{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new vu(i,t,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class fA{constructor(e,t){this.targetId=e,this.Ce=t}}class pA{constructor(e,t,i=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class mS{constructor(){this.ve=0,this.Fe=fS(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=It(),t=It(),i=It();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:at(38017,{changeType:l})}})),new vu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=fS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QR{constructor(e){this.Ge=e,this.ze=new Map,this.je=zs(),this.Je=lg(),this.He=lg(),this.Ye=new dr(Ct)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:at(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(h1(l))if(i===0){const c=new nt(l.path);this.et(t,c,Nr.newNoDocument(c,ct.min()))}else Bt(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const u=this.ut(e),h=u?this.ct(u,e,c):1;if(h!==0){this.it(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,u;try{c=Lo(i).toUint8Array()}catch(h){if(h instanceof Mj)return nc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new fy(c,o,l)}catch(h){return nc(h instanceof Id?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(u)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const u=this.ot(c);if(u){if(l.current&&h1(u.target)){const h=new nt(u.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,Nr.newNoDocument(h,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=It();this.He.forEach(((l,c)=>{let u=!0;c.forEachWhile((h=>{const m=this.ot(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Wm(e,t,this.Ye,this.je,i);return this.je=zs(),this.Je=lg(),this.He=lg(),this.Ye=new dr(Ct),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new mS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Br(Ct),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Br(Ct),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lg(){return new dr(nt.comparator)}function fS(){return new dr(nt.comparator)}const ZR={asc:"ASCENDING",desc:"DESCENDING"},JR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eC={and:"AND",or:"OR"};class tC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function f1(r,e){return r.useProto3Json||xu(e)?e:{value:e}}function sm(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function rC(r,e){return sm(r,e.toTimestamp())}function Nn(r){return Bt(!!r,49232),ct.fromTimestamp((function(t){const i=Mo(t);return new nr(i.seconds,i.nanos)})(r))}function py(r,e){return p1(r,e).canonicalString()}function p1(r,e){const t=(function(o){return new Qt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function xA(r){const e=Qt.fromString(r);return Bt(jA(e),10190,{key:e.toString()}),e}function om(r,e){return py(r.databaseId,e.path)}function Nd(r,e){const t=xA(e);if(t.get(1)!==r.databaseId.projectId)throw new Me(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Me(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new nt(vA(t))}function bA(r,e){return py(r.databaseId,e)}function nC(r){const e=xA(r);return e.length===4?Qt.emptyPath():vA(e)}function y1(r){return new Qt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function vA(r){return Bt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function pS(r,e,t){return{name:om(r,e),fields:t.value.mapValue.fields}}function iC(r,e){return"found"in e?(function(i,o){Bt(!!o.found,43571),o.found.name,o.found.updateTime;const l=Nd(i,o.found.name),c=Nn(o.found.updateTime),u=o.found.createTime?Nn(o.found.createTime):ct.min(),h=new hn({mapValue:{fields:o.found.fields}});return Nr.newFoundDocument(l,c,u,h)})(r,e):"missing"in e?(function(i,o){Bt(!!o.missing,3894),Bt(!!o.readTime,22933);const l=Nd(i,o.missing),c=Nn(o.readTime);return Nr.newNoDocument(l,c)})(r,e):at(7234,{result:e})}function sC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:at(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,f){return m.useProto3Json?(Bt(f===void 0||typeof f=="string",58123),en.fromBase64String(f||"")):(Bt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),en.fromUint8Array(f||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(m){const f=m.code===void 0?pe.UNKNOWN:mA(m.code);return new Me(f,m.message||"")})(c);t=new pA(i,o,l,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Nd(r,i.document.name),l=Nn(i.document.updateTime),c=i.document.createTime?Nn(i.document.createTime):ct.min(),u=new hn({mapValue:{fields:i.document.fields}}),h=Nr.newFoundDocument(o,l,c,u),m=i.targetIds||[],f=i.removedTargetIds||[];t=new Pg(m,f,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Nd(r,i.document),l=i.readTime?Nn(i.readTime):ct.min(),c=Nr.newNoDocument(o,l),u=i.removedTargetIds||[];t=new Pg([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Nd(r,i.document),l=i.removedTargetIds||[];t=new Pg([],l,o,null)}else{if(!("filter"in e))return at(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new YR(o,l),u=i.targetId;t=new fA(u,c)}}return t}function SA(r,e){let t;if(e instanceof bu)t={update:pS(r,e.key,e.value)};else if(e instanceof Vm)t={delete:om(r,e.key)};else if(e instanceof Xo)t={update:pS(r,e.key,e.data),updateMask:mC(e.fieldMask)};else{if(!(e instanceof hA))return at(16599,{Vt:e.type});t={verify:om(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const u=c.transform;if(u instanceof nu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ac)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof iu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof im)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw at(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:rC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:at(27497)})(r,e.precondition)),t}function oC(r,e){return r&&r.length>0?(Bt(e!==void 0,14353),r.map((t=>(function(o,l){let c=o.updateTime?Nn(o.updateTime):Nn(l);return c.isEqual(ct.min())&&(c=Nn(l)),new WR(c,o.transformResults||[])})(t,e)))):[]}function aC(r,e){return{documents:[bA(r,e.path)]}}function lC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=bA(r,o);const l=(function(m){if(m.length!==0)return TA(Ei.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((f=>(function(b){return{field:Ll(b.field),direction:uC(b.dir)}})(f)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=f1(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function cC(r){let e=nC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Bt(i===1,65062);const f=t.from[0];f.allDescendants?o=f.collectionId:e=e.child(f.collectionId)}let l=[];t.where&&(l=(function(x){const b=wA(x);return b instanceof Ei&&Yj(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(x){return x.map((b=>(function(w){return new ru(Nl(w.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(b)))})(t.orderBy));let u=null;t.limit&&(u=(function(x){let b;return b=typeof x=="object"?x.value:x,xu(b)?null:b})(t.limit));let h=null;t.startAt&&(h=(function(x){const b=!!x.before,S=x.values||[];return new nm(S,b)})(t.startAt));let m=null;return t.endAt&&(m=(function(x){const b=!x.before,S=x.values||[];return new nm(S,b)})(t.endAt)),CR(e,o,c,l,u,"F",h,m)}function dC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wA(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Nl(t.unaryFilter.field);return Ir.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Nl(t.unaryFilter.field);return Ir.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Nl(t.unaryFilter.field);return Ir.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nl(t.unaryFilter.field);return Ir.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ir.create(Nl(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ei.create(t.compositeFilter.filters.map((i=>wA(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(t.compositeFilter.op))})(r):at(30097,{filter:r})}function uC(r){return ZR[r]}function hC(r){return JR[r]}function gC(r){return eC[r]}function Ll(r){return{fieldPath:r.canonicalString()}}function Nl(r){return Qr.fromServerFormat(r.fieldPath)}function TA(r){return r instanceof Ir?(function(t){if(t.op==="=="){if(nS(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NAN"}};if(rS(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nS(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NOT_NAN"}};if(rS(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(t.field),op:hC(t.op),value:t.value}}})(r):r instanceof Ei?(function(t){const i=t.getFilters().map((o=>TA(o)));return i.length===1?i[0]:{compositeFilter:{op:gC(t.op),filters:i}}})(r):at(54877,{filter:r})}function mC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function jA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t,i,o,l=ct.min(),c=ct.min(),u=en.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.yt=e}}function pC(r){const e=cC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?m1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.Cn=new xC}addToCollectionParentIndex(e,t){return this.Cn.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve(Oo.min())}updateCollectionGroup(e,t,i){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}}class xC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Br(Qt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Br(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AA=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(AA,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lc(0)}static cr(){return new lc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="LruGarbageCollector",bC=1048576;function bS([r,e],[t,i]){const o=Ct(r,t);return o===0?Ct(e,i):o}class vC{constructor(e){this.Ir=e,this.buffer=new Br(bS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();bS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ge(xS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xc(t)?Ge(xS,"Ignoring IndexedDB error during garbage collection: ",t):await yc(t)}await this.Vr(3e5)}))}}class wC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return je.resolve(Bm.ce);const i=new vC(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(yS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,c,u,h,m;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(i=x,u=Date.now(),this.removeTargets(e,i,t)))).next((x=>(l=x,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(m=Date.now(),Ol()<=Rt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-f}ms
	Determined least recently used ${o} in `+(u-c)+`ms
	Removed ${l} targets in `+(h-u)+`ms
	Removed ${x} documents in `+(m-h)+`ms
Total Duration: ${m-f}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:x}))))}}function TC(r,e){return new wC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.changes=new Wa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?je.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ld(i.mutation,o,Ln.empty(),nr.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,It()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=It()){const o=_a();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=Cd();return l.forEach(((u,h)=>{c=c.insert(u,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=_a();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,It())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,i,o){let l=zs();const c=Md(),u=(function(){return Md()})();return t.forEach(((h,m)=>{const f=i.get(m.key);o.has(m.key)&&(f===void 0||f.mutation instanceof Xo)?l=l.insert(m.key,m):f!==void 0?(c.set(m.key,f.mutation.getFieldMask()),Ld(f.mutation,m,f.mutation.getFieldMask(),nr.now())):c.set(m.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,l).next((h=>(h.forEach(((m,f)=>c.set(m,f))),t.forEach(((m,f)=>u.set(m,new AC(f,c.get(m)??null)))),u)))}recalculateAndSaveOverlays(e,t){const i=Md();let o=new dr(((c,u)=>c-u)),l=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((h=>{const m=t.get(h);if(m===null)return;let f=i.get(h)||Ln.empty();f=u.applyToLocalView(m,f),i.set(h,f);const x=(o.get(u.batchId)||It()).add(h);o=o.insert(u.batchId,x)}))})).next((()=>{const c=[],u=o.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,f=h.value,x=nA();f.forEach((b=>{if(!l.has(b)){const S=dA(t.get(b),i.get(b));S!==null&&x.set(b,S),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,x))}return je.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return nt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):je.resolve(_a());let u=Zd,h=l;return c.next((m=>je.forEach(m,((f,x)=>(u<x.largestBatchId&&(u=x.largestBatchId),l.get(f)?je.resolve():this.remoteDocumentCache.getEntry(e,f).next((b=>{h=h.insert(f,b)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,h,m,It()))).next((f=>({batchId:u,changes:rA(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nt(t)).next((i=>{let o=Cd();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Cd();return this.indexManager.getCollectionParents(e,l).next((u=>je.forEach(u,(h=>{const m=(function(x,b){return new bc(b,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,h.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next((f=>{f.forEach(((x,b)=>{c=c.insert(x,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((h,m)=>{const f=m.getKey();c.get(f)===null&&(c=c.insert(f,Nr.newInvalidDocument(f)))}));let u=Cd();return c.forEach(((h,m)=>{const f=l.get(h);f!==void 0&&Ld(f.mutation,m,Ln.empty(),nr.now()),Lm(t,m)&&(u=u.insert(h,m))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return je.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Nn(o.createTime)}})(t)),je.resolve()}getNamedQuery(e,t){return je.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:pC(o.bundledQuery),readTime:Nn(o.readTime)}})(t)),je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.overlays=new dr(nt.comparator),this.qr=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){const i=_a();return je.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),je.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),je.resolve()}getOverlaysForCollection(e,t,i){const o=_a(),l=t.length+1,c=new nt(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&h.largestBatchId>i&&o.set(h.getKey(),h)}return je.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new dr(((m,f)=>m-f));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let f=l.get(m.largestBatchId);f===null&&(f=_a(),l=l.insert(m.largestBatchId,f)),f.set(m.getKey(),m)}}const u=_a(),h=l.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((m,f)=>u.set(m,f))),!(u.size()>=o)););return je.resolve(u)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new qR(t,i));let l=this.qr.get(t);l===void 0&&(l=It(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.Qr=new Br(Lr.$r),this.Ur=new Br(Lr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Lr(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Lr(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new nt(new Qt([])),i=new Lr(t,e),o=new Lr(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new nt(new Qt([])),i=new Lr(t,e),o=new Lr(t,e+1);let l=It();return this.Ur.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Lr(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Lr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return nt.comparator(e.key,t.key)||Ct(e.Yr,t.Yr)}static Kr(e,t){return Ct(e.Yr,t.Yr)||nt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Br(Lr.$r)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new UR(l,t,i,o);this.mutationQueue.push(c);for(const u of o)this.Zr=this.Zr.add(new Lr(u.key,l)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return je.resolve(c)}lookupMutationBatch(e,t){return je.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return je.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?ly:this.tr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Lr(t,0),o=new Lr(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(c=>{const u=this.Xr(c.Yr);l.push(u)})),je.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Br(Ct);return t.forEach((o=>{const l=new Lr(o,0),c=new Lr(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(u=>{i=i.add(u.Yr)}))})),je.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;nt.isDocumentKey(l)||(l=l.child(""));const c=new Lr(new nt(l),0);let u=new Br(Ct);return this.Zr.forEachWhile((h=>{const m=h.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(u=u.add(h.Yr)),!0)}),c),je.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Bt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return je.forEach(t.mutations,(o=>{const l=new Lr(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Lr(t,0),o=this.Zr.firstAfterOrEqual(i);return je.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.ri=e,this.docs=(function(){return new dr(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return je.resolve(i?i.document.mutableCopy():Nr.newInvalidDocument(t))}getEntries(e,t){let i=zs();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Nr.newInvalidDocument(o))})),je.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=zs();const c=t.path,u=new nt(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:f}}=h.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||lR(aR(f),i)<=0||(o.has(f.key)||Lm(t,f))&&(l=l.insert(f.key,f.mutableCopy()))}return je.resolve(l)}getAllFromCollectionGroup(e,t,i,o){at(9500)}ii(e,t){return je.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new FC(this)}getSize(e){return je.resolve(this.size)}}class FC extends jC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),je.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.persistence=e,this.si=new Wa((t=>uy(t)),hy),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.oi=0,this._i=new yy,this.targetCount=0,this.ai=lc.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),je.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new lc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.Pr(t),je.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,u.targetId)),o++)})),je.waitFor(l).next((()=>o))}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return je.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),je.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),je.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),je.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return je.resolve(i)}containsKey(e,t){return je.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.ui={},this.overlays={},this.ci=new Bm(0),this.li=!1,this.li=!0,this.hi=new RC,this.referenceDelegate=e(this),this.Pi=new DC(this),this.indexManager=new yC,this.remoteDocumentCache=(function(o){return new IC(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new fC(t),this.Ii=new EC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _C,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new CC(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){Ge("MemoryPersistence","Starting transaction:",e);const o=new PC(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return je.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class PC extends dR{constructor(e){super(),this.currentSequenceNumber=e}}class xy{constructor(e){this.persistence=e,this.Ri=new yy,this.Vi=null}static mi(e){return new xy(e)}get fi(){if(this.Vi)return this.Vi;throw at(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),je.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),je.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.fi,(i=>{const o=nt.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,ct.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return je.or([()=>je.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class am{constructor(e,t){this.persistence=e,this.pi=new Wa((i=>gR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=TC(this,t)}static mi(e,t){return new am(e,t)}Ei(){}di(e){return je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return je.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?je.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((u=>{u||(i++,l.removeEntry(c,ct.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),je.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),je.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),je.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ig(e.data.value)),t}br(e,t,i){return je.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return je.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=It(),o=It();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new by(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return E8()?8:uR(cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new BC;return this.Ss(e,t,c).next((u=>{if(l.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Ol()<=Rt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Ml(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),je.resolve()):(Ol()<=Rt.DEBUG&&Ge("QueryEngine","Query:",Ml(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ol()<=Rt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Ml(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(t))):je.resolve())}ys(e,t){if(aS(t))return je.resolve(null);let i=Qi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=m1(t,null,"F"),i=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=It(...l);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,i).next((h=>{const m=this.Ds(t,u);return this.Cs(t,m,c,h.readTime)?this.ys(e,m1(t,null,"F")):this.vs(e,m,t,h)}))))})))))}ws(e,t,i,o){return aS(t)||o.isEqual(ct.min())?je.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,o)?je.resolve(null):(Ol()<=Rt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ml(t)),this.vs(e,c,t,oR(o,Zd)).next((u=>u)))}))}Ds(e,t){let i=new Br(eA(e));return t.forEach(((o,l)=>{Lm(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Ol()<=Rt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Ml(t)),this.ps.getDocumentsMatchingQuery(e,t,Oo.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="LocalStore",OC=3e8;class MC{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new dr(Ct),this.xs=new Wa((l=>uy(l)),hy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function LC(r,e,t,i){return new MC(r,e,t,i)}async function EA(r,e){const t=ft(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],u=[];let h=It();for(const m of o){c.push(m.batchId);for(const f of m.mutations)h=h.add(f.key)}for(const m of l){u.push(m.batchId);for(const f of m.mutations)h=h.add(f.key)}return t.localDocuments.getDocuments(i,h).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:u})))}))}))}function NC(r,e){const t=ft(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,m,f){const x=m.batch,b=x.keys();let S=je.resolve();return b.forEach((w=>{S=S.next((()=>f.getEntry(h,w))).next((T=>{const E=m.docVersions.get(w);Bt(E!==null,48541),T.version.compareTo(E)<0&&(x.applyToRemoteDocument(T,m),T.isValidDocument()&&(T.setReadTime(m.commitVersion),f.addEntry(T)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(h,x)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let h=It();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function _A(r){const e=ft(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function $C(r,e){const t=ft(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const u=[];e.targetChanges.forEach(((f,x)=>{const b=o.get(x);if(!b)return;u.push(t.Pi.removeMatchingKeys(l,f.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(l,f.addedDocuments,x))));let S=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?S=S.withResumeToken(en.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,i)),o=o.insert(x,S),(function(T,E,A){return T.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=OC?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(b,S,f)&&u.push(t.Pi.updateTargetData(l,S))}));let h=zs(),m=It();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(l,f))})),u.push(VC(l,c,e.documentUpdates).next((f=>{h=f.ks,m=f.qs}))),!i.isEqual(ct.min())){const f=t.Pi.getLastRemoteSnapshotVersion(l).next((x=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));u.push(f)}return je.waitFor(u).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,h,m))).next((()=>h))})).then((l=>(t.Ms=o,l)))}function VC(r,e,t){let i=It(),o=It();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=zs();return t.forEach(((u,h)=>{const m=l.get(u);h.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(u)),h.isNoDocument()&&h.version.isEqual(ct.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Ge(vy,"Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)})),{ks:c,qs:o}}))}function WC(r,e){const t=ft(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ly),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function GC(r,e){const t=ft(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,je.resolve(o)):t.Pi.allocateTargetId(i).next((c=>(o=new Ro(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function x1(r,e,t){const i=ft(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!xc(c))throw c;Ge(vy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function vS(r,e,t){const i=ft(r);let o=ct.min(),l=It();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,m,f){const x=ft(h),b=x.xs.get(f);return b!==void 0?je.resolve(x.Ms.get(b)):x.Pi.getTargetData(m,f)})(i,c,Qi(e)).next((u=>{if(u)return o=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,u.targetId).next((h=>{l=h}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?o:ct.min(),t?l:It()))).next((u=>(HC(i,FR(e),u),{documents:u,Qs:l})))))}function HC(r,e,t){let i=r.Os.get(e)||ct.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class SS{constructor(){this.activeTargetIds=MR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UC{constructor(){this.Mo=new SS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new SS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="ConnectivityMonitor";class TS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ge(wS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ge(wS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cg=null;function b1(){return cg===null?cg=(function(){return 268435456+Math.round(2147483648*Math.random())})():cg++,"0x"+cg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="RestConnection",YC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===tm?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const c=b1(),u=this.zo(e,t.toUriEncodedString());Ge(bp,`Sending RPC '${e}' ${c}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,o,l);const{host:m}=new URL(u),f=qo(m);return this.Jo(e,u,h,i,f).then((x=>(Ge(bp,`Received RPC '${e}' ${c}: `,x),x)),(x=>{throw nc(bp,`RPC '${e}' ${c} failed with error: `,x,"url: ",u,"request:",i),x}))}Ho(e,t,i,o,l,c){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=YC[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class QC extends KC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const c=b1();return new Promise(((u,h)=>{const m=new Ej;m.setWithCredentials(!0),m.listenOnce(_j.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Cg.NO_ERROR:const x=m.getResponseJson();Ge(rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),u(x);break;case Cg.TIMEOUT:Ge(rn,`RPC '${e}' ${c} timed out`),h(new Me(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Cg.HTTP_ERROR:const b=m.getStatus();if(Ge(rn,`RPC '${e}' ${c} failed with status:`,b,"response text:",m.getResponseText()),b>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const w=S?.error;if(w&&w.status&&w.message){const T=(function(A){const _=A.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(_)>=0?_:pe.UNKNOWN})(w.status);h(new Me(T,w.message))}else h(new Me(pe.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Me(pe.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Ge(rn,`RPC '${e}' ${c} completed.`)}}));const f=JSON.stringify(o);Ge(rn,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",f,i,15)}))}T_(e,t,i){const o=b1(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Ij(),u=Cj(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const f=l.join("");Ge(rn,`Creating RPC '${e}' stream ${o}: ${f}`,h);const x=c.createWebChannel(f,h);this.I_(x);let b=!1,S=!1;const w=new XC({Yo:E=>{S?Ge(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,E):(b||(Ge(rn,`Opening RPC '${e}' stream ${o} transport.`),x.open(),b=!0),Ge(rn,`RPC '${e}' stream ${o} sending:`,E),x.send(E))},Zo:()=>x.close()}),T=(E,A,_)=>{E.listen(A,(B=>{try{_(B)}catch(I){setTimeout((()=>{throw I}),0)}}))};return T(x,Rd.EventType.OPEN,(()=>{S||(Ge(rn,`RPC '${e}' stream ${o} transport opened.`),w.o_())})),T(x,Rd.EventType.CLOSE,(()=>{S||(S=!0,Ge(rn,`RPC '${e}' stream ${o} transport closed`),w.a_(),this.E_(x))})),T(x,Rd.EventType.ERROR,(E=>{S||(S=!0,nc(rn,`RPC '${e}' stream ${o} transport errored. Name:`,E.name,"Message:",E.message),w.a_(new Me(pe.UNAVAILABLE,"The operation could not be completed")))})),T(x,Rd.EventType.MESSAGE,(E=>{if(!S){const A=E.data[0];Bt(!!A,16349);const _=A,B=_?.error||_[0]?.error;if(B){Ge(rn,`RPC '${e}' stream ${o} received error:`,B);const I=B.status;let L=(function(j){const F=Rr[j];if(F!==void 0)return mA(F)})(I),M=B.message;L===void 0&&(L=pe.INTERNAL,M="Unknown error status: "+I+" with message "+B.message),S=!0,w.a_(new Me(L,M)),x.close()}else Ge(rn,`RPC '${e}' stream ${o} received:`,A),w.u_(A)}})),T(u,Rj.STAT_EVENT,(E=>{E.stat===a1.PROXY?Ge(rn,`RPC '${e}' stream ${o} detected buffering proxy`):E.stat===a1.NOPROXY&&Ge(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(r){return new tC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&Ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="PersistentStream";class RA{constructor(e,t,i,o,l,c,u,h){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Sy(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Bs(t.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new Me(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ge(jS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ge(jS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZC extends RA{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=sC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ct.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ct.min():c.readTime?Nn(c.readTime):ct.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=y1(this.serializer),t.addTarget=(function(l,c){let u;const h=c.target;if(u=h1(h)?{documents:aC(l,h)}:{query:lC(l,h).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=yA(l,c.resumeToken);const m=f1(l,c.expectedCount);m!==null&&(u.expectedCount=m)}else if(c.snapshotVersion.compareTo(ct.min())>0){u.readTime=sm(l,c.snapshotVersion.toTimestamp());const m=f1(l,c.expectedCount);m!==null&&(u.expectedCount=m)}return u})(this.serializer,e);const i=dC(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=y1(this.serializer),t.removeTarget=e,this.q_(t)}}class JC extends RA{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=oC(e.writeResults,e.commitTime),i=Nn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=y1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>SA(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{}class t9 extends e9{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Me(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,p1(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Me(pe.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,p1(t,i),o,c,u,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Me(pe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class r9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bs(t),this.aa=!1):Ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class n9{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Ga(this)&&(Ge(Ma,"Restarting streams for network reachability change."),await(async function(h){const m=ft(h);m.Ea.add(4),await Su(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Hm(m)})(this))}))})),this.Ra=new r9(i,o)}}async function Hm(r){if(Ga(r))for(const e of r.da)await e(!0)}async function Su(r){for(const e of r.da)await e(!1)}function CA(r,e){const t=ft(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ay(t)?jy(t):vc(t).O_()&&Ty(t,e))}function wy(r,e){const t=ft(r),i=vc(t);t.Ia.delete(e),i.O_()&&IA(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ga(t)&&t.Ra.set("Unknown"))}function Ty(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ct.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vc(r).Y_(e)}function IA(r,e){r.Va.Ue(e),vc(r).Z_(e)}function jy(r){r.Va=new QR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),vc(r).start(),r.Ra.ua()}function Ay(r){return Ga(r)&&!vc(r).x_()&&r.Ia.size>0}function Ga(r){return ft(r).Ea.size===0}function FA(r){r.Va=void 0}async function i9(r){r.Ra.set("Online")}async function s9(r){r.Ia.forEach(((e,t)=>{Ty(r,e)}))}async function o9(r,e){FA(r),Ay(r)?(r.Ra.ha(e),jy(r)):r.Ra.set("Unknown")}async function a9(r,e,t){if(r.Ra.set("Online"),e instanceof pA&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const u of l.targetIds)o.Ia.has(u)&&(await o.remoteSyncer.rejectListen(u,c),o.Ia.delete(u),o.Va.removeTarget(u))})(r,e)}catch(i){Ge(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await lm(r,i)}else if(e instanceof Pg?r.Va.Ze(e):e instanceof fA?r.Va.st(e):r.Va.tt(e),!t.isEqual(ct.min()))try{const i=await _A(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const u=l.Va.Tt(c);return u.targetChanges.forEach(((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const f=l.Ia.get(m);f&&l.Ia.set(m,f.withResumeToken(h.resumeToken,c))}})),u.targetMismatches.forEach(((h,m)=>{const f=l.Ia.get(h);if(!f)return;l.Ia.set(h,f.withResumeToken(en.EMPTY_BYTE_STRING,f.snapshotVersion)),IA(l,h);const x=new Ro(f.target,h,m,f.sequenceNumber);Ty(l,x)})),l.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(i){Ge(Ma,"Failed to raise snapshot:",i),await lm(r,i)}}async function lm(r,e,t){if(!xc(e))throw e;r.Ea.add(1),await Su(r),r.Ra.set("Offline"),t||(t=()=>_A(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ge(Ma,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Hm(r)}))}function DA(r,e){return e().catch((t=>lm(r,t,e)))}async function Um(r){const e=ft(r),t=$o(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ly;for(;l9(e);)try{const o=await WC(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,c9(e,o)}catch(o){await lm(e,o)}PA(e)&&BA(e)}function l9(r){return Ga(r)&&r.Ta.length<10}function c9(r,e){r.Ta.push(e);const t=$o(r);t.O_()&&t.X_&&t.ea(e.mutations)}function PA(r){return Ga(r)&&!$o(r).x_()&&r.Ta.length>0}function BA(r){$o(r).start()}async function d9(r){$o(r).ra()}async function u9(r){const e=$o(r);for(const t of r.Ta)e.ea(t.mutations)}async function h9(r,e,t){const i=r.Ta.shift(),o=my.from(i,e,t);await DA(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Um(r)}async function g9(r,e){e&&$o(r).X_&&await(async function(i,o){if((function(c){return gA(c)&&c!==pe.ABORTED})(o.code)){const l=i.Ta.shift();$o(i).B_(),await DA(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Um(i)}})(r,e),PA(r)&&BA(r)}async function AS(r,e){const t=ft(r);t.asyncQueue.verifyOperationInProgress(),Ge(Ma,"RemoteStore received new credentials");const i=Ga(t);t.Ea.add(3),await Su(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hm(t)}async function m9(r,e){const t=ft(r);e?(t.Ea.delete(2),await Hm(t)):e||(t.Ea.add(2),await Su(t),t.Ra.set("Unknown"))}function vc(r){return r.ma||(r.ma=(function(t,i,o){const l=ft(t);return l.sa(),new ZC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:i9.bind(null,r),t_:s9.bind(null,r),r_:o9.bind(null,r),H_:a9.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Ay(r)?jy(r):r.Ra.set("Unknown")):(await r.ma.stop(),FA(r))}))),r.ma}function $o(r){return r.fa||(r.fa=(function(t,i,o){const l=ft(t);return l.sa(),new JC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:d9.bind(null,r),r_:g9.bind(null,r),ta:u9.bind(null,r),na:h9.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Um(r)):(await r.fa.stop(),r.Ta.length>0&&(Ge(Ma,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,u=new ky(e,t,c,o,l);return u.start(i),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ey(r,e){if(Bs("AsyncQueue",`${e}: ${r}`),xc(r))return new Me(pe.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{static emptySet(e){return new Xl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||nt.comparator(t.key,i.key):(t,i)=>nt.comparator(t.key,i.key),this.keyedMap=Cd(),this.sortedSet=new dr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Xl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.ga=new dr(nt.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):at(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class cc{constructor(e,t,i,o,l,c,u,h,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new cc(e,t,Xl.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class p9{constructor(){this.queries=ES(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=ft(t),l=o.queries;o.queries=ES(),l.forEach(((c,u)=>{for(const h of u.Sa)h.onError(i)}))})(this,new Me(pe.ABORTED,"Firestore shutting down"))}}function ES(){return new Wa((r=>Jj(r)),Mm)}async function _y(r,e){const t=ft(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new f9,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const u=Ey(c,`Initialization of query '${Ml(e.query)}' failed`);return void e.onError(u)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Cy(t)}async function Ry(r,e){const t=ft(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function y9(r,e){const t=ft(r);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const u of c.Sa)u.Fa(o)&&(i=!0);c.wa=o}}i&&Cy(t)}function x9(r,e,t){const i=ft(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Cy(r){r.Ca.forEach((e=>{e.next()}))}var v1,_S;(_S=v1||(v1={})).Ma="default",_S.Cache="cache";class Iy{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new cc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==v1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.key=e}}class OA{constructor(e){this.key=e}}class b9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=It(),this.mutatedKeys=It(),this.eu=eA(e),this.tu=new Xl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new kS,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,u=!1;const h=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((f,x)=>{const b=o.get(f),S=Lm(this.query,x)?x:null,w=!!b&&this.mutatedKeys.has(b.key),T=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let E=!1;b&&S?b.data.isEqual(S.data)?w!==T&&(i.track({type:3,doc:S}),E=!0):this.su(b,S)||(i.track({type:2,doc:S}),E=!0,(h&&this.eu(S,h)>0||m&&this.eu(S,m)<0)&&(u=!0)):!b&&S?(i.track({type:0,doc:S}),E=!0):b&&!S&&(i.track({type:1,doc:b}),E=!0,(h||m)&&(u=!0)),E&&(S?(c=c.add(S),l=T?l.add(f):l.delete(f)):(c=c.delete(f),l=l.delete(f)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const f=this.query.limitType==="F"?c.last():c.first();c=c.delete(f.key),l=l.delete(f.key),i.track({type:1,doc:f})}return{tu:c,iu:i,Cs:u,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((f,x)=>(function(S,w){const T=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Rt:E})}};return T(S)-T(w)})(f.type,x.type)||this.eu(f.doc,x.doc))),this.ou(i),o=o??!1;const u=t&&!o?this._u():[],h=this.Xa.size===0&&this.current&&!o?1:0,m=h!==this.Za;return this.Za=h,c.length!==0||m?{snapshot:new cc(this.query,e.tu,l,c,e.mutatedKeys,h===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=It(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new OA(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new zA(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=It();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fy="SyncEngine";class v9{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class S9{constructor(e){this.key=e,this.hu=!1}}class w9{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Wa((u=>Jj(u)),Mm),this.Iu=new Map,this.Eu=new Set,this.du=new dr(nt.comparator),this.Au=new Map,this.Ru=new yy,this.Vu={},this.mu=new Map,this.fu=lc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function T9(r,e,t=!0){const i=WA(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await MA(i,e,t,!0),o}async function j9(r,e){const t=WA(r);await MA(t,e,!0,!1)}async function MA(r,e,t,i){const o=await GC(r.localStore,Qi(e)),l=o.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let u;return i&&(u=await A9(r,e,l,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&CA(r.remoteStore,o),u}async function A9(r,e,t,i,o){r.pu=(x,b,S)=>(async function(T,E,A,_){let B=E.view.ru(A);B.Cs&&(B=await vS(T.localStore,E.query,!1).then((({documents:R})=>E.view.ru(R,B))));const I=_&&_.targetChanges.get(E.targetId),L=_&&_.targetMismatches.get(E.targetId)!=null,M=E.view.applyChanges(B,T.isPrimaryClient,I,L);return CS(T,E.targetId,M.au),M.snapshot})(r,x,b,S);const l=await vS(r.localStore,e,!0),c=new b9(e,l.Qs),u=c.ru(l.documents),h=vu.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),m=c.applyChanges(u,r.isPrimaryClient,h);CS(r,t,m.au);const f=new v9(e,t,c);return r.Tu.set(e,f),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),m.snapshot}async function k9(r,e,t){const i=ft(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((c=>!Mm(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await x1(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&wy(i.remoteStore,o.targetId),S1(i,o.targetId)})).catch(yc)):(S1(i,o.targetId),await x1(i.localStore,o.targetId,!0))}async function E9(r,e){const t=ft(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),wy(t.remoteStore,i.targetId))}async function _9(r,e,t){const i=B9(r);try{const o=await(function(c,u){const h=ft(c),m=nr.now(),f=u.reduce(((S,w)=>S.add(w.key)),It());let x,b;return h.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let w=zs(),T=It();return h.Ns.getEntries(S,f).next((E=>{w=E,w.forEach(((A,_)=>{_.isValidDocument()||(T=T.add(A))}))})).next((()=>h.localDocuments.getOverlayedDocuments(S,w))).next((E=>{x=E;const A=[];for(const _ of u){const B=HR(_,x.get(_.key).overlayedDocument);B!=null&&A.push(new Xo(_.key,B,Hj(B.value.mapValue),Zr.exists(!0)))}return h.mutationQueue.addMutationBatch(S,m,A,u)})).next((E=>{b=E;const A=E.applyToLocalDocumentSet(x,T);return h.documentOverlayCache.saveOverlays(S,E.batchId,A)}))})).then((()=>({batchId:b.batchId,changes:rA(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,u,h){let m=c.Vu[c.currentUser.toKey()];m||(m=new dr(Ct)),m=m.insert(u,h),c.Vu[c.currentUser.toKey()]=m})(i,o.batchId,t),await wu(i,o.changes),await Um(i.remoteStore)}catch(o){const l=Ey(o,"Failed to persist write");t.reject(l)}}async function LA(r,e){const t=ft(r);try{const i=await $C(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Bt(c.hu,14607):o.removedDocuments.size>0&&(Bt(c.hu,42227),c.hu=!1))})),await wu(t,i,e)}catch(i){await yc(i)}}function RS(r,e,t){const i=ft(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,c)=>{const u=c.view.va(e);u.snapshot&&o.push(u.snapshot)})),(function(c,u){const h=ft(c);h.onlineState=u;let m=!1;h.queries.forEach(((f,x)=>{for(const b of x.Sa)b.va(u)&&(m=!0)})),m&&Cy(h)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function R9(r,e,t){const i=ft(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let c=new dr(nt.comparator);c=c.insert(l,Nr.newNoDocument(l,ct.min()));const u=It().add(l),h=new Wm(ct.min(),new Map,new dr(Ct),c,u);await LA(i,h),i.du=i.du.remove(l),i.Au.delete(e),Dy(i)}else await x1(i.localStore,e,!1).then((()=>S1(i,e,t))).catch(yc)}async function C9(r,e){const t=ft(r),i=e.batch.batchId;try{const o=await NC(t.localStore,e);$A(t,i,null),NA(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await wu(t,o)}catch(o){await yc(o)}}async function I9(r,e,t){const i=ft(r);try{const o=await(function(c,u){const h=ft(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let f;return h.mutationQueue.lookupMutationBatch(m,u).next((x=>(Bt(x!==null,37113),f=x.keys(),h.mutationQueue.removeMutationBatch(m,x)))).next((()=>h.mutationQueue.performConsistencyCheck(m))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(m,f,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,f))).next((()=>h.localDocuments.getDocuments(m,f)))}))})(i.localStore,e);$A(i,e,t),NA(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await wu(i,o)}catch(o){await yc(o)}}function NA(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function $A(r,e,t){const i=ft(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function S1(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||VA(r,i)}))}function VA(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(wy(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Dy(r))}function CS(r,e,t){for(const i of t)i instanceof zA?(r.Ru.addReference(i.key,e),F9(r,i)):i instanceof OA?(Ge(Fy,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||VA(r,i.key)):at(19791,{wu:i})}function F9(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(Ge(Fy,"New document in limbo: "+t),r.Eu.add(i),Dy(r))}function Dy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new nt(Qt.fromString(e)),i=r.fu.next();r.Au.set(i,new S9(t)),r.du=r.du.insert(t,i),CA(r.remoteStore,new Ro(Qi(Om(t.path)),i,"TargetPurposeLimboResolution",Bm.ce))}}async function wu(r,e,t){const i=ft(r),o=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,h)=>{c.push(i.pu(h,e,t).then((m=>{if((m||t)&&i.isPrimaryClient){const f=m?!m.fromCache:t?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,f?"current":"not-current")}if(m){o.push(m);const f=by.As(h.targetId,m);l.push(f)}})))})),await Promise.all(c),i.Pu.H_(o),await(async function(h,m){const f=ft(h);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>je.forEach(m,(b=>je.forEach(b.Es,(S=>f.persistence.referenceDelegate.addReference(x,b.targetId,S))).next((()=>je.forEach(b.ds,(S=>f.persistence.referenceDelegate.removeReference(x,b.targetId,S)))))))))}catch(x){if(!xc(x))throw x;Ge(vy,"Failed to update sequence numbers: "+x)}for(const x of m){const b=x.targetId;if(!x.fromCache){const S=f.Ms.get(b),w=S.snapshotVersion,T=S.withLastLimboFreeSnapshotVersion(w);f.Ms=f.Ms.insert(b,T)}}})(i.localStore,l))}async function D9(r,e){const t=ft(r);if(!t.currentUser.isEqual(e)){Ge(Fy,"User change. New user:",e.toKey());const i=await EA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((u=>{u.forEach((h=>{h.reject(new Me(pe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wu(t,i.Ls)}}function P9(r,e){const t=ft(r),i=t.Au.get(e);if(i&&i.hu)return It().add(i.key);{let o=It();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const u=t.Tu.get(c);o=o.unionWith(u.view.nu)}return o}}function WA(r){const e=ft(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=LA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R9.bind(null,e),e.Pu.H_=y9.bind(null,e.eventManager),e.Pu.yu=x9.bind(null,e.eventManager),e}function B9(r){const e=ft(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I9.bind(null,e),e}class cm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return LC(this.persistence,new zC,e.initialUser,this.serializer)}Cu(e){return new kA(xy.mi,this.serializer)}Du(e){return new UC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cm.provider={build:()=>new cm};class z9 extends cm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Bt(this.persistence.referenceDelegate instanceof am,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new SC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new kA((i=>am.mi(i,t)),this.serializer)}}class w1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D9.bind(null,this.syncEngine),await m9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new p9})()}createDatastore(e){const t=Gm(e.databaseInfo.databaseId),i=(function(l){return new QC(l)})(e.databaseInfo);return(function(l,c,u,h){return new t9(l,c,u,h)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,u){return new n9(i,o,l,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>RS(this.syncEngine,t,0)),(function(){return TS.v()?new TS:new qC})())}createSyncEngine(e,t){return(function(o,l,c,u,h,m,f){const x=new w9(o,l,c,u,h,m);return f&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=ft(t);Ge(Ma,"RemoteStore shutting down."),i.Ea.add(5),await Su(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}w1.provider={build:()=>new w1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Me(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const c=ft(o),u={documents:l.map((x=>om(c.serializer,x)))},h=await c.Ho("BatchGetDocuments",c.serializer.databaseId,Qt.emptyPath(),u,l.length),m=new Map;h.forEach((x=>{const b=iC(c.serializer,x);m.set(b.key.toString(),b)}));const f=[];return l.forEach((x=>{const b=m.get(x.toString());Bt(!!b,55234,{key:x}),f.push(b)})),f})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=nt.fromPath(i);this.mutations.push(new hA(o,this.precondition(o)))})),await(async function(i,o){const l=ft(i),c={writes:o.map((u=>SA(l.serializer,u)))};await l.Go("Commit",l.serializer.databaseId,Qt.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at(50498,{Gu:e.constructor.name});t=ct.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Me(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ct.min())?Zr.exists(!1):Zr.updateTime(t):Zr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ct.min()))throw new Me(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zr.updateTime(t)}return Zr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,t,i,o,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=l,this.zu=i.maxAttempts,this.M_=new Sy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new O9(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!xu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!gA(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="FirestoreClient";class L9{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Ge(Vo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Ge(Vo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ey(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sp(r,e){r.asyncQueue.verifyOperationInProgress(),Ge(Vo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await EA(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function IS(r,e){r.asyncQueue.verifyOperationInProgress();const t=await N9(r);Ge(Vo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>AS(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>AS(e.remoteStore,o))),r._onlineComponents=e}async function N9(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ge(Vo,"Using user provided OfflineComponentProvider");try{await Sp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===pe.FAILED_PRECONDITION||o.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;nc("Error using user provided cache. Falling back to memory cache: "+t),await Sp(r,new cm)}}else Ge(Vo,"Using default OfflineComponentProvider"),await Sp(r,new z9(void 0));return r._offlineComponents}async function By(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ge(Vo,"Using user provided OnlineComponentProvider"),await IS(r,r._uninitializedComponentsProvider._online)):(Ge(Vo,"Using default OnlineComponentProvider"),await IS(r,new w1))),r._onlineComponents}function $9(r){return By(r).then((e=>e.syncEngine))}function V9(r){return By(r).then((e=>e.datastore))}async function dm(r){const e=await By(r),t=e.eventManager;return t.onListen=T9.bind(null,e.syncEngine),t.onUnlisten=k9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E9.bind(null,e.syncEngine),t}function W9(r,e,t={}){const i=new Xi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,u,h,m){const f=new Py({next:b=>{f.Nu(),c.enqueueAndForget((()=>Ry(l,x)));const S=b.docs.has(u);!S&&b.fromCache?m.reject(new Me(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&b.fromCache&&h&&h.source==="server"?m.reject(new Me(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),x=new Iy(Om(u.path),f,{includeMetadataChanges:!0,qa:!0});return _y(l,x)})(await dm(r),r.asyncQueue,e,t,i))),i.promise}function G9(r,e,t={}){const i=new Xi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,u,h,m){const f=new Py({next:b=>{f.Nu(),c.enqueueAndForget((()=>Ry(l,x))),b.fromCache&&h.source==="server"?m.reject(new Me(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),x=new Iy(u,f,{includeMetadataChanges:!0,qa:!0});return _y(l,x)})(await dm(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firestore.googleapis.com",DS=!0;class PS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HA,this.ssl=DS}else this.host=e.host,this.ssl=e.ssl??DS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bC)throw new Me(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GA(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Me(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Me(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Me(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qm{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new K4;switch(i.type){case"firstParty":return new J4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Me(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=FS.get(t);i&&(Ge("ComponentProvider","Removing Datastore"),FS.delete(t),i.terminate())})(this),Promise.resolve()}}function H9(r,e,t,i={}){r=mn(r,qm);const o=qo(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;o&&(ny(`https://${u}`),iy("Firestore",!0)),l.host!==HA&&l.host!==u&&nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...l,host:u,ssl:o,emulatorOptions:i};if(!Ds(h,c)&&(r._setSettings(h),i.mockUserToken)){let m,f;if(typeof i.mockUserToken=="string")m=i.mockUserToken,f=nn.MOCK_USER;else{m=b8(i.mockUserToken,r._app?.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new Me(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new nn(x)}r._authCredentials=new X4(new Dj(m,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Qo(this.firestore,e,this._query)}}class cr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Do(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}toJSON(){return{type:cr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(yu(t,cr._jsonSchema))return new cr(e,i||null,new nt(Qt.fromString(t.referencePath)))}}cr._jsonSchemaVersion="firestore/documentReference/1.0",cr._jsonSchema={type:Fr("string",cr._jsonSchemaVersion),referencePath:Fr("string")};class Do extends Qo{constructor(e,t,i){super(e,t,Om(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new nt(e))}withConverter(e){return new Do(this.firestore,e,this._path)}}function mr(r,e,...t){if(r=er(r),Pj("collection","path",e),r instanceof qm){const i=Qt.fromString(e,...t);return qv(i),new Do(r,null,i)}{if(!(r instanceof cr||r instanceof Do))throw new Me(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qt.fromString(e,...t));return qv(i),new Do(r.firestore,null,i)}}function $r(r,e,...t){if(r=er(r),arguments.length===1&&(e=ay.newId()),Pj("doc","path",e),r instanceof qm){const i=Qt.fromString(e,...t);return Uv(i),new cr(r,null,new nt(i))}{if(!(r instanceof cr||r instanceof Do))throw new Me(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qt.fromString(e,...t));return Uv(i),new cr(r.firestore,r instanceof Do?r.converter:null,new nt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="AsyncQueue";class zS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Sy(this,"async_queue_retry"),this._c=()=>{const i=vp();i&&Ge(BS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xc(e))throw e;Ge(BS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Bs("INTERNAL UNHANDLED ERROR: ",OS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=ky.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&at(47125,{Pc:OS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function OS(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class ss extends qm{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new zS,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zS(e),this._firestoreClient=void 0,await e}}}function U9(r,e){const t=typeof r=="object"?r:Dm(),i=typeof r=="string"?r:tm,o=Yo(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=mj("firestore");l&&H9(o,...l)}return o}function Tu(r){if(r._terminated)throw new Me(pe.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||q9(r),r._firestoreClient}function q9(r){const e=r._freezeSettings(),t=(function(o,l,c,u){return new pR(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,GA(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new L9(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mn(en.fromBase64String(e))}catch(t){throw new Me(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yu(e,Mn._jsonSchema))return Mn.fromBase64String(e.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:Fr("string",Mn._jsonSchemaVersion),bytes:Fr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Me(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(e){if(yu(e,Zi._jsonSchema))return new Zi(e.latitude,e.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:Fr("string",Zi._jsonSchemaVersion),latitude:Fr("number"),longitude:Fr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yu(e,Ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ji(e.vectorValues);throw new Me(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ji._jsonSchemaVersion="firestore/vectorValue/1.0",Ji._jsonSchema={type:Fr("string",Ji._jsonSchemaVersion),vectorValues:Fr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=/^__.*__$/;class K9{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new bu(e,this.data,t,this.fieldTransforms)}}class UA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ac:r})}}class Ym{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ym({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return um(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qA(this.Ac)&&Y9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class X9{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gm(e)}Cc(e,t,i,o=!1){return new Ym({Ac:e,methodName:t,Dc:i,path:Qr.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ku(r){const e=r._freezeSettings(),t=Gm(r._databaseId);return new X9(r._databaseId,!!e.ignoreUndefinedProperties,t)}function zy(r,e,t,i,o,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);Ly("Data must be an object, but it was:",c,i);const u=XA(i,c);let h,m;if(l.merge)h=new Ln(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const f=[];for(const x of l.mergeFields){const b=T1(e,x,t);if(!c.contains(b))throw new Me(pe.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ZA(f,b)||f.push(b)}h=new Ln(f),m=c.fieldTransforms.filter((x=>h.covers(x.field)))}else h=null,m=c.fieldTransforms;return new K9(new hn(u),h,m)}class Km extends Au{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Km}}function Q9(r,e,t){return new Ym({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Oy extends Au{_toFieldTransform(e){return new cA(e.path,new nu)}isEqual(e){return e instanceof Oy}}class My extends Au{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Q9(this,e,!0),i=this.vc.map((l=>Sc(l,t))),o=new ac(i);return new cA(e.path,o)}isEqual(e){return e instanceof My&&Ds(this.vc,e.vc)}}function YA(r,e,t,i){const o=r.Cc(1,e,t);Ly("Data must be an object, but it was:",o,i);const l=[],c=hn.empty();Ko(i,((h,m)=>{const f=Ny(e,h,t);m=er(m);const x=o.yc(f);if(m instanceof Km)l.push(f);else{const b=Sc(m,x);b!=null&&(l.push(f),c.set(f,b))}}));const u=new Ln(l);return new UA(c,u,o.fieldTransforms)}function KA(r,e,t,i,o,l){const c=r.Cc(1,e,t),u=[T1(e,i,t)],h=[o];if(l.length%2!=0)throw new Me(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)u.push(T1(e,l[b])),h.push(l[b+1]);const m=[],f=hn.empty();for(let b=u.length-1;b>=0;--b)if(!ZA(m,u[b])){const S=u[b];let w=h[b];w=er(w);const T=c.yc(S);if(w instanceof Km)m.push(S);else{const E=Sc(w,T);E!=null&&(m.push(S),f.set(S,E))}}const x=new Ln(m);return new UA(f,x,c.fieldTransforms)}function Z9(r,e,t,i=!1){return Sc(t,r.Cc(i?4:3,e))}function Sc(r,e){if(QA(r=er(r)))return Ly("Unsupported field value:",e,r),XA(r,e);if(r instanceof Au)return(function(i,o){if(!qA(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const u of i){let h=Sc(u,o.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),l.push(h),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=er(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return LR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=nr.fromDate(i);return{timestampValue:sm(o.serializer,l)}}if(i instanceof nr){const l=new nr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:sm(o.serializer,l)}}if(i instanceof Zi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Mn)return{bytesValue:yA(o.serializer,i._byteString)};if(i instanceof cr){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:py(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ji)return(function(c,u){return{mapValue:{fields:{[Wj]:{stringValue:Gj},[rm]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw u.Sc("VectorValues must only contain numeric values.");return gy(u.serializer,m)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Pm(i)}`)})(r,e)}function XA(r,e){const t={};return Oj(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ko(r,((i,o)=>{const l=Sc(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function QA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nr||r instanceof Zi||r instanceof Mn||r instanceof cr||r instanceof Au||r instanceof Ji)}function Ly(r,e,t){if(!QA(t)||!Bj(t)){const i=Pm(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function T1(r,e,t){if((e=er(e))instanceof ju)return e._internalPath;if(typeof e=="string")return Ny(r,e);throw um("Field path arguments must be of type string or ",r,!1,void 0,t)}const J9=new RegExp("[~\\*/\\[\\]]");function Ny(r,e,t){if(e.search(J9)>=0)throw um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ju(...e.split("."))._internalPath}catch{throw um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function um(r,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(l||c)&&(h+=" (found",l&&(h+=` in field ${i}`),c&&(h+=` in document ${o}`),h+=")"),new Me(pe.INVALID_ARGUMENT,u+r+h)}function ZA(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eI extends hm{data(){return super.data()}}function Xm(r,e){return typeof e=="string"?Ny(r,e):e instanceof ju?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Me(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $y{}class ek extends $y{}function Jr(r,e,...t){let i=[];e instanceof $y&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((h=>h instanceof Vy)).length,u=l.filter((h=>h instanceof Qm)).length;if(c>1||c>0&&u>0)throw new Me(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Qm extends ek{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Qm(e,t,i)}_apply(e){const t=this._parse(e);return tk(e._query,t),new Qo(e.firestore,e.converter,g1(e._query,t))}_parse(e){const t=ku(e.firestore);return(function(l,c,u,h,m,f,x){let b;if(m.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Me(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){NS(x,f);const w=[];for(const T of x)w.push(LS(h,l,T));b={arrayValue:{values:w}}}else b=LS(h,l,x)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||NS(x,f),b=Z9(u,c,x,f==="in"||f==="not-in");return Ir.create(m,f,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function $n(r,e,t){const i=e,o=Xm("where",r);return Qm._create(o,i,t)}class Vy extends $y{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const u=l.getFlattenedFilters();for(const h of u)tk(c,h),c=g1(c,h)})(e._query,t),new Qo(e.firestore,e.converter,g1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wy extends ek{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wy(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new Me(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Me(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ru(l,c)})(e._query,this._field,this._direction);return new Qo(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new bc(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function $d(r,e="asc"){const t=e,i=Xm("orderBy",r);return Wy._create(i,t)}function LS(r,e,t){if(typeof(t=er(t))=="string"){if(t==="")throw new Me(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zj(e)&&t.indexOf("/")!==-1)throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Qt.fromString(t));if(!nt.isDocumentKey(i))throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return tS(r,new nt(i))}if(t instanceof cr)return tS(r,t._key);throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pm(t)}.`)}function NS(r,e){if(!Array.isArray(r)||r.length===0)throw new Me(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tk(r,e){const t=(function(o,l){for(const c of o)for(const u of c.getFlattenedFilters())if(l.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Me(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rk{convertValue(e,t="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ko(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[rm].arrayValue?.values?.map((i=>vr(i.doubleValue)));return new Ji(t)}convertGeoPoint(e){return new Zi(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=zm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Jd(e));default:return null}}convertTimestamp(e){const t=Mo(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Qt.fromString(e);Bt(jA(i),9688,{name:e});const o=new eu(i.get(1),i.get(3)),l=new nt(i.popFirst(5));return o.isEqual(t)||Bs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class tI extends rk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}class Vl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Po extends hm{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Xm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Po._jsonSchemaVersion="firestore/documentSnapshot/1.0",Po._jsonSchema={type:Fr("string",Po._jsonSchemaVersion),bundleSource:Fr("string","DocumentSnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class Bg extends Po{data(e={}){return super.data(e)}}class Da{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Vl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Bg(this._firestore,this._userDataWriter,i.key,i,new Vl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((u=>{const h=new Bg(o._firestore,o._userDataWriter,u.doc.key,u.doc,new Vl(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((u=>l||u.type!==3)).map((u=>{const h=new Bg(o._firestore,o._userDataWriter,u.doc.key,u.doc,new Vl(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,f=-1;return u.type!==0&&(m=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),f=c.indexOf(u.doc.key)),{type:rI(u.type),doc:h,oldIndex:m,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(r){r=mn(r,cr);const e=mn(r.firestore,ss);return W9(Tu(e),r._key).then((t=>nk(e,r,t)))}Da._jsonSchemaVersion="firestore/querySnapshot/1.0",Da._jsonSchema={type:Fr("string",Da._jsonSchemaVersion),bundleSource:Fr("string","QuerySnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class Zm extends rk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}function ci(r){r=mn(r,Qo);const e=mn(r.firestore,ss),t=Tu(e),i=new Zm(e);return JA(r._query),G9(t,r._query).then((o=>new Da(e,i,r,o)))}function dc(r,e,t){r=mn(r,cr);const i=mn(r.firestore,ss),o=Gy(r.converter,e,t);return Jm(i,[zy(ku(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Zr.none())])}function Eu(r,e,t,...i){r=mn(r,cr);const o=mn(r.firestore,ss),l=ku(o);let c;return c=typeof(e=er(e))=="string"||e instanceof ju?KA(l,"updateDoc",r._key,e,t,i):YA(l,"updateDoc",r._key,e),Jm(o,[c.toMutation(r._key,Zr.exists(!0))])}function nI(r){return Jm(mn(r.firestore,ss),[new Vm(r._key,Zr.none())])}function iI(r,e){const t=mn(r.firestore,ss),i=$r(r),o=Gy(r.converter,e);return Jm(t,[zy(ku(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Zr.exists(!1))]).then((()=>i))}function Os(r,...e){r=er(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||MS(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(MS(e[i])){const h=e[i];e[i]=h.next?.bind(h),e[i+1]=h.error?.bind(h),e[i+2]=h.complete?.bind(h)}let l,c,u;if(r instanceof cr)c=mn(r.firestore,ss),u=Om(r._key.path),l={next:h=>{e[i]&&e[i](nk(c,r,h))},error:e[i+1],complete:e[i+2]};else{const h=mn(r,Qo);c=mn(h.firestore,ss),u=h._query;const m=new Zm(c);l={next:f=>{e[i]&&e[i](new Da(c,m,h,f))},error:e[i+1],complete:e[i+2]},JA(r._query)}return(function(m,f,x,b){const S=new Py(b),w=new Iy(f,S,x);return m.asyncQueue.enqueueAndForget((async()=>_y(await dm(m),w))),()=>{S.Nu(),m.asyncQueue.enqueueAndForget((async()=>Ry(await dm(m),w)))}})(Tu(c),u,o,l)}function Jm(r,e){return(function(i,o){const l=new Xi;return i.asyncQueue.enqueueAndForget((async()=>_9(await $9(i),o,l))),l.promise})(Tu(r),e)}function nk(r,e,t){const i=t.docs.get(e._key),o=new Zm(r);return new Po(r,o,e._key,i,new Vl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI={maxAttempts:5};function Fd(r,e){if((r=er(r)).firestore!==e)throw new Me(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ku(e)}get(e){const t=Fd(e,this._firestore),i=new tI(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return at(24041);const l=o[0];if(l.isFoundDocument())return new hm(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new hm(this._firestore,i,t._key,null,t.converter);throw at(18433,{doc:l})}))}set(e,t,i){const o=Fd(e,this._firestore),l=Gy(o.converter,t,i),c=zy(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,i);return this._transaction.set(o._key,c),this}update(e,t,i,...o){const l=Fd(e,this._firestore);let c;return c=typeof(t=er(t))=="string"||t instanceof ju?KA(this._dataReader,"Transaction.update",l._key,t,i,o):YA(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Fd(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI extends oI{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fd(e,this._firestore),i=new Zm(this._firestore);return super.get(e).then((o=>new Po(this._firestore,i,t._key,o._document,new Vl(!1,!1),t.converter)))}}function lI(r,e,t){r=mn(r,ss);const i={...sI,...t};return(function(l){if(l.maxAttempts<1)throw new Me(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(l,c,u){const h=new Xi;return l.asyncQueue.enqueueAndForget((async()=>{const m=await V9(l);new M9(l.asyncQueue,m,u,c,h).ju()})),h.promise})(Tu(r),(o=>e(new aI(r,o))),i)}function Fs(){return new Oy("serverTimestamp")}function ik(...r){return new My("arrayUnion",r)}(function(e,t=!0){(function(o){pc=o})(fc),ki(new ui("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),u=new ss(new Q4(i.getProvider("auth-internal")),new eR(c,i.getProvider("app-check-internal")),(function(m,f){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Me(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(m.options.projectId,f)})(c,o),c);return l={useFetchStreams:t,...l},u._setSettings(l),u}),"PUBLIC").setMultipleInstances(!0)),En(Vv,Wv,e),En(Vv,Wv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="type.googleapis.com/google.protobuf.Int64Value",dI="type.googleapis.com/google.protobuf.UInt64Value";function sk(r,e){const t={};for(const i in r)r.hasOwnProperty(i)&&(t[i]=e(r[i]));return t}function gm(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>gm(e));if(typeof r=="function"||typeof r=="object")return sk(r,e=>gm(e));throw new Error("Data cannot be encoded in JSON: "+r)}function uc(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case cI:case dI:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>uc(e)):typeof r=="function"||typeof r=="object"?sk(r,e=>uc(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class An extends hi{constructor(e,t,i){super(`${Hy}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,An.prototype)}}function uI(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function mm(r,e){let t=uI(r),i=t,o;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!$S[c])return new An("internal","internal");t=$S[c],i=c}const u=l.message;typeof u=="string"&&(i=u),o=l.details,o!==void 0&&(o=uc(o))}}catch{}return t==="ok"?null:new An(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,oi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="us-central1",gI=/^data: (.*?)(?:\n|$)/;function mI(r){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new An("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class fI{constructor(e,t,i,o,l=j1,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new hI(e,t,i,o),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(l);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=j1}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function pI(r,e,t){const i=qo(e);r.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(ny(r.emulatorOrigin+"/backends"),iy("Functions",!0))}function yI(r,e,t){const i=o=>bI(r,e,o,{});return i.stream=(o,l)=>SI(r,e,o,l),i}function ok(r){return r.emulatorOrigin&&qo(r.emulatorOrigin)?"include":void 0}async function xI(r,e,t,i,o){t["Content-Type"]="application/json";let l;try{l=await i(r,{method:"POST",body:JSON.stringify(e),headers:t,credentials:ok(o)})}catch{return{status:0,json:null}}let c=null;try{c=await l.json()}catch{}return{status:l.status,json:c}}async function ak(r,e){const t={},i=await r.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function bI(r,e,t,i){const o=r._url(e);return vI(r,o,t,i)}async function vI(r,e,t,i){t=gm(t);const o={data:t},l=await ak(r,i),c=i.timeout||7e4,u=mI(c),h=await Promise.race([xI(e,o,l,r.fetchImpl,r),u.promise,r.cancelAllRequests]);if(u.cancel(),!h)throw new An("cancelled","Firebase Functions instance was deleted.");const m=mm(h.status,h.json);if(m)throw m;if(!h.json)throw new An("internal","Response is not valid JSON object.");let f=h.json.data;if(typeof f>"u"&&(f=h.json.result),typeof f>"u")throw new An("internal","Response is missing data field.");return{data:uc(f)}}function SI(r,e,t,i){const o=r._url(e);return wI(r,o,t,i||{})}async function wI(r,e,t,i){t=gm(t);const o={data:t},l=await ak(r,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await r.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i?.signal,credentials:ok(r)})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const w=new An("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}const S=mm(0,null);return{data:Promise.reject(S),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(S)}}}}}}let u,h;const m=new Promise((b,S)=>{u=b,h=S});i?.signal?.addEventListener("abort",()=>{const b=new An("cancelled","Request was cancelled.");h(b)});const f=c.body.getReader(),x=TI(f,u,h,i?.signal);return{stream:{[Symbol.asyncIterator](){const b=x.getReader();return{async next(){const{value:S,done:w}=await b.read();return{value:S,done:w}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:m}}function TI(r,e,t,i){const o=(c,u)=>{const h=c.match(gI);if(!h)return;const m=h[1];try{const f=JSON.parse(m);if("result"in f){e(uc(f.result));return}if("message"in f){u.enqueue(uc(f.message));return}if("error"in f){const x=mm(0,f);u.error(x),t(x);return}}catch(f){if(f instanceof An){u.error(f),t(f);return}}},l=new TextDecoder;return new ReadableStream({start(c){let u="";return h();async function h(){if(i?.aborted){const m=new An("cancelled","Request was cancelled");return c.error(m),t(m),Promise.resolve()}try{const{value:m,done:f}=await r.read();if(f){u.trim()&&o(u.trim(),c),c.close();return}if(i?.aborted){const b=new An("cancelled","Request was cancelled");c.error(b),t(b),await r.cancel();return}u+=l.decode(m,{stream:!0});const x=u.split(`
`);u=x.pop()||"";for(const b of x)b.trim()&&o(b.trim(),c);return h()}catch(m){const f=m instanceof An?m:mm(0,null);c.error(f),t(f)}}},cancel(){return r.cancel()}})}const VS="@firebase/functions",WS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="auth-internal",AI="app-check-internal",kI="messaging-internal";function EI(r){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(jI),c=t.getProvider(kI),u=t.getProvider(AI);return new fI(o,l,c,u,i)};ki(new ui(Hy,e,"PUBLIC").setMultipleInstances(!0)),En(VS,WS,r),En(VS,WS,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(r=Dm(),e=j1){const i=Yo(er(r),Hy).getImmediate({identifier:e}),o=mj("functions");return o&&RI(i,...o),i}function RI(r,e,t){pI(er(r),e,t)}function Uy(r,e,t){return yI(er(r),e)}EI();function lk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CI=lk,ck=new Va("auth","Firebase",lk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new Fm("@firebase/auth");function II(r,...e){fm.logLevel<=Rt.WARN&&fm.warn(`Auth (${fc}): ${r}`,...e)}function zg(r,...e){fm.logLevel<=Rt.ERROR&&fm.error(`Auth (${fc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(r,...e){throw Yy(r,...e)}function Ai(r,...e){return Yy(r,...e)}function qy(r,e,t){const i={...CI(),[e]:t};return new Va("auth","Firebase",i).create(e,{appName:r.name})}function Pa(r){return qy(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&os(r,"argument-error"),qy(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yy(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return ck.create(r,...e)}function gt(r,e,...t){if(!r)throw Yy(e,...t)}function Rs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw zg(e),new Error(e)}function Ms(r,e){r||Rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof self<"u"&&self.location?.href||""}function DI(){return GS()==="http:"||GS()==="https:"}function GS(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DI()||yj()||"connection"in navigator)?navigator.onLine:!0}function BI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ms(t>e,"Short delay should be less than long delay!"),this.isMobile=w8()||A8()}get(){return PI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(r,e){Ms(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MI=new _u(3e4,6e4);function Xy(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function wc(r,e,t,i,o={}){return uk(r,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const u=pu({key:r.config.apiKey,...c}).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const m={method:e,headers:h,...l};return j8()||(m.referrerPolicy="no-referrer"),r.emulatorConfig&&qo(r.emulatorConfig.host)&&(m.credentials="include"),dk.fetch()(await hk(r,r.config.apiHost,t,u),m)})}async function uk(r,e,t){r._canInitEmulator=!1;const i={...zI,...e};try{const o=new NI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw dg(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const u=l.ok?c.errorMessage:c.error.message,[h,m]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw dg(r,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw dg(r,"email-already-in-use",c);if(h==="USER_DISABLED")throw dg(r,"user-disabled",c);const f=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw qy(r,f,m);os(r,f)}}catch(o){if(o instanceof hi)throw o;os(r,"network-request-failed",{message:String(o)})}}async function LI(r,e,t,i,o={}){const l=await wc(r,e,t,i,o);return"mfaPendingCredential"in l&&os(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function hk(r,e,t,i){const o=`${e}${t}?${i}`,l=r,c=l.config.emulator?Ky(r.config,o):`${r.config.apiScheme}://${o}`;return OI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class NI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ai(this.auth,"network-request-failed")),MI.get())})}}function dg(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ai(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(r,e){return wc(r,"POST","/v1/accounts:delete",e)}async function pm(r,e){return wc(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VI(r,e=!1){const t=er(r),i=await t.getIdToken(e),o=Qy(i);gt(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:Vd(wp(o.auth_time)),issuedAtTime:Vd(wp(o.iat)),expirationTime:Vd(wp(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function wp(r){return Number(r)*1e3}function Qy(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return zg("JWT malformed, contained fewer than 3 sections"),null;try{const o=hj(t);return o?JSON.parse(o):(zg("Failed to decode base64 JWT payload"),null)}catch(o){return zg("Caught error parsing JWT payload as JSON",o?.toString()),null}}function HS(r){const e=Qy(r);return gt(e,"internal-error"),gt(typeof e.exp<"u","internal-error"),gt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof hi&&WI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function WI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vd(this.lastLoginAt),this.creationTime=Vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ym(r){const e=r.auth,t=await r.getIdToken(),i=await su(r,pm(e,{idToken:t}));gt(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?gk(o.providerUserInfo):[],c=UI(r.providerData,l),u=r.isAnonymous,h=!(r.email&&o.passwordHash)&&!c?.length,m=u?h:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new k1(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(r,f)}async function HI(r){const e=er(r);await ym(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function gk(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(r,e){const t=await uk(r,{},async()=>{const i=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,c=await hk(r,o,"/v1/token",`key=${l}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return r.emulatorConfig&&qo(r.emulatorConfig.host)&&(h.credentials="include"),dk.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YI(r,e){return wc(r,"POST","/v2/accounts:revokeToken",Xy(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt(typeof e.idToken<"u","internal-error"),gt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){gt(e.length!==0,"internal-error");const t=HS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await qI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new Ql;return i&&(gt(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(gt(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(gt(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ql,this.toJSON())}_performRefresh(){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(r,e){gt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ji{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new GI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new k1(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await su(this,this.stsTokenManager.getToken(this.auth,e));return gt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VI(this,e)}reload(){return HI(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ji({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ym(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(Pa(this.auth));const e=await this.getIdToken();return await su(this,$I(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,m=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:x,emailVerified:b,isAnonymous:S,providerData:w,stsTokenManager:T}=t;gt(x&&T,e,"internal-error");const E=Ql.fromJSON(this.name,T);gt(typeof x=="string",e,"internal-error"),So(i,e.name),So(o,e.name),gt(typeof b=="boolean",e,"internal-error"),gt(typeof S=="boolean",e,"internal-error"),So(l,e.name),So(c,e.name),So(u,e.name),So(h,e.name),So(m,e.name),So(f,e.name);const A=new ji({uid:x,auth:e,email:o,emailVerified:b,displayName:i,isAnonymous:S,photoURL:c,phoneNumber:l,tenantId:u,stsTokenManager:E,createdAt:m,lastLoginAt:f});return w&&Array.isArray(w)&&(A.providerData=w.map(_=>({..._}))),h&&(A._redirectEventId=h),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ql;o.updateFromServerResponse(t);const l=new ji({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ym(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];gt(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?gk(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,u=new Ql;u.updateFromIdToken(i);const h=new ji({uid:o.localId,auth:e,stsTokenManager:u,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new k1(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Map;function Cs(r){Ms(r instanceof Function,"Expected a class definition");let e=US.get(r);return e?(Ms(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,US.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mk.type="NONE";const qS=mk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(r,e,t){return`firebase:${r}:${e}:${t}`}class Zl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Og(this.userKey,o.apiKey,l),this.fullPersistenceKey=Og("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pm(this.auth,{idToken:e}).catch(()=>{});return t?ji._fromGetAccountInfoResponse(this.auth,t,e):null}return ji._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Zl(Cs(qS),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||Cs(qS);const c=Og(i,e.config.apiKey,e.name);let u=null;for(const m of t)try{const f=await m._get(c);if(f){let x;if(typeof f=="string"){const b=await pm(e,{idToken:f}).catch(()=>{});if(!b)break;x=await ji._fromGetAccountInfoResponse(e,b,f)}else x=ji._fromJSON(e,f);m!==l&&(u=x),l=m;break}}catch{}const h=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!h.length?new Zl(l,e,i):(l=h[0],u&&await l._set(c,u.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Zl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vk(e))return"Blackberry";if(Sk(e))return"Webos";if(pk(e))return"Safari";if((e.includes("chrome/")||yk(e))&&!e.includes("edge/"))return"Chrome";if(bk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function fk(r=cn()){return/firefox\//i.test(r)}function pk(r=cn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yk(r=cn()){return/crios\//i.test(r)}function xk(r=cn()){return/iemobile/i.test(r)}function bk(r=cn()){return/android/i.test(r)}function vk(r=cn()){return/blackberry/i.test(r)}function Sk(r=cn()){return/webos/i.test(r)}function Zy(r=cn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function KI(r=cn()){return Zy(r)&&!!window.navigator?.standalone}function XI(){return k8()&&document.documentMode===10}function wk(r=cn()){return Zy(r)||bk(r)||Sk(r)||vk(r)||/windows phone/i.test(r)||xk(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(r,e=[]){let t;switch(r){case"Browser":t=YS(cn());break;case"Worker":t=`${YS(cn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,u)=>{try{const h=e(l);c(h)}catch(h){u(h)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(r,e={}){return wc(r,"GET","/v2/passwordPolicy",Xy(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=6;class eF{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??JI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KS(this),this.idTokenSubscription=new KS(this),this.beforeStateQueue=new QI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ck,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pm(this,{idToken:e}),i=await ji._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ym(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(Pa(this));const t=e?er(e):null;return t&&gt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(Pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(Pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZI(this),t=new eF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Va("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await YI(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cs(e)||this._popupRedirectResolver;gt(t,this,"argument-error"),this.redirectPersistenceManager=await Zl.create(this,[Cs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(u,this,"internal-error"),u.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,o);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&II(`Error while retrieving App Check token: ${e.error}`),e?.token}}function e0(r){return er(r)}class KS{constructor(e){this.auth=e,this.observer=null,this.addObserver=D8(t=>this.observer=t)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rF(r){Jy=r}function nF(r){return Jy.loadJS(r)}function iF(){return Jy.gapiScript}function sF(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(r,e){const t=Yo(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ds(l,e??{}))return o;os(o,"already-initialized")}return t.initialize({options:e})}function aF(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Cs);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function lF(r,e,t){const i=e0(r);gt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=jk(e),{host:c,port:u}=cF(e),h=u===null?"":`:${u}`,m={url:`${l}//${c}${h}/`},f=Object.freeze({host:c,port:u,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){gt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),gt(Ds(m,i.config.emulator)&&Ds(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,qo(c)?(ny(`${l}//${c}${h}`),iy("Auth",!0)):dF()}function jk(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function cF(r){const e=jk(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:XS(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:XS(c)}}}function XS(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function dF(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rs("not implemented")}_getIdTokenResponse(e){return Rs("not implemented")}_linkToIdToken(e,t){return Rs("not implemented")}_getReauthenticationResolver(e){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(r,e){return LI(r,"POST","/v1/accounts:signInWithIdp",Xy(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF="http://localhost";class La extends Ak{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new La(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):os("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const c=new La(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Jl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Jl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jl(e,t)}buildRequest(){const e={requestUri:uF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends ex{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Ru{constructor(){super("facebook.com")}static credential(e){return La._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ko.credential(e.oauthAccessToken)}catch{return null}}}ko.FACEBOOK_SIGN_IN_METHOD="facebook.com";ko.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return La._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return _s.credential(t,i)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Ru{constructor(){super("github.com")}static credential(e){return La._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Ru{constructor(){super("twitter.com")}static credential(e,t){return La._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _o.credential(t,i)}catch{return null}}}_o.TWITTER_SIGN_IN_METHOD="twitter.com";_o.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await ji._fromIdTokenResponse(e,i,o),c=QS(i);return new hc({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=QS(i);return new hc({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function QS(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends hi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,xm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new xm(e,t,i,o)}}function kk(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?xm._fromErrorAndOperation(r,l,e,i):l})}async function hF(r,e,t=!1){const i=await su(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return hc._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gF(r,e,t=!1){const{auth:i}=r;if(oi(i.app))return Promise.reject(Pa(i));const o="reauthenticate";try{const l=await su(r,kk(i,o,e,r),t);gt(l.idToken,i,"internal-error");const c=Qy(l.idToken);gt(c,i,"internal-error");const{sub:u}=c;return gt(r.uid===u,i,"user-mismatch"),hc._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&os(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(r,e,t=!1){if(oi(r.app))return Promise.reject(Pa(r));const i="signIn",o=await kk(r,i,e),l=await hc._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(r,e){return er(r).setPersistence(e)}function pF(r,e,t,i){return er(r).onIdTokenChanged(e,t,i)}function yF(r,e,t){return er(r).beforeAuthStateChanged(e,t)}function xF(r,e,t,i){return er(r).onAuthStateChanged(e,t,i)}function bF(r){return er(r).signOut()}const bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bm,"1"),this.storage.removeItem(bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=1e3,SF=10;class _k extends Ek{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);XI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,SF):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},vF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_k.type="LOCAL";const Rk=_k;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck extends Ek{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ck.type="SESSION";const Ik=Ck;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new t0(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const u=Array.from(c).map(async m=>m(t.origin,l)),h=await wF(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((u,h)=>{const m=tx("",20);o.port1.start();const f=setTimeout(()=>{h(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(x){const b=x;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(f),l=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),u(b.data.response);break;default:clearTimeout(f),clearTimeout(l),h(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function jF(r){es().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function AF(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kF(){return navigator?.serviceWorker?.controller||null}function EF(){return Fk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="firebaseLocalStorageDb",_F=1,vm="firebaseLocalStorage",Pk="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function r0(r,e){return r.transaction([vm],e?"readwrite":"readonly").objectStore(vm)}function RF(){const r=indexedDB.deleteDatabase(Dk);return new Cu(r).toPromise()}function E1(){const r=indexedDB.open(Dk,_F);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(vm,{keyPath:Pk})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(vm)?e(i):(i.close(),await RF(),e(await E1()))})})}async function ZS(r,e,t){const i=r0(r,!0).put({[Pk]:e,value:t});return new Cu(i).toPromise()}async function CF(r,e){const t=r0(r,!1).get(e),i=await new Cu(t).toPromise();return i===void 0?null:i.value}function JS(r,e){const t=r0(r,!0).delete(e);return new Cu(t).toPromise()}const IF=800,FF=3;class Bk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await E1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>FF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=t0._getInstance(EF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await AF(),!this.activeServiceWorker)return;this.sender=new TF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await E1();return await ZS(e,bm,"1"),await JS(e,bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ZS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>CF(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>JS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=r0(o,!1).getAll();return new Cu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bk.type="LOCAL";const DF=Bk;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(r,e){return e?Cs(e):(gt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends Ak{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PF(r){return mF(r.auth,new rx(r),r.bypassAuthState)}function BF(r){const{auth:e,user:t}=r;return gt(t,e,"internal-error"),gF(t,new rx(r),r.bypassAuthState)}async function zF(r){const{auth:e,user:t}=r;return gt(t,e,"internal-error"),hF(t,new rx(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PF;case"linkViaPopup":case"linkViaRedirect":return zF;case"reauthViaPopup":case"reauthViaRedirect":return BF;default:os(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=new _u(2e3,1e4);async function MF(r,e,t){if(oi(r.app))return Promise.reject(Ai(r,"operation-not-supported-in-this-environment"));const i=e0(r);FI(r,e,ex);const o=zk(i,t);return new Ra(i,"signInViaPopup",e,o).executeNotNull()}class Ra extends Ok{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Ra.currentPopupAction&&Ra.currentPopupAction.cancel(),Ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=tx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OF.get())};e()}}Ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF="pendingRedirect",Mg=new Map;class NF extends Ok{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Mg.get(this.auth._key());if(!e){try{const i=await $F(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Mg.set(this.auth._key(),e)}return this.bypassAuthState||Mg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $F(r,e){const t=GF(e),i=WF(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function VF(r,e){Mg.set(r._key(),e)}function WF(r){return Cs(r._redirectPersistence)}function GF(r){return Og(LF,r.config.apiKey,r.name)}async function HF(r,e,t=!1){if(oi(r.app))return Promise.reject(Pa(r));const i=e0(r),o=zk(i,e),c=await new NF(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=600*1e3;class qF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Mk(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ai(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UF&&this.cachedEventUids.clear(),this.cachedEventUids.has(ew(e))}saveEventToCache(e){this.cachedEventUids.add(ew(e)),this.lastProcessedEventTime=Date.now()}}function ew(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Mk({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function YF(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mk(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(r,e={}){return wc(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QF=/^https?/;async function ZF(r){if(r.config.emulator)return;const{authorizedDomains:e}=await KF(r);for(const t of e)try{if(JF(t))return}catch{}os(r,"unauthorized-domain")}function JF(r){const e=A1(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!QF.test(t))return!1;if(XF.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=new _u(3e4,6e4);function tw(){const r=es().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function t7(r){return new Promise((e,t)=>{function i(){tw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tw(),t(Ai(r,"network-request-failed"))},timeout:e7.get()})}if(es().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(es().gapi?.load)i();else{const o=sF("iframefcb");return es()[o]=()=>{gapi.load?i():t(Ai(r,"network-request-failed"))},nF(`${iF()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Lg=null,e})}let Lg=null;function r7(r){return Lg=Lg||t7(r),Lg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7=new _u(5e3,15e3),i7="__/auth/iframe",s7="emulator/auth/iframe",o7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l7(r){const e=r.config;gt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Ky(e,s7):`https://${r.config.authDomain}/${i7}`,i={apiKey:e.apiKey,appName:r.name,v:fc},o=a7.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${pu(i).slice(1)}`}async function c7(r){const e=await r7(r),t=es().gapi;return gt(t,r,"internal-error"),e.open({where:document.body,url:l7(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o7,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ai(r,"network-request-failed"),u=es().setTimeout(()=>{l(c)},n7.get());function h(){es().clearTimeout(u),o(i)}i.ping(h).then(h,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u7=500,h7=600,g7="_blank",m7="http://localhost";class rw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f7(r,e,t,i=u7,o=h7){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...d7,width:i.toString(),height:o.toString(),top:l,left:c},m=cn().toLowerCase();t&&(u=yk(m)?g7:t),fk(m)&&(e=e||m7,h.scrollbars="yes");const f=Object.entries(h).reduce((b,[S,w])=>`${b}${S}=${w},`,"");if(KI(m)&&u!=="_self")return p7(e||"",u),new rw(null);const x=window.open(e||"",u,f);gt(x,r,"popup-blocked");try{x.focus()}catch{}return new rw(x)}function p7(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7="__/auth/handler",x7="emulator/auth/handler",b7=encodeURIComponent("fac");async function nw(r,e,t,i,o,l){gt(r.config.authDomain,r,"auth-domain-config-required"),gt(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:fc,eventId:o};if(e instanceof ex){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",F8(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,x]of Object.entries({}))c[f]=x}if(e instanceof Ru){const f=e.getScopes().filter(x=>x!=="");f.length>0&&(c.scopes=f.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const h=await r._getAppCheckToken(),m=h?`#${b7}=${encodeURIComponent(h)}`:"";return`${v7(r)}?${pu(u).slice(1)}${m}`}function v7({config:r}){return r.emulator?Ky(r,x7):`https://${r.authDomain}/${y7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="webStorageSupport";class S7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ik,this._completeRedirectFn=HF,this._overrideRedirectResult=VF}async _openPopup(e,t,i,o){Ms(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await nw(e,t,i,A1(),o);return f7(e,l,tx())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await nw(e,t,i,A1(),o);return jF(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ms(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await c7(e),i=new qF(e);return t.register("authEvent",o=>(gt(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tp,{type:Tp},o=>{const l=o?.[0]?.[Tp];l!==void 0&&t(!!l),os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ZF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wk()||pk()||Zy()}}const w7=S7;var iw="@firebase/auth",sw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A7(r){ki(new ui("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=i.options;gt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tk(r)},m=new tF(i,o,l,h);return aF(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ki(new ui("auth-internal",e=>{const t=e0(e.getProvider("auth").getImmediate());return(i=>new T7(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(iw,sw,j7(r)),En(iw,sw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=300,E7=pj("authIdTokenMaxAge")||k7;let ow=null;const _7=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>E7)return;const o=t?.token;ow!==o&&(ow=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function R7(r=Dm()){const e=Yo(r,"auth");if(e.isInitialized())return e.getImmediate();const t=oF(r,{popupRedirectResolver:w7,persistence:[DF,Rk,Ik]}),i=pj("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=_7(l.toString());yF(t,c,()=>c(t.currentUser)),pF(t,u=>c(u))}}const o=gj("auth");return o&&lF(t,`http://${o}`),t}function C7(){return document.getElementsByTagName("head")?.[0]??document}rF({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Ai("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",C7().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A7("Browser");const Lk="@firebase/installations",nx="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=1e4,$k=`w:${nx}`,Vk="FIS_v2",I7="https://firebaseinstallations.googleapis.com/v1",F7=3600*1e3,D7="installations",P7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Na=new Va(D7,P7,B7);function Wk(r){return r instanceof hi&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk({projectId:r}){return`${I7}/projects/${r}/installations`}function Hk(r){return{token:r.token,requestStatus:2,expiresIn:O7(r.expiresIn),creationTime:Date.now()}}async function Uk(r,e){const i=(await e.json()).error;return Na.create("request-failed",{requestName:r,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function qk({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function z7(r,{refreshToken:e}){const t=qk(r);return t.append("Authorization",M7(e)),t}async function Yk(r){const e=await r();return e.status>=500&&e.status<600?r():e}function O7(r){return Number(r.replace("s","000"))}function M7(r){return`${Vk} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L7({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const i=Gk(r),o=qk(r),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={fid:t,authVersion:Vk,appId:r.appId,sdkVersion:$k},u={method:"POST",headers:o,body:JSON.stringify(c)},h=await Yk(()=>fetch(i,u));if(h.ok){const m=await h.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:Hk(m.authToken)}}else throw await Uk("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=/^[cdef][\w-]{21}$/,_1="";function V7(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=W7(r);return $7.test(t)?t:_1}catch{return _1}}function W7(r){return N7(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new Map;function Qk(r,e){const t=n0(r);Zk(t,e),G7(t,e)}function Zk(r,e){const t=Xk.get(r);if(t)for(const i of t)i(e)}function G7(r,e){const t=H7();t&&t.postMessage({key:r,fid:e}),U7()}let Ca=null;function H7(){return!Ca&&"BroadcastChannel"in self&&(Ca=new BroadcastChannel("[Firebase] FID Change"),Ca.onmessage=r=>{Zk(r.data.key,r.data.fid)}),Ca}function U7(){Xk.size===0&&Ca&&(Ca.close(),Ca=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7="firebase-installations-database",Y7=1,$a="firebase-installations-store";let jp=null;function ix(){return jp||(jp=wj(q7,Y7,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore($a)}}})),jp}async function Sm(r,e){const t=n0(r),o=(await ix()).transaction($a,"readwrite"),l=o.objectStore($a),c=await l.get(t);return await l.put(e,t),await o.done,(!c||c.fid!==e.fid)&&Qk(r,e.fid),e}async function Jk(r){const e=n0(r),i=(await ix()).transaction($a,"readwrite");await i.objectStore($a).delete(e),await i.done}async function i0(r,e){const t=n0(r),o=(await ix()).transaction($a,"readwrite"),l=o.objectStore($a),c=await l.get(t),u=e(c);return u===void 0?await l.delete(t):await l.put(u,t),await o.done,u&&(!c||c.fid!==u.fid)&&Qk(r,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(r){let e;const t=await i0(r.appConfig,i=>{const o=K7(i),l=X7(r,o);return e=l.registrationPromise,l.installationEntry});return t.fid===_1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function K7(r){const e=r||{fid:V7(),registrationStatus:0};return eE(e)}function X7(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Na.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Q7(r,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Z7(r)}:{installationEntry:e}}async function Q7(r,e){try{const t=await L7(r,e);return Sm(r.appConfig,t)}catch(t){throw Wk(t)&&t.customData.serverCode===409?await Jk(r.appConfig):await Sm(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Z7(r){let e=await aw(r.appConfig);for(;e.registrationStatus===1;)await Kk(100),e=await aw(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await sx(r);return i||t}return e}function aw(r){return i0(r,e=>{if(!e)throw Na.create("installation-not-found");return eE(e)})}function eE(r){return J7(r)?{fid:r.fid,registrationStatus:0}:r}function J7(r){return r.registrationStatus===1&&r.registrationTime+Nk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD({appConfig:r,heartbeatServiceProvider:e},t){const i=tD(r,t),o=z7(r,t),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={installation:{sdkVersion:$k,appId:r.appId}},u={method:"POST",headers:o,body:JSON.stringify(c)},h=await Yk(()=>fetch(i,u));if(h.ok){const m=await h.json();return Hk(m)}else throw await Uk("Generate Auth Token",h)}function tD(r,{fid:e}){return`${Gk(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(r,e=!1){let t;const i=await i0(r.appConfig,l=>{if(!tE(l))throw Na.create("not-registered");const c=l.authToken;if(!e&&iD(c))return l;if(c.requestStatus===1)return t=rD(r,e),l;{if(!navigator.onLine)throw Na.create("app-offline");const u=oD(l);return t=nD(r,u),u}});return t?await t:i.authToken}async function rD(r,e){let t=await lw(r.appConfig);for(;t.authToken.requestStatus===1;)await Kk(100),t=await lw(r.appConfig);const i=t.authToken;return i.requestStatus===0?ox(r,e):i}function lw(r){return i0(r,e=>{if(!tE(e))throw Na.create("not-registered");const t=e.authToken;return aD(t)?{...e,authToken:{requestStatus:0}}:e})}async function nD(r,e){try{const t=await eD(r,e),i={...e,authToken:t};return await Sm(r.appConfig,i),t}catch(t){if(Wk(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Jk(r.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Sm(r.appConfig,i)}throw t}}function tE(r){return r!==void 0&&r.registrationStatus===2}function iD(r){return r.requestStatus===2&&!sD(r)}function sD(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+F7}function oD(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function aD(r){return r.requestStatus===1&&r.requestTime+Nk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(r){const e=r,{installationEntry:t,registrationPromise:i}=await sx(e);return i?i.catch(console.error):ox(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(r,e=!1){const t=r;return await dD(t),(await ox(t,e)).token}async function dD(r){const{registrationPromise:e}=await sx(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(r){if(!r||!r.options)throw Ap("App Configuration");if(!r.name)throw Ap("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Ap(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Ap(r){return Na.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="installations",hD="installations-internal",gD=r=>{const e=r.getProvider("app").getImmediate(),t=uD(e),i=Yo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},mD=r=>{const e=r.getProvider("app").getImmediate(),t=Yo(e,rE).getImmediate();return{getId:()=>lD(t),getToken:o=>cD(t,o)}};function fD(){ki(new ui(rE,gD,"PUBLIC")),ki(new ui(hD,mD,"PRIVATE"))}fD();En(Lk,nx);En(Lk,nx,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="analytics",pD="firebase_id",yD="origin",xD=60*1e3,bD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ax="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn=new Fm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new Va("analytics","Analytics",vD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(r){if(!r.startsWith(ax)){const e=Vn.create("invalid-gtag-resource",{gtagURL:r});return fn.warn(e.message),""}return r}function nE(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function wD(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function TD(r,e){const t=wD("firebase-js-sdk-policy",{createScriptURL:SD}),i=document.createElement("script"),o=`${ax}?l=${r}&id=${e}`;i.src=t?t?.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function jD(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function AD(r,e,t,i,o,l){const c=i[o];try{if(c)await e[c];else{const h=(await nE(t)).find(m=>m.measurementId===o);h&&await e[h.appId]}}catch(u){fn.error(u)}r("config",o,l)}async function kD(r,e,t,i,o){try{let l=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const u=await nE(t);for(const h of c){const m=u.find(x=>x.measurementId===h),f=m&&e[m.appId];if(f)l.push(f);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),r("event",i,o||{})}catch(l){fn.error(l)}}function ED(r,e,t,i){async function o(l,...c){try{if(l==="event"){const[u,h]=c;await kD(r,e,t,u,h)}else if(l==="config"){const[u,h]=c;await AD(r,e,t,i,u,h)}else if(l==="consent"){const[u,h]=c;r("consent",u,h)}else if(l==="get"){const[u,h,m]=c;r("get",u,h,m)}else if(l==="set"){const[u]=c;r("set",u)}else r(l,...c)}catch(u){fn.error(u)}}return o}function _D(r,e,t,i,o){let l=function(...c){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=ED(l,r,e,t),{gtagCore:l,wrappedGtag:window[o]}}function RD(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ax)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=30,ID=1e3;class FD{constructor(e={},t=ID){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const iE=new FD;function DD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function PD(r){const{appId:e,apiKey:t}=r,i={method:"GET",headers:DD(t)},o=bD.replace("{app-id}",e),l=await fetch(o,i);if(l.status!==200&&l.status!==304){let c="";try{const u=await l.json();u.error?.message&&(c=u.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function BD(r,e=iE,t){const{appId:i,apiKey:o,measurementId:l}=r.options;if(!i)throw Vn.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:i};throw Vn.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new MD;return setTimeout(async()=>{u.abort()},xD),sE({appId:i,apiKey:o,measurementId:l},c,u,e)}async function sE(r,{throttleEndTimeMillis:e,backoffCount:t},i,o=iE){const{appId:l,measurementId:c}=r;try{await zD(i,e)}catch(u){if(c)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:l,measurementId:c};throw u}try{const u=await PD(r);return o.deleteThrottleMetadata(l),u}catch(u){const h=u;if(!OD(h)){if(o.deleteThrottleMetadata(l),c)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:c};throw u}const m=Number(h?.customData?.httpStatus)===503?Fv(t,o.intervalMillis,CD):Fv(t,o.intervalMillis),f={throttleEndTimeMillis:Date.now()+m,backoffCount:t+1};return o.setThrottleMetadata(l,f),fn.debug(`Calling attemptFetch again in ${m} millis`),sE(r,f,i,o)}}function zD(r,e){return new Promise((t,i)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);r.addEventListener(()=>{clearTimeout(l),i(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OD(r){if(!(r instanceof hi)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class MD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function LD(r,e,t,i,o){if(o&&o.global){r("event",t,i);return}else{const l=await e,c={...i,send_to:l};r("event",t,c)}}async function ND(r,e,t,i){if(i&&i.global){const o={};for(const l of Object.keys(t))o[`user_properties.${l}`]=t[l];return r("set",o),Promise.resolve()}else{const o=await e;r("config",o,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(){if(xj())try{await bj()}catch(r){return fn.warn(Vn.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return fn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function VD(r,e,t,i,o,l,c){const u=BD(r);u.then(b=>{t[b.measurementId]=b.appId,r.options.measurementId&&b.measurementId!==r.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>fn.error(b)),e.push(u);const h=$D().then(b=>{if(b)return i.getId()}),[m,f]=await Promise.all([u,h]);RD(l)||TD(l,m.measurementId),o("js",new Date);const x=c?.config??{};return x[yD]="firebase",x.update=!0,f!=null&&(x[pD]=f),o("config",m.measurementId,x),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.app=e}_delete(){return delete ec[this.app.options.appId],Promise.resolve()}}let ec={},cw=[];const dw={};let kp="dataLayer",GD="gtag",uw,lx,hw=!1;function HD(){const r=[];if(yj()&&r.push("This is a browser extension environment."),_8()||r.push("Cookies are not available."),r.length>0){const e=r.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=Vn.create("invalid-analytics-context",{errorInfo:e});fn.warn(t.message)}}function UD(r,e,t){HD();const i=r.options.appId;if(!i)throw Vn.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(ec[i]!=null)throw Vn.create("already-exists",{id:i});if(!hw){jD(kp);const{wrappedGtag:l,gtagCore:c}=_D(ec,cw,dw,kp,GD);lx=l,uw=c,hw=!0}return ec[i]=VD(r,cw,dw,e,uw,kp,t),new WD(r)}function qD(r=Dm()){r=er(r);const e=Yo(r,wm);return e.isInitialized()?e.getImmediate():YD(r)}function YD(r,e={}){const t=Yo(r,wm);if(t.isInitialized()){const o=t.getImmediate();if(Ds(e,t.getOptions()))return o;throw Vn.create("already-initialized")}return t.initialize({options:e})}function oE(r,e,t){r=er(r),ND(lx,ec[r.app.options.appId],e,t).catch(i=>fn.error(i))}function Zo(r,e,t,i){r=er(r),LD(lx,ec[r.app.options.appId],e,t,i).catch(o=>fn.error(o))}const gw="@firebase/analytics",mw="0.10.19";function KD(){ki(new ui(wm,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return UD(i,o,t)},"PUBLIC")),ki(new ui("analytics-internal",r,"PRIVATE")),En(gw,mw),En(gw,mw,"esm2020");function r(e){try{const t=e.getProvider(wm).getImmediate();return{logEvent:(i,o,l)=>Zo(t,i,o,l),setUserProperties:(i,o)=>oE(t,i,o)}}catch(t){throw Vn.create("interop-component-reg-failed",{reason:t})}}}KD();const XD={apiKey:"AIzaSyCebVxfa6FmlE8Kuyey_0P1LMCquacjez0",authDomain:"nhl-savant.firebaseapp.com",projectId:"nhl-savant",storageBucket:"nhl-savant.firebasestorage.app",messagingSenderId:"801983550873",appId:"1:801983550873:web:79681f2fff98afb9f7af08",measurementId:"G-CD4CG06J6B"},s0=Tj(XD),St=U9(s0),cx=_I(s0),Ng=R7(s0);fF(Ng,Rk);const aE=new _s;aE.setCustomParameters({prompt:"select_account"});let tn=null;try{typeof window<"u"&&(tn=qD(s0))}catch(r){console.warn("Analytics not initialized:",r.message)}const Tc=(r,e={})=>{if(!tn){console.log(` [Analytics] ${r}:`,e);return}try{Zo(tn,r,e),console.log(` [Analytics] ${r}:`,e)}catch(t){console.error(`Failed to log event ${r}:`,t)}},QD=(r,e={})=>{Tc("page_view",{page_title:r,page_location:window.location.href,page_path:window.location.pathname,...e})},ZD=(r,e)=>{e<3||Tc("user_engagement",{page_name:r,engagement_time_msec:e*1e3,engagement_time_seconds:e})},fw=r=>{Tc("bet_expanded",{away_team:r.awayTeam,home_team:r.homeTeam,matchup:`${r.awayTeam} @ ${r.homeTeam}`,game_time:r.gameTime})},JD=()=>{Tc("disclaimer_accepted",{timestamp:new Date().toISOString()})},pw=r=>{if(tn)try{oE(tn,{user_type:r}),console.log(" [Analytics] User type set:",r)}catch(e){console.error("Failed to set user type:",e)}},eP=()=>{localStorage.getItem("nhl_savant_visited")?pw("returning"):(Tc("first_visit",{timestamp:new Date().toISOString()}),localStorage.setItem("nhl_savant_visited","true"),localStorage.setItem("nhl_savant_first_visit",new Date().toISOString()),pw("new"))},tP=(r,e)=>{Tc("bets_loaded",{games_count:r,bets_with_positive_ev:e,load_timestamp:new Date().toISOString()})},rP=r=>({"/":"Today's Games","/dashboard":"Analytics Dashboard","/performance":"Performance Dashboard","/methodology":"Methodology","/inspector":"Data Inspector","/disclaimer":"Legal Disclaimer"})[r]||r;class nP{constructor(e,t=null,i=null){this.rawData=e,this.goalieProcessor=t,this.scheduleHelper=i,this.processedData=this.processAllTeams()}calculatePer60Rate(e,t){return!t||t===0?0:e/t*3600}calculatePDO(e,t,i,o){if(!t||!o||t===0||o===0)return 100;const l=e/t*100,c=(1-i/o)*100;return l+c}calculateShootingEfficiency(e,t){return!t||t===0?1:e/t}calculateSavePerformance(e,t){return!t||t===0?0:1-e/t}calculateXGDiffPer60(e,t,i){const o=this.calculatePer60Rate(e,i),l=this.calculatePer60Rate(t,i);return o-l}calculateRegressionScore(e){const t=(c,u=0)=>c==null||isNaN(c)?u:parseFloat(c),i=this.calculateShootingEfficiency(t(e.goalsFor),t(e.xGoalsFor));this.calculateSavePerformance(t(e.goalsAgainst),t(e.xGoalsAgainst));const o=this.calculatePDO(t(e.goalsFor),t(e.shotsOnGoalFor),t(e.goalsAgainst),t(e.shotsOnGoalAgainst));let l=0;return i>1.1&&(l+=(i-1)*20),i<.9&&(l-=(1-i)*20),o>102&&(l+=(o-100)*2),o<98&&(l-=(100-o)*2),l}processTeamData(e){const t={...e},i=(o,l=0)=>o==null||isNaN(o)?l:parseFloat(o);return t.gamesPlayed=i(e.games_played,20),t.xGF_per60=this.calculatePer60Rate(i(e.xGoalsFor),i(e.iceTime)),t.xGA_per60=this.calculatePer60Rate(i(e.xGoalsAgainst),i(e.iceTime)),t.corsi_per60=this.calculatePer60Rate(i(e.shotAttemptsFor),i(e.iceTime)),t.fenwick_per60=this.calculatePer60Rate(i(e.unblockedShotAttemptsFor),i(e.iceTime)),t.highDanger_xGF_per60=this.calculatePer60Rate(i(e.highDangerxGoalsFor),i(e.iceTime)),t.highDanger_xGA_per60=this.calculatePer60Rate(i(e.highDangerxGoalsAgainst),i(e.iceTime)),t.scoreAdj_xGF_per60=this.calculatePer60Rate(i(e.scoreVenueAdjustedxGoalsFor),i(e.iceTime)),t.scoreAdj_xGA_per60=this.calculatePer60Rate(i(e.scoreVenueAdjustedxGoalsAgainst),i(e.iceTime)),t.shotsOnGoalFor_per60=this.calculatePer60Rate(i(e.shotsOnGoalFor),i(e.iceTime)),t.shotsOnGoalAgainst_per60=this.calculatePer60Rate(i(e.shotsOnGoalAgainst),i(e.iceTime)),t.shotAttempts_per60=this.calculatePer60Rate(i(e.shotAttemptsFor),i(e.iceTime)),t.shotAttemptsAgainst_per60=this.calculatePer60Rate(i(e.shotAttemptsAgainst),i(e.iceTime)),t.blockedShotsAgainst=i(e.blockedShotAttemptsAgainst,0),t.penalityMinutes=i(e.penalityMinutesFor,0),e.situation==="5on4"&&(t.pp_efficiency=this.calculatePer60Rate(i(e.xGoalsFor),i(e.iceTime))),e.situation==="4on5"&&(t.pk_efficiency=this.calculatePer60Rate(i(e.xGoalsAgainst),i(e.iceTime))),t.pdo=this.calculatePDO(i(e.goalsFor),i(e.shotsOnGoalFor),i(e.goalsAgainst),i(e.shotsOnGoalAgainst)),t.shooting_efficiency=this.calculateShootingEfficiency(i(e.goalsFor),i(e.xGoalsFor)),t.save_performance=this.calculateSavePerformance(i(e.goalsAgainst),i(e.xGoalsAgainst)),t.xGD_per60=this.calculateXGDiffPer60(i(e.xGoalsFor),i(e.xGoalsAgainst),i(e.iceTime)),t.regression_score=this.calculateRegressionScore(e),t.situational_weight=this.getSituationalWeight(e.situation),t}getSituationalWeight(e){return{"5on5":.77,"5on4":.12,"4on5":.11,all:1,other:0}[e]||0}calculateDynamicSituationalWeights(e,t){const i=this.getTeamData(e,"all"),o=this.getTeamData(t,"all");if(!i||!o)return{"5on5":.77,"5on4":.12,"4on5":.11};const l=parseFloat(i.penalityMinutesFor)||0,c=parseFloat(o.penalityMinutesFor)||0,u=parseFloat(i.games_played)||1,h=l/u,f=c/u,x=h,b=f/60,S=x/60,w=1-b-S;return{"5on5":Math.max(.6,Math.min(.85,w)),"5on4":Math.max(.05,Math.min(.2,b)),"4on5":Math.max(.05,Math.min(.2,S))}}processAllTeams(){return this.rawData.map(e=>this.processTeamData(e))}getTeamsBySituation(e){return this.processedData.filter(t=>t.situation===e)}getTeamData(e,t="all"){return this.processedData.find(i=>i.team===e&&i.situation===t)}calculateLeagueAverage(){const e=this.getTeamsBySituation("5on5");if(!e||e.length===0)return 2.45;let t=0,i=0;e.forEach(m=>{t+=m.goalsFor||0,i+=m.scoreVenueAdjustedxGoalsFor||m.xGoalsFor||0});const l=1.52,c=e.map(m=>m.xGF_per60).filter(m=>m&&m>0);if(c.length===0)return 2.45;const u=c.reduce((m,f)=>m+f,0)/c.length,h=u*l;return console.log(` League avg: base=${u.toFixed(2)} xGF/60, cal=${l.toFixed(3)}, result=${h.toFixed(2)} goals/60`),h}calculateRegressionWeight(e){return!e||e<0||e<5?.35:e<10?.3:e<20||e<40?.2:.1}applyRegressionToMean(e,t,i){if(!e||e===0)return t;const o=this.calculateRegressionWeight(i);return e*(1-o)+t*o}getShootingTalent(e){const t=this.getTeamData(e,"5on5");if(!t||!t.goalsFor||!t.xGoalsFor)return 1;const i=t.goalsFor/t.xGoalsFor;return i>1.08?1.03:i<.92?.97:1}calculateExpectedGoals(e,t){const i=this.getTeamData(e,"5on5"),o=this.getTeamData(e,"5on4"),l=this.getTeamData(t,"4on5");if(!i)return 0;let c=i.xGF_per60*.77;if(o&&l){const u=(o.pp_efficiency-l.pk_efficiency)*.12;c+=u}return Math.max(0,c)}predictGameTotal(e,t){const i=this.predictTeamScore(e,t),o=this.predictTeamScore(t,e);return i+o}predictTeamScore(e,t,i=!1,o=null,l=null){const c=this.getTeamData(e,"5on5"),u=this.getTeamData(t,"5on5"),h=this.getTeamData(e,"5on4"),m=this.getTeamData(t,"4on5");if(!c||!u)return 0;const f=this.calculateLeagueAverage(),x=c.gamesPlayed||82,b=u.gamesPlayed||82,S=c.scoreAdj_xGF_per60||c.xGF_per60,w=u.scoreAdj_xGA_per60||u.xGA_per60,T=c.L10_xGF_per60||S,E=u.L10_xGA_per60||w,A=x>=10?parseFloat(T)*.6+S*.4:S,_=b>=10?parseFloat(E)*.6+w*.4:w;x>=10&&T!==S&&console.log(`   Recency weighting: ${e} L10=${parseFloat(T).toFixed(2)}  Weighted=${A.toFixed(2)} xGF/60`);const B=this.applyRegressionToMean(A,f,x),I=this.applyRegressionToMean(_,f,b),L=this.calculatePDO(c.goalsFor,c.shotsOnGoalFor,c.goalsAgainst,c.shotsOnGoalAgainst),M=this.calculatePDO(u.goalsFor,u.shotsOnGoalFor,u.goalsAgainst,u.shotsOnGoalAgainst),R=this.applyPDORegression(B,L),j=this.applyPDORegression(I,M),F=R*.4+j*.6,z=this.getShootingTalent(e),P=F*z,V=this.calculateDynamicSituationalWeights(e,t),N=V["5on5"]*60;let Z=P/60*N;i&&(Z*=1.015);let Q=0;if(h&&m){const K=h.xGF_per60,X=m.xGA_per60,re=this.applyRegressionToMean(K,f,x),me=this.applyRegressionToMean(X,f,b),te=(re*.4+me*.6)*z,le=V["5on4"]*60;Q=te/60*le}let H=Z+Q;if(this.scheduleHelper){const K=this.scheduleHelper.getCombinedAdjustment(e,l,i);if(K!==0){H*=1+K;const X=this.scheduleHelper.getRestAdjustment(e,l),re=i?0:this.scheduleHelper.getRoadTripAdjustment(e,l),me=i?this.scheduleHelper.getHomecomingAdjustment(e,l):0,ke=[];if(X!==0){const te=X===-.03?"B2B":X>0?"Extra Rest":"Rest";ke.push(`${te} ${X>0?"+":""}${(X*100).toFixed(1)}%`)}if(re!==0){const te=this.scheduleHelper.getConsecutiveAwayGames(e,l);ke.push(`Road Trip (game ${te+1}) ${(re*100).toFixed(1)}%`)}if(me!==0){const{tripLength:te}=this.scheduleHelper.isHomecomingGame(e,l);ke.push(`Homecoming (${te}-game trip) +${(me*100).toFixed(1)}%`)}console.log(`  Situational adjustment for ${e}: ${ke.join(", ")}  ${H.toFixed(2)} goals`)}}const U=this.adjustForGoalie(H,t,o);return Math.max(0,U)}applyPDORegression(e,t){if(!t||t===100)return e;if(t>100){const i=Math.min(.02,(t-100)*.01);return e*(1-i)}else if(t<100){const i=Math.min(.02,(100-t)*.01);return e*(1+i)}return e}adjustForGoalie(e,t,i=null){if(!this.goalieProcessor)return e;let o=0;if(i)o=this.goalieProcessor.calculateGSAE(i,"5on5"),console.log(` Goalie adjustment: ${i}  GSAE ${o.toFixed(2)}`);else{const h=this.goalieProcessor.getTeamGoalies(t,"5on5");if(h&&h.length>0){let m=0,f=0;h.forEach(x=>{const b=parseFloat(x.games_played)||0,S=this.goalieProcessor.calculateGSAE(x.name,"5on5");m+=S*b,f+=b}),o=f>0?m/f:0}}const l=1+o*.003,c=i?1:.6,u=1+(l-1)*c;return Math.max(0,e*u)}probabilityToOdds(e){return e<=0||e>=1?0:e>=.5?Math.round(-1*(e/(1-e))*100):Math.round((1-e)/e*100)}oddsToProbability(e){return e<0?Math.abs(e)/(Math.abs(e)+100):100/(e+100)}calculateEV(e,t,i=100){if(e<=0||e>=1)return 0;let o;t>0?o=1+t/100:o=1+100/Math.abs(t);const l=i*o;return e*l-i}calculateKellyStake(e,t,i=1e3){if(e<=0||e>=1)return{fullKelly:0,fractionalKelly:0,recommendedStake:0};const o=t>0?t/100:100/Math.abs(t),l=e,c=1-l,u=(o*l-c)/o,h=Math.max(0,u*.25);return{fullKelly:u,fractionalKelly:h,recommendedStake:i*h}}normalCDF(e){const t=1/(1+.2316419*Math.abs(e)),o=.3989423*Math.exp(-e*e/2)*t*(.3193815+t*(-.3565638+t*(1.781478+t*(-1.821256+t*1.330274))));return e>0?1-o:o}factorial(e){if(e<=1)return 1;let t=1;for(let i=2;i<=e;i++)t*=i;return t}logFactorial(e){if(e<=1)return 0;let t=0;for(let i=2;i<=e;i++)t+=Math.log(i);return t}poissonPMF(e,t){if(t<=0||e<0)return 0;if(e>20){const i=e*Math.log(t)-t-this.logFactorial(e);return Math.exp(i)}return Math.pow(t,e)*Math.exp(-t)/this.factorial(e)}poissonCDF(e,t){if(t<=0)return 1;if(e<0)return 0;let i=0;const o=Math.floor(e);for(let l=0;l<=o;l++)i+=this.poissonPMF(l,t);return Math.min(1,i)}calculatePoissonWinProb(e,t){if(!e||!t||e<=0||t<=0)return .5;let i=0,o=0;for(let m=0;m<=10;m++){const f=this.poissonPMF(m,e);for(let x=0;x<=10;x++){const b=this.poissonPMF(x,t),S=f*b;m>x?i+=S:m===x&&(o+=S)}}const l=Math.abs(e-t),c=(e+t)/2,u=l/c;let h;return u<.1?h=.5:e>t?h=Math.min(.58,.52+u*.15):h=Math.max(.42,.48-u*.15),i+=o*h,Math.max(.05,Math.min(.95,i))}estimateWinProbability(e,t,i=!0){if(!e||!t)return .5;const o=e.team||e.name,l=t.team||t.name;if(!o||!l)return .5;let c,u;return i?(c=this.predictTeamScore(o,l,!0),u=this.predictTeamScore(l,o,!1)):(c=this.predictTeamScore(o,l,!1),u=this.predictTeamScore(l,o,!0)),this.calculatePoissonWinProb(c,u)}findRegressionCandidates(){const e=this.getTeamsBySituation("all"),t=e.filter(o=>o.regression_score>10).sort((o,l)=>l.regression_score-o.regression_score),i=e.filter(o=>o.regression_score<-10).sort((o,l)=>o.regression_score-l.regression_score);return{overperforming:t.slice(0,5),underperforming:i.slice(0,5)}}findSpecialTeamsMismatches(){const e=this.getTeamsBySituation("5on4"),t=this.getTeamsBySituation("4on5"),i=[];return e.forEach(o=>{t.forEach(l=>{if(o.team!==l.team){const c=o.pp_efficiency||0,u=l.pk_efficiency||0,h=c-u;h>2&&i.push({ppTeam:o.team,pkTeam:l.team,ppEfficiency:c,pkEfficiency:u,mismatch:h,recommendation:"BET OVER on "+o.team+" team total"})}})}),i.sort((o,l)=>l.mismatch-o.mismatch)}calculateBettingEdge(e,t){const i=1/t;return e-i}getTopBettingOpportunities(){const e=this.findRegressionCandidates(),t=this.findSpecialTeamsMismatches(),i=[];return e.overperforming.forEach(o=>{i.push({type:"REGRESSION",team:o.team,recommendation:"BET UNDER/AGAINST",reason:`Overperforming (PDO: ${o.pdo.toFixed(1)}, Shooting Eff: ${o.shooting_efficiency.toFixed(2)})`,confidence:Math.min(95,Math.abs(o.regression_score)*2),edge:Math.abs(o.regression_score)/10})}),e.underperforming.forEach(o=>{i.push({type:"REGRESSION",team:o.team,recommendation:"BET OVER/WITH",reason:`Underperforming (PDO: ${o.pdo.toFixed(1)}, Shooting Eff: ${o.shooting_efficiency.toFixed(2)})`,confidence:Math.min(95,Math.abs(o.regression_score)*2),edge:Math.abs(o.regression_score)/10})}),t.slice(0,3).forEach(o=>{i.push({type:"SPECIAL_TEAMS",team:o.ppTeam,recommendation:o.recommendation,reason:`PP vs PK mismatch (${o.mismatch.toFixed(1)} per 60)`,confidence:Math.min(90,o.mismatch*10),edge:o.mismatch/5})}),i.sort((o,l)=>l.edge-o.edge)}}async function iP(r=null){try{let e;try{if(e=await fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/teams.csv"),!e.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw file failed, trying local file..."),e=await fetch("/teams.csv")}if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.text();return new Promise((i,o)=>{fu.parse(t,{header:!0,skipEmptyLines:!0,transformHeader:l=>l.trim(),transform:l=>{if(l===""||l===null||l===void 0)return null;const c=l.toString().trim();return c===""||c==="null"||c==="undefined"?null:!isNaN(c)&&!isNaN(parseFloat(c))?parseFloat(c):c},complete:l=>{console.log("CSV parsing completed. Rows:",l.data.length),console.log("Parsing errors:",l.errors),l.errors.length>0&&console.warn("CSV parsing warnings:",l.errors);const c=l.data.filter(h=>h&&Object.keys(h).some(m=>h[m]!==null&&h[m]!==""));if(c.length===0){o(new Error("No valid data found in CSV file"));return}console.log("Clean data rows:",c.length);const u=new nP(c,null,r);i(u)},error:l=>{console.error("CSV parsing error:",l),o(l)}})})}catch(e){throw console.error("Error loading NHL data:",e),e}}async function sP(){const r=["https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/starting_goalies.json","/starting_goalies.json"];for(const e of r)try{const t=await fetch(e);if(!t.ok)continue;const i=await t.json();return console.log(" Loaded starting goalies:",i.games?.length||0,"games"),i}catch{console.log(` Could not load from ${e}`)}return console.log(" No starting goalies file found, using team averages"),null}async function oP(){try{let r;try{if(r=await fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/goalies.csv"),!r.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw file failed, trying local file..."),r=await fetch("/goalies.csv")}if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const e=await r.text();return new Promise((t,i)=>{fu.parse(e,{header:!0,skipEmptyLines:!0,transformHeader:o=>o.trim(),complete:o=>{const l=o.data.filter(c=>c&&c.name&&c.team&&c.situation);console.log(` Loaded ${l.length} goalie records`),t(l)},error:o=>{console.error("Goalie CSV parsing error:",o),i(o)}})})}catch(r){throw console.error("Error loading goalies.csv:",r),r}}async function aP(){try{console.log(" Loading Money file..."),console.log(" Loading Total file...");let r,e;try{if([r,e]=await Promise.all([fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/odds_money.md"),fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/odds_total.md")]),!r.ok||!e.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw files failed, trying local files..."),[r,e]=await Promise.all([fetch("/odds_money.md"),fetch("/odds_total.md")])}if(!r.ok||!e.ok)return console.warn("One or both odds files not found"),null;const t=await r.text(),i=await e.text();return console.log(" Both odds files loaded successfully"),{moneyText:t,totalText:i}}catch(r){return console.warn("Error loading odds files:",r),null}}class lP{constructor(e){this.goalieData=e}getGoalieStats(e,t){if(console.log(` getGoalieStats called: ${e} (${t})`),!this.goalieData||!Array.isArray(this.goalieData))return console.log(" No goalie data available"),null;const i=this.goalieData.filter(T=>T.team===t);console.log(`    Found ${i.length} rows for team ${t}`),i.length>0&&console.log(`    Sample names: ${i.slice(0,3).map(T=>T.name).join(", ")}`);let o=this.goalieData.filter(T=>T.name===e&&T.team===t&&T.situation==="all");if(!o.length){console.log(`    No exact match, trying last name match for: ${e}`);const T=e.toLowerCase().trim();o=this.goalieData.filter(E=>{if(E.team!==t||E.situation!=="all")return!1;const A=E.name.toLowerCase().trim(),_=A.split(" "),B=_[_.length-1],I=B===T||A.includes(T)||T.includes(B);return I&&console.log(`    Last name match found: ${E.name} (${E.team}) matched with "${e}"`),I}),o.length>1&&(console.log(`    Multiple matches found, using: ${o[0].name}`),o=[o[0]])}if(!o.length)return console.log(` Goalie stats not in database: ${e} (${t})`),null;console.log(` Found goalie: ${o[0].name} (${o[0].team})`);const l=o[0],c=parseInt(l.games_played)||0;if(c===0)return console.warn(`No games played for: ${e}`),null;parseFloat(l.icetime);const u=parseFloat(l.xGoals)||0,h=parseFloat(l.goals)||0,m=parseFloat(l.ongoal)||0,f=u-h,x=m>0?1-h/m:.9,b=parseFloat(l.highDangerShots)||0,S=parseFloat(l.highDangerGoals)||0,w=b>0?1-S/b:.85;return{name:e,team:t,gamesPlayed:c,gsae:f.toFixed(2),savePct:(x*100).toFixed(1),hdSavePct:(w*100).toFixed(1),xGoalsAgainst:(u/c).toFixed(2),goalsAgainst:(h/c).toFixed(2),lowDangerSavePct:this.calculateLowDangerSavePct(l),mediumDangerSavePct:this.calculateMediumDangerSavePct(l),reboundControl:this.calculateReboundControl(l),recentForm:this.calculateRecentForm(f,c)}}calculateGSAE(e,t="5on5"){if(!this.goalieData||!Array.isArray(this.goalieData))return console.log(" calculateGSAE: No goalie data available"),0;const i=this.goalieData.filter(h=>h.situation===t);let o=i.find(h=>h.name===e);if(!o){const h=e.toLowerCase().trim();o=i.find(m=>{const f=m.name.toLowerCase(),x=f.split(" ");return x[x.length-1]===h||f.includes(h)})}if(!o)return console.log(` calculateGSAE: Goalie not found: ${e} (${t})`),0;const l=parseFloat(o.xGoals)||0,c=parseFloat(o.goals)||0,u=l-c;return console.log(` calculateGSAE: ${o.name}  GSAE ${u.toFixed(2)} (xG: ${l.toFixed(2)}, GA: ${c.toFixed(2)})`),u}getTeamGoalies(e,t="5on5"){return!this.goalieData||!Array.isArray(this.goalieData)?[]:this.goalieData.filter(i=>i.team===e&&i.situation===t&&parseInt(i.games_played)>0)}calculateLowDangerSavePct(e){const t=parseFloat(e.lowDangerShots)||0,i=parseFloat(e.lowDangerGoals)||0;return t>0?((1-i/t)*100).toFixed(1):"97.0"}calculateMediumDangerSavePct(e){const t=parseFloat(e.mediumDangerShots)||0,i=parseFloat(e.mediumDangerGoals)||0;return t>0?((1-i/t)*100).toFixed(1):"92.0"}calculateReboundControl(e){const t=parseFloat(e.xRebounds)||0,i=parseFloat(e.rebounds)||0;if(t===0)return"Average";const o=i/t;return o<.9?"Excellent":o>1.15?"Poor":"Average"}calculateRecentForm(e,t){return t<5?"Limited Sample":e>5?"Hot":e<-3?"Cold":"Average"}getLeagueRank(e){const t=parseFloat(e);return t>10?{rank:5,tier:"ELITE"}:t>5?{rank:12,tier:"STRONG"}:t>-5?{rank:18,tier:"AVERAGE"}:{rank:28,tier:"WEAK"}}getGoalieFromStartingData(e,t){if(!t||!t.games)return null;const i=t.games.find(c=>c.away?.team===e||c.home?.team===e);if(!i)return null;const l=i.away?.team===e?i.away:i.home;return!l||!l.goalie?null:l.stats?l.stats:this.getGoalieStats(l.goalie,e)}}class cP{constructor(e){this.teamNameToCode=this.buildTeamMapping(),this.gamesByTeam=this.indexSchedule(e)}buildTeamMapping(){return{"Anaheim Ducks":"ANA","Arizona Coyotes":"ARI","Boston Bruins":"BOS","Buffalo Sabres":"BUF","Calgary Flames":"CGY","Carolina Hurricanes":"CAR","Chicago Blackhawks":"CHI","Colorado Avalanche":"COL","Columbus Blue Jackets":"CBJ","Dallas Stars":"DAL","Detroit Red Wings":"DET","Edmonton Oilers":"EDM","Florida Panthers":"FLA","Los Angeles Kings":"LAK","Minnesota Wild":"MIN","Montreal Canadiens":"MTL","Nashville Predators":"NSH","New Jersey Devils":"NJ","New York Islanders":"NYI","New York Rangers":"NYR","Ottawa Senators":"OTT","Philadelphia Flyers":"PHI","Pittsburgh Penguins":"PIT","San Jose Sharks":"SJ","Seattle Kraken":"SEA","St. Louis Blues":"STL","Tampa Bay Lightning":"TB","Toronto Maple Leafs":"TOR","Utah Mammoth":"UTA","Vancouver Canucks":"VAN","Vegas Golden Knights":"VEG","Washington Capitals":"WSH","Winnipeg Jets":"WPG"}}indexSchedule(e){const t={};return!e||!Array.isArray(e)?(console.warn(" Schedule data invalid, B2B disabled"),t):(e.forEach(i=>{const o=i.Date,l=i.Visitor,c=i.Home,u=parseInt(i.Score_1)||0,h=parseInt(i.Score_2)||0,m=i.Status,f=this.teamNameToCode[l],x=this.teamNameToCode[c];if(!o||!f||!x){(l||c)&&console.warn(` Could not map team names: ${l} vs ${c}`);return}t[f]||(t[f]=[]),t[x]||(t[x]=[]);let b=null,S=null;m&&m.includes("Final")&&(S=u-h,u>h?b="W":u<h?b=m.includes("OT")||m.includes("SO")?"OTL":"L":b="T");let w=null,T=null;m&&m.includes("Final")&&(T=h-u,h>u?w="W":h<u?w=m.includes("OT")||m.includes("SO")?"OTL":"L":w="T"),t[f].push({date:o,opponent:x,location:"away",timestamp:this.parseDate(o),result:b,score:m?`${u}-${h}`:null,goalDifferential:S}),t[x].push({date:o,opponent:f,location:"home",timestamp:this.parseDate(o),result:w,score:m?`${h}-${u}`:null,goalDifferential:T})}),Object.values(t).forEach(i=>{i.sort((o,l)=>o.timestamp-l.timestamp)}),console.log(` Indexed schedule for ${Object.keys(t).length} teams (2025-26 season)`),t)}parseDate(e){if(!e)return 0;if(e.includes("-")){const[t,i,o]=e.split("-");return new Date(t,i-1,o).getTime()}if(e.includes("/")){const[t,i,o]=e.split("/");return new Date(o,t-1,i).getTime()}return 0}getDaysRest(e,t){const i=this.gamesByTeam[e];if(!i||i.length===0)return null;const o=this.parseDate(t);if(!o)return null;const l=i.filter(u=>u.timestamp<o).sort((u,h)=>h.timestamp-u.timestamp)[0];return l?Math.floor((o-l.timestamp)/(1e3*60*60*24)):null}isBackToBack(e,t){return this.getDaysRest(e,t)===1}getRestAdjustment(e,t){const i=this.getDaysRest(e,t);return i===null?0:i===1?-.03:i===2?0:i>=3?.04:i<=0?-.04:0}getConsecutiveAwayGames(e,t){const i=this.gamesByTeam[e];if(!i||i.length===0)return 0;const o=this.parseDate(t);if(!o)return 0;const l=i.filter(u=>u.timestamp<o).sort((u,h)=>h.timestamp-u.timestamp);let c=0;for(const u of l)if(u.location==="away")c++;else break;return c}getRoadTripAdjustment(e,t){const i=this.getConsecutiveAwayGames(e,t);return i<2?0:i===2?-.03:i===3?-.05:i>=4?-.08:0}isHomecomingGame(e,t){const i=this.gamesByTeam[e];if(!i||i.length===0)return{isHomecoming:!1,tripLength:0};const o=this.parseDate(t);if(!o)return{isHomecoming:!1,tripLength:0};const l=i.find(h=>h.timestamp===o);if(!l||l.location!=="home")return{isHomecoming:!1,tripLength:0};const c=i.filter(h=>h.timestamp<o).sort((h,m)=>m.timestamp-h.timestamp);let u=0;for(const h of c)if(h.location==="away")u++;else break;return{isHomecoming:u>=3,tripLength:u}}getHomecomingAdjustment(e,t){const{isHomecoming:i,tripLength:o}=this.isHomecomingGame(e,t);return i?o===3?.03:o===4?.05:o>=5?.06:0:0}getCombinedAdjustment(e,t,i){let o=0;if(o+=this.getRestAdjustment(e,t),i){const l=this.getHomecomingAdjustment(e,t);l!==0&&(o+=l)}else{const l=this.getRoadTripAdjustment(e,t);l!==0&&(o+=l)}return o}getRestInfo(e,t){const i=this.getDaysRest(e,t),o=this.getRestAdjustment(e,t);return{daysRest:i,isB2B:i===1,adjustment:o,description:i===null?"Season start":i===1?"Back-to-back":i===2?"Normal rest":i>=3?`Extra rest (${i} days)`:"Unknown"}}getTeamRecentGames(e,t=10){const i=this.gamesByTeam[e];if(!i||i.length===0)return[];const o=Date.now();return i.filter(c=>c.timestamp<o&&c.result).sort((c,u)=>u.timestamp-c.timestamp).slice(0,t)}}const lE="America/New_York";function an(r=new Date){const e=r.toLocaleString("en-US",{timeZone:lE,year:"numeric",month:"2-digit",day:"2-digit"}),[t,i,o]=e.split("/");return`${o}-${t}-${i}`}function cE(){const r=new Date;return r.setDate(r.getDate()-1),an(r)}function dE(r=new Date){const e=r.toLocaleString("en-US",{timeZone:lE,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),[t,i]=e.split(", "),[o,l,c]=t.split("/"),[u,h,m]=i.split(":");return{year:parseInt(c),month:parseInt(o),day:parseInt(l),hour:parseInt(u),minute:parseInt(h),second:parseInt(m),dateString:`${c}-${o}-${l}`,timeString:`${u}:${h}:${m}`}}function dP(){const{hour:r}=dE();return r}function uP(r){return dP()<r}function hP(){return uP(6)?cE():an()}function gP(r="Date Debug"){const e=new Date().toISOString().split("T")[0],t=an(),{hour:i,minute:o}=dE();return console.log(` ${r}:`),console.log(`   UTC Date: ${e}`),console.log(`   ET Date:  ${t}`),console.log(`   ET Time:  ${i}:${String(o).padStart(2,"0")}`),e!==t&&console.warn("    TIMEZONE MISMATCH: UTC and ET dates differ!"),{utcDate:e,etDate:t}}const yw={Minnesota:"MIN","N.Y. Rangers":"NYR",Seattle:"SEA",Philadelphia:"PHI",Buffalo:"BUF",Detroit:"DET",Montreal:"MTL",Winnipeg:"WPG",Calgary:"CGY",Carolina:"CAR",Vegas:"VGK","San Jose":"SJS","N.Y. Islanders":"NYI","New Jersey":"NJD",Toronto:"TOR",Vancouver:"VAN",Pittsburgh:"PIT",Washington:"WSH",Edmonton:"EDM",Ottawa:"OTT",Florida:"FLA",Boston:"BOS","Los Angeles":"LAK","St. Louis":"STL",Columbus:"CBJ",Dallas:"DAL",Anaheim:"ANA",Nashville:"NSH",Colorado:"COL",Utah:"UTA","Tampa Bay":"TBL",Chicago:"CHI"};function xw(r){if(!r||r.trim()==="")return console.warn("No odds data provided"),[];const e=[],t=r.split(`
`),i=new Date,o=["SUN","MON","TUE","WED","THU","FRI","SAT"],l=o[i.getDay()],c=i.getMonth()+1,u=i.getDate(),h=[`${l} ${c}/${u}`,`${l} ${c}/${u.toString().padStart(2,"0")}`,`${l} ${c.toString().padStart(2,"0")}/${u}`,`${l} ${c.toString().padStart(2,"0")}/${u.toString().padStart(2,"0")}`],m=new Date(i);m.setDate(m.getDate()-1);const f=o[m.getDay()],x=m.getMonth()+1,b=m.getDate(),S=[`${f} ${x}/${b}`,`${f} ${x}/${b.toString().padStart(2,"0")}`,`${f} ${x.toString().padStart(2,"0")}/${b}`,`${f} ${x.toString().padStart(2,"0")}/${b.toString().padStart(2,"0")}`],T=i.getHours()<6;console.log(` Starting OddsTrader parser... Looking for: ${h.join(" or ")}`);for(let E=0;E<t.length;E++){const A=t[E],_=h.some(z=>A.includes(z)),B=T&&S.some(z=>A.includes(z));if(_||B||A.includes("LIVE")||A.includes("STARTS IN")){console.log(`
 Found game line at ${E}: ${A.substring(0,100)}...`);let z;if(A.includes("LIVE"))z="LIVE",console.log("   LIVE GAME - Including with status LIVE");else if(A.includes("STARTS IN"))z="STARTING SOON",console.log("   STARTING SOON (countdown detected)");else{const Q=A.match(/\/\d{1,2}(\d{1,2}:\d{2}\s*[AP]M)|(\d{1,2}:\d{2}\s*[AP]M)/);if(!Q){console.log("   No time found in line, skipping"),console.log(`   Line content: ${A.substring(0,200)}`);continue}z=(Q[1]||Q[2]).trim(),console.log(`   Time: ${z}`)}const P={gameTime:z,awayTeam:null,homeTeam:null,moneyline:{away:null,home:null},puckLine:{away:{spread:null,odds:null},home:{spread:null,odds:null}},total:{line:null,overLine:null,underLine:null,over:null,under:null}};for(const[Q,H]of Object.entries(yw))if(A.includes(Q)){P.awayTeam=H,console.log(`   Away team: ${Q} (${H})`);break}const V=A.match(/(o|u)(\d+(?:)?)\s*([-+]\d{3,})[A-Za-z]/);if(V){const Q=V[1],H=V[2].replace("",".5"),U=parseInt(V[3]);Q==="o"?(P.total.overLine=parseFloat(H),P.total.over=U,console.log(`   OVER ${H} ${U}`)):(P.total.underLine=parseFloat(H),P.total.under=U,console.log(`   UNDER ${H} ${U}`))}else{const Q=A.match(/([-+]\d{3,})(Bet365|Caesars|BetMGM|BetRivers|SugarHouse|FanDuel|Bovada|BetOnline|BetAnything|Heritage|Bookmaker|JustBet|MyBookie|Everygame|Bet\d+|BetUS)/i);Q&&(P.moneyline.away=parseInt(Q[1]),console.log(`   Away odds: ${P.moneyline.away} (from ${Q[2]})`))}const N=t[E+1];if(!N){console.log("   No next line found for home team, skipping");continue}for(const[Q,H]of Object.entries(yw))if(N.includes(Q)){P.homeTeam=H,console.log(`   Home team: ${Q} (${H})`);break}const Z=N.match(/(o|u)(\d+(?:)?)\s*([-+]\d{3,})[A-Za-z]/);if(Z){const Q=Z[1],H=Z[2].replace("",".5"),U=parseInt(Z[3]);Q==="o"?(P.total.overLine=parseFloat(H),P.total.over=U,console.log(`   OVER ${H} ${U}`)):(P.total.underLine=parseFloat(H),P.total.under=U,console.log(`   UNDER ${H} ${U}`))}else{const Q=N.match(/([-+]\d{3,})(Bet365|Caesars|BetMGM|BetRivers|SugarHouse|FanDuel|Bovada|BetOnline|BetAnything|Heritage|Bookmaker|JustBet|MyBookie|Everygame|Bet\d+|BetUS)/i);Q&&(P.moneyline.home=parseInt(Q[1]),console.log(`   Home odds: ${P.moneyline.home} (from ${Q[2]})`))}P.awayTeam&&P.homeTeam?(P.total.overLine&&P.total.underLine?(P.total.overLine,P.total.underLine,P.total.line=P.total.overLine):P.total.overLine?P.total.line=P.total.overLine:P.total.underLine&&(P.total.line=P.total.underLine),P.date=an(),e.push(P),console.log(`   Added game: ${P.awayTeam} @ ${P.homeTeam}`),console.log(`     Moneyline: ${P.moneyline.away}/${P.moneyline.home}`),console.log(`     Total: ${P.total.line?`O/U ${P.total.line} (${P.total.over}/${P.total.under})`:"N/A"}`)):console.log(`   Missing team data - away: ${P.awayTeam}, home: ${P.homeTeam}`)}const L=new Date(i);L.setDate(L.getDate()+1);const M=o[L.getDay()],R=L.getMonth()+1,j=L.getDate();if([`${M} ${R}/${j}`,`${M} ${R}/${j.toString().padStart(2,"0")}`,`${M} ${R.toString().padStart(2,"0")}/${j}`,`${M} ${R.toString().padStart(2,"0")}/${j.toString().padStart(2,"0")}`].some(z=>A.includes(z))){console.log(`
 Reached tomorrow's games, stopping parser`);break}}return console.log(`
 Parsed ${e.length} games from OddsTrader`),e.length>0&&console.log(" Games:",e.map(E=>`${E.awayTeam} @ ${E.homeTeam}`).join(", ")),e}function uE(r,e){console.log(" Merging moneylines + totals...");const t=xw(r);console.log(` Parsed ${t.length} games from Money file`);const i=xw(e);console.log(` Parsed ${i.length} games from Total file`);const o=t.map((l,c)=>{const u=i[c];return u&&u.total&&u.total.line?{...l,total:u.total}:l});return console.log(` Final merged games: ${o.map(l=>`${l.awayTeam} @ ${l.homeTeam}`).join(", ")}`),o}function mP(r){return!r||r.length===0?[]:r.map(e=>({away:e.awayTeam,home:e.homeTeam,time:e.gameTime||"TBD"}))}class fP{constructor(e){this.dataProcessor=e,this.leagueAverages={},this.calculateLeagueAverages()}calculateLeagueAverages(){const e=this.dataProcessor.getTeamsBySituation("5on5");if(!e||e.length===0)return;["highDangerxGoalsFor","highDangerxGoalsAgainst","highDangerShotsFor","highDangerShotsAgainst","highDangerGoalsFor","highDangerGoalsAgainst","mediumDangerxGoalsFor","mediumDangerxGoalsAgainst","lowDangerxGoalsFor","lowDangerxGoalsAgainst","xReboundsFor","xReboundsAgainst","reboundGoalsFor","reboundGoalsAgainst","xGoalsFromActualReboundsOfShotsFor","xGoalsFromActualReboundsOfShotsAgainst","blockedShotAttemptsFor","blockedShotAttemptsAgainst","shotAttemptsFor","shotAttemptsAgainst","takeawaysFor","takeawaysAgainst","giveawaysFor","giveawaysAgainst","dZoneGiveawaysFor","dZoneGiveawaysAgainst","hitsFor","hitsAgainst","corsiPercentage","fenwickPercentage","xGoalsPercentage"].forEach(i=>{const o=e.map(l=>l[i]).filter(l=>l!=null&&!isNaN(l));o.length>0&&(this.leagueAverages[i]=o.reduce((l,c)=>l+c,0)/o.length)}),this.calculatePer60Averages()}calculatePer60Averages(){const e=this.dataProcessor.getTeamsBySituation("5on5");if(!e||e.length===0)return;const t=[];e.forEach(i=>{const l=(i.iceTime||1)/60;t.push({hdXgfPer60:(i.highDangerxGoalsFor||0)/l*60,hdXgaPer60:(i.highDangerxGoalsAgainst||0)/l*60,rebXgfPer60:(i.xGoalsFromActualReboundsOfShotsFor||0)/l*60,rebXgaPer60:(i.xGoalsFromActualReboundsOfShotsAgainst||0)/l*60,blocksPer60:(i.blockedShotAttemptsFor||0)/l*60,blocksAgainstPer60:(i.blockedShotAttemptsAgainst||0)/l*60})}),this.leagueAverages.hdXgfPer60=this.avg(t.map(i=>i.hdXgfPer60)),this.leagueAverages.hdXgaPer60=this.avg(t.map(i=>i.hdXgaPer60)),this.leagueAverages.rebXgfPer60=this.avg(t.map(i=>i.rebXgfPer60)),this.leagueAverages.rebXgaPer60=this.avg(t.map(i=>i.rebXgaPer60)),this.leagueAverages.blocksPer60=this.avg(t.map(i=>i.blocksPer60)),this.leagueAverages.blocksAgainstPer60=this.avg(t.map(i=>i.blocksAgainstPer60))}avg(e){return e.reduce((t,i)=>t+i,0)/e.length}getPercentileRank(e,t,i="5on5"){const o=this.dataProcessor.getTeamsBySituation(i);if(!o||o.length===0)return 50;const l=o.find(m=>m.team===e);if(!l||l[t]===void 0)return 50;const c=l[t],u=o.map(m=>m[t]).filter(m=>m!=null&&!isNaN(m)).sort((m,f)=>m-f),h=u.findIndex(m=>m>=c);return Math.round(h/u.length*100)}getLeagueRank(e,t,i="5on5",o=!0){const l=this.dataProcessor.getTeamsBySituation(i);if(!l||l.length===0)return null;const c=l.find(m=>m.team===e);return!c||c[t]===void 0?null:l.map(m=>({team:m.team,value:m[t]||0})).sort((m,f)=>o?f.value-m.value:m.value-f.value).findIndex(m=>m.team===e)+1}getHighDangerMetrics(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);if(!i)return null;const l=(i.iceTime||1)/60;return{hdXgFor:i.highDangerxGoalsFor||0,hdXgAgainst:i.highDangerxGoalsAgainst||0,hdXgfPer60:(i.highDangerxGoalsFor||0)/l*60,hdXgaPer60:(i.highDangerxGoalsAgainst||0)/l*60,hdShotsFor:i.highDangerShotsFor||0,hdShotsAgainst:i.highDangerShotsAgainst||0,hdGoalsFor:i.highDangerGoalsFor||0,hdGoalsAgainst:i.highDangerGoalsAgainst||0,hdConversionRate:i.highDangerShotsFor>0?i.highDangerGoalsFor/i.highDangerShotsFor*100:0,hdSavePercent:i.highDangerShotsAgainst>0?(i.highDangerShotsAgainst-i.highDangerGoalsAgainst)/i.highDangerShotsAgainst*100:0}}getReboundMetrics(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);if(!i)return null;const l=(i.iceTime||1)/60;return{xRebFor:i.xReboundsFor||0,xRebAgainst:i.xReboundsAgainst||0,rebXgFor:i.xGoalsFromActualReboundsOfShotsFor||0,rebXgAgainst:i.xGoalsFromActualReboundsOfShotsAgainst||0,rebXgfPer60:(i.xGoalsFromActualReboundsOfShotsFor||0)/l*60,rebXgaPer60:(i.xGoalsFromActualReboundsOfShotsAgainst||0)/l*60,rebGoalsFor:i.reboundGoalsFor||0,rebGoalsAgainst:i.reboundGoalsAgainst||0,rebConversion:i.xReboundsFor>0?i.reboundGoalsFor/i.xReboundsFor*100:0}}getPhysicalMetrics(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);if(!i)return null;const l=(i.iceTime||1)/60,c=i.shotAttemptsFor||0,u=i.shotAttemptsAgainst||0;return{blockedShots:i.blockedShotAttemptsFor||0,blockedShotsAgainst:i.blockedShotAttemptsAgainst||0,blockingRate:u>0?i.blockedShotAttemptsAgainst/u*100:0,blocksGiven:c>0?i.blockedShotAttemptsFor/c*100:0,hits:i.hitsFor||0,hitsAgainst:i.hitsAgainst||0,hitsPer60:(i.hitsFor||0)/l,takeaways:i.takeawaysFor||0,giveaways:i.giveawaysFor||0,takeawaysPer60:(i.takeawaysFor||0)/l,giveawaysPer60:(i.giveawaysFor||0)/l,dZoneGiveaways:i.dZoneGiveawaysFor||0,dZoneGiveawaysPer60:(i.dZoneGiveawaysFor||0)/l}}getDangerZoneBreakdown(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);return i?{offense:{low:{shots:i.lowDangerShotsFor||0,xGoals:i.lowDangerxGoalsFor||0,goals:i.lowDangerGoalsFor||0},medium:{shots:i.mediumDangerShotsFor||0,xGoals:i.mediumDangerxGoalsFor||0,goals:i.mediumDangerGoalsFor||0},high:{shots:i.highDangerShotsFor||0,xGoals:i.highDangerxGoalsFor||0,goals:i.highDangerGoalsFor||0}},defense:{low:{shots:i.lowDangerShotsAgainst||0,xGoals:i.lowDangerxGoalsAgainst||0,goals:i.lowDangerGoalsAgainst||0},medium:{shots:i.mediumDangerShotsAgainst||0,xGoals:i.mediumDangerxGoalsAgainst||0,goals:i.mediumDangerGoalsAgainst||0},high:{shots:i.highDangerShotsAgainst||0,xGoals:i.highDangerxGoalsAgainst||0,goals:i.highDangerGoalsAgainst||0}}}:null}getRegressionIndicators(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);if(!i)return null;const o=i.shotsOnGoalFor||0,l=i.goalsFor||0,c=i.shotsOnGoalAgainst||0,u=i.goalsAgainst||0,h=o>0?l/o*100:0,m=c>0?(c-u)/c*100:0,f=h+m,x=i.scoreVenueAdjustedxGoalsFor||i.xGoalsFor||0,b=o>0?x/o*100:0,S=h-b;return{pdo:f,shootingPct:h,savePct:m,expectedShPct:b,shPctDiff:S,goalsVsExpected:l-x,isUnderperforming:l<x*.9,isOverperforming:l>x*1.1,regressionExpected:Math.abs(S)>1.5?S:0}}getPossessionMetrics(e,t="5on5"){const i=this.dataProcessor.getTeamData(e,t);return i?{corsiPct:(i.corsiPercentage||.5)*100,fenwickPct:(i.fenwickPercentage||.5)*100,xGoalsPct:(i.xGoalsPercentage||.5)*100,shotAttempts:i.shotAttemptsFor||0,shotAttemptsAgainst:i.shotAttemptsAgainst||0,faceoffWins:i.faceOffsWonFor||0,faceoffLosses:i.faceOffsWonAgainst||0,faceoffPct:i.faceOffsWonFor+i.faceOffsWonAgainst>0?i.faceOffsWonFor/(i.faceOffsWonFor+i.faceOffsWonAgainst)*100:50}:null}getTier(e){return!e||e<1?"AVERAGE":e<=3?"ELITE":e<=10?"STRONG":e<=22?"AVERAGE":"WEAK"}getStatWithContext(e,t,i="5on5",o=!0){const l=this.dataProcessor.getTeamData(e,i);if(!l)return null;const c=l[t];if(c==null)return null;const u=this.getLeagueRank(e,t,i,o),h=this.getPercentileRank(e,t,i),m=this.leagueAverages[t]||0;return{value:c,rank:u,percentile:h,leagueAvg:m,vsLeague:c-m,vsLeaguePct:m>0?(c-m)/m*100:0,tier:this.getTier(u)}}getSpecialTeamsMetrics(e){const t=this.dataProcessor.getTeamData(e,"5on4"),i=this.dataProcessor.getTeamData(e,"4on5");return!t&&!i?null:{powerPlay:t?{xGF_per60:t.xGF_per60||0,hdXgF_per60:t.highDangerxGoalsFor?t.highDangerxGoalsFor/(t.iceTime/3600):0,rank:this.getLeagueRank(e,"xGF_per60","5on4",!0)}:null,penaltyKill:i?{xGA_per60:i.xGA_per60||0,hdXgA_per60:i.highDangerxGoalsAgainst?i.highDangerxGoalsAgainst/(i.iceTime/3600):0,rank:this.getLeagueRank(e,"xGA_per60","4on5",!1)}:null}}getGoalieMetrics(e,t){if(!t)return null;const i=t.getGoaliesByTeam(e);if(!i||i.length===0)return null;let o=0,l=0,c=0;return i.forEach(u=>{o+=u.goalsagainstextexpected||0,l+=u.highDangerSavePercentage||0,c++}),{avgGSAE:c>0?o/c:0,avgHDSavePercentage:c>0?l/c:0,goalieCount:c}}}class pP{constructor(e){this.analyzer=e}getKeyFactors(e,t,i="TOTAL"){return i==="TOTAL"?this.getTotalBetFactors(e,t):i==="MONEYLINE"?this.getMoneylineFactors(e,t):i==="PUCKLINE"?this.getPucklineFactors(e,t):[]}getTotalBetFactors(e,t){const i=[],o=this.calculateHighDangerFactor(e,t);o&&i.push(o);const l=this.calculateReboundFactor(e,t);l&&i.push(l);const c=this.calculatePhysicalFactor(e,t);c&&i.push(c);const u=this.calculateDisciplineFactor(e,t);u&&i.push(u);const h=this.calculateSpecialTeamsFactor(e,t);h&&i.push(h);const m=this.calculateRegressionFactor(e,t);return m&&i.push(m),i}calculateHighDangerFactor(e,t){const i=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(t);if(!i||!o)return null;const l=i.hdXgfPer60-o.hdXgaPer60,c=o.hdXgfPer60-i.hdXgaPer60,h=(l+c)/2*.25,m=this.analyzer.getLeagueRank(e,"highDangerxGoalsFor","5on5",!0),f=this.analyzer.getLeagueRank(t,"highDangerxGoalsAgainst","5on5",!1),x=l>c?e:c>l?t:"even";return{name:"High-Danger Shot Quality",importance:"CRITICAL",stars:3,impact:h,awayMetric:{value:i.hdXgfPer60,rank:m,label:`${e} Offense (HD-xGF/60)`,detail:`${i.hdGoalsFor} HD goals scored`},homeMetric:{value:o.hdXgaPer60,rank:f,label:`${t} Defense (HD-xGA/60)`,detail:`${o.hdGoalsAgainst} HD goals allowed`},leagueAvg:this.analyzer.leagueAverages.hdXgfPer60||.85,explanation:x==="even"?"Evenly matched high-danger shot creation and prevention. Both teams effective in key scoring areas.":`${x} has the edge in high-danger situations. ${Math.abs(h)>.05?`Quality scoring chances favor this matchup by ~${Math.abs(h*3).toFixed(1)} HD shots/game.`:"Marginal difference in quality chances."}`,dataPoints:{awayHDShots:i.hdShotsFor,homeHDAllowed:o.hdShotsAgainst,awayAdvantage:l,homeAdvantage:c}}}calculateReboundFactor(e,t){const i=this.analyzer.getReboundMetrics(e),o=this.analyzer.getReboundMetrics(t);if(!i||!o)return null;const l=i.rebXgfPer60-o.rebXgaPer60,c=o.rebXgfPer60-i.rebXgaPer60,h=(l+c)/2*.15,m=l>c?e:c>l?t:"even";return{name:"Rebound Control & Second Chances",importance:"CRITICAL",stars:3,impact:h,awayMetric:{value:i.rebXgfPer60,rank:this.analyzer.getLeagueRank(e,"xReboundsFor","5on5",!0),label:`${e} Offense (Reb xGF/60)`,detail:`${i.rebGoalsFor} rebound goals scored`},homeMetric:{value:o.rebXgaPer60,rank:this.analyzer.getLeagueRank(t,"xReboundsAgainst","5on5",!1),label:`${t} Defense (Reb xGA/60)`,detail:`${o.rebGoalsAgainst} rebound goals allowed`},leagueAvg:this.analyzer.leagueAverages.rebXgfPer60||10,explanation:m==="even"?"Evenly matched rebound creation and control. Expect typical second-chance opportunities.":`${m} creates more second-chance opportunities in this matchup. ${Math.abs(h)>.05?`Could add ~${Math.abs(h*2).toFixed(1)} extra scoring chances.`:"Minor impact on total scoring."}`,dataPoints:{awayRebGoals:i.rebGoalsFor,homeRebAllowed:o.rebGoalsAgainst,awayAdvantage:l,homeAdvantage:c}}}calculatePhysicalFactor(e,t){const i=this.analyzer.getPhysicalMetrics(e),o=this.analyzer.getPhysicalMetrics(t);if(!i||!o)return null;o.blockedShotsAgainst,i.blockedShotsAgainst;const l=this.analyzer.leagueAverages.blocksAgainstPer60||30,u=-(((i.blockingRate+o.blockingRate)/2-l)/5)*.08,h=this.analyzer.getLeagueRank(t,"blockedShotAttemptsAgainst","5on5",!0);return{name:"Shot Blocking & Physical Defense",importance:"HIGH",stars:2,impact:u,awayMetric:{value:i.blockingRate,label:`${e} Shot Block %`,detail:`${i.blockedShotsAgainst} blocks`},homeMetric:{value:o.blockingRate,rank:h,label:`${t} Shot Block %`,detail:`${o.blockedShotsAgainst} blocks`},leagueAvg:l,explanation:`Physical teams that block shots effectively reduce scoring chances. ${u<0?`Above-average blocking removes ${Math.abs(u*10).toFixed(1)} shot attempts/game.`:"Below-average blocking allows more dangerous attempts."}`,dataPoints:{awayBlocks:i.blockedShotsAgainst,homeBlocks:o.blockedShotsAgainst,awayHits:i.hits,homeHits:o.hits}}}calculateDisciplineFactor(e,t){const i=this.analyzer.getPhysicalMetrics(e),o=this.analyzer.getPhysicalMetrics(t);if(!i||!o)return null;const l=this.analyzer.leagueAverages.dZoneGiveawaysFor||12,c=(i.dZoneGiveawaysPer60+o.dZoneGiveawaysPer60)/2,h=(l-c)*.02,m=this.analyzer.leagueAverages.takeawaysFor||7,x=((i.takeawaysPer60+o.takeawaysPer60)/2-m)*.015,b=h+x;return{name:"Defensive Zone Discipline",importance:"HIGH",stars:2,impact:-Math.abs(b),awayMetric:{value:i.dZoneGiveaways,label:`${e} DZ Giveaways`,detail:`${i.takeaways} takeaways`},homeMetric:{value:o.dZoneGiveaways,label:`${t} DZ Giveaways`,detail:`${o.takeaways} takeaways`},leagueAvg:l,explanation:`Careful puck management in the defensive zone prevents high-danger chances. ${b<0?"Both teams are disciplined, limiting turnovers.":"Defensive mistakes create extra opportunities."}`,dataPoints:{awayDZGA:i.dZoneGiveaways,homeDZGA:o.dZoneGiveaways,awayTakeaways:i.takeaways,homeTakeaways:o.takeaways}}}calculateSpecialTeamsFactor(e,t){const i=this.analyzer.getHighDangerMetrics(e,"5on4"),o=this.analyzer.getHighDangerMetrics(t,"4on5"),l=this.analyzer.getHighDangerMetrics(t,"5on4"),c=this.analyzer.getHighDangerMetrics(e,"4on5");if(!i||!o||!l||!c)return null;const u=(i.hdXgfPer60||0)-(o.hdXgaPer60||0),h=(l.hdXgfPer60||0)-(c.hdXgaPer60||0),f=(u+h)/2*.07;return{name:"Special Teams Matchup",importance:"HIGH",stars:2,impact:f,awayMetric:{value:i.hdXgfPer60||0,label:`${e} PP HD-xGF/60`,detail:`vs ${o.hdXgaPer60?.toFixed(2)||0} PK`},homeMetric:{value:l.hdXgfPer60||0,label:`${t} PP HD-xGF/60`,detail:`vs ${c.hdXgaPer60?.toFixed(2)||0} PK`},leagueAvg:8.5,explanation:`Power plays account for ~7% of game time but can swing totals significantly. ${Math.abs(f)<.1?"Both matchups are balanced - PP and PK quality neutralize.":f>0?`Power plays have the advantage, adding ${f.toFixed(2)} expected goals.`:"Penalty kills are dominant, limiting PP opportunities."}`,dataPoints:{awayPPQuality:i.hdXgfPer60,homePKQuality:o.hdXgaPer60,homePPQuality:l.hdXgfPer60,awayPKQuality:c.hdXgaPer60}}}calculateRegressionFactor(e,t){const i=this.analyzer.getRegressionIndicators(e),o=this.analyzer.getRegressionIndicators(t);if(!i||!o)return null;const l=i.goalsVsExpected/(i.gamesSoFar||8),c=o.goalsVsExpected/(o.gamesSoFar||8),u=(l+c)*-.4;return{name:"Shooting Talent vs Luck",importance:"MODERATE",stars:1,impact:u,awayMetric:{value:i.shootingPct,label:`${e} Shooting %`,detail:`${i.pdo.toFixed(1)} PDO`},homeMetric:{value:o.shootingPct,label:`${t} Shooting %`,detail:`${o.pdo.toFixed(1)} PDO`},leagueAvg:i.expectedShPct||10,explanation:`Teams shooting ${i.isUnderperforming||o.isUnderperforming?"below":"above"} their expected rates should regress toward the mean. ${u<0?`Cold shooting is due for a bounce-back, adding ~${Math.abs(u).toFixed(2)} goals.`:"Hot shooting should cool off slightly."}`,dataPoints:{awayPDO:i.pdo,homePDO:o.pdo,awayGoalsVsXg:i.goalsVsExpected,homeGoalsVsXg:o.goalsVsExpected}}}generateStory(e,t,i){if(!e||e.length===0)return"Analyzing statistical matchup...";const l=[...e].sort((S,w)=>Math.abs(w.impact)-Math.abs(S.impact)).slice(0,3),c=e.reduce((S,w)=>S+w.impact,0),u=c<0;let h="";const m=l[0];let f=null,x=null;if(m.awayMetric&&m.homeMetric){const S=m.name.includes("Against")||m.name.includes("Defense")?m.awayMetric.value<m.homeMetric.value:m.awayMetric.value>m.homeMetric.value;f=S?t:i,x=S?i:t}if(f&&m.awayMetric&&m.homeMetric){const S=f===t?m.awayMetric.value:m.homeMetric.value,w=x===t?m.awayMetric.value:m.homeMetric.value;if(m.name.includes("Expected Goals")||m.name.includes("xGF")){const T=S>2.7?"elite":S>2.5?"strong":"solid";h+=`${f}'s ${T} offense (${S.toFixed(2)} xGF/60) `,h+=`faces ${x}'s defense (${w.toFixed(2)} xGA/60). `}else if(m.name.includes("Against")||m.name.includes("Defense")){const T=S<2.3?"elite":S<2.5?"strong":"solid";h+=`${f}'s ${T} defense (${S.toFixed(2)} xGA/60) `,h+=`shuts down ${x}'s attack (${w.toFixed(2)} xGF/60). `}else h+=`${f} holds edge in ${m.name.toLowerCase()}. `}else h+=`${m.name} heavily influences this matchup. `;if(l.length>1&&l[1].awayMetric&&l[1].homeMetric){const S=l[1],T=(S.name.includes("Against")||S.name.includes("Defense")?S.awayMetric.value<S.homeMetric.value:S.awayMetric.value>S.homeMetric.value)?t:i;if(S.name.includes("Power Play")||S.name.includes("PP"))h+=`${T}'s power play adds scoring threat. `;else if(S.name.includes("PDO")||S.name.includes("Regression")){const E=T===t?S.awayMetric.value:S.homeMetric.value;E>102?h+=`${T} (PDO ${E.toFixed(1)}) due for regression. `:E<98&&(h+=`${T} (PDO ${E.toFixed(1)}) primed for bounce-back. `)}}const b=Math.abs(c);if(b>.4){const S=u?"UNDER":"OVER";h+=`These matchup advantages create ${b.toFixed(1)}-goal edge favoring ${S}.`}else b>.2?h+=`Combined factors tilt toward ${u?"defensive":"offensive"} edge.`:h+="Evenly matched teams, market line is efficient.";return h}calculateTotalImpact(e){return!e||e.length===0?0:e.reduce((t,i)=>t+i.impact,0)}getMoneylineFactors(e,t){const i=[],o=this.calculateExpectedGoalsDifferential(e,t);o&&i.push(o);const l=this.calculateGoalieAdvantage(e,t);l&&i.push(l);const c=this.calculateOffensiveRating(e,t);c&&i.push(c);const u=this.calculateDefensiveRating(e,t);u&&i.push(u);const h=this.calculateSpecialTeamsEdge(e,t);h&&i.push(h);const m=this.calculatePossessionAdvantage(e,t);return m&&i.push(m),i}calculateExpectedGoalsDifferential(e,t){const i=this.analyzer.dataProcessor.getTeamData(e,"5on5"),o=this.analyzer.dataProcessor.getTeamData(t,"5on5");if(!i||!o)return null;const l=i.iceTime/60,c=o.iceTime/60,u=(i.xGoalsFor||0)/l*60,h=(i.xGoalsAgainst||0)/l*60,m=(o.xGoalsFor||0)/c*60,f=(o.xGoalsAgainst||0)/c*60,x=(u+f)/2,b=(m+h)/2,S=x-b;return{name:"Expected Goals",importance:"CRITICAL",stars:3,impact:S,awayMetric:{value:x,rank:this.analyzer.getLeagueRank(e,"xGoalsFor","5on5",!0),label:`${e} Expected Goals`,detail:`${u.toFixed(2)} xGF/60`},homeMetric:{value:b,rank:this.analyzer.getLeagueRank(t,"xGoalsFor","5on5",!0),label:`${t} Expected Goals`,detail:`${m.toFixed(2)} xGF/60`},leagueAvg:2.8,explanation:S>0?`${e} projects to score ${Math.abs(S).toFixed(2)} more goals based on shot quality.`:`${t} projects to score ${Math.abs(S).toFixed(2)} more goals based on shot quality.`,dataPoints:{awayXgf:u,awayXga:h,homeXgf:m,homeXga:f}}}calculateGoalieAdvantage(e,t){return null}calculateOffensiveRating(e,t){const i=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(t);if(!i||!o)return null;const l=i.hdXgfPer60||0,c=o.hdXgfPer60||0,u=l-c;return{name:"Offensive Rating",importance:"HIGH",stars:2,impact:u*.2,awayMetric:{value:l,rank:this.analyzer.getLeagueRank(e,"highDangerxGoalsFor","5on5",!0),label:`${e} HD-xGF/60`,detail:`${i.hdGoalsFor} HD goals`},homeMetric:{value:c,rank:this.analyzer.getLeagueRank(t,"highDangerxGoalsFor","5on5",!0),label:`${t} HD-xGF/60`,detail:`${o.hdGoalsFor} HD goals`},leagueAvg:.85,explanation:u>0?`${e} generates ${(u/c*100).toFixed(0)}% more high-danger chances.`:`${t} generates ${(Math.abs(u)/l*100).toFixed(0)}% more high-danger chances.`,dataPoints:{awayHDGoals:i.hdGoalsFor,homeHDGoals:o.hdGoalsFor}}}calculateDefensiveRating(e,t){const i=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(t);if(!i||!o)return null;const l=i.hdXgaPer60||0,c=o.hdXgaPer60||0,u=c-l;return{name:"Defensive Rating",importance:"HIGH",stars:2,impact:u*.2,awayMetric:{value:l,rank:this.analyzer.getLeagueRank(e,"highDangerxGoalsAgainst","5on5",!1),label:`${e} HD-xGA/60`,detail:`${i.hdGoalsAgainst} HD goals allowed`},homeMetric:{value:c,rank:this.analyzer.getLeagueRank(t,"highDangerxGoalsAgainst","5on5",!1),label:`${t} HD-xGA/60`,detail:`${o.hdGoalsAgainst} HD goals allowed`},leagueAvg:.85,explanation:u>0?`${e} allows ${(u/c*100).toFixed(0)}% fewer high-danger chances.`:`${t} allows ${(Math.abs(u)/l*100).toFixed(0)}% fewer high-danger chances.`,dataPoints:{awayHDAllowed:i.hdGoalsAgainst,homeHDAllowed:o.hdGoalsAgainst}}}calculateSpecialTeamsEdge(e,t){const i=this.analyzer.getHighDangerMetrics(e,"5on4"),o=this.analyzer.getHighDangerMetrics(t,"5on4");if(!i||!o)return null;const l=i.hdXgfPer60||0,c=o.hdXgfPer60||0,u=l-c;return{name:"Special Teams",importance:"MODERATE",stars:1,impact:u*.05,awayMetric:{value:l,label:`${e} PP Quality`,detail:`${l.toFixed(2)} HD-xGF/60`},homeMetric:{value:c,label:`${t} PP Quality`,detail:`${c.toFixed(2)} HD-xGF/60`},leagueAvg:8.5,explanation:u>0?`${e} has superior power play execution.`:`${t} has superior power play execution.`,dataPoints:{awayPP:l,homePP:c}}}calculatePossessionAdvantage(e,t){const i=this.analyzer.getPossessionMetrics(e),o=this.analyzer.getPossessionMetrics(t);if(!i||!o)return null;const l=i.corsiForPct||50,c=o.corsiForPct||50,u=l-c;return{name:"Possession & Control",importance:"MODERATE",stars:1,impact:u*.02,awayMetric:{value:l,label:`${e} Corsi%`,detail:`${i.shotsForPct?.toFixed(1)}% shots`},homeMetric:{value:c,label:`${t} Corsi%`,detail:`${o.shotsForPct?.toFixed(1)}% shots`},leagueAvg:50,explanation:u>0?`${e} controls ${Math.abs(u).toFixed(1)}% more of the play.`:`${t} controls ${Math.abs(u).toFixed(1)}% more of the play.`,dataPoints:{awayCF:l,homeCF:c,awaySF:i.shotsForPct,homeSF:o.shotsForPct}}}getPucklineFactors(e,t){return[]}}class yP{constructor(e,t,i){this.dataProcessor=e,this.goalieData=t,this.startingGoalies=i,this.teamAbbreviationMap={TB:"TBL",NJ:"NJD",LA:"LAK",SJ:"SJS",VEG:"VGK"},this.leagueAvg=this.calculateLeagueAverages(),this.defenseRankings=this.calculateDefenseRankings()}normalizeTeamAbbr(e){return this.teamAbbreviationMap[e]||e}calculateDefenseRankings(){const t=this.dataProcessor.getTeamsBySituation("all").filter(o=>o.xGA_per60!=null).sort((o,l)=>(o.xGA_per60||999)-(l.xGA_per60||999)),i={};return t.forEach((o,l)=>{i[o.team]={rank:l+1,xGA_per60:o.xGA_per60,teamName:o.name}}),console.log(" Defense Rankings Calculated:",Object.keys(i).length,"teams"),console.log("   Best Defense:",t[0]?.team,"xGA/60:",t[0]?.xGA_per60?.toFixed(2)),console.log("   Worst Defense:",t[t.length-1]?.team,"xGA/60:",t[t.length-1]?.xGA_per60?.toFixed(2)),i}calculateLeagueAverages(){const e=this.dataProcessor.getTeamsBySituation("all"),t=e.reduce((f,x)=>f+(x.xGA_per60||0),0),i=e.reduce((f,x)=>f+(x.shotsOnGoalAgainst_per60||0),0),o=e.reduce((f,x)=>f+(x.penalityMinutes||0)/(x.gamesPlayed||1),0),l=e.reduce((f,x)=>f+(x.shotAttempts_per60||0),0),c=t/e.length,u=i/e.length,h=o/e.length,m=l/e.length;return console.log(" League Averages Calculated:"),console.log("   xGA/60:",c.toFixed(2)),console.log("   Shots Against/60:",u.toFixed(1)),console.log("   PIM/game:",h.toFixed(1)),console.log("   Pace (SA/60):",m.toFixed(1)),{xGA_per60:c,shotsAgainst_per60:u,pim_per_game:h,pace_per60:m}}analyzeAllPlayers(e,t){return!e||!e.players?[]:e.players.map(i=>this.analyzePlayer(i,t)).filter(Boolean)}analyzePlayer(e,t){try{const i=this.normalizeTeamAbbr(e.opponent),o=this.normalizeTeamAbbr(e.team),l=this.dataProcessor.getTeamData(i,"all");if(!l)return console.warn(`No data found for opponent: ${e.opponent} (normalized: ${i})`),null;const c=this.getOpponentGoalie(e.matchup,e.opponent),u=this.findPlayerStats(e.name,t),h={defense:this.analyzeDefense(l),shotBlocking:this.analyzeShotBlocking(l),pace:this.analyzePace(l),ppOpportunity:this.analyzePPOpportunity(l),goalie:this.analyzeGoalie(c),rebounds:this.analyzeRebounds(c),playerShots:this.analyzePlayerShots(u)},m=this.calculateAdjustedEV(e.otEV,h),f=this.calculateMatchupGrade(h),x=this.generateReasons(h,l.name);return{...e,matchupFactors:h,adjustedEV:m,grade:f,reasons:x,opponentTeamName:l.name,opponentGoalieName:c?.name||"TBD",playerStats:u?{position:u.position,goalsPerGame:u.goalsPerGame,shotsPerGame:u.shotsPerGame,xGoalsPerGame:u.xGoalsPerGame,highDangerRate:u.highDangerRate,shootingPercentage:u.shootingPercentage}:null}}catch(i){return console.error(`Error analyzing player ${e.name}:`,i),null}}analyzeDefense(e){const t=e.xGA_per60||0,i=this.leagueAvg.xGA_per60,l=this.defenseRankings[e.team]?.rank||99;let c;l>24?c="A+":l>16?c="A":l>8?c="B":c="C";const u=((t/i-1)*100).toFixed(1);return console.log(`   Defense: ${e.team} rank #${l}, xGA/60: ${t.toFixed(2)} (${u}% vs avg)`),{rank:l,grade:c,xGA_per60:t.toFixed(2),vsLeague:`${u>0?"+":""}${u}%`,isFavorable:l>16}}analyzeShotBlocking(e){const t=e.blockedShotsAgainst||0,i=e.gamesPlayed||1,o=t/i,l=o<12.5;return{blocksPerGame:o.toFixed(1),level:o<11?"Low":o<13?"Average":"High",isFavorable:l}}analyzePace(e){const t=e.shotAttempts_per60||0,i=this.leagueAvg.pace_per60,o=t/i,l=((o-1)*100).toFixed(1);let c;return o>1.05?c="Fast":o<.95?c="Slow":c="Average",console.log(`   Pace: ${e.team} ${t.toFixed(1)} SA/60 (${l}% vs avg) - ${c}`),{pace:t.toFixed(1),vsLeague:`${l>0?"+":""}${l}%`,level:c,isFavorable:o>1.03}}analyzePPOpportunity(e){const t=e.penalityMinutes||0,i=e.gamesPlayed||1,o=t/i,l=o>9;let c;return o>12?c="High":o<8?c="Low":c="Average",console.log(`   PP Opp: ${e.team} ${o.toFixed(1)} PIM/gm - ${c}`),{pimPerGame:o.toFixed(1),level:c,isFavorable:l}}analyzeGoalie(e){if(!e||e.gsae===void 0||e.gsae===null)return{name:"TBD",gsae:0,level:"Unknown",isFavorable:!1};const t=typeof e.gsae=="number"?e.gsae:parseFloat(e.gsae)||0;let i;return t>5?i="Elite":t>2?i="Above Avg":t>-2?i="Average":t>-5?i="Below Avg":i="Struggling",{name:e.name,gsae:parseFloat(t.toFixed(1)),level:i,isFavorable:t<-2}}analyzeRebounds(e){if(!e)return{rate:"Unknown",level:"Unknown",isFavorable:!1};const t=.85;return{rate:t.toFixed(2),level:t>.9?"High":t<.8?"Low":"Average",isFavorable:t>.88}}analyzePlayerShots(e){if(!e)return{shotsPerGame:"N/A",highDangerRate:"N/A",level:"Unknown",isFavorable:!1};const t=e.shotsPerGame||0,i=e.highDangerRate||0;let o;return t>3.5&&i>.35?o="Elite Volume":t>2.5?o="Good Volume":o="Low Volume",{shotsPerGame:t.toFixed(1),highDangerRate:(i*100).toFixed(0)+"%",level:o,isFavorable:t>2.5}}calculateAdjustedEV(e,t){let i=parseFloat(e.replace("%","").replace("+",""));return t.defense.isFavorable&&(i+=2),t.goalie.isFavorable&&(i+=1.5),t.ppOpportunity.isFavorable&&(i+=1),t.pace.isFavorable&&(i+=.5),t.playerShots.isFavorable&&(i+=.5),t.defense.grade==="C"&&(i-=2),t.goalie.level==="Elite"&&(i-=1.5),`${i>0?"+":""}${i.toFixed(1)}%`}calculateMatchupGrade(e){const t=[e.defense.isFavorable,e.goalie.isFavorable,e.ppOpportunity.isFavorable,e.pace.isFavorable,e.playerShots.isFavorable].filter(Boolean).length;return t>=4?"A+":t===3?"A":t===2?"B+":"B"}generateReasons(e,t){const i=[];return e.defense.isFavorable&&i.push(`Faces #${e.defense.rank} ranked defense (${e.defense.vsLeague} vs league avg)`),e.goalie.isFavorable&&i.push(`${e.goalie.name} allowing ${e.goalie.gsae} GSAE (${e.goalie.level})`),e.ppOpportunity.isFavorable&&i.push(`${t} takes ${e.ppOpportunity.pimPerGame} PIM/game (PP opportunity)`),e.pace.isFavorable&&i.push(`Fast-paced game (${e.pace.vsLeague} vs league avg shots)`),e.playerShots.isFavorable&&i.push(`Player generates ${e.playerShots.shotsPerGame} shots/game (${e.playerShots.level})`),i.length===0&&i.push("Average matchup - no standout favorable factors"),i}getOpponentGoalie(e,t){if(!this.startingGoalies||!this.startingGoalies.games)return null;const i=this.startingGoalies.games.find(l=>l.matchup===e);if(!i)return null;const o=i.away.team===t?i.away:i.home.team===t?i.home:null;if(!o||!o.goalie)return null;if(this.goalieData){const l=this.goalieData.find(c=>c.name&&o.goalie&&c.situation==="all"&&c.name.toLowerCase().includes(o.goalie.toLowerCase()));if(l){const c=parseFloat(l.xGoals)||0,u=parseFloat(l.goals)||0,h=c-u;return console.log(`    Goalie: ${l.name} - xG: ${c.toFixed(1)}, GA: ${u.toFixed(1)}, GSAE: ${h.toFixed(1)}`),{name:o.goalie,gsae:h}}}return console.log(`     Goalie ${o.goalie} not found in goalies.csv`),{name:o.goalie,gsae:0}}findPlayerStats(e,t){if(!t||t.length===0)return null;const i=t.find(f=>{if(!f.name||f.situation!=="all")return!1;const x=f.name.toLowerCase(),b=e.toLowerCase();return x.includes(b)||b.includes(x)});if(!i)return console.warn(`     Player not found in skaters.csv: ${e}`),null;const o=parseFloat(i.games_played)||1,l=parseFloat(i.I_F_goals)||0,c=parseFloat(i.I_F_shotsOnGoal)||0,u=parseFloat(i.I_F_xGoals)||0,h=parseFloat(i.I_F_highDangerxGoals)||0,m=c>0?l/c*100:0;return console.log(`    Found player: ${i.name} - ${c} shots / ${o} GP = ${(c/o).toFixed(1)} SOG/gm, ${m.toFixed(1)}% shooting`),{name:i.name,team:i.team,position:i.position,goalsPerGame:l/o,shotsPerGame:c/o,xGoalsPerGame:u/o,highDangerRate:u>0?h/u:0,shootingPercentage:m,gamesPlayed:o}}getMatchupIcon(e){switch(e){case"A+":return"";case"A":return"";case"B+":return"";default:return""}}}async function xP(){try{const r="/player_props.json";console.log(" Loading player props from:",r);const e=await fetch(r);if(console.log(" Response status:",e.status,e.statusText),!e.ok)return console.warn(" No player props data available yet (HTTP",e.status,")"),null;const t=await e.json();return console.log(" Loaded player props:",t.count||t.players?.length||0,"players"),t}catch(r){return console.error(" Error loading player props:",r),null}}async function bP(){try{const r=(await Is(async()=>{const{default:i}=await Promise.resolve().then(()=>c8);return{default:i}},void 0)).default,t=await(await fetch("/skaters.csv")).text();return new Promise(i=>{r.parse(t,{header:!0,skipEmptyLines:!0,complete:o=>{console.log(` Loaded ${o.data.length} skaters`),i(o.data)}})})}catch(r){return console.error("Error loading skaters data:",r),[]}}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SP=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),bw=r=>{const e=SP(r);return e.charAt(0).toUpperCase()+e.slice(1)},hE=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),wP=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=O.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c,...u},h)=>O.createElement("svg",{ref:h,...TP,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:hE("lucide",o),...!l&&!wP(u)&&{"aria-hidden":"true"},...u},[...c.map(([m,f])=>O.createElement(m,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(r,e)=>{const t=O.forwardRef(({className:i,...o},l)=>O.createElement(jP,{ref:l,iconNode:e,className:hE(`lucide-${vP(bw(r))}`,`lucide-${r}`,i),...o}));return t.displayName=bw(r),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ou=Je("activity",AP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],EP=Je("arrow-down",kP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gE=Je("arrow-left",_P);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],vw=Je("arrow-right-left",RP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Iu=Je("arrow-right",CP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],mE=Je("arrow-up",IP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Tm=Je("award",FP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Wl=Je("book-open",DP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],$g=Je("bookmark",PP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Wn=Je("calendar",BP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ls=Je("chart-column",zP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],MP=Je("chart-line",OP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],au=Je("check",LP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wo=Je("chevron-down",NP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dx=Je("chevron-left",$P);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ux=Je("chevron-right",VP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Go=Je("chevron-up",WP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],o0=Je("circle-alert",GP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],a0=Je("circle-check-big",HP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hx=Je("circle-question-mark",UP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],YP=Je("circle-x",qP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jm=Je("clock",KP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],QP=Je("code",XP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gx=Je("copy",ZP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],R1=Je("credit-card",JP);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],tc=Je("crown",eB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],mx=Je("database",tB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],C1=Je("dollar-sign",rB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vg=Je("download",nB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],sB=Je("external-link",iB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],lu=Je("flame",oB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],fE=Je("gift",aB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ep=Je("info",lB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],dB=Je("lightbulb",cB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Sw=Je("link-2",uB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],gB=Je("list",hB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Bo=Je("lock",mB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Wg=Je("log-out",fB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],yB=Je("mail",pB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],bB=Je("menu",xB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ww=Je("message-circle",vB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M5 12h14",key:"1ays0h"}]],pE=Je("minus",SB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],TB=Je("phone",wB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gg=Je("refresh-cw",jB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],Hg=Je("scale",AB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fx=Je("search",kB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],I1=Je("share-2",EB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],sn=Je("shield",_B);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],F1=Je("snowflake",RB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Wd=Je("sparkles",CB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yE=Je("star",IB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fr=Je("target",FB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Tw=Je("trending-down",DB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ar=Je("trending-up",PB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ai=Je("triangle-alert",BB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],xE=Je("trophy",zB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],jw=Je("twitter",OB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],To=Je("user",MB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],NB=Je("users",LB);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ha=Je("x",$B);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],zo=Je("zap",VB),_p=(r,e)=>{tn&&Zo(tn,r,e)};function ls(){const[r,e]=O.useState(null),[t,i]=O.useState(!0),[o,l]=O.useState(null);return O.useEffect(()=>{const h=xF(Ng,async m=>{if(m){e({uid:m.uid,email:m.email,displayName:m.displayName,photoURL:m.photoURL,emailVerified:m.emailVerified});try{const f=$r(St,"users",m.uid);await dc(f,{lastLoginAt:Fs()},{merge:!0})}catch(f){console.error("Error updating last login:",f)}}else e(null);i(!1)});return()=>h()},[]),{user:r,loading:t,error:o,signInWithGoogle:async()=>{try{l(null),i(!0);const m=(await MF(Ng,aE)).user,f=$r(St,"users",m.uid),b=!(await Vs(f)).exists();await dc(f,{email:m.email,displayName:m.displayName,photoURL:m.photoURL,...b?{tier:"free",status:"active",createdAt:Fs(),stripeCustomerId:null,subscriptionId:null,trialEndsAt:null}:{},lastLoginAt:Fs()},{merge:!0}),b?(_p("sign_up",{method:"google"}),console.log(" New user signed up:",m.email)):(_p("sign_in",{method:"google"}),console.log(" User signed in:",m.email));try{const{migrateAnonymousSpins:S}=await Is(async()=>{const{migrateAnonymousSpins:w}=await import("./spinTracker-BnSdwEot.js");return{migrateAnonymousSpins:w}},__vite__mapDeps([0,1,2,3]));await S(m.uid)}catch(S){console.error("Error migrating anonymous spins:",S)}return{user:m,isNewUser:b}}catch(h){throw console.error("Error signing in with Google:",h),l(h.message),h.code==="auth/popup-closed-by-user"?console.log("User closed the sign-in popup"):h.code==="auth/popup-blocked"&&console.log("Sign-in popup was blocked by browser"),h}finally{i(!1)}},signOut:async()=>{try{await bF(Ng),_p("sign_out"),console.log(" User signed out")}catch(h){throw console.error("Error signing out:",h),l(h.message),h}},isAuthenticated:!!r}}function Jo(r){const[e,t]=O.useState(null),[i,o]=O.useState(!0),[l,c]=O.useState(null),[u,h]=O.useState(!1),[m,f]=O.useState(null),x=O.useCallback(async(b=!1)=>{if(r?.email)try{b?(console.log(" Force syncing subscription from Stripe..."),f("syncing")):console.log("Checking subscription status from Stripe...");let S=null;try{const E=await Vs($r(St,"users",r.uid));E.exists()&&E.data().stripeEmail&&(S=E.data().stripeEmail,console.log("Found linked Stripe email:",S))}catch(E){console.warn("Could not fetch alternate email:",E)}const T=await Uy(cx,"checkSubscription")({email:r.email,alternateEmail:S});return console.log("Subscription result from Stripe:",T.data),t(T.data),c(Date.now()),o(!1),b&&f(T.data?.isActive?"synced":"no_subscription"),T.data}catch(S){return console.error("Error checking subscription from Stripe:",S),f("error"),t({tier:"free",status:"active",isActive:!1,isTrial:!1,daysRemaining:0,error:S.message}),o(!1),null}},[r?.email]);return O.useEffect(()=>{if(!r?.uid){t({tier:"free",status:"active",isActive:!1,isTrial:!1,daysRemaining:0}),o(!1);return}x();const b=$r(St,"users",r.uid),S=Os(b,T=>{if(T.exists()){const E=T.data();let A=0,_=!1;if(E.trialEndsAt&&E.status==="trialing"){const M=E.trialEndsAt.toDate()-new Date;A=Math.ceil(M/(1e3*60*60*24)),_=A>0}const B=["active","trialing"].includes(E.status)&&["scout","elite","pro"].includes(E.tier);t({tier:E.tier||"free",status:E.status||"active",stripeCustomerId:E.stripeCustomerId,subscriptionId:E.subscriptionId,trialEndsAt:E.trialEndsAt,isActive:B,isTrial:_,daysRemaining:Math.max(0,A),createdAt:E.createdAt,lastLoginAt:E.lastLoginAt})}else t({tier:"free",status:"active",isActive:!1,isTrial:!1,daysRemaining:0});o(!1)},T=>{console.error("Error fetching subscription:",T),o(!1)}),w=setInterval(()=>{Date.now()-(l||0)>300*1e3&&(console.log("Refreshing subscription from Stripe (periodic check)..."),x())},60*1e3);return()=>{S(),clearInterval(w)}},[r?.uid,r?.email]),O.useEffect(()=>{const b=localStorage.getItem("nhlsavant_has_visited");h(!!b),b||localStorage.setItem("nhlsavant_has_visited","true")},[]),{...e,loading:i,isPremium:e?.isActive||!1,isFree:e?.tier==="free"||!e?.isActive,isReturningUser:u,syncStatus:m,refresh:x}}async function px(r,e){if(!r||!["scout","elite","pro"].includes(r)){console.error("Invalid tier:",r),alert("Invalid subscription tier.");return}if(!e?.uid){console.error("No authenticated user"),alert("Please sign in first.");return}try{console.log("Creating checkout session for tier:",r);const i=await Uy(cx,"createCheckoutSession")({tier:r});if(i.data?.url)window.location.href=i.data.url;else throw new Error("No checkout URL returned")}catch(t){console.error("Checkout error:",t),(t?.message||"").includes("already have an active subscription")?alert("You already have an active subscription. Manage it from your Account page."):alert("Unable to start checkout. Please try again or contact support.")}}const bE=({isOpen:r,onClose:e,tier:t=null})=>{const{signInWithGoogle:i,loading:o,error:l}=ls(),[c,u]=O.useState(!1);if(!r)return null;const h=async()=>{u(!0);try{const x=await i();x?t?(console.log("User signed in, creating checkout session for tier:",t),await px(t,x)):setTimeout(()=>{e(),u(!1)},500):u(!1)}catch(x){console.error("Sign in failed:",x),u(!1)}},m={scout:"Scout",elite:"Elite",pro:"SAVANT PRO"},f=n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2147483647,padding:"1rem",animation:"fadeIn 0.2s ease-out",overflow:"auto",isolation:"isolate",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"},onClick:e,children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"20px",padding:window.innerWidth<640?"1.5rem":"2.5rem",maxWidth:"480px",width:"100%",margin:"auto",position:"relative",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",animation:"slideUp 0.3s ease-out",maxHeight:"90vh",overflowY:"auto"},onClick:x=>x.stopPropagation(),children:[n.jsx("button",{onClick:e,disabled:c||o,style:{position:"absolute",top:window.innerWidth<640?"1rem":"1.5rem",right:window.innerWidth<640?"1rem":"1.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",width:window.innerWidth<640?"32px":"36px",height:window.innerWidth<640?"32px":"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:c||o?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:c||o?.3:1},onMouseEnter:x=>{!c&&!o&&(x.currentTarget.style.background="rgba(255, 255, 255, 0.1)",x.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)")},onMouseLeave:x=>{x.currentTarget.style.background="rgba(255, 255, 255, 0.05)",x.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)"},children:n.jsx(Ha,{size:window.innerWidth<640?18:20,color:"#E2E8F0"})}),n.jsxs("div",{style:{textAlign:"center",marginBottom:window.innerWidth<640?"1.5rem":"2rem"},children:[n.jsx("div",{style:{fontSize:window.innerWidth<640?"2rem":"2.5rem",fontWeight:"800",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:" NHL Savant"}),n.jsx("p",{style:{fontSize:window.innerWidth<640?"1rem":"1.125rem",fontWeight:"600",color:"#F1F5F9",margin:0},children:t?`Sign in to unlock ${m[t]}`:"Sign in to continue"})]}),t&&n.jsx("div",{style:{background:"rgba(212, 175, 55, 0.08)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"12px",padding:"1.25rem",marginBottom:"2rem"},children:n.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(241, 245, 249, 0.9)",lineHeight:"1.6"},children:[n.jsx("div",{style:{fontWeight:"600",marginBottom:"0.75rem",color:"#D4AF37"},children:" What you'll get:"}),n.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[n.jsx("li",{children:"All daily +EV picks"}),n.jsx("li",{children:"Performance tracking"}),n.jsx("li",{children:"Expert analysis & insights"}),n.jsx("li",{children:"Complete transparency"}),t==="elite"&&n.jsx("li",{children:"Priority support"}),t==="pro"&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:"Priority support"}),n.jsx("li",{children:"Annual performance reports"})]})]})]})}),n.jsx("button",{onClick:h,disabled:c||o,style:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%)",border:"none",borderRadius:"12px",color:"#0A0E27",fontSize:"1rem",fontWeight:"700",cursor:c||o?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 14px 0 rgba(212, 175, 55, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",opacity:c||o?.7:1,marginBottom:"1rem"},onMouseEnter:x=>{!c&&!o&&(x.currentTarget.style.transform="translateY(-2px)",x.currentTarget.style.boxShadow="0 6px 20px 0 rgba(212, 175, 55, 0.5)")},onMouseLeave:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="0 4px 14px 0 rgba(212, 175, 55, 0.4)"},children:c||o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"spinner",style:{width:"20px",height:"20px",border:"3px solid rgba(10, 14, 39, 0.3)",borderTopColor:"#0A0E27",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t?"Signing in & starting checkout...":"Signing in..."]}):n.jsxs(n.Fragment,{children:[n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),n.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),n.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),n.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),t?"Sign in & Start Free Trial":"Continue with Google"]})}),l&&n.jsx("div",{style:{padding:"0.875rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#FCA5A5",fontSize:"0.875rem",marginBottom:"1rem",textAlign:"center"},children:l}),n.jsxs("div",{style:{textAlign:"center",fontSize:window.innerWidth<640?"0.75rem":"0.813rem",color:"rgba(241, 245, 249, 0.6)",lineHeight:"1.5"},children:[n.jsx("div",{style:{marginBottom:"0.5rem"},children:" Secure sign-in with Google"}),n.jsx("div",{style:{fontSize:window.innerWidth<640?"0.688rem":"0.813rem"},children:"26% ROI, 38% Kelly (as of Nov 6) | Tracked Since Oct 2025 | Cancel Anytime"})]})]}),n.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]});return K_.createPortal(f,document.body)},WB=()=>{const r=nj(),[e,t]=O.useState(!1),[i,o]=O.useState(null),[l,c]=O.useState(!1),[u,h]=O.useState(!1),{user:m,signOut:f,loading:x}=ls(),{tier:b,isPremium:S,isTrial:w,daysRemaining:T,loading:E}=Jo(m),A=[{path:"/",label:"Today's Games",icon:fr},{path:"/top-scorers",label:"Top Scorers",icon:lu},{path:"/matchup-insights",label:"Hot Takes",icon:MP},{path:"/dashboard",label:"Analytics Hub",icon:Ls},{path:"/performance",label:"Performance",icon:ar},{path:"/methodology",label:"Methodology",icon:Wl},{path:"/faq",label:"FAQ",icon:hx},{path:"/data",label:"Data",icon:mx},{path:"/inspector",label:"Data Inspector",icon:fx}];return n.jsxs("nav",{style:{position:"sticky",top:0,zIndex:1e3,background:"rgba(17, 24, 39, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255, 255, 255, 0.06)",padding:"0.875rem 1rem"},children:[n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[n.jsxs(vt,{to:"/",style:{fontSize:"1.125rem",fontWeight:"700",color:"#D4AF37",textDecoration:"none",display:"flex",alignItems:"center",gap:"0.5rem",letterSpacing:"-0.015em",transition:"color 0.2s ease",flexShrink:0},onMouseEnter:_=>{_.currentTarget.style.color="#FFD700"},onMouseLeave:_=>{_.currentTarget.style.color="#D4AF37"},children:[" ",n.jsx("span",{style:{display:window.innerWidth<400?"none":"inline"},children:"NHL Savant"})]}),n.jsxs(vt,{to:"/basketball",className:"basketball-nav-btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",background:r.pathname==="/basketball"?"linear-gradient(135deg, #FF6B35 0%, #F7931E 100%)":"linear-gradient(135deg, rgba(255, 107, 53, 0.15) 0%, rgba(247, 147, 30, 0.1) 100%)",border:r.pathname==="/basketball"?"1px solid rgba(255, 107, 53, 0.4)":"1px solid rgba(255, 107, 53, 0.25)",borderRadius:"10px",color:r.pathname==="/basketball"?"#FFFFFF":"#FF6B35",textDecoration:"none",fontSize:"0.813rem",fontWeight:"700",letterSpacing:"-0.01em",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",flexShrink:0,boxShadow:r.pathname==="/basketball"?"0 4px 12px rgba(255, 107, 53, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.2)":"0 2px 8px rgba(255, 107, 53, 0.1)",marginLeft:"auto",marginRight:"0.5rem"},onMouseEnter:_=>{r.pathname!=="/basketball"&&(_.currentTarget.style.background="linear-gradient(135deg, rgba(255, 107, 53, 0.25) 0%, rgba(247, 147, 30, 0.15) 100%)",_.currentTarget.style.borderColor="rgba(255, 107, 53, 0.4)",_.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:_=>{r.pathname!=="/basketball"&&(_.currentTarget.style.background="linear-gradient(135deg, rgba(255, 107, 53, 0.15) 0%, rgba(247, 147, 30, 0.1) 100%)",_.currentTarget.style.borderColor="rgba(255, 107, 53, 0.25)",_.currentTarget.style.transform="translateY(0)")},children:[n.jsx("span",{style:{fontSize:"1rem",lineHeight:1},children:""}),n.jsx("span",{style:{display:window.innerWidth<640?"none":"inline",whiteSpace:"nowrap"},children:"College BB"})]}),n.jsxs("div",{className:"desktop-nav",style:{display:"none",gap:"0.625rem",alignItems:"center"},children:[A.map(_=>{const B=_.icon,I=r.pathname===_.path,L=i===_.path;return n.jsxs(vt,{to:_.path,onMouseEnter:()=>o(_.path),onMouseLeave:()=>o(null),style:{padding:"0.625rem 1.125rem",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"600",textDecoration:"none",color:I?"#D4AF37":L?"#FFD700":"rgba(255, 255, 255, 0.7)",background:I?"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)":L?"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.03) 100%)":"transparent",border:I?"1px solid rgba(212, 175, 55, 0.3)":"1px solid transparent",boxShadow:I?"0 4px 12px rgba(212, 175, 55, 0.2), 0 0 20px rgba(212, 175, 55, 0.1) inset":L?"0 4px 12px rgba(255, 255, 255, 0.1)":"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5rem",letterSpacing:"0.02em",transform:L?"translateY(-2px)":"translateY(0)",position:"relative",overflow:"hidden"},children:[I&&n.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent)",animation:"shimmer 3s infinite"}}),n.jsx(B,{size:16,strokeWidth:2.5}),_.label]},_.path)}),n.jsx(vt,{to:"/basketball",style:{padding:"0.625rem 1.125rem",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"600",textDecoration:"none",color:r.pathname==="/basketball"?"#FF8C42":"rgba(255, 140, 66, 0.8)",background:r.pathname==="/basketball"?"linear-gradient(135deg, rgba(255, 140, 66, 0.15) 0%, rgba(255, 140, 66, 0.08) 100%)":"transparent",border:r.pathname==="/basketball"?"1px solid rgba(255, 140, 66, 0.3)":"1px solid rgba(255, 140, 66, 0.2)",boxShadow:r.pathname==="/basketball"?"0 4px 12px rgba(255, 140, 66, 0.2)":"none",transition:"all 0.3s ease",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"0.5rem"},onMouseEnter:_=>{_.currentTarget.style.transform="translateY(-2px)",_.currentTarget.style.boxShadow="0 4px 12px rgba(255, 140, 66, 0.3)",_.currentTarget.style.background="linear-gradient(135deg, rgba(255, 140, 66, 0.12) 0%, rgba(255, 140, 66, 0.05) 100%)"},onMouseLeave:_=>{_.currentTarget.style.transform="translateY(0)",r.pathname==="/basketball"?(_.currentTarget.style.boxShadow="0 4px 12px rgba(255, 140, 66, 0.2)",_.currentTarget.style.background="linear-gradient(135deg, rgba(255, 140, 66, 0.15) 0%, rgba(255, 140, 66, 0.08) 100%)"):(_.currentTarget.style.boxShadow="none",_.currentTarget.style.background="transparent")},children:" CBB Picks"}),m&&!S&&!x&&!E&&n.jsxs(vt,{to:"/pricing",style:{padding:"0.625rem 1.125rem",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"700",textDecoration:"none",color:"#0A0E27",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%)",border:"none",boxShadow:"0 4px 12px rgba(212, 175, 55, 0.3)",transition:"all 0.3s ease",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5rem",animation:"pulse 2s ease-in-out infinite"},onMouseEnter:_=>{_.currentTarget.style.transform="translateY(-2px)",_.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.5)"},onMouseLeave:_=>{_.currentTarget.style.transform="translateY(0)",_.currentTarget.style.boxShadow="0 4px 12px rgba(212, 175, 55, 0.3)"},children:[n.jsx(tc,{size:16,strokeWidth:2.5}),"Upgrade"]}),!x&&(m?n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:()=>c(!l),style:{padding:"0.5rem",borderRadius:"50%",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)",border:"2px solid rgba(212, 175, 55, 0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px"},onMouseEnter:_=>{_.currentTarget.style.borderColor="rgba(212, 175, 55, 0.5)",_.currentTarget.style.transform="scale(1.05)"},onMouseLeave:_=>{_.currentTarget.style.borderColor="rgba(212, 175, 55, 0.3)",_.currentTarget.style.transform="scale(1)"},children:m.photoURL?n.jsx("img",{src:m.photoURL,alt:m.displayName||"User",style:{width:"100%",height:"100%",borderRadius:"50%"}}):n.jsx(To,{size:20,color:"#D4AF37",strokeWidth:2.5})}),l&&n.jsxs("div",{style:{position:"absolute",top:"calc(100% + 0.5rem)",right:0,background:"linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"12px",padding:"0.75rem",minWidth:"220px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"slideDown 0.2s ease-out",zIndex:1e3},onMouseLeave:()=>c(!1),children:[n.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid rgba(148, 163, 184, 0.1)",marginBottom:"0.5rem"},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#F1F5F9",marginBottom:"0.25rem"},children:m.displayName||m.email}),n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(241, 245, 249, 0.6)"},children:S?n.jsxs("span",{style:{color:"#D4AF37",fontWeight:"600"},children:[b?.toUpperCase()," ",w&&`(${T}d trial)`]}):n.jsx("span",{children:"Free Tier"})})]}),n.jsxs(vt,{to:"/account",onClick:()=>c(!1),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",textDecoration:"none",color:"rgba(241, 245, 249, 0.9)",fontSize:"0.875rem",fontWeight:"500",transition:"all 0.2s ease",marginBottom:"0.25rem"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:_=>{_.currentTarget.style.background="transparent"},children:[n.jsx(To,{size:16}),"Account"]}),S&&n.jsxs(vt,{to:"/account",onClick:()=>c(!1),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",textDecoration:"none",color:"rgba(241, 245, 249, 0.9)",fontSize:"0.875rem",fontWeight:"500",transition:"all 0.2s ease",marginBottom:"0.25rem"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:_=>{_.currentTarget.style.background="transparent"},children:[n.jsx(R1,{size:16}),"Billing"]}),n.jsxs("button",{onClick:()=>{f(),c(!1)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",background:"transparent",border:"none",color:"#EF4444",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",width:"100%",textAlign:"left"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:_=>{_.currentTarget.style.background="transparent"},children:[n.jsx(Wg,{size:16}),"Sign Out"]})]})]}):n.jsxs("button",{onClick:()=>h(!0),style:{padding:"0.625rem 1.125rem",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"600",background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.3)",color:"#60A5FA",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(59, 130, 246, 0.25)",_.currentTarget.style.borderColor="rgba(59, 130, 246, 0.5)",_.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:_=>{_.currentTarget.style.background="rgba(59, 130, 246, 0.15)",_.currentTarget.style.borderColor="rgba(59, 130, 246, 0.3)",_.currentTarget.style.transform="translateY(0)"},children:[n.jsx(To,{size:16,strokeWidth:2.5}),"Sign In"]}))]}),n.jsxs("div",{className:"mobile-auth",style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"auto"},children:[!x&&!m&&n.jsxs("button",{onClick:()=>h(!0),style:{padding:"0.4rem 0.75rem",borderRadius:"8px",fontSize:"0.75rem",fontWeight:"600",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",border:"none",color:"#0A0E27",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.25rem",boxShadow:"0 2px 8px rgba(212, 175, 55, 0.3)",flexShrink:0},children:[n.jsx(To,{size:13,strokeWidth:2.5}),n.jsx("span",{className:"sign-in-text",children:"Sign In"})]}),m&&n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:()=>{c(!l),t(!1)},style:{padding:"0",borderRadius:"50%",background:m.photoURL?"transparent":"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)",border:m.photoURL?"2px solid rgba(212, 175, 55, 0.4)":"2px solid rgba(212, 175, 55, 0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",flexShrink:0,overflow:"hidden"},children:m.photoURL?n.jsx("img",{src:m.photoURL,alt:m.displayName||"User",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):n.jsx(To,{size:16,color:"#D4AF37",strokeWidth:2.5})}),l&&n.jsxs("div",{className:"mobile-user-dropdown",style:{position:"absolute",top:"calc(100% + 0.5rem)",right:0,background:"linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"10px",padding:"0.5rem",minWidth:"180px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"slideDown 0.2s ease-out",zIndex:1001},onClick:_=>_.stopPropagation(),children:[n.jsxs("div",{style:{padding:"0.5rem",borderBottom:"1px solid rgba(148, 163, 184, 0.08)",marginBottom:"0.375rem"},children:[n.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"600",color:"#F1F5F9",marginBottom:"0.15rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:m.displayName||m.email?.split("@")[0]}),n.jsx("div",{style:{fontSize:"0.7rem",color:"rgba(241, 245, 249, 0.5)"},children:S?n.jsx("span",{style:{color:"#D4AF37",fontWeight:"600"},children:b?.toUpperCase()}):n.jsx("span",{children:"Free"})})]}),n.jsxs(vt,{to:"/account",onClick:()=>c(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"6px",textDecoration:"none",color:"rgba(241, 245, 249, 0.9)",fontSize:"0.8rem",fontWeight:"500",transition:"all 0.2s ease",marginBottom:"0.25rem"},children:[n.jsx(To,{size:14}),"Account"]}),S&&n.jsxs(vt,{to:"/account",onClick:()=>c(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"6px",textDecoration:"none",color:"rgba(241, 245, 249, 0.9)",fontSize:"0.8rem",fontWeight:"500",transition:"all 0.2s ease",marginBottom:"0.25rem"},children:[n.jsx(R1,{size:14}),"Billing"]}),n.jsxs("button",{onClick:()=>{f(),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"500",color:"#EF4444",background:"transparent",border:"none",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},children:[n.jsx(Wg,{size:14}),"Sign Out"]})]})]}),n.jsx("button",{className:"mobile-menu-btn",onClick:()=>{t(!e),c(!1)},style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.4rem",background:e?"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)":"rgba(255, 255, 255, 0.05)",border:e?"1px solid rgba(212, 175, 55, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:e?"#D4AF37":"rgba(255, 255, 255, 0.9)",cursor:"pointer",transition:"all 0.2s ease",flexShrink:0,width:"32px",height:"32px"},children:e?n.jsx(Ha,{size:18,strokeWidth:2.5}):n.jsx(bB,{size:18,strokeWidth:2.5})})]})]}),e&&n.jsxs("div",{className:"mobile-nav",style:{position:"absolute",top:"100%",left:0,right:0,background:"linear-gradient(135deg, rgba(26, 31, 46, 0.98) 0%, rgba(17, 24, 39, 0.98) 100%)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderBottom:"1px solid rgba(212, 175, 55, 0.15)",padding:"0.625rem",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"slideDown 0.3s ease-out",maxHeight:"calc(100vh - 60px)",overflowY:"auto"},children:[A.map((_,B)=>{const I=_.icon,L=r.pathname===_.path;return n.jsxs(vt,{to:_.path,onClick:()=>t(!1),style:{display:"flex",alignItems:"center",gap:"0.625rem",padding:"0.625rem 0.75rem",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",textDecoration:"none",color:L?"#D4AF37":"rgba(255, 255, 255, 0.8)",background:L?"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)":"transparent",border:L?"1px solid rgba(212, 175, 55, 0.3)":"1px solid transparent",boxShadow:L?"0 2px 8px rgba(212, 175, 55, 0.2)":"none",marginBottom:"0.25rem",transition:"all 0.2s ease",animation:`slideIn 0.3s ease-out ${B*.03}s both`},children:[n.jsx(I,{size:16,strokeWidth:2.5}),_.label,L&&n.jsx("div",{style:{marginLeft:"auto",width:"5px",height:"5px",borderRadius:"50%",background:"#D4AF37",boxShadow:"0 0 6px rgba(212, 175, 55, 0.6)"}})]},_.path)}),n.jsxs(vt,{to:"/basketball",onClick:()=>t(!1),style:{display:"flex",alignItems:"center",gap:"0.625rem",padding:"0.625rem 0.75rem",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",textDecoration:"none",color:r.pathname==="/basketball"?"#FF8C42":"rgba(255, 140, 66, 0.9)",background:r.pathname==="/basketball"?"linear-gradient(135deg, rgba(255, 140, 66, 0.15) 0%, rgba(255, 140, 66, 0.08) 100%)":"transparent",border:r.pathname==="/basketball"?"1px solid rgba(255, 140, 66, 0.3)":"1px solid rgba(255, 140, 66, 0.2)",boxShadow:r.pathname==="/basketball"?"0 2px 8px rgba(255, 140, 66, 0.2)":"none",marginBottom:"0.25rem",transition:"all 0.2s ease",animation:`slideIn 0.3s ease-out ${A.length*.03}s both`},children:[" CBB Picks",r.pathname==="/basketball"&&n.jsx("div",{style:{marginLeft:"auto",width:"5px",height:"5px",borderRadius:"50%",background:"#FF8C42",boxShadow:"0 0 6px rgba(255, 140, 66, 0.6)"}})]}),m&&n.jsxs("div",{style:{marginTop:"0.625rem",paddingTop:"0.625rem",borderTop:"1px solid rgba(255, 255, 255, 0.08)"},children:[!S&&n.jsxs(vt,{to:"/pricing",onClick:()=>t(!1),style:{display:"flex",alignItems:"center",gap:"0.625rem",padding:"0.625rem 0.75rem",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"700",textDecoration:"none",color:"#0A0E27",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",boxShadow:"0 2px 8px rgba(212, 175, 55, 0.3)",marginBottom:"0.25rem"},children:[n.jsx(tc,{size:16,strokeWidth:2.5}),"Upgrade"]}),n.jsxs(vt,{to:"/account",onClick:()=>t(!1),style:{display:"flex",alignItems:"center",gap:"0.625rem",padding:"0.625rem 0.75rem",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",textDecoration:"none",color:"rgba(255, 255, 255, 0.8)",background:"transparent",border:"1px solid transparent",marginBottom:"0.25rem"},children:[n.jsx(To,{size:16,strokeWidth:2.5}),"Account"]}),n.jsxs("button",{onClick:()=>{f(),t(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:"0.625rem",padding:"0.625rem 0.75rem",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#EF4444",background:"transparent",border:"none",cursor:"pointer",textAlign:"left"},children:[n.jsx(Wg,{size:16,strokeWidth:2.5}),"Sign Out"]})]})]}),n.jsx("style",{children:`
        @media (min-width: 768px) {
          .desktop-nav { display: flex !important; }
          .mobile-auth { display: none !important; }
        }
        @media (max-width: 767px) {
          .desktop-nav { display: none !important; }
          .mobile-auth { display: flex !important; }
        }
        @media (max-width: 640px) {
          .basketball-nav-btn {
            padding: 0.45rem 0.625rem !important;
            font-size: 0.75rem !important;
          }
        }
        @media (max-width: 400px) {
          .sign-in-text { display: none !important; }
          .basketball-nav-btn {
            padding: 0.4rem 0.5rem !important;
            min-width: 36px;
          }
        }
        
        /* Premium Animations */
        @keyframes shimmer {
          0% { left: -100%; }
          100% { left: 200%; }
        }
        
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateX(-20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.8; }
        }
        
        /* Smooth scroll behavior */
        html {
          scroll-behavior: smooth;
        }
      `}),n.jsx(bE,{isOpen:u,onClose:()=>h(!1)})]})},GB=({dataProcessor:r,loading:e,error:t})=>{if(e)return n.jsxs("div",{style:{background:"linear-gradient(135deg, #0a0e1a 0%, #0f1419 100%)",border:"1px solid rgba(0, 217, 255, 0.3)",borderRadius:"12px",padding:"1rem 1.25rem",marginBottom:"1.5rem",boxShadow:"0 0 20px rgba(0, 217, 255, 0.1)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"1px",background:"linear-gradient(90deg, transparent, #00d9ff, transparent)",animation:"scanline 2s linear infinite"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("div",{style:{animation:"spin 1s linear infinite"},children:n.jsx(mx,{size:18,color:"#00d9ff",style:{filter:"drop-shadow(0 0 6px #00d9ff)"}})}),n.jsx("span",{style:{color:"#00d9ff",fontSize:"0.875rem",letterSpacing:"0.05em",textShadow:"0 0 10px rgba(0, 217, 255, 0.6)"},children:"LOADING NHL DATA..."})]}),n.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
          @keyframes scanline {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
          }
        `})]});if(t)return n.jsx("div",{style:{background:"linear-gradient(135deg, #1a0a0e 0%, #190f14 100%)",border:"1px solid rgba(255, 68, 68, 0.4)",borderRadius:"12px",padding:"1rem 1.25rem",marginBottom:"1.5rem",boxShadow:"0 0 20px rgba(255, 68, 68, 0.15)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx(o0,{size:18,color:"#ff4444",style:{filter:"drop-shadow(0 0 6px #ff4444)"}}),n.jsx("span",{style:{color:"#ff4444",fontSize:"0.875rem",letterSpacing:"0.05em",textShadow:"0 0 10px rgba(255, 68, 68, 0.6)"},children:t})]})});if(!r)return null;const i=r.processedData?.length||0,o=[...new Set(r.processedData.map(c=>c.name))].length,l=[...new Set(r.processedData.map(c=>c.situation))].length;return n.jsxs("div",{style:{background:"linear-gradient(135deg, #0a0e1a 0%, #0f1419 100%)",border:"1px solid rgba(0, 217, 255, 0.3)",borderRadius:"12px",padding:"1rem 1.25rem",marginBottom:"1.5rem",position:"relative",overflow:"hidden",boxShadow:"0 0 30px rgba(0, 217, 255, 0.15)"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"linear-gradient(rgba(0, 217, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 217, 255, 0.03) 1px, transparent 1px)",backgroundSize:"20px 20px",opacity:.4,pointerEvents:"none"}}),n.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",width:"8px",height:"8px",borderRadius:"50%",background:"#00d9ff",boxShadow:"0 0 12px #00d9ff",animation:"pulse 2s ease-in-out infinite"}}),n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",position:"relative",zIndex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n.jsx(a0,{size:18,color:"#00d9ff",style:{marginTop:"0.125rem",flexShrink:0,filter:"drop-shadow(0 0 6px #00d9ff)"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontWeight:"700",color:"#00d9ff",marginBottom:"0.5rem",fontSize:"0.875rem",letterSpacing:"0.05em",textTransform:"uppercase",textShadow:"0 0 10px rgba(0, 217, 255, 0.6)"},children:"Data Verified & Loaded"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, auto)",gap:"1.5rem",fontSize:"0.813rem"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{color:"#7aa3b8"},children:"Data Points: "}),n.jsx("span",{style:{fontWeight:"700",color:"#ffffff",textShadow:"0 0 8px rgba(255, 255, 255, 0.3)"},children:i})]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#7aa3b8"},children:"Teams: "}),n.jsx("span",{style:{fontWeight:"700",color:"#ffffff",textShadow:"0 0 8px rgba(255, 255, 255, 0.3)"},children:o})]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#7aa3b8"},children:"Situations: "}),n.jsx("span",{style:{fontWeight:"700",color:"#ffffff",textShadow:"0 0 8px rgba(255, 255, 255, 0.3)"},children:l})]})]}),n.jsx("p",{style:{fontSize:"0.75rem",color:"#7aa3b8",marginTop:"0.5rem",letterSpacing:"0.02em"},children:"All calculations verified and ready for analysis"})]})]}),n.jsxs("div",{style:{textAlign:"right",minWidth:"120px"},children:[n.jsx("p",{style:{fontSize:"0.688rem",color:"#7aa3b8",marginBottom:"0.25rem",letterSpacing:"0.05em",textTransform:"uppercase"},children:"Source:"}),n.jsx("p",{style:{fontSize:"0.75rem",color:"#00d9ff",fontFamily:"monospace",textShadow:"0 0 8px rgba(0, 217, 255, 0.4)"},children:"nhl_data.csv"})]})]}),n.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.4; transform: scale(0.8); }
        }
      `})]})},yx=O.createContext({});function xx(r){const e=O.useRef(null);return e.current===null&&(e.current=r()),e.current}const bx=typeof window<"u",vE=bx?O.useLayoutEffect:O.useEffect,l0=O.createContext(null);function vx(r,e){r.indexOf(e)===-1&&r.push(e)}function Sx(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const Ns=(r,e,t)=>t>e?e:t<r?r:t;let wx=()=>{};const $s={},SE=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function wE(r){return typeof r=="object"&&r!==null}const TE=r=>/^0[^.\s]+$/u.test(r);function Tx(r){let e;return()=>(e===void 0&&(e=r()),e)}const di=r=>r,HB=(r,e)=>t=>e(r(t)),Fu=(...r)=>r.reduce(HB),cu=(r,e,t)=>{const i=e-r;return i===0?1:(t-r)/i};class jx{constructor(){this.subscriptions=[]}add(e){return vx(this.subscriptions,e),()=>Sx(this.subscriptions,e)}notify(e,t,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,i);else for(let l=0;l<o;l++){const c=this.subscriptions[l];c&&c(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ts=r=>r*1e3,li=r=>r/1e3;function jE(r,e){return e?r*(1e3/e):0}const AE=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,UB=1e-7,qB=12;function YB(r,e,t,i,o){let l,c,u=0;do c=e+(t-e)/2,l=AE(c,i,o)-r,l>0?t=c:e=c;while(Math.abs(l)>UB&&++u<qB);return c}function Du(r,e,t,i){if(r===e&&t===i)return di;const o=l=>YB(l,0,1,r,t);return l=>l===0||l===1?l:AE(o(l),e,i)}const kE=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,EE=r=>e=>1-r(1-e),_E=Du(.33,1.53,.69,.99),Ax=EE(_E),RE=kE(Ax),CE=r=>(r*=2)<1?.5*Ax(r):.5*(2-Math.pow(2,-10*(r-1))),kx=r=>1-Math.sin(Math.acos(r)),IE=EE(kx),FE=kE(kx),KB=Du(.42,0,1,1),XB=Du(0,0,.58,1),DE=Du(.42,0,.58,1),QB=r=>Array.isArray(r)&&typeof r[0]!="number",PE=r=>Array.isArray(r)&&typeof r[0]=="number",ZB={linear:di,easeIn:KB,easeInOut:DE,easeOut:XB,circIn:kx,circInOut:FE,circOut:IE,backIn:Ax,backInOut:RE,backOut:_E,anticipate:CE},JB=r=>typeof r=="string",Aw=r=>{if(PE(r)){wx(r.length===4);const[e,t,i,o]=r;return Du(e,t,i,o)}else if(JB(r))return ZB[r];return r},ug=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ez(r,e){let t=new Set,i=new Set,o=!1,l=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(f){c.has(f)&&(m.schedule(f),r()),f(u)}const m={schedule:(f,x=!1,b=!1)=>{const w=b&&o?t:i;return x&&c.add(f),w.has(f)||w.add(f),f},cancel:f=>{i.delete(f),c.delete(f)},process:f=>{if(u=f,o){l=!0;return}o=!0,[t,i]=[i,t],t.forEach(h),t.clear(),o=!1,l&&(l=!1,m.process(f))}};return m}const tz=40;function BE(r,e){let t=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=ug.reduce((B,I)=>(B[I]=ez(l),B),{}),{setup:u,read:h,resolveKeyframes:m,preUpdate:f,update:x,preRender:b,render:S,postRender:w}=c,T=()=>{const B=$s.useManualTiming?o.timestamp:performance.now();t=!1,$s.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(B-o.timestamp,tz),1)),o.timestamp=B,o.isProcessing=!0,u.process(o),h.process(o),m.process(o),f.process(o),x.process(o),b.process(o),S.process(o),w.process(o),o.isProcessing=!1,t&&e&&(i=!1,r(T))},E=()=>{t=!0,i=!0,o.isProcessing||r(T)};return{schedule:ug.reduce((B,I)=>{const L=c[I];return B[I]=(M,R=!1,j=!1)=>(t||E(),L.schedule(M,R,j)),B},{}),cancel:B=>{for(let I=0;I<ug.length;I++)c[ug[I]].cancel(B)},state:o,steps:c}}const{schedule:or,cancel:Ho,state:Yr,steps:Rp}=BE(typeof requestAnimationFrame<"u"?requestAnimationFrame:di,!0);let Ug;function rz(){Ug=void 0}const kn={now:()=>(Ug===void 0&&kn.set(Yr.isProcessing||$s.useManualTiming?Yr.timestamp:performance.now()),Ug),set:r=>{Ug=r,queueMicrotask(rz)}},zE=r=>e=>typeof e=="string"&&e.startsWith(r),Ex=zE("--"),nz=zE("var(--"),_x=r=>nz(r)?iz.test(r.split("/*")[0].trim()):!1,iz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jc={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},du={...jc,transform:r=>Ns(0,1,r)},hg={...jc,default:1},Gd=r=>Math.round(r*1e5)/1e5,Rx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function sz(r){return r==null}const oz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cx=(r,e)=>t=>!!(typeof t=="string"&&oz.test(t)&&t.startsWith(r)||e&&!sz(t)&&Object.prototype.hasOwnProperty.call(t,e)),OE=(r,e,t)=>i=>{if(typeof i!="string")return i;const[o,l,c,u]=i.match(Rx);return{[r]:parseFloat(o),[e]:parseFloat(l),[t]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},az=r=>Ns(0,255,r),Cp={...jc,transform:r=>Math.round(az(r))},Ia={test:Cx("rgb","red"),parse:OE("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:i=1})=>"rgba("+Cp.transform(r)+", "+Cp.transform(e)+", "+Cp.transform(t)+", "+Gd(du.transform(i))+")"};function lz(r){let e="",t="",i="",o="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),i=r.substring(5,7),o=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),i=r.substring(3,4),o=r.substring(4,5),e+=e,t+=t,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const D1={test:Cx("#"),parse:lz,transform:Ia.transform},Pu=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),jo=Pu("deg"),rs=Pu("%"),ht=Pu("px"),cz=Pu("vh"),dz=Pu("vw"),kw={...rs,parse:r=>rs.parse(r)/100,transform:r=>rs.transform(r*100)},Gl={test:Cx("hsl","hue"),parse:OE("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(r)+", "+rs.transform(Gd(e))+", "+rs.transform(Gd(t))+", "+Gd(du.transform(i))+")"},Cr={test:r=>Ia.test(r)||D1.test(r)||Gl.test(r),parse:r=>Ia.test(r)?Ia.parse(r):Gl.test(r)?Gl.parse(r):D1.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Ia.transform(r):Gl.transform(r),getAnimatableNone:r=>{const e=Cr.parse(r);return e.alpha=0,Cr.transform(e)}},uz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hz(r){return isNaN(r)&&typeof r=="string"&&(r.match(Rx)?.length||0)+(r.match(uz)?.length||0)>0}const ME="number",LE="color",gz="var",mz="var(",Ew="${}",fz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uu(r){const e=r.toString(),t=[],i={color:[],number:[],var:[]},o=[];let l=0;const u=e.replace(fz,h=>(Cr.test(h)?(i.color.push(l),o.push(LE),t.push(Cr.parse(h))):h.startsWith(mz)?(i.var.push(l),o.push(gz),t.push(h)):(i.number.push(l),o.push(ME),t.push(parseFloat(h))),++l,Ew)).split(Ew);return{values:t,split:u,indexes:i,types:o}}function NE(r){return uu(r).values}function $E(r){const{split:e,types:t}=uu(r),i=e.length;return o=>{let l="";for(let c=0;c<i;c++)if(l+=e[c],o[c]!==void 0){const u=t[c];u===ME?l+=Gd(o[c]):u===LE?l+=Cr.transform(o[c]):l+=o[c]}return l}}const pz=r=>typeof r=="number"?0:Cr.test(r)?Cr.getAnimatableNone(r):r;function yz(r){const e=NE(r);return $E(r)(e.map(pz))}const Uo={test:hz,parse:NE,createTransformer:$E,getAnimatableNone:yz};function Ip(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function xz({hue:r,saturation:e,lightness:t,alpha:i}){r/=360,e/=100,t/=100;let o=0,l=0,c=0;if(!e)o=l=c=t;else{const u=t<.5?t*(1+e):t+e-t*e,h=2*t-u;o=Ip(h,u,r+1/3),l=Ip(h,u,r),c=Ip(h,u,r-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:i}}function Am(r,e){return t=>t>0?e:r}const lr=(r,e,t)=>r+(e-r)*t,Fp=(r,e,t)=>{const i=r*r,o=t*(e*e-i)+i;return o<0?0:Math.sqrt(o)},bz=[D1,Ia,Gl],vz=r=>bz.find(e=>e.test(r));function _w(r){const e=vz(r);if(!e)return!1;let t=e.parse(r);return e===Gl&&(t=xz(t)),t}const Rw=(r,e)=>{const t=_w(r),i=_w(e);if(!t||!i)return Am(r,e);const o={...t};return l=>(o.red=Fp(t.red,i.red,l),o.green=Fp(t.green,i.green,l),o.blue=Fp(t.blue,i.blue,l),o.alpha=lr(t.alpha,i.alpha,l),Ia.transform(o))},P1=new Set(["none","hidden"]);function Sz(r,e){return P1.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function wz(r,e){return t=>lr(r,e,t)}function Ix(r){return typeof r=="number"?wz:typeof r=="string"?_x(r)?Am:Cr.test(r)?Rw:Az:Array.isArray(r)?VE:typeof r=="object"?Cr.test(r)?Rw:Tz:Am}function VE(r,e){const t=[...r],i=t.length,o=r.map((l,c)=>Ix(l)(l,e[c]));return l=>{for(let c=0;c<i;c++)t[c]=o[c](l);return t}}function Tz(r,e){const t={...r,...e},i={};for(const o in t)r[o]!==void 0&&e[o]!==void 0&&(i[o]=Ix(r[o])(r[o],e[o]));return o=>{for(const l in i)t[l]=i[l](o);return t}}function jz(r,e){const t=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=r.indexes[l][i[l]],u=r.values[c]??0;t[o]=u,i[l]++}return t}const Az=(r,e)=>{const t=Uo.createTransformer(e),i=uu(r),o=uu(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?P1.has(r)&&!o.values.length||P1.has(e)&&!i.values.length?Sz(r,e):Fu(VE(jz(i,o),o.values),t):Am(r,e)};function WE(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?lr(r,e,t):Ix(r)(r,e)}const kz=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>or.update(e,t),stop:()=>Ho(e),now:()=>Yr.isProcessing?Yr.timestamp:kn.now()}},GE=(r,e,t=10)=>{let i="";const o=Math.max(Math.round(e/t),2);for(let l=0;l<o;l++)i+=Math.round(r(l/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},km=2e4;function Fx(r){let e=0;const t=50;let i=r.next(e);for(;!i.done&&e<km;)e+=t,i=r.next(e);return e>=km?1/0:e}function Ez(r,e=100,t){const i=t({...r,keyframes:[0,e]}),o=Math.min(Fx(i),km);return{type:"keyframes",ease:l=>i.next(o*l).value/e,duration:li(o)}}const _z=5;function HE(r,e,t){const i=Math.max(e-_z,0);return jE(t-r(i),e-i)}const gr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Dp=.001;function Rz({duration:r=gr.duration,bounce:e=gr.bounce,velocity:t=gr.velocity,mass:i=gr.mass}){let o,l,c=1-e;c=Ns(gr.minDamping,gr.maxDamping,c),r=Ns(gr.minDuration,gr.maxDuration,li(r)),c<1?(o=m=>{const f=m*c,x=f*r,b=f-t,S=B1(m,c),w=Math.exp(-x);return Dp-b/S*w},l=m=>{const x=m*c*r,b=x*t+t,S=Math.pow(c,2)*Math.pow(m,2)*r,w=Math.exp(-x),T=B1(Math.pow(m,2),c);return(-o(m)+Dp>0?-1:1)*((b-S)*w)/T}):(o=m=>{const f=Math.exp(-m*r),x=(m-t)*r+1;return-Dp+f*x},l=m=>{const f=Math.exp(-m*r),x=(t-m)*(r*r);return f*x});const u=5/r,h=Iz(o,l,u);if(r=ts(r),isNaN(h))return{stiffness:gr.stiffness,damping:gr.damping,duration:r};{const m=Math.pow(h,2)*i;return{stiffness:m,damping:c*2*Math.sqrt(i*m),duration:r}}}const Cz=12;function Iz(r,e,t){let i=t;for(let o=1;o<Cz;o++)i=i-r(i)/e(i);return i}function B1(r,e){return r*Math.sqrt(1-e*e)}const Fz=["duration","bounce"],Dz=["stiffness","damping","mass"];function Cw(r,e){return e.some(t=>r[t]!==void 0)}function Pz(r){let e={velocity:gr.velocity,stiffness:gr.stiffness,damping:gr.damping,mass:gr.mass,isResolvedFromDuration:!1,...r};if(!Cw(r,Dz)&&Cw(r,Fz))if(r.visualDuration){const t=r.visualDuration,i=2*Math.PI/(t*1.2),o=i*i,l=2*Ns(.05,1,1-(r.bounce||0))*Math.sqrt(o);e={...e,mass:gr.mass,stiffness:o,damping:l}}else{const t=Rz(r);e={...e,...t,mass:gr.mass},e.isResolvedFromDuration=!0}return e}function Em(r=gr.visualDuration,e=gr.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:i,restDelta:o}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],u={done:!1,value:l},{stiffness:h,damping:m,mass:f,duration:x,velocity:b,isResolvedFromDuration:S}=Pz({...t,velocity:-li(t.velocity||0)}),w=b||0,T=m/(2*Math.sqrt(h*f)),E=c-l,A=li(Math.sqrt(h/f)),_=Math.abs(E)<5;i||(i=_?gr.restSpeed.granular:gr.restSpeed.default),o||(o=_?gr.restDelta.granular:gr.restDelta.default);let B;if(T<1){const L=B1(A,T);B=M=>{const R=Math.exp(-T*A*M);return c-R*((w+T*A*E)/L*Math.sin(L*M)+E*Math.cos(L*M))}}else if(T===1)B=L=>c-Math.exp(-A*L)*(E+(w+A*E)*L);else{const L=A*Math.sqrt(T*T-1);B=M=>{const R=Math.exp(-T*A*M),j=Math.min(L*M,300);return c-R*((w+T*A*E)*Math.sinh(j)+L*E*Math.cosh(j))/L}}const I={calculatedDuration:S&&x||null,next:L=>{const M=B(L);if(S)u.done=L>=x;else{let R=L===0?w:0;T<1&&(R=L===0?ts(w):HE(B,L,M));const j=Math.abs(R)<=i,F=Math.abs(c-M)<=o;u.done=j&&F}return u.value=u.done?c:M,u},toString:()=>{const L=Math.min(Fx(I),km),M=GE(R=>I.next(L*R).value,L,30);return L+"ms "+M},toTransition:()=>{}};return I}Em.applyToOptions=r=>{const e=Ez(r,100,Em);return r.ease=e.ease,r.duration=ts(e.duration),r.type="keyframes",r};function z1({keyframes:r,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:c,min:u,max:h,restDelta:m=.5,restSpeed:f}){const x=r[0],b={done:!1,value:x},S=j=>u!==void 0&&j<u||h!==void 0&&j>h,w=j=>u===void 0?h:h===void 0||Math.abs(u-j)<Math.abs(h-j)?u:h;let T=t*e;const E=x+T,A=c===void 0?E:c(E);A!==E&&(T=A-x);const _=j=>-T*Math.exp(-j/i),B=j=>A+_(j),I=j=>{const F=_(j),z=B(j);b.done=Math.abs(F)<=m,b.value=b.done?A:z};let L,M;const R=j=>{S(b.value)&&(L=j,M=Em({keyframes:[b.value,w(b.value)],velocity:HE(B,j,b.value),damping:o,stiffness:l,restDelta:m,restSpeed:f}))};return R(0),{calculatedDuration:null,next:j=>{let F=!1;return!M&&L===void 0&&(F=!0,I(j),R(j)),L!==void 0&&j>=L?M.next(j-L):(!F&&I(j),b)}}}function Bz(r,e,t){const i=[],o=t||$s.mix||WE,l=r.length-1;for(let c=0;c<l;c++){let u=o(r[c],r[c+1]);if(e){const h=Array.isArray(e)?e[c]||di:e;u=Fu(h,u)}i.push(u)}return i}function zz(r,e,{clamp:t=!0,ease:i,mixer:o}={}){const l=r.length;if(wx(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=r[0]===r[1];r[0]>r[l-1]&&(r=[...r].reverse(),e=[...e].reverse());const u=Bz(e,i,o),h=u.length,m=f=>{if(c&&f<r[0])return e[0];let x=0;if(h>1)for(;x<r.length-2&&!(f<r[x+1]);x++);const b=cu(r[x],r[x+1],f);return u[x](b)};return t?f=>m(Ns(r[0],r[l-1],f)):m}function Oz(r,e){const t=r[r.length-1];for(let i=1;i<=e;i++){const o=cu(0,e,i);r.push(lr(t,1,o))}}function Mz(r){const e=[0];return Oz(e,r.length-1),e}function Lz(r,e){return r.map(t=>t*e)}function Nz(r,e){return r.map(()=>e||DE).splice(0,r.length-1)}function Hd({duration:r=300,keyframes:e,times:t,ease:i="easeInOut"}){const o=QB(i)?i.map(Aw):Aw(i),l={done:!1,value:e[0]},c=Lz(t&&t.length===e.length?t:Mz(e),r),u=zz(c,e,{ease:Array.isArray(o)?o:Nz(e,o)});return{calculatedDuration:r,next:h=>(l.value=u(h),l.done=h>=r,l)}}const $z=r=>r!==null;function Dx(r,{repeat:e,repeatType:t="loop"},i,o=1){const l=r.filter($z),u=o<0||e&&t!=="loop"&&e%2===1?0:l.length-1;return!u||i===void 0?l[u]:i}const Vz={decay:z1,inertia:z1,tween:Hd,keyframes:Hd,spring:Em};function UE(r){typeof r.type=="string"&&(r.type=Vz[r.type])}class Px{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Wz=r=>r/100;class Bx extends Px{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==kn.now()&&this.tick(kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;UE(e);const{type:t=Hd,repeat:i=0,repeatDelay:o=0,repeatType:l,velocity:c=0}=e;let{keyframes:u}=e;const h=t||Hd;h!==Hd&&typeof u[0]!="number"&&(this.mixKeyframes=Fu(Wz,WE(u[0],u[1])),u=[0,100]);const m=h({...e,keyframes:u});l==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...u].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=Fx(m));const{calculatedDuration:f}=m;this.calculatedDuration=f,this.resolvedDuration=f+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:o,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:m=0,keyframes:f,repeat:x,repeatType:b,repeatDelay:S,type:w,onUpdate:T,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const A=this.currentTime-m*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?A<0:A>o;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let B=this.currentTime,I=i;if(x){const j=Math.min(this.currentTime,o)/u;let F=Math.floor(j),z=j%1;!z&&j>=1&&(z=1),z===1&&F--,F=Math.min(F,x+1),!!(F%2)&&(b==="reverse"?(z=1-z,S&&(z-=S/u)):b==="mirror"&&(I=c)),B=Ns(0,1,z)*u}const L=_?{done:!1,value:f[0]}:I.next(B);l&&(L.value=l(L.value));let{done:M}=L;!_&&h!==null&&(M=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return R&&w!==z1&&(L.value=Dx(f,this.options,E,this.speed)),T&&T(L.value),R&&this.finish(),L}then(e,t){return this.finished.then(e,t)}get duration(){return li(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+li(e)}get time(){return li(this.currentTime)}set time(e){e=ts(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(kn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=li(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=kz,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Gz(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const Fa=r=>r*180/Math.PI,O1=r=>{const e=Fa(Math.atan2(r[1],r[0]));return M1(e)},Hz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:O1,rotateZ:O1,skewX:r=>Fa(Math.atan(r[1])),skewY:r=>Fa(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},M1=r=>(r=r%360,r<0&&(r+=360),r),Iw=O1,Fw=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),Dw=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),Uz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Fw,scaleY:Dw,scale:r=>(Fw(r)+Dw(r))/2,rotateX:r=>M1(Fa(Math.atan2(r[6],r[5]))),rotateY:r=>M1(Fa(Math.atan2(-r[2],r[0]))),rotateZ:Iw,rotate:Iw,skewX:r=>Fa(Math.atan(r[4])),skewY:r=>Fa(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function L1(r){return r.includes("scale")?1:0}function N1(r,e){if(!r||r==="none")return L1(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(t)i=Uz,o=t;else{const u=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Hz,o=u}if(!o)return L1(e);const l=i[e],c=o[1].split(",").map(Yz);return typeof l=="function"?l(c):c[l]}const qz=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return N1(t,e)};function Yz(r){return parseFloat(r.trim())}const Ac=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kc=new Set(Ac),Pw=r=>r===jc||r===ht,Kz=new Set(["x","y","z"]),Xz=Ac.filter(r=>!Kz.has(r));function Qz(r){const e=[];return Xz.forEach(t=>{const i=r.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Ba={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>N1(e,"x"),y:(r,{transform:e})=>N1(e,"y")};Ba.translateX=Ba.x;Ba.translateY=Ba.y;const za=new Set;let $1=!1,V1=!1,W1=!1;function qE(){if(V1){const r=Array.from(za).filter(i=>i.needsMeasurement),e=new Set(r.map(i=>i.element)),t=new Map;e.forEach(i=>{const o=Qz(i);o.length&&(t.set(i,o),i.render())}),r.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=t.get(i);o&&o.forEach(([l,c])=>{i.getValue(l)?.set(c)})}),r.forEach(i=>i.measureEndState()),r.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}V1=!1,$1=!1,za.forEach(r=>r.complete(W1)),za.clear()}function YE(){za.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(V1=!0)})}function Zz(){W1=!0,YE(),qE(),W1=!1}class zx{constructor(e,t,i,o,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=o,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(za.add(this),$1||($1=!0,or.read(YE),or.resolveKeyframes(qE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:o}=this;if(e[0]===null){const l=o?.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&t){const u=i.readValue(t,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),o&&l===void 0&&o.set(e[0])}Gz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),za.delete(this)}cancel(){this.state==="scheduled"&&(za.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Jz=r=>r.startsWith("--");function eO(r,e,t){Jz(e)?r.style.setProperty(e,t):r.style[e]=t}const tO=Tx(()=>window.ScrollTimeline!==void 0),rO={};function nO(r,e){const t=Tx(r);return()=>rO[e]??t()}const KE=nO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dd=([r,e,t,i])=>`cubic-bezier(${r}, ${e}, ${t}, ${i})`,Bw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dd([0,.65,.55,1]),circOut:Dd([.55,0,1,.45]),backIn:Dd([.31,.01,.66,-.59]),backOut:Dd([.33,1.53,.69,.99])};function XE(r,e){if(r)return typeof r=="function"?KE()?GE(r,e):"ease-out":PE(r)?Dd(r):Array.isArray(r)?r.map(t=>XE(t,e)||Bw.easeOut):Bw[r]}function iO(r,e,t,{delay:i=0,duration:o=300,repeat:l=0,repeatType:c="loop",ease:u="easeOut",times:h}={},m=void 0){const f={[e]:t};h&&(f.offset=h);const x=XE(u,o);Array.isArray(x)&&(f.easing=x);const b={delay:i,duration:o,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(b.pseudoElement=m),r.animate(f,b)}function QE(r){return typeof r=="function"&&"applyToOptions"in r}function sO({type:r,...e}){return QE(r)&&KE()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class oO extends Px{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:o,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:u,onComplete:h}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,wx(typeof e.type!="string");const m=sO(e);this.animation=iO(t,i,o,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const f=Dx(o,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(f):eO(t,i,f),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return li(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+li(e)}get time(){return li(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ts(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&tO()?(this.animation.timeline=e,di):t(this)}}const ZE={anticipate:CE,backInOut:RE,circInOut:FE};function aO(r){return r in ZE}function lO(r){typeof r.ease=="string"&&aO(r.ease)&&(r.ease=ZE[r.ease])}const zw=10;class cO extends oO{constructor(e){lO(e),UE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:o,element:l,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new Bx({...c,autoplay:!1}),h=ts(this.finishedTime??this.time);t.setWithVelocity(u.sample(h-zw).value,u.sample(h).value,zw),u.stop()}}const Ow=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Uo.test(r)||r==="0")&&!r.startsWith("url("));function dO(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function uO(r,e,t,i){const o=r[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=r[r.length-1],c=Ow(o,e),u=Ow(l,e);return!c||!u?!1:dO(r)||(t==="spring"||QE(t))&&i}function G1(r){r.duration=0,r.type="keyframes"}const hO=new Set(["opacity","clipPath","filter","transform"]),gO=Tx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function mO(r){const{motionValue:e,name:t,repeatDelay:i,repeatType:o,damping:l,type:c}=r;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:m}=e.owner.getProps();return gO()&&t&&hO.has(t)&&(t!=="transform"||!m)&&!h&&!i&&o!=="mirror"&&l!==0&&c!=="inertia"}const fO=40;class pO extends Px{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:c="loop",keyframes:u,name:h,motionValue:m,element:f,...x}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=kn.now();const b={autoplay:e,delay:t,type:i,repeat:o,repeatDelay:l,repeatType:c,name:h,motionValue:m,element:f,...x},S=f?.KeyframeResolver||zx;this.keyframeResolver=new S(u,(w,T,E)=>this.onKeyframesResolved(w,T,b,!E),h,m,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,o){this.keyframeResolver=void 0;const{name:l,type:c,velocity:u,delay:h,isHandoff:m,onUpdate:f}=i;this.resolvedAt=kn.now(),uO(e,l,c,u)||(($s.instantAnimations||!h)&&f?.(Dx(e,i,t)),e[0]=e[e.length-1],G1(i),i.repeat=0);const b={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>fO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},S=!m&&mO(b)?new cO({...b,element:b.motionValue.owner.current}):new Bx(b);S.finished.then(()=>this.notifyFinished()).catch(di),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Zz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const yO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xO(r){const e=yO.exec(r);if(!e)return[,];const[,t,i,o]=e;return[`--${t??i}`,o]}function JE(r,e,t=1){const[i,o]=xO(r);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const c=l.trim();return SE(c)?parseFloat(c):c}return _x(o)?JE(o,e,t+1):o}function Ox(r,e){return r?.[e]??r?.default??r}const e6=new Set(["width","height","top","left","right","bottom",...Ac]),bO={test:r=>r==="auto",parse:r=>r},t6=r=>e=>e.test(r),r6=[jc,ht,rs,jo,dz,cz,bO],Mw=r=>r6.find(t6(r));function vO(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||TE(r):!0}const SO=new Set(["brightness","contrast","saturate","opacity"]);function wO(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[i]=t.match(Rx)||[];if(!i)return r;const o=t.replace(i,"");let l=SO.has(e)?1:0;return i!==t&&(l*=100),e+"("+l+o+")"}const TO=/\b([a-z-]*)\(.*?\)/gu,H1={...Uo,getAnimatableNone:r=>{const e=r.match(TO);return e?e.map(wO).join(" "):r}},Lw={...jc,transform:Math.round},jO={rotate:jo,rotateX:jo,rotateY:jo,rotateZ:jo,scale:hg,scaleX:hg,scaleY:hg,scaleZ:hg,skew:jo,skewX:jo,skewY:jo,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:du,originX:kw,originY:kw,originZ:ht},Mx={borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,radius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,top:ht,right:ht,bottom:ht,left:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,backgroundPositionX:ht,backgroundPositionY:ht,...jO,zIndex:Lw,fillOpacity:du,strokeOpacity:du,numOctaves:Lw},AO={...Mx,color:Cr,backgroundColor:Cr,outlineColor:Cr,fill:Cr,stroke:Cr,borderColor:Cr,borderTopColor:Cr,borderRightColor:Cr,borderBottomColor:Cr,borderLeftColor:Cr,filter:H1,WebkitFilter:H1},n6=r=>AO[r];function i6(r,e){let t=n6(r);return t!==H1&&(t=Uo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const kO=new Set(["auto","none","0"]);function EO(r,e,t){let i=0,o;for(;i<r.length&&!o;){const l=r[i];typeof l=="string"&&!kO.has(l)&&uu(l).values.length&&(o=r[i]),i++}if(o&&t)for(const l of e)r[l]=i6(t,o)}class _O extends zx{constructor(e,t,i,o,l){super(e,t,i,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let m=e[h];if(typeof m=="string"&&(m=m.trim(),_x(m))){const f=JE(m,t.current);f!==void 0&&(e[h]=f),h===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!e6.has(i)||e.length!==2)return;const[o,l]=e,c=Mw(o),u=Mw(l);if(c!==u)if(Pw(c)&&Pw(u))for(let h=0;h<e.length;h++){const m=e[h];typeof m=="string"&&(e[h]=parseFloat(m))}else Ba[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let o=0;o<e.length;o++)(e[o]===null||vO(e[o]))&&i.push(o);i.length&&EO(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ba[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const o=t[t.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const o=e.getValue(t);o&&o.jump(this.measuredOrigin,!1);const l=i.length-1,c=i[l];i[l]=Ba[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function RO(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let i=document;const o=t?.[r]??i.querySelectorAll(r);return o?Array.from(o):[]}return Array.from(r)}const s6=(r,e)=>e&&typeof r=="number"?e.transform(r):r;function o6(r){return wE(r)&&"offsetHeight"in r}const Nw=30,CO=r=>!isNaN(parseFloat(r));class IO{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const o=kn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=kn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=CO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new jx);const i=this.events[e].add(t);return e==="change"?()=>{i(),or.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Nw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Nw);return jE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gc(r,e){return new IO(r,e)}const{schedule:Lx}=BE(queueMicrotask,!1),Ti={x:!1,y:!1};function a6(){return Ti.x||Ti.y}function FO(r){return r==="x"||r==="y"?Ti[r]?null:(Ti[r]=!0,()=>{Ti[r]=!1}):Ti.x||Ti.y?null:(Ti.x=Ti.y=!0,()=>{Ti.x=Ti.y=!1})}function l6(r,e){const t=RO(r),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[t,o,()=>i.abort()]}function $w(r){return!(r.pointerType==="touch"||a6())}function DO(r,e,t={}){const[i,o,l]=l6(r,t),c=u=>{if(!$w(u))return;const{target:h}=u,m=e(h,u);if(typeof m!="function"||!h)return;const f=x=>{$w(x)&&(m(x),h.removeEventListener("pointerleave",f))};h.addEventListener("pointerleave",f,o)};return i.forEach(u=>{u.addEventListener("pointerenter",c,o)}),l}const c6=(r,e)=>e?r===e?!0:c6(r,e.parentElement):!1,Nx=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,PO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BO(r){return PO.has(r.tagName)||r.tabIndex!==-1}const qg=new WeakSet;function Vw(r){return e=>{e.key==="Enter"&&r(e)}}function Pp(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zO=(r,e)=>{const t=r.currentTarget;if(!t)return;const i=Vw(()=>{if(qg.has(t))return;Pp(t,"down");const o=Vw(()=>{Pp(t,"up")}),l=()=>Pp(t,"cancel");t.addEventListener("keyup",o,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function Ww(r){return Nx(r)&&!a6()}function OO(r,e,t={}){const[i,o,l]=l6(r,t),c=u=>{const h=u.currentTarget;if(!Ww(u))return;qg.add(h);const m=e(h,u),f=(S,w)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",b),qg.has(h)&&qg.delete(h),Ww(S)&&typeof m=="function"&&m(S,{success:w})},x=S=>{f(S,h===window||h===document||t.useGlobalTarget||c6(h,S.target))},b=S=>{f(S,!1)};window.addEventListener("pointerup",x,o),window.addEventListener("pointercancel",b,o)};return i.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",c,o),o6(u)&&(u.addEventListener("focus",m=>zO(m,o)),!BO(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),l}function d6(r){return wE(r)&&"ownerSVGElement"in r}function MO(r){return d6(r)&&r.tagName==="svg"}const on=r=>!!(r&&r.getVelocity),LO=[...r6,Cr,Uo],NO=r=>LO.find(t6(r)),$x=O.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function Gw(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function $O(...r){return e=>{let t=!1;const i=r.map(o=>{const l=Gw(o,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():Gw(r[o],null)}}}}function VO(...r){return O.useCallback($O(...r),r)}class WO extends O.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,o=o6(i)&&i.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=o-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function GO({children:r,isPresent:e,anchorX:t,root:i}){const o=O.useId(),l=O.useRef(null),c=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=O.useContext($x),h=VO(l,r?.ref);return O.useInsertionEffect(()=>{const{width:m,height:f,top:x,left:b,right:S}=c.current;if(e||!l.current||!m||!f)return;const w=t==="left"?`left: ${b}`:`right: ${S}`;l.current.dataset.motionPopId=o;const T=document.createElement("style");u&&(T.nonce=u);const E=i??document.head;return E.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${x}px !important;
          }
        `),()=>{E.contains(T)&&E.removeChild(T)}},[e]),n.jsx(WO,{isPresent:e,childRef:l,sizeRef:c,children:O.cloneElement(r,{ref:h})})}const HO=({children:r,initial:e,isPresent:t,onExitComplete:i,custom:o,presenceAffectsLayout:l,mode:c,anchorX:u,root:h})=>{const m=xx(UO),f=O.useId();let x=!0,b=O.useMemo(()=>(x=!1,{id:f,initial:e,isPresent:t,custom:o,onExitComplete:S=>{m.set(S,!0);for(const w of m.values())if(!w)return;i&&i()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[t,m,i]);return l&&x&&(b={...b}),O.useMemo(()=>{m.forEach((S,w)=>m.set(w,!1))},[t]),O.useEffect(()=>{!t&&!m.size&&i&&i()},[t]),c==="popLayout"&&(r=n.jsx(GO,{isPresent:t,anchorX:u,root:h,children:r})),n.jsx(l0.Provider,{value:b,children:r})};function UO(){return new Map}function u6(r=!0){const e=O.useContext(l0);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:o}=e,l=O.useId();O.useEffect(()=>{if(r)return o(l)},[r]);const c=O.useCallback(()=>r&&i&&i(l),[l,i,r]);return!t&&i?[!1,c]:[!0]}const gg=r=>r.key||"";function Hw(r){const e=[];return O.Children.forEach(r,t=>{O.isValidElement(t)&&e.push(t)}),e}const qO=({children:r,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:l="sync",propagate:c=!1,anchorX:u="left",root:h})=>{const[m,f]=u6(c),x=O.useMemo(()=>Hw(r),[r]),b=c&&!m?[]:x.map(gg),S=O.useRef(!0),w=O.useRef(x),T=xx(()=>new Map),[E,A]=O.useState(x),[_,B]=O.useState(x);vE(()=>{S.current=!1,w.current=x;for(let M=0;M<_.length;M++){const R=gg(_[M]);b.includes(R)?T.delete(R):T.get(R)!==!0&&T.set(R,!1)}},[_,b.length,b.join("-")]);const I=[];if(x!==E){let M=[...x];for(let R=0;R<_.length;R++){const j=_[R],F=gg(j);b.includes(F)||(M.splice(R,0,j),I.push(j))}return l==="wait"&&I.length&&(M=I),B(Hw(M)),A(x),null}const{forceRender:L}=O.useContext(yx);return n.jsx(n.Fragment,{children:_.map(M=>{const R=gg(M),j=c&&!m?!1:x===_||b.includes(R),F=()=>{if(T.has(R))T.set(R,!0);else return;let z=!0;T.forEach(P=>{P||(z=!1)}),z&&(L?.(),B(w.current),c&&f?.(),i&&i())};return n.jsx(HO,{isPresent:j,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:o,mode:l,root:h,onExitComplete:j?void 0:F,anchorX:u,children:M},R)})})},h6=O.createContext({strict:!1}),Uw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mc={};for(const r in Uw)mc[r]={isEnabled:e=>Uw[r].some(t=>!!e[t])};function YO(r){for(const e in r)mc[e]={...mc[e],...r[e]}}const KO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _m(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||KO.has(r)}let g6=r=>!_m(r);function XO(r){typeof r=="function"&&(g6=e=>e.startsWith("on")?!_m(e):r(e))}try{XO(require("@emotion/is-prop-valid").default)}catch{}function QO(r,e,t){const i={};for(const o in r)o==="values"&&typeof r.values=="object"||(g6(o)||t===!0&&_m(o)||!e&&!_m(o)||r.draggable&&o.startsWith("onDrag"))&&(i[o]=r[o]);return i}const c0=O.createContext({});function d0(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function hu(r){return typeof r=="string"||Array.isArray(r)}const Vx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wx=["initial",...Vx];function u0(r){return d0(r.animate)||Wx.some(e=>hu(r[e]))}function m6(r){return!!(u0(r)||r.variants)}function ZO(r,e){if(u0(r)){const{initial:t,animate:i}=r;return{initial:t===!1||hu(t)?t:void 0,animate:hu(i)?i:void 0}}return r.inherit!==!1?e:{}}function JO(r){const{initial:e,animate:t}=ZO(r,O.useContext(c0));return O.useMemo(()=>({initial:e,animate:t}),[qw(e),qw(t)])}function qw(r){return Array.isArray(r)?r.join(" "):r}const gu={};function eM(r){for(const e in r)gu[e]=r[e],Ex(e)&&(gu[e].isCSSVariable=!0)}function f6(r,{layout:e,layoutId:t}){return kc.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!gu[r]||r==="opacity")}const tM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rM=Ac.length;function nM(r,e,t){let i="",o=!0;for(let l=0;l<rM;l++){const c=Ac[l],u=r[c];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(c.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||t){const m=s6(u,Mx[c]);if(!h){o=!1;const f=tM[c]||c;i+=`${f}(${m}) `}t&&(e[c]=m)}}return i=i.trim(),t?i=t(e,o?"":i):o&&(i="none"),i}function Gx(r,e,t){const{style:i,vars:o,transformOrigin:l}=r;let c=!1,u=!1;for(const h in e){const m=e[h];if(kc.has(h)){c=!0;continue}else if(Ex(h)){o[h]=m;continue}else{const f=s6(m,Mx[h]);h.startsWith("origin")?(u=!0,l[h]=f):i[h]=f}}if(e.transform||(c||t?i.transform=nM(e,r.transform,t):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:m="50%",originZ:f=0}=l;i.transformOrigin=`${h} ${m} ${f}`}}const Hx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function p6(r,e,t){for(const i in e)!on(e[i])&&!f6(i,t)&&(r[i]=e[i])}function iM({transformTemplate:r},e){return O.useMemo(()=>{const t=Hx();return Gx(t,e,r),Object.assign({},t.vars,t.style)},[e])}function sM(r,e){const t=r.style||{},i={};return p6(i,t,r),Object.assign(i,iM(r,e)),i}function oM(r,e){const t={},i=sM(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=i,t}const aM={offset:"stroke-dashoffset",array:"stroke-dasharray"},lM={offset:"strokeDashoffset",array:"strokeDasharray"};function cM(r,e,t=1,i=0,o=!0){r.pathLength=1;const l=o?aM:lM;r[l.offset]=ht.transform(-i);const c=ht.transform(e),u=ht.transform(t);r[l.array]=`${c} ${u}`}function y6(r,{attrX:e,attrY:t,attrScale:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},h,m,f){if(Gx(r,u,m),h){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:x,style:b}=r;x.transform&&(b.transform=x.transform,delete x.transform),(b.transform||x.transformOrigin)&&(b.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),b.transform&&(b.transformBox=f?.transformBox??"fill-box",delete x.transformBox),e!==void 0&&(x.x=e),t!==void 0&&(x.y=t),i!==void 0&&(x.scale=i),o!==void 0&&cM(x,o,l,c,!1)}const x6=()=>({...Hx(),attrs:{}}),b6=r=>typeof r=="string"&&r.toLowerCase()==="svg";function dM(r,e,t,i){const o=O.useMemo(()=>{const l=x6();return y6(l,e,b6(i),r.transformTemplate,r.style),{...l.attrs,style:{...l.style}}},[e]);if(r.style){const l={};p6(l,r.style,r),o.style={...l,...o.style}}return o}const uM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ux(r){return typeof r!="string"||r.includes("-")?!1:!!(uM.indexOf(r)>-1||/[A-Z]/u.test(r))}function hM(r,e,t,{latestValues:i},o,l=!1){const u=(Ux(r)?dM:oM)(e,i,o,r),h=QO(e,typeof r=="string",l),m=r!==O.Fragment?{...h,...u,ref:t}:{},{children:f}=e,x=O.useMemo(()=>on(f)?f.get():f,[f]);return O.createElement(r,{...m,children:x})}function Yw(r){const e=[{},{}];return r?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function qx(r,e,t,i){if(typeof e=="function"){const[o,l]=Yw(i);e=e(t!==void 0?t:r.custom,o,l)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[o,l]=Yw(i);e=e(t!==void 0?t:r.custom,o,l)}return e}function Yg(r){return on(r)?r.get():r}function gM({scrapeMotionValuesFromProps:r,createRenderState:e},t,i,o){return{latestValues:mM(t,i,o,r),renderState:e()}}function mM(r,e,t,i){const o={},l=i(r,{});for(const b in l)o[b]=Yg(l[b]);let{initial:c,animate:u}=r;const h=u0(r),m=m6(r);e&&m&&!h&&r.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let f=t?t.initial===!1:!1;f=f||c===!1;const x=f?u:c;if(x&&typeof x!="boolean"&&!d0(x)){const b=Array.isArray(x)?x:[x];for(let S=0;S<b.length;S++){const w=qx(r,b[S]);if(w){const{transitionEnd:T,transition:E,...A}=w;for(const _ in A){let B=A[_];if(Array.isArray(B)){const I=f?B.length-1:0;B=B[I]}B!==null&&(o[_]=B)}for(const _ in T)o[_]=T[_]}}}return o}const v6=r=>(e,t)=>{const i=O.useContext(c0),o=O.useContext(l0),l=()=>gM(r,e,i,o);return t?l():xx(l)};function Yx(r,e,t){const{style:i}=r,o={};for(const l in i)(on(i[l])||e.style&&on(e.style[l])||f6(l,r)||t?.getValue(l)?.liveStyle!==void 0)&&(o[l]=i[l]);return o}const fM=v6({scrapeMotionValuesFromProps:Yx,createRenderState:Hx});function S6(r,e,t){const i=Yx(r,e,t);for(const o in r)if(on(r[o])||on(e[o])){const l=Ac.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[l]=r[o]}return i}const pM=v6({scrapeMotionValuesFromProps:S6,createRenderState:x6}),yM=Symbol.for("motionComponentSymbol");function Hl(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function xM(r,e,t){return O.useCallback(i=>{i&&r.onMount&&r.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Hl(t)&&(t.current=i))},[e])}const Kx=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bM="framerAppearId",w6="data-"+Kx(bM),T6=O.createContext({});function vM(r,e,t,i,o){const{visualElement:l}=O.useContext(c0),c=O.useContext(h6),u=O.useContext(l0),h=O.useContext($x).reducedMotion,m=O.useRef(null);i=i||c.renderer,!m.current&&i&&(m.current=i(r,{visualState:e,parent:l,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const f=m.current,x=O.useContext(T6);f&&!f.projection&&o&&(f.type==="html"||f.type==="svg")&&SM(m.current,t,o,x);const b=O.useRef(!1);O.useInsertionEffect(()=>{f&&b.current&&f.update(t,u)});const S=t[w6],w=O.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return vE(()=>{f&&(b.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),w.current&&f.animationState&&f.animationState.animateChanges())}),O.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),w.current=!1),f.enteringChildren=void 0)}),f}function SM(r,e,t,i){const{layoutId:o,layout:l,drag:c,dragConstraints:u,layoutScroll:h,layoutRoot:m,layoutCrossfade:f}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:j6(r.parent)),r.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!c||u&&Hl(u),visualElement:r,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,crossfade:f,layoutScroll:h,layoutRoot:m})}function j6(r){if(r)return r.options.allowProjection!==!1?r.projection:j6(r.parent)}function Bp(r,{forwardMotionProps:e=!1}={},t,i){t&&YO(t);const o=Ux(r)?pM:fM;function l(u,h){let m;const f={...O.useContext($x),...u,layoutId:wM(u)},{isStatic:x}=f,b=JO(u),S=o(u,x);if(!x&&bx){TM();const w=jM(f);m=w.MeasureLayout,b.visualElement=vM(r,S,f,i,w.ProjectionNode)}return n.jsxs(c0.Provider,{value:b,children:[m&&b.visualElement?n.jsx(m,{visualElement:b.visualElement,...f}):null,hM(r,u,xM(S,b.visualElement,h),S,x,e)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const c=O.forwardRef(l);return c[yM]=r,c}function wM({layoutId:r}){const e=O.useContext(yx).id;return e&&r!==void 0?e+"-"+r:r}function TM(r,e){O.useContext(h6).strict}function jM(r){const{drag:e,layout:t}=mc;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(r)||t?.isEnabled(r)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function AM(r,e){if(typeof Proxy>"u")return Bp;const t=new Map,i=(l,c)=>Bp(l,c,r,e),o=(l,c)=>i(l,c);return new Proxy(o,{get:(l,c)=>c==="create"?i:(t.has(c)||t.set(c,Bp(c,void 0,r,e)),t.get(c))})}function A6({top:r,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:r,max:i}}}function kM({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function EM(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),i=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function zp(r){return r===void 0||r===1}function U1({scale:r,scaleX:e,scaleY:t}){return!zp(r)||!zp(e)||!zp(t)}function Ea(r){return U1(r)||k6(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function k6(r){return Kw(r.x)||Kw(r.y)}function Kw(r){return r&&r!=="0%"}function Rm(r,e,t){const i=r-t,o=e*i;return t+o}function Xw(r,e,t,i,o){return o!==void 0&&(r=Rm(r,o,i)),Rm(r,t,i)+e}function q1(r,e=0,t=1,i,o){r.min=Xw(r.min,e,t,i,o),r.max=Xw(r.max,e,t,i,o)}function E6(r,{x:e,y:t}){q1(r.x,e.translate,e.scale,e.originPoint),q1(r.y,t.translate,t.scale,t.originPoint)}const Qw=.999999999999,Zw=1.0000000000001;function _M(r,e,t,i=!1){const o=t.length;if(!o)return;e.x=e.y=1;let l,c;for(let u=0;u<o;u++){l=t[u],c=l.projectionDelta;const{visualElement:h}=l.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ql(r,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,E6(r,c)),i&&Ea(l.latestValues)&&ql(r,l.latestValues))}e.x<Zw&&e.x>Qw&&(e.x=1),e.y<Zw&&e.y>Qw&&(e.y=1)}function Ul(r,e){r.min=r.min+e,r.max=r.max+e}function Jw(r,e,t,i,o=.5){const l=lr(r.min,r.max,o);q1(r,e,t,l,i)}function ql(r,e){Jw(r.x,e.x,e.scaleX,e.scale,e.originX),Jw(r.y,e.y,e.scaleY,e.scale,e.originY)}function _6(r,e){return A6(EM(r.getBoundingClientRect(),e))}function RM(r,e,t){const i=_6(r,t),{scroll:o}=e;return o&&(Ul(i.x,o.offset.x),Ul(i.y,o.offset.y)),i}const eT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yl=()=>({x:eT(),y:eT()}),tT=()=>({min:0,max:0}),br=()=>({x:tT(),y:tT()}),Y1={current:null},R6={current:!1};function CM(){if(R6.current=!0,!!bx)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>Y1.current=r.matches;r.addEventListener("change",e),e()}else Y1.current=!1}const IM=new WeakMap;function FM(r,e,t){for(const i in e){const o=e[i],l=t[i];if(on(o))r.addValue(i,o);else if(on(l))r.addValue(i,gc(o,{owner:r}));else if(l!==o)if(r.hasValue(i)){const c=r.getValue(i);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=r.getStaticValue(i);r.addValue(i,gc(c!==void 0?c:o,{owner:r}))}}for(const i in t)e[i]===void 0&&r.removeValue(i);return e}const rT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DM{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:l,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=kn.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,or.render(this.render,!1,!0))};const{latestValues:h,renderState:m}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=u,this.blockInitialAnimation=!!l,this.isControllingVariants=u0(t),this.isVariantNode=m6(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...x}=this.scrapeMotionValuesFromProps(t,{},this);for(const b in x){const S=x[b];h[b]!==void 0&&on(S)&&S.set(h[b])}}mount(e){this.current=e,IM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),R6.current||CM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Y1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ho(this.notifyUpdate),Ho(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=kc.has(e);i&&this.onBindTransform&&this.onBindTransform();const o=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&or.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in mc){const t=mc[e];if(!t)continue;const{isEnabled:i,Feature:o}=t;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):br()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<rT.length;i++){const o=rT[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,c=e[l];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=FM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=gc(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(SE(i)||TE(i))?i=parseFloat(i):!NO(i)&&Uo.test(t)&&(i=i6(e,t)),this.setBaseTarget(e,on(i)?i.get():i)),on(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const l=qx(this.props,t,this.presenceContext?.custom);l&&(i=l[e])}if(t&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!on(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new jx),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Lx.render(this.render)}}class C6 extends DM{constructor(){super(...arguments),this.KeyframeResolver=_O}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;on(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function I6(r,{style:e,vars:t},i,o){const l=r.style;let c;for(c in e)l[c]=e[c];o?.applyProjectionStyles(l,i);for(c in t)l.setProperty(c,t[c])}function PM(r){return window.getComputedStyle(r)}class BM extends C6{constructor(){super(...arguments),this.type="html",this.renderInstance=I6}readValueFromInstance(e,t){if(kc.has(t))return this.projection?.isProjecting?L1(t):qz(e,t);{const i=PM(e),o=(Ex(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return _6(e,t)}build(e,t,i){Gx(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Yx(e,t,i)}}const F6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zM(r,e,t,i){I6(r,e,void 0,i);for(const o in e.attrs)r.setAttribute(F6.has(o)?o:Kx(o),e.attrs[o])}class OM extends C6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=br}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(kc.has(t)){const i=n6(t);return i&&i.default||0}return t=F6.has(t)?t:Kx(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return S6(e,t,i)}build(e,t,i){y6(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,o){zM(e,t,i,o)}mount(e){this.isSVGTag=b6(e.tagName),super.mount(e)}}const MM=(r,e)=>Ux(r)?new OM(e):new BM(e,{allowProjection:r!==O.Fragment});function rc(r,e,t){const i=r.getProps();return qx(i,e,t!==void 0?t:i.custom,r)}const K1=r=>Array.isArray(r);function LM(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,gc(t))}function NM(r){return K1(r)?r[r.length-1]||0:r}function $M(r,e){const t=rc(r,e);let{transitionEnd:i={},transition:o={},...l}=t||{};l={...l,...i};for(const c in l){const u=NM(l[c]);LM(r,c,u)}}function VM(r){return!!(on(r)&&r.add)}function X1(r,e){const t=r.getValue("willChange");if(VM(t))return t.add(e);if(!t&&$s.WillChange){const i=new $s.WillChange("auto");r.addValue("willChange",i),i.add(e)}}function D6(r){return r.props[w6]}const WM=r=>r!==null;function GM(r,{repeat:e,repeatType:t="loop"},i){const o=r.filter(WM),l=e&&t!=="loop"&&e%2===1?0:o.length-1;return o[l]}const HM={type:"spring",stiffness:500,damping:25,restSpeed:10},UM=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),qM={type:"keyframes",duration:.8},YM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},KM=(r,{keyframes:e})=>e.length>2?qM:kc.has(r)?r.startsWith("scale")?UM(e[1]):HM:YM;function XM({when:r,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:o,repeat:l,repeatType:c,repeatDelay:u,from:h,elapsed:m,...f}){return!!Object.keys(f).length}const Xx=(r,e,t,i={},o,l)=>c=>{const u=Ox(i,r)||{},h=u.delay||i.delay||0;let{elapsed:m=0}=i;m=m-ts(h);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-m,onUpdate:b=>{e.set(b),u.onUpdate&&u.onUpdate(b)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:r,motionValue:e,element:l?void 0:o};XM(u)||Object.assign(f,KM(r,f)),f.duration&&(f.duration=ts(f.duration)),f.repeatDelay&&(f.repeatDelay=ts(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let x=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(G1(f),f.delay===0&&(x=!0)),($s.instantAnimations||$s.skipAnimations)&&(x=!0,G1(f),f.delay=0),f.allowFlatten=!u.type&&!u.ease,x&&!l&&e.get()!==void 0){const b=GM(f.keyframes,u);if(b!==void 0){or.update(()=>{f.onUpdate(b),f.onComplete()});return}}return u.isSync?new Bx(f):new pO(f)};function QM({protectedKeys:r,needsAnimating:e},t){const i=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function P6(r,e,{delay:t=0,transitionOverride:i,type:o}={}){let{transition:l=r.getDefaultTransition(),transitionEnd:c,...u}=e;i&&(l=i);const h=[],m=o&&r.animationState&&r.animationState.getState()[o];for(const f in u){const x=r.getValue(f,r.latestValues[f]??null),b=u[f];if(b===void 0||m&&QM(m,f))continue;const S={delay:t,...Ox(l||{},f)},w=x.get();if(w!==void 0&&!x.isAnimating&&!Array.isArray(b)&&b===w&&!S.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const A=D6(r);if(A){const _=window.MotionHandoffAnimation(A,f,or);_!==null&&(S.startTime=_,T=!0)}}X1(r,f),x.start(Xx(f,x,b,r.shouldReduceMotion&&e6.has(f)?{type:!1}:S,r,T));const E=x.animation;E&&h.push(E)}return c&&Promise.all(h).then(()=>{or.update(()=>{c&&$M(r,c)})}),h}function B6(r,e,t,i=0,o=1){const l=Array.from(r).sort((m,f)=>m.sortNodePosition(f)).indexOf(e),c=r.size,u=(c-1)*i;return typeof t=="function"?t(l,c):o===1?l*i:u-l*i}function Q1(r,e,t={}){const i=rc(r,e,t.type==="exit"?r.presenceContext?.custom:void 0);let{transition:o=r.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(o=t.transitionOverride);const l=i?()=>Promise.all(P6(r,i,t)):()=>Promise.resolve(),c=r.variantChildren&&r.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:f,staggerDirection:x}=o;return ZM(r,e,h,m,f,x,t)}:()=>Promise.resolve(),{when:u}=o;if(u){const[h,m]=u==="beforeChildren"?[l,c]:[c,l];return h().then(()=>m())}else return Promise.all([l(),c(t.delay)])}function ZM(r,e,t=0,i=0,o=0,l=1,c){const u=[];for(const h of r.variantChildren)h.notify("AnimationStart",e),u.push(Q1(h,e,{...c,delay:t+(typeof i=="function"?0:i)+B6(r.variantChildren,h,i,o,l)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(u)}function JM(r,e,t={}){r.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(l=>Q1(r,l,t));i=Promise.all(o)}else if(typeof e=="string")i=Q1(r,e,t);else{const o=typeof e=="function"?rc(r,e,t.custom):e;i=Promise.all(P6(r,o,t))}return i.then(()=>{r.notify("AnimationComplete",e)})}function z6(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let i=0;i<t;i++)if(e[i]!==r[i])return!1;return!0}const eL=Wx.length;function O6(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?O6(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<eL;t++){const i=Wx[t],o=r.props[i];(hu(o)||o===!1)&&(e[i]=o)}return e}const tL=[...Vx].reverse(),rL=Vx.length;function nL(r){return e=>Promise.all(e.map(({animation:t,options:i})=>JM(r,t,i)))}function iL(r){let e=nL(r),t=nT(),i=!0;const o=h=>(m,f)=>{const x=rc(r,f,h==="exit"?r.presenceContext?.custom:void 0);if(x){const{transition:b,transitionEnd:S,...w}=x;m={...m,...w,...S}}return m};function l(h){e=h(r)}function c(h){const{props:m}=r,f=O6(r.parent)||{},x=[],b=new Set;let S={},w=1/0;for(let E=0;E<rL;E++){const A=tL[E],_=t[A],B=m[A]!==void 0?m[A]:f[A],I=hu(B),L=A===h?_.isActive:null;L===!1&&(w=E);let M=B===f[A]&&B!==m[A]&&I;if(M&&i&&r.manuallyAnimateOnMount&&(M=!1),_.protectedKeys={...S},!_.isActive&&L===null||!B&&!_.prevProp||d0(B)||typeof B=="boolean")continue;const R=sL(_.prevProp,B);let j=R||A===h&&_.isActive&&!M&&I||E>w&&I,F=!1;const z=Array.isArray(B)?B:[B];let P=z.reduce(o(A),{});L===!1&&(P={});const{prevResolvedValues:V={}}=_,N={...V,...P},Z=U=>{j=!0,b.has(U)&&(F=!0,b.delete(U)),_.needsAnimating[U]=!0;const K=r.getValue(U);K&&(K.liveStyle=!1)};for(const U in N){const K=P[U],X=V[U];if(S.hasOwnProperty(U))continue;let re=!1;K1(K)&&K1(X)?re=!z6(K,X):re=K!==X,re?K!=null?Z(U):b.add(U):K!==void 0&&b.has(U)?Z(U):_.protectedKeys[U]=!0}_.prevProp=B,_.prevResolvedValues=P,_.isActive&&(S={...S,...P}),i&&r.blockInitialAnimation&&(j=!1);const Q=M&&R;j&&(!Q||F)&&x.push(...z.map(U=>{const K={type:A};if(typeof U=="string"&&i&&!Q&&r.manuallyAnimateOnMount&&r.parent){const{parent:X}=r,re=rc(X,U);if(X.enteringChildren&&re){const{delayChildren:me}=re.transition||{};K.delay=B6(X.enteringChildren,r,me)}}return{animation:U,options:K}}))}if(b.size){const E={};if(typeof m.initial!="boolean"){const A=rc(r,Array.isArray(m.initial)?m.initial[0]:m.initial);A&&A.transition&&(E.transition=A.transition)}b.forEach(A=>{const _=r.getBaseTarget(A),B=r.getValue(A);B&&(B.liveStyle=!0),E[A]=_??null}),x.push({animation:E})}let T=!!x.length;return i&&(m.initial===!1||m.initial===m.animate)&&!r.manuallyAnimateOnMount&&(T=!1),i=!1,T?e(x):Promise.resolve()}function u(h,m){if(t[h].isActive===m)return Promise.resolve();r.variantChildren?.forEach(x=>x.animationState?.setActive(h,m)),t[h].isActive=m;const f=c(h);for(const x in t)t[x].protectedKeys={};return f}return{animateChanges:c,setActive:u,setAnimateFunction:l,getState:()=>t,reset:()=>{t=nT()}}}function sL(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!z6(e,r):!1}function Aa(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nT(){return{animate:Aa(!0),whileInView:Aa(),whileHover:Aa(),whileTap:Aa(),whileDrag:Aa(),whileFocus:Aa(),exit:Aa()}}class ea{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oL extends ea{constructor(e){super(e),e.animationState||(e.animationState=iL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();d0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let aL=0;class lL extends ea{constructor(){super(...arguments),this.id=aL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);t&&!e&&o.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const cL={animation:{Feature:oL},exit:{Feature:lL}};function mu(r,e,t,i={passive:!0}){return r.addEventListener(e,t,i),()=>r.removeEventListener(e,t)}function Bu(r){return{point:{x:r.pageX,y:r.pageY}}}const dL=r=>e=>Nx(e)&&r(e,Bu(e));function Ud(r,e,t,i){return mu(r,e,dL(t),i)}const M6=1e-4,uL=1-M6,hL=1+M6,L6=.01,gL=0-L6,mL=0+L6;function gn(r){return r.max-r.min}function fL(r,e,t){return Math.abs(r-e)<=t}function iT(r,e,t,i=.5){r.origin=i,r.originPoint=lr(e.min,e.max,r.origin),r.scale=gn(t)/gn(e),r.translate=lr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=uL&&r.scale<=hL||isNaN(r.scale))&&(r.scale=1),(r.translate>=gL&&r.translate<=mL||isNaN(r.translate))&&(r.translate=0)}function qd(r,e,t,i){iT(r.x,e.x,t.x,i?i.originX:void 0),iT(r.y,e.y,t.y,i?i.originY:void 0)}function sT(r,e,t){r.min=t.min+e.min,r.max=r.min+gn(e)}function pL(r,e,t){sT(r.x,e.x,t.x),sT(r.y,e.y,t.y)}function oT(r,e,t){r.min=e.min-t.min,r.max=r.min+gn(e)}function Yd(r,e,t){oT(r.x,e.x,t.x),oT(r.y,e.y,t.y)}function si(r){return[r("x"),r("y")]}const N6=({current:r})=>r?r.ownerDocument.defaultView:null,aT=(r,e)=>Math.abs(r-e);function yL(r,e){const t=aT(r.x,e.x),i=aT(r.y,e.y);return Math.sqrt(t**2+i**2)}class $6{constructor(e,t,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Mp(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,w=yL(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!w)return;const{point:T}=b,{timestamp:E}=Yr;this.history.push({...T,timestamp:E});const{onStart:A,onMove:_}=this.handlers;S||(A&&A(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,b)},this.handlePointerMove=(b,S)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=Op(S,this.transformPagePoint),or.update(this.updatePoint,!0)},this.handlePointerUp=(b,S)=>{this.end();const{onEnd:w,onSessionEnd:T,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=Mp(b.type==="pointercancel"?this.lastMoveEventInfo:Op(S,this.transformPagePoint),this.history);this.startEvent&&w&&w(b,A),T&&T(b,A)},!Nx(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=o||window;const u=Bu(e),h=Op(u,this.transformPagePoint),{point:m}=h,{timestamp:f}=Yr;this.history=[{...m,timestamp:f}];const{onSessionStart:x}=t;x&&x(e,Mp(h,this.history)),this.removeListeners=Fu(Ud(this.contextWindow,"pointermove",this.handlePointerMove),Ud(this.contextWindow,"pointerup",this.handlePointerUp),Ud(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ho(this.updatePoint)}}function Op(r,e){return e?{point:e(r.point)}:r}function lT(r,e){return{x:r.x-e.x,y:r.y-e.y}}function Mp({point:r},e){return{point:r,delta:lT(r,V6(e)),offset:lT(r,xL(e)),velocity:bL(e,.1)}}function xL(r){return r[0]}function V6(r){return r[r.length-1]}function bL(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,i=null;const o=V6(r);for(;t>=0&&(i=r[t],!(o.timestamp-i.timestamp>ts(e)));)t--;if(!i)return{x:0,y:0};const l=li(o.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const c={x:(o.x-i.x)/l,y:(o.y-i.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function vL(r,{min:e,max:t},i){return e!==void 0&&r<e?r=i?lr(e,r,i.min):Math.max(r,e):t!==void 0&&r>t&&(r=i?lr(t,r,i.max):Math.min(r,t)),r}function cT(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function SL(r,{top:e,left:t,bottom:i,right:o}){return{x:cT(r.x,t,o),y:cT(r.y,e,i)}}function dT(r,e){let t=e.min-r.min,i=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,i]=[i,t]),{min:t,max:i}}function wL(r,e){return{x:dT(r.x,e.x),y:dT(r.y,e.y)}}function TL(r,e){let t=.5;const i=gn(r),o=gn(e);return o>i?t=cu(e.min,e.max-i,r.min):i>o&&(t=cu(r.min,r.max-o,e.min)),Ns(0,1,t)}function jL(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const Z1=.35;function AL(r=Z1){return r===!1?r=0:r===!0&&(r=Z1),{x:uT(r,"left","right"),y:uT(r,"top","bottom")}}function uT(r,e,t){return{min:hT(r,e),max:hT(r,t)}}function hT(r,e){return typeof r=="number"?r:r[e]||0}const kL=new WeakMap;class EL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=br(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=x=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Bu(x).point)},c=(x,b)=>{const{drag:S,dragPropagation:w,onDragStart:T}=this.getProps();if(S&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=FO(S),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),si(A=>{let _=this.getAxisMotionValue(A).get()||0;if(rs.test(_)){const{projection:B}=this.visualElement;if(B&&B.layout){const I=B.layout.layoutBox[A];I&&(_=gn(I)*(parseFloat(_)/100))}}this.originPoint[A]=_}),T&&or.postRender(()=>T(x,b)),X1(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},u=(x,b)=>{this.latestPointerEvent=x,this.latestPanInfo=b;const{dragPropagation:S,dragDirectionLock:w,onDirectionLock:T,onDrag:E}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:A}=b;if(w&&this.currentDirection===null){this.currentDirection=_L(A),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",b.point,A),this.updateAxis("y",b.point,A),this.visualElement.render(),E&&E(x,b)},h=(x,b)=>{this.latestPointerEvent=x,this.latestPanInfo=b,this.stop(x,b),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>si(x=>this.getAnimationState(x)==="paused"&&this.getAxisMotionValue(x).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new $6(e,{onSessionStart:l,onStart:c,onMove:u,onSessionEnd:h,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:i,contextWindow:N6(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,o=t||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!i)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&or.postRender(()=>u(i,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:o}=this.getProps();if(!i||!mg(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=vL(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;e&&Hl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=SL(i.layoutBox,e):this.constraints=!1,this.elastic=AL(t),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&si(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=jL(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Hl(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=RM(i,o.root,this.visualElement.getTransformPagePoint());let c=wL(o.layout.layoutBox,l);if(t){const u=t(kM(c));this.hasMutatedConstraints=!!u,u&&(c=A6(u))}return c}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:o,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},m=si(f=>{if(!mg(f,t,this.currentDirection))return;let x=h&&h[f]||{};c&&(x={min:0,max:0});const b=o?200:1e6,S=o?40:1e7,w={type:"inertia",velocity:i?e[f]:0,bounceStiffness:b,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...x};return this.startAxisValueAnimation(f,w)});return Promise.all(m).then(u)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return X1(this.visualElement,e),i.start(Xx(e,i,0,t,this.visualElement,!1))}stopAnimation(){si(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){si(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[t];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){si(t=>{const{drag:i}=this.getProps();if(!mg(t,i,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(t);if(o&&o.layout){const{min:c,max:u}=o.layout.layoutBox[t];l.set(e[t]-lr(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Hl(t)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};si(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const h=u.get();o[c]=TL({min:h,max:h},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),si(c=>{if(!mg(c,e,null))return;const u=this.getAxisMotionValue(c),{min:h,max:m}=this.constraints[c];u.set(lr(h,m,o[c]))})}addListeners(){if(!this.visualElement.current)return;kL.set(this.visualElement,this);const e=this.visualElement.current,t=Ud(e,"pointerdown",h=>{const{drag:m,dragListener:f=!0}=this.getProps();m&&f&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Hl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),or.read(i);const c=mu(window,"resize",()=>this.scalePositionWithinConstraints()),u=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:m})=>{this.isDragging&&m&&(si(f=>{const x=this.getAxisMotionValue(f);x&&(this.originPoint[f]+=h[f].translate,x.set(x.get()+h[f].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:c=Z1,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:u}}}function mg(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function _L(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class RL extends ea{constructor(e){super(e),this.removeGroupControls=di,this.removeListeners=di,this.controls=new EL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||di}unmount(){this.removeGroupControls(),this.removeListeners()}}const gT=r=>(e,t)=>{r&&or.postRender(()=>r(e,t))};class CL extends ea{constructor(){super(...arguments),this.removePointerDownListener=di}onPointerDown(e){this.session=new $6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:N6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:gT(e),onStart:gT(t),onMove:i,onEnd:(l,c)=>{delete this.session,o&&or.postRender(()=>o(l,c))}}}mount(){this.removePointerDownListener=Ud(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Kg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mT(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const kd={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(ht.test(r))r=parseFloat(r);else return r;const t=mT(r,e.target.x),i=mT(r,e.target.y);return`${t}% ${i}%`}},IL={correct:(r,{treeScale:e,projectionDelta:t})=>{const i=r,o=Uo.parse(r);if(o.length>5)return i;const l=Uo.createTransformer(r),c=typeof o[0]!="number"?1:0,u=t.x.scale*e.x,h=t.y.scale*e.y;o[0+c]/=u,o[1+c]/=h;const m=lr(u,h,.5);return typeof o[2+c]=="number"&&(o[2+c]/=m),typeof o[3+c]=="number"&&(o[3+c]/=m),l(o)}};let Lp=!1;class FL extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:o}=this.props,{projection:l}=e;eM(DL),l&&(t.group&&t.group.add(l),i&&i.register&&o&&i.register(l),Lp&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Kg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:o,isPresent:l}=this.props,{projection:c}=i;return c&&(c.isPresent=l,Lp=!0,o||e.layoutDependency!==t||t===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||or.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Lx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:o}=e;Lp=!0,o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function W6(r){const[e,t]=u6(),i=O.useContext(yx);return n.jsx(FL,{...r,layoutGroup:i,switchLayoutGroup:O.useContext(T6),isPresent:e,safeToRemove:t})}const DL={borderRadius:{...kd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kd,borderTopRightRadius:kd,borderBottomLeftRadius:kd,borderBottomRightRadius:kd,boxShadow:IL};function PL(r,e,t){const i=on(r)?r:gc(r);return i.start(Xx("",i,e,t)),i.animation}const BL=(r,e)=>r.depth-e.depth;class zL{constructor(){this.children=[],this.isDirty=!1}add(e){vx(this.children,e),this.isDirty=!0}remove(e){Sx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BL),this.isDirty=!1,this.children.forEach(e)}}function OL(r,e){const t=kn.now(),i=({timestamp:o})=>{const l=o-t;l>=e&&(Ho(i),r(l-e))};return or.setup(i,!0),()=>Ho(i)}const G6=["TopLeft","TopRight","BottomLeft","BottomRight"],ML=G6.length,fT=r=>typeof r=="string"?parseFloat(r):r,pT=r=>typeof r=="number"||ht.test(r);function LL(r,e,t,i,o,l){o?(r.opacity=lr(0,t.opacity??1,NL(i)),r.opacityExit=lr(e.opacity??1,0,$L(i))):l&&(r.opacity=lr(e.opacity??1,t.opacity??1,i));for(let c=0;c<ML;c++){const u=`border${G6[c]}Radius`;let h=yT(e,u),m=yT(t,u);if(h===void 0&&m===void 0)continue;h||(h=0),m||(m=0),h===0||m===0||pT(h)===pT(m)?(r[u]=Math.max(lr(fT(h),fT(m),i),0),(rs.test(m)||rs.test(h))&&(r[u]+="%")):r[u]=m}(e.rotate||t.rotate)&&(r.rotate=lr(e.rotate||0,t.rotate||0,i))}function yT(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const NL=H6(0,.5,IE),$L=H6(.5,.95,di);function H6(r,e,t){return i=>i<r?0:i>e?1:t(cu(r,e,i))}function xT(r,e){r.min=e.min,r.max=e.max}function ri(r,e){xT(r.x,e.x),xT(r.y,e.y)}function bT(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function vT(r,e,t,i,o){return r-=e,r=Rm(r,1/t,i),o!==void 0&&(r=Rm(r,1/o,i)),r}function VL(r,e=0,t=1,i=.5,o,l=r,c=r){if(rs.test(e)&&(e=parseFloat(e),e=lr(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=lr(l.min,l.max,i);r===l&&(u-=e),r.min=vT(r.min,e,t,u,o),r.max=vT(r.max,e,t,u,o)}function ST(r,e,[t,i,o],l,c){VL(r,e[t],e[i],e[o],e.scale,l,c)}const WL=["x","scaleX","originX"],GL=["y","scaleY","originY"];function wT(r,e,t,i){ST(r.x,e,WL,t?t.x:void 0,i?i.x:void 0),ST(r.y,e,GL,t?t.y:void 0,i?i.y:void 0)}function TT(r){return r.translate===0&&r.scale===1}function U6(r){return TT(r.x)&&TT(r.y)}function jT(r,e){return r.min===e.min&&r.max===e.max}function HL(r,e){return jT(r.x,e.x)&&jT(r.y,e.y)}function AT(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function q6(r,e){return AT(r.x,e.x)&&AT(r.y,e.y)}function kT(r){return gn(r.x)/gn(r.y)}function ET(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class UL{constructor(){this.members=[]}add(e){vx(this.members,e),e.scheduleRender()}remove(e){if(Sx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let i;for(let o=t;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qL(r,e,t){let i="";const o=r.x.translate/e.x,l=r.y.translate/e.y,c=t?.z||0;if((o||l||c)&&(i=`translate3d(${o}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:f,rotateX:x,rotateY:b,skewX:S,skewY:w}=t;m&&(i=`perspective(${m}px) ${i}`),f&&(i+=`rotate(${f}deg) `),x&&(i+=`rotateX(${x}deg) `),b&&(i+=`rotateY(${b}deg) `),S&&(i+=`skewX(${S}deg) `),w&&(i+=`skewY(${w}deg) `)}const u=r.x.scale*e.x,h=r.y.scale*e.y;return(u!==1||h!==1)&&(i+=`scale(${u}, ${h})`),i||"none"}const Np=["","X","Y","Z"],YL=1e3;let KL=0;function $p(r,e,t,i){const{latestValues:o}=e;o[r]&&(t[r]=o[r],e.setStaticValue(r,0),i&&(i[r]=0))}function Y6(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=D6(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:o,layoutId:l}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",or,!(o||l))}const{parent:i}=r;i&&!i.hasCheckedOptimisedAppear&&Y6(i)}function K6({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(c={},u=e?.()){this.id=KL++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZL),this.nodes.forEach(rN),this.nodes.forEach(nN),this.nodes.forEach(JL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new zL)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new jx),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const h=this.eventHandlers.get(c);h&&h.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=d6(c)&&!MO(c),this.instance=c;const{layoutId:u,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),r){let f,x=0;const b=()=>this.root.updateBlockedByResize=!1;or.read(()=>{x=window.innerWidth}),r(c,()=>{const S=window.innerWidth;S!==x&&(x=S,this.root.updateBlockedByResize=!0,f&&f(),f=OL(b,250),Kg.hasAnimatedSinceResize&&(Kg.hasAnimatedSinceResize=!1,this.nodes.forEach(CT)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&m&&(u||h)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:x,hasRelativeLayoutChanged:b,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||m.getDefaultTransition()||lN,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=m.getProps(),A=!this.targetLayout||!q6(this.targetLayout,S),_=!x&&b;if(this.options.layoutRoot||this.resumeFrom||_||x&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...Ox(w,"layout"),onPlay:T,onComplete:E};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(f,_)}else x||CT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ho(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iN),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Y6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const x=this.path[f];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_T);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(RT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(tN),this.nodes.forEach(XL),this.nodes.forEach(QL)):this.nodes.forEach(RT),this.clearAllSnapshots();const u=kn.now();Yr.delta=Ns(0,1e3/60,u-Yr.timestamp),Yr.timestamp=u,Yr.isProcessing=!0,Rp.update.process(Yr),Rp.preRender.process(Yr),Rp.render.process(Yr),Yr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Lx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(eN),this.sharedNodes.forEach(sN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,or.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){or.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gn(this.snapshot.measuredBox.x)&&!gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=br(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!U6(this.projectionDelta),h=this.getTransformTemplate(),m=h?h(this.latestValues,""):void 0,f=m!==this.prevTransformTemplateValue;c&&this.instance&&(u||Ea(this.latestValues)||f)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return c&&(h=this.removeTransform(h)),cN(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return br();const u=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(dN))){const{scroll:m}=this.root;m&&(Ul(u.x,m.offset.x),Ul(u.y,m.offset.y))}return u}removeElementScroll(c){const u=br();if(ri(u,c),this.scroll?.wasRoot)return u;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:f,options:x}=m;m!==this.root&&f&&x.layoutScroll&&(f.wasRoot&&ri(u,c),Ul(u.x,f.offset.x),Ul(u.y,f.offset.y))}return u}applyTransform(c,u=!1){const h=br();ri(h,c);for(let m=0;m<this.path.length;m++){const f=this.path[m];!u&&f.options.layoutScroll&&f.scroll&&f!==f.root&&ql(h,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Ea(f.latestValues)&&ql(h,f.latestValues)}return Ea(this.latestValues)&&ql(h,this.latestValues),h}removeTransform(c){const u=br();ri(u,c);for(let h=0;h<this.path.length;h++){const m=this.path[h];if(!m.instance||!Ea(m.latestValues))continue;U1(m.latestValues)&&m.updateSnapshot();const f=br(),x=m.measurePageBox();ri(f,x),wT(u,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,f)}return Ea(this.latestValues)&&wT(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:x}=this.options;if(!(!this.layout||!(f||x))){if(this.resolvedRelativeTargetAt=Yr.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=br(),this.relativeTargetOrigin=br(),Yd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),ri(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=br(),this.targetWithTransforms=br()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ri(this.target,this.layout.layoutBox),E6(this.target,this.targetDelta)):ri(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=br(),this.relativeTargetOrigin=br(),Yd(this.relativeTargetOrigin,this.target,b.target),ri(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||U1(this.parent.latestValues)||k6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Yr.timestamp&&(h=!1),h)return;const{layout:m,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||f))return;ri(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,b=this.treeScale.y;_M(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=br());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bT(this.prevProjectionDelta.x,this.projectionDelta.x),bT(this.prevProjectionDelta.y,this.projectionDelta.y)),qd(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==b||!ET(this.projectionDelta.x,this.prevProjectionDelta.x)||!ET(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Yl(),this.projectionDelta=Yl(),this.projectionDeltaWithTransform=Yl()}setAnimationOrigin(c,u=!1){const h=this.snapshot,m=h?h.latestValues:{},f={...this.latestValues},x=Yl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const b=br(),S=h?h.source:void 0,w=this.layout?this.layout.source:void 0,T=S!==w,E=this.getStack(),A=!E||E.members.length<=1,_=!!(T&&!A&&this.options.crossfade===!0&&!this.path.some(aN));this.animationProgress=0;let B;this.mixTargetDelta=I=>{const L=I/1e3;IT(x.x,c.x,L),IT(x.y,c.y,L),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yd(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oN(this.relativeTarget,this.relativeTargetOrigin,b,L),B&&HL(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=br()),ri(B,this.relativeTarget)),T&&(this.animationValues=f,LL(f,m,this.latestValues,L,_,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ho(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=or.update(()=>{Kg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gc(0)),this.currentAnimation=PL(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(YL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:h,layout:m,latestValues:f}=c;if(!(!u||!h||!m)){if(this!==c&&this.layout&&m&&X6(this.options.animationType,this.layout.layoutBox,m.layoutBox)){h=this.target||br();const x=gn(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+x;const b=gn(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+b}ri(u,h),ql(u,f),qd(this.projectionDeltaWithTransform,this.layoutCorrected,u,f)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new UL),this.sharedNodes.get(c).add(u);const m=u.options.initialPromotionConfig;u.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:h}={}){const m=this.getStack();m&&m.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const m={};h.z&&$p("z",c,m,this.animationValues);for(let f=0;f<Np.length;f++)$p(`rotate${Np[f]}`,c,m,this.animationValues),$p(`skew${Np[f]}`,c,m,this.animationValues);c.render();for(const f in m)c.setStaticValue(f,m[f]),this.animationValues&&(this.animationValues[f]=m[f]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Yg(u?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Yg(u?.pointerEvents)||""),this.hasProjected&&!Ea(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const f=m.animationValues||m.latestValues;this.applyTransformsToTarget();let x=qL(this.projectionDeltaWithTransform,this.treeScale,f);h&&(x=h(f,x)),c.transform=x;const{x:b,y:S}=this.projectionDelta;c.transformOrigin=`${b.origin*100}% ${S.origin*100}% 0`,m.animationValues?c.opacity=m===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=m===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in gu){if(f[w]===void 0)continue;const{correct:T,applyTo:E,isCSSVariable:A}=gu[w],_=x==="none"?f[w]:T(f[w],m);if(E){const B=E.length;for(let I=0;I<B;I++)c[E[I]]=_}else A?this.options.visualElement.renderState.vars[w]=_:c[w]=_}this.options.layoutId&&(c.pointerEvents=m===this?Yg(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(_T),this.root.sharedNodes.clear()}}}function XL(r){r.updateLayout()}function QL(r){const e=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=r.layout,{animationType:o}=r.options,l=e.source!==r.layout.source;o==="size"?si(f=>{const x=l?e.measuredBox[f]:e.layoutBox[f],b=gn(x);x.min=t[f].min,x.max=x.min+b}):X6(o,e.layoutBox,t)&&si(f=>{const x=l?e.measuredBox[f]:e.layoutBox[f],b=gn(t[f]);x.max=x.min+b,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[f].max=r.relativeTarget[f].min+b)});const c=Yl();qd(c,t,e.layoutBox);const u=Yl();l?qd(u,r.applyTransform(i,!0),e.measuredBox):qd(u,t,e.layoutBox);const h=!U6(c);let m=!1;if(!r.resumeFrom){const f=r.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:x,layout:b}=f;if(x&&b){const S=br();Yd(S,e.layoutBox,x.layoutBox);const w=br();Yd(w,t,b.layoutBox),q6(S,w)||(m=!0),f.options.layoutRoot&&(r.relativeTarget=w,r.relativeTargetOrigin=S,r.relativeParent=f)}}}r.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(r.isLead()){const{onExitComplete:t}=r.options;t&&t()}r.options.transition=void 0}function ZL(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function JL(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function eN(r){r.clearSnapshot()}function _T(r){r.clearMeasurements()}function RT(r){r.isLayoutDirty=!1}function tN(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function CT(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function rN(r){r.resolveTargetDelta()}function nN(r){r.calcProjection()}function iN(r){r.resetSkewAndRotation()}function sN(r){r.removeLeadSnapshot()}function IT(r,e,t){r.translate=lr(e.translate,0,t),r.scale=lr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function FT(r,e,t,i){r.min=lr(e.min,t.min,i),r.max=lr(e.max,t.max,i)}function oN(r,e,t,i){FT(r.x,e.x,t.x,i),FT(r.y,e.y,t.y,i)}function aN(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const lN={duration:.45,ease:[.4,0,.1,1]},DT=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),PT=DT("applewebkit/")&&!DT("chrome/")?Math.round:di;function BT(r){r.min=PT(r.min),r.max=PT(r.max)}function cN(r){BT(r.x),BT(r.y)}function X6(r,e,t){return r==="position"||r==="preserve-aspect"&&!fL(kT(e),kT(t),.2)}function dN(r){return r!==r.root&&r.scroll?.wasRoot}const uN=K6({attachResizeListener:(r,e)=>mu(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vp={current:void 0},Q6=K6({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Vp.current){const r=new uN({});r.mount(window),r.setOptions({layoutScroll:!0}),Vp.current=r}return Vp.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),hN={pan:{Feature:CL},drag:{Feature:RL,ProjectionNode:Q6,MeasureLayout:W6}};function zT(r,e,t){const{props:i}=r;r.animationState&&i.whileHover&&r.animationState.setActive("whileHover",t==="Start");const o="onHover"+t,l=i[o];l&&or.postRender(()=>l(e,Bu(e)))}class gN extends ea{mount(){const{current:e}=this.node;e&&(this.unmount=DO(e,(t,i)=>(zT(this.node,i,"Start"),o=>zT(this.node,o,"End"))))}unmount(){}}class mN extends ea{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fu(mu(this.node.current,"focus",()=>this.onFocus()),mu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OT(r,e,t){const{props:i}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&i.whileTap&&r.animationState.setActive("whileTap",t==="Start");const o="onTap"+(t==="End"?"":t),l=i[o];l&&or.postRender(()=>l(e,Bu(e)))}class fN extends ea{mount(){const{current:e}=this.node;e&&(this.unmount=OO(e,(t,i)=>(OT(this.node,i,"Start"),(o,{success:l})=>OT(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const J1=new WeakMap,Wp=new WeakMap,pN=r=>{const e=J1.get(r.target);e&&e(r)},yN=r=>{r.forEach(pN)};function xN({root:r,...e}){const t=r||document;Wp.has(t)||Wp.set(t,{});const i=Wp.get(t),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(yN,{root:r,...e})),i[o]}function bN(r,e,t){const i=xN(e);return J1.set(r,t),i.observe(r),()=>{J1.delete(r),i.unobserve(r)}}const vN={some:0,all:1};class SN extends ea{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:o="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:vN[o]},u=h=>{const{isIntersecting:m}=h;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:f,onViewportLeave:x}=this.node.getProps(),b=m?f:x;b&&b(h)};return bN(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(wN(e,t))&&this.startObserver()}unmount(){}}function wN({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const TN={inView:{Feature:SN},tap:{Feature:fN},focus:{Feature:mN},hover:{Feature:gN}},jN={layout:{ProjectionNode:Q6,MeasureLayout:W6}},AN={...cL,...TN,...hN,...jN},Kr=AM(AN,MM),kN=({dataProcessor:r,isMobile:e})=>{const[t,i]=O.useState(null),[o,l]=O.useState(null),[c,u]=O.useState("performance"),[h,m]=O.useState({width:1200,height:700});O.useEffect(()=>{const w=()=>{const T=document.getElementById("galaxy-container");if(T){const E=T.clientWidth,A=e?600:Math.min(700,window.innerHeight*.6);m({width:E,height:A})}};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[e]);const f=O.useMemo(()=>{if(!r)return{teams:[],stats:{}};const w=r.getTeamsBySituation("5on5");if(!w||w.length===0)return{teams:[],stats:{}};const T=w.map(F=>F.xGF_per60||0),E=w.map(F=>F.xGA_per60||0),A=w.map(F=>(F.xGF_per60||0)-(F.xGA_per60||0)),_=Math.min(...T),B=Math.max(...T),I=Math.min(...E),L=Math.max(...E),M=Math.min(...A),R=Math.max(...A);return{teams:w.map(F=>{const z=F.xGF_per60||0,P=F.xGA_per60||0,V=F.pdo||100,N=z-P,Z=e?32:12,Q=100-Z*2,H=Z+(z-_)/(B-_)*Q,K=100-Z-(P-I)/(L-I)*Q;let X="neutral",re=0;V>102?(X="hot",re=Math.min((V-100)/5,1)):V<98&&(X="cold",re=Math.min((100-V)/5,1));const me=e?26:38,ke=e?44:65,te=(N-M)/(R-M),le=me+te*(ke-me);let ve=null,xe=0;V>102?(ve="down",xe=Math.min((V-102)/5,1)):V<98&&(ve="up",xe=Math.min((98-V)/5,1));const ue=Math.abs(V-100)>2,Re=V>102?"FADE":V<98?"BACK":null;return{team:F.team,name:F.name||F.team,x:H,y:K,size:le,temperature:X,tempValue:re,pdo:V.toFixed(1),xGF:z.toFixed(2),xGA:P.toFixed(2),xGD:N.toFixed(2),regressionDirection:ve,regressionStrength:xe,hasValue:ue,bettingAction:Re,gamesPlayed:F.gamesPlayed||0}}),stats:{minXGF:_,maxXGF:B,minXGA:I,maxXGA:L}}},[r]),x=(w,T)=>w==="hot"?`rgba(239, 68, 68, ${.7+T*.3})`:w==="cold"?`rgba(59, 130, 246, ${.7+T*.3})`:"rgba(148, 163, 184, 0.7)",b=(w,T)=>w==="hot"?`0 0 ${20+T*30}px rgba(239, 68, 68, ${.6+T*.4})`:w==="cold"?`0 0 ${20+T*30}px rgba(59, 130, 246, ${.6+T*.4})`:"0 0 15px rgba(148, 163, 184, 0.4)",S=O.useMemo(()=>c==="betting"?f.teams.filter(w=>w.hasValue):f.teams,[f.teams,c]);return!r||f.teams.length===0?n.jsx("div",{style:{padding:e?"2rem 1rem":"3rem 2rem",textAlign:"center",color:"var(--color-text-muted)"},children:"Loading galaxy data..."}):n.jsxs("div",{id:"galaxy-container",style:{padding:e?"2rem 1rem":"4rem 2rem",marginBottom:e?"2rem":"3rem",background:"linear-gradient(180deg, #0A0E1A 0%, #1A1F2E 50%, #0A0E1A 100%)",borderRadius:"20px",border:"1px solid rgba(255, 215, 0, 0.2)",position:"relative",overflow:"visible",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
          radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 80% 70%, rgba(239, 68, 68, 0.08) 0%, transparent 50%),
          radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%)
        `,pointerEvents:"none",animation:"nebulaPulse 10s ease-in-out infinite"}}),n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`
          radial-gradient(2px 2px at 20% 30%, white, transparent),
          radial-gradient(2px 2px at 60% 70%, white, transparent),
          radial-gradient(1px 1px at 50% 50%, white, transparent),
          radial-gradient(1px 1px at 80% 10%, white, transparent),
          radial-gradient(2px 2px at 90% 60%, white, transparent),
          radial-gradient(1px 1px at 33% 80%, white, transparent),
          radial-gradient(1px 1px at 15% 90%, white, transparent)
        `,backgroundSize:"200% 200%",backgroundPosition:"0% 0%",opacity:.4,pointerEvents:"none",animation:"starTwinkle 20s linear infinite"}}),n.jsxs(Kr.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},style:{textAlign:"center",marginBottom:e?"2rem":"3rem",position:"relative",zIndex:1},children:[n.jsx("h2",{style:{fontSize:e?"2rem":"3rem",fontWeight:"900",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 25%, #FF6B6B 50%, #4ECDC4 75%, #FFD700 100%)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"1rem",letterSpacing:"-0.03em",filter:"drop-shadow(0 0 30px rgba(255, 215, 0, 0.4))",animation:"gradientShift 8s ease infinite"},children:"THE NHL GALAXY"}),n.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:e?"1rem":"1.25rem",fontWeight:"500",letterSpacing:"0.05em",textTransform:"uppercase",marginBottom:"0.5rem"},children:"Where Performance Meets Prediction"}),n.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:e?"0.875rem":"1rem",fontWeight:"400"},children:[f.teams.length," teams  Live positioning  Regression analysis"]})]}),!e&&n.jsx(Kr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.6},style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"2rem",position:"relative",zIndex:1},children:[{id:"performance",label:"Performance",icon:fr},{id:"betting",label:"Betting Value",icon:zo}].map(w=>{const T=w.icon,E=c===w.id;return n.jsxs("button",{onClick:()=>u(w.id),style:{padding:"0.75rem 1.5rem",borderRadius:"12px",border:E?"2px solid rgba(255, 215, 0, 0.6)":"1px solid rgba(255, 255, 255, 0.2)",background:E?"linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 165, 0, 0.1) 100%)":"rgba(255, 255, 255, 0.05)",color:E?"#FFD700":"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:E?"0 4px 20px rgba(255, 215, 0, 0.3)":"none"},children:[n.jsx(T,{size:16}),w.label]},w.id)})}),n.jsxs("div",{style:{position:"relative",width:"100%",height:h.height,marginTop:e?"1rem":"2rem",background:"radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.02) 0%, transparent 70%)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"visible"},children:[n.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",opacity:.3},children:[n.jsx("ellipse",{cx:h.width*.75,cy:h.height*.25,rx:h.width*.2,ry:h.height*.15,fill:"none",stroke:"rgba(16, 185, 129, 0.4)",strokeWidth:"1",strokeDasharray:"5,5",style:{animation:"orbitRotate 30s linear infinite"}}),n.jsx("ellipse",{cx:h.width*.5,cy:h.height*.5,rx:h.width*.25,ry:h.height*.2,fill:"none",stroke:"rgba(148, 163, 184, 0.3)",strokeWidth:"1",strokeDasharray:"5,5",style:{animation:"orbitRotate 40s linear infinite reverse"}}),n.jsx("ellipse",{cx:h.width*.25,cy:h.height*.75,rx:h.width*.2,ry:h.height*.15,fill:"none",stroke:"rgba(239, 68, 68, 0.4)",strokeWidth:"1",strokeDasharray:"5,5",style:{animation:"orbitRotate 35s linear infinite"}})]}),n.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"50%",height:"50%",background:"linear-gradient(45deg, rgba(16, 185, 129, 0.12) 0%, transparent 70%)",pointerEvents:"none",borderLeft:"2px dashed rgba(16, 185, 129, 0.3)",borderTop:"2px dashed rgba(16, 185, 129, 0.3)"}}),n.jsx("div",{style:{position:"absolute",top:0,left:0,width:"50%",height:"50%",background:"linear-gradient(225deg, rgba(239, 68, 68, 0.12) 0%, transparent 70%)",pointerEvents:"none",borderRight:"2px dashed rgba(239, 68, 68, 0.3)",borderBottom:"2px dashed rgba(239, 68, 68, 0.3)"}}),n.jsx("div",{style:{position:"absolute",bottom:e?"45px":"55px",right:e?"15px":"20px",padding:e?"0.5rem 1rem":"0.625rem 1.25rem",background:"rgba(16, 185, 129, 0.25)",backdropFilter:"blur(12px)",border:"2px solid rgba(16, 185, 129, 0.5)",borderRadius:"10px",fontSize:e?"0.688rem":"0.813rem",fontWeight:"900",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.08em",pointerEvents:"none",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)"},children:" ELITE ZONE"}),n.jsx("div",{style:{position:"absolute",top:e?"45px":"55px",left:e?"15px":"20px",padding:e?"0.5rem 1rem":"0.625rem 1.25rem",background:"rgba(239, 68, 68, 0.25)",backdropFilter:"blur(12px)",border:"2px solid rgba(239, 68, 68, 0.5)",borderRadius:"10px",fontSize:e?"0.688rem":"0.813rem",fontWeight:"900",color:"#EF4444",textTransform:"uppercase",letterSpacing:"0.08em",pointerEvents:"none",boxShadow:"0 4px 16px rgba(239, 68, 68, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)"},children:" DANGER ZONE"}),n.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",fontSize:e?"0.625rem":"0.75rem",color:"rgba(239, 68, 68, 0.8)",fontWeight:"700",textAlign:"left",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",lineHeight:"1.3",maxWidth:e?"80px":"100px"},children:["BAD OFFENSE",n.jsx("br",{}),"BAD DEFENSE"]}),n.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",fontSize:e?"0.625rem":"0.75rem",color:"rgba(251, 191, 36, 0.8)",fontWeight:"700",textAlign:"right",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",lineHeight:"1.3",maxWidth:e?"80px":"100px"},children:["GOOD OFFENSE",n.jsx("br",{}),"BAD DEFENSE"]}),n.jsxs("div",{style:{position:"absolute",bottom:"10px",left:"10px",fontSize:e?"0.625rem":"0.75rem",color:"rgba(59, 130, 246, 0.8)",fontWeight:"700",textAlign:"left",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",lineHeight:"1.3",maxWidth:e?"80px":"100px"},children:["BAD OFFENSE",n.jsx("br",{}),"GOOD DEFENSE"]}),n.jsxs("div",{style:{position:"absolute",bottom:"10px",right:"10px",fontSize:e?"0.625rem":"0.75rem",color:"rgba(16, 185, 129, 0.8)",fontWeight:"700",textAlign:"right",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",lineHeight:"1.3",maxWidth:e?"80px":"100px"},children:["GOOD OFFENSE",n.jsx("br",{}),"GOOD DEFENSE"]}),n.jsx(qO,{children:S.map((w,T)=>{const E=t===w.team,A=o===w.team,_=E||A,B=(t||o)&&!_,I=w.x/100*h.width,L=w.y/100*h.height;return n.jsxs(Kr.div,{initial:{opacity:0,scale:0},animate:{opacity:B?.3:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.6,delay:T*.02,type:"spring",stiffness:100,damping:15},whileHover:{scale:1.5,zIndex:100},onHoverStart:()=>!o&&!e&&i(w.team),onHoverEnd:()=>!o&&!e&&i(null),onTap:()=>{e&&(o===w.team?l(null):l(w.team))},onClick:()=>{e||(o===w.team?l(null):(l(w.team),i(null)))},style:{position:"absolute",left:I,top:L,transform:"translate(-50%, -50%)",cursor:"pointer",zIndex:_?100:10},children:[w.regressionDirection&&n.jsx(Kr.div,{initial:{opacity:0,x:0,y:0},animate:{opacity:[.5,1,.5],x:w.regressionDirection==="up"?[5,10,5]:[-5,-10,-5],y:w.regressionDirection==="up"?[5,10,5]:[-5,-10,-5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:w.regressionDirection==="up"?"auto":"-25px",bottom:w.regressionDirection==="up"?"-25px":"auto",left:w.regressionDirection==="up"?"auto":"-25px",right:w.regressionDirection==="up"?"-25px":"auto",color:w.regressionDirection==="up"?"#10B981":"#EF4444",filter:`drop-shadow(0 0 8px ${w.regressionDirection==="up"?"#10B981":"#EF4444"})`,rotate:w.regressionDirection==="up"?"90deg":"-135deg"},children:n.jsx(ar,{size:20,strokeWidth:3})}),w.hasValue&&c==="betting"&&n.jsx(Kr.div,{animate:{scale:[1,1.2,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:"-8px",right:"-8px",fontSize:"1rem",filter:"drop-shadow(0 0 8px rgba(255, 215, 0, 0.8))"},children:""}),n.jsxs(Kr.div,{animate:_?{boxShadow:[b(w.temperature,w.tempValue),`0 0 60px ${x(w.temperature,w.tempValue)}`,b(w.temperature,w.tempValue)]}:{boxShadow:b(w.temperature,w.tempValue),scale:[1,1.05,1]},transition:{duration:_?1:3,repeat:1/0,ease:"easeInOut"},style:{width:w.size,height:w.size,borderRadius:"50%",background:`radial-gradient(circle at 30% 30%, ${x(w.temperature,w.tempValue).replace("0.7","1")}, ${x(w.temperature,w.tempValue).replace("0.7","0.6")})`,border:`2px solid ${x(w.temperature,w.tempValue)}`,boxShadow:b(w.temperature,w.tempValue),display:"flex",alignItems:"center",justifyContent:"center",fontSize:e?"0.625rem":"0.75rem",fontWeight:"900",color:"#FFFFFF",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:"10%",left:"20%",width:"40%",height:"40%",borderRadius:"50%",background:"rgba(255, 255, 255, 0.3)",filter:"blur(8px)"}}),n.jsx("span",{style:{position:"relative",zIndex:1},children:w.team})]}),_&&n.jsxs(Kr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{position:"absolute",[L>h.height/2?"bottom":"top"]:"100%",[I>h.width*.7?"right":"left"]:I>h.width*.7?0:"50%",transform:I>h.width*.7?"none":"translateX(-50%)",marginTop:L<=h.height/2?"16px":"0",marginBottom:L>h.height/2?"16px":"0",minWidth:e?"200px":"240px",maxWidth:e?"280px":"320px",padding:e?"0.875rem":"1rem",background:"rgba(10, 14, 26, 0.98)",backdropFilter:"blur(20px)",border:`2px solid ${x(w.temperature,w.tempValue)}`,borderRadius:"12px",boxShadow:`0 8px 32px rgba(0, 0, 0, 0.8), 0 0 20px ${x(w.temperature,w.tempValue)}`,pointerEvents:A?"auto":"none",zIndex:1e3},children:[n.jsxs("div",{style:{fontSize:"1rem",fontWeight:"800",marginBottom:"0.75rem",color:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[w.name,w.temperature==="hot"&&n.jsx(lu,{size:16,color:"#EF4444"}),w.temperature==="cold"&&n.jsx(F1,{size:16,color:"#3B82F6"})]}),A&&n.jsx("div",{style:{fontSize:"0.75rem",color:"#FFD700",background:"rgba(255, 215, 0, 0.2)",padding:"0.25rem 0.5rem",borderRadius:"4px",border:"1px solid rgba(255, 215, 0, 0.4)"},children:" LOCKED"})]}),n.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(255, 255, 255, 0.8)",lineHeight:"1.6",marginBottom:"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"PDO:"}),n.jsx("span",{style:{fontWeight:"700",color:x(w.temperature,w.tempValue)},children:w.pdo})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"xGD/60:"}),n.jsxs("span",{style:{fontWeight:"700",color:parseFloat(w.xGD)>0?"#10B981":"#EF4444"},children:[parseFloat(w.xGD)>0?"+":"",w.xGD]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"xGF/60:"}),n.jsx("span",{style:{fontWeight:"700",color:"#10B981"},children:w.xGF})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{children:"xGA/60:"}),n.jsx("span",{style:{fontWeight:"700",color:"#EF4444"},children:w.xGA})]})]}),w.bettingAction&&n.jsx("div",{style:{padding:"0.5rem",borderRadius:"6px",background:w.bettingAction==="FADE"?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",border:`1px solid ${w.bettingAction==="FADE"?"#EF4444":"#10B981"}`,fontSize:"0.75rem",fontWeight:"800",textAlign:"center",color:w.bettingAction==="FADE"?"#EF4444":"#10B981",textTransform:"uppercase",letterSpacing:"0.05em"},children:w.bettingAction==="FADE"?" FADE THIS TEAM":" BACK THIS TEAM"})]})]},w.team)})})]}),n.jsx(Kr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.6},style:{marginTop:e?"1.5rem":"2rem",padding:e?"1rem":"1.5rem",background:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",position:"relative",zIndex:1},children:n.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(255, 255, 255, 0.7)",lineHeight:"1.8",display:"grid",gridTemplateColumns:e?"1fr":"repeat(2, 1fr)",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#FFD700"},children:"Position:"})," Offense () vs Defense ()"]}),n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#FFD700"},children:"Size:"})," xG Differential (bigger = better)"]}),n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#EF4444"},children:" Hot:"})," PDO > 102 (overperforming)"]}),n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#3B82F6"},children:" Cold:"})," PDO < 98 (underperforming)"]}),n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#10B981"},children:" Arrow:"})," Will improve (BACK)"]}),n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#EF4444"},children:" Arrow:"})," Will decline (FADE)"]})]})}),n.jsx("style",{children:`
        @keyframes nebulaPulse {
          0%, 100% { opacity: 0.6; }
          50% { opacity: 1; }
        }
        @keyframes starTwinkle {
          0% { opacity: 0.3; }
          50% { opacity: 0.6; }
          100% { opacity: 0.3; }
        }
        @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @keyframes orbitRotate {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},EN=({dataProcessor:r,isMobile:e})=>{const[t,i]=O.useState("ALL"),[o,l]=O.useState(null),c={EAST:["BOS","BUF","CAR","CBJ","DET","FLA","MTL","NJD","NYI","NYR","OTT","PHI","PIT","TBL","TOR","WSH"],WEST:["ANA","CGY","CHI","COL","DAL","EDM","LAK","MIN","NSH","SEA","SJS","STL","UTA","VAN","VGK","WPG"]},u=O.useMemo(()=>{if(!r)return{east:[],west:[],stats:{}};const S=r.getTeamsBySituation("5on5");if(!S||S.length===0)return{east:[],west:[],stats:{}};const w={};S.forEach(A=>{const _=A.pdo||100,B=(A.xGF_per60||0)-(A.xGA_per60||0);let I="neutral",L=0;_>102?(I="hot",L=Math.min((_-100)/5,1)):_<98&&(I="cold",L=Math.min((100-_)/5,1));const M=Math.abs(_-100)>2;let R=null;_>102&&(R="FADE"),_<98&&(R="BACK"),w[A.team]={team:A.team,name:A.name||A.team,pdo:_.toFixed(1),xGD:B.toFixed(2),xGF:(A.xGF_per60||0).toFixed(2),xGA:(A.xGA_per60||0).toFixed(2),gamesPlayed:A.gamesPlayed||0,temperature:I,tempValue:L,hasValue:M,regressionDirection:R}});const T=c.EAST.filter(A=>w[A]).map(A=>w[A]),E=c.WEST.filter(A=>w[A]).map(A=>w[A]);return{east:T,west:E,stats:w}},[r]),h=(S,w)=>S==="hot"?`rgba(239, 68, 68, ${.3+w*.5})`:S==="cold"?`rgba(59, 130, 246, ${.3+w*.5})`:"rgba(148, 163, 184, 0.2)",m=S=>S==="hot"?"2px solid rgba(239, 68, 68, 0.6)":S==="cold"?"2px solid rgba(59, 130, 246, 0.6)":"1px solid rgba(148, 163, 184, 0.3)",f=S=>S==="hot"?n.jsx(lu,{size:14,color:"#EF4444"}):S==="cold"?n.jsx(F1,{size:14,color:"#3B82F6"}):null,x=O.useMemo(()=>t==="EAST"?{east:u.east,west:[]}:t==="WEST"?{east:[],west:u.west}:u,[t,u]),b=O.useMemo(()=>{const S=[...u.east,...u.west];return{hot:S.filter(w=>w.temperature==="hot").length,cold:S.filter(w=>w.temperature==="cold").length,neutral:S.filter(w=>w.temperature==="neutral").length,value:S.filter(w=>w.hasValue).length}},[u]);return!r||u.east.length===0?n.jsx("div",{style:{padding:e?"2rem 1rem":"3rem 2rem",textAlign:"center",color:"var(--color-text-muted)"},children:"Loading league temperature data..."}):n.jsxs("div",{style:{padding:e?"2rem 1rem":"3rem 2rem",marginBottom:e?"2rem":"3rem",background:"linear-gradient(180deg, rgba(26, 31, 46, 0.6) 0%, rgba(10, 14, 26, 0.8) 100%)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",position:"relative",overflow:"hidden"},children:[n.jsxs(Kr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{textAlign:"center",marginBottom:e?"1.5rem":"2rem"},children:[n.jsx("h2",{style:{fontSize:e?"1.5rem":"2rem",fontWeight:"800",background:"linear-gradient(135deg, #EF4444 0%, #3B82F6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:"League Temperature Map"}),n.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:e?"0.875rem":"1rem",maxWidth:"600px",margin:"0 auto"},children:"PDO-based performance tracking  Hot teams overperforming  Cold teams underperforming"})]}),n.jsxs(Kr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},style:{display:"flex",justifyContent:"center",gap:e?"0.75rem":"1.5rem",marginBottom:e?"1.5rem":"2rem",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(239, 68, 68, 0.15)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[n.jsx(lu,{size:16,color:"#EF4444"}),n.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#EF4444"},children:[b.hot," Hot"]})]}),n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(148, 163, 184, 0.15)",borderRadius:"8px",border:"1px solid rgba(148, 163, 184, 0.3)"},children:n.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#94A3B8"},children:[b.neutral," Neutral"]})}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(59, 130, 246, 0.15)",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.3)"},children:[n.jsx(F1,{size:16,color:"#3B82F6"}),n.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#3B82F6"},children:[b.cold," Cold"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(255, 215, 0, 0.15)",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[n.jsx("span",{style:{fontSize:"1rem"},children:""}),n.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#FFD700"},children:[b.value," Value"]})]})]}),!e&&n.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"2rem"},children:["ALL","EAST","WEST"].map(S=>n.jsx("button",{onClick:()=>i(S),style:{padding:"0.5rem 1.5rem",borderRadius:"8px",border:t===S?"2px solid var(--color-accent)":"1px solid rgba(255, 255, 255, 0.2)",background:t===S?"rgba(212, 175, 55, 0.2)":"rgba(255, 255, 255, 0.05)",color:t===S?"var(--color-accent)":"var(--color-text-secondary)",fontSize:"0.875rem",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"0.05em"},children:S},S))}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:e?"1fr":t==="ALL"?"1fr 1fr":"1fr",gap:e?"1.5rem":"2rem"},children:[x.east.length>0&&n.jsxs(Kr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},children:[n.jsx("h3",{style:{fontSize:e?"1rem":"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem",textAlign:"center",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Eastern Conference"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:e?"0.5rem":"0.75rem"},children:x.east.map((S,w)=>n.jsxs(Kr.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:w*.03},whileHover:{scale:1.05,zIndex:10},onHoverStart:()=>l(S.team),onHoverEnd:()=>l(null),style:{aspectRatio:"1",background:h(S.temperature,S.tempValue),border:m(S.temperature),borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",transition:"all 0.3s ease",boxShadow:o===S.team?`0 8px 24px ${S.temperature==="hot"?"rgba(239, 68, 68, 0.4)":S.temperature==="cold"?"rgba(59, 130, 246, 0.4)":"rgba(148, 163, 184, 0.4)"}`:"none"},children:[S.regressionDirection&&n.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:e?"0.5rem":"0.563rem",fontWeight:"900",color:"#FFFFFF",background:S.regressionDirection==="FADE"?"rgba(239, 68, 68, 0.95)":"rgba(16, 185, 129, 0.95)",padding:e?"0.2rem 0.3rem":"0.25rem 0.4rem",borderRadius:"4px",border:`2px solid ${S.regressionDirection==="FADE"?"#DC2626":"#059669"}`,letterSpacing:"0.03em",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",boxShadow:S.regressionDirection==="FADE"?"0 2px 8px rgba(239, 68, 68, 0.6)":"0 2px 8px rgba(16, 185, 129, 0.6)"},children:S.regressionDirection}),f(S.temperature)&&n.jsx("div",{style:{marginBottom:"0.25rem"},children:f(S.temperature)}),n.jsx("div",{style:{fontSize:e?"0.75rem":"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:S.team}),n.jsx("div",{style:{fontSize:e?"0.625rem":"0.688rem",color:"rgba(255, 255, 255, 0.7)",fontWeight:"600"},children:S.pdo}),o===S.team&&!e&&n.jsxs(Kr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",padding:"0.75rem",background:"rgba(10, 14, 26, 0.95)",backdropFilter:"blur(10px)",border:`2px solid ${S.temperature==="hot"?"#EF4444":S.temperature==="cold"?"#3B82F6":"#94A3B8"}`,borderRadius:"8px",minWidth:"180px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"none",zIndex:1e3},children:[n.jsx("div",{style:{fontSize:"0.813rem",fontWeight:"700",marginBottom:"0.5rem",color:"var(--color-text-primary)"},children:S.name}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.8)",lineHeight:"1.5"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"PDO:"}),n.jsx("span",{style:{fontWeight:"600"},children:S.pdo})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"xGD/60:"}),n.jsxs("span",{style:{fontWeight:"600",color:parseFloat(S.xGD)>0?"#10B981":"#EF4444"},children:[parseFloat(S.xGD)>0?"+":"",S.xGD]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"xGF/60:"}),n.jsx("span",{style:{fontWeight:"600",color:"#10B981"},children:S.xGF})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{children:"xGA/60:"}),n.jsx("span",{style:{fontWeight:"600",color:"#EF4444"},children:S.xGA})]})]})]})]},S.team))})]}),x.west.length>0&&n.jsxs(Kr.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},children:[n.jsx("h3",{style:{fontSize:e?"1rem":"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem",textAlign:"center",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Western Conference"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:e?"0.5rem":"0.75rem"},children:x.west.map((S,w)=>n.jsxs(Kr.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:w*.03},whileHover:{scale:1.05,zIndex:10},onHoverStart:()=>l(S.team),onHoverEnd:()=>l(null),style:{aspectRatio:"1",background:h(S.temperature,S.tempValue),border:m(S.temperature),borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",transition:"all 0.3s ease",boxShadow:o===S.team?`0 8px 24px ${S.temperature==="hot"?"rgba(239, 68, 68, 0.4)":S.temperature==="cold"?"rgba(59, 130, 246, 0.4)":"rgba(148, 163, 184, 0.4)"}`:"none"},children:[S.regressionDirection&&n.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:e?"0.5rem":"0.563rem",fontWeight:"900",color:"#FFFFFF",background:S.regressionDirection==="FADE"?"rgba(239, 68, 68, 0.95)":"rgba(16, 185, 129, 0.95)",padding:e?"0.2rem 0.3rem":"0.25rem 0.4rem",borderRadius:"4px",border:`2px solid ${S.regressionDirection==="FADE"?"#DC2626":"#059669"}`,letterSpacing:"0.03em",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",boxShadow:S.regressionDirection==="FADE"?"0 2px 8px rgba(239, 68, 68, 0.6)":"0 2px 8px rgba(16, 185, 129, 0.6)"},children:S.regressionDirection}),f(S.temperature)&&n.jsx("div",{style:{marginBottom:"0.25rem"},children:f(S.temperature)}),n.jsx("div",{style:{fontSize:e?"0.75rem":"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:S.team}),n.jsx("div",{style:{fontSize:e?"0.625rem":"0.688rem",color:"rgba(255, 255, 255, 0.7)",fontWeight:"600"},children:S.pdo}),o===S.team&&!e&&n.jsxs(Kr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",padding:"0.75rem",background:"rgba(10, 14, 26, 0.95)",backdropFilter:"blur(10px)",border:`2px solid ${S.temperature==="hot"?"#EF4444":S.temperature==="cold"?"#3B82F6":"#94A3B8"}`,borderRadius:"8px",minWidth:"180px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"none",zIndex:1e3},children:[n.jsx("div",{style:{fontSize:"0.813rem",fontWeight:"700",marginBottom:"0.5rem",color:"var(--color-text-primary)"},children:S.name}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.8)",lineHeight:"1.5"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"PDO:"}),n.jsx("span",{style:{fontWeight:"600"},children:S.pdo})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"xGD/60:"}),n.jsxs("span",{style:{fontWeight:"600",color:parseFloat(S.xGD)>0?"#10B981":"#EF4444"},children:[parseFloat(S.xGD)>0?"+":"",S.xGD]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{children:"xGF/60:"}),n.jsx("span",{style:{fontWeight:"600",color:"#10B981"},children:S.xGF})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{children:"xGA/60:"}),n.jsx("span",{style:{fontWeight:"600",color:"#EF4444"},children:S.xGA})]})]})]})]},S.team))})]})]}),n.jsx(Kr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},style:{marginTop:e?"1.5rem":"2rem",padding:e?"1rem":"1.5rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:n.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",lineHeight:"1.6",textAlign:"center"},children:[n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"PDO = Shooting % + Save %"})," (League average: 100)"]}),n.jsx("div",{style:{marginBottom:"0.5rem"},children:" Hot (PDO > 102)   Neutral (PDO 98-102)   Cold (PDO < 98)"}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#EF4444",fontWeight:"700"},children:"FADE"})," = Overperforming (bet against) ",n.jsx("span",{style:{color:"#10B981",fontWeight:"700"},children:" BACK"})," = Underperforming (bet on)"]})]})})]})};async function _N(){try{console.log(" Loading skaters.csv...");const r=await fetch("/skaters.csv");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const e=await r.text();console.log(` CSV loaded: ${e.length} characters`);const t=fu.parse(e,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,transformHeader:i=>i.trim()});return console.log(` Parsed ${t.data.length} player records`),t.errors.length>0&&console.warn(" Parse warnings:",t.errors.slice(0,5)),t.data}catch(r){return console.error(" Error loading player data:",r),[]}}function Hi(r,e,t){return t===e?50:Math.max(0,Math.min(100,(r-e)/(t-e)*100))}async function RN(){const r=await _N();if(!r||r.length===0)return[];const t=r.filter(h=>h.situation==="all"&&h.games_played>=5&&h.icetime/h.games_played/60>=10).sort((h,m)=>m.icetime-h.icetime).slice(0,150),i={points:t.map(h=>h.I_F_points||0),goals:t.map(h=>h.I_F_goals||0),shots:t.map(h=>h.I_F_shots||0),xGF:t.map(h=>h.I_F_xGoals||0),blocks:t.map(h=>h.shotsBlockedByPlayer||0),hits:t.map(h=>h.I_F_hits||0),takeaways:t.map(h=>h.I_F_takeaways||0),icetime:t.map(h=>h.icetime||0),pointsPerTOI:t.map(h=>(h.I_F_points||0)/(h.icetime/60||1)),shootingPct:t.map(h=>{const m=h.I_F_shots||0,f=h.I_F_goals||0;return m>0?f/m*100:0})},o={};for(const[h,m]of Object.entries(i))o[h]={min:Math.min(...m),max:Math.max(...m)};const l=r.filter(h=>h.situation==="5on4"),c=new Map;l.forEach(h=>{c.set(h.playerId,{ppPoints:h.I_F_points||0,ppIceTime:h.icetime||0})});const u=t.map(h=>{const m=c.get(h.playerId)||{ppPoints:0,ppIceTime:0},f=Hi(h.I_F_points||0,o.points.min,o.points.max),x=Hi(h.I_F_goals||0,o.goals.min,o.goals.max),b=Hi(h.I_F_shots||0,o.shots.min,o.shots.max),S=Hi(h.I_F_xGoals||0,o.xGF.min,o.xGF.max),w=Hi(h.shotsBlockedByPlayer||0,o.blocks.min,o.blocks.max),T=Hi(h.I_F_hits||0,o.hits.min,o.hits.max),E=Hi(h.I_F_takeaways||0,o.takeaways.min,o.takeaways.max),A=(h.I_F_points||0)/(h.icetime/60||1),_=(h.I_F_shots||0)>0?(h.I_F_goals||0)/(h.I_F_shots||0)*100:0,B=Hi(A,o.pointsPerTOI.min,o.pointsPerTOI.max),I=Hi(_,o.shootingPct.min,o.shootingPct.max),L=f*.4+x*.3+b*.15+S*.15,M=w*.5+T*.3+E*.2,R=Hi(m.ppPoints+m.ppIceTime/60,0,Math.max(...t.map(z=>{const P=c.get(z.playerId)||{ppPoints:0,ppIceTime:0};return P.ppPoints+P.ppIceTime/60}))),j=B*.6+I*.4,F=L*.4+M*.3+R*.2+j*.1;return{playerId:h.playerId,name:h.name,team:h.team,position:h.position,gamesPlayed:h.games_played,points:h.I_F_points||0,goals:h.I_F_goals||0,assists:h.I_F_primaryAssists+h.I_F_secondaryAssists||0,shots:h.I_F_shots||0,blocks:h.shotsBlockedByPlayer||0,hits:h.I_F_hits||0,takeaways:h.I_F_takeaways||0,ppPoints:m.ppPoints,icetime:h.icetime,offenseScore:Math.round(L),defenseScore:Math.round(M),specialTeamsScore:Math.round(R),efficiencyScore:Math.round(j),overallScore:Math.round(F)}});return console.log(` Thermal Hexmap: Processed ${u.length} elite players`),console.log(" Sample scores:",u.slice(0,3).map(h=>({name:h.name,offense:h.offenseScore,defense:h.defenseScore,overall:h.overallScore}))),u}const CN=({isMobile:r})=>{const[e,t]=O.useState([]),[i,o]=O.useState(!0),[l,c]=O.useState(null),[u,h]=O.useState("overall"),[m,f]=O.useState(null),[x,b]=O.useState(null),[S,w]=O.useState("");O.useEffect(()=>{async function Z(){try{o(!0),c(null);const Q=await RN();t(Q),console.log(` Thermal Hexmap: ${Q.length} players loaded`)}catch(Q){console.error(" Error loading thermal hexmap data:",Q),c(Q.message)}finally{o(!1)}}Z()},[]);const T=r?12:16,E=T*3.5,A=r?10:15,_=r?15:10,B=Z=>Z>=85?"#ffffff":Z>=70?"#00d9ff":Z>=50?"#4488ff":Z>=30?"#1a3a5f":"#0a0e1a",I=Z=>Z>=85?"0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(0, 217, 255, 0.6)":Z>=70?"0 0 15px rgba(0, 217, 255, 0.7), 0 0 30px rgba(0, 217, 255, 0.4)":Z>=50?"0 0 10px rgba(68, 136, 255, 0.5)":Z>=30?"0 0 5px rgba(26, 58, 95, 0.3)":"none",L=Z=>{switch(u){case"offense":return Z.offenseScore;case"defense":return Z.defenseScore;case"special":return Z.specialTeamsScore;case"efficiency":return Z.efficiencyScore;default:return Z.overallScore}},M=O.useMemo(()=>{if(!S)return e;const Z=S.toLowerCase();return e.filter(Q=>Q.name.toLowerCase().includes(Z)||Q.team.toLowerCase().includes(Z))},[e,S]),R=O.useMemo(()=>[...M].sort((Z,Q)=>L(Q)-L(Z)),[M,u]),j=O.useMemo(()=>new Set(R.slice(0,10).map(Z=>Z.playerId)),[R]),F=(Z,Q,H)=>`M ${[30,90,150,210,270,330].map(X=>{const re=X*Math.PI/180,me=Z+H*Math.cos(re),ke=Q+H*Math.sin(re);return`${me},${ke}`}).join(" L ")} Z`,z=(Z,Q)=>{const H=T*Math.sqrt(3);return[{x:Z,y:Q},{x:Z+T*1.5,y:Q-H/2},{x:Z+T*1.5,y:Q+H/2},{x:Z,y:Q+H},{x:Z-T*1.5,y:Q+H/2},{x:Z-T*1.5,y:Q-H/2},{x:Z,y:Q-H}]},P=Z=>{const Q=Math.floor(Z/A),H=Z%A,U=Q%2*(E*.75),K=H*(E*1.5)+U+E,X=Q*(E*Math.sqrt(3)*.75)+E;return{x:K,y:X}},V=A*E*1.5+E,N=_*E*Math.sqrt(3)*.75+E;return i?n.jsxs("div",{style:{background:"linear-gradient(135deg, #0a0e1a 0%, #0f1419 100%)",border:"1px solid rgba(0, 217, 255, 0.3)",borderRadius:"12px",padding:"3rem",textAlign:"center",minHeight:"600px",display:"flex",alignItems:"center",justifyContent:"center"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"1rem",color:"#00d9ff",marginBottom:"1rem",letterSpacing:"0.1em",textShadow:"0 0 10px rgba(0, 217, 255, 0.6)"},children:"INITIALIZING THERMAL SCANNER..."}),n.jsx("div",{style:{width:"50px",height:"50px",border:"3px solid rgba(0, 217, 255, 0.3)",borderTop:"3px solid #00d9ff",borderRadius:"50%",margin:"0 auto",animation:"spin 1s linear infinite",boxShadow:"0 0 20px rgba(0, 217, 255, 0.4)"}})]}),n.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):l||M.length===0?n.jsxs("div",{style:{background:"linear-gradient(135deg, #0a0e1a 0%, #0f1419 100%)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"12px",padding:"2rem",textAlign:"center",color:"#ff4444"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),n.jsx("div",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:l?"Error loading thermal map":"No players found"}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#7aa3b8"},children:l||"Try adjusting your search"})]}):n.jsxs("div",{style:{background:"linear-gradient(135deg, #0a0e1a 0%, #0f1419 100%)",border:"1px solid rgba(0, 217, 255, 0.3)",borderRadius:"12px",padding:r?"1rem":"1.5rem",marginBottom:r?"2rem":"3rem",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"linear-gradient(rgba(0, 217, 255, 0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 217, 255, 0.02) 1px, transparent 1px)",backgroundSize:"30px 30px",opacity:.5,pointerEvents:"none"}}),n.jsxs("div",{style:{position:"relative",zIndex:2,marginBottom:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:r?"1.25rem":"1.5rem",fontWeight:"800",color:"#00d9ff",marginBottom:"0.25rem",letterSpacing:"0.05em",textShadow:"0 0 15px rgba(0, 217, 255, 0.6)"},children:" THERMAL PLAYER MAP"}),n.jsxs("div",{style:{fontSize:"0.813rem",color:"#7aa3b8",letterSpacing:"0.03em"},children:[M.length," elite players  Dynamic thermal response"]})]}),n.jsx("input",{type:"text",placeholder:"Search player or team...",value:S,onChange:Z=>w(Z.target.value),style:{background:"rgba(0, 217, 255, 0.05)",border:"1px solid rgba(0, 217, 255, 0.2)",borderRadius:"8px",padding:"0.5rem 0.75rem",fontSize:"0.875rem",color:"#ffffff",outline:"none",width:r?"100%":"250px"}})]}),n.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"overall",label:"Overall Impact",icon:""},{id:"offense",label:"Offense",icon:""},{id:"defense",label:"Defense",icon:""},{id:"special",label:"Special Teams",icon:""},{id:"efficiency",label:"Efficiency",icon:""}].map(Z=>n.jsxs("button",{onClick:()=>h(Z.id),style:{background:u===Z.id?"linear-gradient(135deg, rgba(0, 217, 255, 0.2) 0%, rgba(0, 217, 255, 0.1) 100%)":"rgba(0, 217, 255, 0.05)",border:`2px solid ${u===Z.id?"#00d9ff":"rgba(0, 217, 255, 0.2)"}`,borderRadius:"20px",padding:r?"0.5rem 0.75rem":"0.5rem 1rem",fontSize:r?"0.75rem":"0.813rem",color:u===Z.id?"#00d9ff":"#7aa3b8",fontWeight:"700",letterSpacing:"0.05em",cursor:"pointer",transition:"all 0.3s ease",boxShadow:u===Z.id?"0 0 15px rgba(0, 217, 255, 0.4)":"none",textShadow:u===Z.id?"0 0 10px rgba(0, 217, 255, 0.6)":"none",display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{children:Z.icon}),n.jsx("span",{children:r?Z.label.split(" ")[0]:Z.label})]},Z.id))})]}),n.jsx("div",{style:{position:"relative",zIndex:1,overflow:"auto",maxHeight:r?"500px":"700px"},children:n.jsxs("svg",{width:"100%",viewBox:`0 0 ${V} ${N}`,style:{display:"block",minHeight:r?"400px":"600px"},children:[n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:"scanline",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[n.jsx("stop",{offset:"0%",stopColor:"rgba(0, 217, 255, 0)"}),n.jsx("stop",{offset:"50%",stopColor:"rgba(0, 217, 255, 0.3)"}),n.jsx("stop",{offset:"100%",stopColor:"rgba(0, 217, 255, 0)"})]}),n.jsxs("filter",{id:"glow",children:[n.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),n.jsxs("feMerge",{children:[n.jsx("feMergeNode",{in:"coloredBlur"}),n.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),M.map((Z,Q)=>{const{x:H,y:U}=P(Q),K=z(H,U),X=L(Z),re=B(X),me=j.has(Z.playerId),ke=m?.playerId===Z.playerId;return n.jsxs("g",{onMouseEnter:()=>f(Z),onMouseLeave:()=>f(null),onClick:()=>b(Z),style:{cursor:"pointer"},children:[K.map((te,le)=>n.jsx("path",{d:F(te.x,te.y,T*.95),fill:re,stroke:ke?"#00d9ff":"rgba(0, 217, 255, 0.1)",strokeWidth:ke?2:.5,filter:me||ke?"url(#glow)":"none",opacity:ke?1:X<30?.4:.8,style:{transition:"all 0.5s ease",animation:me?"pulse 2s ease-in-out infinite":"none"}},le)),ke&&n.jsx("text",{x:H,y:U,textAnchor:"middle",dominantBaseline:"middle",fill:"#ffffff",fontSize:r?"8":"10",fontWeight:"800",style:{pointerEvents:"none",textShadow:"0 0 8px rgba(0, 0, 0, 0.8)"},children:Z.name.split(" ").pop()})]},Z.playerId)}),n.jsx("rect",{x:"0",y:"0",width:V,height:"20",fill:"url(#scanline)",opacity:"0.6",children:n.jsx("animate",{attributeName:"y",from:"0",to:N,dur:"3s",repeatCount:"indefinite"})})]})}),m&&n.jsxs("div",{style:{position:"absolute",bottom:"1rem",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, rgba(0, 217, 255, 0.15) 0%, rgba(0, 217, 255, 0.05) 100%)",border:"2px solid #00d9ff",borderRadius:"12px",padding:"1rem 1.5rem",boxShadow:"0 0 30px rgba(0, 217, 255, 0.5)",backdropFilter:"blur(10px)",zIndex:10,minWidth:r?"80%":"400px"},children:[n.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"800",color:"#ffffff",marginBottom:"0.5rem",textShadow:"0 0 10px rgba(0, 217, 255, 0.6)"},children:m.name}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem",fontSize:"0.813rem"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{color:"#7aa3b8"},children:"Team: "}),n.jsx("span",{style:{color:"#ffffff",fontWeight:"700"},children:m.team})]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#7aa3b8"},children:"Position: "}),n.jsx("span",{style:{color:"#ffffff",fontWeight:"700"},children:m.position})]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#7aa3b8"},children:"Thermal: "}),n.jsxs("span",{style:{color:B(L(m)),fontWeight:"800",textShadow:`0 0 8px ${B(L(m))}`},children:[L(m),"/100"]})]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#7aa3b8"},children:"Points: "}),n.jsx("span",{style:{color:"#ffffff",fontWeight:"700"},children:m.points})]})]}),n.jsx("div",{style:{fontSize:"0.75rem",color:"#7aa3b8",marginTop:"0.5rem",fontStyle:"italic"},children:"Click for detailed breakdown"})]}),x&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>b(null),children:n.jsxs("div",{style:{background:"linear-gradient(135deg, #0a0e1a 0%, #0f1419 100%)",border:"2px solid #00d9ff",borderRadius:"16px",padding:r?"1.5rem":"2rem",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 0 50px rgba(0, 217, 255, 0.6)"},onClick:Z=>Z.stopPropagation(),children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"800",color:"#00d9ff",marginBottom:"0.25rem",textShadow:"0 0 15px rgba(0, 217, 255, 0.6)"},children:x.name}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"#7aa3b8"},children:[x.team,"  ",x.position,"  ",x.gamesPlayed," GP"]})]}),n.jsx("button",{onClick:()=>b(null),style:{background:"rgba(255, 68, 68, 0.1)",border:"2px solid #ff4444",borderRadius:"8px",padding:"0.5rem 1rem",color:"#ff4444",fontWeight:"700",cursor:"pointer",fontSize:"0.875rem"},children:"Close"})]}),n.jsxs("div",{style:{marginBottom:"1.5rem"},children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"#00d9ff",fontWeight:"700",marginBottom:"0.75rem",letterSpacing:"0.05em"},children:"THERMAL SIGNATURES"}),[{label:"Overall Impact",value:x.overallScore},{label:"Offense",value:x.offenseScore},{label:"Defense",value:x.defenseScore},{label:"Special Teams",value:x.specialTeamsScore},{label:"Efficiency",value:x.efficiencyScore}].map(({label:Z,value:Q})=>n.jsxs("div",{style:{marginBottom:"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:"0.813rem"},children:[n.jsx("span",{style:{color:"#7aa3b8"},children:Z}),n.jsxs("span",{style:{color:B(Q),fontWeight:"800",textShadow:`0 0 8px ${B(Q)}`},children:[Q,"/100"]})]}),n.jsx("div",{style:{height:"8px",background:"rgba(0, 0, 0, 0.5)",borderRadius:"4px",overflow:"hidden",border:"1px solid rgba(0, 217, 255, 0.2)"},children:n.jsx("div",{style:{width:`${Q}%`,height:"100%",background:`linear-gradient(90deg, ${B(Q)} 0%, ${B(Q)}cc 100%)`,boxShadow:I(Q),transition:"width 0.5s ease"}})})]},Z))]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"#00d9ff",fontWeight:"700",marginBottom:"0.75rem",letterSpacing:"0.05em"},children:"RAW STATISTICS"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",fontSize:"0.875rem"},children:[{label:"Points",value:x.points},{label:"Goals",value:x.goals},{label:"Assists",value:x.assists},{label:"Shots",value:x.shots},{label:"Blocks",value:x.blocks},{label:"Hits",value:x.hits},{label:"Takeaways",value:x.takeaways},{label:"PP Points",value:x.ppPoints}].map(({label:Z,value:Q})=>n.jsxs("div",{children:[n.jsxs("span",{style:{color:"#7aa3b8"},children:[Z,": "]}),n.jsx("span",{style:{color:"#ffffff",fontWeight:"700"},children:Q})]},Z))})]})]})}),n.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
      `})]})},IN=({dataProcessor:r,loading:e,error:t})=>{const[i,o]=O.useState([]),[l,c]=O.useState(null),[u,h]=O.useState(!1);return O.useEffect(()=>{const m=()=>{h(window.innerWidth<=640)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),O.useEffect(()=>{if(r){const m=r.getTopBettingOpportunities();o(m);const f=r.getTeamsBySituation("all"),x=f.reduce((w,T)=>w+T.pdo,0)/f.length,b=f.reduce((w,T)=>w+T.xGD_per60,0)/f.length,S=r.findRegressionCandidates();c({totalTeams:f.length,avgPDO:x.toFixed(1),avgXGD:b.toFixed(2),overperformingTeams:S.overperforming.length,underperformingTeams:S.underperforming.length})}},[r]),n.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},className:"animate-fade-in",children:[n.jsxs("div",{style:{padding:u?"2rem 1rem 1.5rem":"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,right:0,width:"500px",height:"500px",background:"radial-gradient(circle, var(--color-accent-glow) 0%, transparent 70%)",opacity:.3,pointerEvents:"none"}}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"44px",height:"44px",background:"linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px var(--color-accent-glow)"},children:n.jsx(Ls,{size:24,color:"var(--color-background)",strokeWidth:2.5})}),n.jsx("h1",{className:"text-gradient",style:{fontSize:u?"1.75rem":"2.25rem",fontWeight:"800"},children:"Analytics Dashboard"})]}),n.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:u?"0.875rem":"0.938rem",lineHeight:"1.7",maxWidth:"800px",marginLeft:u?"0":"60px"},children:"Real-time statistical overview of betting opportunities based on institutional-grade analytics. Featuring xG differentials, PDO regression, and predictive modeling."})]})]}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:u?"1rem":"2rem"},children:[n.jsx("div",{style:{marginBottom:u?"1.5rem":"2rem"},children:n.jsx(GB,{dataProcessor:r,loading:e,error:t})}),n.jsx(CN,{isMobile:u}),n.jsx(kN,{dataProcessor:r,isMobile:u}),n.jsx(EN,{dataProcessor:r,isMobile:u}),!1,!1]})]})},FN=({dataProcessor:r})=>{const[e,t]=O.useState(""),[i,o]=O.useState("all"),[l,c]=O.useState(null),[u,h]=O.useState(null),[m,f]=O.useState([]);O.useEffect(()=>{if(r){const b=[...new Set(r.processedData.map(S=>S.name))].sort();f(b),b.length>0&&t(b[0])}},[r]),O.useEffect(()=>{if(r&&e){const b=r.processedData.find(S=>S.name===e&&S.situation===i);if(c(b),b){const S=b.goalsFor/b.shotsOnGoalFor*100,w=(1-b.goalsAgainst/b.shotsOnGoalAgainst)*100,T=S+w,E={pdo:{formula:"(Goals For / Shots On Goal For)  100 + (1 - Goals Against / Shots On Goal Against)  100",shootingPct:S.toFixed(2),savePct:w.toFixed(2),calculation:`(${b.goalsFor} / ${b.shotsOnGoalFor})  100 + (1 - ${b.goalsAgainst} / ${b.shotsOnGoalAgainst})  100`,step1:`${S.toFixed(2)} + ${w.toFixed(2)}`,result:b.pdo.toFixed(2),match:Math.abs(b.pdo-T)<.1},xGF_per60:{formula:"(xGoals For / Ice Time in seconds)  3600",calculation:`(${b.xGoalsFor} / ${b.iceTime})  3600`,result:b.xGF_per60?.toFixed(2)||"N/A",expected:(b.xGoalsFor/b.iceTime*3600).toFixed(2),match:b.xGF_per60?Math.abs(b.xGF_per60-b.xGoalsFor/b.iceTime*3600)<.01:!1},xGA_per60:{formula:"(xGoals Against / Ice Time in seconds)  3600",calculation:`(${b.xGoalsAgainst} / ${b.iceTime})  3600`,result:b.xGA_per60?.toFixed(2)||"N/A",expected:(b.xGoalsAgainst/b.iceTime*3600).toFixed(2),match:b.xGA_per60?Math.abs(b.xGA_per60-b.xGoalsAgainst/b.iceTime*3600)<.01:!1},shootingEff:{formula:"Actual Goals For / Expected Goals For",calculation:`${b.goalsFor} / ${b.xGoalsFor}`,result:b.shooting_efficiency?.toFixed(3)||"N/A",expected:(b.goalsFor/b.xGoalsFor).toFixed(3),match:b.shooting_efficiency?Math.abs(b.shooting_efficiency-b.goalsFor/b.xGoalsFor)<.01:!1},xGD_per60:{formula:"xGF/60 - xGA/60",calculation:`${b.xGF_per60?.toFixed(2)} - ${b.xGA_per60?.toFixed(2)}`,result:b.xGD_per60?.toFixed(2)||"N/A",expected:(b.xGF_per60-b.xGA_per60).toFixed(2),match:b.xGD_per60?Math.abs(b.xGD_per60-(b.xGF_per60-b.xGA_per60))<.01:!1}};h(E)}}},[r,e,i]);const x=()=>{if(!l||!u)return;const b=`NHL SAVANT - DATA VERIFICATION REPORT
Team: ${e}
Situation: ${i}
Generated: ${new Date().toLocaleString()}

RAW CSV DATA:
-------------
Goals For: ${l.goalsFor}
Shots On Goal For: ${l.shotsOnGoalFor}
Goals Against: ${l.goalsAgainst}
Shots On Goal Against: ${l.shotsOnGoalAgainst}
xGoals For: ${l.xGoalsFor}
xGoals Against: ${l.xGoalsAgainst}
Ice Time: ${l.iceTime}

CALCULATED METRICS:
------------------
PDO:
  Formula: ${u.pdo.formula}
  Calculation: ${u.pdo.calculation}
  Shooting %: ${u.pdo.shootingPct}
  Save %: ${u.pdo.savePct}
  Result: ${u.pdo.result}
   Verified: ${u.pdo.match?"PASS":"FAIL"}

xGF/60:
  Formula: ${u.xGF_per60.formula}
  Calculation: ${u.xGF_per60.calculation}
  Result: ${u.xGF_per60.result}
  Expected: ${u.xGF_per60.expected}
   Verified: ${u.xGF_per60.match?"PASS":"FAIL"}

Shooting Efficiency:
  Formula: ${u.shootingEff.formula}
  Calculation: ${u.shootingEff.calculation}
  Result: ${u.shootingEff.result}
  Expected: ${u.shootingEff.expected}
   Verified: ${u.shootingEff.match?"PASS":"FAIL"}
`,S=new Blob([b],{type:"text/plain"}),w=URL.createObjectURL(S),T=document.createElement("a");T.href=w,T.download=`data-verification-${e}-${i}.txt`,T.click(),URL.revokeObjectURL(w)};return r?n.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},children:[n.jsx("div",{style:{padding:"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Data Inspector"}),n.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"0.875rem"},children:"Verify raw CSV data against calculated metrics with step-by-step breakdowns"})]})}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem"},children:[n.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Team"}),n.jsx("select",{value:e,onChange:b=>t(b.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",fontSize:"0.875rem"},children:m.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{style:{flex:1},children:[n.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Situation"}),n.jsxs("select",{value:i,onChange:b=>o(b.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",fontSize:"0.875rem"},children:[n.jsx("option",{value:"all",children:"All Situations"}),n.jsx("option",{value:"5on5",children:"5-on-5"}),n.jsx("option",{value:"5on4",children:"Power Play (5-on-4)"}),n.jsx("option",{value:"4on5",children:"Penalty Kill (4-on-5)"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsx("div",{style:{marginTop:"1.5rem"},children:n.jsxs("button",{onClick:x,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Vg,{size:16}),"Export Report"]})})]}),l&&u&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(600px, 1fr))",gap:"1rem"},children:[n.jsxs("div",{className:"card",children:[n.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.125rem"},children:"Raw CSV Data"}),n.jsx("div",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"0.8125rem",lineHeight:"1.8"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"0.5rem 2rem"},children:[n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"team:"}),n.jsx("span",{style:{color:"var(--color-text-primary)",textAlign:"right"},children:l.team}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"situation:"}),n.jsx("span",{style:{color:"var(--color-text-primary)",textAlign:"right"},children:l.situation}),n.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-border)",gridColumn:"1 / -1",margin:"0.5rem 0"}}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"goalsFor:"}),n.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.goalsFor}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"shotsOnGoalFor:"}),n.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.shotsOnGoalFor}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"goalsAgainst:"}),n.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.goalsAgainst}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"shotsOnGoalAgainst:"}),n.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.shotsOnGoalAgainst}),n.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-border)",gridColumn:"1 / -1",margin:"0.5rem 0"}}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"xGoalsFor:"}),n.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.xGoalsFor}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"xGoalsAgainst:"}),n.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.xGoalsAgainst}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"iceTime:"}),n.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:l.iceTime})]})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.125rem"},children:"Calculated Metrics"}),Object.entries(u).map(([b,S])=>n.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--color-border)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[n.jsx("h3",{style:{fontSize:"0.875rem",textTransform:"uppercase",fontWeight:600},children:b.replace("_"," ")}),S.match?n.jsx(a0,{size:16,color:"var(--color-success)"}):n.jsx(o0,{size:16,color:"var(--color-danger)"})]}),n.jsxs("div",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"0.75rem",lineHeight:"1.6",color:"var(--color-text-secondary)"},children:[n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Formula: "}),n.jsx("span",{style:{color:"var(--color-text-primary)"},children:S.formula})]}),n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Calculation: "}),n.jsx("span",{style:{color:"var(--color-warning)"},children:S.calculation})]}),S.step1&&n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Step: "}),n.jsx("span",{style:{color:"var(--color-warning)"},children:S.step1})]}),n.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"2rem"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Result: "}),n.jsx("span",{style:{color:S.match?"var(--color-success)":"var(--color-danger)",fontWeight:700},children:S.result})]}),S.expected&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Expected: "}),n.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:600},children:S.expected})]})]})]})]},b))]})]})]})]}):n.jsx("div",{style:{padding:"2rem"},children:"Loading..."})};class DN{constructor(e,t,i=null,o=null,l={},c=null){this.dataProcessor=e,this.startingGoalies=i,this.moneyPuckPredictions=o,this.dratingsPredictions=c,this.config={yourModelWeight:l.yourModelWeight||.3,dratingsWeight:l.dratingsWeight||.7,modelWeight:l.modelWeight||.65,marketWeight:l.marketWeight||.35,maxAgreement:l.maxAgreement||.05,minEV:l.minEV||.015,minQuality:l.minQuality||"B+",kellyFraction:l.kellyFraction||.25,maxKelly:l.maxKelly||.05,useEnsemble:l.useEnsemble!==!1},t&&t.moneyText&&t.totalText?this.games=uE(t.moneyText,t.totalText):this.games=[]}getStartingGoalie(e,t){if(!this.startingGoalies||!this.startingGoalies.games)return null;const i=`${t.awayTeam} @ ${t.homeTeam}`,o=this.startingGoalies.games.find(l=>l.matchup===i);return o?o.away.team===e?o.away.goalie:o.home.team===e?o.home.goalie:null:null}calculateEnsembleProbability(e,t){const i=this.dataProcessor.oddsToProbability(t),o=e*this.config.modelWeight+i*this.config.marketWeight,l=Math.abs(e-i),u=(o/i-1)*100;let h,m;return u>=5?(m="A+",h="VERY_HIGH"):u>=3.5?(m="A",h="HIGH"):u>=1.5?(m="B+",h="HIGH"):u>=.5?(m="B",h="MEDIUM"):(m="C",h="LOW"),{ensembleProb:o,modelProb:e,marketProb:i,agreement:l,confidence:h,qualityGrade:m}}calibrateWithDRatings(e,t,i){const o=this.dataProcessor.oddsToProbability(i),l=Math.abs(e-t),c=e*.7+t*.3,u=c-o,m=(c/o-1)*100;let f;m>=5?f="A+":m>=3.5?f="A":m>=2.5?f="B+":m>=1.5?f="B":f="C";let x;return l<.03?x="HIGH":l<.06?x="MEDIUM":x="LOW",{calibratedProb:c,marketEdge:u,qualityGrade:f,confidence:x,yourModelProb:e,moneyPuckProb:e,dratingsProb:t,marketProb:o,correction:l,ensembleProb:c,modelProb:c,agreement:l}}findDRatingsPrediction(e,t){return!this.dratingsPredictions||!this.dratingsPredictions.predictions||this.dratingsPredictions.predictions.length===0?null:this.dratingsPredictions.predictions.find(i=>i.awayTeam===e&&i.homeTeam===t)}findMoneyPuckPrediction(e,t){return!this.moneyPuckPredictions||this.moneyPuckPredictions.length===0?null:this.moneyPuckPredictions.find(i=>i.awayTeam===e&&i.homeTeam===t)}calculateKellyStake(e,t){const o=(t<0?100/Math.abs(t)+1:t/100+1)-1,l=e,c=1-l;let u=(l*o-c)/o,h=u*this.config.kellyFraction;return h=Math.min(h,this.config.maxKelly),h=Math.max(h,0),{fullKelly:u,fractionalKelly:h,recommendedPercent:h*100,maxBet:this.config.maxKelly*100}}calculateAllEdges(){return this.games.map(e=>{try{const t=this.getStartingGoalie(e.awayTeam,e),i=this.getStartingGoalie(e.homeTeam,e),o=this.dataProcessor.predictTeamScore(e.awayTeam,e.homeTeam,!1,t,e.date),l=this.dataProcessor.predictTeamScore(e.homeTeam,e.awayTeam,!0,i,e.date);return{game:`${e.awayTeam} @ ${e.homeTeam}`,gameTime:e.gameTime,awayTeam:e.awayTeam,homeTeam:e.homeTeam,date:e.date||getETDate(),startTimestamp:e.startTimestamp||null,goalies:{away:t,home:i},edges:{moneyline:this.calculateMoneylineEdge(e,o,l),puckLine:this.calculatePuckLineEdge(e,o,l)},rawOdds:{moneyline:e.moneyline,puckLine:e.puckLine}}}catch(t){return console.error(`Error calculating edges for ${e.awayTeam} @ ${e.homeTeam}:`,t),null}}).filter(e=>e!==null)}calculateMoneylineEdge(e,t,i){if(!e.moneyline.away||!e.moneyline.home)return{away:null,home:null};const o=this.findMoneyPuckPrediction(e.awayTeam,e.homeTeam),l=this.findDRatingsPrediction(e.awayTeam,e.homeTeam);let c;o&&l&&this.config.useEnsemble?(c=this.calibrateWithDRatings(o.awayProb,l.awayProb,e.moneyline.away),console.log(` ${e.awayTeam}: MP ${(o.awayProb*100).toFixed(1)}% + DR ${(l.awayProb*100).toFixed(1)}%  ${(c.calibratedProb*100).toFixed(1)}%`)):this.config.useEnsemble?(console.warn(` Missing predictions for ${e.awayTeam} @ ${e.homeTeam} - MP:${!!o} DR:${!!l}`),c={ensembleProb:.5,modelProb:.5,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.away),agreement:1,confidence:"NONE",qualityGrade:"N/A"}):c={ensembleProb:awayWinProb,modelProb:awayWinProb,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.away),agreement:Math.abs(awayWinProb-this.dataProcessor.oddsToProbability(e.moneyline.away)),confidence:"UNKNOWN",qualityGrade:"N/A"};let u;o&&l&&this.config.useEnsemble?(u=this.calibrateWithDRatings(o.homeProb,l.homeProb,e.moneyline.home),console.log(` ${e.homeTeam}: MP ${(o.homeProb*100).toFixed(1)}% + DR ${(l.homeProb*100).toFixed(1)}%  ${(u.calibratedProb*100).toFixed(1)}%`)):this.config.useEnsemble?u={ensembleProb:.5,modelProb:.5,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.home),agreement:1,confidence:"NONE",qualityGrade:"N/A"}:u={ensembleProb:homeWinProb,modelProb:homeWinProb,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.home),agreement:Math.abs(homeWinProb-this.dataProcessor.oddsToProbability(e.moneyline.home)),confidence:"UNKNOWN",qualityGrade:"N/A"};const h=this.dataProcessor.calculateEV(c.ensembleProb,e.moneyline.away),m=this.dataProcessor.calculateEV(u.ensembleProb,e.moneyline.home),f=this.calculateKellyStake(c.ensembleProb,e.moneyline.away),x=this.calculateKellyStake(u.ensembleProb,e.moneyline.home);return{away:{ev:h,evPercent:h,modelProb:c.calibratedProb||c.ensembleProb||awayWinProb,marketProb:c.marketProb,ensembleProb:c.ensembleProb,agreement:c.agreement,confidence:c.confidence,qualityGrade:c.qualityGrade,kelly:f,recommendedUnit:f.fractionalKelly,moneyPuckProb:c.moneyPuckProb||null,calibratedProb:c.calibratedProb||null,odds:e.moneyline.away},home:{ev:m,evPercent:m,modelProb:u.calibratedProb||u.ensembleProb||homeWinProb,marketProb:u.marketProb,ensembleProb:u.ensembleProb,agreement:u.agreement,confidence:u.confidence,qualityGrade:u.qualityGrade,kelly:x,recommendedUnit:x.fractionalKelly,moneyPuckProb:u.moneyPuckProb||null,calibratedProb:u.calibratedProb||null,odds:e.moneyline.home}}}calculatePuckLineEdge(e,t,i){if(!e.puckLine.away.odds||!e.puckLine.home.odds)return{away:null,home:null};const o=i-t,l=e.puckLine.home.spread||-1.5,c=e.puckLine.away.spread||1.5,u=o>l?.55:.45,h=1-u,m=this.dataProcessor.calculateEV(h,e.puckLine.away.odds),f=this.dataProcessor.calculateEV(u,e.puckLine.home.odds);return{away:{ev:m,evPercent:m,modelProb:h,spread:c,odds:e.puckLine.away.odds},home:{ev:f,evPercent:f,modelProb:u,spread:l,odds:e.puckLine.home.odds}}}getTopEdges(e=0,t={}){const{maxAgreement:i=this.config.maxAgreement,minQuality:o=this.config.minQuality,useFilters:l=this.config.useEnsemble}=t,c=this.calculateAllEdges(),u=[],h=["A+","A","B+","B","C","D","N/A"];return c.forEach(m=>{if(m.edges.moneyline.away&&m.edges.moneyline.away.ev>e){const f=m.edges.moneyline.away;if(l&&f.qualityGrade&&h.indexOf(f.qualityGrade)>h.indexOf(o)){console.log(` Filtered ${m.awayTeam} AWAY: Grade ${f.qualityGrade} < ${o}`);return}u.push({game:m.game,gameTime:m.gameTime,market:"MONEYLINE",pick:`${m.awayTeam} (AWAY)`,team:m.awayTeam,odds:f.odds,ev:f.ev,evPercent:f.evPercent,modelProb:f.modelProb,marketProb:f.marketProb,ensembleProb:f.ensembleProb,agreement:f.agreement,confidence:f.confidence,qualityGrade:f.qualityGrade,kelly:f.kelly,recommendedUnit:f.recommendedUnit,moneyPuckProb:f.moneyPuckProb,calibratedProb:f.calibratedProb,isPreliminary:!f.moneyPuckProb})}if(m.edges.moneyline.home&&m.edges.moneyline.home.ev>e){const f=m.edges.moneyline.home;if(l&&f.qualityGrade&&h.indexOf(f.qualityGrade)>h.indexOf(o)){console.log(` Filtered ${m.homeTeam} HOME: Grade ${f.qualityGrade} < ${o}`);return}u.push({game:m.game,gameTime:m.gameTime,market:"MONEYLINE",pick:`${m.homeTeam} (HOME)`,team:m.homeTeam,odds:f.odds,ev:f.ev,evPercent:f.evPercent,modelProb:f.modelProb,marketProb:f.marketProb,ensembleProb:f.ensembleProb,agreement:f.agreement,confidence:f.confidence,qualityGrade:f.qualityGrade,kelly:f.kelly,recommendedUnit:f.recommendedUnit,moneyPuckProb:f.moneyPuckProb,calibratedProb:f.calibratedProb,isPreliminary:!f.moneyPuckProb})}m.edges.puckLine.away&&m.edges.puckLine.away.ev>e&&u.push({game:m.game,gameTime:m.gameTime,market:"PUCK LINE",pick:`${m.awayTeam} ${m.edges.puckLine.away.spread>0?"+":""}${m.edges.puckLine.away.spread}`,team:m.awayTeam,odds:m.edges.puckLine.away.odds,ev:m.edges.puckLine.away.ev,evPercent:m.edges.puckLine.away.evPercent,modelProb:m.edges.puckLine.away.modelProb,qualityGrade:"N/A",kelly:null,recommendedUnit:null}),m.edges.puckLine.home&&m.edges.puckLine.home.ev>e&&u.push({game:m.game,gameTime:m.gameTime,market:"PUCK LINE",pick:`${m.homeTeam} ${m.edges.puckLine.home.spread>0?"+":""}${m.edges.puckLine.home.spread}`,team:m.homeTeam,odds:m.edges.puckLine.home.odds,ev:m.edges.puckLine.home.ev,evPercent:m.edges.puckLine.home.evPercent,modelProb:m.edges.puckLine.home.modelProb,qualityGrade:"N/A",kelly:null,recommendedUnit:null})}),u.sort((m,f)=>{const x=h.indexOf(m.qualityGrade||"N/A")-h.indexOf(f.qualityGrade||"N/A");return x!==0?x:f.evPercent-m.evPercent})}}class Xg{static generateComparisonBar(e,t,i,o=!0){const l=e/i*100,c=t/i*100,u=Math.min(Math.max(l,0),200),h=Math.min(Math.max(c,0),200),m=this.getBarColor(e,i,o),f=this.getBarColor(t,i,o),x=o?e>t:e<t;return{away:{value:e,width:u,color:m,hasAdvantage:x,vsLeague:((e-i)/i*100).toFixed(1)},home:{value:t,width:h,color:f,hasAdvantage:!x,vsLeague:((t-i)/i*100).toFixed(1)},leagueAvg:i,difference:Math.abs(e-t),advantageTeam:x?"away":"home"}}static getBarColor(e,t,i){const l=(e-t)/t*100;return i&&l>15||!i&&l<-15?"#10B981":i&&l>5||!i&&l<-5?"#0EA5E9":Math.abs(l)<=5?"#64748B":"#EF4444"}static generateDangerZoneHeatmap(e,t){return{away:{low:{shots:e.offense.low.shots,xGoals:e.offense.low.xGoals,goals:e.offense.low.goals,width:this.calculateHeatmapWidth(e.offense.low.shots,250)},medium:{shots:e.offense.medium.shots,xGoals:e.offense.medium.xGoals,goals:e.offense.medium.goals,width:this.calculateHeatmapWidth(e.offense.medium.shots,80)},high:{shots:e.offense.high.shots,xGoals:e.offense.high.xGoals,goals:e.offense.high.goals,width:this.calculateHeatmapWidth(e.offense.high.shots,35)}},home:{low:{shots:t.defense.low.shots,xGoals:t.defense.low.xGoals,goals:t.defense.low.goals,width:this.calculateHeatmapWidth(t.defense.low.shots,250)},medium:{shots:t.defense.medium.shots,xGoals:t.defense.medium.xGoals,goals:t.defense.medium.goals,width:this.calculateHeatmapWidth(t.defense.medium.shots,80)},high:{shots:t.defense.high.shots,xGoals:t.defense.high.xGoals,goals:t.defense.high.goals,width:this.calculateHeatmapWidth(t.defense.high.shots,35)}},analysis:this.analyzeDangerZoneMatchup(e,t)}}static calculateHeatmapWidth(e,t){return Math.min(e/t*100,100)}static analyzeDangerZoneMatchup(e,t){const i=e.offense.high.shots,o=t.defense.high.shots,l=i-o,c=o>0?l/o*100:0;let u="";return Math.abs(c)<10?u="Balanced high-danger shot generation":c>0?u=`Away offense generates ${Math.abs(c).toFixed(0)}% more HD shots`:u=`Home defense allows ${Math.abs(c).toFixed(0)}% fewer HD shots`,u}static generateReboundTable(e,t){return{awayOffense:{rebounds:Math.round(e.xRebFor),reboundXg:e.rebXgFor.toFixed(2),reboundGoals:e.rebGoalsFor,conversion:e.rebConversion.toFixed(1),vsLeague:e.rebConversion-15,status:e.rebConversion>18?"Hot":e.rebConversion<12?"Cold":"Average"},homeDefense:{rebounds:Math.round(t.xRebAgainst),reboundXg:t.rebXgAgainst.toFixed(2),reboundGoals:t.rebGoalsAgainst,allowedPct:t.xRebAgainst>0?(t.rebGoalsAgainst/t.xRebAgainst*100).toFixed(1):0,control:t.rebXgaPer60<(t.rebXgfPer60||4)?"Excellent":"Average"},matchupEdge:{favors:e.rebConversion>15&&t.rebXgaPer60>4?"away":t.rebXgaPer60<3&&e.rebConversion<15?"home":"neutral",summary:this.generateReboundSummary(e,t,15)}}}static generateReboundSummary(e,t,i){const o=e.rebConversion-i,l=t.rebXgaPer60;return Math.abs(o)<3&&l>3&&l<5?"Balanced rebound battle - neither team has clear edge":o<-3?`Away team cold on rebounds (${e.rebConversion.toFixed(1)}% vs ${i}% avg)`:l<3?"Home defense controls rebound positioning effectively":"Standard rebound metrics for both teams"}static generatePhysicalMetrics(e,t){return[{stat:"Shot Blocks",away:{value:e.blockingRate.toFixed(1)+"%",raw:e.blockedShotsAgainst,label:`${e.blockedShotsAgainst} blocks`},home:{value:t.blockingRate.toFixed(1)+"%",raw:t.blockedShotsAgainst,label:`${t.blockedShotsAgainst} blocks`},advantage:t.blockingRate>e.blockingRate?"home":"away",diff:Math.abs(t.blockingRate-e.blockingRate).toFixed(1)+"%"},{stat:"Takeaways",away:{value:e.takeawaysPer60.toFixed(1),raw:e.takeaways,label:`${e.takeaways} total`},home:{value:t.takeawaysPer60.toFixed(1),raw:t.takeaways,label:`${t.takeaways} total`},advantage:e.takeaways>t.takeaways?"away":"home",diff:Math.abs(e.takeaways-t.takeaways)},{stat:"DZ Giveaways",away:{value:e.dZoneGiveawaysPer60.toFixed(1),raw:e.dZoneGiveaways,label:`${e.dZoneGiveaways} mistakes`},home:{value:t.dZoneGiveawaysPer60.toFixed(1),raw:t.dZoneGiveaways,label:`${t.dZoneGiveaways} mistakes`},advantage:e.dZoneGiveaways<t.dZoneGiveaways?"away":"home",diff:Math.abs(e.dZoneGiveaways-t.dZoneGiveaways)},{stat:"Hits",away:{value:e.hitsPer60.toFixed(1),raw:e.hits,label:`${e.hits} hits`},home:{value:t.hitsPer60.toFixed(1),raw:t.hits,label:`${t.hits} hits`},advantage:e.hits>t.hits?"away":"home",diff:Math.abs(e.hits-t.hits)}]}static getImpactBadge(e){switch(e){case"CRITICAL":return{emoji:"",label:"CRITICAL",color:"#EF4444"};case"HIGH":return{emoji:"",label:"HIGH IMPACT",color:"#F59E0B"};case"MODERATE":return{emoji:"",label:"MODERATE",color:"#3B82F6"};default:return{emoji:"",label:"FACTOR",color:"#64748B"}}}static getTierBadge(e){return e?e<=3?{label:"ELITE",color:"#10B981",icon:""}:e<=10?{label:"STRONG",color:"#0EA5E9",icon:""}:e<=22?{label:"AVERAGE",color:"#64748B",icon:"="}:{label:"WEAK",color:"#EF4444",icon:""}:{label:"N/A",color:"#64748B"}}static formatGoalImpact(e){return`${e>=0?"+":""}${e.toFixed(2)}`}static getImpactColor(e,t=!0){return t?e<-.2?"#10B981":e<-.05?"#34D399":e>.2?"#EF4444":e>.05?"#F87171":"#64748B":e>0?"#10B981":"#EF4444"}}const PN=()=>{const[r,e]=O.useState(new Date);return O.useEffect(()=>{const t=setInterval(()=>e(new Date),1e3);return()=>clearInterval(t)},[]),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"4px"},children:[n.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--color-success)",animation:"pulse 2s infinite"}}),n.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--color-success)",fontFeatureSettings:"'tnum'"},children:r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})},Mt={flat:{border:"1px solid rgba(100, 116, 139, 0.2)"},raised:{border:"1px solid rgba(212, 175, 55, 0.25)",shadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},elevated:{border:"2px solid rgba(16, 185, 129, 0.3)",shadow:"0 4px 16px rgba(16, 185, 129, 0.15)"}},G={hero:{size:"1.5rem",weight:"900",lineHeight:"1.2"},heading:{size:"1.125rem",weight:"800",lineHeight:"1.3",letterSpacing:"-0.01em"},subheading:{size:"0.938rem",weight:"700"},body:{size:"0.875rem",weight:"600",lineHeight:"1.5"},label:{size:"0.75rem",weight:"600",letterSpacing:"0.03em",textTransform:"uppercase"},caption:{size:"0.688rem",weight:"500",lineHeight:"1.5"}},dt={cardPadding:"1.25rem",sectionGap:"1rem",innerPadding:"1rem",borderRadius:"12px"},ln={hero:"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.04) 50%, rgba(16, 185, 129, 0.08) 100%)",factors:"linear-gradient(180deg, rgba(212, 175, 55, 0.05) 0%, rgba(212, 175, 55, 0.02) 100%)"},Ui=r=>{switch(r){case"A+":return{color:"#10B981",bg:"rgba(16, 185, 129, 0.15)",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"#10B981",label:"ELITE",tier:"ELITE",intensity:5};case"A":return{color:"#059669",bg:"rgba(5, 150, 105, 0.12)",bgColor:"rgba(5, 150, 105, 0.15)",borderColor:"#059669",label:"EXCELLENT",tier:"EXCELLENT",intensity:4};case"B+":return{color:"#0EA5E9",bg:"rgba(14, 165, 233, 0.12)",bgColor:"rgba(14, 165, 233, 0.15)",borderColor:"#0EA5E9",label:"STRONG",tier:"STRONG",intensity:3};case"B":return{color:"#8B5CF6",bg:"rgba(139, 92, 246, 0.12)",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"#8B5CF6",label:"GOOD",tier:"GOOD",intensity:2};case"C":return{color:"#F59E0B",bg:"rgba(245, 158, 11, 0.12)",bgColor:"rgba(245, 158, 11, 0.15)",borderColor:"#F59E0B",label:"VALUE",tier:"VALUE",intensity:1};case"D":return{color:"#EF4444",bg:"rgba(239, 68, 68, 0.12)",bgColor:"rgba(239, 68, 68, 0.15)",borderColor:"#EF4444",label:"RISKY",tier:"RISKY",intensity:0};default:return{color:"#64748B",bg:"rgba(100, 116, 139, 0.08)",bgColor:"rgba(100, 116, 139, 0.15)",borderColor:"#64748B",label:"N/A",tier:"N/A",intensity:0}}},Z6=(r,e)=>{let t;e!=null?t=e:t=Math.round(r||1);const i=Math.min(5,Math.max(1,t)),o=!1;return i>=5?{stars:5,fullStars:5,hasHalf:o,color:"#10B981",bg:"rgba(16, 185, 129, 0.15)",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"#10B981",label:"ELITE",tier:"ELITE",intensity:5}:i>=4?{stars:4,fullStars:4,hasHalf:o,color:"#14B8A6",bg:"rgba(20, 184, 166, 0.12)",bgColor:"rgba(20, 184, 166, 0.15)",borderColor:"#14B8A6",label:"STRONG",tier:"STRONG",intensity:4}:i>=3?{stars:3,fullStars:3,hasHalf:o,color:"#3B82F6",bg:"rgba(59, 130, 246, 0.12)",bgColor:"rgba(59, 130, 246, 0.15)",borderColor:"#3B82F6",label:"SOLID",tier:"SOLID",intensity:3}:i>=2?{stars:2,fullStars:2,hasHalf:o,color:"#8B5CF6",bg:"rgba(139, 92, 246, 0.12)",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"#8B5CF6",label:"STANDARD",tier:"STANDARD",intensity:2}:{stars:1,fullStars:1,hasHalf:o,color:"#94A3B8",bg:"rgba(148, 163, 184, 0.10)",bgColor:"rgba(148, 163, 184, 0.12)",borderColor:"#94A3B8",label:"TRACKING",tier:"TRACKING",intensity:1}},Gp=r=>r>=8?{color:"#10B981",bg:"rgba(16, 185, 129, 0.15)",label:"ELITE",intensity:5}:r>=5?{color:"#059669",bg:"rgba(5, 150, 105, 0.12)",label:"EXCELLENT",intensity:4}:r>=3?{color:"#0EA5E9",bg:"rgba(14, 165, 233, 0.12)",label:"STRONG",intensity:3}:r>=2?{color:"#8B5CF6",bg:"rgba(139, 92, 246, 0.12)",label:"GOOD",intensity:2}:r>=0?{color:"#8B5CF6",bg:"rgba(139, 92, 246, 0.12)",label:"SLIGHT",intensity:2}:{color:"#64748B",bg:"rgba(100, 116, 139, 0.08)",label:"NEGATIVE",intensity:1},BN=(r,e)=>{const t=Math.abs(e-.5);return r>10&&t>.15?{level:"VERY HIGH",color:"#10B981"}:r>5&&t>.1?{level:"HIGH",color:"#059669"}:r>2?{level:"MEDIUM",color:"#0EA5E9"}:{level:"LOW",color:"#8B5CF6"}},ns={normal:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",slow:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},zN=r=>r>=8?{grade:"A+",tier:"ELITE",color:"#10B981",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"#10B981",icon:Tm}:r>=5?{grade:"A",tier:"EXCELLENT",color:"#059669",bgColor:"rgba(5, 150, 105, 0.15)",borderColor:"#059669",icon:yE}:r>=3?{grade:"B+",tier:"STRONG",color:"#0EA5E9",bgColor:"rgba(14, 165, 233, 0.15)",borderColor:"#0EA5E9",icon:ar}:r>=2?{grade:"B",tier:"GOOD",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"#8B5CF6",icon:null}:{grade:"C",tier:"VALUE",color:"#64748B",bgColor:"rgba(100, 116, 139, 0.15)",borderColor:"#64748B",icon:null},ON=({evPercent:r,size:e="default",showIcon:t=!1,showTier:i=!0})=>{const o=zN(r),l=o.icon,u={small:{padding:"0.25rem 0.5rem",gradeFont:"0.75rem",tierFont:"0.563rem",iconSize:12,gap:"0.25rem"},default:{padding:"0.375rem 0.75rem",gradeFont:"0.875rem",tierFont:"0.625rem",iconSize:14,gap:"0.25rem"},large:{padding:"0.5rem 1rem",gradeFont:"1.125rem",tierFont:"0.688rem",iconSize:16,gap:"0.375rem"}}[e];return n.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:u.gap},children:[n.jsxs("div",{style:{padding:u.padding,background:o.bgColor,border:`1px solid ${o.borderColor}`,borderRadius:"6px",fontWeight:"800",fontSize:u.gradeFont,color:o.color,letterSpacing:"-0.01em",display:"flex",alignItems:"center",gap:"0.375rem",minWidth:e==="small"?"36px":"42px",justifyContent:"center"},children:[t&&l&&n.jsx(l,{size:u.iconSize}),n.jsx("span",{children:o.grade})]}),i&&n.jsx("div",{style:{fontSize:u.tierFont,fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:o.color,opacity:.8},children:o.tier})]})},MN=({awayGoalie:r,homeGoalie:e,awayTeam:t,homeTeam:i,isMobile:o})=>{const l=r&&r.name,c=e&&e.name;if(!l&&!c)return n.jsx(pg,{title:"Goaltender Matchup",icon:n.jsx(sn,{size:18}),isMobile:o,importance:"HIGH",children:n.jsxs("div",{style:{padding:o?dt.innerPadding:"1.5rem",textAlign:"center",background:ln.factors,border:Mt.flat.border,borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),n.jsx("div",{style:{fontSize:G.subheading.size,fontWeight:G.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:"Waiting for Goalie Confirmation"}),n.jsx("div",{style:{fontSize:G.body.size,color:"var(--color-text-muted)",lineHeight:G.body.lineHeight},children:"Starting goalies typically confirmed 1-2 hours before game time. Check back closer to puck drop."})]})});console.log(" GoalieMatchupSection checking stats:",{awayGoalie:{name:r?.name,gsae:r?.gsae,hasGSAE:r?.gsae!==void 0},homeGoalie:{name:e?.name,gsae:e?.gsae,hasGSAE:e?.gsae!==void 0}});const u=r&&r.gsae!==void 0,h=e&&e.gsae!==void 0;if(console.log(" Stats check result:",{awayHasStats:u,homeHasStats:h}),u&&!h||!u&&h){const w=u?r:e,T=u?t:i,E=u?i:t,A=u?e:r,_=parseFloat(w.gsae)||0,B=_>10?"ELITE":_>5?"STRONG":_>-5?"AVERAGE":"WEAK",I=_>10?"#10B981":_>5?"#60A5FA":_>-5?"#8B5CF6":"#EF4444";return n.jsxs(pg,{title:"Goaltender Matchup",icon:n.jsx(sn,{size:18}),isMobile:o,importance:"HIGH",children:[n.jsxs("div",{style:{padding:o?dt.innerPadding:"1rem",background:`linear-gradient(135deg, ${I}15 0%, ${I}08 100%)`,border:`1px solid ${I}40`,borderRadius:"8px",marginBottom:o?dt.innerPadding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[n.jsx(sn,{size:20,color:I}),n.jsxs("span",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:I},children:[B," GOALTENDER - ",T]})]}),n.jsxs("div",{style:{fontSize:G.caption.size,color:"var(--color-text-secondary)",textAlign:"center",fontStyle:"italic"},children:[w.name,"  ",_>=0?"+":"",_.toFixed(2)," GSAE  ",E," goalie stats unavailable"]})]}),n.jsx(Hp,{goalie:w,team:T,isMobile:o,isAway:!1}),n.jsxs("div",{style:{marginTop:o?dt.innerPadding:"1rem",padding:o?"0.75rem":"1rem",background:"rgba(139, 92, 246, 0.08)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:G.body.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:[n.jsx("strong",{children:E})," ",A?.name||"Goalie"]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",fontStyle:"italic"},children:"Advanced stats not yet available"})]})]})}if(!u&&!h)return n.jsx(pg,{title:"Goaltender Matchup",icon:n.jsx(sn,{size:18}),isMobile:o,importance:"HIGH",children:n.jsxs("div",{style:{padding:o?dt.innerPadding:"1.5rem",textAlign:"center",background:ln.factors,border:Mt.flat.border,borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),n.jsxs("div",{style:{fontSize:G.subheading.size,fontWeight:G.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:[t," ",r?.name||"TBD"," vs ",i," ",e?.name||"TBD"]}),n.jsx("div",{style:{fontSize:G.body.size,color:"var(--color-text-muted)",lineHeight:G.body.lineHeight},children:"Advanced goalie statistics not yet available for these netminders. Check back later for detailed analytics."})]})});const m=parseFloat(r.gsae)||0,f=parseFloat(e.gsae)||0,x=Math.abs(m-f),b=m>f?t:i,S=x/10;return n.jsxs(pg,{title:"Goaltender Matchup",icon:n.jsx(sn,{size:18}),isMobile:o,importance:"HIGH",children:[n.jsxs("div",{style:{padding:o?dt.innerPadding:"1.125rem",background:x>5?"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.06) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.12) 0%, rgba(139, 92, 246, 0.06) 100%)",border:x>5?"1px solid rgba(16, 185, 129, 0.35)":"1px solid rgba(139, 92, 246, 0.35)",borderRadius:"10px",marginBottom:o?dt.innerPadding:"1.25rem",boxShadow:x>5?"0 4px 12px rgba(16, 185, 129, 0.1)":"0 4px 12px rgba(139, 92, 246, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.625rem",marginBottom:"0.5rem"},children:[n.jsx(sn,{size:22,color:x>5?"#10B981":"#8B5CF6",strokeWidth:2.5}),n.jsx("span",{style:{fontSize:o?"0.95rem":"1.05rem",fontWeight:"700",color:x>5?"#10B981":"#8B5CF6",letterSpacing:"0.5px"},children:x>5?`${b} HAS GOALIE ADVANTAGE`:"PRETTY EVEN GOALIE MATCHUP"})]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-secondary)",lineHeight:G.body.lineHeight,fontStyle:"italic",textAlign:"center",paddingTop:"0.25rem",borderTop:x>5?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(139, 92, 246, 0.2)"},children:x>5?`${x.toFixed(1)} GSAE difference  Expected impact: ~${S.toFixed(2)} goals`:"Both goalies performing at similar levels. Goaltending unlikely to be deciding factor."})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:o?"1fr":"1fr auto 1fr",gap:o?dt.innerPadding:"1.5rem",alignItems:"stretch"},children:[n.jsx(Hp,{goalie:r,team:t,isMobile:o,isAway:!0}),!o&&n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:G.heading.size,fontWeight:G.heading.weight,color:"var(--color-accent)",padding:"0 0.5rem"},children:"VS"}),n.jsx(Hp,{goalie:e,team:i,isMobile:o,isAway:!1})]}),n.jsxs("div",{style:{marginTop:o?dt.innerPadding:"1rem",padding:o?dt.innerPadding:"1rem",background:ln.factors,border:Mt.flat.border,borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:G.caption.size,fontWeight:G.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:"SAVE PERCENTAGE BY DANGER ZONE"}),n.jsx(LN,{awayGoalie:r,homeGoalie:e,awayTeam:t,homeTeam:i,isMobile:o})]})]})},Hp=({goalie:r,team:e,isMobile:t,isAway:i})=>{const o=parseFloat(r.gsae)||0,l=$N(o),c=l.tier==="ELITE",u=l.tier==="STRONG";return n.jsxs("div",{style:{padding:t?dt.innerPadding:"1rem",background:ln.factors,border:Mt.flat.border,borderRadius:"8px",position:"relative",overflow:"hidden"},children:[n.jsxs("div",{style:{marginBottom:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"0.5rem"},children:[n.jsx("div",{style:{fontSize:G.subheading.size,fontWeight:G.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:r.name}),n.jsxs("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[n.jsx("span",{children:e}),n.jsx("span",{children:""}),n.jsxs("span",{children:[r.gamesPlayed," GP"]}),r.recentForm&&r.recentForm!=="Limited Sample"&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{style:{color:r.recentForm==="Hot"?"#10B981":r.recentForm==="Cold"?"#EF4444":"#8B5CF6",fontWeight:G.label.weight},children:r.recentForm})]})]})]}),n.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"0.75rem",background:c?"rgba(16, 185, 129, 0.1)":u?"rgba(14, 165, 233, 0.1)":"rgba(139, 92, 246, 0.05)",borderRadius:"6px"},children:[n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Goals Saved Above Expected"}),n.jsxs("div",{style:{fontSize:"2rem",fontWeight:G.heading.weight,color:c?"#10B981":u?"#0EA5E9":o>0?"#8B5CF6":"#EF4444",fontFeatureSettings:"'tnum'",marginBottom:"0.25rem"},children:[o>0?"+":"",r.gsae]}),n.jsx(NN,{rank:l.rank,tier:l.tier})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginBottom:"0.75rem"},children:[n.jsx(fg,{label:"Save %",value:`${r.savePct}%`}),n.jsx(fg,{label:"HD Sv%",value:`${r.hdSavePct}%`,isHighlight:!0}),n.jsx(fg,{label:"xGA/GP",value:r.xGoalsAgainst}),n.jsx(fg,{label:"GA/GP",value:r.goalsAgainst})]}),n.jsxs("div",{style:{padding:"0.5rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"4px",fontSize:G.caption.size,textAlign:"center"},children:[n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Rebound Control: "}),n.jsx("span",{style:{color:r.reboundControl==="Excellent"?"#10B981":r.reboundControl==="Poor"?"#EF4444":"#8B5CF6",fontWeight:G.label.weight},children:r.reboundControl})]})]})},LN=({awayGoalie:r,homeGoalie:e,awayTeam:t,homeTeam:i,isMobile:o})=>{const l=[{label:"Low Danger",away:parseFloat(r.lowDangerSavePct)||97,home:parseFloat(e.lowDangerSavePct)||97,color:"#64748B"},{label:"Medium Danger",away:parseFloat(r.mediumDangerSavePct)||92,home:parseFloat(e.mediumDangerSavePct)||92,color:"#F59E0B"},{label:"High Danger",away:parseFloat(r.hdSavePct)||85,home:parseFloat(e.hdSavePct)||85,color:"#EF4444"}];return n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:l.map((c,u)=>n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:G.caption.size,color:c.color,marginBottom:"0.375rem",fontWeight:G.label.weight},children:c.label}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.5rem",alignItems:"center"},children:[n.jsxs("div",{style:{textAlign:"right",fontSize:G.body.size,fontWeight:G.body.weight},children:[n.jsxs("span",{style:{color:c.away>c.home?"#10B981":"var(--color-text-secondary)",fontFeatureSettings:"'tnum'"},children:[c.away.toFixed(1),"%"]}),n.jsx("span",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",marginLeft:"0.25rem"},children:t})]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)"},children:"vs"}),n.jsxs("div",{style:{textAlign:"left",fontSize:G.body.size,fontWeight:G.body.weight},children:[n.jsx("span",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",marginRight:"0.25rem"},children:i}),n.jsxs("span",{style:{color:c.home>c.away?"#10B981":"var(--color-text-secondary)",fontFeatureSettings:"'tnum'"},children:[c.home.toFixed(1),"%"]})]})]})]},u))})},fg=({label:r,value:e,isHighlight:t})=>n.jsxs("div",{style:{padding:"0.5rem",background:t?"rgba(239, 68, 68, 0.1)":"rgba(26, 31, 46, 0.4)",borderRadius:"4px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",marginBottom:"0.125rem"},children:r}),n.jsx("div",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:t?"#EF4444":"var(--color-text-primary)",fontFeatureSettings:"'tnum'"},children:e})]}),NN=({rank:r,tier:e})=>n.jsxs("span",{style:{fontSize:G.caption.size,fontWeight:G.label.weight,color:e==="ELITE"?"#10B981":e==="STRONG"?"#0EA5E9":e==="AVERAGE"?"#8B5CF6":"#EF4444",background:e==="ELITE"?"rgba(16, 185, 129, 0.2)":e==="STRONG"?"rgba(14, 165, 233, 0.2)":e==="AVERAGE"?"rgba(139, 92, 246, 0.2)":"rgba(239, 68, 68, 0.2)",padding:"0.125rem 0.375rem",borderRadius:"4px",textTransform:"uppercase"},children:["#",r," ",e]}),pg=({title:r,icon:e,children:t,isMobile:i,importance:o})=>n.jsxs("div",{style:{marginBottom:i?dt.sectionGap:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:i?dt.innerPadding:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e,n.jsx("span",{style:{fontSize:G.subheading.size,fontWeight:G.heading.weight,color:"var(--color-text-primary)"},children:r})]}),o&&n.jsx("span",{style:{fontSize:G.caption.size,fontWeight:G.label.weight,color:o==="HIGH"?"#10B981":o==="MODERATE"?"#F59E0B":"#64748B",textTransform:"uppercase"},children:o})]}),t]});function $N(r){return r>10?{rank:5,tier:"ELITE"}:r>5?{rank:12,tier:"STRONG"}:r>-5?{rank:18,tier:"AVERAGE"}:{rank:28,tier:"WEAK"}}const VN=({awayTeam:r,homeTeam:e,dangerZoneData:t,reboundData:i,physicalData:o,possessionData:l,regressionData:c,awayGoalie:u,homeGoalie:h,isMobile:m,bestEdge:f,statsAnalyzer:x,dataProcessor:b,game:S,defaultExpanded:w=!1})=>{const[T,E]=O.useState(w),_=T?[]:(()=>{try{const B=[],I=f?.type||"TOTAL";if(b&&b.scheduleHelper&&S&&S.date){const L=b.scheduleHelper,M=L.getDaysRest(r,S.date),R=L.getConsecutiveAwayGames(r,S.date),j=L.getRoadTripAdjustment(r,S.date);M===1?B.push(` ${r} on back-to-back (-3% fatigue penalty in model)`):j<-.05?B.push(` ${r} fatigued (game ${R+1} of road trip, ${(j*100).toFixed(0)}% penalty)`):M>=3&&B.push(` ${r} well-rested (${M} days off = +4% boost)`);const F=L.getDaysRest(e,S.date),{isHomecoming:z,tripLength:P}=L.isHomecomingGame(e,S.date),V=L.getHomecomingAdjustment(e,S.date);F===1&&B.length<3?B.push(` ${e} on back-to-back (-3% fatigue penalty in model)`):z&&B.length<3?B.push(` ${e} homecoming after ${P}-game trip (+${(V*100).toFixed(0)}% boost)`):F>=3&&B.length<3&&B.push(` ${e} well-rested (${F} days off = +4% boost)`)}if(B.length<3){if(I==="TOTAL"||I==="OVER"||I==="UNDER"){if(t&&t.away&&t.home){const L=t.away.high?.shots||0,M=t.home.high?.shots||0;if(Math.abs(L-M)>2){const R=L>M?r:e,j=Math.abs(L-M).toFixed(1);B.push(` ${R} generates ${j} more high-danger chances/game (quality scoring opportunities)`)}}if(o&&o.length>0&&B.length<3){const L=o.find(M=>M.stat==="Shot Blocks");if(L){const M=L.advantage==="away"?r:e;B.push(` ${M} blocks ${L.diff} more shots/game (limits scoring chances)`)}}}if(l&&l.away&&l.home&&B.length<3){const L=l.away.corsiPct||50,M=l.home.corsiPct||50;if(Math.abs(L-M)>5){const R=L>M?r:e,j=Math.max(L,M).toFixed(1),F=I==="MONEYLINE"?"dictates pace":"drives scoring chances";B.push(` ${R} controls ${j}% shot attempts (${F})`)}}}if(c&&c.away&&c.home&&B.length<3){const L=c.away.pdo||100,M=c.home.pdo||100;if(L>102){const R=I.includes("UNDER")?"supports UNDER":"overperforming";B.push(` ${r} PDO ${L.toFixed(1)} (unsustainable luck  ${R})`)}else if(M>102&&B.length<3){const R=I.includes("UNDER")?"supports UNDER":"overperforming";B.push(` ${e} PDO ${M.toFixed(1)} (unsustainable luck  ${R})`)}else if(L<98&&B.length<3){const R=I.includes("OVER")?"supports OVER":"due to bounce back";B.push(` ${r} PDO ${L.toFixed(1)} (unlucky  ${R})`)}else if(M<98&&B.length<3){const R=I.includes("OVER")?"supports OVER":"due to bounce back";B.push(` ${e} PDO ${M.toFixed(1)} (unlucky  ${R})`)}}return B.slice(0,3)}catch(B){return console.error("Quick Hits generation error:",B),[]}})();return n.jsxs("div",{style:{background:ln.factors,border:Mt.raised.border,boxShadow:Mt.raised.shadow,borderRadius:dt.borderRadius,overflow:"hidden",marginBottom:m?dt.sectionGap:"1.5rem",transition:ns.normal},children:[n.jsxs("button",{onClick:()=>E(!T),"aria-expanded":T,"aria-controls":"advanced-metrics-content","aria-label":`${T?"Collapse":"Expand"} advanced metrics section`,style:{width:"100%",padding:m?dt.cardPadding:"1.25rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:ns.normal},onMouseEnter:B=>B.currentTarget.style.background="rgba(212, 175, 55, 0.1)",onMouseLeave:B=>B.currentTarget.style.background="transparent",children:[n.jsxs("div",{style:{textAlign:"left"},children:[n.jsxs("div",{style:{fontSize:m?G.body.size:G.heading.size,fontWeight:G.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem",letterSpacing:G.heading.letterSpacing},children:[n.jsx(fr,{size:20,style:{color:"var(--color-accent)"}}),"Deep Dive: Advanced Metrics"]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",fontWeight:G.caption.weight,lineHeight:G.caption.lineHeight},children:T?"7 statistical categories expanded":"Danger zones, goalies, special teams, and more"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-accent)"},children:[n.jsx("span",{style:{fontSize:G.label.size,fontWeight:G.label.weight,textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:T?"Collapse":"Expand"}),T?n.jsx(Go,{size:20}):n.jsx(Wo,{size:20})]})]}),!T&&_.length>0&&n.jsxs("div",{style:{padding:m?dt.cardPadding:"1.25rem",paddingTop:0,borderTop:Mt.flat.border},children:[n.jsxs("div",{style:{fontSize:G.label.size,fontWeight:G.label.weight,color:"var(--color-accent)",marginBottom:"0.75rem",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(zo,{size:16}),"Quick Hits"]}),n.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:_.map((B,I)=>n.jsxs("li",{style:{fontSize:G.body.size,color:"var(--color-text-primary)",marginBottom:I<_.length-1?"0.5rem":0,paddingLeft:"1.25rem",position:"relative",lineHeight:G.body.lineHeight,fontWeight:G.body.weight},children:[n.jsx("span",{style:{position:"absolute",left:0,color:"var(--color-accent)",fontWeight:G.heading.weight},children:""}),B]},I))}),n.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:Mt.flat.border,textAlign:"center"},children:n.jsx("button",{onClick:()=>E(!0),style:{background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:G.label.size,fontWeight:G.body.weight,color:"var(--color-accent)",cursor:"pointer",transition:ns.normal},onMouseEnter:B=>{B.currentTarget.style.background="rgba(212, 175, 55, 0.15)",B.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:B=>{B.currentTarget.style.background="rgba(212, 175, 55, 0.1)",B.currentTarget.style.transform="translateY(0)"},children:"View Full Breakdown "})})]}),T&&n.jsx("div",{id:"advanced-metrics-content",role:"region","aria-label":"Advanced metrics detailed breakdown",style:{padding:m?dt.cardPadding:"1.5rem",paddingTop:0,borderTop:Mt.flat.border,maxHeight:T?"10000px":"0",overflow:T?"visible":"hidden",transition:"max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:(()=>{const B=f?.market==="TOTAL";return[{id:"danger-zone",priority:B?1:4,component:t&&n.jsx(WN,{data:t,awayTeam:r,homeTeam:e,isMobile:m,statsAnalyzer:x,bestEdge:f},"danger-zone")},{id:"goalie",priority:3,component:n.jsx(MN,{awayGoalie:u,homeGoalie:h,awayTeam:r,homeTeam:e,isMobile:m,bestEdge:f},"goalie")},{id:"rebound",priority:B?1:4,component:i&&n.jsx(GN,{data:i,awayTeam:r,homeTeam:e,isMobile:m,bestEdge:f},"rebound")},{id:"physical",priority:B?2:5,component:o&&n.jsx(HN,{data:o,awayTeam:r,homeTeam:e,isMobile:m,bestEdge:f},"physical")},{id:"possession",priority:B?5:1,component:l&&n.jsx(qN,{data:l,awayTeam:r,homeTeam:e,isMobile:m,bestEdge:f},"possession")},{id:"regression",priority:4,component:c&&n.jsx(YN,{data:c,awayTeam:r,homeTeam:e,isMobile:m,bestEdge:f},"regression")}].sort((L,M)=>L.priority-M.priority).map(L=>L.component).filter(Boolean)})()})]})},WN=({data:r,awayTeam:e,homeTeam:t,isMobile:i,statsAnalyzer:o})=>{const l=r.away.high?.shots||0,c=r.home.high?.shots||0,u=Math.abs(l-c),h=l>c?e:t,m=l>c?t:e,f=u*.23;return n.jsxs(zu,{title:"Shot Danger Distribution",icon:n.jsx(fr,{size:18}),isMobile:i,importance:"HIGH",children:[n.jsxs("div",{style:{padding:i?dt.innerPadding:"0.875rem",background:u>2?"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:u>2?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:i?dt.innerPadding:"1rem",textAlign:"center"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[n.jsx(fr,{size:20,color:u>2?"#EF4444":"#8B5CF6"}),n.jsx("span",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:u>2?"#EF4444":"#8B5CF6"},children:u>2?`${h} GENERATES MORE HIGH-DANGER SHOTS`:"PRETTY EVEN MATCHUP - HIGH-DANGER CHANCES"})]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-secondary)",lineHeight:G.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:u>2?`${u.toFixed(1)} more HD shots/game vs ${m}  ~${f.toFixed(2)} goal impact`:"Both teams generate similar high-danger opportunities. Expect tight scoring chances."})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"repeat(3, 1fr)",gap:i?dt.innerPadding:"1rem",marginBottom:"1rem"},children:[n.jsx(Up,{title:"Low Danger",color:"#64748B",awayShots:r.away.low.shots,homeShots:r.home.low.shots,awayXg:r.away.low.xGoals,homeXg:r.home.low.xGoals,awayTeam:e,homeTeam:t,isMobile:i}),n.jsx(Up,{title:"Medium Danger",color:"#F59E0B",awayShots:r.away.medium.shots,homeShots:r.home.medium.shots,awayXg:r.away.medium.xGoals,homeXg:r.home.medium.xGoals,awayTeam:e,homeTeam:t,isMobile:i}),n.jsx(Up,{title:"High Danger",color:"#EF4444",awayShots:r.away.high.shots,homeShots:r.home.high.shots,awayXg:r.away.high.xGoals,homeXg:r.home.high.xGoals,awayTeam:e,homeTeam:t,isMobile:i})]}),r.analysis&&n.jsxs("div",{style:{padding:i?dt.innerPadding:"0.75rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"6px",fontSize:G.label.size,color:"var(--color-text-secondary)",fontStyle:"italic",lineHeight:G.body.lineHeight},children:[" ",r.analysis]})]})},Up=({title:r,color:e,awayShots:t,homeShots:i,awayXg:o,homeXg:l,awayTeam:c,homeTeam:u,isMobile:h})=>{const m=Math.max(t,i),f=m>0?t/m*100:0,x=m>0?i/m*100:0;return n.jsxs("div",{style:{padding:h?dt.innerPadding:"1rem",background:ln.factors,border:`1px solid ${e}40`,borderRadius:"8px",transition:ns.normal},children:[n.jsx("div",{style:{fontSize:G.label.size,fontWeight:G.heading.weight,textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,color:e,marginBottom:h?"0.5rem":"0.75rem"},children:r}),n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsxs("div",{style:{fontSize:G.caption.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem",display:"flex",justifyContent:"space-between",fontWeight:G.body.weight},children:[n.jsxs("span",{children:[c," OFF"]}),n.jsxs("span",{style:{fontWeight:G.heading.weight,fontFeatureSettings:"'tnum'"},children:[t," shots (",o.toFixed(2)," xG)"]})]}),n.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"6px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${f}%`,height:"100%",background:`linear-gradient(90deg, ${e} 0%, ${e}CC 100%)`,borderRadius:"6px",transition:ns.normal}})})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:G.caption.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem",display:"flex",justifyContent:"space-between",fontWeight:G.body.weight},children:[n.jsxs("span",{children:[u," DEF"]}),n.jsxs("span",{style:{fontWeight:G.heading.weight,fontFeatureSettings:"'tnum'"},children:[i," shots (",l.toFixed(2)," xG)"]})]}),n.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"6px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${x}%`,height:"100%",background:`linear-gradient(90deg, ${e} 0%, ${e}CC 100%)`,borderRadius:"6px",transition:ns.normal}})})]})]})},GN=({data:r,awayTeam:e,homeTeam:t,isMobile:i})=>{const o=parseFloat(r.awayOffense.conversion)||0,l=r.homeDefense.control,c=r.matchupEdge.favors;return n.jsxs(zu,{title:"Second-Chance Opportunities",icon:n.jsx(ou,{size:18}),isMobile:i,importance:"HIGH",children:[n.jsxs("div",{style:{padding:i?dt.innerPadding:"0.875rem",background:c==="away"?"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)":c==="home"?"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:c==="away"?"1px solid rgba(16, 185, 129, 0.3)":c==="home"?"1px solid rgba(14, 165, 233, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:i?dt.innerPadding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[n.jsx(ou,{size:20,color:c==="away"?"#10B981":c==="home"?"#0EA5E9":"#8B5CF6"}),n.jsx("span",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:c==="away"?"#10B981":c==="home"?"#0EA5E9":"#8B5CF6"},children:c==="away"?`${e} OFFENSE CREATES MORE SECOND CHANCES`:c==="home"?`${t} DEFENSE CONTROLS REBOUND POSITIONING`:"PRETTY EVEN MATCHUP - REBOUND CONTROL"})]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-secondary)",lineHeight:G.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:c!=="neutral"?r.matchupEdge.summary:"Both teams balanced in creating and controlling rebounds. No significant advantage."})]}),n.jsxs("div",{style:{padding:i?dt.innerPadding:"1rem",background:ln.factors,border:Mt.flat.border,borderRadius:"8px",marginBottom:i?dt.innerPadding:"1rem"},children:[n.jsxs("div",{style:{fontSize:G.caption.size,fontWeight:G.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,textAlign:"center"},children:[e," OFFENSE vs ",t," DEFENSE"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"1rem",alignItems:"center"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:o>15?"#10B981":"#EF4444",marginBottom:"0.25rem",fontFeatureSettings:"'tnum'"},children:[r.awayOffense.conversion,"%"]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",marginBottom:"0.375rem"},children:"Conversion"}),n.jsxs("div",{style:{fontSize:G.caption.size,fontWeight:G.body.weight,color:"var(--color-text-primary)"},children:[r.awayOffense.rebounds," reb  ",r.awayOffense.reboundXg," xG"]}),r.awayOffense.status&&n.jsx("div",{style:{marginTop:"0.375rem",display:"inline-block",padding:"0.125rem 0.375rem",borderRadius:"3px",background:r.awayOffense.status==="Hot"?"#10B98120":r.awayOffense.status==="Cold"?"#EF444420":"#64748B20",color:r.awayOffense.status==="Hot"?"#10B981":r.awayOffense.status==="Cold"?"#EF4444":"#64748B",fontSize:G.caption.size,fontWeight:G.label.weight,textTransform:"uppercase"},children:r.awayOffense.status})]}),n.jsx("div",{style:{fontSize:G.subheading.size,color:"var(--color-accent)",fontWeight:G.heading.weight},children:""}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:l==="Excellent"?"#10B981":"#64748B",marginBottom:"0.25rem"},children:l}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",marginBottom:"0.375rem"},children:"Control"}),n.jsxs("div",{style:{fontSize:G.caption.size,fontWeight:G.body.weight,color:"var(--color-text-primary)"},children:[r.homeDefense.rebounds," reb  ",r.homeDefense.reboundXg," xG"]})]})]})]})]})},HN=({data:r,awayTeam:e,homeTeam:t,isMobile:i})=>{let o=e,l=0,c=0;r.forEach(m=>{m.advantage==="away"&&l++,m.advantage==="home"&&c++}),o=l>c?e:t;const u=r.find(m=>m.stat==="Shot Blocks"),h=r.find(m=>m.stat==="Hits");return n.jsxs(zu,{title:"Physical Play & Defense",icon:n.jsx(sn,{size:18}),isMobile:i,importance:"MODERATE",children:[l!==c&&n.jsxs("div",{style:{padding:i?dt.innerPadding:"0.875rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"8px",marginBottom:i?dt.innerPadding:"1rem",textAlign:"center"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[n.jsx(xE,{size:20,color:"var(--color-accent)"}),n.jsxs("span",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:"var(--color-accent)"},children:[o," has the PHYSICAL EDGE"]})]}),u&&h&&n.jsxs("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",fontWeight:G.caption.weight},children:[Math.abs(parseFloat(u.diff))," more blocks, ",Math.abs(parseFloat(h.diff))," more hits"]})]}),n.jsx("div",{style:{display:"grid",gap:i?dt.innerPadding:"0.75rem"},children:r.map((m,f)=>n.jsx(UN,{stat:m.stat,awayValue:m.away.value,awayLabel:m.away.label,homeValue:m.home.value,homeLabel:m.home.label,advantage:m.advantage,diff:m.diff,awayTeam:e,homeTeam:t,isMobile:i},f))})]})},UN=({stat:r,awayValue:e,awayLabel:t,homeValue:i,homeLabel:o,advantage:l,diff:c,awayTeam:u,homeTeam:h,isMobile:m})=>n.jsxs("div",{style:{padding:m?dt.innerPadding:"0.875rem",background:ln.factors,border:Mt.flat.border,borderRadius:"6px",transition:ns.normal},children:[n.jsx("div",{style:{fontSize:G.caption.size,fontWeight:G.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.625rem",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:r}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:m?"0.5rem":"1rem",alignItems:"center"},children:[n.jsxs("div",{style:{textAlign:"left",color:l==="away"?"#10B981":"var(--color-text-secondary)",fontWeight:l==="away"?G.heading.weight:G.body.weight},children:[n.jsx("div",{style:{fontSize:G.body.size,fontFeatureSettings:"'tnum'",lineHeight:G.body.lineHeight},children:e}),n.jsx("div",{style:{fontSize:G.caption.size,opacity:.7,fontWeight:G.caption.weight},children:t})]}),n.jsxs("div",{style:{fontSize:G.caption.size,fontWeight:G.heading.weight,color:"var(--color-text-muted)",textAlign:"center"},children:[" ",c]}),n.jsxs("div",{style:{textAlign:"right",color:l==="home"?"#10B981":"var(--color-text-secondary)",fontWeight:l==="home"?G.heading.weight:G.body.weight},children:[n.jsx("div",{style:{fontSize:G.body.size,fontFeatureSettings:"'tnum'",lineHeight:G.body.lineHeight},children:i}),n.jsx("div",{style:{fontSize:G.caption.size,opacity:.7,fontWeight:G.caption.weight},children:o})]})]})]}),qN=({data:r,awayTeam:e,homeTeam:t,isMobile:i})=>{const o=r.away?.corsiPct||50,l=r.home?.corsiPct||50,c=r.away?.fenwickPct||50,u=r.home?.fenwickPct||50,h=r.away?.xGoalsPct||50,m=r.home?.xGoalsPct||50,f=r.away?.faceoffPct||50,x=r.home?.faceoffPct||50,b=(o+c+h)/3,S=(l+u+m)/3,w=b>S?e:t,T=Math.abs(b-S).toFixed(1);return n.jsxs(zu,{title:"Possession & Control",icon:n.jsx(ar,{size:18}),isMobile:i,importance:"MODERATE",children:[n.jsxs("div",{style:{padding:i?dt.innerPadding:"0.875rem",background:T>3?"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:T>3?"1px solid rgba(14, 165, 233, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:i?dt.innerPadding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[n.jsx(ar,{size:20,color:T>3?"#0EA5E9":"#8B5CF6"}),n.jsx("span",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:T>3?"#0EA5E9":"#8B5CF6"},children:T>3?`${w} CONTROLS POSSESSION`:"PRETTY EVEN MATCHUP - POSSESSION"})]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-secondary)",lineHeight:G.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:T>3?`${T}% advantage in shot attempts. More zone time = more scoring chances.`:"Both teams control the puck equally. Possession unlikely to be a deciding factor."})]}),n.jsx(qp,{label:"Shot Attempts (Corsi)",awayValue:o,homeValue:l,awayTeam:e,homeTeam:t,isMobile:i}),n.jsx(qp,{label:"Unblocked Shots (Fenwick)",awayValue:c,homeValue:u,awayTeam:e,homeTeam:t,isMobile:i}),n.jsx(qp,{label:"Expected Goals Share",awayValue:h,homeValue:m,awayTeam:e,homeTeam:t,isMobile:i}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:i?dt.innerPadding:"1rem",marginTop:i?dt.innerPadding:"1rem"},children:[n.jsx(MT,{team:e,percentage:f,isMobile:i}),n.jsx(MT,{team:t,percentage:x,isMobile:i})]})]})},qp=({label:r,awayValue:e,homeValue:t,awayTeam:i,homeTeam:o,isMobile:l})=>{const u=e>t?"#10B981":"#64748B",h=t>e?"#10B981":"#64748B";return n.jsxs("div",{style:{marginBottom:l?dt.innerPadding:"1rem",padding:l?dt.innerPadding:"0.875rem",background:ln.factors,border:Mt.flat.border,borderRadius:"8px"},children:[n.jsxs("div",{style:{fontSize:G.caption.size,fontWeight:G.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("span",{children:r}),n.jsxs("span",{style:{fontSize:G.caption.size,color:"rgba(212, 175, 55, 0.8)"},children:["League Avg: ",50,"%"]})]}),n.jsxs("div",{style:{marginBottom:"0.625rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:G.caption.size},children:[n.jsx("span",{style:{fontWeight:G.body.weight,color:"var(--color-text-primary)"},children:i}),n.jsxs("span",{style:{fontWeight:G.heading.weight,color:u,fontFeatureSettings:"'tnum'"},children:[e.toFixed(1),"%",e>50&&n.jsx("span",{style:{color:"#10B981",marginLeft:"0.25rem"},children:""}),e<50&&n.jsx("span",{style:{color:"#EF4444",marginLeft:"0.25rem"},children:""})]})]}),n.jsxs("div",{style:{width:"100%",height:"10px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"5px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(212, 175, 55, 0.6)",zIndex:2}}),n.jsx("div",{style:{width:`${e}%`,height:"100%",background:`linear-gradient(90deg, ${u} 0%, ${u}CC 100%)`,borderRadius:"5px",transition:ns.normal,position:"relative",zIndex:1}})]})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:G.caption.size},children:[n.jsx("span",{style:{fontWeight:G.body.weight,color:"var(--color-text-primary)"},children:o}),n.jsxs("span",{style:{fontWeight:G.heading.weight,color:h,fontFeatureSettings:"'tnum'"},children:[t.toFixed(1),"%",t>50&&n.jsx("span",{style:{color:"#10B981",marginLeft:"0.25rem"},children:""}),t<50&&n.jsx("span",{style:{color:"#EF4444",marginLeft:"0.25rem"},children:""})]})]}),n.jsxs("div",{style:{width:"100%",height:"10px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"5px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(212, 175, 55, 0.6)",zIndex:2}}),n.jsx("div",{style:{width:`${t}%`,height:"100%",background:`linear-gradient(90deg, ${h} 0%, ${h}CC 100%)`,borderRadius:"5px",transition:ns.normal,position:"relative",zIndex:1}})]})]})]})},MT=({team:r,percentage:e,isMobile:t})=>{const o=2*Math.PI*40,l=e/100*o,c=e>50?"#10B981":e<50?"#EF4444":"#8B5CF6";return n.jsxs("div",{style:{padding:t?dt.innerPadding:"1rem",background:ln.factors,border:Mt.flat.border,borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[n.jsxs("div",{style:{fontSize:G.caption.size,fontWeight:G.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.5rem",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:[r," Faceoffs"]}),n.jsxs("svg",{width:"100",height:"100",children:[n.jsx("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:"rgba(100, 116, 139, 0.2)",strokeWidth:"8"}),n.jsx("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:c,strokeWidth:"8",strokeDasharray:o,strokeDashoffset:o-l,strokeLinecap:"round",transform:"rotate(-90 50 50)",style:{transition:ns.slow}}),n.jsxs("text",{x:"50",y:"50",textAnchor:"middle",dominantBaseline:"middle",style:{fontSize:G.subheading.size,fontWeight:G.heading.weight,fill:c,fontFeatureSettings:"'tnum'"},children:[e.toFixed(1),"%"]})]})]})},YN=({data:r,awayTeam:e,homeTeam:t,isMobile:i})=>n.jsx(zu,{title:"Luck & Regression Indicators",icon:n.jsx(ar,{size:18}),isMobile:i,importance:"MODERATE",children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"repeat(2, 1fr)",gap:i?dt.innerPadding:"1rem"},children:[n.jsx(LT,{team:e,pdo:r.away?.pdo||100,shootingPct:r.away?.shootingPct||10,savePct:r.away?.savePct||90,goalsVsXg:r.away?.goalsVsExpected||0,isMobile:i}),n.jsx(LT,{team:t,pdo:r.home?.pdo||100,shootingPct:r.home?.shootingPct||10,savePct:r.home?.savePct||90,goalsVsXg:r.home?.goalsVsExpected||0,isMobile:i})]})}),LT=({team:r,pdo:e,shootingPct:t,savePct:i,goalsVsXg:o,isMobile:l})=>{const u=e>104?{status:"LIKELY TO DECLINE",color:"#EF4444",icon:"",explanation:"PDO >104 indicates unsustainable luck. Expect fewer goals.",arrow:""}:e>102?{status:"MILD DECLINE LIKELY",color:"#F59E0B",icon:"",explanation:"PDO >102 suggests slight overperformance. Some regression expected.",arrow:""}:e<96?{status:"LIKELY TO IMPROVE",color:"#10B981",icon:"",explanation:"PDO <96 indicates bad luck. Expect more goals.",arrow:""}:e<98?{status:"MILD IMPROVEMENT LIKELY",color:"#0EA5E9",icon:"",explanation:"PDO <98 suggests slight underperformance. Some improvement expected.",arrow:""}:{status:"SUSTAINABLE",color:"#8B5CF6",icon:"",explanation:"PDO 98-102 indicates sustainable performance.",arrow:""};return n.jsxs("div",{style:{padding:l?dt.innerPadding:"1rem",background:ln.factors,border:Mt.flat.border,borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:G.caption.size,fontWeight:G.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.5rem",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:r}),n.jsxs("div",{style:{padding:l?dt.innerPadding:"0.75rem",background:`${u.color}15`,border:`1px solid ${u.color}40`,borderRadius:"6px",marginBottom:l?"0.5rem":"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[n.jsx("span",{style:{fontSize:G.body.size},children:u.icon}),n.jsx("span",{style:{fontSize:G.caption.size,fontWeight:G.heading.weight,color:u.color,textTransform:"uppercase",letterSpacing:"0.05em"},children:u.status})]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-secondary)",lineHeight:G.body.lineHeight,fontStyle:"italic"},children:u.explanation})]}),n.jsx(yg,{label:`PDO ${u.arrow}`,value:e.toFixed(1),badge:e>102?"Hot":e<98?"Cold":"Average",badgeColor:u.color}),n.jsx(yg,{label:"Shooting %",value:`${t.toFixed(1)}%`}),n.jsx(yg,{label:"Save %",value:`${i.toFixed(1)}%`}),n.jsx(yg,{label:"Goals vs xG",value:o>=0?`+${o.toFixed(1)}`:o.toFixed(1),badgeColor:o>0?"#10B981":o<0?"#EF4444":"#64748B"})]})},zu=({title:r,icon:e,children:t,isMobile:i,importance:o})=>{const l={HIGH:"var(--color-accent)",MODERATE:"#0EA5E9",LOW:"#8B5CF6"};return n.jsxs("div",{style:{marginBottom:i?dt.sectionGap:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",marginBottom:i?"0.5rem":"1rem",paddingBottom:"0.5rem",borderBottom:Mt.flat.border},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{color:"var(--color-accent)"},children:e}),n.jsx("h4",{style:{fontSize:i?G.body.size:G.subheading.size,fontWeight:G.heading.weight,color:"var(--color-text-primary)",margin:0,lineHeight:G.heading.lineHeight},children:r})]}),o&&n.jsx("span",{style:{fontSize:G.caption.size,fontWeight:G.label.weight,color:l[o],textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:o})]}),t]})},yg=({label:r,value:e,badge:t,badgeColor:i})=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[n.jsx("span",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",fontWeight:G.caption.weight,lineHeight:G.caption.lineHeight},children:r}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'",lineHeight:G.body.lineHeight},children:e}),t&&n.jsx("span",{style:{fontSize:G.caption.size,fontWeight:G.label.weight,textTransform:G.label.textTransform,letterSpacing:"0.03em",padding:"0.125rem 0.375rem",borderRadius:"3px",background:`${i}20`,color:i},children:t})]})]});function KN(r){if(!r||r.length===0)return null;let e=0,t=0,i=0,o=0,l=0,c=0,u=0;if(r.forEach(w=>{const T=w.edges?.total?.predictedTotal,E=w.rawOdds?.total?.line;if(!T||!E)return;u++;const A=T-E;e+=Math.abs(A),t+=T,i+=E,A<-.3?o++:A>.3?l++:c++}),u===0)return null;const h=e/u,m=t/u,f=i/u,x=o/u,b=l/u,S={avgPredicted:m.toFixed(2),avgMarket:f.toFixed(2),avgDifference:h.toFixed(2),systematicBias:(m-f).toFixed(2),underBias:(x*100).toFixed(0)+"%",overBias:(b*100).toFixed(0)+"%",neutralBias:(c/u*100).toFixed(0)+"%",warnings:[]};return Math.abs(m-f)>.3&&S.warnings.push(` Systematic bias: ${(m-f).toFixed(2)} goals`),x>.6&&S.warnings.push(` UNDER bias: ${(x*100).toFixed(0)}% of games`),b>.6&&S.warnings.push(` OVER bias: ${(b*100).toFixed(0)}% of games`),h>.4&&S.warnings.push(` Predictions diverging from market by ${h.toFixed(2)} goals on average`),console.log(""),console.log(" MODEL VALIDATION REPORT"),console.log(""),console.log(`Avg Predicted Total: ${S.avgPredicted} goals`),console.log(`Avg Market Total:    ${S.avgMarket} goals`),console.log(`Avg Difference:      ${S.avgDifference} goals`),console.log(`Systematic Bias:     ${S.systematicBias} goals`),console.log(""),console.log(`UNDER recommendations: ${S.underBias}`),console.log(`OVER recommendations:  ${S.overBias}`),console.log(`Neutral (0.3):        ${S.neutralBias}`),console.log(""),S.warnings.length>0?(console.log(" WARNINGS:"),S.warnings.forEach(w=>console.log(w))):console.log(" No systematic bias detected"),console.log(""),S}const J6={factors:{rating:{"A+":{weight:.1},A:{weight:.15},"B+":{weight:.4}},oddsRange:{heavy_favorite:{weight:-.2},moderate_favorite:{weight:0},slight_favorite:{weight:-.3},pickem:{weight:-.5},slight_dog:{weight:.3},moderate_dog:{weight:.4},big_dog:{weight:-.2}},evRange:{elite:{weight:-.1},strong:{weight:.2},good:{weight:.1}},confidence:{HIGH:{weight:.5},MEDIUM:{weight:.5},LOW:{weight:-.3}},side:{HOME:{weight:0},AWAY:{weight:.05}},modelProb:{very_high:{weight:-.2},high:{weight:-.2},medium:{weight:-.1},low:{weight:.3}}}};let Ao=null,xg=null;async function XN(){return Ao||xg||(xg=(async()=>{try{const r=await fetch("/nhl_confidence_weights.json");if(r.ok)return Ao=await r.json(),console.log(` Loaded NHL weights from ${Ao.totalBets} graded bets`),Ao}catch{console.warn(" Could not load NHL weights, using defaults")}return Ao=J6,Ao})(),xg)}function QN(r){return r<=-200?"heavy_favorite":r>-200&&r<=-150?"moderate_favorite":r>-150&&r<-100?"slight_favorite":Math.abs(r)<=109||r===-110?"pickem":r>=110&&r<150?"slight_dog":r>=150&&r<200?"moderate_dog":r>=200?"big_dog":"pickem"}function ZN(r){return r>=10?"elite":r>=5?"strong":r>=1.5?"good":"low"}function JN(r){return r>=.7?"very_high":r>=.6?"high":r>=.5?"medium":"low"}function e$(r,e=null){const t=e||Ao||J6,i=r.prediction?.rating||"B+",o=r.bet?.odds||0,l=r.prediction?.evPercent||0,c=r.prediction?.confidence||"MEDIUM",u=r.bet?.side||"HOME",h=r.prediction?.modelProb||.5;let m=0;const f={},x=t.factors?.rating?.[i]?.weight||0;m+=x,f.rating={value:i,weight:x};const b=QN(o),S=t.factors?.oddsRange?.[b]?.weight||0;m+=S,f.oddsRange={value:b,weight:S};const w=ZN(l),T=t.factors?.evRange?.[w]?.weight||0;m+=T,f.evRange={value:w,weight:T};const E=t.factors?.confidence?.[c]?.weight||0;m+=E,f.confidence={value:c,weight:E};const A=t.factors?.side?.[u]?.weight||0;m+=A,f.side={value:u,weight:A};const _=JN(h),B=t.factors?.modelProb?.[_]?.weight||0;m+=B,f.modelProb={value:_,weight:B};const I=Math.max(-1,Math.min(1,m));let L=1+I*.5;L=Math.max(.5,Math.min(1.5,L)),L=Math.round(L*4)/4;let M;return L>=1.5?M=" MAX CONFIDENCE":L>=1.25?M=" HIGH CONFIDENCE":L>=1?M=" STANDARD":L>=.75?M=" REDUCED":M=" MINIMUM",{units:L,tier:M,score:I,rawScore:m,factors:f}}class t${constructor(){this.weightsPromise=XN()}generateBetId(e,t,i,o,l){if(o==="TOTAL"||o?.includes("TOTAL"))return console.warn(" TOTALS BETTING DISABLED - Focus on 64.7% moneyline win rate"),null;if(o==="MONEYLINE"){const c=l.team||t;return`${t}_${i}_MONEYLINE_${c}`}return`${t}_${i}_${o}_${l.pick.replace(/\s+/g,"_")}`}async saveBet(e,t,i){if(!t||t.market==="TOTAL"||t.market?.includes("TOTAL")){console.log(" Skipping totals bet (disabled) - Focus on moneyline edge");return}if(t.market==="MONEYLINE"&&!t.dratingsProb&&!t.calibratedProb)return null;const o=e.date||hP(),l=this.generateBetId(o,e.awayTeam,e.homeTeam,t.market,t);if(!l)return;const c={id:l,date:o,timestamp:Date.now(),game:{awayTeam:e.awayTeam,homeTeam:e.homeTeam,gameTime:e.gameTime,actualStartTime:e.startTimestamp||null},bet:{market:t.market,pick:t.pick,line:t.line||null,odds:t.odds,team:t.team||null,side:this.extractSide(t)},prediction:{awayScore:i.awayScore,homeScore:i.homeScore,totalScore:i.totalScore,awayWinProb:i.awayWinProb,homeWinProb:i.homeWinProb,modelProb:t.modelProb,marketProb:t.marketProb||this.calculateMarketProb(t.odds),evPercent:t.evPercent,ev:t.ev,kelly:t.kelly,ensembleProb:t.ensembleProb||null,agreement:t.agreement||null,confidence:t.confidence||"MEDIUM",qualityGrade:t.qualityGrade||null,recommendedUnit:t.recommendedUnit||null,rating:t.rating||this.getRating(t.evPercent),tier:t.tier||this.getTier(t.evPercent),dynamicUnits:null,dynamicTier:null,dynamicScore:null},goalies:{away:e.goalies?.away||null,home:e.goalies?.home||null},result:{awayScore:null,homeScore:null,totalScore:null,winner:null,outcome:null,profit:null,actualProfit:null,fetched:!1,fetchedAt:null,source:null},status:"PENDING",recommended:!0,tracked:!0,modelVersion:"v2.2-ensemble",displayedAt:Date.now(),displayedGrade:t.qualityGrade||null,displayedEV:t.evPercent,displayedOdds:t.odds,notes:""};try{const u=await this.weightsPromise,h=e$(c,u);c.prediction.dynamicUnits=h.units,c.prediction.dynamicTier=h.tier,c.prediction.dynamicScore=h.score,console.log(` Dynamic Units: ${h.units}u (${h.tier}) - Score: ${h.rawScore.toFixed(2)}`)}catch(u){console.warn(" Could not calculate dynamic units:",u.message),c.prediction.dynamicUnits=1,c.prediction.dynamicTier=" STANDARD",c.prediction.dynamicScore=0}try{const u=$r(St,"bets",l);return await lI(St,async h=>{const m=await h.get(u);if(m.exists()){const f=m.data(),x=Math.abs(f.bet.odds-t.odds)>=5,b=Math.abs(f.prediction.evPercent-t.evPercent)>=1,S=t.line&&f.bet.line&&Math.abs(f.bet.line-t.line)>=.5,w=f.prediction.qualityGrade&&t.qualityGrade&&f.prediction.qualityGrade!==t.qualityGrade;if(x||b||S||w){const T={timestamp:Date.now(),odds:t.odds,evPercent:t.evPercent,modelProb:t.modelProb,marketProb:t.marketProb||this.calculateMarketProb(t.odds),qualityGrade:t.qualityGrade||null,agreement:t.agreement||null,ensembleProb:t.ensembleProb||null,confidence:t.confidence||null};t.line&&(T.line=t.line),h.update(u,{history:ik(T),"bet.odds":t.odds,"bet.line":t.line||null,"prediction.evPercent":t.evPercent,"prediction.ev":t.ev,"prediction.modelProb":t.modelProb,"prediction.marketProb":t.marketProb||this.calculateMarketProb(t.odds),"prediction.kelly":t.kelly,"prediction.rating":t.rating||this.getRating(t.evPercent),"prediction.ensembleProb":t.ensembleProb||null,"prediction.agreement":t.agreement||null,"prediction.qualityGrade":t.qualityGrade||null,"prediction.confidence":t.confidence||null,"prediction.recommendedUnit":t.recommendedUnit||null,timestamp:Date.now()});const E=[];x&&E.push(`odds: ${f.bet.odds}  ${t.odds}`),S&&E.push(`line: ${f.bet.line}  ${t.line}`),b&&E.push(`EV: ${f.prediction.evPercent.toFixed(1)}%  ${t.evPercent.toFixed(1)}%`),w&&(E.push(`grade: ${f.prediction.qualityGrade}  ${t.qualityGrade}`),console.log(` Grade changed for ${l}: ${f.prediction.qualityGrade}  ${t.qualityGrade}`)),console.log(` Updated bet: ${l} (${E.join(", ")})`)}else console.log(` Skipped update (no significant change): ${l}`)}else{const f={timestamp:Date.now(),odds:t.odds,evPercent:t.evPercent,modelProb:t.modelProb,marketProb:t.marketProb||this.calculateMarketProb(t.odds),qualityGrade:t.qualityGrade||null,agreement:t.agreement||null,ensembleProb:t.ensembleProb||null,confidence:t.confidence||null};t.line&&(f.line=t.line),h.set(u,{...c,history:[f],firstRecommendedAt:Date.now(),initialOdds:t.odds,initialLine:t.line||null,initialEV:t.evPercent}),console.log(` Saved new bet: ${l} (${t.odds}, +${t.evPercent.toFixed(1)}% EV)`)}}),l}catch(u){throw console.error(" Error saving bet:",u),u}}async updateBetResult(e,t,i){const o=$r(St,"bets",e),l=this.calculateOutcome(t,i.bet),c=i.prediction?.dynamicUnits||i.prediction?.recommendedUnit||1,u=this.calculateProfit(l,i.bet.odds,c);await Eu(o,{"result.awayScore":t.awayScore,"result.homeScore":t.homeScore,"result.totalScore":t.awayScore+t.homeScore,"result.winner":t.awayScore>t.homeScore?"AWAY":"HOME","result.outcome":l,"result.profit":u,"result.units":c,"result.fetched":!0,"result.fetchedAt":Date.now(),"result.source":t.source||"API",status:"COMPLETED"}),console.log(` Updated bet result: ${e}  ${l} (${u.toFixed(2)}u @ ${c}u stake)`)}async getPendingBets(){const e=Jr(mr(St,"bets"),$n("status","==","PENDING"),$d("timestamp","desc"));return(await ci(e)).docs.map(i=>({id:i.id,...i.data()}))}async getBetsByDate(e){const t=Jr(mr(St,"bets"),$n("date","==",e),$d("timestamp","desc"));return(await ci(t)).docs.map(o=>({id:o.id,...o.data()}))}async getCompletedBets(){const e=Jr(mr(St,"bets"),$n("status","==","COMPLETED"),$d("timestamp","desc"));return(await ci(e)).docs.map(i=>({id:i.id,...i.data()}))}calculateOutcome(e,t){switch(t.market){case"TOTAL":return t.side==="OVER"?e.totalScore>t.line?"WIN":e.totalScore<t.line?"LOSS":"PUSH":e.totalScore<t.line?"WIN":e.totalScore>t.line?"LOSS":"PUSH";case"MONEYLINE":return t.side==="HOME"?e.winner==="HOME"?"WIN":"LOSS":e.winner==="AWAY"?"WIN":"LOSS";case"PUCK_LINE":case"PUCKLINE":const i=t.line||1.5;if(t.side==="HOME"){const l=e.homeScore-e.awayScore;return l>i?"WIN":l<i?"LOSS":"PUSH"}else{const l=e.awayScore-e.homeScore;return l>i?"WIN":l<i?"LOSS":"PUSH"}case"TEAM_TOTAL":const o=t.team===t.game?.homeTeam?e.homeScore:e.awayScore;return t.side==="OVER"?o>t.line?"WIN":o<t.line?"LOSS":"PUSH":o<t.line?"WIN":o>t.line?"LOSS":"PUSH";default:return null}}calculateProfit(e,t,i=1){return e==="PUSH"?0:e==="LOSS"?-i:t<0?100/Math.abs(t)*i:t/100*i}extractSide(e){const t=e.pick.toUpperCase();return e.market==="TOTAL"?t.includes("OVER")?"OVER":"UNDER":e.market==="MONEYLINE"||e.market==="PUCK_LINE"||e.market==="PUCKLINE"?t.includes("(HOME)")?"HOME":"AWAY":e.market==="TEAM_TOTAL"?t.includes("OVER")?"OVER":"UNDER":null}calculateMarketProb(e){return e<0?Math.abs(e)/(Math.abs(e)+100):100/(e+100)}getRating(e){return e>=8?"A+":e>=5?"A":e>=3?"B+":e>=2?"B":"C"}getTier(e){return e>=8?"ELITE":e>=5?"EXCELLENT":e>=3?"STRONG":e>=2?"GOOD":"VALUE"}}function r$(r,e,t){const i=O.useRef(new t$),o=O.useRef(new Map),l=O.useRef(new Set);return O.useEffect(()=>{!r||r.length===0||!e||e.length===0||(an(),console.log(` Tracking ${r.length} ensemble-filtered bets (shown to users)`),(async()=>{for(const c of r){const u=e.find(b=>b.game===c.game);if(!u){console.warn(` Could not find game data for ${c.game}`);continue}const[h,m]=c.game.split(" @ "),x=`${`${h}_${m}`}_${c.market}_${c.pick.replace(/\s+/g,"_")}`;if(!l.current.has(x)){if(o.current.has(x)){console.log(` Already processing ${x}, skipping...`);continue}o.current.set(x,!0);try{const b={awayScore:u.edges.moneyline?.away?.predictedScore||u.edges.total?.awayScore||0,homeScore:u.edges.moneyline?.home?.predictedScore||u.edges.total?.homeScore||0,totalScore:u.edges.total?.predictedTotal||0,awayWinProb:u.edges.moneyline?.away?.modelProb||.5,homeWinProb:u.edges.moneyline?.home?.modelProb||.5};await i.current.saveBet(u,c,b)&&(console.log(` Tracked ${c.qualityGrade||"B"}: ${c.game} - ${c.pick} (+${c.evPercent.toFixed(1)}% EV)`),l.current.add(x))}catch(b){console.error(` Failed to save bet ${x}:`,b)}finally{o.current.delete(x)}}}})())},[r,e]),i.current}function e3(){const[r,e]=O.useState([]),[t,i]=O.useState(!0),[o,l]=O.useState(null),c=async()=>{try{const h=new Date,m=h.getFullYear(),f=String(h.getMonth()+1).padStart(2,"0"),x=String(h.getDate()).padStart(2,"0"),b=`${m}-${f}-${x}`;console.log(` Fetching live scores from NHL API for ${b} (LOCAL time)...`);const S=`https://api-web.nhle.com/v1/schedule/${b}`;let w=null,T=null;try{w=await fetch(S),w.ok&&(T=await w.json(),console.log(" Direct NHL API fetch successful"))}catch{console.log(" Direct fetch failed, trying proxies...")}if(!T){const B=["https://corsproxy.io/?","https://api.allorigins.win/raw?url="];for(const I of B)try{const L=`${I}${encodeURIComponent(S)}`;if(w=await fetch(L),w.ok){T=await w.json(),console.log(` Fetched via ${I.split("/")[2]}`);break}}catch{console.warn(` Proxy ${I.split("/")[2]} failed`)}}if(!T){console.warn(" All live score methods failed - showing pre-game data only"),e([]),i(!1);return}const A=(T.gameWeek||[])[0]?.games||[],_=await Promise.all(A.map(async B=>{const I={date:b,gameId:B.id,awayTeam:B.awayTeam.abbrev,homeTeam:B.homeTeam.abbrev,awayScore:B.awayTeam.score||0,homeScore:B.homeTeam.score||0,totalScore:(B.awayTeam.score||0)+(B.homeTeam.score||0),gameState:B.gameState||"FUT",period:B.periodDescriptor?.number||0,periodDescriptor:B.periodDescriptor?.periodType||"",clock:"",gameTime:B.startTimeUTC||"",lastUpdate:new Date().toISOString()};return["OFF","FINAL","CRIT"].includes(I.gameState)?I.status="FINAL":I.gameState==="LIVE"?(I.status="LIVE",await u(I)):["FUT","PRE"].includes(I.gameState)?I.status="SCHEDULED":I.status="UNKNOWN",I}));e(_),l(new Date().toISOString()),console.log(` Live scores updated: ${_.length} games`),_.forEach(B=>{console.log(`    ${B.awayTeam} @ ${B.homeTeam}: ${B.status} (${B.awayScore}-${B.homeScore})`)}),i(!1)}catch(h){console.error(" Error fetching live scores:",h),console.error("Error details:",h.message),i(!1)}},u=async h=>{try{const m=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?"],f=`https://api-web.nhle.com/v1/gamecenter/${h.gameId}/play-by-play`;let x=null;for(const S of m)try{if(x=await fetch(`${S}${encodeURIComponent(f)}`),x.ok)break}catch{continue}if(!x||!x.ok){console.warn(`  Could not fetch live details for game ${h.gameId}`);return}const b=await x.json();b.periodDescriptor&&(h.period=b.periodDescriptor.number||h.period,h.periodDescriptor=b.periodDescriptor.periodType||h.periodDescriptor),b.clock&&(h.clock=b.clock.timeRemaining||"")}catch(m){console.warn(`  Error fetching live game details: ${m.message}`)}};return O.useEffect(()=>{c();const h=setInterval(c,3e4);return()=>{console.log("Stopping live scores polling"),clearInterval(h)}},[]),{scores:r,loading:t,lastUpdate:o}}function t3(){const[r,e]=O.useState([]),[t,i]=O.useState(!0),[o,l]=O.useState(null);return O.useEffect(()=>{const c=an(),u=cE();console.log(` Fetching Firebase bets for ${u} AND ${c} (ET)`);const h=Os(mr(St,"bets"),m=>{const f=m.docs.map(x=>({id:x.id,...x.data()})).filter(x=>x.date===c||x.date===u).sort((x,b)=>(b.timestamp||0)-(x.timestamp||0));console.log(` Loaded ${f.length} bets from Firebase`),console.log("Dates found:",[...new Set(f.map(x=>x.date))]),console.log("Bets:",f.map(x=>`${x.date}: ${x.game?.awayTeam} @ ${x.game?.homeTeam}`)),e(f),i(!1)},m=>{console.error(" Error fetching Firebase bets:",m),l(m),i(!1)});return()=>h()},[]),{bets:r,loading:t,error:o}}async function n$(r,e){const t=an(),i=`${r}-${e}-${t}`,o=$r(St,"perplexityCache",i);console.log(" FIREBASE QUERY FOR HOT TAKES "),console.log("   Away Team:",r),console.log("   Home Team:",e),console.log("   Cache Key:",i),console.log("   Collection: perplexityCache");const{utcDate:l,etDate:c}=gP("Hot Takes Lookup");l!==c&&console.log("    Using ET date instead of UTC to match GitHub Action cache keys");try{const u=await Vs(o);if(console.log("   Firebase Response - Exists?:",u.exists()),u.exists()){const h=u.data();console.log(" Found cached document!"),console.log("   Full Data:",h),console.log("   Content length:",h.content?.length||0),console.log("   Content preview:",h.content?.substring(0,200));const m=JSON.parse(h.content);return console.log(" Parsed",m.length,"insight cards"),m}else console.log(" NO DOCUMENT EXISTS AT THIS KEY"),console.log("   Check if GitHub Action ran today"),console.log("   Check Firebase console for key:",i)}catch(u){console.error(" ERROR loading Expert Analysis:",u),console.error("   Error details:",u.message),console.error("   Stack:",u.stack)}return console.log("   Returning empty array (no insights)"),[]}async function r3(r,e){const t=an(),i=`${r}-${e}-${t}-bet-hook`,o=$r(St,"perplexityCache",i);console.log(" Looking for Bet Hook:",{awayTeam:r,homeTeam:e,cacheKey:i});try{const l=await Vs(o);if(l.exists())return console.log(" Found cached bet hook"),l.data().content;console.log(" No cached bet hook found")}catch(l){console.error(" Error loading bet hook:",l)}return null}const i$=({game:r,bestEdge:e,isMobile:t})=>{const[i,o]=O.useState(null),[l,c]=O.useState(!0);return O.useEffect(()=>{if(!r){c(!1);return}if(!e||e.evPercent<=0){c(!1);return}(async()=>{try{const h=await r3(r.awayTeam,r.homeTeam);o(h)}catch(h){console.error("Error fetching bet narrative:",h)}finally{c(!1)}})()},[r?.awayTeam,r?.homeTeam,e]),l?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"1rem",fontSize:G.body.size,color:"var(--color-text-muted)",fontStyle:"italic"},children:[n.jsx("div",{className:"spinner",style:{width:"16px",height:"16px",border:"2px solid rgba(59, 130, 246, 0.3)",borderTopColor:"#3B82F6",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Generating expert analysis..."]}):!e||e.evPercent<=0?n.jsx("div",{style:{padding:"1rem",fontSize:G.body.size,color:"var(--color-text-muted)",lineHeight:"1.6"},children:"This matchup shows balanced odds with no clear edge at current lines. Our model updates continuously as odds shift throughout the day."}):i?n.jsx("div",{style:{fontSize:G.body.size,lineHeight:"1.7",color:"var(--color-text-primary)",fontWeight:G.body.weight,padding:t?"0.75rem":"1rem"},children:i}):n.jsx("div",{style:{padding:"1rem",fontSize:G.body.size,color:"var(--color-text-muted)",fontStyle:"italic",lineHeight:"1.6"},children:"Expert analysis will be available shortly. Our model has identified strong value in this matchup."})},s$=({header:r,children:e,defaultExpanded:t=!1,index:i=0,isMobile:o=!1,onToggle:l,id:c,forceCollapse:u,...h})=>{const[m,f]=O.useState(t);Xd.useEffect(()=>{u&&f(!1)},[u]);const x=()=>{const b=!m;l&&l(b)===!1&&b===!0||f(b)};return n.jsxs("div",{id:c,...h,className:"elevated-card game-card hover-lift",style:{animationDelay:`${i*.1}s`,position:"relative",overflow:"hidden",background:m?"var(--color-bg-secondary)":"linear-gradient(135deg, rgba(16, 185, 129, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)",border:m?"1px solid var(--color-border)":"1px solid rgba(16, 185, 129, 0.15)",borderRadius:"10px",transition:"all 0.3s ease",scrollMarginTop:"80px"},children:[n.jsx("div",{onClick:x,style:{cursor:"pointer",position:"relative",transition:"all 0.2s ease"},onMouseEnter:b=>{m||(b.currentTarget.style.background="rgba(16, 185, 129, 0.08)")},onMouseLeave:b=>{m||(b.currentTarget.style.background="transparent")},children:n.jsxs("div",{style:{position:"relative",paddingRight:o?"44px":"50px"},children:[Xd.cloneElement(r,{isCollapsed:!m}),n.jsx("div",{style:{position:"absolute",top:"50%",right:o?"0.625rem":"0.875rem",transform:"translateY(-50%)",display:"flex",alignItems:"center",justifyContent:"center",width:o?"30px":"36px",height:o?"30px":"36px",borderRadius:"8px",background:m?"linear-gradient(135deg, rgba(16, 185, 129, 0.18) 0%, rgba(16, 185, 129, 0.12) 100%)":"linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(16, 185, 129, 0.12) 100%)",border:`1.5px solid ${m?"rgba(16, 185, 129, 0.35)":"rgba(59, 130, 246, 0.25)"}`,boxShadow:m?"0 2px 6px rgba(16, 185, 129, 0.18)":"0 2px 6px rgba(59, 130, 246, 0.18)",transition:"all 0.3s ease",pointerEvents:"none",zIndex:10},children:m?n.jsx(Go,{size:o?16:20,color:"#10B981",strokeWidth:2.5}):n.jsx(Wo,{size:o?16:20,color:"#3B82F6",strokeWidth:2.5})})]})}),n.jsx("div",{style:{maxHeight:m?"10000px":"0",opacity:m?1:0,overflow:"hidden",transition:"max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease"},children:e})]})},Ed=({stepNumber:r,title:e,emoji:t,accentColor:i="#D4AF37",children:o,isMobile:l=!1,className:c=""})=>n.jsxs("div",{className:c,style:{position:"relative",marginBottom:"0.75rem",borderLeft:`4px solid ${i}`,background:`linear-gradient(135deg, ${i}08 0%, ${i}03 100%)`,borderRadius:"0 12px 12px 0",overflow:"hidden",transition:"all 0.3s ease"},children:[n.jsxs("div",{style:{padding:l?"0.75rem 1rem":"0.875rem 1.25rem",borderBottom:`1px solid ${i}30`,background:`${i}10`,display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("div",{style:{minWidth:l?"28px":"32px",height:l?"28px":"32px",borderRadius:"8px",background:`linear-gradient(135deg, ${i} 0%, ${i}CC 100%)`,color:"rgba(0, 0, 0, 0.85)",fontWeight:"900",fontSize:l?"0.875rem":"1rem",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 2px 8px ${i}40`,letterSpacing:"-0.02em"},children:r}),n.jsxs("div",{style:{flex:1,fontSize:l?"0.75rem":"0.813rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.1em",color:i,display:"flex",alignItems:"center",gap:"0.5rem"},children:[t&&n.jsx("span",{style:{fontSize:l?"1rem":"1.125rem"},children:t}),n.jsx("span",{children:e})]})]}),n.jsx("div",{style:{padding:"0.875rem"},children:o})]}),o$=({game:r,awayTeam:e,homeTeam:t,dataProcessor:i,isMobile:o=!1})=>{if(!r||!i)return null;try{const l=i.getTeamsBySituation("5on5"),c=l.find(B=>B.team===e),u=l.find(B=>B.team===t),h=c?.xGF_per60||0,m=u?.xGF_per60||0,f=c?.xGA_per60||0,x=u?.xGA_per60||0;if(!h&&!m&&!f&&!x)return null;const b=r.goalies?.away?.name||null,S=r.goalies?.home?.name||null,w=h>m?e:t,T=Math.max(h,m).toFixed(2),E=f<x?e:t,A=Math.min(f,x).toFixed(2),_=({icon:B,label:I,value:L,isAdvantage:M=!1})=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:o?"0.375rem 0.5rem":"0.375rem 0.625rem",background:M?"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%)":"rgba(255, 255, 255, 0.05)",border:M?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:o?"0.688rem":"0.75rem",fontWeight:"700",whiteSpace:"nowrap"},children:[n.jsx(B,{size:o?12:14,color:M?"#10B981":"#94A3B8"}),n.jsxs("span",{style:{color:M?"#10B981":"var(--color-text-muted)",fontSize:o?"0.625rem":"0.688rem",fontWeight:"600"},children:[I,":"]}),n.jsx("span",{style:{color:M?"#10B981":"var(--color-text-primary)",fontWeight:"800"},children:L})]});return n.jsxs("div",{style:{padding:o?"0.5rem 0.75rem":"0.625rem 1rem",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.15) 100%)",borderTop:"1px solid rgba(255, 255, 255, 0.05)",display:"flex",alignItems:"center",gap:o?"0.5rem":"0.75rem",flexWrap:"wrap",overflow:"hidden"},children:[h>0&&m>0&&n.jsx(_,{icon:fr,label:`${w} OFF`,value:T,isAdvantage:Math.abs(h-m)>.3}),f>0&&x>0&&n.jsx(_,{icon:sn,label:`${E} DEF`,value:A,isAdvantage:Math.abs(f-x)>.3}),(b||S)&&n.jsx(_,{icon:ou,label:"",value:b&&S?"Both confirmed":"TBD",isAdvantage:b&&S}),o&&!h&&n.jsx("div",{style:{fontSize:"0.688rem",color:"var(--color-text-muted)",fontStyle:"italic"},children:"Stats loading..."})]})}catch(l){return console.warn("QuickStatsBar error:",l),null}},a$=({game:r,dataProcessor:e,statsAnalyzer:t,bestEdge:i,firebaseBets:o,awayGoalie:l,homeGoalie:c,isMobile:u=!1})=>{if(!r||!e||!t)return null;const h=r.awayTeam,m=r.homeTeam;o?.find(Be=>{const $t=Be.game||Be;return $t.awayTeam===h&&$t.homeTeam===m||$t.away===h&&$t.home===m})&&(!i||i.evPercent<5);const x=e.getTeamData(h,"5on5"),b=e.getTeamData(m,"5on5");if(!x||!b)return null;const S=x.xGoalsFor/x.gamesPlayed||0,w=b.xGoalsFor/b.gamesPlayed||0,T=x.xGoalsAgainst/x.gamesPlayed||0,E=b.xGoalsAgainst/b.gamesPlayed||0,A=2.18,_=2.18,B=t.getHighDangerMetrics(h,"5on5"),I=t.getHighDangerMetrics(m,"5on5"),L=(B?.hdXgFor||0)/(x.gamesPlayed||1),M=(I?.hdXgFor||0)/(b.gamesPlayed||1),R=(x.xGoalsFromActualReboundsOfShotsFor||0)/(x.gamesPlayed||1),j=(b.xGoalsFromActualReboundsOfShotsFor||0)/(b.gamesPlayed||1),F=(x.dZoneGiveawaysFor||0)/(x.gamesPlayed||1),z=(b.dZoneGiveawaysFor||0)/(b.gamesPlayed||1),P=x.corsiPercentage||.5,V=b.corsiPercentage||.5;x.fenwickPercentage,b.fenwickPercentage;const N=x.faceOffsWonFor||0,Z=(x.faceOffsWonFor||0)+(x.faceOffsWonAgainst||0),Q=Z>0?N/Z:.5,H=b.faceOffsWonFor||0,U=(b.faceOffsWonFor||0)+(b.faceOffsWonAgainst||0),K=U>0?H/U:.5;(x.hitsFor||0)/(x.gamesPlayed||1),(b.hitsFor||0)/(b.gamesPlayed||1);const X=(x.takeawaysFor||0)/(x.gamesPlayed||1),re=(b.takeawaysFor||0)/(b.gamesPlayed||1),me=x.blockedShotAttemptsAgainst||0,ke=x.shotAttemptsAgainst||1,te=me/ke*100,le=b.blockedShotAttemptsAgainst||0,ve=b.shotAttemptsAgainst||1,xe=le/ve*100,ue=t.getHighDangerMetrics(h,"5on4"),Re=t.getHighDangerMetrics(m,"5on4"),Te=ue?.hdXgfPer60||0,$e=Re?.hdXgfPer60||0,rt=Te-$e,Ke=2.95,et=e.getTeamData(h,"5on4"),Tt=e.getTeamData(m,"5on4"),Dt=et&&et.shotAttemptsFor>0?(et.highDangerShotsFor||0)/et.shotAttemptsFor*100:0,Ce=Tt&&Tt.shotAttemptsFor>0?(Tt.highDangerShotsFor||0)/Tt.shotAttemptsFor*100:0,ot=t.getLeagueRank(h,"highDangerxGoalsFor","5on4",!0),Ae=t.getLeagueRank(m,"highDangerxGoalsFor","5on4",!0),fe=l?.gsae?parseFloat(l.gsae):0,Ue=c?.gsae?parseFloat(c.gsae):0,We=fe-Ue,kt=t.getRegressionIndicators(h,"5on5"),Ve=t.getRegressionIndicators(m,"5on5"),J=kt?.pdo||100,Ee=Ve?.pdo||100,Xe=J>102?-((J-100)*.06):J<98?(100-J)*.05:0,ut=Ee>102?-((Ee-100)*.06):Ee<98?(100-Ee)*.05:0,mt=Math.abs(S-w)>.15?Math.abs(S-w)*.4:0,be=S>w?h:m,oe=Math.abs(T-E)>.15?Math.abs(T-E)*.4:0,Ie=Math.abs(rt)>.5?Math.abs(rt)*.15:0,Pe=rt>0?h:m,Fe=Math.abs(We)>.3?Math.abs(We)*.15:0,he=We>0?h:m,He=Math.abs(Xe-ut),Qe=ut-Xe>0?m:h,Oe=Math.abs(P-V)>.03?Math.abs(P-V)*.3:0,Le=P>V?h:m,Se=F>7&&re>3||z>7&&X>3?.25:0,qe=F>7&&re>3?m:h,Ne=S-T+Xe+(P-.5)*.5>w-E+ut+(V-.5)*.5?h:m,ze=i&&i.evPercent>5?i:null;ze&&ze.team;const _e=(()=>{const Be=Math.abs(S-w),$t=Math.abs(T-E),Vt=Math.abs(rt);return Vt>.8&&Vt>Be*2?" Special teams showdown - elite PP could be the difference":Be>.3&&$t<.15?" Firepower vs structure - high-powered offense meets defensive wall":Oe>.08?" Possession battle - territorial control drives this matchup":Se>.2?" Turnover war - mistakes will be punished in transition":Math.abs(J-Ee)>4?" Regression game - luck is about to even out":Be<.15&&$t<.15?" Defensive grind - two evenly-matched teams battle it out":" Clash of styles - key edges will decide this one"})(),xt=fe>10?"Elite":fe>3?"Above Average":fe>-3?"Average":"Below Average",Zt=Ue>10?"Elite":Ue>3?"Above Average":Ue>-3?"Average":"Below Average",wt=Math.abs(We)>.3?We>0?h:m:null,Ut=Math.abs(We*.1).toFixed(2),Dr=l?.hdSavePct?parseFloat(l.hdSavePct):0,_n=c?.hdSavePct?parseFloat(c.hdSavePct):0,Vr=Math.abs(Dr-_n),it=[{icon:"",name:"WHO CREATES BETTER CHANCES?",subtitle:"",awayValue:S,homeValue:w,leagueAvg:A,percentDiff:(Math.abs(S-w)/A*100).toFixed(1),advantage:Math.abs(S-w)>.15?S>w?h:m:null,significance:Math.abs(S-w)>.25?"high":Math.abs(S-w)>.15?"moderate":"low",format:Be=>Be.toFixed(2),keyInsight:L>M?`${h}'s slot dominance (${((L/M-1)*100).toFixed(0)}% more HD chances) = +${(mt||0).toFixed(2)}g`:M>L?`${m}'s slot dominance (${((M/L-1)*100).toFixed(0)}% more HD chances) = +${(mt||0).toFixed(2)}g`:"Even offensive quality - no clear advantage",context:L>M?`${h} generates ${((L/M-1)*100).toFixed(0)}% more slot chances (${L.toFixed(2)} vs ${M.toFixed(2)} HD xG)`:M>L?`${m} generates ${((M/L-1)*100).toFixed(0)}% more slot chances (${M.toFixed(2)} vs ${L.toFixed(2)} HD xG)`:"Even battle - both teams create similar quality chances",stats:[{label:" Slot",away:L.toFixed(2),home:M.toFixed(2),winner:L>M?"away":"home"},{label:" Rebound",away:R.toFixed(2),home:j.toFixed(2)}]},{icon:"",name:"WHO PREVENTS GOALS BETTER?",subtitle:"",awayValue:T,homeValue:E,leagueAvg:_,percentDiff:(Math.abs(T-E)/_*100).toFixed(1),advantage:Math.abs(T-E)>.15?T<E?h:m:null,significance:Math.abs(T-E)>.25?"high":Math.abs(T-E)>.15?"moderate":"low",format:Be=>Be.toFixed(2),keyInsight:T<E?`${h} allows ${((1-T/E)*100).toFixed(0)}% fewer quality chances = +${(oe||0).toFixed(2)}g`:E<T?`${m} allows ${((1-E/T)*100).toFixed(0)}% fewer quality chances = +${(oe||0).toFixed(2)}g`:"Even defensive structures - no clear edge",context:F>7?`${h} bleeds ${F.toFixed(1)} turnovers/gm (${t.getLeagueRank(h,"dZoneGiveawaysFor","5on5",!1)||"bottom-10"} in NHL) = rush chances`:z>7?`${m} bleeds ${z.toFixed(1)} turnovers/gm (${t.getLeagueRank(m,"dZoneGiveawaysFor","5on5",!1)||"bottom-10"} in NHL) = rush chances`:"Both teams protect the puck well - clean defensive play",stats:[{label:" Turnovers",away:F.toFixed(1),home:z.toFixed(1),warning:F>7||z>7}]},{icon:"",name:"WHO DOMINATES SPECIAL TEAMS?",subtitle:"",awayValue:Te,homeValue:$e,leagueAvg:Ke,percentDiff:(Math.abs(rt)/Ke*100).toFixed(1),advantage:Math.abs(rt)>.5?rt>0?h:m:null,significance:Math.abs(rt)>1?"high":Math.abs(rt)>.5?"moderate":"low",format:Be=>Be.toFixed(2),keyInsight:Math.abs(rt)>.5?`${rt>0?h:m}'s PP (${Math.max(Dt,Ce).toFixed(0)}% HD shots) vs weak PK = +${(Ie||0).toFixed(2)}g`:"Even special teams - no PP/PK advantage",context:rt>.8&&ot<=10?`${h}'s elite PP (#${ot} in NHL) shoots ${Dt.toFixed(0)}% from danger areas = 2x conversion`:rt<-.8&&Ae<=10?`${m}'s elite PP (#${Ae} in NHL) shoots ${Ce.toFixed(0)}% from danger areas = 2x conversion`:Math.abs(rt)>.5?`Clear ${(Math.abs(rt)/Ke*100).toFixed(0)}% special teams gap - PP quality matters`:"Special teams evenly matched - not a deciding factor",stats:[{label:" Quality",away:`${Dt.toFixed(0)}%`,home:`${Ce.toFixed(0)}%`,suffix:"HD shots"},{label:" Impact",value:`= ${Math.abs(rt*.15).toFixed(2)} goals`}]}];return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes shine {
          0% { left: -100%; }
          20% { left: 100%; }
          100% { left: 100%; }
        }
      `}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 50%, rgba(17, 24, 39, 0.98) 100%)",border:"1px solid rgba(16, 185, 129, 0.25)",borderRadius:"14px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(16, 185, 129, 0.1) inset"},children:[n.jsx("div",{style:{padding:u?"0.875rem 1rem":"1.125rem 1.5rem",borderBottom:"1px solid rgba(16, 185, 129, 0.15)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(6, 182, 212, 0.08) 100%)",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.2)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem"},children:[n.jsx("span",{style:{fontSize:"1.25rem",filter:"drop-shadow(0 0 8px rgba(16, 185, 129, 0.6))"},children:""}),n.jsx("span",{style:{fontSize:u?"0.875rem":"0.938rem",fontWeight:"800",color:"var(--color-text-primary)",letterSpacing:"0.08em",textShadow:"0 0 20px rgba(16, 185, 129, 0.3)"},children:"MATCHUP INTELLIGENCE"})]})}),n.jsx("div",{style:{padding:u?"0.75rem 1rem":"0.875rem 1.5rem",background:"linear-gradient(90deg, rgba(139, 92, 246, 0.1) 0%, transparent 100%)",borderBottom:"1px solid rgba(139, 92, 246, 0.2)",borderLeft:"3px solid rgba(139, 92, 246, 0.5)"},children:n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(167, 139, 250, 0.95)",fontStyle:"italic",letterSpacing:"0.02em",lineHeight:"1.4"},children:_e})}),n.jsxs("div",{style:{padding:u?"0.875rem 1rem":"1.125rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0, 0, 0, 0.3)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[n.jsxs("div",{style:{fontSize:u?"1rem":"1.125rem",fontWeight:"900",color:"#0EA5E9",textShadow:"0 0 20px rgba(14, 165, 233, 0.5), 0 2px 4px rgba(0, 0, 0, 0.3)",letterSpacing:"0.02em"},children:[h," ",n.jsx("span",{style:{fontSize:u?"0.875rem":"0.938rem",fontWeight:"700",opacity:.9},children:S.toFixed(2)})]}),n.jsx("div",{style:{fontSize:"0.938rem",color:"var(--color-text-muted)",fontWeight:"800",padding:"0.25rem 0.5rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:""}),n.jsxs("div",{style:{fontSize:u?"1rem":"1.125rem",fontWeight:"900",color:"#10B981",textShadow:"0 0 20px rgba(16, 185, 129, 0.5), 0 2px 4px rgba(0, 0, 0, 0.3)",letterSpacing:"0.02em"},children:[m," ",n.jsx("span",{style:{fontSize:u?"0.875rem":"0.938rem",fontWeight:"700",opacity:.9},children:w.toFixed(2)})]})]}),n.jsxs("div",{style:{padding:u?"0.75rem 1rem":"1rem 1.25rem",background:"rgba(0, 0, 0, 0.15)"},children:[it.map((Be,$t)=>n.jsxs("div",{style:{marginBottom:$t<it.length-1?"1.25rem":0,paddingBottom:$t<it.length-1?"1.25rem":0,borderBottom:$t<it.length-1?"1px solid rgba(255, 255, 255, 0.05)":"none"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.625rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:u?"0.75rem":"0.813rem",fontWeight:"800",color:"var(--color-text-primary)"},children:[n.jsx("span",{style:{fontSize:"1.063rem",filter:`drop-shadow(0 0 6px ${Be.icon===""?"rgba(14, 165, 233, 0.5)":Be.icon===""?"rgba(239, 68, 68, 0.5)":Be.icon===""?"rgba(251, 146, 60, 0.5)":"rgba(16, 185, 129, 0.5)"})`},children:Be.icon}),n.jsx("span",{style:{letterSpacing:"0.05em"},children:Be.name}),Be.subtitle&&n.jsxs("span",{style:{fontSize:"0.625rem",color:"var(--color-text-muted)",fontWeight:"600",opacity:.8},children:["(",Be.subtitle,")"]})]}),n.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"800",color:Be.significance==="high"?"#10B981":Be.significance==="moderate"?"#F59E0B":"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.375rem",padding:Be.advantage?"0.25rem 0.5rem":"0",background:Be.advantage&&Be.significance==="high"?"rgba(16, 185, 129, 0.15)":Be.advantage&&Be.significance==="moderate"?"rgba(245, 158, 11, 0.15)":"transparent",borderRadius:"6px",border:Be.advantage&&Be.significance==="high"?"1px solid rgba(16, 185, 129, 0.3)":Be.advantage&&Be.significance==="moderate"?"1px solid rgba(245, 158, 11, 0.3)":"none",textShadow:Be.significance==="high"?"0 0 10px rgba(16, 185, 129, 0.4)":"none"},children:[Be.advantage&&`+${Be.percentDiff}%`,Be.significance==="high"&&n.jsx("span",{style:{fontSize:"0.938rem",filter:"drop-shadow(0 0 6px rgba(16, 185, 129, 0.6))"},children:""})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.5rem",alignItems:"center",marginBottom:"0.625rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"0.813rem",fontWeight:"800",color:Be.advantage===h?"#0EA5E9":"var(--color-text-secondary)",minWidth:"50px",textAlign:"right",textShadow:Be.advantage===h?"0 0 12px rgba(14, 165, 233, 0.5)":"none"},children:Be.format(Be.awayValue)}),n.jsx("div",{style:{height:"24px",width:"100%",display:"flex",justifyContent:"flex-end",background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"2px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:n.jsx("div",{style:{height:"100%",width:`${Math.min(100,Be.awayValue/(Be.leagueAvg*2)*100)}%`,background:Be.advantage===h?"linear-gradient(90deg, #0EA5E9 0%, #06B6D4 50%, #0EA5E9 100%)":"linear-gradient(90deg, rgba(14, 165, 233, 0.35) 0%, rgba(14, 165, 233, 0.25) 100%)",borderRadius:"4px 0 0 4px",boxShadow:Be.advantage===h?"0 0 16px rgba(14, 165, 233, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.2)":"inset 0 1px 0 rgba(255, 255, 255, 0.1)",border:Be.advantage===h?"1px solid rgba(96, 165, 250, 0.5)":"none",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:Be.advantage===h&&n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%)",animation:"shimmer 2s infinite"}})})})]}),n.jsx("div",{style:{minWidth:"32px",textAlign:"center",fontSize:"0.875rem",padding:"0.25rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:""}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{height:"24px",width:"100%",display:"flex",justifyContent:"flex-start",background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"2px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:n.jsx("div",{style:{height:"100%",width:`${Math.min(100,Be.homeValue/(Be.leagueAvg*2)*100)}%`,background:Be.advantage===m?"linear-gradient(90deg, #10B981 0%, #059669 50%, #10B981 100%)":"linear-gradient(90deg, rgba(16, 185, 129, 0.35) 0%, rgba(16, 185, 129, 0.25) 100%)",borderRadius:"0 4px 4px 0",boxShadow:Be.advantage===m?"0 0 16px rgba(16, 185, 129, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.2)":"inset 0 1px 0 rgba(255, 255, 255, 0.1)",border:Be.advantage===m?"1px solid rgba(52, 211, 153, 0.5)":"none",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:Be.advantage===m&&n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%)",animation:"shimmer 2s infinite"}})})}),n.jsx("span",{style:{fontSize:"0.813rem",fontWeight:"800",color:Be.advantage===m?"#10B981":"var(--color-text-secondary)",minWidth:"50px",textShadow:Be.advantage===m?"0 0 12px rgba(16, 185, 129, 0.5)":"none"},children:Be.format(Be.homeValue)})]})]}),Be.stats&&Be.stats.length>0&&n.jsx("div",{style:{fontSize:"0.688rem",color:"var(--color-text-secondary)",marginBottom:"0.375rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:Be.stats.map((Vt,Ua)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsxs("span",{children:[Vt.label,":"]}),Vt.away&&Vt.home?n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{color:Vt.winner==="away"?"#0EA5E9":"var(--color-text-secondary)"},children:Vt.away}),n.jsx("span",{style:{color:"var(--color-text-muted)"},children:"vs"}),n.jsx("span",{style:{color:Vt.winner==="home"?"#10B981":"var(--color-text-secondary)"},children:Vt.home}),Vt.suffix&&n.jsx("span",{style:{color:"var(--color-text-muted)"},children:Vt.suffix}),Vt.warning&&n.jsx("span",{children:""}),Vt.winner&&n.jsx("span",{children:Vt.winner==="away"?"":""})]}):n.jsx("span",{style:{color:"#10B981",fontWeight:"600"},children:Vt.value})]},Ua))}),Be.keyInsight&&(Be.advantage||Be.significance==="moderate")&&n.jsxs("div",{style:{fontSize:"0.688rem",color:"#FCD34D",fontWeight:"700",padding:"0.5rem 0.75rem",background:"linear-gradient(90deg, rgba(212, 175, 55, 0.12) 0%, rgba(251, 191, 36, 0.08) 100%)",borderLeft:"2px solid rgba(212, 175, 55, 0.5)",borderRadius:"0 6px 6px 0",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",textShadow:"0 0 10px rgba(212, 175, 55, 0.3)"},children:[n.jsx("span",{style:{fontSize:"0.813rem",filter:"drop-shadow(0 0 6px rgba(212, 175, 55, 0.6))"},children:""}),n.jsx("span",{style:{flex:1},children:Be.keyInsight})]}),Be.context&&n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(16, 185, 129, 0.95)",fontStyle:"italic",paddingLeft:"1.5rem",position:"relative",marginTop:"0.25rem",padding:"0.5rem 0.75rem 0.5rem 1.75rem",background:"linear-gradient(90deg, rgba(16, 185, 129, 0.08) 0%, transparent 100%)",borderLeft:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:"0 4px 4px 0"},children:[n.jsx("span",{style:{position:"absolute",left:"0.5rem",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem",filter:"drop-shadow(0 0 4px rgba(16, 185, 129, 0.5))"},children:""}),Be.context]})]},$t)),(l||c)&&n.jsxs("div",{style:{marginTop:"1.25rem",paddingTop:"1.25rem",borderTop:"1px solid rgba(255, 255, 255, 0.05)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.625rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:u?"0.75rem":"0.813rem",fontWeight:"800",color:"var(--color-text-primary)"},children:[n.jsx("span",{style:{fontSize:"1.063rem",filter:"drop-shadow(0 0 6px rgba(16, 185, 129, 0.5))"},children:""}),n.jsx("span",{style:{letterSpacing:"0.05em"},children:"WHO HAS THE BETTER NETMINDER?"})]}),wt&&n.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"800",color:Math.abs(We)>.5?"#10B981":"#F59E0B",display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.5rem",background:Math.abs(We)>.5?"rgba(16, 185, 129, 0.15)":"rgba(245, 158, 11, 0.15)",borderRadius:"6px",border:Math.abs(We)>.5?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(245, 158, 11, 0.3)",textShadow:Math.abs(We)>.5?"0 0 10px rgba(16, 185, 129, 0.4)":"none"},children:[wt," +",Math.abs(We).toFixed(1),Math.abs(We)>.5&&n.jsx("span",{style:{fontSize:"0.938rem",filter:"drop-shadow(0 0 6px rgba(16, 185, 129, 0.6))"},children:""})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.625rem"},children:[n.jsxs("span",{style:{fontSize:"0.813rem",fontWeight:"800",color:We>0?"#0EA5E9":"var(--color-text-secondary)",minWidth:"50px",textAlign:"right",textShadow:We>0?"0 0 12px rgba(14, 165, 233, 0.5)":"none"},children:["+",fe.toFixed(2)]}),n.jsxs("div",{style:{flex:1,position:"relative",height:"32px"},children:[n.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(255, 255, 255, 0.2)",transform:"translateX(-50%)"}}),n.jsx("div",{style:{position:"absolute",right:"50%",top:"2px",height:"28px",width:fe&&Ue?`${Math.abs(fe)/(Math.abs(fe)+Math.abs(Ue))*50}%`:"0%",background:"linear-gradient(90deg, transparent 0%, rgba(14, 165, 233, 0.3) 50%, rgba(14, 165, 233, 0.5) 100%)",border:"1px solid rgba(14, 165, 233, 0.4)",borderRadius:"6px 0 0 6px",borderRight:"none",boxShadow:We>0?"0 0 16px rgba(14, 165, 233, 0.4)":"none",transition:"all 0.4s ease-out"},children:We>0&&Math.abs(We)>.5&&n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%)",animation:"shimmer 2s infinite"}})}),n.jsx("div",{style:{position:"absolute",left:"50%",top:"2px",height:"28px",width:fe&&Ue?`${Math.abs(Ue)/(Math.abs(fe)+Math.abs(Ue))*50}%`:"0%",background:"linear-gradient(90deg, rgba(16, 185, 129, 0.5) 0%, rgba(16, 185, 129, 0.3) 50%, transparent 100%)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"0 6px 6px 0",borderLeft:"none",boxShadow:We<0?"0 0 16px rgba(16, 185, 129, 0.4)":"none",transition:"all 0.4s ease-out"},children:We<0&&Math.abs(We)>.5&&n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%)",animation:"shimmer 2s infinite"}})})]}),n.jsxs("span",{style:{fontSize:"0.813rem",fontWeight:"800",color:We<0?"#10B981":"var(--color-text-secondary)",minWidth:"50px",textShadow:We<0?"0 0 12px rgba(16, 185, 129, 0.5)":"none"},children:["+",Ue.toFixed(2)]})]}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"var(--color-text-secondary)",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[n.jsxs("div",{style:{flex:1,textAlign:"left"},children:[n.jsxs("div",{style:{fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:[l?.name||h," (",h,")"]}),l?.gamesPlayed&&n.jsxs("div",{children:[l.gamesPlayed," GP  #",xt,"  ",l.savePct||"0.0","% Sv%"]})]}),n.jsxs("div",{style:{flex:1,textAlign:"right"},children:[n.jsxs("div",{style:{fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:[c?.name||m," (",m,")"]}),c?.gamesPlayed&&n.jsxs("div",{children:[c.gamesPlayed," GP  #",Zt,"  ",c.savePct||"0.0","% Sv%"]})]})]}),Math.abs(We)>.3&&n.jsxs("div",{style:{fontSize:"0.688rem",color:"#FCD34D",fontWeight:"700",padding:"0.5rem 0.75rem",background:"linear-gradient(90deg, rgba(212, 175, 55, 0.12) 0%, rgba(251, 191, 36, 0.08) 100%)",borderLeft:"2px solid rgba(212, 175, 55, 0.5)",borderRadius:"0 6px 6px 0",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",textShadow:"0 0 10px rgba(212, 175, 55, 0.3)"},children:[n.jsx("span",{style:{fontSize:"0.813rem",filter:"drop-shadow(0 0 6px rgba(212, 175, 55, 0.6))"},children:""}),n.jsxs("span",{style:{flex:1},children:[We>0?l?.name:c?.name," (",We>0?h:m,", #",We>0?xt:Zt,")"," ","+",Math.abs(We).toFixed(1)," GSAE vs opponent = +",Ut,"g impact"]})]}),Math.abs(We)>.3&&Vr>5&&n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(16, 185, 129, 0.95)",fontStyle:"italic",paddingLeft:"1.5rem",position:"relative",marginTop:"0.25rem",padding:"0.5rem 0.75rem 0.5rem 1.75rem",background:"linear-gradient(90deg, rgba(16, 185, 129, 0.08) 0%, transparent 100%)",borderLeft:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:"0 4px 4px 0"},children:[n.jsx("span",{style:{position:"absolute",left:"0.5rem",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem"},children:""}),We>0?l?.name:c?.name," stops ",Vr.toFixed(1),"% more high-danger shots (",We>0?Dr.toFixed(1):_n.toFixed(1),"% vs ",We>0?_n.toFixed(1):Dr.toFixed(1),"% HD Sv%) = huge advantage in net"]})]})]}),n.jsxs("div",{style:{padding:u?"0.875rem 1rem":"1.125rem 1.5rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(96, 165, 250, 0.08) 100%)",borderTop:"1px solid rgba(59, 130, 246, 0.25)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)"},children:[n.jsxs("div",{style:{fontSize:"0.813rem",fontWeight:"800",color:"#3B82F6",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem",textShadow:"0 0 16px rgba(59, 130, 246, 0.5)",letterSpacing:"0.05em"},children:[n.jsx("span",{style:{fontSize:"1.063rem",filter:"drop-shadow(0 0 8px rgba(59, 130, 246, 0.7))"},children:""}),n.jsx("span",{children:"CONTROL & POSSESSION"})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.688rem",marginBottom:"0.25rem"},children:[n.jsx("span",{style:{color:"var(--color-text-secondary)"},children:" Corsi %"}),n.jsxs("span",{style:{color:Math.abs(P-V)>.03?P>V?"#0EA5E9":"#10B981":"var(--color-text-muted)"},children:[(P*100).toFixed(1),"% vs ",(V*100).toFixed(1),"%"]})]}),n.jsx("div",{style:{height:"4px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",position:"relative",overflow:"hidden"},children:n.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${P*100}%`,background:P>V?"#0EA5E9":"rgba(14, 165, 233, 0.5)"}})})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.688rem",marginBottom:"0.25rem"},children:[n.jsx("span",{style:{color:"var(--color-text-secondary)"},children:" Faceoffs"}),n.jsxs("span",{style:{color:Math.abs(Q-K)>.03?Q>K?"#0EA5E9":"#10B981":"var(--color-text-muted)"},children:[(Q*100).toFixed(1),"% vs ",(K*100).toFixed(1),"%"]})]}),n.jsx("div",{style:{height:"4px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",position:"relative",overflow:"hidden"},children:n.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${Q*100}%`,background:Q>K?"#0EA5E9":"rgba(14, 165, 233, 0.5)"}})})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.688rem",marginBottom:"0.25rem"},children:[n.jsx("span",{style:{color:"var(--color-text-secondary)"},children:" Shot Block %"}),n.jsxs("span",{style:{color:Math.abs(te-xe)>2?te>xe?"#0EA5E9":"#10B981":"var(--color-text-muted)"},children:[te.toFixed(1),"% vs ",xe.toFixed(1),"%"]})]}),n.jsx("div",{style:{height:"4px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",position:"relative",overflow:"hidden"},children:n.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${Math.min(100,te)}%`,background:te>xe?"#0EA5E9":"rgba(14, 165, 233, 0.5)"}})})]})]}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(59, 130, 246, 0.95)",fontStyle:"italic",padding:"0.5rem 0.75rem 0.5rem 1.75rem",position:"relative",marginTop:"0.5rem",background:"linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, transparent 100%)",borderLeft:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"0 4px 4px 0"},children:[n.jsx("span",{style:{position:"absolute",left:"0.5rem",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem",filter:"drop-shadow(0 0 4px rgba(59, 130, 246, 0.5))"},children:""}),Le===h?`${h} dictates pace (${(P*100).toFixed(1)}% Corsi) = 5-7 more shots/game and sustained O-zone pressure`:Le===m?`${m} dictates pace (${(V*100).toFixed(1)}% Corsi) = 5-7 more shots/game and sustained O-zone pressure`:"Even territorial battle - neither team controls the flow"]})]}),(Se>.15||Math.abs(F-z)>2)&&n.jsxs("div",{style:{padding:u?"0.75rem 1rem":"1rem 1.25rem",background:"rgba(239, 68, 68, 0.08)",borderTop:"1px solid rgba(239, 68, 68, 0.2)"},children:[n.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#EF4444",marginBottom:"0.625rem",display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{children:""}),n.jsx("span",{children:"EXPLOITABLE WEAKNESSES"})]}),F>7&&n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsxs("div",{style:{fontSize:"0.688rem",color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:[n.jsxs("span",{style:{color:"#EF4444",fontWeight:"700"},children:[h," turnovers:"]})," ",F.toFixed(1),"/gm "]}),n.jsxs("div",{style:{fontSize:"0.625rem",color:"rgba(239, 68, 68, 0.9)",fontStyle:"italic",paddingLeft:"1rem"},children:[" ",m,"'s forecheck generates ",re.toFixed(1)," takeaways/gm"]})]}),z>7&&n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsxs("div",{style:{fontSize:"0.688rem",color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:[n.jsxs("span",{style:{color:"#EF4444",fontWeight:"700"},children:[m," turnovers:"]})," ",z.toFixed(1),"/gm "]}),n.jsxs("div",{style:{fontSize:"0.625rem",color:"rgba(239, 68, 68, 0.9)",fontStyle:"italic",paddingLeft:"1rem"},children:[" ",h,"'s forecheck generates ",X.toFixed(1)," takeaways/gm"]})]}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(239, 68, 68, 0.95)",fontStyle:"italic",padding:"0.5rem 0.75rem 0.5rem 1.75rem",position:"relative",marginTop:"0.5rem",background:"linear-gradient(90deg, rgba(239, 68, 68, 0.08) 0%, transparent 100%)",borderLeft:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"0 4px 4px 0"},children:[n.jsx("span",{style:{position:"absolute",left:"0.5rem",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem",filter:"drop-shadow(0 0 4px rgba(239, 68, 68, 0.5))"},children:""}),qe===h?`${h}'s aggressive forecheck (${X.toFixed(1)} takeaways/gm) turns ${m}'s ${z.toFixed(1)} giveaways into breakaways = +${Se.toFixed(2)}g`:`${m}'s aggressive forecheck (${re.toFixed(1)} takeaways/gm) turns ${h}'s ${F.toFixed(1)} giveaways into breakaways = +${Se.toFixed(2)}g`]})]}),(Math.abs(J-100)>2||Math.abs(Ee-100)>2)&&n.jsxs("div",{style:{padding:u?"0.75rem 1rem":"1rem 1.25rem",background:"rgba(245, 158, 11, 0.08)",borderTop:"1px solid rgba(245, 158, 11, 0.2)"},children:[n.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#F59E0B",marginBottom:"0.625rem",display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{children:""}),n.jsx("span",{children:"LUCK FACTOR"}),n.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"600",color:"var(--color-text-muted)"},children:"(Regression)"})]}),n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem"},children:[n.jsxs("span",{style:{fontSize:"0.688rem",fontWeight:"700",color:"var(--color-text-primary)"},children:[h," ",J.toFixed(1)]}),n.jsxs("span",{style:{fontSize:"0.625rem",color:J>102?"#EF4444":J<98?"#10B981":"var(--color-text-muted)"},children:[J>102?"":J<98?"":""," ",Xe.toFixed(1),"g"]})]}),n.jsxs("div",{style:{height:"6px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"3px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"1px",background:"rgba(212, 175, 55, 0.5)",zIndex:2}}),n.jsx("div",{style:{height:"100%",width:`${Math.min(100,(J-94)/12*100)}%`,background:J>102?"#EF4444":J<98?"#10B981":"#6B7280",transition:"width 0.4s ease"}})]})]}),n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem"},children:[n.jsxs("span",{style:{fontSize:"0.688rem",fontWeight:"700",color:"var(--color-text-primary)"},children:[m," ",Ee.toFixed(1)]}),n.jsxs("span",{style:{fontSize:"0.625rem",color:Ee>102?"#EF4444":Ee<98?"#10B981":"var(--color-text-muted)"},children:[Ee>102?"":Ee<98?"":""," ",ut.toFixed(1),"g"]})]}),n.jsxs("div",{style:{height:"6px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"3px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"1px",background:"rgba(212, 175, 55, 0.5)",zIndex:2}}),n.jsx("div",{style:{height:"100%",width:`${Math.min(100,(Ee-94)/12*100)}%`,background:Ee>102?"#EF4444":Ee<98?"#10B981":"#6B7280",transition:"width 0.4s ease"}})]})]}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(245, 158, 11, 0.95)",fontStyle:"italic",padding:"0.5rem 0.75rem 0.5rem 1.75rem",position:"relative",background:"linear-gradient(90deg, rgba(245, 158, 11, 0.08) 0%, transparent 100%)",borderLeft:"2px solid rgba(245, 158, 11, 0.3)",borderRadius:"0 4px 4px 0"},children:[n.jsx("span",{style:{position:"absolute",left:"0.5rem",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem",filter:"drop-shadow(0 0 4px rgba(245, 158, 11, 0.5))"},children:""}),J>102&&Ee<98?`${h}'s hot streak (${J.toFixed(1)} PDO = ${((J-100)*.8).toFixed(0)}% above talent) collides with ${m}'s due bounce (${Ee.toFixed(1)} = ${((100-Ee)*.8).toFixed(0)}% below talent)`:Ee>102&&J<98?`${m}'s hot streak (${Ee.toFixed(1)} PDO = ${((Ee-100)*.8).toFixed(0)}% above talent) collides with ${h}'s due bounce (${J.toFixed(1)} = ${((100-J)*.8).toFixed(0)}% below talent)`:J>102?`${h} shooting ${((J-100)*.8).toFixed(0)}% above talent (${J.toFixed(1)} PDO) = ${Math.abs(Xe).toFixed(2)}g negative regression incoming`:Ee>102?`${m} shooting ${((Ee-100)*.8).toFixed(0)}% above talent (${Ee.toFixed(1)} PDO) = ${Math.abs(ut).toFixed(2)}g negative regression incoming`:J<98?`${h} shooting ${((100-J)*.8).toFixed(0)}% below talent (${J.toFixed(1)} PDO) = ${Math.abs(Xe).toFixed(2)}g positive bounce due`:`${m} shooting ${((100-Ee)*.8).toFixed(0)}% below talent (${Ee.toFixed(1)} PDO) = ${Math.abs(ut).toFixed(2)}g positive bounce due`]})]}),n.jsxs("div",{style:{padding:"0.875rem 1rem",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%)",borderRadius:"10px",border:"2px solid rgba(99, 102, 241, 0.3)",boxShadow:"0 4px 20px rgba(99, 102, 241, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%)",animation:"shine 3s infinite"}}),n.jsx("div",{style:{fontSize:"0.813rem",fontWeight:"800",color:"rgba(255, 255, 255, 0.95)",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",position:"relative",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:" THE MATCHUP"}),n.jsxs("div",{style:{marginBottom:"0.75rem",paddingBottom:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{style:{fontSize:"0.688rem",fontWeight:"700",color:"rgba(96, 165, 250, 0.95)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:[" WHY ",h," COULD WIN:"]}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.6",display:"flex",flexDirection:"column",gap:"0.375rem"},children:[be===h&&mt>.05&&n.jsxs("div",{children:[" Superior shot quality (",S.toFixed(2)," xGF vs ",T.toFixed(2)," xGA)"]}),Pe===h&&Ie>.05&&n.jsxs("div",{children:[" Elite PP (",Te.toFixed(2)," HD xG, ranked #",ot,")"]}),he===h&&Fe>.03&&n.jsxs("div",{children:[" Goalie advantage (",l?.name,": ",fe>0?"+":"",fe.toFixed(2)," GSAE)"]}),Le===h&&Oe>.05&&n.jsxs("div",{children:[" Controls possession (",P.toFixed(1),"% Corsi)"]}),Qe===h&&He>.1&&n.jsxs("div",{children:[" ",m," due for regression (",Ee.toFixed(1)," PDO = -",Math.abs(ut).toFixed(2),"g)"]}),qe===h&&Se>.15&&n.jsxs("div",{children:[" Exploits turnovers (",X.toFixed(1)," takeaways vs ",z.toFixed(1)," giveaways)"]}),te>xe+2&&n.jsxs("div",{children:[" Strong shot blocking (",te.toFixed(1),"% blocked)"]}),be!==h&&Pe!==h&&he!==h&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[" Solid offense (",S.toFixed(2)," xGF/gm)"]}),P>.5&&n.jsxs("div",{children:[" Positive possession (",P.toFixed(1),"% Corsi)"]})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"0.688rem",fontWeight:"700",color:"rgba(251, 146, 60, 0.95)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:[" WHY ",m," COULD WIN:"]}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.6",display:"flex",flexDirection:"column",gap:"0.375rem"},children:[be===m&&mt>.05&&n.jsxs("div",{children:[" Superior shot quality (",w.toFixed(2)," xGF vs ",E.toFixed(2)," xGA)"]}),Pe===m&&Ie>.05&&n.jsxs("div",{children:[" Elite PP (",$e.toFixed(2)," HD xG, ranked #",Ae,")"]}),he===m&&Fe>.03&&n.jsxs("div",{children:[" Goalie advantage (",c?.name,": ",Ue>0?"+":"",Ue.toFixed(2)," GSAE)"]}),Le===m&&Oe>.05&&n.jsxs("div",{children:[" Controls possession (",V.toFixed(1),"% Corsi)"]}),Qe===m&&He>.1&&n.jsxs("div",{children:[" ",h," due for regression (",J.toFixed(1)," PDO = -",Math.abs(Xe).toFixed(2),"g)"]}),qe===m&&Se>.15&&n.jsxs("div",{children:[" Exploits turnovers (",re.toFixed(1)," takeaways vs ",F.toFixed(1)," giveaways)"]}),xe>te+2&&n.jsxs("div",{children:[" Strong shot blocking (",xe.toFixed(1),"% blocked)"]}),be!==m&&Pe!==m&&he!==m&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[" Solid offense (",w.toFixed(2)," xGF/gm)"]}),V>.5&&n.jsxs("div",{children:[" Positive possession (",V.toFixed(1),"% Corsi)"]})]})]})]})]})]})]})},l$=({isVisible:r,onAccept:e,onDecline:t})=>{const[i,o]=O.useState(!1),l=()=>{if(!i){alert("Please check the box to confirm you understand the terms.");return}localStorage.setItem("nhl_savant_disclaimer_acknowledged","true"),localStorage.setItem("nhl_savant_disclaimer_date",new Date().toISOString()),JD(),e&&e()},c=()=>{t?t():(alert("You must accept the terms to use NHL Savant. Redirecting..."),window.location.href="https://www.google.com")};return r?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",zIndex:999998,animation:"fadeIn 0.3s ease"}}),n.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:"600px",maxHeight:"85vh",backgroundColor:"var(--color-bg-secondary)",borderRadius:"16px",border:"2px solid rgba(251, 191, 36, 0.4)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",zIndex:999999,display:"flex",flexDirection:"column",animation:"slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},children:[n.jsx("div",{style:{padding:"1.5rem",borderBottom:"2px solid rgba(251, 191, 36, 0.3)",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 100%)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[n.jsx(ai,{size:32,color:"#F59E0B",style:{flexShrink:0}}),n.jsxs("div",{style:{flex:1},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"900",color:"#F59E0B",margin:"0 0 0.5rem 0",textTransform:"uppercase",letterSpacing:"0.02em"},children:"Important Legal Notice"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",margin:0,lineHeight:"1.5"},children:"You must read and accept these terms before using NHL Savant"})]})]})}),n.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, rgba(251, 191, 36, 0.05) 100%)",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:n.jsxs("p",{style:{fontSize:"0.938rem",lineHeight:"1.6",color:"var(--color-text-primary)",margin:0,fontWeight:"600"},children:[n.jsx("strong",{children:" SPORTS BETTING INVOLVES FINANCIAL RISK"}),n.jsx("br",{}),"Only bet what you can afford to lose. This site is for entertainment and educational purposes only."]})}),n.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.7",color:"var(--color-text-primary)"},children:[n.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"800",color:"var(--color-text-primary)",margin:"0 0 0.75rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(sn,{size:20,color:"#10B981"}),"You Acknowledge That:"]}),n.jsxs("ul",{style:{margin:"0 0 1.5rem 0",paddingLeft:"1.5rem",listStyleType:"disc"},children:[n.jsxs("li",{style:{marginBottom:"0.625rem"},children:[n.jsx("strong",{children:"This is NOT betting advice."})," All content is for entertainment and educational purposes only."]}),n.jsxs("li",{style:{marginBottom:"0.625rem"},children:[n.jsx("strong",{children:"We make NO guarantees."})," Past performance does not predict future results. You may lose money."]}),n.jsxs("li",{style:{marginBottom:"0.625rem"},children:[n.jsx("strong",{children:"You are solely responsible"})," for your betting decisions and their financial consequences."]}),n.jsxs("li",{style:{marginBottom:"0.625rem"},children:[n.jsx("strong",{children:"We are NOT a sportsbook."})," We do not accept bets or wagers of any kind."]}),n.jsxs("li",{style:{marginBottom:"0.625rem"},children:[n.jsx("strong",{children:"Age requirement:"})," You are 21+ years old (or 18+ if legal in your jurisdiction)."]}),n.jsxs("li",{style:{marginBottom:"0.625rem"},children:[n.jsx("strong",{children:"Legal compliance:"})," Sports betting is legal in your jurisdiction and you will verify applicable laws."]}),n.jsxs("li",{style:{marginBottom:"0.625rem"},children:[n.jsx("strong",{children:"Gambling problem?"})," Call 1-800-GAMBLER or visit ",n.jsx("a",{href:"https://www.ncpgambling.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"ncpgambling.org"})]})]}),n.jsx("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"1rem",marginTop:"1rem"},children:n.jsxs("p",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",margin:0,lineHeight:"1.6"},children:["For complete terms, see our ",n.jsx(vt,{to:"/disclaimer",style:{color:"#3B82F6",fontWeight:"700"},children:"Legal Disclaimer & Terms of Use"})]})})]})]}),n.jsxs("div",{style:{padding:"1.5rem",borderTop:"1px solid var(--color-border)",backgroundColor:"rgba(0, 0, 0, 0.2)"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem",cursor:"pointer",fontSize:"0.875rem",lineHeight:"1.5",color:"var(--color-text-primary)"},children:[n.jsx("input",{type:"checkbox",checked:i,onChange:u=>o(u.target.checked),style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#10B981"}}),n.jsxs("span",{children:[n.jsx("strong",{children:"I am 21+ years old,"})," I have read and understand these terms, and I accept full responsibility for my betting decisions."]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[n.jsx("button",{onClick:c,style:{padding:"0.875rem 1.5rem",backgroundColor:"transparent",border:"2px solid var(--color-border)",borderRadius:"8px",fontSize:"0.938rem",fontWeight:"700",color:"var(--color-text-secondary)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:u=>{u.target.style.borderColor="#EF4444",u.target.style.color="#EF4444"},onMouseLeave:u=>{u.target.style.borderColor="var(--color-border)",u.target.style.color="var(--color-text-secondary)"},children:"Decline"}),n.jsx("button",{onClick:l,disabled:!i,style:{padding:"0.875rem 1.5rem",background:i?"linear-gradient(135deg, #10B981 0%, #059669 100%)":"rgba(100, 116, 139, 0.3)",border:"none",borderRadius:"8px",fontSize:"0.938rem",fontWeight:"800",color:i?"white":"rgba(255, 255, 255, 0.5)",cursor:i?"pointer":"not-allowed",transition:"all 0.2s",boxShadow:i?"0 4px 12px rgba(16, 185, 129, 0.3)":"none"},onMouseEnter:u=>{i&&(u.target.style.transform="translateY(-2px)",u.target.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.4)")},onMouseLeave:u=>{i&&(u.target.style.transform="translateY(0)",u.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)")},children:"I Accept & Continue"})]})]}),n.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translate(-50%, -45%);
            }
            to {
              opacity: 1;
              transform: translate(-50%, -50%);
            }
          }
        `})]})]}):null},ey=document.createElement("style");ey.textContent=`
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }
  
  @keyframes ping {
    0% {
      transform: scale(1);
      opacity: 0.8;
    }
    50% {
      transform: scale(1.1);
      opacity: 0.4;
    }
    100% {
      transform: scale(1);
      opacity: 0.8;
    }
  }
`;document.getElementById("compact-picks-bar-animations")||(ey.id="compact-picks-bar-animations",document.head.appendChild(ey));function Yp(r){switch(r){case"A+":return"#D4AF37";case"A":return"#10B981";case"B+":return"#3B82F6";case"B":return"#8B5CF6";default:return"#64748B"}}function c$(r){if(!r)return"";const e=new Date(r),t=e.getHours(),i=e.getMinutes(),o=t>=12?"PM":"AM";return`${t%12||12}:${i.toString().padStart(2,"0")} ${o}`}function d$({gameGroups:r,onViewAll:e,onGameClick:t,opportunityStats:i,isFree:o,hasReachedLimit:l,isPremium:c,onUpgradeClick:u}){const[h,m]=O.useState(!1),f=window.innerWidth<=768;if(!r||r.length===0)return null;const x=()=>{if(!c&&!h){u&&u();return}m(!h)},b=T=>{t&&t(T)};r.reduce((T,E)=>T+E.bets.length,0);const S=i?.liveEdge||0,w=i?.locked||0;return n.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.4)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"1px solid rgba(148, 163, 184, 0.08)",borderRadius:"12px",padding:f?"0.625rem":"1.25rem",marginBottom:f?"1rem":"1.5rem",transition:"all 0.3s ease"},children:[n.jsxs("div",{onClick:x,onMouseEnter:T=>{T.currentTarget.style.background="rgba(212, 175, 55, 0.03)",T.currentTarget.style.borderRadius="8px"},onMouseLeave:T=>{T.currentTarget.style.background="transparent"},style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:f?"0.75rem":"1rem",paddingBottom:h?f?"0.625rem":"0.875rem":"0",paddingTop:f?"0.25rem":"0.375rem",paddingLeft:f?"0.375rem":"0.5rem",paddingRight:f?"0.375rem":"0.5rem",marginLeft:f?"-0.375rem":"-0.5rem",marginRight:f?"-0.375rem":"-0.5rem",marginTop:f?"-0.375rem":"-0.5rem",borderBottom:h?"1px solid rgba(148, 163, 184, 0.08)":"none",marginBottom:h?f?"0.625rem":"0.875rem":f?"-0.375rem":"-0.5rem",cursor:"pointer",transition:"all 0.2s ease",userSelect:"none"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:0},children:[n.jsx(ar,{size:f?14:16,color:"#D4AF37",strokeWidth:2.5}),n.jsx("h3",{style:{margin:0,fontSize:f?"0.875rem":"0.938rem",fontWeight:"700",color:"#D4AF37",letterSpacing:"-0.015em",whiteSpace:"nowrap"},children:"Today's Picks"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f?"0.5rem":"0.75rem",flexShrink:0},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[S>0&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",background:"rgba(16, 185, 129, 0.15)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"6px"},children:[n.jsx(zo,{size:11,color:"#10B981"}),n.jsx("span",{style:{fontSize:f?"0.75rem":"0.813rem",fontWeight:"700",color:"#10B981"},children:S}),!f&&n.jsx("span",{style:{fontSize:"0.625rem",color:"rgba(16, 185, 129, 0.8)",fontWeight:"600"},children:"live"})]}),w>0&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.25)",borderRadius:"6px"},children:[n.jsx(Bo,{size:10,color:"#D4AF37"}),n.jsx("span",{style:{fontSize:f?"0.75rem":"0.813rem",fontWeight:"700",color:"#D4AF37"},children:w}),!f&&n.jsx("span",{style:{fontSize:"0.625rem",color:"rgba(212, 175, 55, 0.8)",fontWeight:"600"},children:"locked"})]}),S===0&&w===0&&i?.elite>0&&n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.625rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"6px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.25rem"},children:[n.jsx("span",{style:{fontSize:f?"0.813rem":"0.875rem",fontWeight:"700",color:"#D4AF37"},children:i.elite}),n.jsx("span",{style:{fontSize:"0.625rem",color:"rgba(212, 175, 55, 0.7)",fontWeight:"600",textTransform:"lowercase"},children:"elite"})]})})]}),n.jsx("div",{onMouseEnter:T=>{T.currentTarget.style.background="rgba(212, 175, 55, 0.15)",T.currentTarget.style.borderColor="rgba(212, 175, 55, 0.4)",T.currentTarget.style.transform="scale(1.05)",T.stopPropagation()},onMouseLeave:T=>{T.currentTarget.style.background="rgba(212, 175, 55, 0.08)",T.currentTarget.style.borderColor="rgba(212, 175, 55, 0.25)",T.currentTarget.style.transform="scale(1)",T.stopPropagation()},style:{width:f?"28px":"32px",height:f?"28px":"32px",borderRadius:"8px",background:"rgba(212, 175, 55, 0.08)",border:"1px solid rgba(212, 175, 55, 0.25)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",flexShrink:0},children:h?n.jsx(Go,{size:f?16:18,color:"#D4AF37",strokeWidth:2.5}):n.jsx(Wo,{size:f?16:18,color:"#D4AF37",strokeWidth:2.5})})]})]}),h&&n.jsxs("div",{style:{animation:"expandDown 0.3s ease-out"},children:[n.jsxs("div",{style:{fontSize:"0.6875rem",color:"#94A3B8",marginBottom:"0.625rem",padding:f?"0.375rem 0.625rem":"0.5rem 0.75rem",background:"rgba(100, 116, 139, 0.06)",border:"1px solid rgba(100, 116, 139, 0.12)",borderRadius:"6px",lineHeight:"1.5",letterSpacing:"0.01em",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx(zo,{size:10,color:"#10B981"}),n.jsx("span",{style:{color:"#10B981",fontWeight:"600"},children:"Live Edge"}),n.jsx("span",{children:"= Still meets standards"})]}),n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx(Bo,{size:9,color:"#D4AF37"}),n.jsx("span",{style:{color:"#D4AF37",fontWeight:"600"},children:"Locked"}),n.jsx("span",{children:"= Recommended earlier"})]})]}),n.jsx("div",{style:{display:"flex",gap:"1rem",overflowX:"auto",overflowY:"hidden",margin:f?"0 -0.875rem":"0 -1.5rem",padding:f?"0 0.875rem 0.375rem 0.875rem":"0 1.5rem 0.5rem 1.5rem",scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"picks-scroll",children:r.map((T,E)=>n.jsxs("div",{onClick:()=>b(T.game),style:{background:"rgba(15, 23, 42, 0.5)",border:"1px solid rgba(148, 163, 184, 0.08)",borderRadius:"12px",padding:f?"0.75rem":"1rem",minWidth:"280px",maxWidth:"320px",flexShrink:0,transition:"all 0.2s ease",cursor:"pointer"},className:"game-group-card",children:[n.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#94A3B8",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.875rem",paddingBottom:"0.75rem",borderBottom:"1px solid rgba(148, 163, 184, 0.08)"},children:T.game}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:T.bets.map((A,_)=>{const B=A.status==="LIVE_EDGE";return n.jsxs("div",{style:{background:B?"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.06) 100%)":"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%)",border:B?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(212, 175, 55, 0.25)",borderRadius:"8px",padding:"0.75rem",display:"flex",alignItems:"center",gap:"0.625rem",transition:"all 0.2s ease"},className:"pick-item",children:[n.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",background:B?"rgba(16, 185, 129, 0.2)":"rgba(212, 175, 55, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:B?n.jsx(zo,{size:12,color:"#10B981"}):n.jsx(Bo,{size:11,color:"#D4AF37"})}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#F1F5F9",marginBottom:"0.25rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:A.pick}),n.jsxs("div",{style:{fontSize:"0.75rem",color:"#94A3B8",display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[n.jsx("span",{children:A.odds>0?`+${A.odds}`:A.odds}),n.jsx("span",{style:{color:Yp(A.grade),fontWeight:"700"},children:A.edge}),!B&&A.lockedAt&&n.jsxs("span",{style:{color:"#D4AF37",display:"flex",alignItems:"center",gap:"0.2rem",fontSize:"0.6875rem"},children:[n.jsx(jm,{size:9}),c$(A.lockedAt)]})]})]}),n.jsx("div",{style:{background:Yp(A.grade),color:"#000",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"800",lineHeight:"1",flexShrink:0,boxShadow:`0 2px 8px ${Yp(A.grade)}40`},children:A.grade})]},_)})})]},E))})]}),n.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes expandDown {
          from {
            opacity: 0;
            max-height: 0;
            transform: scaleY(0.95);
          }
          to {
            opacity: 1;
            max-height: 500px;
            transform: scaleY(1);
          }
        }

        .picks-scroll::-webkit-scrollbar {
          display: none;
        }

        .game-group-card:hover {
          border-color: rgba(148, 163, 184, 0.15);
          background: rgba(15, 23, 42, 0.7);
        }

        .pick-item:hover {
          transform: translateX(3px);
        }

        @media (max-width: 768px) {
          .elevated-card {
            padding: 1.25rem !important;
            margin-bottom: 1.25rem !important;
          }

          .picks-scroll {
            margin: 0 -1.25rem !important;
            padding: 0 1.25rem 0.5rem 1.25rem !important;
          }

          .game-group-card {
            min-width: 260px !important;
            padding: 0.875rem !important;
          }
        }

        @media (max-width: 640px) {
          .elevated-card {
            padding: 1rem !important;
            margin-bottom: 1rem !important;
          }

          .picks-scroll {
            margin: 0 -1rem !important;
            padding: 0 1rem 0.5rem 1rem !important;
          }
        }
      `})]})}function u$(r){const{teams:e,gameTime:t,bet:i,advantages:o=[],angle:l=null}=r;let c=` NHL SAVANT PICK 

`;return c+=`${i.pick}
`,c+=`${e.away} @ ${e.home}
`,t&&(c+=`${t}
`),c+=`
 +${i.ev.toFixed(1)}% Expected Value
`,c+=` ${i.confidence.level} Confidence
`,c+=` Odds: ${i.odds>0?"+":""}${i.odds}`,o.length>0&&(c+=`

KEY EDGES:
`,o.slice(0,3).forEach(u=>{const h=u.replace(/^[\-\*]\s*/,"");c+=` ${h}
`})),l&&(c+=`
${l}`),c+=`

#NHLBetting #SportsBetting #${e.away} #${e.home}`,c}async function h$(r){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(r),!0;const e=document.createElement("textarea");e.value=r,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{return document.execCommand("copy"),e.remove(),!0}catch(t){return console.error("Fallback copy failed:",t),e.remove(),!1}}catch(e){return console.error("Copy to clipboard failed:",e),!1}}function g$(r,e){const t=e>1?e:e*100;return r>=8&&t>=60?{level:"VERY HIGH",color:"#10B981"}:r>=5&&t>=55?{level:"HIGH",color:"#10B981"}:r>=3?{level:"MEDIUM",color:"#F59E0B"}:{level:"LOW",color:"#94A3B8"}}const n3=({game:r,bestEdge:e,advantages:t=[],angle:i=null,variant:o="compact",isMobile:l=!1})=>{const[c,u]=O.useState(!1),[h,m]=O.useState(!1),[f,x]=O.useState(null);O.useEffect(()=>{!i&&r?.awayTeam&&r?.homeTeam&&e&&(async()=>{try{const T=await r3(r.awayTeam,r.homeTeam);T&&x(T)}catch(T){console.error("Error fetching bet angle for share:",T)}})()},[r?.awayTeam,r?.homeTeam,e,i]);const b=()=>{if(!r||!e)return null;const w=g$(e.evPercent,e.modelProb);return{teams:{away:r.awayTeam,home:r.homeTeam},gameTime:r.gameTime,bet:{pick:e.pick,odds:e.odds,ev:e.evPercent,confidence:w},advantages:t,angle:i||f}},S=async()=>{const w=b();if(w){u(!0);try{const T=u$(w),E="https://dpk1212.github.io/nhl-savant/",A=`NHL Savant Pick: ${w.teams.away} @ ${w.teams.home}`;if(navigator.share)try{await navigator.share({title:A,text:T,url:E}),m(!0),setTimeout(()=>m(!1),2e3),u(!1);return}catch(I){if(I.name==="AbortError"){u(!1);return}}const _=`${T}

${E}`;await h$(_)?(m(!0),setTimeout(()=>m(!1),2500)):alert("Unable to copy. Please try again.")}catch(T){console.error("Share failed:",T),alert("Unable to share. Please try again.")}finally{u(!1)}}};return o==="compact"?n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
          }
        `}),n.jsxs("button",{onClick:S,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:l?"0.5rem":"0.625rem 0.875rem",background:h?"rgba(16, 185, 129, 0.15)":"rgba(59, 130, 246, 0.15)",border:h?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",color:h?"#10B981":"#3B82F6",fontSize:"0.875rem",fontWeight:"700",cursor:c?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:c?.8:1,animation:c?"pulse 1.5s ease-in-out infinite":"none"},onMouseEnter:w=>{c||(w.currentTarget.style.background=h?"rgba(16, 185, 129, 0.25)":"rgba(59, 130, 246, 0.25)",w.currentTarget.style.borderColor=h?"rgba(16, 185, 129, 0.5)":"rgba(59, 130, 246, 0.5)")},onMouseLeave:w=>{w.currentTarget.style.background=h?"rgba(16, 185, 129, 0.15)":"rgba(59, 130, 246, 0.15)",w.currentTarget.style.borderColor=h?"rgba(16, 185, 129, 0.3)":"rgba(59, 130, 246, 0.3)"},children:[h?n.jsx(au,{size:16}):n.jsx(I1,{size:16}),!l&&(h?"Shared!":c?"Sharing...":"Share")]})]}):n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 0.8; }
          50% { opacity: 1; }
        }
      `}),n.jsxs("button",{onClick:S,disabled:c,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",padding:"1rem 1.5rem",width:"100%",background:h?"linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%)":"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.1) 100%)",border:h?"1px solid rgba(16, 185, 129, 0.4)":"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"10px",color:h?"#10B981":"#3B82F6",fontSize:"1rem",fontWeight:"800",cursor:c?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",textTransform:"uppercase",letterSpacing:"0.05em",boxShadow:h?"0 4px 12px rgba(16, 185, 129, 0.15)":"0 4px 12px rgba(59, 130, 246, 0.15)",opacity:c?.8:1,animation:c?"pulse 1.5s ease-in-out infinite":"none"},onMouseEnter:w=>{c||(h?(w.currentTarget.style.background="linear-gradient(135deg, rgba(16, 185, 129, 0.3) 0%, rgba(16, 185, 129, 0.15) 100%)",w.currentTarget.style.borderColor="rgba(16, 185, 129, 0.6)",w.currentTarget.style.boxShadow="0 8px 20px rgba(16, 185, 129, 0.25)"):(w.currentTarget.style.background="linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(59, 130, 246, 0.15) 100%)",w.currentTarget.style.borderColor="rgba(59, 130, 246, 0.6)",w.currentTarget.style.boxShadow="0 8px 20px rgba(59, 130, 246, 0.25)"),w.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:w=>{h?(w.currentTarget.style.background="linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%)",w.currentTarget.style.borderColor="rgba(16, 185, 129, 0.4)",w.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.15)"):(w.currentTarget.style.background="linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.1) 100%)",w.currentTarget.style.borderColor="rgba(59, 130, 246, 0.4)",w.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.15)"),w.currentTarget.style.transform="translateY(0)"},children:[h?n.jsx(au,{size:20}):n.jsx(I1,{size:20}),h?"Shared!":c?"Sharing...":"Share This Pick"]})]})};async function m$(r){if(!r){const e=an(),t=`usage_${e}`,i=localStorage.getItem(t);return i?JSON.parse(i):{date:e,gameCardsViewed:[],hotTakesViewed:[],count:0}}try{const e=an(),t=$r(St,"user_usage",`${r}_${e}`),i=await Vs(t);if(i.exists())return i.data();const o={userId:r,date:e,gameCardsViewed:[],hotTakesViewed:[],count:0,createdAt:Fs()};return await dc(t,o),o}catch(e){return console.error("Error getting usage document:",e),{date:an(),gameCardsViewed:[],hotTakesViewed:[],count:0}}}async function f$(r,e){const t=an();if(!r){const i=`usage_${t}`,o=JSON.parse(localStorage.getItem(i)||'{"gameCardsViewed":[],"hotTakesViewed":[],"count":0}');return o.gameCardsViewed.includes(e)||(o.gameCardsViewed.push(e),o.count=o.gameCardsViewed.length+o.hotTakesViewed.length,o.date=t,localStorage.setItem(i,JSON.stringify(o))),o}try{const i=$r(St,"user_usage",`${r}_${t}`),o=await Vs(i);if(!o.exists()){const c={userId:r,date:t,gameCardsViewed:[e],hotTakesViewed:[],count:1,createdAt:Fs(),updatedAt:Fs()};return await dc(i,c),c}const l=o.data();return l.gameCardsViewed?.includes(e)?l:(await Eu(i,{gameCardsViewed:ik(e),count:(l.gameCardsViewed?.length||0)+1+(l.hotTakesViewed?.length||0),updatedAt:Fs()}),{...l,gameCardsViewed:[...l.gameCardsViewed||[],e],count:(l.gameCardsViewed?.length||0)+1+(l.hotTakesViewed?.length||0)})}catch(i){return console.error("Error tracking game card view:",i),{gameCardsViewed:[],hotTakesViewed:[],count:0}}}async function p$(r){return await m$(r)}const y$=(r,e)=>{tn&&Zo(tn,r,e)},i3=({isOpen:r,onClose:e})=>{const t=as();return O.useEffect(()=>{r&&(y$("upgrade_modal_redirect_to_pricing",{source:"free_limit_reached"}),e(),t("/pricing"))},[r,t,e]),null},x$=({isOpen:r,onClose:e,isMobile:t})=>{const i=as();if(!r)return null;const o=()=>{localStorage.setItem("nhlsavant_hide_how_it_works","true"),e()},l=()=>{e(),i("/pricing")};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:t?"1rem":"2rem",overflowY:"auto"},onClick:e,children:n.jsxs("div",{style:{background:"linear-gradient(135deg, #0a0e1a 0%, #0f1419 100%)",border:"2px solid #00d9ff",borderRadius:"16px",padding:t?"1.5rem":"2.5rem",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 0 50px rgba(0, 217, 255, 0.4)",position:"relative"},onClick:c=>c.stopPropagation(),children:[n.jsx("button",{onClick:e,style:{position:"absolute",top:t?"1rem":"1.5rem",right:t?"1rem":"1.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},children:n.jsx(Ha,{size:20,color:"#ffffff"})}),n.jsx("h2",{style:{fontSize:t?"1.5rem":"1.75rem",fontWeight:"800",color:"#00d9ff",marginBottom:"1rem",marginTop:0,textShadow:"0 0 20px rgba(0, 217, 255, 0.6)",letterSpacing:"-0.02em"},children:"What Are You Actually Looking At?"}),n.jsxs("p",{style:{fontSize:t?"0.938rem":"1rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.6",marginBottom:"2rem"},children:["You see a pick like ",n.jsx("span",{style:{color:"#00d9ff",fontWeight:"700"},children:'"NSH ML +158"'})," with"," ",n.jsx("span",{style:{color:"#10B981",fontWeight:"700"},children:'"+4.3% EV"'}),".",n.jsx("br",{}),n.jsx("br",{}),"Most people have no idea what that means. Here's the truth:"]}),n.jsxs("div",{style:{background:"rgba(0, 217, 255, 0.05)",border:"1px solid rgba(0, 217, 255, 0.2)",borderRadius:"12px",padding:t?"1.25rem":"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("h3",{style:{fontSize:t?"1.125rem":"1.25rem",fontWeight:"700",color:"#ffffff",marginTop:0,marginBottom:"0.75rem",letterSpacing:"-0.01em"},children:"HOW OUR MODEL FINDS VALUE"}),n.jsxs("p",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",marginBottom:"1rem"},children:["Our model analyzes ",n.jsx("strong",{style:{color:"#00d9ff"},children:"20+ advanced metrics"})," the public doesn't see:"]}),n.jsxs("ul",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",margin:0,paddingLeft:"1.5rem"},children:[n.jsx("li",{style:{marginBottom:"0.5rem"},children:"Expected goals (xG) and shot quality"}),n.jsx("li",{style:{marginBottom:"0.5rem"},children:"Goalie matchups and recent form"}),n.jsx("li",{style:{marginBottom:"0.5rem"},children:"Rest days, travel, and schedule spots"}),n.jsx("li",{style:{marginBottom:"0.5rem"},children:"Line combinations and defensive pairings"}),n.jsx("li",{style:{marginBottom:"0.5rem"},children:"Special teams efficiency and matchups"})]}),n.jsxs("p",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",marginTop:"1rem",marginBottom:0},children:["Then it compares our probability to the market odds. When there's a gap? That's ",n.jsx("strong",{style:{color:"#10B981"},children:"+EV (positive expected value)"}),"."]})]}),n.jsxs("div",{style:{background:"rgba(255, 107, 107, 0.05)",border:"1px solid rgba(255, 107, 107, 0.2)",borderRadius:"12px",padding:t?"1.25rem":"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("h3",{style:{fontSize:t?"1.125rem":"1.25rem",fontWeight:"700",color:"#ffffff",marginTop:0,marginBottom:"0.75rem",letterSpacing:"-0.01em"},children:"THE MARKET GETS IT WRONG"}),n.jsx("p",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",marginBottom:"1rem"},children:"The betting public makes predictable mistakes:"}),n.jsxs("ul",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",margin:0,paddingLeft:"1.5rem"},children:[n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"#ff6b6b"},children:"Hammering overs"}),' because "goals are fun" (ignoring defensive matchups)']}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"#ff6b6b"},children:"Betting heavy favorites"})," blindly (inflating their odds)"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"#ff6b6b"},children:"Chasing big names"})," like McDavid, Matthews (regardless of matchup)"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"#ff6b6b"},children:"Ignoring goalie matchups"})," and back-to-back situations"]})]}),n.jsxs("p",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",marginTop:"1rem",marginBottom:0},children:[n.jsx("strong",{style:{color:"#00d9ff"},children:"Example:"})," Everyone thinks NYR has a 60% chance to beat NSH. But when you dig into rest days, goalie stats, defensive metricsNSH is actually 55% to win. That 5% gap? ",n.jsx("strong",{style:{color:"#10B981"},children:"That's where money lives."})]})]}),n.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.05)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",padding:t?"1.25rem":"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("h3",{style:{fontSize:t?"1.125rem":"1.25rem",fontWeight:"700",color:"#ffffff",marginTop:0,marginBottom:"0.75rem",letterSpacing:"-0.01em"},children:"WHY THIS MATTERS"}),n.jsxs("p",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",margin:0},children:["One +EV bet? You might lose. That's normal.",n.jsx("br",{}),n.jsx("br",{}),n.jsx("strong",{style:{color:"#10B981"},children:"One hundred +EV bets? You win big."})," That's math.",n.jsx("br",{}),n.jsx("br",{}),"Our job is finding those gaps before anyone else does."]})]}),n.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"12px",padding:t?"1.25rem":"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("h3",{style:{fontSize:t?"1.125rem":"1.25rem",fontWeight:"700",color:"#ffffff",marginTop:0,marginBottom:"0.75rem",letterSpacing:"-0.01em"},children:"PROOF WE'RE ACTUALLY DOING IT"}),n.jsx("p",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",marginBottom:"1rem"},children:"We track everything publicly. Every pick. Every loss. Every win."}),n.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[n.jsx("div",{style:{fontSize:t?"1.75rem":"2rem",fontWeight:"800",color:"#A78BFA",textShadow:"0 0 20px rgba(167, 139, 250, 0.6)",marginBottom:"0.25rem"},children:"26% ROI"}),n.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(167, 139, 250, 0.8)",fontWeight:"600"},children:"Since Oct 2025"})]}),n.jsxs("p",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",margin:0},children:["All results public. Nothing hidden.",n.jsx("br",{}),n.jsx("br",{}),"If you want to see what this looks like in real time, that's what the trial is for."]})]}),n.jsxs("p",{style:{fontSize:t?"0.875rem":"0.938rem",color:"rgba(255, 255, 255, 0.85)",lineHeight:"1.7",marginBottom:"2rem"},children:["We're not trying to sell you on hype. We're just showing you picks with actual edge and letting you decide if you want to follow along.",n.jsx("br",{}),n.jsx("br",{}),"Click below to see today's picks and how this actually works."]}),n.jsxs("div",{style:{display:"flex",flexDirection:t?"column":"row",gap:"1rem"},children:[n.jsx("button",{onClick:l,style:{flex:t?"0":"1",padding:"1rem 1.5rem",background:"linear-gradient(135deg, rgba(0, 217, 255, 0.2) 0%, rgba(0, 217, 255, 0.1) 100%)",border:"2px solid #00d9ff",borderRadius:"10px",color:"#ffffff",fontSize:"1rem",fontWeight:"800",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 0 20px rgba(0, 217, 255, 0.4)",textShadow:"0 0 10px rgba(0, 217, 255, 0.6)"},onMouseEnter:c=>{c.currentTarget.style.background="linear-gradient(135deg, rgba(0, 217, 255, 0.3) 0%, rgba(0, 217, 255, 0.15) 100%)",c.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:c=>{c.currentTarget.style.background="linear-gradient(135deg, rgba(0, 217, 255, 0.2) 0%, rgba(0, 217, 255, 0.1) 100%)",c.currentTarget.style.transform="translateY(0)"},children:"Try Free "}),n.jsx("button",{onClick:o,style:{flex:t?"0":"1",padding:"1rem 1.5rem",background:"transparent",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"10px",color:"rgba(255, 255, 255, 0.7)",fontSize:"0.938rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:c=>{c.currentTarget.style.borderColor="rgba(255, 255, 255, 0.4)",c.currentTarget.style.color="rgba(255, 255, 255, 0.9)"},onMouseLeave:c=>{c.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",c.currentTarget.style.color="rgba(255, 255, 255, 0.7)"},children:"Got it, don't show again"})]})]})})},b$=({user:r,isPremium:e,isMobile:t})=>{const[i,o]=O.useState(!1),[l]=O.useState(()=>localStorage.getItem("nhlsavant_hide_how_it_works")==="true");return l?null:n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:t?"1.5rem":"2rem",paddingTop:t?"0.5rem":"1rem"},children:n.jsxs("button",{onClick:()=>o(!0),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:t?"0.75rem 1.25rem":"0.875rem 1.5rem",background:"transparent",border:"2px solid rgba(0, 217, 255, 0.3)",borderRadius:"10px",color:"#00d9ff",fontSize:t?"0.813rem":"0.875rem",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",letterSpacing:"0.02em",boxShadow:"0 0 0 rgba(0, 217, 255, 0)",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.borderColor="rgba(0, 217, 255, 0.6)",c.currentTarget.style.boxShadow="0 0 15px rgba(0, 217, 255, 0.3)",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.borderColor="rgba(0, 217, 255, 0.3)",c.currentTarget.style.boxShadow="0 0 0 rgba(0, 217, 255, 0)",c.currentTarget.style.transform="translateY(0)"},children:[n.jsx(hx,{size:t?16:18,strokeWidth:2.5}),n.jsx("span",{children:t?"How It Works":"How This Works"})]})}),n.jsx(x$,{isOpen:i,onClose:()=>o(!1),isMobile:t})]})},NT=500;let bg=null,Kp=null;const v$=300*1e3;async function S$(){if(bg&&Kp&&Date.now()-Kp<v$)return console.log(" Using cached performance stats:",bg),bg;try{console.log(" Fetching performance stats from Firebase...");const r=Jr(mr(St,"bets"),$n("status","==","COMPLETED")),t=(await ci(r)).docs.map(T=>({docId:T.id,...T.data()}));console.log(` Fetched ${t.length} completed bets`);const i=t.filter(T=>T.prediction?.rating!=="C"&&T.prediction?.rating!=="B"&&T.bet?.market!=="TOTAL"&&!T.bet?.market?.includes("TOTAL"));if(console.log(` ${i.length} quality bets (B+ or higher, no totals)`),i.length===0)return console.warn(" No quality bets found"),{roi:0,totalProfit:0,winRate:0,wins:0,losses:0,totalBets:0,moneylineROI:0,moneylineBets:0};const o=i.filter(T=>T.result?.outcome==="WIN").length,l=i.filter(T=>T.result?.outcome==="LOSS").length,c=i.filter(T=>T.result?.outcome==="PUSH").length,u=i.reduce((T,E)=>T+(E.result?.profit||0),0),m=u*10/NT*100,f=i.filter(T=>T.bet?.market==="MONEYLINE"),b=f.reduce((T,E)=>T+(E.result?.profit||0),0)*10,S=f.length>0?b/NT*100:0,w={roi:m,totalProfit:u,winRate:o+l>0?o/(o+l)*100:0,wins:o,losses:l,pushes:c,totalBets:i.length,moneylineROI:S,moneylineBets:f.length};return console.log(" Performance Stats Calculated:",{totalBets:w.totalBets,wins:o,losses:l,pushes:c,totalProfit:w.totalProfit.toFixed(2)+"u",overallROI:w.roi.toFixed(1)+"%",moneylineROI:w.moneylineROI.toFixed(1)+"%",moneylineBets:w.moneylineBets,winRate:w.winRate.toFixed(1)+"%"}),bg=w,Kp=Date.now(),w}catch(r){console.error(" Error getting performance stats from Firebase:",r);const e={roi:19.6,totalProfit:9.79,winRate:62.5,wins:75,losses:45,pushes:0,totalBets:120,moneylineROI:19.6,moneylineBets:120};return console.log(" Using fallback stats:",e),e}}const Xp=[{code:"Savant15",discount:15,color:"#8B5CF6",weight:50},{code:"MVP25",discount:25,color:"#3B82F6",weight:30},{code:"NHL40",discount:40,color:"#10B981",weight:15},{code:"BANG55",discount:55,color:"#D4AF37",weight:5}];function Qx({onCodeRevealed:r,variant:e="welcome",spinsRemaining:t=null,onSpinComplete:i=null}){const[o,l]=O.useState(!1),[c,u]=O.useState(!1),[h,m]=O.useState(null),[f,x]=O.useState(null),[b,S]=O.useState(t),[w,T]=O.useState(!1);O.useEffect(()=>{const I=localStorage.getItem("nhl_savant_discount_spin");if(I){const L=JSON.parse(I),M=new Date(L.expiresAt);M>new Date?(l(!0),m(L.prize),x(Math.floor((M-new Date)/1e3))):localStorage.removeItem("nhl_savant_discount_spin")}if(t!==null)S(t);else{const L=new Date().toDateString();localStorage.getItem("nhl_savant_spins_reset")!==L&&(localStorage.setItem("nhl_savant_spins_reset",L),localStorage.setItem("nhl_savant_spins_left","47")),S(localStorage.getItem("nhl_savant_spins_left")||"47")}},[t]),O.useEffect(()=>{if(f===null||f<=0)return;const I=setInterval(()=>{x(L=>L<=1?(localStorage.removeItem("nhl_savant_discount_spin"),0):L-1)},1e3);return()=>clearInterval(I)},[f]);const E=()=>{const I=Xp.reduce((M,R)=>M+R.weight,0);let L=Math.random()*I;for(const M of Xp)if(L-=M.weight,L<=0)return M;return Xp[0]},A=()=>{u(!0),setTimeout(()=>{const I=E();m(I),l(!0),u(!1);const L=new Date(Date.now()+600*1e3);localStorage.setItem("nhl_savant_discount_spin",JSON.stringify({prize:I,expiresAt:L.toISOString()})),x(600);const M=parseInt(b)-1;S(M.toString()),localStorage.setItem("nhl_savant_spins_left",M.toString()),r&&r(I.code),i&&i(I.code)},3e3)},_=I=>{const L=Math.floor(I/60),M=I%60;return`${L}:${M.toString().padStart(2,"0")}`},B=async()=>{if(h?.code)try{await navigator.clipboard.writeText(h.code),T(!0),setTimeout(()=>T(!1),2e3)}catch(I){console.error("Failed to copy code:",I)}};return o&&h&&f>0?n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)",border:`2px solid ${h.color}`,borderRadius:"16px",padding:"24px",marginBottom:"20px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at 50% 0%, ${h.color}40, transparent 70%)`,opacity:.3,animation:"pulse 2s ease-in-out infinite"}}),n.jsxs("div",{style:{position:"relative",zIndex:1,textAlign:"center"},children:[n.jsx("div",{style:{width:"48px",height:"48px",margin:"0 auto 16px",background:`linear-gradient(135deg, ${h.color}, ${h.color}80)`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 20px ${h.color}60`},children:n.jsx(Wd,{size:24,color:"#FFFFFF"})}),n.jsxs("div",{style:{fontSize:"24px",fontWeight:"900",color:h.color,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"-0.02em"},children:[" YOU WON ",h.discount,"% OFF!"]}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",background:"rgba(0, 0, 0, 0.4)",padding:"12px 24px",borderRadius:"8px",border:`1px solid ${h.color}40`,marginBottom:"16px"},children:[n.jsx("span",{style:{fontSize:"11px",color:"#94A3B8",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"CODE:"}),n.jsx("span",{style:{fontSize:"18px",fontWeight:"800",color:h.color,fontFamily:"monospace",letterSpacing:"0.1em"},children:h.code}),n.jsxs("button",{onClick:B,style:{background:w?"rgba(16, 185, 129, 0.2)":"rgba(255, 255, 255, 0.1)",border:w?"1px solid #10b981":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:"6px 8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s",color:w?"#10b981":"#94A3B8",fontSize:"11px",fontWeight:"600"},onMouseEnter:I=>{w||(I.currentTarget.style.background="rgba(255, 255, 255, 0.2)")},onMouseLeave:I=>{w||(I.currentTarget.style.background="rgba(255, 255, 255, 0.1)")},title:w?"Copied!":"Copy code",children:[w?n.jsx(au,{size:14}):n.jsx(gx,{size:14}),w?"Copied!":"Copy"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontSize:"14px",color:"#F59E0B",fontWeight:"700",marginBottom:"16px"},children:[n.jsx(jm,{size:16}),n.jsxs("span",{children:["Expires in ",_(f)]})]}),n.jsx("div",{style:{fontSize:"12px",color:"#94A3B8",marginBottom:"8px"},children:"Enter this code at checkout"})]}),n.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.5; }
          }
        `})]}):n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(59, 130, 246, 0.08) 100%)",border:"2px solid rgba(212, 175, 55, 0.3)",borderRadius:"16px",padding:"24px",marginBottom:"20px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent, #D4AF37, transparent)",animation:"shimmer 2s ease-in-out infinite"}}),n.jsxs("div",{style:{textAlign:"center",position:"relative",zIndex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"16px"},children:[n.jsx(fE,{size:20,color:"#D4AF37"}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"800",color:"#D4AF37",textTransform:"uppercase",letterSpacing:"0.05em"},children:e==="daily-return"?"WELCOME BACK! SPIN FOR A DISCOUNT":"SPIN FOR YOUR EXCLUSIVE DISCOUNT"})]}),e==="daily-return"&&b!==null&&n.jsxs("div",{style:{fontSize:"14px",color:"#60A5FA",fontWeight:"700",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx(Wd,{size:16}),n.jsxs("span",{children:[b," ",b===1?"Spin":"Spins"," Left Today"]})]}),e==="daily-return"&&n.jsxs("div",{style:{fontSize:"13px",color:"#94A3B8",marginBottom:"16px",lineHeight:"1.4"},children:["Tired of losing bets without a system?",n.jsx("br",{}),"Try Premium Risk-Free!"]}),n.jsxs("div",{style:{width:"180px",height:"180px",margin:"0 auto 20px",position:"relative"},children:[n.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"50%",position:"relative",boxShadow:"0 0 30px rgba(212, 175, 55, 0.4), inset 0 0 30px rgba(0, 0, 0, 0.5)",transform:c?"rotate(1800deg)":"rotate(0deg)",transition:c?"transform 3s cubic-bezier(0.25, 0.1, 0.25, 1)":"none",background:"conic-gradient(from 0deg, #8B5CF6 0deg 180deg, #3B82F6 180deg 270deg, #10B981 270deg 337.5deg, #D4AF37 337.5deg 360deg)"},children:n.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"60px",height:"60px",borderRadius:"50%",background:"linear-gradient(135deg, #1E293B, #0F172A)",border:"3px solid #D4AF37",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",boxShadow:"0 0 20px rgba(212, 175, 55, 0.6)"},children:""})}),n.jsx("div",{style:{position:"absolute",top:"-10px",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderTop:"20px solid #D4AF37",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5))",zIndex:10}})]}),n.jsx("button",{onClick:A,disabled:c,style:{width:"100%",padding:"16px",background:c?"linear-gradient(135deg, #64748B, #475569)":"linear-gradient(135deg, #D4AF37, #B8941F)",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"800",color:"#FFFFFF",textTransform:"uppercase",letterSpacing:"0.05em",cursor:c?"not-allowed":"pointer",transition:"all 0.2s",boxShadow:c?"none":"0 4px 12px rgba(212, 175, 55, 0.4)",opacity:c?.6:1},onMouseEnter:I=>{c||(I.target.style.transform="translateY(-2px)",I.target.style.boxShadow="0 6px 16px rgba(212, 175, 55, 0.6)")},onMouseLeave:I=>{c||(I.target.style.transform="translateY(0)",I.target.style.boxShadow="0 4px 12px rgba(212, 175, 55, 0.4)")},children:c?n.jsxs(n.Fragment,{children:[n.jsx(Wd,{size:16,style:{display:"inline",marginRight:"8px"}}),"SPINNING..."]}):" SPIN THE WHEEL"}),n.jsxs("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"6px"},children:[n.jsxs("div",{style:{fontSize:"12px",color:"#F59E0B",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx(jm,{size:14}),n.jsxs("span",{children:["Only ",b," codes remaining today"]})]}),n.jsx("div",{style:{fontSize:"11px",color:"#94A3B8"},children:"One spin per user  Expires in 10 minutes"})]})]}),n.jsx("style",{children:`
        @keyframes shimmer {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 1; }
        }
      `})]})}const w$=({isOpen:r,onClose:e,todaysGames:t,isMobile:i})=>{const o=as(),[l,c]=O.useState(1),[u,h]=O.useState(null),[m,f]=O.useState(null),[x,b]=O.useState("$100"),[S,w]=O.useState(null),[T,E]=O.useState(!0),[A,_]=O.useState(0),[B,I]=O.useState(null),[L,M]=O.useState(""),[R,j]=O.useState(0),[F,z]=O.useState(0),[P,V]=O.useState(0),[N,Z]=O.useState(!1),Q=(te,le={})=>{tn&&Zo(tn,te,le)},H=()=>{navigator.vibrate&&navigator.vibrate(10)},U=()=>{F-P>50&&(l===1&&u?(H(),c(2)):l===2&&m&&(H(),c(3))),P-F>50&&(l===2?(H(),c(1)):l===4&&(H(),c(2)))};if(O.useEffect(()=>{r?S$().then(te=>{if(console.log(" Quiz Funnel - Using Dashboard Stats:",te),w(te),E(!1),te?.moneylineROI){let le=0;const ve=Math.round(te.moneylineROI),ue=ve/(1500/16),Re=setInterval(()=>{le+=ue,le>=ve?(_(ve),clearInterval(Re)):_(Math.floor(le))},16);return()=>clearInterval(Re)}}):_(0)},[r]),O.useEffect(()=>{if(l===3){Q("quiz_screen_3_viewed",{painPoint:u,commitmentLevel:m});const te=["Scanning 247 NHL games...","Calculating +EV opportunities...","Comparing to 1,000+ profitable bettors...","Building your custom dashboard..."];let le=0;M(te[0]),j(25);const ve=setInterval(()=>{le++,le<te.length&&(M(te[le]),j((le+1)*25))},700),xe=setTimeout(()=>{c(4)},3e3);return()=>{clearInterval(ve),clearTimeout(xe)}}},[l,u,m]),O.useEffect(()=>{l===4&&Q("quiz_paywall_viewed",{painPoint:u,commitmentLevel:m})},[l,u,m]),!r)return null;const K=()=>{if(Q("quiz_abandoned",{lastScreen:l,painPoint:u||"none",commitmentLevel:m||"none"}),u)try{localStorage.setItem("nhlsavant_quiz_profile",JSON.stringify({painPoint:u,commitmentLevel:m||"unknown",betSize:x,completedAt:Date.now(),completedScreen:l}))}catch(te){console.warn("Could not save quiz profile:",te)}e()},X=()=>{Q("quiz_cta_click",{painPoint:u,commitmentLevel:m}),H(),Z(!0)},re=te=>{I(te),Q("quiz_discount_revealed",{code:te,painPoint:u,commitmentLevel:m}),setTimeout(()=>{e(),o("/pricing")},4e3)},me={parlays:{issue:"Parlays that never hit",message:"You're losing to -EV compounding. Our model finds SINGLE BETS with real edge (avg +6.2% EV)",icon:"",emoji:""},cappers:{issue:"Twitter cappers who ghost",message:"You're tired of capper BS. We track EVERY bet publicly - no cherry-picking, no ghosts",icon:"",emoji:""},hype:{issue:"Betting on hype & favorites",message:"You're paying too much juice. We find +EV on underdogs the public fades",icon:"",emoji:""},vibes:{issue:"No strategy - just vibes",message:"You need a system. Our model uses advanced analytics to find edges bookies miss",icon:"",emoji:""}};t?.filter(te=>te.bestEdge&&te.bestEdge.evPercent>0).sort((te,le)=>le.bestEdge.evPercent-te.bestEdge.evPercent).slice(0,3);const ke=()=>n.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginTop:"2rem",marginBottom:"0.5rem"},children:[1,2,3].map(te=>n.jsx("div",{style:{width:te===l?"32px":"8px",height:"8px",borderRadius:"4px",background:te<=l?"linear-gradient(90deg, #D4AF37, #FFD700)":"rgba(148, 163, 184, 0.3)",transition:"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:te===l?"0 0 12px rgba(212, 175, 55, 0.6)":"none"}},te))});return n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",backdropFilter:"blur(12px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2147483647,padding:i?"0.5rem":"1rem",animation:"backdropFadeIn 0.3s ease-out",overflow:"auto"},onClick:te=>{te.target===te.currentTarget&&K()},onTouchStart:te=>z(te.targetTouches[0].clientX),onTouchMove:te=>V(te.targetTouches[0].clientX),onTouchEnd:U,children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(212, 175, 55, 0.3)",borderRadius:i?"16px":"24px",padding:0,maxWidth:"620px",width:"100%",maxHeight:"95vh",position:"relative",boxShadow:`
            0 25px 50px -12px rgba(0, 0, 0, 0.5),
            0 0 0 1px rgba(212, 175, 55, 0.1),
            0 8px 32px rgba(212, 175, 55, 0.15),
            inset 0 1px 0 rgba(255, 255, 255, 0.1)
          `,animation:"modalSlideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.15s both",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:te=>te.stopPropagation(),children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
            linear-gradient(135deg, transparent 0%, rgba(212, 175, 55, 0.03) 50%, transparent 100%),
            radial-gradient(ellipse at top right, rgba(16, 185, 129, 0.05) 0%, transparent 40%),
            radial-gradient(ellipse at bottom left, rgba(59, 130, 246, 0.05) 0%, transparent 40%)
          `,pointerEvents:"none",zIndex:0}}),n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`
            linear-gradient(rgba(100, 116, 139, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(100, 116, 139, 0.03) 1px, transparent 1px)
          `,backgroundSize:"40px 40px",pointerEvents:"none",opacity:.3,zIndex:0}}),n.jsxs("div",{style:{position:"relative",zIndex:10,padding:i?"1rem 1rem 0.5rem":"1.25rem 1.5rem 0.75rem",flexShrink:0},children:[n.jsx("button",{onClick:K,style:{position:"absolute",top:i?"0.75rem":"1rem",right:i?"0.75rem":"1rem",background:"none",border:"none",color:"rgba(255, 255, 255, 0.6)",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s ease",zIndex:10},onMouseEnter:te=>te.currentTarget.style.color="rgba(255, 255, 255, 1)",onMouseLeave:te=>te.currentTarget.style.color="rgba(255, 255, 255, 0.6)",children:n.jsx(Ha,{size:24,strokeWidth:2})}),l>1&&l!==3&&n.jsxs("button",{onClick:()=>{H(),c(l===4?2:l-1)},style:{position:"absolute",top:i?"0.75rem":"1rem",left:i?"0.75rem":"1rem",background:"none",border:"none",color:"rgba(255, 255, 255, 0.6)",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.875rem",transition:"color 0.2s ease",zIndex:10},onMouseEnter:te=>te.currentTarget.style.color="rgba(255, 255, 255, 1)",onMouseLeave:te=>te.currentTarget.style.color="rgba(255, 255, 255, 0.6)",children:[n.jsx(dx,{size:20}),"Back"]})]}),n.jsxs("div",{style:{position:"relative",zIndex:1,overflowY:"auto",overflowX:"hidden",flex:1,padding:i?"0 1.5rem 1.5rem":"0 2.5rem 2.5rem",WebkitOverflowScrolling:"touch"},children:[l===1&&n.jsxs("div",{style:{animation:"fadeInUp 0.5s ease-out"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:i?"1.5rem":"2rem",marginTop:"2rem"},children:[n.jsx("p",{style:{fontSize:i?"0.875rem":"1rem",color:"rgba(241, 245, 249, 0.6)",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600"},children:"Before we show you today's picks..."}),n.jsx("h2",{style:{fontSize:i?"1.5rem":"1.75rem",fontWeight:"700",color:"#F1F5F9",margin:"0 0 1rem 0",lineHeight:"1.2"},children:"What's costing you the most money in sports betting?"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{key:"parlays",title:"Parlays that never hit",subtitle:"(-EV compounds, house always wins)",emoji:""},{key:"cappers",title:"Twitter cappers who ghost",subtitle:"(4-0 picks posted, 0-3 buried)",emoji:""},{key:"hype",title:"Betting on hype & favorites",subtitle:"(-180 'locks' that cost more)",emoji:""},{key:"vibes",title:"No strategy - just vibes",subtitle:"(Gut feelings, no edge)",emoji:""}].map((te,le)=>n.jsxs("button",{onClick:()=>{h(te.key),Q("quiz_screen_1_complete",{painPoint:te.key}),H(),c(2)},style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.7) 0%, rgba(15, 23, 42, 0.7) 100%)",backdropFilter:"blur(12px)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"14px",padding:"1.125rem 1.5rem",minHeight:"76px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"left",display:"flex",alignItems:"center",gap:"1rem",position:"relative",overflow:"hidden",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25)",animation:`fadeInUp 0.5s ease-out ${le*.1}s both`},onMouseEnter:ve=>{ve.currentTarget.style.borderColor="rgba(212, 175, 55, 0.6)",ve.currentTarget.style.transform="translateY(-4px) scale(1.01)",ve.currentTarget.style.boxShadow="0 12px 28px rgba(212, 175, 55, 0.3), 0 0 32px rgba(212, 175, 55, 0.1)",ve.currentTarget.style.background="linear-gradient(135deg, rgba(30, 41, 59, 0.85) 0%, rgba(15, 23, 42, 0.85) 100%)";const xe=ve.currentTarget.querySelector(".option-icon");xe&&(xe.style.transform="scale(1.15) rotate(5deg)",xe.style.filter="brightness(1.2)")},onMouseLeave:ve=>{ve.currentTarget.style.borderColor="rgba(212, 175, 55, 0.2)",ve.currentTarget.style.transform="translateY(0) scale(1)",ve.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.25)",ve.currentTarget.style.background="linear-gradient(135deg, rgba(30, 41, 59, 0.7) 0%, rgba(15, 23, 42, 0.7) 100%)";const xe=ve.currentTarget.querySelector(".option-icon");xe&&(xe.style.transform="scale(1) rotate(0deg)",xe.style.filter="brightness(1)")},children:[n.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent)",animation:"shimmer 3s infinite",pointerEvents:"none"}}),n.jsx("span",{className:"option-icon",style:{fontSize:"2.5rem",display:"inline-block",transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",filter:"brightness(1)"},children:te.emoji}),n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:i?"1rem":"1.125rem",fontWeight:"600",color:"#F1F5F9",marginBottom:"0.25rem"},children:te.title}),n.jsx("div",{style:{fontSize:i?"0.813rem":"0.875rem",color:"rgba(241, 245, 249, 0.5)",fontStyle:"italic"},children:te.subtitle})]}),n.jsx(Iu,{size:20,color:"rgba(212, 175, 55, 0.6)"})]},te.key))}),n.jsx(ke,{}),n.jsx("div",{style:{textAlign:"center",marginTop:"0.75rem",opacity:.4,fontSize:"0.75rem",animation:"pulse 2s infinite"},children:" Tap any card to continue"})]}),l===2&&n.jsxs("div",{style:{animation:"fadeInUp 0.5s ease-out"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:i?"1.5rem":"2rem",marginTop:"2rem"},children:[n.jsxs("p",{style:{fontSize:i?"0.875rem":"1rem",color:"#ff6b6b",marginBottom:"0.75rem",fontWeight:"600"},children:["You're losing money to ",me[u]?.issue.toLowerCase()]}),n.jsx("h2",{style:{fontSize:i?"1.25rem":"1.5rem",fontWeight:"700",color:"#F1F5F9",margin:"0 0 0.5rem 0",lineHeight:"1.3"},children:"If we could show you a model that:"}),n.jsxs("ul",{style:{listStyle:"none",padding:0,margin:"0 0 1rem 0",fontSize:i?"0.875rem":"0.938rem",color:"rgba(241, 245, 249, 0.8)",textAlign:"left",maxWidth:"400px",marginLeft:"auto",marginRight:"auto"},children:[n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[" Has ",A,"% ROI since Oct 2025"]}),n.jsx("li",{style:{marginBottom:"0.5rem"},children:" Beats closing lines consistently"}),n.jsx("li",{style:{marginBottom:"0.5rem"},children:" Finds +EV the books miss"}),n.jsx("li",{style:{marginBottom:"0.5rem"},children:" Tracks EVERY bet publicly (no BS)"})]}),n.jsx("p",{style:{fontSize:i?"1rem":"1.125rem",color:"#F1F5F9",fontWeight:"600",margin:0},children:"What are you looking for?"})]}),n.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.75rem",opacity:.6},children:[n.jsx("span",{children:" Cautious"}),n.jsx("span",{children:" Confident"})]}),n.jsx("div",{style:{height:"4px",background:"linear-gradient(90deg, #EF4444, #F59E0B, #10B981)",borderRadius:"2px",opacity:.3}})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{key:"YES",text:"Show me how it works",betSize:"smart",color:"green",badge:"Recommended"},{key:"MAYBE",text:"I need to see the proof first",betSize:"proof",color:"blue",badge:null},{key:"NO",text:"Just exploring for now",betSize:"exploring",color:"gray",badge:null}].map((te,le)=>{const xe={green:{border:"2px solid rgba(16, 185, 129, 0.5)",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.08))",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.25)",hoverBorder:"rgba(16, 185, 129, 0.7)",hoverShadow:"0 12px 28px rgba(16, 185, 129, 0.35)"},blue:{border:"2px solid rgba(59, 130, 246, 0.4)",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05))",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.2)",hoverBorder:"rgba(59, 130, 246, 0.6)",hoverShadow:"0 12px 24px rgba(59, 130, 246, 0.3)"},gray:{border:"1px solid rgba(148, 163, 184, 0.25)",background:"rgba(30, 41, 59, 0.5)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",hoverBorder:"rgba(212, 175, 55, 0.4)",hoverShadow:"0 12px 24px rgba(212, 175, 55, 0.2)",opacity:.85}}[te.color];return n.jsxs("button",{onClick:()=>{f(te.key),b(te.betSize),Q("quiz_screen_2_complete",{painPoint:u,commitmentLevel:te.key}),H(),c(3)},style:{background:xe.background,backdropFilter:"blur(12px)",border:xe.border,borderRadius:"14px",padding:"1.125rem 1.5rem",minHeight:"64px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",fontSize:i?"1rem":"1.125rem",fontWeight:"700",color:"#F1F5F9",boxShadow:xe.boxShadow,letterSpacing:"0.01em",position:"relative",opacity:xe.opacity||1,animation:`fadeInUp 0.5s ease-out ${le*.1}s both`},onMouseEnter:ue=>{ue.currentTarget.style.borderColor=xe.hoverBorder,ue.currentTarget.style.transform="translateY(-4px) scale(1.01)",ue.currentTarget.style.boxShadow=xe.hoverShadow,ue.currentTarget.style.opacity="1"},onMouseLeave:ue=>{ue.currentTarget.style.borderColor=xe.border.split("solid ")[1],ue.currentTarget.style.transform="translateY(0) scale(1)",ue.currentTarget.style.boxShadow=xe.boxShadow,ue.currentTarget.style.opacity=xe.opacity||"1"},children:[te.badge&&n.jsx("div",{style:{position:"absolute",top:"-8px",right:"12px",background:"linear-gradient(135deg, #10B981, #059669)",color:"white",fontSize:"0.625rem",padding:"0.25rem 0.75rem",borderRadius:"12px",fontWeight:"600",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.4)",textTransform:"uppercase",letterSpacing:"0.05em"},children:te.badge}),te.text]},te.key)})}),n.jsx(ke,{})]}),l===3&&n.jsxs("div",{style:{animation:"fadeInUp 0.5s ease-out",textAlign:"center",padding:"3rem 0"},children:[n.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 2rem",borderRadius:"50%",background:"linear-gradient(135deg, #D4AF37, #FFD700)",display:"flex",alignItems:"center",justifyContent:"center",animation:"pulse 1.5s infinite, rotate 3s linear infinite",boxShadow:"0 0 40px rgba(212, 175, 55, 0.6)"},children:n.jsx(ar,{size:40,color:"rgba(15, 23, 42, 0.9)",strokeWidth:3})}),n.jsx("h2",{style:{fontSize:i?"1.5rem":"1.75rem",fontWeight:"700",color:"#F1F5F9",margin:"0 0 0.5rem 0"},children:L}),n.jsxs("div",{style:{minHeight:"80px",fontSize:"0.875rem",color:"rgba(241, 245, 249, 0.7)",marginBottom:"2rem",display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center"},children:[R>=25&&n.jsx("div",{style:{animation:"fadeInUp 0.3s ease-out"},children:" Games scanned"}),R>=50&&n.jsx("div",{style:{animation:"fadeInUp 0.3s ease-out"},children:" +EV calculated"}),R>=75&&n.jsx("div",{style:{animation:"fadeInUp 0.3s ease-out"},children:" Profile matched"}),R===100&&n.jsx("div",{style:{animation:"fadeInUp 0.3s ease-out"},children:" Dashboard ready"})]}),n.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(148, 163, 184, 0.2)",borderRadius:"4px",overflow:"hidden",position:"relative"},children:n.jsx("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:`${R}%`,background:"linear-gradient(90deg, #10B981 0%, #D4AF37 50%, #FFD700 100%)",borderRadius:"4px",transition:"width 0.7s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:R>75?"0 0 20px rgba(212, 175, 55, 0.6)":"0 0 20px rgba(16, 185, 129, 0.4)"},children:n.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent)",animation:"shimmerMove 1.5s infinite"}})})}),n.jsx(ke,{})]}),l===4&&n.jsxs("div",{style:{animation:"fadeInUp 0.5s ease-out"},children:[n.jsx("div",{style:{textAlign:"center",marginBottom:i?"1.25rem":"2rem",marginTop:i?"1rem":"1.5rem"},children:n.jsx("p",{style:{fontSize:i?"0.688rem":"0.813rem",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #F4C430 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:0,textTransform:"uppercase",letterSpacing:"0.2em",fontWeight:"700",opacity:.8},children:"Your Personalized Profile"})}),n.jsxs("div",{style:{position:"relative",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(212, 175, 55, 0.15), rgba(16, 185, 129, 0.08))",backdropFilter:"blur(24px) saturate(200%)",WebkitBackdropFilter:"blur(24px) saturate(200%)",border:"3px solid transparent",backgroundImage:`
                linear-gradient(rgba(17, 24, 39, 0.8), rgba(17, 24, 39, 0.8)),
                linear-gradient(135deg, #D4AF37, #10B981, #D4AF37)
              `,backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",borderRadius:i?"16px":"20px",padding:i?"1.5rem":"2rem",textAlign:"center",overflow:"hidden",boxShadow:`
                0 0 0 1px rgba(212, 175, 55, 0.1),
                0 8px 32px rgba(212, 175, 55, 0.25),
                0 16px 64px rgba(16, 185, 129, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2)
              `,marginBottom:i?"2rem":"3rem"},children:[n.jsx("div",{style:{position:"absolute",inset:0,background:`
                  linear-gradient(110deg, 
                    transparent 20%, 
                    rgba(212, 175, 55, 0.08) 40%, 
                    rgba(16, 185, 129, 0.08) 50%,
                    rgba(212, 175, 55, 0.08) 60%, 
                    transparent 80%
                  )
                `,backgroundSize:"200% 100%",animation:"shimmerMove 3s linear infinite",pointerEvents:"none"}}),n.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`
                  radial-gradient(circle at 30% 50%, rgba(16, 185, 129, 0.12) 0%, transparent 50%),
                  radial-gradient(circle at 70% 50%, rgba(212, 175, 55, 0.12) 0%, transparent 50%)
                `,animation:"pulse 4s ease-in-out infinite",pointerEvents:"none"}}),n.jsxs("div",{style:{position:"relative",zIndex:1},children:[n.jsxs("div",{style:{fontSize:i?"3rem":"4rem",fontWeight:"800",background:"linear-gradient(135deg, #10B981 0%, #34D399 50%, #10B981 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 0 24px rgba(16, 185, 129, 0.6))",animation:"countUp 2s ease-out",lineHeight:1,letterSpacing:"-0.02em"},children:["+",A,"%"]}),n.jsxs("div",{style:{fontSize:i?"0.813rem":"0.938rem",color:"rgba(241, 245, 249, 0.85)",marginTop:i?"0.75rem":"1rem",fontWeight:"600",letterSpacing:"0.02em"},children:["ROI since Oct 2025  ",n.jsxs("span",{style:{color:"#D4AF37"},children:[S?.moneylineBets||0," bets"]})]})]})]}),n.jsxs("div",{style:{position:"relative",background:"linear-gradient(135deg, rgba(30, 41, 59, 0.6), rgba(15, 23, 42, 0.6))",backdropFilter:"blur(24px) saturate(180%)",WebkitBackdropFilter:"blur(24px) saturate(180%)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:i?"14px":"18px",padding:i?"1.25rem":"1.75rem",fontSize:i?"0.875rem":"1rem",marginBottom:i?"2rem":"3rem",boxShadow:`
                0 4px 24px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1)
              `,overflow:"hidden",lineHeight:1.8},children:[n.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at 50% 0%, rgba(96, 165, 250, 0.08) 0%, transparent 60%)",pointerEvents:"none"}}),n.jsxs("div",{style:{position:"relative",zIndex:1},children:[n.jsxs("div",{style:{color:"rgba(241, 245, 249, 0.95)",marginBottom:i?"1rem":"1.25rem"},children:[n.jsx("span",{style:{color:"rgba(252, 165, 165, 0.9)",fontWeight:"600"},children:"You're losing to:"})," ",n.jsxs("span",{style:{color:"rgba(241, 245, 249, 0.75)"},children:['"',me[u]?.issue,'"']})]}),n.jsxs("div",{style:{color:"rgba(241, 245, 249, 0.95)",paddingTop:i?"1rem":"1.25rem",borderTop:"1px solid rgba(148, 163, 184, 0.15)"},children:[n.jsx("span",{style:{color:"rgba(52, 211, 153, 0.9)",fontWeight:"600"},children:"We fix it:"})," ",n.jsxs("span",{style:{color:"rgba(241, 245, 249, 0.75)"},children:[u==="parlays"&&"Single +4-6% EV bets = Consistent profit",u==="cappers"&&`All ${S?.totalBets||153} bets tracked publicly`,u==="hype"&&"Find undervalued underdogs market misses",u==="vibes"&&"Advanced analytics + edge calculation"]})]})]})]}),n.jsxs("button",{onClick:X,style:{width:"100%",padding:i?"1.25rem 1.75rem":"1.75rem 2.5rem",fontSize:i?"1.125rem":"1.5rem",fontWeight:"900",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 25%, #FFF4B0 50%, #FFD700 75%, #D4AF37 100%)",backgroundSize:"300% 100%",border:"3px solid rgba(212, 175, 55, 0.8)",borderRadius:i?"16px":"20px",color:"rgba(15, 23, 42, 1)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",boxShadow:`
                  0 12px 48px rgba(212, 175, 55, 0.5),
                  0 0 0 1px rgba(212, 175, 55, 0.3),
                  inset 0 2px 0 rgba(255, 255, 255, 0.4),
                  inset 0 -2px 0 rgba(0, 0, 0, 0.1)
                `,animation:"glow 2s ease-in-out infinite",display:"flex",alignItems:"center",justifyContent:"center",gap:i?"0.75rem":"1rem",letterSpacing:"0.02em",textShadow:"0 1px 2px rgba(0, 0, 0, 0.2)",marginBottom:i?"1rem":"1.5rem"},onMouseEnter:te=>{te.currentTarget.style.transform="translateY(-3px) scale(1.01)",te.currentTarget.style.boxShadow=`
                  0 20px 60px rgba(212, 175, 55, 0.7),
                  0 0 80px rgba(212, 175, 55, 0.4),
                  inset 0 2px 0 rgba(255, 255, 255, 0.5),
                  inset 0 -2px 0 rgba(0, 0, 0, 0.1)
                `},onMouseLeave:te=>{te.currentTarget.style.transform="translateY(0) scale(1)",te.currentTarget.style.boxShadow=`
                  0 12px 48px rgba(212, 175, 55, 0.5),
                  0 0 0 1px rgba(212, 175, 55, 0.3),
                  inset 0 2px 0 rgba(255, 255, 255, 0.4),
                  inset 0 -2px 0 rgba(0, 0, 0, 0.1)
                `},children:[n.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(110deg, transparent 30%, rgba(255, 255, 255, 0.3) 50%, transparent 70%)",backgroundSize:"200% 100%",animation:"shimmerMove 3s linear infinite"}}),n.jsx("span",{style:{position:"relative",zIndex:1},children:"Start 7-Day Free Trial"}),n.jsx("span",{style:{position:"relative",zIndex:1,fontSize:i?"1.375rem":"1.75rem",animation:"bounce 2s infinite"},children:""})]}),n.jsx("div",{style:{textAlign:"center",fontSize:i?"0.688rem":"0.75rem",color:"rgba(212, 175, 55, 0.65)",marginBottom:i?"2.5rem":"3.5rem",fontWeight:"500",lineHeight:1.6,opacity:.9},children:"Less than 1 coffee/day (87/day)  Cancel anytime"}),n.jsx("div",{style:{textAlign:"center",fontSize:i?"0.625rem":"0.688rem",color:"rgba(96, 165, 250, 0.7)",marginBottom:i?"2rem":"2.5rem",fontWeight:"500",opacity:.85,lineHeight:1.6},children:" Ensemble model  A+ grading  +6.2% avg EV"}),n.jsx("div",{style:{textAlign:"center",fontSize:i?"0.625rem":"0.688rem",color:"rgba(254, 240, 138, 0.6)",marginBottom:0,fontWeight:"500",opacity:.75,lineHeight:1.6},children:" You can still lose. Test it 7 days."})]})]})]}),N&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.92)",backdropFilter:"blur(16px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2147483648,padding:i?"1rem":"2rem",animation:"backdropFadeIn 0.3s ease-out"},onClick:te=>{te.target===te.currentTarget&&Z(!1)},children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(212, 175, 55, 0.4)",borderRadius:i?"16px":"24px",padding:i?"2rem 1.5rem":"3rem 2.5rem",maxWidth:"500px",width:"100%",textAlign:"center",position:"relative",boxShadow:`
                0 25px 50px -12px rgba(0, 0, 0, 0.6),
                0 0 0 1px rgba(212, 175, 55, 0.2),
                0 8px 32px rgba(212, 175, 55, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1)
              `,animation:"modalSlideUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)"},onClick:te=>te.stopPropagation(),children:[n.jsx("h2",{style:{fontSize:i?"1.5rem":"2rem",fontWeight:"700",color:"#F1F5F9",marginBottom:"1rem",lineHeight:1.2},children:" Welcome to NHL Savant!"}),n.jsx("p",{style:{fontSize:i?"0.938rem":"1.125rem",color:"rgba(241, 245, 249, 0.8)",marginBottom:"2rem",lineHeight:1.5},children:"Spin the wheel for your exclusive discount"}),n.jsx(Qx,{onCodeRevealed:re}),B&&n.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(212, 175, 55, 0.15))",border:"1px solid rgba(212, 175, 55, 0.4)",borderRadius:"12px",animation:"fadeInUp 0.5s ease-out"},children:[n.jsxs("div",{style:{fontSize:i?"1.125rem":"1.25rem",fontWeight:"700",color:"#10B981",marginBottom:"0.5rem"},children:[B," Applied!"]}),n.jsx("div",{style:{fontSize:i?"0.813rem":"0.875rem",color:"rgba(241, 245, 249, 0.8)"},children:"Redirecting to pricing..."})]})]})}),n.jsx("style",{children:`
        @keyframes backdropFadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes modalSlideUp {
          from {
            opacity: 0;
            transform: translateY(40px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes lockPulse {
          0%, 100% { 
            transform: scale(1); 
            opacity: 0.6;
            filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.4));
          }
          50% { 
            transform: scale(1.1); 
            opacity: 1;
            filter: drop-shadow(0 0 16px rgba(212, 175, 55, 0.6));
          }
        }
        
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        
        @keyframes shimmer {
          0% {
            transform: translateX(-100%);
          }
          100% {
            transform: translateX(200%);
          }
        }
        
        @keyframes shimmerMove {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(200%); }
        }
        
        @keyframes rotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        @keyframes slideRight {
          0%, 100% { transform: translateX(0); }
          50% { transform: translateX(4px); }
        }
        
        @keyframes glow {
          0%, 100% {
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.4);
          }
          50% {
            box-shadow: 0 8px 32px rgba(212, 175, 55, 0.6), 0 0 20px rgba(212, 175, 55, 0.3);
          }
        }
        
        @keyframes countUp {
          from { 
            opacity: 0; 
            transform: translateY(20px);
          }
          to { 
            opacity: 1; 
            transform: translateY(0);
          }
        }
      `})]})},vg=(r,e)=>{tn&&Zo(tn,r,e)};function T$({isOpen:r,onClose:e,spinsRemaining:t,onSpinComplete:i,user:o}){if(!r)return null;const l=u=>{vg("daily_spin_completed",{code:u,spins_remaining:t-1}),i&&i(u)},c=async(u="elite")=>{vg("daily_spin_checkout_click",{tier:u,spins_remaining:t}),o?await px(u,o):e()};return r&&vg("daily_spin_modal_shown",{spins_remaining:t}),n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px",animation:"fadeIn 0.3s ease-out"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, #1E293B 0%, #0F172A 100%)",borderRadius:"20px",maxWidth:"500px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5), 0 0 100px rgba(212, 175, 55, 0.2)",border:"1px solid rgba(212, 175, 55, 0.3)",animation:"slideUp 0.3s ease-out"},children:[n.jsx("button",{onClick:e,style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#94A3B8",transition:"all 0.2s",zIndex:10},onMouseEnter:u=>{u.currentTarget.style.background="rgba(239, 68, 68, 0.2)",u.currentTarget.style.color="#EF4444"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(255, 255, 255, 0.1)",u.currentTarget.style.color="#94A3B8"},children:n.jsx(Ha,{size:20})}),n.jsxs("div",{style:{padding:"32px 24px"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[n.jsx("h2",{style:{fontSize:"28px",fontWeight:"800",background:"linear-gradient(135deg, #D4AF37 0%, #F59E0B 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"12px",lineHeight:"1.2"},children:"Welcome Back! "}),n.jsx("p",{style:{fontSize:"16px",color:"#94A3B8",lineHeight:"1.5",marginBottom:"8px"},children:"Still trying to win without a proven system?"}),n.jsx("p",{style:{fontSize:"14px",color:"#60A5FA",fontWeight:"600"},children:"Spin for an exclusive discount - Try Premium Risk-Free!"})]}),n.jsx(Qx,{variant:"daily-return",spinsRemaining:t,onSpinComplete:l,onCodeRevealed:u=>{vg("daily_spin_code_won",{code:u})}}),t===0&&n.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"16px",marginTop:"20px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#60A5FA",marginBottom:"12px",lineHeight:"1.5"},children:"Out of spins today! Come back tomorrow for 2 more chances, or unlock unlimited access with Premium."}),n.jsx("button",{onClick:()=>c("elite"),style:{background:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",color:"#FFFFFF",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"14px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s",width:"100%"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="none"},children:"Upgrade to Premium"})]}),n.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"rgba(16, 185, 129, 0.05)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px"},children:[n.jsx("div",{style:{fontSize:"13px",color:"#94A3B8",marginBottom:"12px",textAlign:"center",lineHeight:"1.5"},children:"Try our proven system risk-free"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[n.jsxs("button",{onClick:()=>c("scout"),style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",padding:"10px",color:"#A78BFA",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(139, 92, 246, 0.2)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},children:["Weekly Plan",n.jsx("br",{}),n.jsx("span",{style:{fontSize:"11px",opacity:.8},children:"$7.99/week"})]}),n.jsxs("button",{onClick:()=>c("elite"),style:{background:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",border:"none",borderRadius:"8px",padding:"10px",color:"#FFFFFF",fontSize:"12px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s",position:"relative"},onMouseEnter:u=>{u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.transform="scale(1)"},children:[n.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#D4AF37",color:"#1E293B",fontSize:"9px",fontWeight:"800",padding:"2px 6px",borderRadius:"4px"},children:"POPULAR"}),"Monthly Plan",n.jsx("br",{}),n.jsx("span",{style:{fontSize:"11px",opacity:.9},children:"$25.99/month"})]})]})]}),n.jsx("div",{style:{marginTop:"16px",textAlign:"center",fontSize:"11px",color:"#64748B"},children:"All plans include free trial  Cancel anytime"})]})]}),n.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideUp {
          from { 
            opacity: 0;
            transform: translateY(20px);
          }
          to { 
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}const _d=(r,e)=>{tn&&Zo(tn,r,e)},j$=r=>r<=-200?"heavy_favorite":r>-200&&r<=-150?"moderate_favorite":r>-150&&r<-100?"slight_favorite":Math.abs(r)<=109||r===-110?"pickem":r>=110&&r<150?"slight_dog":r>=150&&r<200?"moderate_dog":"big_dog",Zx=(r,e)=>{if(!r)return{units:1,tier:"STD",score:0};if(!e||!e.factors)return{units:1,tier:"STD",score:0};let t=0;const i=r.rating||"B";t+=e.factors.rating?.[i]?.weight||0;const o=j$(r.odds||0);t+=e.factors.oddsRange?.[o]?.weight||0;const l=r.evPercent||0;let c;l>=10?c="elite":l>=5?c="strong":c="good",t+=e.factors.evRange?.[c]?.weight||0;const u=r.confidence||"MEDIUM";t+=e.factors.confidence?.[u]?.weight||0;const h=r.modelProb||.5;let m;h>=.7?m="very_high":h>=.6?m="high":h>=.5?m="medium":m="low",t+=e.factors.modelProb?.[m]?.weight||0;const f=Math.max(-1,Math.min(1,t));let x=1+f*.5;x=Math.max(.5,Math.min(1.5,x)),x=Math.round(x*4)/4;let b;return x>=1.5?b="MAX":x>=1.25?b="HIGH":x>=1?b="STD":x>=.75?b="LOW":b="MIN",{units:x,tier:b,score:f}},A$=(r,e)=>e?`${Zx(r,e).units.toFixed(2)}u`:"1.00u",Qp=(r,e)=>{if(!e)return"#a855f7";const t=Zx(r,e);return t.units>=1.5?"#22c55e":t.units>=1.25?"#3b82f6":t.units>=1?"#a855f7":t.units>=.75?"#f59e0b":"#6b7280"},$T=(r,e)=>{if(!e)return" Std";const t=Zx(r,e);return{MAX:" Max",HIGH:" High",STD:" Std",LOW:" Low",MIN:" Min"}[t.tier]||"Std"},k$=({awayTeam:r,homeTeam:e,gameTime:t,rating:i,awayWinProb:o,homeWinProb:l,isMobile:c,bestEdge:u,isCollapsed:h,game:m,dataProcessor:f,liveScores:x,firebaseBets:b,topEdges:S,confidenceWeights:w})=>{const T=x?.find(M=>M.awayTeam===r&&M.homeTeam===e||M.away===r&&M.home===e),E=T&&(T.status==="SCHEDULED"||T.status==="FUT"||T.status==="PRE"||T.gameState==="FUT"||T.gameState==="PRE"),A=T&&!E&&(T.status==="LIVE"||T.status==="In Progress"),_=T&&!E&&(T.status==="FINAL"||T.status==="Final"||T.status==="OFF"),B=b?.find(M=>M.game?.awayTeam===r&&M.game?.homeTeam===e&&M.status==="PENDING"),I=`${r} @ ${e}`,L=B&&!S?.some(M=>M.game===I&&M.market===B.bet?.market);if(A||_){const M=T.awayScore>T.homeScore,R=T.homeScore>T.awayScore,j=T.awayScore===T.homeScore,F=Math.abs(T.awayScore-T.homeScore),z=b?.find(K=>K.game?.awayTeam===r&&K.game?.homeTeam===e&&K.bet?.market==="MONEYLINE"),P=z||u&&u.market==="MONEYLINE"&&u.evPercent>0;let V,N,Z;if(P)V=z?z.bet.pick.split(" ")[0]:u.team,N=V===r,Z=N?o:l;else{const K=o>l;V=K?r:e,N=K,Z=Math.max(o,l)}const Q=N?M:R,H=_&&Q;let U=50;if(_)U=Q?100:0;else if(A){const K=T.period||1,re=(T.periodDescriptor||"").includes("OT")||K>3;if(j)U=Z,re||(U=50+(U-50)*.8);else{const me=re?F===1?85:95:K===3?F===1?72:F===2?88:95:K===2?F===1?65:F===2?80:92:F===1?58:F===2?72:85;U=Q?me:100-me}}return n.jsxs("div",{style:{display:"flex",flexDirection:"column",padding:c?"1rem":"1.25rem",borderBottom:h?"none":Mt.flat.border,background:A?"linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(11, 15, 31, 1) 100%)":"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(11, 15, 31, 1) 100%)",position:"relative",overflow:"hidden"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:A?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:"0.375rem 0.75rem",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"16px",fontSize:"0.688rem",fontWeight:"800",color:"#EF4444",textTransform:"uppercase",letterSpacing:"0.05em"},children:[n.jsx("span",{style:{width:"6px",height:"6px",background:"#EF4444",borderRadius:"50%",animation:"pulse 2s infinite"}}),(()=>{const K=T.period||0,X=T.periodDescriptor||"";return X.includes("OT")?"OT":X.includes("SO")?"SO":K===0?"LIVE":`P${K}`})()]}),T.clock&&n.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--color-text-secondary)",fontFeatureSettings:'"tnum"'},children:T.clock})]}):n.jsx("div",{style:{display:"inline-flex",padding:"0.375rem 0.75rem",background:"rgba(16, 185, 129, 0.15)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"16px",fontSize:"0.688rem",fontWeight:"800",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.05em"},children:"FINAL"})}),u&&u.qualityGrade&&n.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[n.jsx("div",{style:{padding:"0.25rem 0.5rem",background:Ui(u.qualityGrade).bgColor,border:`1px solid ${Ui(u.qualityGrade).borderColor}`,borderRadius:"6px",fontWeight:"800",fontSize:"0.75rem",color:Ui(u.qualityGrade).color,letterSpacing:"-0.01em",minWidth:"36px",textAlign:"center"},children:u.qualityGrade}),n.jsx("div",{style:{fontSize:"0.563rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:Ui(u.qualityGrade).color,opacity:.8},children:Ui(u.qualityGrade).tier})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c?"0.75rem":"1rem",marginBottom:"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",flex:1},children:[n.jsx("div",{style:{fontSize:c?"0.938rem":"1rem",fontWeight:"700",color:M?"#10B981":"var(--color-text-secondary)",letterSpacing:"0.02em"},children:r}),n.jsx("div",{style:{fontSize:c?"1.75rem":"2rem",fontWeight:"900",color:M?"#10B981":"var(--color-text-primary)",fontFeatureSettings:'"tnum"',minWidth:c?"30px":"36px",textAlign:"center"},children:T.awayScore??0})]}),n.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--color-text-muted)",padding:"0 0.25rem"},children:"@"}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",flex:1,justifyContent:"flex-end"},children:[n.jsx("div",{style:{fontSize:c?"1.75rem":"2rem",fontWeight:"900",color:R?"#10B981":"var(--color-text-primary)",fontFeatureSettings:'"tnum"',minWidth:c?"30px":"36px",textAlign:"center"},children:T.homeScore??0}),n.jsx("div",{style:{fontSize:c?"0.938rem":"1rem",fontWeight:"700",color:R?"#10B981":"var(--color-text-secondary)",letterSpacing:"0.02em"},children:e})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem 0.875rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:"0.625rem",fontWeight:"700",color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.375rem"},children:P?"NHL SAVANT BET":"NHL SAVANT PICK"}),n.jsxs("div",{style:{height:"28px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"6px",padding:"3px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{width:`${U}%`,height:"100%",background:U>=50?"linear-gradient(90deg, #10B981, #059669)":"linear-gradient(90deg, #EF4444, #DC2626)",borderRadius:"4px",transition:"all 0.5s ease",boxShadow:U>=50?"0 0 12px rgba(16, 185, 129, 0.4)":"0 0 12px rgba(239, 68, 68, 0.4)"}}),n.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",fontWeight:"900",color:"white",textShadow:"0 1px 2px rgba(0, 0, 0, 0.8)",letterSpacing:"0.02em"},children:[Math.round(U),"%"]})]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",minWidth:c?"90px":"110px"},children:[P?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{fontSize:"0.813rem",fontWeight:"800",color:"#3B82F6",letterSpacing:"0.02em",marginBottom:"2px"},children:V}),n.jsx("div",{style:{fontSize:"0.688rem",fontWeight:"700",color:"var(--color-text-secondary)"},children:(()=>{const K=z?z.bet.odds:u.odds;return K>0?`+${K}`:K})()})]}):n.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"800",color:"#3B82F6",letterSpacing:"0.02em"},children:[V," to win"]}),_&&n.jsx("div",{style:{fontSize:"0.688rem",fontWeight:"700",color:H?"#10B981":"#EF4444",marginTop:"4px",padding:"2px 6px",background:H?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",borderRadius:"4px"},children:H?" WIN":" LOSS"})]})]})]})}return n.jsxs("div",{style:{display:"flex",flexDirection:"column",padding:c?"0.75rem":"0.875rem",borderBottom:h?"none":Mt.flat.border,background:"rgba(26, 31, 46, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",gap:"0.75rem"},children:[n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c?"0.5rem":"0.625rem",flexWrap:"wrap"},children:[n.jsxs("span",{style:{fontSize:c?"1.125rem":"1.25rem",fontWeight:"800",color:"var(--color-text-primary)",letterSpacing:"-0.01em"},children:[r," ",n.jsx("span",{style:{color:"var(--color-text-muted)",fontWeight:"400"},children:"@"})," ",e]}),L&&B&&n.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[n.jsxs("div",{style:{padding:"0.25rem 0.5rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%)",border:"1px solid rgba(212, 175, 55, 0.4)",borderRadius:"6px",fontWeight:"800",fontSize:"0.75rem",color:"#D4AF37",letterSpacing:"-0.01em",minWidth:"36px",textAlign:"center",boxShadow:"0 2px 8px rgba(212, 175, 55, 0.3)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx(Bo,{size:10}),B.prediction?.qualityGrade||"B+"]}),n.jsx("div",{style:{fontSize:"0.563rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:"#D4AF37",opacity:.9},children:"LOCKED"})]}),!L&&u&&u.qualityGrade&&n.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[n.jsx("div",{style:{padding:"0.25rem 0.5rem",background:Ui(u.qualityGrade).bgColor,border:`1px solid ${Ui(u.qualityGrade).borderColor}`,borderRadius:"6px",fontWeight:"800",fontSize:"0.75rem",color:Ui(u.qualityGrade).color,letterSpacing:"-0.01em",minWidth:"36px",textAlign:"center"},children:u.qualityGrade}),n.jsx("div",{style:{fontSize:"0.563rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:Ui(u.qualityGrade).color,opacity:.8},children:Ui(u.qualityGrade).tier})]})]}),o&&l&&n.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.375rem",flexWrap:"wrap"},children:[n.jsxs("div",{style:{padding:"0.25rem 0.5rem",background:o>l?"rgba(16, 185, 129, 0.15)":"rgba(255, 255, 255, 0.05)",border:o>l?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700",color:o>l?"#10B981":"var(--color-text-secondary)"},children:[r," ",(o>1?o:o*100).toFixed(0),"%"]}),n.jsxs("div",{style:{padding:"0.25rem 0.5rem",background:l>o?"rgba(16, 185, 129, 0.15)":"rgba(255, 255, 255, 0.05)",border:l>o?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700",color:l>o?"#10B981":"var(--color-text-secondary)"},children:[e," ",(l>1?l:l*100).toFixed(0),"%"]})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u&&!h&&n.jsx(n3,{game:m,bestEdge:u,variant:"compact",isMobile:c}),n.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.375rem",fontWeight:"600",whiteSpace:"nowrap"},children:[n.jsx(Wn,{size:12}),t]})]})]}),h&&L&&B&&n.jsxs("div",{style:{padding:c?"0.5rem 0.625rem":"0.5rem 0.75rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"6px",border:"1px solid rgba(212, 175, 55, 0.3)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0,fontSize:c?"0.75rem":"0.813rem",fontWeight:"700"},children:[n.jsx(Bo,{size:14,color:"#D4AF37"}),n.jsx("span",{style:{color:"#D4AF37",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:B.bet?.pick}),n.jsxs("span",{style:{color:"rgba(212, 175, 55, 0.7)",fontWeight:"600",fontSize:"0.688rem"},children:[B.bet?.odds>0?"+":"",B.bet?.odds]})]}),n.jsx("div",{style:{padding:"0.25rem 0.5rem",background:"rgba(212, 175, 55, 0.2)",border:"1px solid rgba(212, 175, 55, 0.4)",borderRadius:"6px",fontSize:"0.688rem",fontWeight:"700",color:"#D4AF37",whiteSpace:"nowrap",textTransform:"uppercase",letterSpacing:"0.05em"},children:"LOCKED"})]}),h&&!L&&u&&n.jsxs("div",{style:{padding:c?"0.5rem 0.625rem":"0.5rem 0.75rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(59, 130, 246, 0.05) 100%)",borderRadius:"6px",border:"1px solid rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0,fontSize:c?"0.75rem":"0.813rem",fontWeight:"700"},children:[n.jsx("span",{style:{fontSize:"1rem"},children:""}),n.jsx("span",{style:{color:"var(--color-text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:u.pick}),n.jsxs("span",{style:{color:"var(--color-text-muted)",fontWeight:"600",fontSize:"0.688rem"},children:[u.odds>0?"+":"",u.odds]})]}),n.jsxs("div",{style:{padding:"0.25rem 0.5rem",background:Gp(u.evPercent).background,border:`1px solid ${Gp(u.evPercent).border}`,borderRadius:"6px",fontSize:"0.813rem",fontWeight:"800",color:Gp(u.evPercent).color,whiteSpace:"nowrap"},children:["+",u.evPercent.toFixed(1),"%"]})]})]})},E$=r=>r>0?100/(r+100):Math.abs(r)/(Math.abs(r)+100),_$=({modelProb:r,marketProb:e})=>n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsxs("div",{style:{marginBottom:"0.5rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Model"}),n.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#10B981"},children:[(r*100).toFixed(1),"%"]})]}),n.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"4px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${r*100}%`,height:"100%",background:"#10B981",borderRadius:"4px",transition:"width 0.3s ease"}})})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Market"}),n.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--color-text-secondary)"},children:[(e*100).toFixed(1),"%"]})]}),n.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"4px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${e*100}%`,height:"100%",background:"#64748B",borderRadius:"4px",transition:"width 0.3s ease"}})})]})]}),R$=({bestEdge:r,game:e,isMobile:t,factors:i,firebaseBets:o,topEdges:l,confidenceWeights:c})=>{const u=o?.find(w=>w.game?.awayTeam===e.awayTeam&&w.game?.homeTeam===e.homeTeam&&w.status==="PENDING"),h=`${e.awayTeam} @ ${e.homeTeam}`,m=u&&!l?.some(w=>w.game===h&&w.market===u.bet?.market);if(!r&&m&&u&&(r={pick:u.bet?.pick,odds:u.bet?.odds,evPercent:u.prediction?.evPercent||0,modelProb:u.prediction?.modelProb||.5,market:u.bet?.market,team:u.bet?.pick?.split(" ")[0],qualityGrade:u.prediction?.qualityGrade||"B+",isLocked:!0}),!r)return n.jsx(vt,{to:"/matchup-insights",style:{textDecoration:"none",display:"block"},children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(59, 130, 246, 0.08) 100%)",border:"1px solid rgba(139, 92, 246, 0.25)",borderRadius:"12px",padding:t?"1.5rem 1rem":"2rem 1.5rem",textAlign:"center",position:"relative",overflow:"hidden",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:w=>{w.currentTarget.style.background="linear-gradient(135deg, rgba(139, 92, 246, 0.12) 0%, rgba(59, 130, 246, 0.12) 100%)",w.currentTarget.style.borderColor="rgba(139, 92, 246, 0.4)",w.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:w=>{w.currentTarget.style.background="linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(59, 130, 246, 0.08) 100%)",w.currentTarget.style.borderColor="rgba(139, 92, 246, 0.25)",w.currentTarget.style.transform="translateY(0)"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.6), transparent)"}}),n.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:n.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(139, 92, 246, 0.3)"},children:n.jsx(Wd,{size:24,color:"#A78BFA",strokeWidth:2})})}),n.jsx("div",{style:{fontSize:t?"1rem":"1.125rem",fontWeight:"700",color:"#E9D5FF",marginBottom:"0.5rem",letterSpacing:"-0.01em"},children:"No Predicted Edge"}),n.jsx("div",{style:{fontSize:t?"0.8125rem":"0.875rem",color:"#C4B5FD",lineHeight:"1.5",marginBottom:"1.25rem",maxWidth:"400px",margin:"0 auto 1.25rem"},children:"Odds aren't favorable for this game. Explore our Hot Takes for deeper insights and alternative angles."}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"700",color:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:["View Hot Takes",n.jsx(Iu,{size:16,strokeWidth:2.5})]})]})});const f=r.isLocked||!1,x=E$(r.odds);e.edges.total?.predictedTotal,e.edges.total?.marketTotal,(r.modelProb-x)*100,BN(r.evPercent,r.modelProb);const S=(()=>{if(!i||i.length===0)return[];const w=[];if(r.market==="TOTAL"){const E=r.pick.includes("OVER");i.forEach(A=>{(E&&A.impact>.05||!E&&A.impact<-.05)&&Math.abs(A.impact)>.05&&w.push(`${A.name}: ${Math.abs(A.impact).toFixed(2)} goal impact`)})}else{const E=r.team;i.forEach(A=>{const _=A.awayMetric?.value||0,B=A.homeMetric?.value||0,I=_>B?e.awayTeam:e.homeTeam,L=Math.abs(_-B)/((_+B)/2);if(I===E&&L>.1){const M=(L*100).toFixed(0);w.push(`${A.name}: ${E} has ${M}% edge`)}})}return w.slice(0,3)})();return n.jsxs("div",{style:{background:f?"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)":ln.hero,border:f?"1px solid rgba(212, 175, 55, 0.3)":Mt.elevated.border,boxShadow:f?"0 4px 12px rgba(212, 175, 55, 0.2)":Mt.elevated.shadow,borderRadius:"10px",padding:t?"0.75rem":"0.875rem",margin:0,position:"relative",overflow:"hidden"},children:[!f&&r.evPercent>10&&n.jsx("div",{className:"shimmer-overlay"}),n.jsx("div",{style:{fontSize:t?G.heading.size:"1.25rem",fontWeight:G.heading.weight,marginBottom:"1rem",color:f?"#D4AF37":"var(--color-text-primary)",position:"relative",zIndex:1,letterSpacing:G.heading.letterSpacing,display:"flex",alignItems:"center",gap:"0.5rem"},children:f?n.jsxs(n.Fragment,{children:[n.jsx(Bo,{size:t?18:22,color:"#D4AF37"}),n.jsxs("span",{children:["LOCKED PICK: ",r.pick]})]}):n.jsxs(n.Fragment,{children:[" BEST VALUE: ",r.pick]})}),f&&n.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(212, 175, 55, 0.8)",marginBottom:"1rem",padding:"0.5rem 0.75rem",background:"rgba(212, 175, 55, 0.1)",borderRadius:"6px",border:"1px solid rgba(212, 175, 55, 0.2)",lineHeight:"1.5"},children:[" ",n.jsx("strong",{children:"Locked In:"})," This pick was recommended earlier when odds were favorable. Current odds may have moved. Check live markets before placing."]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:t?"1fr 1fr 1fr":"repeat(4, 1fr)",gap:t?"0.5rem":"0.875rem",marginBottom:"1rem",position:"relative",zIndex:1},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:G.label.size,color:"var(--color-text-muted)",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,fontWeight:G.label.weight,marginBottom:"0.25rem"},children:"Win Prob"}),n.jsxs("div",{style:{fontSize:t?"1.125rem":G.hero.size,fontWeight:G.hero.weight,color:"#10B981",fontFeatureSettings:"'tnum'",lineHeight:G.hero.lineHeight},children:[(r.modelProb*100).toFixed(1),"%"]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)"},children:"model"})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:G.label.size,color:"var(--color-text-muted)",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,fontWeight:G.label.weight,marginBottom:"0.25rem"},children:"Value"}),n.jsxs("div",{style:{fontSize:t?"1.125rem":G.hero.size,fontWeight:G.hero.weight,color:"#10B981",fontFeatureSettings:"'tnum'",lineHeight:G.hero.lineHeight},children:["+",r.evPercent.toFixed(1),"%"]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)"},children:"EV"}),r.qualityGrade&&r.qualityGrade!=="N/A"&&n.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:700,textAlign:"center",background:r.qualityGrade==="A+"?"#10B981":r.qualityGrade==="A"?"#059669":r.qualityGrade==="B+"?"#0EA5E9":r.qualityGrade==="B"?"#8B5CF6":r.qualityGrade==="C"?"#64748B":"#EF4444",color:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:["Grade ",r.qualityGrade]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:t?"center":"flex-start"},children:[n.jsx("div",{style:{fontSize:G.label.size,color:"var(--color-text-muted)",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,fontWeight:G.label.weight,marginBottom:"0.25rem"},children:t?"Bet":"Units"}),n.jsxs("div",{style:{fontSize:t?"1.25rem":G.subheading.size,fontWeight:"800",color:Qp(r,c),lineHeight:G.hero.lineHeight,display:"flex",alignItems:"center",gap:"0.375rem",padding:t?"0.25rem 0.75rem":"0",background:t?`${Qp(r,c)}15`:"transparent",borderRadius:t?"8px":"0",border:t?`1px solid ${Qp(r,c)}40`:"none"},children:[A$(r,c),t&&n.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:$T(r,c).split(" ")[0]})]}),!t&&n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)"},children:$T(r,c)})]}),!t&&n.jsxs(n.Fragment,{children:[r.agreement!==void 0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:G.label.size,color:"var(--color-text-muted)",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,fontWeight:G.label.weight,marginBottom:"0.25rem"},children:"Agreement"}),n.jsxs("div",{style:{fontSize:G.subheading.size,fontWeight:G.subheading.weight,color:r.agreement<=.03?"#10B981":r.agreement<=.05?"#D4AF37":r.agreement<=.08?"#F59E0B":"#EF4444",lineHeight:G.hero.lineHeight},children:[(r.agreement*100).toFixed(1),"%"]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)"},children:r.agreement<=.03?"Elite":r.agreement<=.05?"Good":r.agreement<=.08?"Moderate":"Risky"})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:G.label.size,color:"var(--color-text-muted)",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing,fontWeight:G.label.weight,marginBottom:"0.25rem"},children:"Odds"}),n.jsxs("div",{style:{fontSize:G.subheading.size,fontWeight:G.heading.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'",lineHeight:G.hero.lineHeight},children:[r.odds>0?"+":"",r.odds]}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)"},children:"line"})]})]})]}),n.jsx(_$,{modelProb:r.modelProb,marketProb:x}),S.length>0&&n.jsxs("div",{style:{marginTop:"1rem",marginBottom:"0.75rem",padding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.1)",position:"relative",zIndex:1},children:[n.jsxs("div",{style:{fontSize:G.label.size,color:"#10B981",fontWeight:G.heading.weight,marginBottom:"0.625rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"1rem"},children:""}),"Why this is the best value:"]}),S.map((w,T)=>n.jsxs("div",{style:{fontSize:G.body.size,color:"var(--color-text-primary)",marginBottom:T<S.length-1?"0.5rem":0,paddingLeft:"1.25rem",position:"relative",lineHeight:"1.5"},children:[n.jsx("span",{style:{position:"absolute",left:0,color:"#10B981",fontSize:"1.25rem",fontWeight:"bold"},children:""}),w]},T))]}),n.jsx("div",{style:{marginTop:"1rem",marginBottom:"0.75rem",position:"relative",zIndex:1},children:n.jsx(n3,{game:e,bestEdge:r,advantages:S,variant:"full",isMobile:t})}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:G.body.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(16, 185, 129, 0.2)",position:"relative",zIndex:1,fontWeight:G.caption.weight},children:[t&&n.jsxs("span",{children:["Odds: ",r.odds>0?"+":"",r.odds]}),n.jsxs("span",{children:["Model: ",(r.modelProb*100).toFixed(1),"%"]}),n.jsxs("span",{children:["Market: ",(x*100).toFixed(1),"%"]})]})]})},C$=({factors:r,totalImpact:e,awayTeam:t,homeTeam:i,isMobile:o,bestEdge:l})=>{if(!r||r.length===0)return null;const c=r.filter(b=>{const S=Math.abs(b.impact)>.05,w=b.awayMetric?.value||0,T=b.homeMetric?.value||0,E=w&&T&&Math.abs(w-T)/((w+T)/2)>.1;if(!S||!E)return!1;if(l?.market==="MONEYLINE")return(w>T?t:i)===l.team;if(l?.market==="TOTAL"){const A=l.pick?.includes("OVER");return A&&b.impact>.05||!A&&b.impact<-.05}return!0}).sort((b,S)=>Math.abs(S.impact)-Math.abs(b.impact)).slice(0,3);if(c.length===0)return n.jsxs("div",{style:{background:ln.factors,border:Mt.raised.border,boxShadow:Mt.raised.shadow,borderRadius:"10px",padding:o?"0.75rem":"0.875rem",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:G.body.size,color:"var(--color-text-muted)",marginBottom:"0.5rem"},children:" KEY ADVANTAGES"}),n.jsx("div",{style:{fontSize:G.subheading.size,color:"var(--color-text-primary)",fontWeight:G.heading.weight},children:"Even Matchup"}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",marginTop:"0.5rem"},children:"No dominant statistical advantages detected. Both teams are closely matched in key metrics."})]});const u=l?.market==="MONEYLINE",h=l?.market==="TOTAL",m=h?` Why ${l.pick} is the smart bet:`:u?` Why ${l.team} ML is the smart bet:`:l?.market==="PUCK_LINE"?` Why ${l.pick} is the smart bet:`:" KEY ADVANTAGES",f=h?`${c.length} factor${c.length!==1?"s":""} combining for ${e>=0?"+":""}${e.toFixed(2)} goal edge`:u?`${c.length} decisive advantage${c.length!==1?"s":""} supporting ${l.team} to WIN`:`${c.length} key factor${c.length!==1?"s":""} with significant impact`,x=c;return c.length,n.jsxs("div",{style:{background:ln.factors,border:Mt.raised.border,boxShadow:Mt.raised.shadow,borderRadius:dt.borderRadius,overflow:"hidden"},children:[n.jsxs("div",{style:{padding:o?"0.625rem":"0.75rem",background:"rgba(0, 0, 0, 0.15)",borderBottom:Mt.flat.border},children:[n.jsx("h3",{style:{fontSize:G.subheading.size,fontWeight:G.heading.weight,margin:0,marginBottom:"0.25rem",color:"var(--color-accent)",letterSpacing:G.heading.letterSpacing},children:m}),n.jsx("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",fontWeight:G.caption.weight},children:f})]}),n.jsxs("div",{style:{padding:o?"0.625rem":"0.75rem"},children:[" ",x.map((b,S)=>{const w=b.awayMetric?.value||0,T=b.homeMetric?.value||0,A=(Math.abs(w-T)/((w+T)/2)*100).toFixed(0),_=w>T?t:i,I=(()=>{if(u)return b.name==="Expected Goals"?`${_} projects to score ${Math.abs(b.impact).toFixed(2)} more goals, giving them a decisive edge to WIN this game.`:b.name==="Offensive Rating"?`${_} generates ${A}% more high-danger chances, creating better scoring opportunities to WIN.`:b.name==="Defensive Rating"?`${_} allows ${A}% fewer dangerous chances, making it harder for opponents to score and WIN.`:b.name==="Special Teams"?`${_} has superior power play execution, creating more scoring chances to WIN.`:b.name==="Possession & Control"?`${_} controls ${A}% more of the play, dictating the pace to WIN.`:`${_} has a ${A}% advantage in ${b.name.toLowerCase()}, improving their chances to WIN this game.`;if(h){const L=b.impact>0?"OVER":"UNDER",M=Math.abs(b.impact).toFixed(2);if(b.name.includes("Expected Goals")){const R=b.awayMetric?.value||0,j=b.homeMetric?.value||0,F=R>j?t:i,z=Math.max(R,j)>2.7?"elite":Math.max(R,j)>2.5?"strong":"solid";return`${F}'s ${z} offense (${Math.max(R,j).toFixed(2)} xGF/60) creates ${M}-goal ${L} edge.`}else if(b.name.includes("Against")||b.name.includes("Defense")){const R=b.awayMetric?.value||0,j=b.homeMetric?.value||0,F=R<j?t:i,z=Math.min(R,j)<2.3?"elite":Math.min(R,j)<2.5?"strong":"solid";return`${F}'s ${z} defense (${Math.min(R,j).toFixed(2)} xGA/60) limits scoring, ${M}-goal ${L} edge.`}else{if(b.name.includes("Power Play"))return`Special teams advantage creates ${M}-goal ${L} edge.`;if(b.name.includes("PDO")||b.name.includes("Regression"))return`${b.impact<0?b.awayMetric?.value>b.homeMetric?.value?t:i:b.awayMetric?.value<b.homeMetric?.value?t:i}'s regression indicators point toward ${M}-goal ${L} edge.`}return`${b.name} matchup creates ${M}-goal ${L} edge.`}return b.explanation})();return n.jsxs("div",{style:{marginBottom:S<x.length-1?"0.625rem":"0",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"8px",padding:"0.75rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{fontSize:G.label.size,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:G.label.weight,marginBottom:"0.625rem"},children:[b.stars===3?"":b.stars===2?"":""," ",b.name]}),n.jsx("div",{style:{fontSize:G.subheading.size,fontWeight:G.heading.weight,color:"#10B981",marginBottom:"0.625rem",lineHeight:1.3},children:u?`${_} has ${A}% edge`:h&&b.impact>0?"Combined teams favor OVER":h&&b.impact<0?"Combined teams favor UNDER":`${_} has ${A}% edge`}),h&&n.jsxs("div",{style:{fontSize:G.body.size,fontWeight:G.heading.weight,color:b.impact>0?"#F59E0B":"#8B5CF6",marginBottom:"0.625rem"},children:[b.impact>0?"+":"",b.impact.toFixed(2)," goal impact  ",b.impact>0?"OVER":"UNDER"]}),n.jsx("div",{style:{fontSize:G.body.size,color:"var(--color-text-primary)",marginBottom:"0.75rem",lineHeight:1.5},children:I}),n.jsxs("div",{style:{fontSize:G.caption.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[t,": ",w.toFixed(2)," | ",i,": ",T.toFixed(2)]})]},S)})]}),n.jsxs("div",{style:{textAlign:"center",fontSize:G.subheading.size,fontWeight:G.heading.weight,padding:o?dt.innerPadding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%)",border:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:dt.borderRadius,color:"#10B981",fontFeatureSettings:"'tnum'",margin:o?dt.innerPadding:"1rem",marginTop:"1rem"},children:[n.jsx("div",{style:{fontSize:G.caption.size,fontWeight:G.caption.weight,color:"rgba(16, 185, 129, 0.8)",marginBottom:"0.25rem"},children:"TOTAL EDGE"}),Xg.formatGoalImpact(e)," goals vs market"]})]})},I$=({dataProcessor:r,oddsData:e,startingGoalies:t,goalieData:i,statsAnalyzer:o,edgeFactorCalc:l})=>{const c=as(),[u,h]=O.useState(null),[m,f]=O.useState([]),[x,b]=O.useState([]),[S,w]=O.useState(!1),[T,E]=O.useState(null),{scores:A}=e3(),{bets:_}=t3(),[B,I]=O.useState(null),[L,M]=O.useState(null),[R,j]=O.useState(!0),[F,z]=O.useState(null),[P,V]=O.useState(!0),[N,Z]=O.useState(null),{user:Q}=ls(),{isPremium:H,isFree:U}=Jo(Q),[K,X]=O.useState(!1),[re,me]=O.useState(0),[ke,te]=O.useState(!1),[le,ve]=O.useState(!1),[xe,ue]=O.useState(!1),[Re,Te]=O.useState(null),[$e,rt]=O.useState(!1),[Ke,et]=O.useState(!1),[Tt,Dt]=O.useState(!1),[Ce,ot]=O.useState(0),[Ae,fe]=O.useState(()=>{const oe=new Date,Pe=new Date(oe.toLocaleString("en-US",{timeZone:"America/New_York"})).getHours(),Fe=Pe>=5&&Pe<11;return console.log(` Banner check: ET hour=${Pe}, shouldShow=${Fe}`),Fe});O.useEffect(()=>{window.pageLoadTime||(window.pageLoadTime=Date.now())},[]),O.useEffect(()=>{const Ie=setInterval(()=>{const Pe=new Date,he=new Date(Pe.toLocaleString("en-US",{timeZone:"America/New_York"})).getHours(),He=he>=5&&he<11;fe(He)},6e4);return()=>clearInterval(Ie)},[]),O.useEffect(()=>{const oe=localStorage.getItem("nhl_savant_disclaimer_acknowledged");rt(!!oe)},[]),O.useEffect(()=>{if(!localStorage.getItem("nhlsavant_welcome_popup_seen")&&!H&&Q===null){const Ie=setTimeout(()=>{et(!0),_d("welcome_popup_shown",{user_type:"new_visitor"})},3e3);return()=>clearTimeout(Ie)}},[H,Q]);const Ue=()=>{et(!1),localStorage.setItem("nhlsavant_welcome_popup_seen","true"),_d("welcome_popup_closed",{action:"dismissed"})},We=async oe=>{const{recordSpin:Ie}=await Is(async()=>{const{recordSpin:Pe}=await import("./spinTracker-BnSdwEot.js");return{recordSpin:Pe}},__vite__mapDeps([0,1,2,3]));await Ie(Q?.uid||null,oe),ot(Pe=>Math.max(0,Pe-1)),_d("daily_spin_used",{code:oe,spins_remaining:Ce-1,user_type:Q?"authenticated":"anonymous"})};O.useEffect(()=>{(async()=>{if(U){const Pe=(await p$(Q?.uid)).gameCardsViewed?.length||0;me(Pe),te(Pe>=1)}else me(0),te(!1)})()},[Q,U,H]);const kt=x.filter(oe=>!oe.isPreliminary);r$(kt,m),O.useEffect(()=>{if(i&&Array.isArray(i)&&i.length>0){console.log(` Initializing GoalieProcessor with ${i.length} goalie records`);const oe=new lP(i);I(oe)}},[i]),O.useEffect(()=>{const oe=()=>{w(window.innerWidth<=640)};return oe(),window.addEventListener("resize",oe),()=>window.removeEventListener("resize",oe)},[]),O.useEffect(()=>{V(!0),fetch("/dratings_predictions.json").then(oe=>{if(!oe.ok)throw new Error(`HTTP ${oe.status}`);return oe.json()}).then(oe=>{z(oe||null),V(!1),console.log(` Loaded ${oe?.predictions?.length||0} DRatings predictions for calibration`)}).catch(oe=>{console.warn(" DRatings predictions not available - using fallback ensemble:",oe.message),z({predictions:[]}),V(!1)})},[]),O.useEffect(()=>{fetch("/nhl_confidence_weights.json").then(oe=>{if(!oe.ok)throw new Error(`HTTP ${oe.status}`);return oe.json()}).then(oe=>{oe&&oe.factors&&Object.keys(oe.factors).length>0?(Z(oe),console.log(` Loaded NHL confidence weights (${oe.totalBets} bets analyzed, updated: ${oe.lastUpdated})`)):(console.warn(" Confidence weights file is empty - using defaults"),Z(null))}).catch(oe=>{console.warn(" Confidence weights not available - using defaults:",oe.message),Z(null)})},[]),O.useEffect(()=>{j(!0),fetch("/moneypuck_predictions.json").then(oe=>oe.json()).then(oe=>{M(oe||[]),j(!1),console.log(` Loaded ${oe?.length||0} MoneyPuck predictions (comparison only)`)}).catch(oe=>{console.warn(" MoneyPuck predictions not available:",oe.message),M([]),j(!1)})},[]),O.useEffect(()=>{if(r&&e&&!P&&!R){console.log(" ==================== DRATINGS DEBUG ===================="),console.log(" DRatings predictions loaded:",F?.predictions?.length||0,"games"),F?.predictions&&F.predictions.length>0?(console.log(" DRatings data:",F),F.predictions.forEach(he=>{console.log(`   - ${he.awayTeam} @ ${he.homeTeam}: ${(he.awayProb*100).toFixed(1)}% / ${(he.homeProb*100).toFixed(1)}%`)})):console.log("  No DRatings predictions available - will use market ensemble fallback");const oe=new DN(r,e,t,L,{},F);h(oe);const Ie=oe.calculateAllEdges();f(Ie),KN(Ie);const Pe=Ie.filter(he=>he.bestEdge&&he.bestEdge.evPercent>=3).length;tP(Ie.length,Pe);const Fe=oe.getTopEdges(.025);b(Fe)}},[r,e,t,F,P,L,R]);const Ve=O.useMemo(()=>{if(!A||A.length===0)return m;console.log(" Merging games: ",{gamesWithOdds:m.length,liveScores:A.length});const oe=[...m];return A.forEach(Ie=>{const Pe=m.some(He=>He.awayTeam===Ie.awayTeam&&He.homeTeam===Ie.homeTeam),Fe=Ie.status==="LIVE"||Ie.status==="In Progress",he=Ie.status==="FINAL"||Ie.status==="Final"||Ie.status==="CRIT";if((Fe||he)&&!Pe){console.log(`   Adding live game without odds: ${Ie.awayTeam} @ ${Ie.homeTeam}`);let He=50,Qe=50;if(r)try{const Se=r.predictTeamScore(Ie.awayTeam,Ie.homeTeam,!1),qe=r.predictTeamScore(Ie.homeTeam,Ie.awayTeam,!0);Se>qe?(He=55,Qe=45):qe>Se&&(He=45,Qe=55)}catch(Se){console.warn("Could not calculate predictions for live game:",Se)}let Oe="Unknown";const Le=Ie.startTimeUTC||Ie.gameTime;if(Le)try{const Se=new Date(Le);if(isNaN(Se.getTime()))console.warn(`Invalid date for ${Ie.awayTeam} @ ${Ie.homeTeam}:`,Le);else{const qe=Se.getHours(),Ne=Se.getMinutes(),ze=qe>=12?"PM":"AM";Oe=`${qe%12||12}:${Ne.toString().padStart(2,"0")} ${ze}`,console.log(`   Formatted game time for ${Ie.awayTeam} @ ${Ie.homeTeam}: ${Le}  ${Oe}`)}}catch(Se){console.warn(`Could not parse game time for ${Ie.awayTeam} @ ${Ie.homeTeam}:`,Se)}oe.push({game:`${Ie.awayTeam} @ ${Ie.homeTeam}`,gameTime:Oe,awayTeam:Ie.awayTeam,homeTeam:Ie.homeTeam,date:an(),edges:{moneyline:{away:{modelProb:He/100},home:{modelProb:Qe/100}}},rawOdds:{},isLiveOnly:!0})}}),console.log(`   Total games to display: ${oe.length}`),oe},[m,A,r]),J=O.useCallback(oe=>{if(!t||!t.games)return null;const Ie=t.games.find(Qe=>Qe.away?.team===oe||Qe.home?.team===oe);if(!Ie)return null;const Fe=Ie.away?.team===oe?Ie.away:Ie.home;if(!Fe||!Fe.goalie||!Fe.confirmed)return null;const he=B?B.getGoalieStats(Fe.goalie,oe):null;console.log(` TodaysGames getGoalieForTeam: ${Fe.goalie} (${oe})`,{found:!!he,hasProcessor:!!B});const He={name:Fe.goalie,team:oe,confirmed:!0,...he||{}};return console.log("    Returning goalie object:",{name:He.name,hasGSAE:He.gsae!==void 0,gsae:He.gsae}),He},[B,t]);(()=>{if(!x||x.length===0)return{total:0,highValue:0};const Ie=new Set(x.map(he=>he.game)).size,Pe=x.filter(he=>he.qualityGrade==="A"||he.qualityGrade==="A+"),Fe=new Set(Pe.map(he=>he.game));return{total:Ie,highValue:Fe.size}})();const[Xe,ut]=O.useState({totalBets:0,totalProfit:0});O.useEffect(()=>{const oe=Jr(mr(St,"bets"),$n("status","==","COMPLETED")),Ie=Os(oe,Pe=>{const he=Pe.docs.map(Oe=>({id:Oe.id,...Oe.data()})).filter(Oe=>Oe.prediction?.rating!=="C"&&Oe.prediction?.rating!=="B"&&Oe.bet?.market!=="TOTAL"&&!Oe.bet?.market?.includes("TOTAL")),He=he.length,Qe=he.reduce((Oe,Le)=>Oe+(Le.result?.profit||0),0);ut({totalBets:He,totalProfit:Qe})});return()=>Ie()},[]);const mt=async(oe,Ie)=>{if(H)return!0;if(U&&ke&&re>=1)return _d("free_limit_reached",{type:"game_card",viewCount:re}),X(!0),!1;try{return await f$(Q?.uid,oe),me(Pe=>Pe+1),te(!0),_d("game_card_view",{tier:"free",viewCount:re+1}),!0}catch(Pe){return console.error("Error tracking game card view:",Pe),!0}},be=(oe,Ie)=>{if(!o||!l)return null;try{const Pe=Ie?.market||"TOTAL",Fe=l.getKeyFactors(oe.awayTeam,oe.homeTeam,Pe),he=l.generateStory(Fe,oe.awayTeam,oe.homeTeam),He=l.calculateTotalImpact(Fe),Qe=o.getDangerZoneBreakdown(oe.awayTeam),Oe=o.getDangerZoneBreakdown(oe.homeTeam),Le=Qe&&Oe?Xg.generateDangerZoneHeatmap(Qe,Oe):null,Se=o.getReboundMetrics(oe.awayTeam),qe=o.getReboundMetrics(oe.homeTeam),Ne=Se&&qe?Xg.generateReboundTable(Se,qe):null,ze=o.getPhysicalMetrics(oe.awayTeam),tt=o.getPhysicalMetrics(oe.homeTeam),_e=ze&&tt?Xg.generatePhysicalMetrics(ze,tt):null,xt=o.getPossessionMetrics(oe.awayTeam),Zt=o.getPossessionMetrics(oe.homeTeam),wt=xt&&Zt?{away:xt,home:Zt}:null,Ut=o.getRegressionIndicators(oe.awayTeam),Dr=o.getRegressionIndicators(oe.homeTeam);return{factors:Fe,story:he,totalImpact:He,dangerZoneData:Le,reboundData:Ne,physicalData:_e,possessionData:wt,regressionData:Ut&&Dr?{away:Ut,home:Dr}:null}}catch(Pe){return console.error("Error generating analytics data:",Pe),null}};return e?n.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:S?"1rem":"1.5rem 1rem"},className:"animate-fade-in",children:[n.jsx("div",{style:{background:"rgba(17, 24, 39, 0.6)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.06)",borderRadius:"12px",padding:S?"0.875rem 1rem":"0.75rem 1.25rem",marginBottom:S?"1.25rem":"1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1.25rem",flexWrap:"wrap"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("span",{style:{fontSize:S?"0.813rem":"0.875rem",color:"rgba(255, 255, 255, 0.9)",fontWeight:"600",letterSpacing:"-0.01em"},children:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),n.jsx("span",{style:{width:"3px",height:"3px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.3)"}}),n.jsx(PN,{}),t&&t.games&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{width:"3px",height:"3px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.3)"}}),n.jsxs("span",{style:{fontSize:S?"0.75rem":"0.813rem",color:"#10B981",fontWeight:"600"},children:[" ",(()=>{let oe=0,Ie=0;return t&&t.games&&Array.isArray(t.games)&&Ve.forEach(Pe=>{const Fe=t.games.find(he=>{const He=he.away?.team===Pe.awayTeam&&he.home?.team===Pe.homeTeam,Qe=he.matchup===`${Pe.awayTeam} @ ${Pe.homeTeam}`;return He||Qe});Fe&&(Ie+=2,Fe.away?.goalie&&oe++,Fe.home?.goalie&&oe++)}),`${oe}/${Ie}`})()]})]})]})}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:S?"0.875rem":"1rem",padding:S?"1rem 0":"0.875rem 0",marginBottom:S?"1.5rem":"1.25rem",borderBottom:"1px solid rgba(148, 163, 184, 0.08)",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:S?"0.75rem":"1rem",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(fr,{size:14,color:"#8B5CF6",strokeWidth:2.5,style:{opacity:.7}}),n.jsx("span",{style:{fontSize:S?"0.75rem":"0.813rem",fontWeight:"600",color:"rgba(148, 163, 184, 0.9)",letterSpacing:"0.02em",textTransform:"uppercase"},children:"Model"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.25rem"},children:[n.jsx("span",{style:{fontSize:S?"1rem":"1.125rem",fontWeight:"700",color:"#A78BFA"},children:Xe.totalBets}),n.jsx("span",{style:{fontSize:"0.625rem",color:"rgba(167, 139, 250, 0.7)",fontWeight:"500"},children:"bets"})]}),n.jsx("div",{style:{width:"2px",height:"12px",background:"rgba(148, 163, 184, 0.15)"}}),n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.25rem"},children:[n.jsxs("span",{style:{fontSize:S?"1rem":"1.125rem",fontWeight:"700",color:Xe.totalProfit>=0?"#10B981":"#EF4444"},children:[Xe.totalProfit>=0?"+":"",Xe.totalProfit.toFixed(1),"u"]}),n.jsx("span",{style:{fontSize:"0.625rem",color:Xe.totalProfit>=0?"rgba(16, 185, 129, 0.7)":"rgba(239, 68, 68, 0.7)",fontWeight:"500"},children:"profit"})]})]})]}),n.jsxs("button",{onClick:()=>c("/performance"),style:{padding:"0.375rem 0.75rem",background:"transparent",border:"1px solid rgba(139, 92, 246, 0.25)",borderRadius:"6px",color:"#A78BFA",fontSize:"0.688rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.25rem",letterSpacing:"0.02em"},onMouseEnter:oe=>{oe.currentTarget.style.background="rgba(139, 92, 246, 0.08)",oe.currentTarget.style.borderColor="rgba(139, 92, 246, 0.4)"},onMouseLeave:oe=>{oe.currentTarget.style.background="transparent",oe.currentTarget.style.borderColor="rgba(139, 92, 246, 0.25)"},children:["Details",n.jsx(ux,{size:12})]})]}),(console.log(" Banner render check:",{showPreliminaryBanner:Ae,allEdgesExists:!!m,allEdgesLength:m?.length||0,willShow:Ae&&m&&m.length>0}),null),Ae&&m&&m.length>0&&n.jsx("div",{style:{margin:"0 auto 24px",maxWidth:"900px",padding:"16px 20px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(5, 150, 105, 0.06) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)",backdropFilter:"blur(10px)",boxShadow:"0 4px 16px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.05)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"14px"},children:[n.jsx("div",{style:{marginTop:"2px",width:"32px",height:"32px",borderRadius:"8px",background:"rgba(16, 185, 129, 0.15)",border:"1px solid rgba(16, 185, 129, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",flexShrink:0},children:""}),n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:{fontSize:"14px",fontWeight:"700",color:"#10b981",marginBottom:"6px",letterSpacing:"0.3px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{children:"Early Analysis Available"}),n.jsx("span",{style:{fontSize:"11px",fontWeight:"600",padding:"2px 8px",borderRadius:"4px",background:"rgba(16, 185, 129, 0.15)",border:"1px solid rgba(16, 185, 129, 0.25)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Preliminary"})]}),n.jsxs("div",{style:{fontSize:"13px",color:"rgba(255,255,255,0.75)",lineHeight:"1.5",fontWeight:"400"},children:["Our data proves picks with complete inputs deliver superior results. For the highest-quality picks, we wait until ",n.jsx("strong",{style:{color:"#10b981",fontWeight:"600"},children:"11:00 AM ET"})," when starting goalie confirmations begin and our predictive models incorporate essential data inputs."]})]})]})}),_&&_.length>0&&(()=>{const oe=an(),Ie=_.filter(Le=>Le.date===oe&&Le.status==="PENDING");if(Ie.length===0)return null;const Pe=Ie.map(Le=>{const Se=`${Le.game?.awayTeam} @ ${Le.game?.homeTeam}`,qe=x?.some(Ne=>Ne.game===Se&&Ne.market===Le.bet?.market);return{...Le,gameMatchup:Se,status:qe?"LIVE_EDGE":"LOCKED",lockedAt:Le.firstRecommendedAt||Le.timestamp}}),Fe=new Map;Pe.forEach(Le=>{const Se=Le.gameMatchup;Fe.has(Se)||Fe.set(Se,{game:Se,gameTime:Le.game?.gameTime,bets:[]}),Fe.get(Se).bets.push({pick:Le.bet?.pick,market:Le.bet?.market,grade:Le.prediction?.qualityGrade||Le.prediction?.rating||"B",odds:Le.bet?.odds,edge:`+${Le.prediction?.evPercent?.toFixed(1)||"0.0"}%`,status:Le.status,lockedAt:Le.lockedAt})});const he=[...Fe.values()],He=Pe.filter(Le=>Le.status==="LIVE_EDGE").length,Qe=Pe.filter(Le=>Le.status==="LOCKED").length,Oe=Pe.filter(Le=>Le.prediction?.qualityGrade==="A+"||Le.prediction?.qualityGrade==="A").length;return he.length>0?n.jsx("div",{style:{marginBottom:"1.5rem"},children:n.jsx(d$,{gameGroups:he,opportunityStats:{total:Pe.length,elite:Oe,liveEdge:He,locked:Qe},isFree:U,hasReachedLimit:ke,isPremium:H,onUpgradeClick:()=>X(!0),onViewAll:()=>{document.querySelector('[class*="elevated-card"]')?.scrollIntoView({behavior:"smooth",block:"start"})},onGameClick:Le=>{const Se=`game-${Le.replace(/\s+/g,"-").replace(/@/g,"at")}`,qe=document.getElementById(Se);qe&&(qe.scrollIntoView({behavior:"smooth",block:"center"}),qe.style.transition="all 0.3s ease",qe.style.transform="scale(1.01)",setTimeout(()=>{qe.style.transform="scale(1)"},300))}})}):null})(),!1,n.jsx(b$,{user:Q,isPremium:H,isMobile:S}),n.jsx("div",{children:(()=>{const oe={};Ve.forEach(Pe=>{const Fe=Pe.gameTime;oe[Fe]||(oe[Fe]=[]),oe[Fe].push(Pe)});const Ie=Object.keys(oe).sort((Pe,Fe)=>{const he=He=>{const[Qe,Oe]=He.split(" "),[Le,Se]=Qe.split(":").map(Number);let qe=Le;return Oe==="PM"&&Le!==12&&(qe+=12),Oe==="AM"&&Le===12&&(qe=0),qe*60+Se};return he(Pe)-he(Fe)});return Ie.map((Pe,Fe)=>{const he=oe[Pe],He=new Date,Qe=new Date,[Oe,Le]=Pe.split(" "),[Se,qe]=Oe.split(":").map(Number);let Ne=Se;Le==="PM"&&Se!==12&&(Ne+=12),Le==="AM"&&Se===12&&(Ne=0),Qe.setHours(Ne,qe,0,0);const ze=Math.floor((Qe-He)/(1e3*60)),tt=ze>0&&ze<60;return n.jsxs("div",{style:{marginBottom:Fe<Ie.length-1?S?"1.5rem":"1.75rem":0},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:S?"1rem":"1.25rem",paddingBottom:"0.75rem",borderBottom:"2px solid rgba(16, 185, 129, 0.15)"},children:[n.jsx("div",{style:{fontSize:S?"1rem":"1.125rem",fontWeight:"800",color:"var(--color-text-primary)",letterSpacing:"-0.01em"},children:Pe}),n.jsxs("div",{style:{fontSize:S?"0.75rem":"0.813rem",color:"var(--color-text-muted)",fontWeight:"600",padding:"0.25rem 0.625rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[he.length," game",he.length>1?"s":""]}),tt&&n.jsx("div",{style:{fontSize:S?"0.688rem":"0.75rem",color:"#EF4444",fontWeight:"700",padding:"0.25rem 0.625rem",background:"rgba(239, 68, 68, 0.15)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)",textTransform:"uppercase",letterSpacing:"0.05em",animation:"pulse 2s infinite"},children:" Starting Soon"})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:S?"0.625rem":"0.75rem"},children:he.map((_e,xt)=>{const Zt=Ve.indexOf(_e),wt=x.filter(it=>it.game===_e.game&&it.evPercent>0).sort((it,Be)=>Be.evPercent-it.evPercent)[0],Ut=A?.find(it=>it.awayTeam===_e.awayTeam&&it.homeTeam===_e.homeTeam||it.away===_e.awayTeam&&it.home===_e.homeTeam),Dr=Ut&&(Ut.status==="LIVE"||Ut.status==="In Progress"||Ut.status==="FINAL"||Ut.status==="Final"),_n=n.jsxs(n.Fragment,{children:[n.jsx(k$,{awayTeam:_e.awayTeam,homeTeam:_e.homeTeam,gameTime:_e.gameTime,rating:wt?.evPercent||0,awayWinProb:(()=>{const it=_e.edges.moneyline?.away?.modelProb||0;return it>1?it:it*100})(),homeWinProb:(()=>{const it=_e.edges.moneyline?.home?.modelProb||0;return it>1?it:it*100})(),isMobile:S,bestEdge:wt,game:_e,dataProcessor:r,liveScores:A,firebaseBets:_,topEdges:x,confidenceWeights:N}),(()=>{const it=A?.find($t=>$t.awayTeam===_e.awayTeam&&$t.homeTeam===_e.homeTeam||$t.away===_e.awayTeam&&$t.home===_e.homeTeam);return it&&(it.status==="LIVE"||it.status==="In Progress"||it.status==="FINAL"||it.status==="Final")?null:n.jsx(o$,{game:_e,awayTeam:_e.awayTeam,homeTeam:_e.homeTeam,dataProcessor:r,isMobile:S})})()]}),Vr=`game-${_e.awayTeam}-at-${_e.homeTeam}`.replace(/\s+/g,"-");return Dr?n.jsx("div",{id:Vr,className:"elevated-card",style:{marginBottom:xt<he.length-1?S?"0.625rem":"0.75rem":0,padding:0,background:"var(--color-bg-secondary)",border:"1px solid var(--color-border)",overflow:"hidden",scrollMarginTop:"80px"},children:_n},Zt):n.jsxs(s$,{id:Vr,header:_n,defaultExpanded:!1,index:Zt,isMobile:S,forceCollapse:le,onToggle:async it=>{if(it){if(!$e)return Te(_e),ue(!0),!1;if(!await mt(Vr))return!1;fw(_e)}},children:[(()=>{const it=be(_e,wt);return n.jsx(Ed,{stepNumber:1,title:"THE BET",emoji:"",accentColor:"#D4AF37",isMobile:S,children:n.jsx(R$,{bestEdge:wt,game:_e,isMobile:S,factors:it?.factors||[],firebaseBets:_,topEdges:x,confidenceWeights:N})})})(),(()=>{const it=be(_e,wt);return wt&&it&&it.factors?n.jsx(Ed,{stepNumber:2,title:"WHY THIS BET WORKS",emoji:"",accentColor:"#3B82F6",isMobile:S,children:n.jsx(i$,{game:_e,bestEdge:wt,isMobile:S})}):null})(),(()=>{const it=be(_e,wt);return it&&it.factors&&it.factors.length>0?n.jsx(Ed,{stepNumber:3,title:"KEY STATISTICAL DRIVERS",emoji:"",accentColor:"#8B5CF6",isMobile:S,children:n.jsx(C$,{factors:it.factors,totalImpact:it.totalImpact,awayTeam:_e.awayTeam,homeTeam:_e.homeTeam,isMobile:S,bestEdge:wt})}):null})(),n.jsx(Ed,{stepNumber:4,title:"MATCHUP INTELLIGENCE",emoji:"",accentColor:"#10B981",isMobile:S,children:n.jsx(a$,{game:_e,dataProcessor:r,statsAnalyzer:o,bestEdge:wt,firebaseBets:_,awayGoalie:J(_e.awayTeam),homeGoalie:J(_e.homeTeam),isMobile:S})}),(()=>{const it=be(_e,wt);return it?n.jsx(Ed,{stepNumber:5,title:"ADVANCED MATCHUP ANALYSIS",emoji:"",accentColor:"#8B5CF6",isMobile:S,children:n.jsx(VN,{awayTeam:_e.awayTeam,homeTeam:_e.homeTeam,dangerZoneData:it.dangerZoneData,reboundData:it.reboundData,physicalData:it.physicalData,possessionData:it.possessionData,regressionData:it.regressionData,awayGoalie:J(_e.awayTeam),homeGoalie:J(_e.homeTeam),isMobile:S,dataProcessor:r,game:_e,bestEdge:wt,statsAnalyzer:o,defaultExpanded:!1})}):null})()]},Zt)})})]},Pe)})})()}),Ve.length===0&&(!A||A.length===0)&&n.jsxs("div",{className:"elevated-card",style:{textAlign:"center",padding:S?"2rem 1rem":"3rem"},children:[n.jsx(Wn,{size:48,color:"var(--color-text-muted)",style:{margin:"0 auto 1rem auto"}}),n.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Games Today"}),n.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Check back later for today's matchups and analysis."})]}),n.jsx(l$,{isVisible:xe,onAccept:()=>{rt(!0),ue(!1),Re&&(fw(Re),Te(null))},onDecline:()=>{ue(!1),Te(null)}}),n.jsx(i3,{isOpen:K,onClose:()=>{X(!1),H||(ve(!0),setTimeout(()=>ve(!1),100))},user:Q}),n.jsx(w$,{isOpen:Ke,onClose:Ue,todaysGames:Ve,isMobile:S}),n.jsx(T$,{isOpen:Tt,onClose:()=>Dt(!1),spinsRemaining:Ce,onSpinComplete:We,user:Q})]}):n.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:S?"1rem":"2rem 1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:S?"1rem":"2rem",borderBottom:"1px solid var(--color-border)",marginBottom:S?"1rem":"2rem"},children:[n.jsx(Wn,{size:S?24:32,color:"var(--color-accent)"}),n.jsxs("div",{children:[n.jsx("h1",{style:{marginBottom:"0.25rem"},children:"Today's Games"}),n.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:S?"0.875rem":"0.938rem",margin:0},children:"In-depth analysis of today's matchups with advanced metrics"})]})]}),n.jsxs("div",{className:"elevated-card",style:{textAlign:"center",padding:S?"2rem 1rem":"3rem"},children:[n.jsx(Wn,{size:48,color:"var(--color-text-muted)",style:{margin:"0 auto 1rem auto"}}),n.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Games Available"}),n.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Add today's odds files to see game analysis and betting opportunities."})]})]})},F$=({bets:r})=>{const[e,t]=O.useState(["ALL"]),[i,o]=O.useState(["ALL"]),l=O.useMemo(()=>{if(!r||r.length===0)return[];const w=[...r].sort((L,M)=>{const R=L.timestamp?.toDate?.()||new Date(L.timestamp),j=M.timestamp?.toDate?.()||new Date(M.timestamp);return R-j});let T=0,E=0,A=0,_=0,B=0,I=0;return w.map((L,M)=>{const R=L.result?.profit||0,j=L.bet?.market,F=L.prediction?.rating;T+=R,j==="MONEYLINE"&&(E+=R),j==="TOTAL"&&(A+=R),F==="A+"&&(_+=R),F==="A"&&(B+=R),F==="B+"&&(I+=R);const z=L.timestamp?.toDate?.()||new Date(L.timestamp);return{index:M+1,date:z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:z,all:parseFloat(T.toFixed(2)),moneyline:parseFloat(E.toFixed(2)),total:parseFloat(A.toFixed(2)),aPlus:parseFloat(_.toFixed(2)),a:parseFloat(B.toFixed(2)),bPlus:parseFloat(I.toFixed(2)),betDetails:{market:j,rating:F,profit:R,pick:L.bet?.pick}}})},[r]),c=O.useMemo(()=>{if(!l.length)return[];if(e.includes("ALL")&&i.includes("ALL"))return l;let w=0;return l.map((T,E)=>{const A=e.includes("ALL")||e.includes(T.betDetails.market),_=i.includes("ALL")||i.includes(T.betDetails.rating);return A&&_&&(w+=T.betDetails.profit),{...T,filtered:parseFloat(w.toFixed(2))}})},[l,e,i]),h=(()=>{if(!e.includes("ALL")){if(e.includes("MONEYLINE")&&e.length===1)return"moneyline";if(e.includes("TOTAL")&&e.length===1)return"total"}if(!i.includes("ALL")){if(i.includes("A+")&&i.length===1)return"aPlus";if(i.includes("A")&&i.length===1)return"a";if(i.includes("B+")&&i.length===1)return"bPlus"}return!e.includes("ALL")||!i.includes("ALL")?"filtered":"all"})(),m=c.length>0?c[c.length-1][h]:0,f=m>0,x=w=>{t(w==="ALL"?["ALL"]:T=>{const E=T.filter(A=>A!=="ALL");if(E.includes(w)){const A=E.filter(_=>_!==w);return A.length===0?["ALL"]:A}else return[...E,w]})},b=w=>{o(w==="ALL"?["ALL"]:T=>{const E=T.filter(A=>A!=="ALL");if(E.includes(w)){const A=E.filter(_=>_!==w);return A.length===0?["ALL"]:A}else return[...E,w]})},S=({active:w,payload:T})=>{if(!w||!T||!T[0])return null;const E=T[0].payload,A=T[0].value;return n.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.95)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"0.75rem",backdropFilter:"blur(8px)"},children:[n.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.5rem"},children:[E.date,"  Bet #",E.index]}),n.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"800",color:A>=0?"#10B981":"#EF4444",marginBottom:"0.5rem"},children:[A>=0?"+":"",A.toFixed(2),"u"]}),n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.5)"},children:E.betDetails.pick})]})};return!r||r.length===0?n.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"3rem",textAlign:"center"},children:[n.jsx(ar,{size:48,color:"rgba(255, 255, 255, 0.2)",style:{margin:"0 auto 1rem"}}),n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.4)",fontSize:"0.938rem"},children:"No bet history yet. Start tracking bets to see your profit timeline."})]}):n.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx(ar,{size:24,color:"#10B981"}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"800",margin:0,color:"rgba(255, 255, 255, 0.95)"},children:"Profit Over Time"}),n.jsxs("div",{style:{fontSize:"0.813rem",color:"rgba(255, 255, 255, 0.5)",marginTop:"0.25rem"},children:["Cumulative performance  ",r.length," bets tracked"]})]})]}),n.jsxs("div",{style:{padding:"0.5rem 1rem",background:f?"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(239, 68, 68, 0.05) 100%)",border:`1px solid ${f?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.125rem"},children:"Current"}),n.jsxs("div",{style:{fontSize:"1.375rem",fontWeight:"900",color:f?"#10B981":"#EF4444"},children:[f?"+":"",m.toFixed(2),"u"]})]})]}),n.jsxs("div",{style:{marginBottom:"1.5rem"},children:[n.jsxs("div",{style:{marginBottom:"0.75rem"},children:[n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.5)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600",marginBottom:"0.5rem"},children:"Market"}),n.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["ALL","MONEYLINE","TOTAL"].map(w=>{const T=e.includes(w);return n.jsx("button",{onClick:()=>x(w),style:{padding:"0.375rem 0.875rem",fontSize:"0.813rem",fontWeight:"600",borderRadius:"6px",border:T?"1.5px solid #3B82F6":"1px solid rgba(255, 255, 255, 0.1)",background:T?"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.1) 100%)":"rgba(255, 255, 255, 0.03)",color:T?"#3B82F6":"rgba(255, 255, 255, 0.6)",cursor:"pointer",transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"0.03em"},onMouseEnter:E=>{T||(E.target.style.background="rgba(255, 255, 255, 0.06)",E.target.style.borderColor="rgba(255, 255, 255, 0.2)")},onMouseLeave:E=>{T||(E.target.style.background="rgba(255, 255, 255, 0.03)",E.target.style.borderColor="rgba(255, 255, 255, 0.1)")},children:w==="ALL"?"All Markets":w==="MONEYLINE"?"Moneyline":"Total"},w)})})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.5)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600",marginBottom:"0.5rem"},children:"Rating"}),n.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{key:"ALL",label:"All Ratings",color:"#64748B"},{key:"A+",label:"A+",color:"#10B981"},{key:"A",label:"A",color:"#059669"},{key:"B+",label:"B+",color:"#0EA5E9"}].map(w=>{const T=i.includes(w.key);return n.jsx("button",{onClick:()=>b(w.key),style:{padding:"0.375rem 0.875rem",fontSize:"0.813rem",fontWeight:"700",borderRadius:"6px",border:T?`1.5px solid ${w.color}`:"1px solid rgba(255, 255, 255, 0.1)",background:T?`linear-gradient(135deg, ${w.color}33 0%, ${w.color}1A 100%)`:"rgba(255, 255, 255, 0.03)",color:T?w.color:"rgba(255, 255, 255, 0.6)",cursor:"pointer",transition:"all 0.2s ease",minWidth:w.key==="ALL"?"auto":"42px",textAlign:"center"},onMouseEnter:E=>{T||(E.target.style.background="rgba(255, 255, 255, 0.06)",E.target.style.borderColor="rgba(255, 255, 255, 0.2)")},onMouseLeave:E=>{T||(E.target.style.background="rgba(255, 255, 255, 0.03)",E.target.style.borderColor="rgba(255, 255, 255, 0.1)")},children:w.label},w.key)})})]})]}),n.jsx("div",{style:{height:"300px",marginTop:"1.5rem"},children:n.jsx(ij,{width:"100%",height:"100%",children:n.jsxs(sj,{data:c,margin:{top:5,right:30,left:20,bottom:5},children:[n.jsx(oj,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.05)",vertical:!1}),n.jsx(aj,{dataKey:"date",stroke:"rgba(255, 255, 255, 0.3)",style:{fontSize:"0.75rem"},tickLine:!1}),n.jsx(lj,{stroke:"rgba(255, 255, 255, 0.3)",style:{fontSize:"0.75rem"},tickLine:!1,tickFormatter:w=>`${w>=0?"+":""}${w}u`}),n.jsx(cj,{content:n.jsx(S,{})}),n.jsx($l,{type:"monotone",dataKey:h,stroke:m>=0?"#10B981":"#EF4444",strokeWidth:3,dot:!1,activeDot:{r:6,fill:m>=0?"#10B981":"#EF4444"},animationDuration:500}),n.jsx($l,{type:"monotone",dataKey:()=>0,stroke:"rgba(255, 255, 255, 0.2)",strokeWidth:1,strokeDasharray:"5 5",dot:!1})]})})})]})};function Sg({icon:r,label:e,value:t,target:i,status:o}){return n.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(59, 130, 246, 0.15) 100%)"},children:r}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:e}),n.jsx("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)"},children:t})]})]}),i&&n.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",paddingTop:"0.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i,o&&n.jsx("span",{style:{marginLeft:"0.5rem",color:o==="good"?"#10B981":"#F59E0B"},children:o==="good"?"":""})]})]})}const Yi=500,D$=.25,P$=.05,B$=5,z$=100;function VT(r){let e=Yi,t=Yi,i=0,o=0,l=Yi,c=Yi;return r.forEach(u=>{const h=u.result?.outcome,m=u.result?.profit||0,f=u.bet?.odds,x=u.prediction?.evPercent||0,b=m*10;t+=b,t>c&&(c=t);const S=(c-t)/c*100;if(S>o&&(o=S),e>=z$){const E=x/100/Math.abs(f>=0?f/100:100/f)*D$;let A=Math.min(E*e,P$*e);if(A=Math.max(A,B$),A<=e){let _=0;h==="WIN"?_=f>=0?A*(f/100):A*(100/Math.abs(f)):h==="LOSS"&&(_=-A),e+=_}}e>l&&(l=e);const w=(l-e)/l*100;w>i&&(i=w)}),{flatBankroll:t,kellyBankroll:e,flatROI:(t-Yi)/Yi*100,kellyROI:(e-Yi)/Yi*100,flatMaxDrawdown:o,kellyMaxDrawdown:i}}function O$(){const r=as(),[e,t]=O.useState(null),[i,o]=O.useState([]),[l,c]=O.useState([]),[u,h]=O.useState(!0),[m,f]=O.useState({}),[x,b]=O.useState({}),[S,w]=O.useState(null),[T,E]=O.useState(null),[A,_]=O.useState(null);O.useEffect(()=>{B()},[]);async function B(){try{const I=Jr(mr(St,"bets"),$n("status","==","COMPLETED"),$d("timestamp","desc")),L=Os(I,M=>{const j=M.docs.map(Ae=>({docId:Ae.id,...Ae.data()})).filter(Ae=>Ae.prediction?.rating!=="C"&&Ae.prediction?.rating!=="B"&&Ae.bet?.market!=="TOTAL"&&!Ae.bet?.market?.includes("TOTAL"));if(j.length===0){t({totalBets:0,wins:0,losses:0,pushes:0,winRate:0,roi:0,profit:0,predictionAccuracy:0,predictionsTracked:0,correctPredictions:0}),h(!1);return}const F=j.filter(Ae=>Ae.result?.outcome==="WIN").length,z=j.filter(Ae=>Ae.result?.outcome==="LOSS").length,P=j.filter(Ae=>Ae.result?.outcome==="PUSH").length,V=j.reduce((Ae,fe)=>Ae+(fe.result?.profit||0),0),N=j.filter(Ae=>Ae.result?.winner&&Ae.prediction?.awayWinProb!==void 0&&Ae.prediction?.homeWinProb!==void 0),Z=N.filter(Ae=>(Ae.prediction.homeWinProb>Ae.prediction.awayWinProb?"HOME":"AWAY")===Ae.result.winner).length,Q=N.length>0?Z/N.length*100:0,U=V*10/Yi*100;t({totalBets:j.length,wins:F,losses:z,pushes:P,winRate:F+z>0?F/(F+z)*100:0,roi:U,profit:V,predictionAccuracy:Q,predictionsTracked:N.length,correctPredictions:Z});const K={};j.forEach(Ae=>{const fe=Ae.bet?.market||"UNKNOWN";K[fe]||(K[fe]={bets:0,wins:0,losses:0,profit:0}),K[fe].bets++,Ae.result?.outcome==="WIN"&&K[fe].wins++,Ae.result?.outcome==="LOSS"&&K[fe].losses++,K[fe].profit+=Ae.result?.profit||0}),Object.keys(K).forEach(Ae=>{const fe=K[Ae],Ue=fe.profit*10;fe.roi=fe.bets>0?Ue/Yi*100:0,fe.winRate=fe.wins+fe.losses>0?fe.wins/(fe.wins+fe.losses)*100:0}),f(K);const X={};j.forEach(Ae=>{const fe=Ae.prediction?.rating||"UNKNOWN";X[fe]||(X[fe]={bets:0,wins:0,losses:0,profit:0}),X[fe].bets++,Ae.result?.outcome==="WIN"&&X[fe].wins++,Ae.result?.outcome==="LOSS"&&X[fe].losses++,X[fe].profit+=Ae.result?.profit||0}),Object.keys(X).forEach(Ae=>{const fe=X[Ae];fe.roi=fe.bets>0?fe.profit/fe.bets*100:0,fe.winRate=fe.wins+fe.losses>0?fe.wins/(fe.wins+fe.losses)*100:0}),b(X);const re=[...j].sort((Ae,fe)=>(Ae.timestamp||0)-(fe.timestamp||0)),me=re.filter(Ae=>Ae.bet?.market==="MONEYLINE"),ke=VT(re),te=VT(me);w({all:{...ke,bets:re.length},moneyline:{...te,bets:me.length}}),c(j);const le=[5,10,15,20];let ve=null,xe=-1/0;le.forEach(Ae=>{if(j.length>=Ae){const fe=j.slice(0,Ae),Ue=fe.reduce((We,kt)=>We+(kt.result?.profit||0),0);if(Ue>xe){xe=Ue;const We=fe.filter(Ve=>Ve.result?.outcome==="WIN").length,kt=fe.filter(Ve=>Ve.result?.outcome==="LOSS").length;ve={size:Ae,wins:We,losses:kt,record:`${We}-${kt}`,winRate:We+kt>0?We/(We+kt)*100:0,profit:Ue,streak:fe.map(Ve=>Ve.result?.outcome==="WIN"?"W":Ve.result?.outcome==="LOSS"?"L":"P"),count:Ae}}}}),ve&&E(ve);const ue=new Date,Re=ue.toISOString().split("T")[0],Te=new Date(ue);Te.setDate(ue.getDate()-ue.getDay()+(ue.getDay()===0?-6:1));const $e=Te.toISOString().split("T")[0],Ke=new Date(ue.getFullYear(),ue.getMonth(),1).toISOString().split("T")[0],et=j.filter(Ae=>Ae.date===Re),Tt=j.filter(Ae=>Ae.date>=$e),Dt=j.filter(Ae=>Ae.date>=Ke),Ce=Ae=>{const fe=Ae.filter(Ve=>Ve.result?.outcome==="WIN").length,Ue=Ae.filter(Ve=>Ve.result?.outcome==="LOSS").length,We=Ae.reduce((Ve,J)=>Ve+(J.result?.profit||0),0),kt=fe+Ue>0?fe/(fe+Ue)*100:0;return{count:Ae.length,wins:fe,losses:Ue,profit:We,winRate:kt,record:`${fe}-${Ue}`}};_({today:Ce(et),week:Ce(Tt),month:Ce(Dt)});const ot=[...j].sort((Ae,fe)=>{const Ue=(fe.date||"").localeCompare(Ae.date||"");return Ue!==0?Ue:(fe.timestamp||0)-(Ae.timestamp||0)});o(ot.slice(0,20)),h(!1)},M=>{console.error("Error loading performance data:",M),h(!1)});return()=>L()}catch(I){console.error("Error setting up performance subscription:",I),h(!1)}}return u?n.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("div",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading performance data..."})]}):!e||e.totalBets===0?n.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"1.5rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:" No bet data yet"}),n.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Start tracking bets to see performance metrics"})]}):n.jsxs("div",{className:"performance-dashboard",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("button",{onClick:()=>r("/"),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"8px",color:"var(--color-text-primary)",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"1.5rem"},onMouseEnter:I=>{I.currentTarget.style.background="linear-gradient(135deg, rgba(212, 175, 55, 0.25) 0%, rgba(59, 130, 246, 0.25) 100%)",I.currentTarget.style.borderColor="rgba(212, 175, 55, 0.5)",I.currentTarget.style.transform="translateX(-4px)"},onMouseLeave:I=>{I.currentTarget.style.background="linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)",I.currentTarget.style.borderColor="rgba(212, 175, 55, 0.3)",I.currentTarget.style.transform="translateX(0)"},children:[n.jsx(gE,{size:18,strokeWidth:2.5}),"Back to Today's Games"]}),n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:"Model Performance"}),n.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Institutional-grade analytics delivering consistent edge"})]}),n.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem 1.25rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",display:"flex",alignItems:"start",gap:"0.75rem"},children:[n.jsx("div",{style:{fontSize:"1.25rem"},children:""}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#60A5FA",marginBottom:"0.25rem"},children:"Updated Quality Standards"}),n.jsxs("div",{style:{fontSize:"0.813rem",color:"var(--color-text-secondary)",lineHeight:"1.5"},children:[n.jsx("strong",{children:"B-rated bets are no longer recommended."})," Our minimum threshold is now ",n.jsx("strong",{children:"2.5% EV (B+ or higher)"})," for more selective, higher-quality picks. Historical B-rated bets remain in the data but are excluded from all metrics shown here."]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[n.jsx(Sg,{icon:n.jsx(fr,{size:24,color:"#10B981"}),label:"Betting Win Rate",value:`${e.winRate.toFixed(1)}%`,target:`${e.wins}-${e.losses} record`,status:e.winRate>=55?"good":"warning"}),n.jsx(Sg,{icon:n.jsx(ar,{size:24,color:"#D4AF37"}),label:"ML ROI",value:m.MONEYLINE?`+${m.MONEYLINE.roi.toFixed(1)}%`:"N/A",target:m.MONEYLINE?`On ${m.MONEYLINE.bets} bets`:"",status:"good"}),n.jsx(Sg,{icon:n.jsx(C1,{size:24,color:"#10B981"}),label:"Total Profit",value:`+${e.profit.toFixed(2)}u`,target:`$${(e.profit*100).toFixed(0)} (at $100/unit)`,status:e.profit>0?"good":"warning"}),n.jsx(Sg,{icon:n.jsx(ou,{size:24,color:"#8B5CF6"}),label:"Bets Tracked",value:e.totalBets,target:"2025-26 season"})]}),T&&T.count>=5&&n.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[n.jsx(Tm,{size:24,color:"#D4AF37"}),n.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:["Last ",T.size," Bets"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"1rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:"Record"}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)"},children:T.record})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:"Win Rate"}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T.winRate>=60?"#10B981":"var(--color-text-primary)"},children:[T.winRate.toFixed(1),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:"Profit"}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T.profit>=0?"#10B981":"#EF4444"},children:[T.profit>=0?"+":"",T.profit.toFixed(2),"u"]})]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginBottom:"0.5rem"},children:"Recent Streak (newest to oldest)"}),n.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:T.streak.map((I,L)=>n.jsx("div",{style:{width:"2rem",height:"2rem",borderRadius:"0.375rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"0.875rem",background:I==="W"?"rgba(16, 185, 129, 0.2)":I==="L"?"rgba(239, 68, 68, 0.2)":"rgba(107, 114, 128, 0.2)",color:I==="W"?"#10B981":I==="L"?"#EF4444":"#9CA3AF",border:`1px solid ${I==="W"?"#10B981":I==="L"?"#EF4444":"#6B7280"}`},title:I==="W"?"Win":I==="L"?"Loss":"Push",children:I},L))})]})]}),A&&(A.week.count>0||A.month.count>0)&&n.jsxs("div",{className:"elevated-card",style:{padding:"2rem",marginBottom:"2rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.05) 0%, rgba(59, 130, 246, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none"}}),n.jsxs("div",{style:{position:"relative",zIndex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",padding:"0.75rem",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(212, 175, 55, 0.3)"},children:n.jsx(Wn,{size:24,color:"#1A202C"})}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"800",color:"var(--color-text-primary)",margin:0,letterSpacing:"-0.02em"},children:"Profit Timeline"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",margin:"0.25rem 0 0 0"},children:"Track performance by time period for transparency"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:[n.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.3)",backdropFilter:"blur(10px)",border:"2px solid rgba(212, 175, 55, 0.3)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden",transition:"all 0.3s ease",cursor:"default"},onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-4px)",I.currentTarget.style.boxShadow="0 12px 24px rgba(212, 175, 55, 0.2)",I.currentTarget.style.borderColor="rgba(212, 175, 55, 0.5)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow="none",I.currentTarget.style.borderColor="rgba(212, 175, 55, 0.3)"},children:[n.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#D4AF37",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:" This Month"}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Total Profit"}),n.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:A.month.profit>=0?"#10B981":"#EF4444",lineHeight:"1",textShadow:A.month.profit>=0?"0 0 20px rgba(16, 185, 129, 0.3)":"0 0 20px rgba(239, 68, 68, 0.3)"},children:[A.month.profit>=0?"+":"",A.month.profit.toFixed(2),"u"]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Record"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)"},children:A.month.record})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Win Rate"}),n.jsxs("div",{style:{fontSize:"1rem",fontWeight:"700",color:A.month.winRate>=52?"#10B981":"var(--color-text-primary)"},children:[A.month.winRate.toFixed(1),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Bets"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)"},children:A.month.count})]})]})]}),n.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.3)",backdropFilter:"blur(10px)",border:A.week.profit<0?"2px solid rgba(239, 68, 68, 0.5)":"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden",transition:"all 0.3s ease",cursor:"default",boxShadow:A.week.profit<0?"0 0 24px rgba(239, 68, 68, 0.2)":"none"},onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-4px)",I.currentTarget.style.boxShadow=A.week.profit<0?"0 12px 24px rgba(239, 68, 68, 0.3)":"0 12px 24px rgba(59, 130, 246, 0.2)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow=A.week.profit<0?"0 0 24px rgba(239, 68, 68, 0.2)":"none"},children:[n.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:A.week.profit<0?"#EF4444":"#3B82F6",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:n.jsx("span",{children:" This Week"})}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Total Profit"}),n.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:A.week.profit>=0?"#10B981":"#EF4444",lineHeight:"1",textShadow:A.week.profit>=0?"0 0 20px rgba(16, 185, 129, 0.3)":"0 0 20px rgba(239, 68, 68, 0.3)"},children:[A.week.profit>=0?"+":"",A.week.profit.toFixed(2),"u"]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Record"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)"},children:A.week.record})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Win Rate"}),n.jsxs("div",{style:{fontSize:"1rem",fontWeight:"700",color:A.week.winRate>=52?"#10B981":"var(--color-text-primary)"},children:[A.week.winRate.toFixed(1),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Bets"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)"},children:A.week.count})]})]})]}),A.today.count>0&&n.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.3)",backdropFilter:"blur(10px)",border:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden",transition:"all 0.3s ease",cursor:"default"},onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-4px)",I.currentTarget.style.boxShadow="0 12px 24px rgba(16, 185, 129, 0.2)",I.currentTarget.style.borderColor="rgba(16, 185, 129, 0.5)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow="none",I.currentTarget.style.borderColor="rgba(16, 185, 129, 0.3)"},children:[n.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:" Today"}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Total Profit"}),n.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:A.today.profit>=0?"#10B981":"#EF4444",lineHeight:"1",textShadow:A.today.profit>=0?"0 0 20px rgba(16, 185, 129, 0.3)":"0 0 20px rgba(239, 68, 68, 0.3)"},children:[A.today.profit>=0?"+":"",A.today.profit.toFixed(2),"u"]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Record"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)"},children:A.today.record})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Win Rate"}),n.jsxs("div",{style:{fontSize:"1rem",fontWeight:"700",color:A.today.winRate>=52?"#10B981":"var(--color-text-primary)"},children:[A.today.winRate.toFixed(1),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Bets"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)"},children:A.today.count})]})]})]})]})]})]}),S&&m.MONEYLINE&&n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Moneyline Performance"}),n.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10B981"},children:" MONEYLINE PICKS"}),n.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"rgba(16, 185, 129, 0.2)",color:"#10B981",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"700"},children:"ELITE"})]}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",color:"#10B981",marginBottom:"0.25rem"},children:["+",m.MONEYLINE.roi.toFixed(1),"%"]}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:["ROI on ",m.MONEYLINE.bets," bets"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Win Rate"}),n.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10B981"},children:[m.MONEYLINE.winRate.toFixed(1),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"Profit"}),n.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10B981"},children:["+",m.MONEYLINE.profit.toFixed(2),"u"]})]})]}),S.moneyline&&n.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",marginBottom:"0.5rem"},children:"Hypothetical Bankroll ($500 start)"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem"},children:[n.jsxs("span",{children:["Flat Betting: ",n.jsxs("strong",{style:{color:"#10B981"},children:["$",S.moneyline.flatBankroll.toFixed(0)]})]}),n.jsxs("span",{children:["Kelly: ",n.jsxs("strong",{style:{color:"#10B981"},children:["$",S.moneyline.kellyBankroll.toFixed(0)]})]})]})]})]}),n.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[n.jsx("strong",{children:" Note:"})," Totals betting was disabled Oct 31, 2025. Analysis showed public data insufficient for consistent edge. Focus remains on elite moneyline performance."]})]}),S&&n.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[n.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(C1,{size:20}),"Bankroll Simulation: Kelly Criterion vs Flat Betting"]}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginBottom:"1.5rem"},children:"Starting with $500, comparing fixed $10 bets vs quarter-Kelly variable sizing"}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Market"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Flat Final"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Flat ROI"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Kelly Final"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Kelly ROI"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Winner"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[n.jsx("td",{style:{padding:"0.75rem",fontWeight:"600"},children:"All Markets"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:S.all.bets}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:["$",S.all.flatBankroll.toFixed(2)]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:S.all.flatROI>0?"#10B981":"#EF4444"},children:[S.all.flatROI>0?"+":"",S.all.flatROI.toFixed(2),"%"]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:["$",S.all.kellyBankroll.toFixed(2)]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:S.all.kellyROI>0?"#10B981":"#EF4444"},children:[S.all.kellyROI>0?"+":"",S.all.kellyROI.toFixed(2),"%"]}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:S.all.flatBankroll>S.all.kellyBankroll?" Flat":" Kelly"})]}),n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(16, 185, 129, 0.05)"},children:[n.jsx("td",{style:{padding:"0.75rem",fontWeight:"600",color:"#10B981"},children:"Moneyline"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:S.moneyline.bets}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"700"},children:["$",S.moneyline.flatBankroll.toFixed(2)]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:"#10B981",fontWeight:"700"},children:["+",S.moneyline.flatROI.toFixed(2),"%"]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:["$",S.moneyline.kellyBankroll.toFixed(2)]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:"#10B981"},children:["+",S.moneyline.kellyROI.toFixed(2),"%"]}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:S.moneyline.flatBankroll>S.moneyline.kellyBankroll?" Flat":" Kelly"})]})]})]})}),n.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[n.jsx("strong",{children:"Key Insight:"})," Moneyline model delivers consistent profitability with elite 64.7% win rate. Kelly sizing optimizes risk-adjusted returns for long-term bankroll growth."]})]}),n.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:"Record Breakdown"}),n.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Wins"}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10B981"},children:e.wins})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Losses"}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#EF4444"},children:e.losses})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Pushes"}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#64748B"},children:e.pushes})]})]})]}),n.jsx(F$,{bets:l}),Object.keys(m).length>0&&n.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[n.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Ls,{size:20}),"Performance by Market"]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Market"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Win Rate"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"ROI"}),n.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),n.jsx("tbody",{children:Object.entries(m).map(([I,L])=>n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[n.jsx("td",{style:{padding:"0.75rem",fontWeight:"500"},children:I}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:L.bets}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:[L.winRate.toFixed(1),"%"]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:L.roi>0?"#10B981":"#EF4444"},children:[L.roi>0?"+":"",L.roi.toFixed(1),"%"]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:L.profit>0?"#10B981":"#EF4444"},children:[L.profit>0?"+":"",L.profit.toFixed(2),"u"]})]},I))})]})})]}),Object.keys(x).length>0&&n.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[n.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Tm,{size:20}),"Performance by Rating"]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Rating"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Win Rate"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"ROI"}),n.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),n.jsx("tbody",{children:Object.entries(x).sort((I,L)=>{const M={"A+":0,A:1,"B+":2,B:3,C:4};return(M[I[0]]||99)-(M[L[0]]||99)}).map(([I,L])=>n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[n.jsx("td",{style:{padding:"0.75rem",fontWeight:"600"},children:I}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:L.bets}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:[L.winRate.toFixed(1),"%"]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:L.roi>0?"#10B981":"#EF4444"},children:[L.roi>0?"+":"",L.roi.toFixed(1),"%"]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:L.profit>0?"#10B981":"#EF4444"},children:[L.profit>0?"+":"",L.profit.toFixed(2),"u"]})]},I))})]})})]}),n.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem"},children:[n.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Wn,{size:20}),"Recent Bets"]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Date"}),n.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Game"}),n.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bet"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Odds"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"EV%"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Rating"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Score"}),n.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Result"}),n.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),n.jsx("tbody",{children:i.map((I,L)=>n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[n.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:I.date}),n.jsxs("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:[I.game?.awayTeam," @ ",I.game?.homeTeam]}),n.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:I.bet?.pick}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[I.bet?.odds>0?"+":"",I.bet?.odds]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[I.prediction?.evPercent?.toFixed(1),"%"]}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:n.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",background:I.prediction?.rating==="A+"?"rgba(16, 185, 129, 0.2)":I.prediction?.rating==="A"?"rgba(5, 150, 105, 0.2)":I.prediction?.rating==="B+"?"rgba(14, 165, 233, 0.2)":"rgba(139, 92, 246, 0.2)",color:I.prediction?.rating==="A+"?"#10B981":I.prediction?.rating==="A"?"#059669":I.prediction?.rating==="B+"?"#0EA5E9":"#8B5CF6"},children:I.prediction?.rating})}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[I.result?.awayScore," - ",I.result?.homeScore]}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:n.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",background:I.result?.outcome==="WIN"?"rgba(16, 185, 129, 0.2)":I.result?.outcome==="LOSS"?"rgba(239, 68, 68, 0.2)":"rgba(100, 116, 139, 0.2)",color:I.result?.outcome==="WIN"?"#10B981":I.result?.outcome==="LOSS"?"#EF4444":"#64748B"},children:I.result?.outcome})}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:I.result?.profit>0?"#10B981":I.result?.profit<0?"#EF4444":"#64748B"},children:[I.result?.profit>0?"+":"",I.result?.profit?.toFixed(2),"u"]})]},L))})]})})]})]})}const M$=()=>{const[r,e]=O.useState(!1);return O.useEffect(()=>{const t=()=>{e(window.innerWidth<=640)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},children:[n.jsx("div",{style:{padding:r?"2rem 1rem 1rem":"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsx("h1",{style:{marginBottom:"0.5rem",fontSize:r?"1.5rem":"2rem"},children:" Methodology"}),n.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:r?"0.875rem":"0.938rem",lineHeight:"1.6"},children:"Mathematical foundations and betting strategies behind NHL Savant analytics. All formulas are transparent, verifiable, and backed by real data."})]})}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:r?"1rem":"2rem"},children:[n.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:r?"1.5rem":"2rem"},children:[n.jsxs("h2",{style:{marginBottom:r?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:r?"1.125rem":"1.25rem"},children:[n.jsx(Wl,{size:r?18:20}),"Expected Goals (xG) Analysis"]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is xG?"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Expected Goals (xG) is a statistical metric that measures the quality of scoring chances. Each shot is assigned a probability of becoming a goal based on historical data, considering factors like shot location, type, and game situation."})]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Per-60 Normalization"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:"To compare teams fairly, we normalize all metrics to a 60-minute rate:"}),n.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:r?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:r?"0.75rem":"1rem",color:"var(--color-accent)",overflowX:"auto"},children:"xG per 60 = (xGoals / Ice Time in seconds)  3600"})]}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Why xG Matters for Betting"}),n.jsxs("ul",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.8",paddingLeft:r?"1.25rem":"1.5rem"},children:[n.jsx("li",{children:"Reveals true team quality beyond results influenced by luck"}),n.jsx("li",{children:"Identifies teams with strong underlying metrics but poor record (value bets)"}),n.jsx("li",{children:"Predicts future performance more accurately than goals scored"}),n.jsx("li",{children:"Situational xG (5v5, PP, PK) exposes specific strengths and weaknesses"})]})]})]}),n.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:r?"1.5rem":"2rem"},children:[n.jsxs("h2",{style:{marginBottom:r?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:r?"1.125rem":"1.25rem"},children:[n.jsx(QP,{size:r?18:20}),"PDO & Regression Theory"]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"PDO Calculation"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:'PDO measures "puck luck" by combining shooting percentage and save percentage:'}),n.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:r?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:r?"0.75rem":"1rem",color:"var(--color-accent)",overflowX:"auto"},children:"PDO = (Goals For / Shots For)  100 + (1 - Goals Against / Shots Against)  100"})]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Regression to the Mean"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Over time, PDO regresses toward 100.0 (league average). Teams with PDO significantly above or below 100 are experiencing unsustainable luck and will likely regress."})]}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Betting Applications"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:r?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:r?"0.75rem":"1rem"},children:[n.jsxs("div",{style:{padding:r?"0.875rem":"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:"4px"},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--color-danger)",fontSize:r?"0.938rem":"1rem"},children:"PDO > 102"}),n.jsx("div",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:"Overperforming due to luck. Bet UNDER or AGAINST."})]}),n.jsxs("div",{style:{padding:r?"0.875rem":"1rem",backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--color-success)",borderRadius:"4px"},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--color-success)",fontSize:r?"0.938rem":"1rem"},children:"PDO < 98"}),n.jsx("div",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:"Underperforming due to bad luck. Bet OVER or WITH."})]})]})]})]}),n.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:r?"1.5rem":"2rem"},children:[n.jsxs("h2",{style:{marginBottom:r?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:r?"1.125rem":"1.25rem"},children:[n.jsx(Wl,{size:r?18:20}),"Expected Value (EV) Calculation"]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is EV?"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Expected Value (EV) measures the average amount you can expect to win or lose per bet over the long term. A positive EV indicates a profitable bet over time, while negative EV indicates a losing bet."})]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Formula"}),n.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:r?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:r?"0.75rem":"1rem",color:"var(--color-accent)",marginBottom:"1rem",overflowX:"auto"},children:"EV = (P_model  Total Return) - Stake"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Where P_model is your model's win probability, Total Return is your stake plus winnings, and Stake is your bet amount."})]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Example"}),n.jsxs("div",{className:"methodology-example",style:{backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:r?"0.875rem":"1rem"},children:[n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:[n.jsx("strong",{children:"Scenario:"})," Our model gives Team A a 55% win probability, but the market odds are +150 (implied 40% probability)."]}),n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:[n.jsx("strong",{children:"Calculation:"})," On a $100 bet at +150 odds, total return is $250 ($100 stake + $150 winnings)."]}),n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:["EV = (0.55  $250) - $100 = $137.50 - $100 = ",n.jsx("strong",{style:{color:"var(--color-success)"},children:"+$37.50"})]}),n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-success)",lineHeight:"1.6"},children:[n.jsx("strong",{children:"Result:"})," This is a +37.5% EV bet  excellent value!"]})]})]}),n.jsx("div",{style:{backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--color-success)",borderRadius:"4px",padding:r?"0.875rem":"1rem"},children:n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:[n.jsx("strong",{style:{color:"var(--color-success)"},children:"Betting Rule:"})," Only bet when EV > 0. The higher the EV percentage, the better the opportunity."]})})]}),n.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:r?"1.5rem":"2rem"},children:[n.jsxs("h2",{style:{marginBottom:r?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:r?"1.125rem":"1.25rem"},children:[n.jsx(Wl,{size:r?18:20}),"Kelly Criterion (Stake Sizing)"]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is Kelly?"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"The Kelly Criterion is a formula for determining the optimal bet size to maximize long-term growth while minimizing risk of ruin. It calculates what percentage of your bankroll to wager on a positive EV bet."})]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Formula"}),n.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:r?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:r?"0.75rem":"1rem",color:"var(--color-accent)",marginBottom:"0.5rem",overflowX:"auto"},children:"f* = (bp - q) / b"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:"Where:"}),n.jsxs("ul",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",paddingLeft:r?"1.25rem":"1.5rem"},children:[n.jsxs("li",{children:[n.jsx("code",{children:"b"})," = decimal odds - 1 (e.g., +150  1.5)"]}),n.jsxs("li",{children:[n.jsx("code",{children:"p"})," = your model's win probability"]}),n.jsxs("li",{children:[n.jsx("code",{children:"q"})," = 1 - p (loss probability)"]})]})]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Fractional Kelly (Common Approach)"}),n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:["Full Kelly can be aggressive and lead to large swings. A common approach is ",n.jsx("strong",{children:"25% Kelly"})," (Quarter Kelly) for more conservative, sustainable bankroll growth."]}),n.jsx("div",{className:"methodology-example",style:{backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:r?"0.875rem":"1rem"},children:n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[n.jsx("strong",{children:"Example:"})," If Kelly suggests 8% of bankroll, Quarter Kelly would be 2% (8%  0.25). On a $1,000 bankroll, that's $20 instead of $80."]})})]}),n.jsx("div",{style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:"4px",padding:r?"0.875rem":"1rem"},children:n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:[n.jsx("strong",{style:{color:"var(--color-danger)"},children:"Risk Management:"})," Never bet more than 5% of your bankroll on a single game, even if Kelly suggests higher. This protects against model errors and variance."]})})]}),n.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:r?"1.5rem":"2rem"},children:[n.jsxs("h2",{style:{marginBottom:r?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:r?"1.125rem":"1.25rem"},children:[n.jsx(Wl,{size:r?18:20}),"Game Total Prediction Model"]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"How We Predict Game Totals"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Our model uses score-adjusted expected goals (xG), applies PDO regression, and weights both teams' offense and defense (55% offense / 45% defense) to predict individual team scores and total goals."})]}),n.jsxs("div",{style:{marginBottom:r?"1rem":"1.5rem"},children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Key Components"}),n.jsxs("ul",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",paddingLeft:r?"1.25rem":"1.5rem"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Score-Adjusted xG:"})," Removes bias from teams protecting leads or chasing deficits"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"PDO Regression:"})," Adjusts for unsustainable luck (high/low shooting % or save %)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"5v5 Weight:"})," 77% of game time (46.2 minutes)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"PP/PK Weight:"})," 23% of game time (13.8 minutes)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Home Ice:"})," +5% win probability boost"]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:r?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Win Probability"}),n.jsx("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"We use a logistic regression model that accounts for xG differential, PDO regression, and home-ice advantage to estimate moneyline win probabilities. This S-curve approach reflects real-world probabilities better than linear models."})]})]}),n.jsx("div",{style:{padding:r?"0.875rem":"1rem",backgroundColor:"rgba(212, 175, 55, 0.05)",border:"1px solid var(--color-accent)",borderRadius:"4px"},children:n.jsxs("p",{style:{fontSize:r?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[n.jsx("strong",{style:{color:"var(--color-accent)"},children:"Verify the Math:"})," All calculations are performed in"," ",n.jsx("code",{style:{fontFamily:"Monaco, Consolas, monospace",backgroundColor:"var(--color-card)",padding:"0.125rem 0.25rem",borderRadius:"2px",fontSize:r?"0.75rem":"0.813rem"},children:"src/utils/dataProcessing.js"})," ","and"," ",n.jsx("code",{style:{fontFamily:"Monaco, Consolas, monospace",backgroundColor:"var(--color-card)",padding:"0.125rem 0.25rem",borderRadius:"2px",fontSize:r?"0.75rem":"0.813rem"},children:"src/utils/edgeCalculator.js"}),". ","Every metric displayed uses real CSV data with transparent, verifiable calculations. Audit them in the Data Inspector page."]})})]})]})},L$=()=>n.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-nhl-gold mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Loading NHL Data"}),n.jsx("p",{className:"text-gray-400",children:"Processing advanced statistics..."})]})});class N$ extends Xd.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-md text-center",children:[n.jsx(ai,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"An unexpected error occurred. Please refresh the page."}),!1,n.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-yellow-400 text-gray-900 font-bold rounded hover:bg-yellow-300 transition",children:"Refresh Page"})]})}):this.props.children}}const $$=()=>n.jsx("footer",{style:{backgroundColor:"rgba(0, 0, 0, 0.4)",borderTop:"1px solid var(--color-border)",padding:"2rem 1rem",marginTop:"4rem"},children:n.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, rgba(251, 191, 36, 0.05) 100%)",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"8px",padding:"1rem 1.25rem",marginBottom:"1.5rem",display:"flex",gap:"1rem",alignItems:"flex-start"},children:[n.jsx(ai,{size:20,color:"#F59E0B",style:{flexShrink:0,marginTop:"2px"}}),n.jsx("div",{style:{flex:1},children:n.jsxs("p",{style:{fontSize:"0.813rem",lineHeight:"1.6",color:"var(--color-text-primary)",margin:0,fontWeight:"600"},children:[n.jsx("strong",{children:"Entertainment & Educational Use Only:"})," All content is for informational purposes and does not constitute betting, financial, or investment advice. Sports betting involves financial risk. Only bet what you can afford to lose. You are solely responsible for your betting decisions."]})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"1.5rem"},children:[n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"NHL Savant"}),n.jsx("p",{style:{fontSize:"0.813rem",lineHeight:"1.6",color:"var(--color-text-muted)",margin:0},children:"Advanced NHL analytics and statistical modeling for sports enthusiasts. Not a gambling operator or sportsbook."})]}),n.jsxs("div",{children:[n.jsxs("h3",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Hg,{size:16}),"Legal"]}),n.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[n.jsx("li",{style:{marginBottom:"0.5rem"},children:n.jsx(vt,{to:"/disclaimer",style:{fontSize:"0.813rem",color:"#3B82F6",textDecoration:"none",transition:"color 0.2s"},onMouseEnter:r=>r.target.style.color="#60A5FA",onMouseLeave:r=>r.target.style.color="#3B82F6",children:"Terms & Disclaimer"})}),n.jsx("li",{style:{marginBottom:"0.5rem"},children:n.jsx("a",{href:"https://www.ncpgambling.org",target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.813rem",color:"#3B82F6",textDecoration:"none",transition:"color 0.2s"},onMouseEnter:r=>r.target.style.color="#60A5FA",onMouseLeave:r=>r.target.style.color="#3B82F6",children:"Responsible Gambling"})})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--color-text-primary)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(TB,{size:16}),"Need Help?"]}),n.jsxs("p",{style:{fontSize:"0.813rem",lineHeight:"1.6",color:"var(--color-text-muted)",margin:"0 0 0.5rem 0"},children:[n.jsx("strong",{children:"Gambling Problem?"}),n.jsx("br",{}),"Call 1-800-GAMBLER"]}),n.jsx("p",{style:{fontSize:"0.813rem",lineHeight:"1.6",color:"var(--color-text-muted)",margin:0},children:"Available 24/7 for confidential support"})]})]}),n.jsx("div",{style:{paddingTop:"1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center",textAlign:"center"},children:n.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",maxWidth:"800px",lineHeight:"1.6"},children:[n.jsxs("p",{style:{margin:"0 0 0.5rem 0"},children:[n.jsx("strong",{children:"18+/21+ Only."})," Verify sports betting is legal in your jurisdiction before placing wagers."]}),n.jsxs("p",{style:{margin:0},children:[" ",new Date().getFullYear()," NHL Savant. All rights reserved. We are not affiliated with the NHL or any sportsbook operator."]})]})})]})}),V$=()=>n.jsx("div",{style:{minHeight:"100vh",backgroundColor:"var(--color-background)",padding:"2rem 1rem"},children:n.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",backgroundColor:"var(--color-bg-secondary)",borderRadius:"12px",border:"1px solid var(--color-border)",padding:"2rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem",paddingBottom:"1.5rem",borderBottom:"2px solid var(--color-border)"},children:[n.jsx(Hg,{size:36,color:"#F59E0B"}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"2rem",fontWeight:"900",color:"var(--color-text-primary)",margin:0,marginBottom:"0.5rem"},children:"Legal Disclaimer & Terms of Use"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",margin:0},children:"Last Updated: October 24, 2025"})]})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 100%)",border:"2px solid rgba(251, 191, 36, 0.4)",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem",display:"flex",gap:"1rem"},children:[n.jsx(ai,{size:24,color:"#F59E0B",style:{flexShrink:0,marginTop:"2px"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"800",color:"#F59E0B",margin:"0 0 0.75rem 0",textTransform:"uppercase",letterSpacing:"0.05em"},children:" IMPORTANT: READ BEFORE USE"}),n.jsxs("p",{style:{fontSize:"0.938rem",lineHeight:"1.6",color:"var(--color-text-primary)",margin:0},children:[n.jsx("strong",{children:"All sports betting involves financial risk. Only bet what you can afford to lose."})," The content on this site is for entertainment and educational purposes only and does not constitute betting, financial, or investment advice. You are solely responsible for your betting decisions."]})]})]}),n.jsx(Es,{icon:Ep,title:"1. Nature of Service",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx("strong",{children:"NHL Savant is an information and analytics service, NOT a gambling operator."})}),n.jsx("p",{children:"We provide:"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Statistical analysis"})," of NHL games using publicly available data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Predictive models"})," based on historical performance metrics"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Educational content"})," about sports analytics and probability"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Data visualization"})," tools for understanding team performance"]})]}),n.jsx("p",{children:"We do NOT:"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Accept bets, wagers, or any form of payment for gambling"}),n.jsx("li",{children:"Operate as a sportsbook or gambling platform"}),n.jsx("li",{children:"Guarantee wins, profits, or specific outcomes"}),n.jsx("li",{children:"Provide personalized betting advice tailored to your situation"})]})]})}),n.jsx(Es,{icon:sn,title:"2. Entertainment & Educational Purpose",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx("strong",{children:"ALL CONTENT IS FOR ENTERTAINMENT AND EDUCATIONAL PURPOSES ONLY."})}),n.jsx("p",{children:'Our predictions, analyses, and "recommended picks" are:'}),n.jsxs("ul",{children:[n.jsx("li",{children:"Algorithmic outputs based on statistical models"}),n.jsx("li",{children:"Historical performance indicators, not future guarantees"}),n.jsx("li",{children:"Educational demonstrations of sports analytics methodology"}),n.jsx("li",{children:"NOT betting advice, financial advice, or professional recommendations"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"You should NOT rely on our content as the sole basis for any betting decision."})," Always conduct your own research and analysis."]})]})}),n.jsx(Es,{icon:ai,title:"3. No Guarantees or Warranties",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx("strong",{children:"WE MAKE NO REPRESENTATIONS OR WARRANTIES OF ANY KIND."})}),n.jsx("p",{children:"Specifically:"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Past performance does not guarantee future results."})," Historical accuracy does not predict future predictions."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"No betting system is foolproof."})," All sports outcomes involve uncertainty and randomness."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"We do not guarantee accuracy."})," Our models are imperfect and subject to error."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"We do not guarantee profitability."})," Following our picks may result in financial losses."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Data may be incomplete or incorrect."})," We rely on third-party data sources that may contain errors."]})]}),n.jsx("p",{children:"Any implied or expressed warranties, including fitness for a particular purpose, are expressly disclaimed."})]})}),n.jsx(Es,{icon:Hg,title:"4. Limitation of Liability",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx("strong",{children:"YOU USE THIS SERVICE ENTIRELY AT YOUR OWN RISK."})}),n.jsx("p",{children:n.jsx("strong",{children:"NHL Savant, its operators, developers, and affiliates accept NO LIABILITY OR RESPONSIBILITY for:"})}),n.jsxs("ul",{children:[n.jsx("li",{children:"Any financial losses incurred from betting decisions"}),n.jsx("li",{children:"Inaccurate predictions or incorrect data"}),n.jsx("li",{children:"Lost profits or missed opportunities"}),n.jsx("li",{children:"Technical errors, downtime, or service interruptions"}),n.jsx("li",{children:"Damages resulting from reliance on our content"}),n.jsx("li",{children:"Any indirect, incidental, consequential, or punitive damages"})]}),n.jsx("p",{children:n.jsx("strong",{children:"You are solely and exclusively responsible for:"})}),n.jsxs("ul",{children:[n.jsx("li",{children:"All betting decisions and their consequences"}),n.jsx("li",{children:"Verifying the accuracy of information before use"}),n.jsx("li",{children:"Determining your own risk tolerance"}),n.jsx("li",{children:"Managing your bankroll and finances"})]})]})}),n.jsx(Es,{icon:Ep,title:"5. User Responsibilities",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx("strong",{children:"By using NHL Savant, you agree to:"})}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Age Requirement:"})," Be at least 21 years of age (or 18+ if legal in your jurisdiction)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Legal Compliance:"})," Verify that sports betting is legal in your jurisdiction before placing any wagers"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Responsible Gambling:"})," Only bet what you can afford to lose without impacting your financial well-being"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Independent Judgment:"})," Make your own betting decisions based on your own research and analysis"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Risk Acceptance:"})," Accept full responsibility for all outcomes of your betting activity"]})]}),n.jsx("p",{children:n.jsx("strong",{children:"If you have a gambling problem:"})}),n.jsxs("ul",{children:[n.jsx("li",{children:"Call 1-800-GAMBLER (1-800-426-2537)"}),n.jsxs("li",{children:["Visit ",n.jsx("a",{href:"https://www.ncpgambling.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6"},children:"ncpgambling.org"})]}),n.jsx("li",{children:"Seek professional help immediately"})]})]})}),n.jsx(Es,{icon:sn,title:"6. Terminology & Interpretation",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx("strong",{children:'When we use terms like "recommended bet," "best bet," or "value pick," we mean:'})}),n.jsxs("ul",{children:[n.jsx("li",{children:"Our statistical model identifies a probability discrepancy"}),n.jsx("li",{children:"This is an analytical observation, NOT a directive to bet"}),n.jsx("li",{children:"These are educational examples of statistical analysis in action"}),n.jsx("li",{children:'You should interpret these as "model projections" or "data-driven analysis"'})]}),n.jsx("p",{children:"These terms do NOT constitute advice, recommendations, or guarantees of any kind."})]})}),n.jsx(Es,{icon:Ep,title:"7. State & Jurisdiction Laws",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx("strong",{children:"Sports betting laws vary by state and country."})}),n.jsx("p",{children:n.jsx("strong",{children:"Your Responsibilities:"})}),n.jsxs("ul",{children:[n.jsx("li",{children:"Verify sports betting is legal in your jurisdiction"}),n.jsx("li",{children:"Comply with all local, state, and federal gambling laws"}),n.jsx("li",{children:"Use only licensed and regulated sportsbooks in your area"}),n.jsx("li",{children:"Report any gambling winnings for tax purposes as required"})]}),n.jsx("p",{children:n.jsx("strong",{children:"NHL Savant does NOT:"})}),n.jsxs("ul",{children:[n.jsx("li",{children:"Provide legal advice about gambling laws"}),n.jsx("li",{children:"Verify your eligibility to place bets"}),n.jsx("li",{children:"Assume responsibility for your legal compliance"})]})]})}),n.jsx(Es,{icon:sn,title:"8. Changes to Terms",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"We reserve the right to modify these terms at any time. Changes become effective immediately upon posting. Your continued use of NHL Savant constitutes acceptance of the updated terms."}),n.jsx("p",{children:"Check this page regularly for updates."})]})}),n.jsx(Es,{icon:Hg,title:"9. Indemnification",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx("strong",{children:"You agree to indemnify and hold harmless NHL Savant, its operators, developers, and affiliates from:"})}),n.jsxs("ul",{children:[n.jsx("li",{children:"Any claims arising from your use of this service"}),n.jsx("li",{children:"Your betting decisions and their consequences"}),n.jsx("li",{children:"Your violation of these terms"}),n.jsx("li",{children:"Your violation of applicable laws"})]})]})}),n.jsx("div",{style:{marginTop:"3rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:"10px",textAlign:"center"},children:n.jsx("p",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"By using NHL Savant, you acknowledge that you have read, understood, and agree to these terms."})}),n.jsx("div",{style:{marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid var(--color-border)",textAlign:"center",fontSize:"0.813rem",color:"var(--color-text-muted)"},children:n.jsxs("p",{children:["Questions? Contact us at: ",n.jsx("strong",{children:"legal@nhlsavant.com"})]})})]})}),Es=({icon:r,title:e,content:t})=>n.jsxs("div",{style:{marginBottom:"2rem",paddingBottom:"2rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[n.jsx(r,{size:24,color:"#10B981"}),n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"800",color:"var(--color-text-primary)",margin:0},children:e})]}),n.jsxs("div",{style:{fontSize:"0.938rem",lineHeight:"1.7",color:"var(--color-text-primary)"},children:[t,n.jsx("style",{children:`
        p { margin: 0 0 1rem 0; }
        p:last-child { margin-bottom: 0; }
        ul { margin: 0.5rem 0 1rem 0; padding-left: 1.5rem; }
        li { margin-bottom: 0.5rem; }
        strong { color: var(--color-text-primary); font-weight: 700; }
        a { color: #3B82F6; text-decoration: none; }
        a:hover { text-decoration: underline; }
      `})]})]});function W$({awayTeam:r,homeTeam:e,prediction:t}){const[i,o]=O.useState([]),[l,c]=O.useState(!0),[u,h]=O.useState(0),[m,f]=O.useState(0),[x,b]=O.useState(0),[S,w]=O.useState(!1);O.useEffect(()=>{r&&e&&T()},[r?.name,e?.name,t]);const T=async()=>{c(!0);try{const R=await n$(r.name,e.name);if(!R||R.length===0)if(t){const j=E(r.name,e.name,t);o(j)}else o([]);else o(R);h(0)}catch(R){if(console.error("Error loading insights:",R),t){const j=E(r.name,e.name,t);o(j)}else o([])}finally{c(!1)}},E=(R,j,F)=>{const z=F.homeWinProb>F.awayWinProb?j:R,P=Math.max(F.homeWinProb,F.awayWinProb),V=z===j?R:j,N=Math.min(F.homeWinProb,F.awayWinProb),Z=F.awayScore+F.homeScore,Q=[];Q.push({hook:`${z} ${P>=60?"Heavy Favorite":"Slight Edge"} at ${P.toFixed(0)}%`,headline:"Model Prediction",analysis:`Our advanced analytics give ${z} a ${P.toFixed(1)}% chance to win. Projected score: ${R} ${F.awayScore.toFixed(1)} - ${j} ${F.homeScore.toFixed(1)}. ${P>=60?`Strong confidence in ${z} based on recent performance metrics.`:`Close matchup with ${V} having a real chance at ${N.toFixed(1)}%.`}`,data:`Win Prob: ${P.toFixed(1)}%  Total: ${Z.toFixed(1)} goals`});const H=Z>=6.5?"High-Scoring Affair":Z<=5.5?"Defensive Battle":"Moderate Scoring";return Q.push({hook:`Expect a ${H}`,headline:"Scoring Projection",analysis:`Model projects ${Z.toFixed(1)} total goals. ${R} expected to score ${F.awayScore.toFixed(1)} while ${j} projects at ${F.homeScore.toFixed(1)}. ${Z>=6.5?"Both offenses showing strong metrics lately.":Z<=5.5?"Goaltending and defense should dominate this matchup.":"Balanced offensive and defensive matchup expected."}`,data:`Projected Total: ${Z.toFixed(1)} goals`}),Q.push({hook:`${V} Underdog Value?`,headline:"Betting Angle",analysis:`While ${z} is favored, ${V} at ${N.toFixed(1)}% creates potential value if odds are favorable. ${Math.abs(P-N)<15?"This is a closer game than many expect.":`${z} has clear advantages but upsets happen.`} Consider both ML and total plays based on current market odds.`,data:`${V}: ${N.toFixed(1)}%  Spread potential`}),Q},A=R=>{f(R.targetTouches[0].clientX)},_=R=>{b(R.targetTouches[0].clientX)},B=()=>{if(!m||!x)return;const R=m-x,j=R>50,F=R<-50;j&&u<i.length-1&&h(u+1),F&&u>0&&h(u-1),f(0),b(0)},I=()=>{u<i.length-1&&h(u+1)},L=()=>{u>0&&h(u-1)},M=R=>{const j=`${R.hook}

${R.headline}

${R.analysis}

 ${R.bettingAngle}

Analysis by NHL Savant`;navigator.clipboard.writeText(j).then(()=>{w(!0),setTimeout(()=>w(!1),2e3)})};return l?n.jsx("div",{className:"elevated-card",style:{marginBottom:"2rem",padding:"2rem",textAlign:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.15)",borderRadius:"10px"},children:n.jsx("div",{style:{color:"#64748B",fontSize:"1rem"},children:"Loading expert analysis..."})}):!i||i.length===0?n.jsxs("div",{className:"elevated-card",style:{marginBottom:"2rem",padding:"2rem",textAlign:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.15)",borderRadius:"10px"},children:[n.jsx("div",{style:{color:"#F1F5F9",fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:"Waiting for Expert Articles"}),n.jsx("div",{style:{color:"#94A3B8",fontSize:"0.9375rem",maxWidth:"500px",margin:"0 auto",lineHeight:1.6},children:"Expert analysis articles are generated daily before games. Check back closer to game time for professional insights."})]}):n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[n.jsx("h2",{style:{fontSize:"2rem",fontWeight:"900",background:"linear-gradient(135deg, #10B981 0%, #3B82F6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:"Expert Analysis"}),n.jsx("p",{style:{fontSize:"0.9375rem",color:"#94A3B8",maxWidth:"600px",margin:"0 auto"},children:"Bold takes and hidden edges from our analytics team"})]}),n.jsxs("div",{style:{position:"relative"},children:[i.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:L,disabled:u===0,style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:u===0?"rgba(71, 85, 105, 0.5)":"rgba(16, 185, 129, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:u===0?"not-allowed":"pointer",opacity:u===0?.3:1,transition:"all 0.2s ease",boxShadow:u===0?"none":"0 4px 12px rgba(16, 185, 129, 0.3)"},className:"desktop-only-arrow",children:n.jsx(dx,{size:24,color:"#FFFFFF",strokeWidth:2.5})}),n.jsx("button",{onClick:I,disabled:u===i.length-1,style:{position:"absolute",right:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:u===i.length-1?"rgba(71, 85, 105, 0.5)":"rgba(16, 185, 129, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:u===i.length-1?"not-allowed":"pointer",opacity:u===i.length-1?.3:1,transition:"all 0.2s ease",boxShadow:u===i.length-1?"none":"0 4px 12px rgba(16, 185, 129, 0.3)"},className:"desktop-only-arrow",children:n.jsx(ux,{size:24,color:"#FFFFFF",strokeWidth:2.5})})]}),n.jsx("div",{onTouchStart:A,onTouchMove:_,onTouchEnd:B,style:{display:"flex",transition:"transform 0.3s ease",transform:`translateX(-${u*100}%)`,touchAction:"pan-y"},children:i.map((R,j)=>n.jsx("div",{style:{minWidth:"100%",padding:"0 0.5rem"},children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid",borderImage:"linear-gradient(135deg, rgba(16, 185, 129, 0.4), rgba(59, 130, 246, 0.4)) 1",borderRadius:"16px",padding:"2rem",minHeight:"400px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #10B981, #3B82F6, #8B5CF6)",opacity:.8}}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(245, 158, 11, 0.2))",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"20px",padding:"0.5rem 1rem",marginBottom:"1.5rem"},children:[n.jsx(lu,{size:16,color:"#EF4444"}),n.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"800",color:"#EF4444",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Hot Take"})]}),R.hook&&n.jsxs("div",{style:{fontSize:"1.375rem",fontWeight:"900",color:"#F1F5F9",lineHeight:1.3,marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"2px solid rgba(16, 185, 129, 0.2)"},children:['"',R.hook,'"']}),R.headline&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[n.jsx(ar,{size:20,color:"#10B981"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#10B981",margin:0,textTransform:"uppercase",letterSpacing:"0.02em"},children:R.headline})]}),R.analysis&&n.jsx("div",{style:{fontSize:"1rem",lineHeight:1.8,color:"#E2E8F0",marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid rgba(148, 163, 184, 0.1)"},children:R.analysis}),R.bettingAngle&&n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[n.jsx(dB,{size:18,color:"#10B981"}),n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"800",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.05em"},children:"The Edge"})]}),n.jsx("div",{style:{fontSize:"0.9375rem",lineHeight:1.6,color:"#F1F5F9",fontWeight:"500"},children:R.bettingAngle})]}),n.jsxs("button",{onClick:()=>M(R),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:S?"rgba(16, 185, 129, 0.2)":"rgba(59, 130, 246, 0.15)",border:S?"1px solid rgba(16, 185, 129, 0.5)":"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"0.75rem 1.25rem",color:S?"#10B981":"#3B82F6",fontSize:"0.875rem",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",width:"100%",justifyContent:"center"},children:[n.jsx(I1,{size:16}),S?"Copied to Clipboard!":"Share This Analysis"]})]})},j))})]}),i.length>1&&n.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1.5rem"},children:i.map((R,j)=>n.jsx("button",{onClick:()=>h(j),style:{width:u===j?"32px":"8px",height:"8px",borderRadius:"4px",background:u===j?"linear-gradient(135deg, #10B981 0%, #3B82F6 100%)":"rgba(148, 163, 184, 0.3)",border:"none",cursor:"pointer",transition:"all 0.3s ease",padding:0},"aria-label":`Go to insight ${j+1}`},j))}),n.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-only-arrow {
            display: none !important;
          }
        }
      `})]})}function G$({games:r,selectedGame:e,onGameSelect:t,predictions:i}){const[o,l]=O.useState(0),c=O.useRef(null),[u,h]=O.useState(!1),[m,f]=O.useState(!0);O.useEffect(()=>{if(e){const T=r.findIndex(E=>E.awayTeam===e.awayTeam&&E.homeTeam===e.homeTeam);T!==-1&&T!==o&&(l(T),x(T))}},[e,r]);const x=T=>{const E=c.current;if(!E)return;const A=E.children[0]?.offsetWidth||0;E.scrollTo({left:T*(A+16),behavior:"smooth"})},b=()=>{const T=c.current;if(!T)return;const E=T.scrollLeft,A=T.scrollWidth-T.clientWidth;h(E>10),f(E<A-10);const _=T.children[0]?.offsetWidth||0,I=Math.round(E/(_+16));I!==o&&I>=0&&I<r.length&&(l(I),t(r[I]))},S=()=>{if(o<r.length-1){const T=o+1;l(T),x(T),t(r[T])}},w=()=>{if(o>0){const T=o-1;l(T),x(T),t(r[T])}};return O.useEffect(()=>{const T=c.current;if(T)return T.addEventListener("scroll",b),b(),()=>T.removeEventListener("scroll",b)},[o]),!r||r.length===0?null:n.jsxs("div",{style:{marginBottom:"2rem",position:"relative"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#F1F5F9",margin:0},children:"Select Game"}),n.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#64748B"},children:[r.length," game",r.length!==1?"s":""," today"]})]}),n.jsxs("div",{style:{position:"relative"},children:[u&&r.length>1&&n.jsx("button",{onClick:w,className:"desktop-arrow",style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:"rgba(16, 185, 129, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:n.jsx(dx,{size:24,color:"#FFFFFF",strokeWidth:2.5})}),m&&r.length>1&&n.jsx("button",{onClick:S,className:"desktop-arrow",style:{position:"absolute",right:"-20px",top:"50%",transform:"translateY(-50%)",zIndex:10,background:"rgba(16, 185, 129, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:n.jsx(ux,{size:24,color:"#FFFFFF",strokeWidth:2.5})}),n.jsx("div",{ref:c,className:"hide-scrollbar",style:{display:"flex",gap:"1rem",overflowX:"auto",scrollSnapType:"x mandatory",WebkitOverflowScrolling:"touch",padding:"0.5rem 0"},children:r.map((T,E)=>{const A=i?.[E],_=E===o,B=A?.awayWinProb||50,I=A?.homeWinProb||50,L=B>I?T.awayTeam:T.homeTeam,M=Math.max(B,I);return n.jsxs("div",{onClick:()=>{l(E),x(E),t(T)},style:{minWidth:"calc(100% - 1rem)",maxWidth:"calc(100% - 1rem)",scrollSnapAlign:"start",background:_?"linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.15) 100%)":"linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.8) 100%)",border:_?"2px solid rgba(16, 185, 129, 0.5)":"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"16px",padding:"1.25rem",cursor:"pointer",transition:"all 0.3s ease",boxShadow:_?"0 8px 24px rgba(16, 185, 129, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"900",color:_?"#10B981":"#F1F5F9"},children:[T.awayTeam," @ ",T.homeTeam]}),T.gameTime&&T.gameTime!=="TBD"&&n.jsxs("div",{style:{background:_?"rgba(16, 185, 129, 0.2)":"rgba(100, 116, 139, 0.2)",border:`1px solid ${_?"rgba(16, 185, 129, 0.3)":"rgba(100, 116, 139, 0.3)"}`,borderRadius:"8px",padding:"0.375rem 0.75rem",fontSize:"0.8125rem",fontWeight:"700",color:_?"#10B981":"#94A3B8",whiteSpace:"nowrap"},children:[n.jsx(zo,{size:12,style:{display:"inline",marginRight:"0.25rem",verticalAlign:"middle"}}),T.gameTime]})]}),A&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:_?"rgba(16, 185, 129, 0.1)":"rgba(30, 41, 59, 0.6)",borderRadius:"10px",padding:"0.875rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(xE,{size:18,color:_?"#10B981":"#64748B"}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:"600",color:"#94A3B8",textTransform:"uppercase",marginBottom:"0.125rem"},children:"Projected Winner"}),n.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"900",color:_?"#10B981":"#F1F5F9"},children:L})]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:"600",color:"#94A3B8",textTransform:"uppercase",marginBottom:"0.125rem"},children:"Win Prob"}),n.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"900",color:_?"#10B981":"#F1F5F9"},children:[M.toFixed(0),"%"]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsx("div",{style:{fontSize:"0.6875rem",fontWeight:"600",color:"#94A3B8",textTransform:"uppercase",marginBottom:"0.125rem"},children:"Score"}),n.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"900",color:_?"#10B981":"#F1F5F9"},children:[A.awayScore.toFixed(1),"-",A.homeScore.toFixed(1)]})]})]}),_&&n.jsx("div",{style:{marginTop:"0.75rem",textAlign:"center",fontSize:"0.75rem",fontWeight:"700",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.05em"},children:" Viewing This Game"})]},`${T.awayTeam}-${T.homeTeam}`)})})]}),r.length>1&&n.jsx("div",{className:"mobile-dots",style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1rem"},children:r.map((T,E)=>n.jsx("button",{onClick:()=>{l(E),x(E),t(r[E])},style:{width:o===E?"32px":"8px",height:"8px",borderRadius:"4px",background:o===E?"rgba(16, 185, 129, 0.8)":"rgba(148, 163, 184, 0.3)",border:"none",cursor:"pointer",transition:"all 0.3s ease",padding:0},"aria-label":`Go to game ${E+1}`},E))}),n.jsx("style",{children:`
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .hide-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        
        @media (max-width: 768px) {
          .desktop-arrow {
            display: none !important;
          }
        }
        
        @media (min-width: 769px) {
          .mobile-dots {
            display: none !important;
          }
        }
      `})]})}function H$(r){const[e,t]=O.useState(null),[i,o]=O.useState([]),[l,c]=O.useState(!0);O.useEffect(()=>{if(!r||!r.dataProcessor||!r.todaysGames){c(!1);return}try{const h=r.todaysGames.map(m=>{let f="TBD";if(m.time&&typeof m.time=="string")f=m.time;else if(m.gameTime&&typeof m.gameTime=="string")f=m.gameTime;else if(m.startTimeUTC)try{f=new Date(m.startTimeUTC).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZone:"America/New_York"})+" ET"}catch{console.warn("Failed to parse startTimeUTC:",m.startTimeUTC)}return{awayTeam:m.away||m.awayTeam,homeTeam:m.home||m.homeTeam||m.homeCode,gameTime:f,date:an(),...m}});o(h),h.length>0&&!e&&t(h[0]),c(!1)}catch(h){console.error("Error loading games:",h),c(!1)}},[r?.dataProcessor,r?.todaysGames,e,r]);const u=O.useMemo(()=>!i.length||!r?.dataProcessor?[]:i.map(h=>{try{const m=r.dataProcessor,f=h.awayGoalie||`${h.awayTeam} Goalie`,x=h.homeGoalie||`${h.homeTeam} Goalie`,b=m.predictTeamScore(h.awayTeam,h.homeTeam,!1,f),S=m.predictTeamScore(h.homeTeam,h.awayTeam,!0,x),w=m.calculatePoissonWinProb(S,b)*100,T=100-w;return{awayScore:b,homeScore:S,awayWinProb:T,homeWinProb:w}}catch(m){return console.error("Error calculating prediction for game:",h,m),null}}).filter(Boolean),[i,r?.dataProcessor]);return l?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",color:"#94A3B8",fontSize:"1.125rem"},children:"Loading hot takes..."}):i.length===0?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",color:"#94A3B8",fontSize:"1.125rem",textAlign:"center",padding:"2rem"},children:"No games scheduled today"}):n.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto"},children:[n.jsx("h1",{style:{fontSize:"2rem",fontWeight:"800",background:"linear-gradient(135deg, #F1F5F9 0%, #94A3B8 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"1rem"},children:"Hot Takes "}),n.jsx("p",{style:{fontSize:"0.9375rem",color:"#94A3B8",marginBottom:"1.5rem",lineHeight:1.6},children:"Expert analysis and insights for today's matchups. Bold takes and hidden edges from our advanced analytics."}),n.jsx(G$,{games:i,selectedGame:e,onGameSelect:t,predictions:u}),e&&n.jsx(W$,{awayTeam:{name:e.awayTeam},homeTeam:{name:e.homeTeam}}),n.jsx("style",{children:`
        @media (max-width: 768px) {
          .matchup-insights-container {
            padding: 1rem 0.75rem !important;
          }
          h1 {
            font-size: 1.5rem !important;
          }
          h2 {
            font-size: 1.25rem !important;
          }
          h4 {
            font-size: 0.9375rem !important;
          }
          p {
            font-size: 0.8125rem !important;
          }
        }
      `})]})}function h0(){const r="nhl_savant_user_id";let e=localStorage.getItem(r);return e||(e=`anon_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem(r,e),console.log(" Generated new anonymous user ID:",e)),e}function U$(r,e){return`${r}_${e}`}async function q$(r){const e=h0(),t=U$(e,r.betId),i={id:t,userId:e,betId:r.betId,bookmarkedAt:Date.now(),game:{awayTeam:r.game.awayTeam,homeTeam:r.game.homeTeam,gameTime:r.game.gameTime,gameDate:r.game.gameDate||r.betId.split("_")[0]},bet:{market:r.bet.market,pick:r.bet.pick,odds:r.bet.odds,evPercent:r.bet.evPercent,rating:r.bet.rating,team:r.bet.team||null}};try{return await iI(mr(St,"user_bookmarks"),i),console.log(" Bookmarked pick:",t),t}catch(o){throw console.error(" Error bookmarking pick:",o),o}}async function Y$(r){const e=h0();try{const t=Jr(mr(St,"user_bookmarks"),$n("userId","==",e),$n("betId","==",r)),i=await ci(t);if(!i.empty){const o=i.docs.map(l=>nI(l.ref));await Promise.all(o),console.log(" Removed bookmark:",r)}}catch(t){throw console.error(" Error removing bookmark:",t),t}}function K$(r){const e=h0(),t=Jr(mr(St,"user_bookmarks"),$n("userId","==",e),$d("bookmarkedAt","desc"));return Os(t,i=>{const o=i.docs.map(l=>({docId:l.id,...l.data()}));r(o)},i=>{console.error(" Error in bookmark subscription:",i)})}function WT(r,e){return e.some(t=>t.betId===r)}function X$(){const[r,e]=O.useState([]),[t,i]=O.useState(!0),[o,l]=O.useState(null);O.useEffect(()=>{i(!0);const m=K$(f=>{e(f),i(!1)});return()=>m()},[]);const c=O.useCallback(async m=>{try{WT(m.betId,r)?await Y$(m.betId):await q$(m)}catch(f){console.error("Error toggling bookmark:",f),l(f)}},[r]),u=O.useCallback(m=>WT(m,r),[r]),h=h0();return{bookmarks:r,loading:t,error:o,toggleBookmark:c,isBookmarked:u,userId:h,bookmarkCount:r.length}}function Q$(r,e){if(!r||r.length===0)return{totalBookmarked:0,wins:0,losses:0,pushes:0,pending:0,totalProfit:0,roi:0,winRate:0,completedCount:0};let t=0,i=0,o=0,l=0,c=0;r.forEach(x=>{let b=null;if(x.result&&x.result.outcome)b=x.result;else{const S=e.find(w=>w.id===x.betId);S&&S.status==="COMPLETED"&&S.result&&(b=S.result)}if(b){c++;const S=b.outcome,w=b.profit||0;S==="WIN"?t++:S==="LOSS"?i++:S==="PUSH"&&o++,l+=w}});const u=r.length-c,h=t+i,m=h>0?t/h*100:0,f=c>0?l/c*100:0;return{totalBookmarked:r.length,wins:t,losses:i,pushes:o,pending:u,totalProfit:l,roi:f,winRate:m,completedCount:c}}function Z$(r,e,t=[]){const i=[],o=[],l=[];return r.forEach(c=>{let u=null;if(c.result&&c.result.outcome)u=c.result;else{const m=e.find(f=>f.id===c.betId);m&&m.status==="COMPLETED"&&m.result&&(u=m.result)}if(u){l.push({...c,result:u});return}const h=t.find(m=>m.awayTeam===c.game.awayTeam&&m.homeTeam===c.game.homeTeam||m.away===c.game.awayTeam&&m.home===c.game.homeTeam);if(h&&(h.status==="LIVE"||h.status==="In Progress")){o.push({...c,liveScore:h});return}i.push(c)}),{upcoming:i,live:o,completed:l}}function s3(r){return r===0?"0.00u":`${r>0?"+":""}${r.toFixed(2)}u`}const J$=({isBookmarked:r=!1,onClick:e,size:t="medium",disabled:i=!1})=>{const[o,l]=O.useState(!1),[c,u]=O.useState(!1),h={small:22,medium:28,large:32},m={small:"0.5rem",medium:"0.625rem",large:"0.75rem"},f=h[t]||28,x=m[t]||"0.625rem",b=S=>{S.stopPropagation(),!i&&(l(!0),setTimeout(()=>l(!1),300),e?.())};return n.jsxs("button",{onClick:b,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),disabled:i,"aria-label":r?"Remove from My Picks":"Save to My Picks",title:r?"Remove from My Picks":"Save to My Picks",style:{background:r?"linear-gradient(135deg, rgba(212, 175, 55, 0.25) 0%, rgba(212, 175, 55, 0.15) 100%)":c?"rgba(212, 175, 55, 0.12)":"rgba(212, 175, 55, 0.08)",border:r?"2px solid rgba(212, 175, 55, 0.5)":"2px solid rgba(212, 175, 55, 0.3)",borderRadius:"10px",padding:x,cursor:i?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:o?"scale(1.15) rotate(12deg)":c?"scale(1.08)":"scale(1)",opacity:i?.5:1,boxShadow:r?"0 6px 16px rgba(212, 175, 55, 0.4), 0 0 24px rgba(212, 175, 55, 0.25) inset":c?"0 4px 12px rgba(212, 175, 55, 0.3)":"0 2px 6px rgba(212, 175, 55, 0.15)",position:"relative",overflow:"hidden",animation:!r&&!i?"subtle-pulse 3s ease-in-out infinite":"none"},children:[r&&n.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.3), transparent)",animation:"shimmer 3s infinite"}}),n.jsx($g,{size:f,fill:r?"#D4AF37":"none",stroke:r?"#D4AF37":"rgba(212, 175, 55, 0.7)",strokeWidth:2.5,style:{transition:"all 0.3s ease",position:"relative",zIndex:1,filter:r?"drop-shadow(0 0 6px rgba(212, 175, 55, 0.7))":"none"}}),n.jsx("style",{children:`
        @keyframes shimmer {
          0% { left: -100%; }
          100% { left: 200%; }
        }
        
        @keyframes subtle-pulse {
          0%, 100% { 
            border-color: rgba(212, 175, 55, 0.3);
            box-shadow: 0 2px 6px rgba(212, 175, 55, 0.15);
          }
          50% { 
            border-color: rgba(212, 175, 55, 0.45);
            box-shadow: 0 4px 10px rgba(212, 175, 55, 0.25);
          }
        }
      `})]})},eV=()=>{const{bookmarks:r,toggleBookmark:e,loading:t}=X$(),{bets:i,loading:o}=t3(),{liveScores:l}=e3(),[c,u]=O.useState(!1);O.useEffect(()=>{const f=()=>{u(window.innerWidth<=640)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]);const h=Q$(r,i),m=Z$(r,i,l);return t||o?n.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:c?"1rem":"2rem 1rem"},children:n.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[n.jsx("div",{className:"loading-spinner",style:{margin:"0 auto 1rem",width:"40px",height:"40px",border:"3px solid rgba(212, 175, 55, 0.3)",borderTopColor:"#D4AF37",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),n.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Loading your picks..."})]})}):r.length===0?n.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:c?"1rem":"2rem 1rem"},children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(59, 130, 246, 0.08) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"16px",padding:c?"2rem 1rem":"3rem 2rem",textAlign:"center"},children:[n.jsx($g,{size:64,color:"rgba(212, 175, 55, 0.4)",style:{margin:"0 auto 1.5rem"}}),n.jsx("h1",{style:{fontSize:c?"1.5rem":"2rem",fontWeight:"700",marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Start Tracking Your Picks"}),n.jsx("p",{style:{fontSize:c?"0.938rem":"1rem",color:"var(--color-text-secondary)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"Bookmark your favorite recommendations to track their performance automatically. We'll calculate your wins, losses, and total profit."}),n.jsxs(vt,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.875rem 1.5rem",background:"linear-gradient(135deg, #D4AF37 0%, #B8941F 100%)",color:"#000",borderRadius:"8px",fontWeight:"600",textDecoration:"none",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(212, 175, 55, 0.3)"},onMouseEnter:f=>{f.currentTarget.style.transform="translateY(-2px)",f.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.4)"},onMouseLeave:f=>{f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="0 4px 12px rgba(212, 175, 55, 0.3)"},children:[n.jsx(fr,{size:20}),"View Today's Games"]})]})}):n.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:c?"1rem":"2rem 1rem"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"16px",padding:c?"1.5rem":"2rem",marginBottom:"2rem",position:"relative",overflow:"hidden"},children:[n.jsx("div",{className:"shine-overlay"}),n.jsxs("div",{style:{position:"relative",zIndex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[n.jsx($g,{size:32,color:"#D4AF37"}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:c?"1.75rem":"2.5rem",fontWeight:"800",marginBottom:"0.25rem",color:"#D4AF37",letterSpacing:"-0.02em"},children:"My Picks"}),n.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:c?"0.875rem":"0.938rem"},children:"Track your bookmarked recommendations"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:c?"repeat(2, 1fr)":"repeat(4, 1fr)",gap:c?"1rem":"1.5rem"},children:[n.jsx(wg,{icon:n.jsx($g,{size:20}),label:"Total Picks",value:h.totalBookmarked,color:"#D4AF37"}),n.jsx(wg,{icon:n.jsx(fr,{size:20}),label:"Win Rate",value:h.completedCount>0?`${h.winRate.toFixed(1)}%`:"-",color:h.winRate>=52?"#10B981":"#64748B",subtitle:`${h.wins}-${h.losses}${h.pushes>0?`-${h.pushes}`:""}`}),n.jsx(wg,{icon:n.jsx(ar,{size:20}),label:"Total Profit",value:s3(h.totalProfit),color:h.totalProfit>0?"#10B981":h.totalProfit<0?"#EF4444":"#64748B"}),n.jsx(wg,{icon:n.jsx(Wn,{size:20}),label:"Pending",value:h.pending,color:"#3B82F6"})]})]})]}),m.upcoming.length>0&&n.jsx(Zp,{title:"Upcoming Games",picks:m.upcoming,type:"upcoming",toggleBookmark:e,isMobile:c}),m.live.length>0&&n.jsx(Zp,{title:"Live Now",picks:m.live,type:"live",toggleBookmark:e,isMobile:c}),m.completed.length>0&&n.jsx(Zp,{title:"Completed",picks:m.completed,type:"completed",toggleBookmark:e,isMobile:c})]})},wg=({icon:r,label:e,value:t,color:i,subtitle:o})=>n.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"1.25rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:i},children:[r,n.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--color-text-secondary)"},children:e})]}),n.jsx("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:i,lineHeight:"1"},children:t}),o&&n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",marginTop:"0.25rem"},children:o})]}),Zp=({title:r,picks:e,type:t,toggleBookmark:i,isMobile:o})=>n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsxs("h2",{style:{fontSize:o?"1.25rem":"1.5rem",fontWeight:"700",marginBottom:"1rem",color:"var(--color-text-primary)"},children:[r," (",e.length,")"]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:o?"1fr":"repeat(auto-fill, minmax(400px, 1fr))",gap:"1rem"},children:e.map(l=>n.jsx(tV,{pick:l,type:t,toggleBookmark:i,isMobile:o},l.betId))})]}),tV=({pick:r,type:e,toggleBookmark:t,isMobile:i})=>{const o=()=>{t({betId:r.betId,game:r.game,bet:r.bet})};return n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(26, 31, 46, 0.98) 0%, rgba(17, 24, 39, 0.98) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:i?"1rem":"1.25rem",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:l=>{l.currentTarget.style.borderColor="rgba(212, 175, 55, 0.3)",l.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:l=>{l.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",l.currentTarget.style.transform="translateY(0)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:{fontSize:i?"1rem":"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:[r.game.awayTeam," @ ",r.game.homeTeam]}),n.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:r.game.gameTime})]}),n.jsx(J$,{isBookmarked:!0,onClick:o,size:"small"})]}),n.jsxs("div",{style:{background:"rgba(212, 175, 55, 0.08)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"8px",padding:i?"0.75rem":"1rem",marginBottom:"1rem"},children:[n.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#D4AF37",marginBottom:"0.5rem"},children:[" ",r.bet.pick]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.813rem",color:"var(--color-text-secondary)"},children:[n.jsxs("span",{children:["Odds: ",r.bet.odds>0?"+":"",r.bet.odds]}),n.jsxs("span",{children:["EV: +",r.bet.evPercent.toFixed(1),"%"]}),n.jsx(ON,{evPercent:r.bet.evPercent,size:"small"})]})]}),e==="completed"&&r.result&&n.jsxs("div",{style:{padding:"0.75rem",borderRadius:"8px",background:r.result.outcome==="WIN"?"rgba(16, 185, 129, 0.1)":r.result.outcome==="LOSS"?"rgba(239, 68, 68, 0.1)":"rgba(100, 116, 139, 0.1)",border:r.result.outcome==="WIN"?"1px solid rgba(16, 185, 129, 0.3)":r.result.outcome==="LOSS"?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(100, 116, 139, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:r.result.outcome==="WIN"?"#10B981":r.result.outcome==="LOSS"?"#EF4444":"#64748B"},children:r.result.outcome}),n.jsx("span",{style:{fontSize:"1rem",fontWeight:"700",color:r.result.profit>0?"#10B981":r.result.profit<0?"#EF4444":"#64748B"},children:s3(r.result.profit)})]}),e==="live"&&r.liveScore&&n.jsxs("div",{style:{padding:"0.75rem",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#EF4444",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{className:"live-dot"}),"LIVE"]}),n.jsxs("span",{style:{fontSize:"1rem",fontWeight:"700",color:"var(--color-text-primary)"},children:[r.liveScore.awayScore," - ",r.liveScore.homeScore]})]})]})};function rV(){const[r,e]=O.useState({totalBets:0,wins:0,losses:0,pushes:0,profit:0,roi:0,winRate:0,nhl:{bets:0,profit:0,roi:0,winRate:0},cbb:{bets:0,profit:0,roi:0,winRate:0},last7Days:{profit:0,roi:0,bets:0},streak:"N/A"}),[t,i]=O.useState(!0);return O.useEffect(()=>{let o=[],l=[],c=null,u=null;const h=()=>{const b=[...o,...l].filter(ue=>ue.result?.outcome);if(b.length===0){i(!1);return}const S=b.filter(ue=>ue.result.outcome==="WIN").length,w=b.filter(ue=>ue.result.outcome==="LOSS").length,T=b.filter(ue=>ue.result.outcome==="PUSH").length,E=b.reduce((ue,Re)=>{const Te=Re.result?.unitsRisked||Re.prediction?.dynamicUnits||Re.prediction?.unitSize||1;return ue+Te},0),A=b.reduce((ue,Re)=>ue+(Re.result?.profit||0),0),_=E>0?A/E*100:0,B=b.length>0?S/b.length*100:0,I=500,L=["A+","A","B+"],M=o.filter(ue=>ue.result?.outcome&&(ue.bet?.market==="MONEYLINE"||ue.bet?.market==="ML")&&(L.includes(ue.prediction?.rating)||L.includes(ue.prediction?.grade)||L.includes(ue.prediction?.qualityGrade))),R=M.filter(ue=>ue.result.outcome==="WIN").length,j=M.reduce((ue,Re)=>ue+(Re.result?.profit||0),0),F=j*10,z=M.length>0?F/I*100:0,P=M.length>0?R/M.length*100:0,V=l.filter(ue=>ue.result?.outcome&&ue.prediction?.spreadBoost>0),N=V.filter(ue=>ue.result.outcome==="WIN").length,Z=V.reduce((ue,Re)=>{const Te=Re.result?.unitsRisked||Re.result?.units||Re.prediction?.dynamicUnits||Re.prediction?.unitSize||1;return ue+Te},0),Q=V.reduce((ue,Re)=>ue+(Re.result?.profit||0),0),H=Z>0?Q/Z*100:0,U=V.length>0?N/V.length*100:0,K=[...b].sort((ue,Re)=>{const Te=new Date(ue.date||ue.game?.date);return new Date(Re.date||Re.game?.date)-Te});let X=0,re=null;for(const ue of K)if(ue.result?.outcome)if(re===null)re=ue.result.outcome,X=1;else if(ue.result.outcome===re)X++;else break;const me=re?`${re.charAt(0)}${X}`:"N/A",ke=new Date;ke.setDate(ke.getDate()-7);const te=b.filter(ue=>new Date(ue.date||ue.game?.date)>=ke),le=te.reduce((ue,Re)=>ue+(Re.result?.profit||0),0),ve=te.reduce((ue,Re)=>{const Te=Re.result?.unitsRisked||Re.prediction?.dynamicUnits||Re.prediction?.unitSize||1;return ue+Te},0),xe=ve>0?le/ve*100:0;e({totalBets:b.length,wins:S,losses:w,pushes:T,profit:A,roi:_,winRate:B,nhl:{bets:M.length,profit:j,roi:z,winRate:P},cbb:{bets:V.length,profit:Q,roi:H,winRate:U},last7Days:{profit:le,roi:xe,bets:te.length},streak:me}),i(!1),console.log(" Combined Stats Updated:",{total:`${b.length} bets, +${A.toFixed(1)}u, ${_.toFixed(1)}% ROI`,nhl:`${M.length} bets, +${j.toFixed(1)}u, ${z.toFixed(1)}% ROI`,cbb_prime:`${V.length} Prime picks, +${Q.toFixed(1)}u, ${H.toFixed(1)}% ROI`})},m=Jr(mr(St,"bets"));c=Os(m,x=>{o=x.docs.map(b=>({id:b.id,...b.data()})),h()},x=>{console.error("Error fetching NHL bets:",x),i(!1)});const f=Jr(mr(St,"basketball_bets"));return u=Os(f,x=>{l=x.docs.map(b=>({id:b.id,...b.data()})),h()},x=>{console.error("Error fetching CBB bets:",x),i(!1)}),()=>{c&&c(),u&&u()}},[]),{stats:r,loading:t}}const nV=[{code:"Savant15",discount:15},{code:"MVP25",discount:25},{code:"NHL40",discount:40},{code:"BANG55",discount:55}],Dl=(r,e)=>{tn&&Zo(tn,r,e)},iV=()=>{as();const{user:r}=ls(),{tier:e,isPremium:t}=Jo(r),{stats:i,loading:o}=rV(),[l,c]=O.useState(!1),[u,h]=O.useState(null),[m,f]=O.useState(!1),[x,b]=O.useState(2),[S,w]=O.useState(null),[T,E]=O.useState(!1);O.useEffect(()=>{(async()=>{try{const{getDailySpins:z,checkAndResetDaily:P}=await Is(async()=>{const{getDailySpins:N,checkAndResetDaily:Z}=await import("./spinTracker-BnSdwEot.js");return{getDailySpins:N,checkAndResetDaily:Z}},__vite__mapDeps([0,1,2,3]));P();const V=await z(r?.uid||null);b(V.remaining)}catch(z){console.error("Error loading spins:",z)}})(),(()=>{const z=localStorage.getItem("nhl_savant_discount_spin");if(z){const P=JSON.parse(z),V=new Date(P.expiresAt);if(V>new Date){const N=Math.floor((V-new Date)/1e3);w({code:P.prize.code,discount:P.prize.discount,timeLeft:N})}}})()},[r]),O.useEffect(()=>{if(!S||S.timeLeft<=0)return;const j=setInterval(()=>{w(F=>!F||F.timeLeft<=1?(localStorage.removeItem("nhl_savant_discount_spin"),null):{...F,timeLeft:F.timeLeft-1})},1e3);return()=>clearInterval(j)},[S?.code]);const A=async j=>{try{const{recordSpin:F}=await Is(async()=>{const{recordSpin:P}=await import("./spinTracker-BnSdwEot.js");return{recordSpin:P}},__vite__mapDeps([0,1,2,3]));await F(r?.uid||null,j),b(P=>Math.max(0,P-1));const z=nV.find(P=>P.code===j);z&&w({code:z.code,discount:z.discount,timeLeft:600}),Dl("pricing_spin_used",{code:j,spins_remaining:x-1})}catch(F){console.error("Error recording spin:",F)}},_=async()=>{if(S?.code)try{await navigator.clipboard.writeText(S.code),E(!0),setTimeout(()=>E(!1),2e3),Dl("discount_code_copied",{code:S.code})}catch(j){console.error("Failed to copy code:",j)}},B=j=>{const F=Math.floor(j/60),z=j%60;return`${F}:${z.toString().padStart(2,"0")}`},I=(j,F)=>`$${(parseFloat(j.replace("$",""))*(1-F/100)).toFixed(2)}`,L=async j=>{if(Dl("pricing_page_click",{tier:j}),!r){h(j),c(!0);return}await px(j,r)},M=["All daily +EV picks with quality grades","Advanced ensemble prediction model","Live win probability tracking","Expert AI analysis & insights","Complete performance & ROI dashboard","Top scorers & player trends","Direct email support","Full model transparency"],R=[{id:"scout",name:"Scout",icon:fr,price:"$7.99",period:"week",trial:"5-day free trial",description:"Test drive, no commitment",priceAnchor:"Less than 1 Starbucks/day",pricePerDay:"$1.14/day",cta:"Start 5-Day Trial",highlight:"Week-to-week flexibility"},{id:"elite",name:"Elite",icon:zo,price:"$25.99",period:"month",trial:"7-day free trial",description:"Best value for monthly",popular:!0,priceAnchor:"Less than 1 coffee/day",pricePerDay:"87/day",savings:"Save $9/month vs weekly",cta:"Start 7-Day Trial",highlight:"Perfect for serious bettors"},{id:"pro",name:"SAVANT PRO",icon:tc,price:"$150",period:"year",trial:"10-day free trial",description:"Maximum savings",priceAnchor:"Less than 1 pizza/month",pricePerDay:"41/day",savings:"Save $161.88/year",badge:"Just $12.50/month",cta:"Start 10-Day Trial",highlight:"Season-long edge"}];return n.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0A0E27 0%, #1A1F3A 50%, #0A0E27 100%)",padding:window.innerWidth<640?"2rem 1rem":"4rem 1.5rem",paddingTop:window.innerWidth<640?"1.5rem":"2rem"},children:[n.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:window.innerWidth<640?"3rem":"4rem"},children:[n.jsxs("h1",{style:{fontSize:window.innerWidth<640?"1.875rem":"3rem",fontWeight:"800",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",margin:"0 0 1rem 0",letterSpacing:"-0.02em",lineHeight:"1.1"},children:["Stop Losing to Parlays.",n.jsx("br",{}),"Start Betting With Real Edge."]}),n.jsxs("p",{style:{fontSize:window.innerWidth<640?"1rem":"1.25rem",color:"rgba(241, 245, 249, 0.8)",maxWidth:"700px",margin:"0 auto 2rem auto",lineHeight:"1.6",padding:window.innerWidth<640?"0 0.5rem":"0"},children:["Premium tools to find +EV, avoid -EV, and hold cappers accountable.",n.jsx("br",{}),"Cancel anytime."]}),n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:window.innerWidth<640?"1rem":"2rem",marginTop:"2rem",padding:window.innerWidth<640?"0 0.5rem":"0"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(ar,{size:window.innerWidth<640?18:20,color:"#10B981"}),n.jsx("span",{style:{color:"#10B981",fontWeight:"600",fontSize:window.innerWidth<640?"0.813rem":"0.938rem"},children:o?"Loading performance...":`NHL: ${i.nhl.roi>=0?"+":""}${i.nhl.roi.toFixed(1)}% ROI | CBB: ${i.cbb.roi>=0?"+":""}${i.cbb.roi.toFixed(1)}% ROI`})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(fr,{size:window.innerWidth<640?18:20,color:"#D4AF37"}),n.jsx("span",{style:{color:"#D4AF37",fontWeight:"600",fontSize:window.innerWidth<640?"0.813rem":"0.938rem"},children:"Tracked Since Oct 2025"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(sn,{size:window.innerWidth<640?18:20,color:"#60A5FA"}),n.jsx("span",{style:{color:"#60A5FA",fontWeight:"600",fontSize:window.innerWidth<640?"0.813rem":"0.938rem"},children:"Free Trial Included"})]})]})]}),!t&&(x>0||S)&&n.jsxs("div",{style:{background:S?"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(212, 175, 55, 0.15) 100%)":"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%)",border:S?"2px solid rgba(16, 185, 129, 0.5)":"2px solid rgba(212, 175, 55, 0.4)",borderRadius:"16px",padding:window.innerWidth<640?"1.5rem":"2rem",marginBottom:"3rem",textAlign:"center",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:S?"linear-gradient(90deg, transparent, #10B981, transparent)":"linear-gradient(90deg, transparent, #D4AF37, transparent)",animation:"shimmer 2s ease-in-out infinite"}}),S?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx(Wd,{size:24,color:"#10B981"}),n.jsxs("h3",{style:{fontSize:window.innerWidth<640?"1.25rem":"1.5rem",fontWeight:"800",background:"linear-gradient(135deg, #10B981 0%, #D4AF37 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},children:[" You Won ",S.discount,"% Off!"]})]}),n.jsx("p",{style:{fontSize:window.innerWidth<640?"0.938rem":"1rem",color:"rgba(241, 245, 249, 0.8)",marginBottom:"1rem",lineHeight:"1.5"},children:"Use your discount code at checkout to save!"}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",background:"rgba(0, 0, 0, 0.4)",padding:"12px 20px",borderRadius:"12px",border:"1px solid rgba(16, 185, 129, 0.4)",marginBottom:"1rem"},children:[n.jsx("span",{style:{fontSize:"0.75rem",color:"#94A3B8",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"CODE:"}),n.jsx("span",{style:{fontSize:window.innerWidth<640?"1.25rem":"1.5rem",fontWeight:"800",color:"#10B981",fontFamily:"monospace",letterSpacing:"0.1em"},children:S.code}),n.jsxs("button",{onClick:_,style:{background:T?"rgba(16, 185, 129, 0.3)":"rgba(255, 255, 255, 0.1)",border:T?"1px solid #10B981":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",color:T?"#10B981":"#F1F5F9",fontSize:"0.875rem",fontWeight:"600"},onMouseEnter:j=>{T||(j.currentTarget.style.background="rgba(255, 255, 255, 0.2)")},onMouseLeave:j=>{T||(j.currentTarget.style.background="rgba(255, 255, 255, 0.1)")},children:[T?n.jsx(au,{size:16}):n.jsx(gx,{size:16}),T?"Copied!":"Copy"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontSize:"0.938rem",color:"#F59E0B",fontWeight:"700"},children:[n.jsx(jm,{size:18}),n.jsxs("span",{children:["Expires in ",B(S.timeLeft)]})]}),x>0&&n.jsxs("button",{onClick:()=>{Dl("pricing_spin_again_click",{spins_remaining:x}),f(!0)},style:{marginTop:"1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"rgba(212, 175, 55, 0.2)",border:"1px solid rgba(212, 175, 55, 0.4)",borderRadius:"8px",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"600",color:"#D4AF37",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="rgba(212, 175, 55, 0.3)"},onMouseLeave:j=>{j.currentTarget.style.background="rgba(212, 175, 55, 0.2)"},children:[" Spin Again (",x," left) - Try for a bigger discount!"]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx(fE,{size:24,color:"#D4AF37"}),n.jsx("h3",{style:{fontSize:window.innerWidth<640?"1.25rem":"1.5rem",fontWeight:"800",background:"linear-gradient(135deg, #D4AF37 0%, #F59E0B 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},children:" Spin for an Exclusive Discount!"})]}),n.jsx("p",{style:{fontSize:window.innerWidth<640?"0.938rem":"1rem",color:"rgba(241, 245, 249, 0.8)",marginBottom:"1rem",lineHeight:"1.5"},children:"Try your luck! Win up to 55% off your subscription."}),n.jsxs("button",{onClick:()=>{Dl("pricing_spin_button_click",{spins_remaining:x}),f(!0)},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, #D4AF37 0%, #B8941F 100%)",border:"none",borderRadius:"12px",padding:window.innerWidth<640?"0.875rem 1.5rem":"1rem 2rem",fontSize:window.innerWidth<640?"1rem":"1.125rem",fontWeight:"700",color:"#0A0E27",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 14px rgba(212, 175, 55, 0.4)"},onMouseEnter:j=>{j.currentTarget.style.transform="translateY(-2px)",j.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.5)"},onMouseLeave:j=>{j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.boxShadow="0 4px 14px rgba(212, 175, 55, 0.4)"},children:[" Spin the Wheel (",x," ",x===1?"spin":"spins"," left)"]}),n.jsxs("p",{style:{fontSize:"0.813rem",color:"rgba(241, 245, 249, 0.5)",marginTop:"0.75rem"},children:[x," spins remaining today  Codes expire in 10 minutes"]})]}),n.jsx("style",{children:`
              @keyframes shimmer {
                0%, 100% { opacity: 0.3; }
                50% { opacity: 1; }
              }
            `})]}),n.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:window.innerWidth<640?"2rem":"2.5rem",fontWeight:"700",color:"#F1F5F9",marginBottom:"0.75rem"},children:"Choose Your Commitment Level"}),n.jsx("p",{style:{fontSize:window.innerWidth<640?"1rem":"1.125rem",color:"rgba(241, 245, 249, 0.7)",maxWidth:"600px",margin:"0 auto 0.5rem auto",lineHeight:"1.6"},children:"Every plan includes everything. Save more with longer commitments."}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"100px",padding:"0.5rem 1rem",fontSize:window.innerWidth<640?"0.813rem":"0.875rem",color:"#D4AF37",fontWeight:"600"},children:[n.jsx(sn,{size:16}),"Cancel anytime  No hidden fees  Instant access"]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<640?"1fr":window.innerWidth<1024?"repeat(auto-fit, minmax(280px, 1fr))":"repeat(3, 1fr)",gap:window.innerWidth<640?"1.5rem":"2rem",marginBottom:"4rem",maxWidth:window.innerWidth<640?"480px":"none",margin:window.innerWidth<640?"0 auto 4rem auto":"0 0 4rem 0"},children:R.map(j=>{const F=j.icon,z=e===j.id;return n.jsxs("div",{style:{background:j.popular?"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)":"rgba(30, 41, 59, 0.6)",backdropFilter:"blur(20px)",border:j.popular?"2px solid rgba(212, 175, 55, 0.5)":"1px solid rgba(148, 163, 184, 0.2)",borderRadius:window.innerWidth<640?"16px":"20px",padding:window.innerWidth<640?"1.75rem":"2.5rem",position:"relative",transition:"all 0.3s ease",transform:window.innerWidth<640?"scale(1)":j.popular?"scale(1.05)":"scale(1)"},onMouseEnter:P=>{window.innerWidth>=640&&(P.currentTarget.style.transform=j.popular?"scale(1.08)":"scale(1.03)",P.currentTarget.style.borderColor=j.popular?"rgba(212, 175, 55, 0.7)":"rgba(148, 163, 184, 0.4)")},onMouseLeave:P=>{window.innerWidth>=640&&(P.currentTarget.style.transform=j.popular?"scale(1.05)":"scale(1)",P.currentTarget.style.borderColor=j.popular?"rgba(212, 175, 55, 0.5)":"rgba(148, 163, 184, 0.2)")},children:[j.popular&&n.jsx("div",{style:{position:"absolute",top:"-14px",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",color:"#0A0E27",padding:"0.5rem 1.5rem",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",boxShadow:"0 4px 14px rgba(212, 175, 55, 0.4)"},children:"Most Popular"}),j.savings&&n.jsx("div",{style:{position:"absolute",top:"1.5rem",right:"1.5rem",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",color:"#10B981",padding:"0.375rem 0.875rem",borderRadius:"8px",fontSize:"0.75rem",fontWeight:"600"},children:j.savings}),z&&t&&n.jsx("div",{style:{position:"absolute",top:"1.5rem",right:"1.5rem",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#60A5FA",padding:"0.375rem 0.875rem",borderRadius:"8px",fontSize:"0.75rem",fontWeight:"600"},children:"Current Plan"}),n.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:j.popular?"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(255, 215, 0, 0.2) 100%)":"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1.5rem"},children:n.jsx(F,{size:28,color:j.popular?"#D4AF37":"#60A5FA",strokeWidth:2})}),n.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#F1F5F9",marginBottom:"0.5rem"},children:j.name}),n.jsx("p",{style:{fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.7)",marginBottom:"1.5rem"},children:j.description}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[S?n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"600",color:"rgba(241, 245, 249, 0.4)",textDecoration:"line-through",marginRight:"0.75rem"},children:j.price}),n.jsx("span",{style:{fontSize:"3rem",fontWeight:"800",color:"#10B981",lineHeight:"1"},children:I(j.price,S.discount)})]}):n.jsx("span",{style:{fontSize:"3rem",fontWeight:"800",color:j.popular?"#D4AF37":"#F1F5F9",lineHeight:"1"},children:j.price}),n.jsxs("span",{style:{fontSize:"1.125rem",color:"rgba(241, 245, 249, 0.6)",marginLeft:"0.5rem"},children:["/",j.period]}),S&&n.jsxs("div",{style:{display:"inline-block",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"6px",padding:"4px 10px",marginLeft:"0.75rem",fontSize:"0.875rem",fontWeight:"700",color:"#10B981"},children:[S.discount,"% OFF"]})]}),n.jsxs("div",{style:{fontSize:"0.938rem",color:"#10B981",fontWeight:"600",marginBottom:"1rem"},children:[" ",j.trial]}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(241, 245, 249, 0.6)",fontStyle:"italic",marginBottom:"0.5rem"},children:[" ",j.priceAnchor]}),n.jsxs("div",{style:{fontSize:"1.125rem",color:S?"#10B981":j.popular?"#D4AF37":"#60A5FA",fontWeight:"700",marginBottom:j.badge?"0.5rem":"2rem"},children:[S?n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{textDecoration:"line-through",color:"rgba(241, 245, 249, 0.4)",marginRight:"0.5rem",fontSize:"0.938rem"},children:j.pricePerDay}),(()=>{const V=parseFloat(j.pricePerDay.replace(/[^0-9.]/g,""))*(1-S.discount/100);return j.pricePerDay.includes("")?`${Math.round(V)}/day`:`$${V.toFixed(2)}/day`})()]}):j.pricePerDay,j.savings&&!S&&n.jsxs("span",{style:{fontSize:"0.813rem",color:"#10B981",marginLeft:"0.5rem",fontWeight:"600"},children:[" ",j.savings]})]}),j.badge&&n.jsx("div",{style:{fontSize:"0.875rem",color:"#10B981",fontWeight:"600",marginBottom:"1.5rem"},children:j.badge}),n.jsx("div",{style:{background:j.popular?"rgba(212, 175, 55, 0.1)":"rgba(59, 130, 246, 0.08)",border:`1px solid ${j.popular?"rgba(212, 175, 55, 0.3)":"rgba(59, 130, 246, 0.2)"}`,borderRadius:"8px",padding:"0.75rem",marginBottom:"1.5rem",textAlign:"center"},children:n.jsxs("div",{style:{fontSize:"0.875rem",color:j.popular?"#D4AF37":"#60A5FA",fontWeight:"600"},children:[" ",j.highlight]})}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(241, 245, 249, 0.5)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600",marginBottom:"0.75rem",textAlign:"center"},children:"Everything Included:"}),M.map((P,V)=>n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.625rem",marginBottom:"0.625rem"},children:[n.jsx(au,{size:16,color:j.popular?"#D4AF37":"#60A5FA",strokeWidth:3,style:{flexShrink:0,marginTop:"2px"}}),n.jsx("span",{style:{fontSize:window.innerWidth<640?"0.813rem":"0.875rem",color:"rgba(241, 245, 249, 0.85)",lineHeight:"1.4"},children:P})]},V))]}),n.jsx("button",{onClick:()=>L(j.id),disabled:z&&t,style:{width:"100%",padding:"1rem",background:j.popular?"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%)":z&&t?"rgba(148, 163, 184, 0.2)":"rgba(59, 130, 246, 0.2)",border:j.popular?"none":z&&t?"1px solid rgba(148, 163, 184, 0.3)":"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"12px",color:j.popular?"#0A0E27":z&&t?"rgba(241, 245, 249, 0.5)":"#60A5FA",fontSize:"1rem",fontWeight:"700",cursor:z&&t?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:j.popular?"0 4px 14px rgba(212, 175, 55, 0.3)":"none"},onMouseEnter:P=>{(!z||!t)&&(j.popular?(P.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.5)",P.currentTarget.style.transform="translateY(-2px)"):P.currentTarget.style.background="rgba(59, 130, 246, 0.3)")},onMouseLeave:P=>{(!z||!t)&&(j.popular?(P.currentTarget.style.boxShadow="0 4px 14px rgba(212, 175, 55, 0.3)",P.currentTarget.style.transform="translateY(0)"):P.currentTarget.style.background="rgba(59, 130, 246, 0.2)")},children:z&&t?"Current Plan":j.cta})]},j.id)})}),n.jsxs("div",{style:{textAlign:"center",maxWidth:"800px",margin:"0 auto 3rem auto"},children:[n.jsx("h3",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#F1F5F9",marginBottom:"1.5rem"},children:"Why NHL Savant?"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"2rem",textAlign:"left"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),n.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#F1F5F9",marginBottom:"0.5rem"},children:"Data-Driven, No BS"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.7)",lineHeight:"1.5"},children:"Institutional-grade NHL betting model with complete transparency. Every pick tracked."})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),n.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#F1F5F9",marginBottom:"0.5rem"},children:"No Parlays, No Liars"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.7)",lineHeight:"1.5"},children:"Stop throwing money away on longshot parlays and shady cappers. We show every pick."})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),n.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#F1F5F9",marginBottom:"0.5rem"},children:"Real +EV Edge"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.7)",lineHeight:"1.5"},children:"Only recommend bets with proven positive expected value. Long-term profitability."})]})]})]}),n.jsxs("div",{style:{textAlign:"center",fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.6)",lineHeight:"1.8"},children:[n.jsx("div",{style:{marginBottom:"0.5rem"},children:" Secure checkout with Stripe | Cancel anytime, no questions asked"}),n.jsx("div",{children:"Full refund within 7 days if you're not satisfied"})]})]}),n.jsx(bE,{isOpen:l,onClose:()=>{c(!1),h(null)},tier:u}),m&&n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px",animation:"fadeIn 0.3s ease-out"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, #1E293B 0%, #0F172A 100%)",borderRadius:"20px",maxWidth:"500px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5), 0 0 100px rgba(212, 175, 55, 0.2)",border:"1px solid rgba(212, 175, 55, 0.3)",animation:"slideUp 0.3s ease-out"},children:[n.jsx("button",{onClick:()=>f(!1),style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#94A3B8",transition:"all 0.2s",zIndex:10},onMouseEnter:j=>{j.currentTarget.style.background="rgba(239, 68, 68, 0.2)",j.currentTarget.style.color="#EF4444"},onMouseLeave:j=>{j.currentTarget.style.background="rgba(255, 255, 255, 0.1)",j.currentTarget.style.color="#94A3B8"},children:n.jsx(Ha,{size:20})}),n.jsxs("div",{style:{padding:"32px 24px"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[n.jsx("h2",{style:{fontSize:"28px",fontWeight:"800",background:"linear-gradient(135deg, #D4AF37 0%, #F59E0B 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"12px",lineHeight:"1.2"},children:"Spin for Your Discount! "}),n.jsx("p",{style:{fontSize:"16px",color:"#94A3B8",lineHeight:"1.5"},children:"Win up to 55% off your premium subscription!"})]}),n.jsx(Qx,{variant:"daily-return",spinsRemaining:x,onSpinComplete:A,onCodeRevealed:j=>{Dl("pricing_spin_code_won",{code:j})}}),x===0&&n.jsx("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"16px",marginTop:"20px",textAlign:"center"},children:n.jsx("div",{style:{fontSize:"14px",color:"#60A5FA",lineHeight:"1.5"},children:"Out of spins today! Come back tomorrow for 2 more chances."})})]})]}),n.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            
            @keyframes slideUp {
              from { 
                opacity: 0;
                transform: translateY(20px);
              }
              to { 
                opacity: 1;
                transform: translateY(0);
              }
            }
          `})]})]})},sV=`
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
`,oV=()=>{const r=as(),{user:e,signOut:t}=ls(),{tier:i,isPremium:o,isTrial:l,daysRemaining:c,status:u,createdAt:h,refresh:m}=Jo(e),[f,x]=O.useState(!1),[b,S]=O.useState(!1),[w,T]=O.useState(!1),[E,A]=O.useState(null),[_,B]=O.useState(""),[I,L]=O.useState(""),[M,R]=O.useState(!1),[j,F]=O.useState(null),[z,P]=O.useState(!1);O.useEffect(()=>{(async()=>{if(e?.uid)try{const re=await Vs($r(St,"users",e.uid));re.exists()&&re.data().stripeEmail&&(L(re.data().stripeEmail),B(re.data().stripeEmail))}catch(re){console.error("Error loading stripe email:",re)}})()},[e?.uid]);const V=async()=>{if(!_||!_.includes("@")){F({type:"error",text:"Please enter a valid email address"});return}R(!0),F(null);try{await dc($r(St,"users",e.uid),{stripeEmail:_.toLowerCase().trim()},{merge:!0}),L(_.toLowerCase().trim()),F({type:"success",text:' Email linked! Click "Sync" to check for subscription.'}),P(!1)}catch(X){console.error("Error linking email:",X),F({type:"error",text:"Failed to link email. Please try again."})}finally{R(!1)}},N=async()=>{T(!0),A(null);try{console.log(" Syncing subscription from Stripe...");const X=await m(!0);X?.isActive?(A({type:"success",text:` Found your ${X.tier} subscription! Page will refresh...`}),setTimeout(()=>window.location.reload(),2e3)):A({type:"info",text:"No active subscription found in Stripe. If you just subscribed, please wait a moment and try again."})}catch(X){console.error("Sync error:",X),A({type:"error",text:"Unable to sync. Please try again or contact support."})}finally{T(!1)}};if(!e)return r("/"),null;const Z=async()=>{x(!0);try{await t(),r("/")}catch(X){console.error("Error signing out:",X),x(!1)}},Q=async()=>{S(!0);try{console.log("Opening Stripe Customer Portal...");const re=await Uy(cx,"createPortalSession")({returnUrl:window.location.href});window.location.href=re.data.url}catch(X){console.error("Error opening billing portal:",X),alert("Unable to open billing portal. Please try again or contact support."),S(!1)}},H={free:"Free",scout:"Scout",elite:"Elite",pro:"SAVANT PRO"},U={free:"#94A3B8",scout:"#60A5FA",elite:"#8B5CF6",pro:"#D4AF37"},K=h?new Date(h.toDate()).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown";return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:sV}),n.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0A0E27 0%, #1A1F3A 50%, #0A0E27 100%)",padding:"2rem 1.5rem 4rem 1.5rem"},children:n.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[n.jsxs("button",{onClick:()=>r("/"),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"rgba(30, 41, 59, 0.6)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"10px",color:"rgba(241, 245, 249, 0.8)",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"2rem"},onMouseEnter:X=>{X.currentTarget.style.background="rgba(30, 41, 59, 0.8)",X.currentTarget.style.borderColor="rgba(148, 163, 184, 0.4)"},onMouseLeave:X=>{X.currentTarget.style.background="rgba(30, 41, 59, 0.6)",X.currentTarget.style.borderColor="rgba(148, 163, 184, 0.2)"},children:[n.jsx(gE,{size:18}),"Back to Home"]}),n.jsxs("div",{style:{marginBottom:"3rem"},children:[n.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",margin:"0 0 0.5rem 0",letterSpacing:"-0.02em"},children:"Account Settings"}),n.jsx("p",{style:{fontSize:"1.125rem",color:"rgba(241, 245, 249, 0.7)",margin:0},children:"Manage your subscription and account settings"})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.6) 0%, rgba(15, 23, 42, 0.6) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1.5rem",marginBottom:"2rem"},children:[n.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%)",border:"2px solid rgba(212, 175, 55, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:e.photoURL?n.jsx("img",{src:e.photoURL,alt:e.displayName||"User",style:{width:"100%",height:"100%",objectFit:"cover"}}):n.jsx(To,{size:40,color:"#D4AF37",strokeWidth:2})}),n.jsxs("div",{style:{flex:1},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#F1F5F9",marginBottom:"0.5rem"},children:e.displayName||"NHL Savant User"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.7)",marginBottom:"0.75rem"},children:e.email}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:`rgba(${U[i]==="#D4AF37"?"212, 175, 55":U[i]==="#60A5FA"?"59, 130, 246":U[i]==="#8B5CF6"?"139, 92, 246":"148, 163, 184"}, 0.15)`,border:`1px solid rgba(${U[i]==="#D4AF37"?"212, 175, 55":U[i]==="#60A5FA"?"59, 130, 246":U[i]==="#8B5CF6"?"139, 92, 246":"148, 163, 184"}, 0.3)`,borderRadius:"8px"},children:[i==="pro"&&n.jsx(tc,{size:16,color:U[i]}),n.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:U[i]},children:[H[i]," ",l&&`(Trial: ${c}d left)`]})]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",paddingTop:"1.5rem",borderTop:"1px solid rgba(148, 163, 184, 0.1)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"rgba(241, 245, 249, 0.6)",marginBottom:"0.25rem"},children:"Member Since"}),n.jsx("div",{style:{fontSize:"0.938rem",fontWeight:"600",color:"#F1F5F9"},children:K})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"rgba(241, 245, 249, 0.6)",marginBottom:"0.25rem"},children:"Account Status"}),n.jsx("div",{style:{fontSize:"0.938rem",fontWeight:"600",color:o?"#10B981":"#F1F5F9"},children:u==="active"||u==="trialing"?"Active":u==="past_due"?"Past Due":"Inactive"})]})]})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.6) 0%, rgba(15, 23, 42, 0.6) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(212, 175, 55, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(ar,{size:20,color:"#D4AF37",strokeWidth:2.5})}),n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#F1F5F9",margin:0},children:"Subscription"})]}),o?n.jsxs(n.Fragment,{children:[n.jsxs("p",{style:{fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.8)",lineHeight:"1.6",marginBottom:"1.5rem"},children:["You're currently on the ",n.jsx("strong",{style:{color:U[i]},children:H[i]})," plan.",l&&` Your trial ends in ${c} day${c!==1?"s":""}.`]}),n.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[n.jsxs("button",{onClick:Q,disabled:b,style:{padding:"0.875rem 1.5rem",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"10px",color:"#60A5FA",fontSize:"0.938rem",fontWeight:"600",cursor:b?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem",opacity:b?.6:1},onMouseEnter:X=>{b||(X.currentTarget.style.background="rgba(59, 130, 246, 0.3)",X.currentTarget.style.borderColor="rgba(59, 130, 246, 0.6)")},onMouseLeave:X=>{b||(X.currentTarget.style.background="rgba(59, 130, 246, 0.2)",X.currentTarget.style.borderColor="rgba(59, 130, 246, 0.4)")},children:[n.jsx(R1,{size:18}),b?"Loading...":"Manage Billing"]}),i!=="pro"&&n.jsxs("button",{onClick:()=>r("/pricing"),style:{padding:"0.875rem 1.5rem",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%)",border:"none",borderRadius:"10px",color:"#0A0E27",fontSize:"0.938rem",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 14px rgba(212, 175, 55, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:X=>{X.currentTarget.style.transform="translateY(-2px)",X.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.5)"},onMouseLeave:X=>{X.currentTarget.style.transform="translateY(0)",X.currentTarget.style.boxShadow="0 4px 14px rgba(212, 175, 55, 0.3)"},children:[n.jsx(tc,{size:18}),"Upgrade Plan"]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{style:{fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.8)",lineHeight:"1.6",marginBottom:"1.5rem"},children:["You're currently on the ",n.jsx("strong",{children:"Free"})," plan. Upgrade to unlock unlimited access to all +EV picks."]}),n.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginBottom:"1rem"},children:[n.jsxs("button",{onClick:()=>r("/pricing"),style:{padding:"0.875rem 1.5rem",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%)",border:"none",borderRadius:"10px",color:"#0A0E27",fontSize:"0.938rem",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 14px rgba(212, 175, 55, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:X=>{X.currentTarget.style.transform="translateY(-2px)",X.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.5)"},onMouseLeave:X=>{X.currentTarget.style.transform="translateY(0)",X.currentTarget.style.boxShadow="0 4px 14px rgba(212, 175, 55, 0.3)"},children:[n.jsx(tc,{size:18}),"View Premium Plans"]}),n.jsxs("button",{onClick:N,disabled:w,style:{padding:"0.875rem 1.5rem",background:"rgba(16, 185, 129, 0.15)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"10px",color:"#10B981",fontSize:"0.875rem",fontWeight:"600",cursor:w?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem",opacity:w?.7:1},onMouseEnter:X=>{w||(X.currentTarget.style.background="rgba(16, 185, 129, 0.25)")},onMouseLeave:X=>{w||(X.currentTarget.style.background="rgba(16, 185, 129, 0.15)")},children:[n.jsx(Gg,{size:16,style:{animation:w?"spin 1s linear infinite":"none"}}),w?"Syncing...":"Already Subscribed?"]})]}),E&&n.jsx("div",{style:{padding:"0.75rem 1rem",borderRadius:"8px",fontSize:"0.875rem",background:E.type==="success"?"rgba(16, 185, 129, 0.15)":E.type==="error"?"rgba(239, 68, 68, 0.15)":"rgba(59, 130, 246, 0.15)",border:`1px solid ${E.type==="success"?"rgba(16, 185, 129, 0.3)":E.type==="error"?"rgba(239, 68, 68, 0.3)":"rgba(59, 130, 246, 0.3)"}`,color:E.type==="success"?"#10B981":E.type==="error"?"#EF4444":"#60A5FA"},children:E.text}),n.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"10px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[n.jsx(yB,{size:16,color:"#60A5FA"}),n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#60A5FA"},children:"Paid with a different email?"})]}),I&&!z&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",padding:"0.5rem 0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"6px"},children:[n.jsx(Sw,{size:14,color:"#10B981"}),n.jsxs("span",{style:{fontSize:"0.813rem",color:"#10B981"},children:["Linked: ",I]}),n.jsx("button",{onClick:()=>P(!0),style:{marginLeft:"auto",padding:"0.25rem 0.5rem",background:"transparent",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"4px",color:"#10B981",fontSize:"0.75rem",cursor:"pointer"},children:"Change"})]}),(!I||z)&&n.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[n.jsx("input",{type:"email",placeholder:"Enter email used at Stripe checkout",value:_,onChange:X=>B(X.target.value),style:{flex:"1",minWidth:"200px",padding:"0.625rem 0.875rem",background:"rgba(15, 23, 42, 0.6)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"8px",color:"#F1F5F9",fontSize:"0.875rem"}}),n.jsxs("button",{onClick:V,disabled:M,style:{padding:"0.625rem 1rem",background:"linear-gradient(135deg, #3B82F6, #2563EB)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.813rem",fontWeight:"600",cursor:M?"not-allowed":"pointer",opacity:M?.7:1,display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx(Sw,{size:14}),M?"Linking...":"Link Email"]})]}),j&&n.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.813rem",background:j.type==="success"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:j.type==="success"?"#10B981":"#EF4444"},children:j.text}),n.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(241, 245, 249, 0.5)",marginTop:"0.75rem",margin:0},children:"If you checked out with a Yahoo, Outlook, or other email instead of your Google account email, enter it here."})]}),n.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(241, 245, 249, 0.5)",marginTop:"1rem",fontStyle:"italic"},children:' Already paid but showing as Free? Link your Stripe email above, then click "Already Subscribed?" to sync.'})]})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 41, 59, 0.6) 0%, rgba(15, 23, 42, 0.6) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"16px",padding:"2rem"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#F1F5F9",marginBottom:"0.75rem"},children:"Account Actions"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"rgba(241, 245, 249, 0.7)",marginBottom:"1.5rem",lineHeight:"1.6"},children:"Need help? Contact us at Math@NHLSavant.com"}),n.jsxs("button",{onClick:Z,disabled:f,style:{padding:"0.875rem 1.5rem",background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",color:"#EF4444",fontSize:"0.938rem",fontWeight:"600",cursor:f?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem",opacity:f?.7:1},onMouseEnter:X=>{f||(X.currentTarget.style.background="rgba(239, 68, 68, 0.25)",X.currentTarget.style.borderColor="rgba(239, 68, 68, 0.5)")},onMouseLeave:X=>{f||(X.currentTarget.style.background="rgba(239, 68, 68, 0.15)",X.currentTarget.style.borderColor="rgba(239, 68, 68, 0.3)")},children:[n.jsx(Wg,{size:18}),f?"Signing out...":"Sign Out"]})]})]})})]})};function aV({player:r,isOpen:e,onClose:t,isPremium:i}){if(!e||!r)return null;const{matchupFactors:o,reasons:l,playerStats:c}=r,u=h=>h?{icon:n.jsx(mE,{size:18}),color:"#10b981",label:"FAVORABLE"}:{icon:n.jsx(pE,{size:18}),color:"#64748b",label:"NEUTRAL"};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",overflowY:"auto"},onClick:t,children:n.jsxs("div",{onClick:h=>h.stopPropagation(),style:{background:"linear-gradient(to bottom, #1e293b, #0f172a)",border:"1px solid rgba(100, 116, 139, 0.3)",borderRadius:"1rem",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[n.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",right:"1rem",background:"rgba(100, 116, 139, 0.2)",border:"none",borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",color:"#94a3b8",transition:"all 0.2s"},onMouseEnter:h=>{h.currentTarget.style.background="rgba(239, 68, 68, 0.2)",h.currentTarget.style.color="#ef4444"},onMouseLeave:h=>{h.currentTarget.style.background="rgba(100, 116, 139, 0.2)",h.currentTarget.style.color="#94a3b8"},children:n.jsx(Ha,{size:24})}),n.jsxs("div",{style:{padding:"2rem",borderBottom:"1px solid rgba(100, 116, 139, 0.2)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[n.jsx("span",{style:{padding:"0.375rem 0.75rem",background:"rgba(59, 130, 246, 0.2)",borderRadius:"0.375rem",color:"#60a5fa",fontSize:"0.875rem",fontWeight:"600"},children:c?.position||"F"}),n.jsx("h2",{style:{fontSize:"2rem",fontWeight:"700",color:"#f1f5f9",margin:0},children:r.name})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",color:"#94a3b8",fontSize:"1rem"},children:[n.jsx("span",{children:r.team}),n.jsx("span",{children:"vs"}),n.jsx("span",{children:r.opponentTeamName}),n.jsx("span",{children:""}),n.jsx("span",{children:r.gameTime})]})]}),n.jsxs("div",{style:{padding:"2rem",borderBottom:"1px solid rgba(100, 116, 139, 0.2)",background:"rgba(59, 130, 246, 0.05)"},children:[n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#f1f5f9",marginBottom:"1rem"},children:"Tonight's Matchup"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1.5rem"},children:[n.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.5)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(100, 116, 139, 0.2)"},children:[n.jsx("div",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"OddsTrader EV"}),n.jsx("div",{style:{color:"#f1f5f9",fontSize:"1.5rem",fontWeight:"700"},children:r.otEV}),n.jsxs("div",{style:{color:"#64748b",fontSize:"0.75rem",marginTop:"0.25rem"},children:["Cover Prob: ",r.otCoverProb,"%"]})]}),n.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.5)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(100, 116, 139, 0.2)"},children:[n.jsx("div",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Opponent xGA/60"}),n.jsx("div",{style:{color:o?.defense?.rank>24?"#10b981":o?.defense?.rank>16?"#fbbf24":"#ef4444",fontSize:"1.5rem",fontWeight:"700"},children:o?.defense?.xGA_per60||"N/A"}),n.jsxs("div",{style:{color:"#64748b",fontSize:"0.75rem",marginTop:"0.25rem"},children:["Rank #",o?.defense?.rank||"N/A"," / 32 (",o?.defense?.vsLeague||"N/A"," vs avg)"]})]}),n.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.5)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(100, 116, 139, 0.2)"},children:[n.jsxs("div",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.5rem"},children:["Goalie: ",r.opponentGoalieName]}),n.jsxs("div",{style:{color:(o?.goalie?.gsae||0)<-2?"#10b981":(o?.goalie?.gsae||0)<2?"#94a3b8":"#ef4444",fontSize:"1.5rem",fontWeight:"700"},children:[o?.goalie?.gsae?`${o.goalie.gsae>0?"+":""}${o.goalie.gsae.toFixed(1)}`:"N/A"," GSAE"]}),n.jsxs("div",{style:{color:"#64748b",fontSize:"0.75rem",marginTop:"0.25rem"},children:[o?.goalie?.level||"Unknown"," performance"]})]}),n.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.5)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(100, 116, 139, 0.2)"},children:[n.jsx("div",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Player SOG/gm"}),n.jsx("div",{style:{color:"#e2e8f0",fontSize:"1.5rem",fontWeight:"700"},children:c?.shotsPerGame?.toFixed(1)||"N/A"}),n.jsxs("div",{style:{color:"#64748b",fontSize:"0.75rem",marginTop:"0.25rem"},children:[c?.shootingPercentage?.toFixed(1)||"N/A","% shooting"]})]})]})]}),n.jsxs("div",{style:{padding:"2rem"},children:[n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#f1f5f9",marginBottom:"1.5rem"},children:"Matchup Factors"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o?.defense&&n.jsx(Pl,{icon:n.jsx(sn,{size:20}),title:"Opponent Defense",value:`#${o.defense.rank} ranked (${o.defense.vsLeague} vs league)`,indicator:u(o.defense.isFavorable),description:o.defense.rank>24?"Bottom-tier defense":o.defense.rank>16?"Average defense":"Elite defense"}),o?.goalie&&o.goalie.name!=="TBD"&&n.jsx(Pl,{icon:n.jsx(fr,{size:20}),title:"Goalie Quality",value:`${o.goalie.name} (${o.goalie.level})`,indicator:u(o.goalie.isFavorable),description:`${o.goalie.gsae} GSAE - ${o.goalie.isFavorable?"Allowing more goals than expected":"Performing well"}`}),o?.pace&&n.jsx(Pl,{icon:n.jsx(ou,{size:20}),title:"Game Pace",value:`${o.pace.level} pace (${o.pace.vsLeague} vs league)`,indicator:u(o.pace.isFavorable),description:o.pace.isFavorable?"More shots and opportunities":"Average pace game"}),o?.ppOpportunity&&n.jsx(Pl,{icon:n.jsx(zo,{size:20}),title:"Power Play Opportunity",value:`${o.ppOpportunity.pimPerGame} PIM/game (${o.ppOpportunity.level})`,indicator:u(o.ppOpportunity.isFavorable),description:o.ppOpportunity.isFavorable?"High penalty rate = PP opportunities":"Average penalty rate"}),o?.shotBlocking&&n.jsx(Pl,{icon:n.jsx(sn,{size:20}),title:"Shot Blocking",value:`${o.shotBlocking.blocksPerGame} blocks/game (${o.shotBlocking.level})`,indicator:u(o.shotBlocking.isFavorable),description:o.shotBlocking.isFavorable?"Low blocks = shots get through":"Average shot blocking"}),o?.playerShots&&c&&n.jsx(Pl,{icon:n.jsx(ar,{size:20}),title:"Player Shot Volume",value:`${o.playerShots.shotsPerGame} SOG/game (${o.playerShots.level})`,indicator:u(o.playerShots.isFavorable),description:`${o.playerShots.highDangerRate} high danger rate`})]})]}),l&&l.length>0&&n.jsxs("div",{style:{padding:"2rem",borderTop:"1px solid rgba(100, 116, 139, 0.2)",background:"rgba(16, 185, 129, 0.05)"},children:[n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#f1f5f9",marginBottom:"1rem"},children:"Why This Matchup"}),n.jsx("ul",{style:{margin:0,padding:"0 0 0 1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:l.map((h,m)=>n.jsx("li",{style:{color:"#cbd5e1",fontSize:"1rem",lineHeight:"1.5"},children:h},m))})]}),c&&n.jsxs("div",{style:{padding:"2rem",borderTop:"1px solid rgba(100, 116, 139, 0.2)"},children:[n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#f1f5f9",marginBottom:"1rem"},children:"Season Stats"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[n.jsx(Tg,{label:"Goals/Game",value:c.goalsPerGame?.toFixed(2)||"0.00"}),n.jsx(Tg,{label:"Shots/Game",value:c.shotsPerGame?.toFixed(1)||"0.0"}),n.jsx(Tg,{label:"xG/Game",value:c.xGoalsPerGame?.toFixed(2)||"0.00"}),n.jsx(Tg,{label:"High Danger %",value:`${(c.highDangerRate*100).toFixed(0)||"0"}%`})]})]})]})})}function Pl({icon:r,title:e,value:t,indicator:i,description:o}){return n.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.5)",border:"1px solid rgba(100, 116, 139, 0.2)",borderRadius:"0.5rem",padding:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{color:"#94a3b8"},children:r}),n.jsx("span",{style:{color:"#f1f5f9",fontWeight:"600",fontSize:"0.875rem"},children:e})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",background:`${i.color}20`,borderRadius:"0.25rem",color:i.color,fontSize:"0.75rem",fontWeight:"600"},children:[i.icon,n.jsx("span",{children:i.label})]})]}),n.jsx("div",{style:{color:"#cbd5e1",fontSize:"0.9375rem",marginBottom:"0.25rem"},children:t}),n.jsx("div",{style:{color:"#64748b",fontSize:"0.8125rem"},children:o})]})}function Tg({label:r,value:e}){return n.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.5)",border:"1px solid rgba(100, 116, 139, 0.2)",borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[n.jsx("div",{style:{color:"#94a3b8",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:r}),n.jsx("div",{style:{color:"#f1f5f9",fontSize:"1.5rem",fontWeight:"700"},children:e})]})}function lV({players:r,isPremium:e}){const[t,i]=O.useState(null),[o,l]=O.useState(new Set),c=m=>{const f=new Set(o);f.has(m)?f.delete(m):f.add(m),l(f)},u=m=>m>24?"#10b981":m>16?"#fbbf24":"#ef4444",h=m=>{const f=parseFloat(m);return f>5?{icon:n.jsx(EP,{size:16}),color:"#ef4444"}:f<-2?{icon:n.jsx(mE,{size:16}),color:"#10b981"}:{icon:n.jsx(pE,{size:16}),color:"#94a3b8"}};return!r||r.length===0?n.jsx("div",{style:{background:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(12px)",border:"1px solid rgba(100, 116, 139, 0.2)",borderRadius:"0.75rem",padding:"3rem",textAlign:"center"},children:n.jsx("p",{style:{color:"#94a3b8",fontSize:"1.125rem"},children:"No players match your filters"})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{display:"block","@media (max-width: 768px)":{display:"none"}},children:n.jsx("div",{style:{background:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(12px)",border:"1px solid rgba(100, 116, 139, 0.2)",borderRadius:"0.75rem",overflow:"hidden"},children:n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(15, 23, 42, 0.8)",borderBottom:"1px solid rgba(100, 116, 139, 0.2)"},children:[n.jsx("th",{style:ni,children:"#"}),n.jsx("th",{style:ni,title:"Save your favorites",children:""}),n.jsx("th",{style:{...ni,textAlign:"left",minWidth:"180px"},title:"Player name and position",children:"Player"}),n.jsx("th",{style:ni,title:"Tonight's matchup",children:"Matchup"}),n.jsx("th",{style:{...ni,minWidth:"110px"},title:"Betting prop and odds",children:"Prop / Odds"}),n.jsx("th",{style:{...ni,minWidth:"90px"},title:"Opponent expected goals against per 60 min (higher = weaker defense = better for scorer)",children:"Opp xGA/60"}),n.jsx("th",{style:{...ni,minWidth:"100px"},title:"Goalie Goals Saved Above Expected (negative = struggling goalie = better for scorer)",children:"Goalie GSAE"}),n.jsx("th",{style:ni,title:"Player shots on goal per game (higher = more opportunities)",children:"SOG/gm"}),n.jsx("th",{style:ni,title:"Game pace - shot attempts per 60 min (faster = more scoring chances)",children:"Pace"}),n.jsx("th",{style:ni,title:"Opponent penalty minutes per game (higher = more power play opportunities)",children:"PP PIM"}),n.jsx("th",{style:ni,title:"Model's calculated expected value - accounting for all matchup factors",children:"Model EV"}),n.jsx("th",{style:ni,title:"Player shooting percentage (goals per shot)",children:"Shot%"})]})}),n.jsx("tbody",{children:r.map((m,f)=>{h(m.matchupFactors?.goalie?.gsae||0);const x=m.matchupFactors?.defense?.rank||99,b=m.matchupFactors?.goalie?.gsae||0,S=m.playerStats?.shotsPerGame||0;let w=0;x>24&&w++,b<-2&&w++,S>3&&w++,m.matchupFactors?.pace?.isFavorable&&w++;let T="transparent";return w>=3&&S>3?T="rgba(16, 185, 129, 0.08)":w>=2&&S>2.5&&(T="rgba(251, 191, 36, 0.05)"),n.jsxs("tr",{onClick:()=>i(m),style:{borderBottom:"1px solid rgba(100, 116, 139, 0.1)",cursor:"pointer",transition:"background 0.2s",background:T},onMouseEnter:E=>E.currentTarget.style.background="rgba(59, 130, 246, 0.15)",onMouseLeave:E=>E.currentTarget.style.background=T,children:[n.jsx("td",{style:ii,children:n.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"50%",background:f<3?"rgba(251, 191, 36, 0.2)":"rgba(100, 116, 139, 0.2)",color:f<3?"#fbbf24":"#94a3b8",fontSize:"0.875rem",fontWeight:"600"},children:f+1})}),n.jsx("td",{style:ii,children:e?n.jsx("button",{onClick:E=>{E.stopPropagation(),c(m.name)},style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:n.jsx(yE,{size:18,fill:o.has(m.name)?"#fbbf24":"none",color:o.has(m.name)?"#fbbf24":"#64748b"})}):n.jsx("span",{style:{color:"#475569",fontSize:"0.75rem"},children:""})}),n.jsx("td",{style:{...ii,textAlign:"left"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[n.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.5rem",background:"rgba(59, 130, 246, 0.2)",borderRadius:"0.25rem",color:"#60a5fa",fontSize:"0.75rem",fontWeight:"600"},children:m.playerStats?.position||"F"}),n.jsx("span",{style:{color:"#f1f5f9",fontWeight:"600",fontSize:"0.9375rem"},children:m.name}),S>3.5&&n.jsx("span",{style:{display:"inline-block",padding:"0.125rem 0.375rem",background:"rgba(16, 185, 129, 0.2)",borderRadius:"0.25rem",color:"#10b981",fontSize:"0.625rem",fontWeight:"700",letterSpacing:"0.025em"},children:"ELITE"}),S>2.8&&S<=3.5&&n.jsx("span",{style:{display:"inline-block",padding:"0.125rem 0.375rem",background:"rgba(59, 130, 246, 0.2)",borderRadius:"0.25rem",color:"#60a5fa",fontSize:"0.625rem",fontWeight:"700",letterSpacing:"0.025em"},children:"GOOD"})]})}),n.jsx("td",{style:ii,children:n.jsxs("span",{style:{color:"#cbd5e1",fontSize:"0.875rem",fontWeight:"500"},children:[m.team," @ ",m.opponent]})}),n.jsx("td",{style:ii,children:n.jsx("span",{style:{color:"#e2e8f0",fontSize:"0.875rem",fontWeight:"500",fontFamily:"monospace"},children:m.odds||"N/A"})}),n.jsx("td",{style:ii,children:(()=>{const E=parseFloat(m.matchupFactors?.defense?.xGA_per60||0),A=m.matchupFactors?.defense?.rank||99;let _,B,I;return A>24?(_="rgba(16, 185, 129, 0.2)",B="#10b981",I=" WEAK"):A>16?(_="rgba(251, 191, 36, 0.15)",B="#fbbf24",I="AVG"):(_="rgba(239, 68, 68, 0.15)",B="#ef4444",I=" STRONG"),n.jsxs("div",{style:{background:_,padding:"0.375rem 0.5rem",borderRadius:"0.375rem",display:"inline-block"},children:[n.jsx("div",{style:{color:B,fontSize:"0.9375rem",fontWeight:"700",marginBottom:"0.125rem"},children:E.toFixed(2)}),n.jsx("div",{style:{color:B,fontSize:"0.625rem",fontWeight:"600",opacity:.8},children:I})]})})()}),n.jsx("td",{style:ii,children:(()=>{const E=m.matchupFactors?.goalie?.gsae||0;let A,_,B;return E<-2?(A="rgba(16, 185, 129, 0.2)",_="#10b981",B=" COLD"):E<2?(A="rgba(100, 116, 139, 0.15)",_="#94a3b8",B="AVG"):(A="rgba(239, 68, 68, 0.15)",_="#ef4444",B=" HOT"),n.jsxs("div",{style:{background:A,padding:"0.375rem 0.5rem",borderRadius:"0.375rem",display:"inline-block"},children:[n.jsxs("div",{style:{color:_,fontSize:"0.9375rem",fontWeight:"700",marginBottom:"0.125rem"},children:[E>0?"+":"",E.toFixed(1)]}),n.jsx("div",{style:{color:_,fontSize:"0.625rem",fontWeight:"600",opacity:.8},children:B})]})})()}),n.jsx("td",{style:ii,children:(()=>{const E=m.playerStats?.shotsPerGame||0;let A,_;return E>3.5?(A="#10b981",_=""):E>2.8?(A="#60a5fa",_=""):E>2?(A="#94a3b8",_=""):(A="#64748b",_=""),n.jsxs("span",{style:{color:A,fontSize:"0.875rem",fontWeight:"700"},children:[_," ",E?E.toFixed(1):"N/A"]})})()}),n.jsx("td",{style:ii,children:(()=>{const E=parseFloat(m.matchupFactors?.pace?.pace||0),A=m.matchupFactors?.pace?.isFavorable;return n.jsx("span",{style:{color:A?"#10b981":"#94a3b8",fontSize:"0.875rem",fontWeight:"500"},children:E.toFixed(1)})})()}),n.jsx("td",{style:ii,children:n.jsx("span",{style:{color:m.matchupFactors?.ppOpportunity?.isFavorable?"#10b981":"#94a3b8",fontSize:"0.875rem",fontWeight:"500"},children:m.matchupFactors?.ppOpportunity?.pimPerGame||"N/A"})}),n.jsx("td",{style:ii,children:n.jsx("span",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:m.otEV})}),n.jsx("td",{style:ii,children:n.jsxs("span",{style:{color:"#e2e8f0",fontSize:"0.875rem",fontWeight:"500"},children:[m.playerStats?.shootingPercentage?.toFixed(1)||"N/A","%"]})})]},`${m.name}-${f}`)})})]})})})}),n.jsx("div",{style:{display:"none","@media (max-width: 768px)":{display:"block"}},children:n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:r.map((m,f)=>n.jsxs("div",{onClick:()=>i(m),style:{background:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(12px)",border:"1px solid rgba(100, 116, 139, 0.2)",borderRadius:"0.75rem",padding:"1rem",cursor:"pointer"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.75rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{color:"#f1f5f9",fontWeight:"600",fontSize:"1.125rem",marginBottom:"0.25rem"},children:m.name}),n.jsxs("div",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:[m.team," @ ",m.opponent]}),n.jsx("div",{style:{color:"#64748b",fontSize:"0.75rem",marginTop:"0.25rem",fontFamily:"monospace"},children:m.odds||"N/A"})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",alignItems:"flex-end"},children:[n.jsx("span",{style:{color:"#94a3b8",fontSize:"0.75rem"},children:"Model EV"}),n.jsx("span",{style:{color:"#e2e8f0",fontSize:"0.875rem",fontWeight:"600"},children:m.otEV})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.75rem",fontSize:"0.875rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{color:"#64748b",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"xGA/60"}),n.jsx("div",{style:{color:u(m.matchupFactors?.defense?.rank),fontWeight:"600"},children:m.matchupFactors?.defense?.xGA_per60||"N/A"})]}),n.jsxs("div",{children:[n.jsx("div",{style:{color:"#64748b",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Goalie"}),n.jsx("div",{style:{color:(m.matchupFactors?.goalie?.gsae||0)<-2?"#10b981":"#94a3b8",fontWeight:"600"},children:(m.matchupFactors?.goalie?.gsae||0).toFixed(1)})]}),n.jsxs("div",{children:[n.jsx("div",{style:{color:"#64748b",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"SOG/gm"}),n.jsx("div",{style:{color:"#e2e8f0",fontWeight:"600"},children:m.playerStats?.shotsPerGame?.toFixed(1)||"N/A"})]})]})]},`${m.name}-${f}`))})}),t&&n.jsx(aV,{player:t,isOpen:!!t,onClose:()=>i(null),isPremium:e})]})}const ni={padding:"1rem",textAlign:"center",fontSize:"0.75rem",fontWeight:"600",color:"#94a3b8",textTransform:"uppercase",letterSpacing:"0.05em"},ii={padding:"1rem",textAlign:"center",fontSize:"0.875rem",color:"#cbd5e1"};function cV({playerMatchups:r,dataProcessor:e}){const{user:t}=ls(),{isPremium:i}=Jo(t),[o,l]=O.useState("all"),[c,u]=O.useState("all"),[h,m]=O.useState("modelEV"),[f,x]=O.useState(!1),b=O.useMemo(()=>r?[...new Set(r.map(E=>E.matchup))]:[],[r]),w=O.useMemo(()=>{if(!r)return[];let T=[...r];return o!=="all"&&(T=T.filter(E=>E.matchup===o)),c==="forwards"?T=T.filter(E=>{const A=E.playerStats?.position||"";return A==="C"||A==="L"||A==="R"||A==="F"}):c==="defense"&&(T=T.filter(E=>(E.playerStats?.position||"")==="D")),T.sort((E,A)=>{switch(h){case"modelEV":return parseFloat(A.evPercent)-parseFloat(E.evPercent);case"defense":return(A.matchupFactors?.defense?.rank||0)-(E.matchupFactors?.defense?.rank||0);case"goalie":return(E.matchupFactors?.goalie?.gsae||0)-(A.matchupFactors?.goalie?.gsae||0);case"shots":return(A.playerStats?.shotsPerGame||0)-(E.playerStats?.shotsPerGame||0);case"pace":return parseFloat(A.matchupFactors?.pace?.pace||0)-parseFloat(E.matchupFactors?.pace?.pace||0);case"shotPct":return(A.playerStats?.shootingPercentage||0)-(E.playerStats?.shootingPercentage||0);default:return 0}}),T},[r,o,c,h]);return i?!r||r.length===0?n.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0f172a, #1e293b)",padding:"2rem 1rem"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",textAlign:"center",padding:"3rem 0"},children:[n.jsx(fr,{size:64,color:"#64748b",style:{margin:"0 auto 1.5rem"}}),n.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#f1f5f9",marginBottom:"1rem"},children:"No Player Props Available"}),n.jsxs("p",{style:{fontSize:"1.125rem",color:"#94a3b8",marginBottom:"2rem"},children:["Run ",n.jsx("code",{style:{background:"#1e293b",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",color:"#fbbf24"},children:"npm run fetch-player-props"})," to scrape today's props"]})]})}):n.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0f172a, #1e293b)",padding:"2rem 1rem"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[n.jsx(fr,{size:32,color:"#fbbf24"}),n.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#f1f5f9",margin:0},children:"Top Scoring Matchups"})]}),n.jsxs("p",{style:{fontSize:"1rem",color:"#94a3b8",margin:0},children:[an(),"  ",r.length," players analyzed"]})]}),n.jsx("div",{style:{background:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(12px)",border:"1px solid rgba(100, 116, 139, 0.2)",borderRadius:"0.75rem",padding:"1.5rem",marginBottom:"1.5rem"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#94a3b8",marginBottom:"0.5rem"},children:"Game"}),n.jsxs("select",{value:o,onChange:T=>l(T.target.value),style:{width:"100%",padding:"0.5rem 0.75rem",background:"#1e293b",border:"1px solid rgba(100, 116, 139, 0.3)",borderRadius:"0.5rem",color:"#f1f5f9",fontSize:"0.875rem",cursor:"pointer"},children:[n.jsxs("option",{value:"all",children:["All Matchups (",r.length,")"]}),b.map(T=>n.jsx("option",{value:T,children:T},T))]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#94a3b8",marginBottom:"0.5rem"},children:"Position"}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsx("button",{onClick:()=>u("all"),style:{flex:1,padding:"0.5rem",background:c==="all"?"#3b82f6":"#1e293b",border:"1px solid rgba(100, 116, 139, 0.3)",borderRadius:"0.5rem",color:"#f1f5f9",fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:"All"}),n.jsx("button",{onClick:()=>u("forwards"),style:{flex:1,padding:"0.5rem",background:c==="forwards"?"#3b82f6":"#1e293b",border:"1px solid rgba(100, 116, 139, 0.3)",borderRadius:"0.5rem",color:"#f1f5f9",fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:"Forwards"}),n.jsx("button",{onClick:()=>u("defense"),style:{flex:1,padding:"0.5rem",background:c==="defense"?"#3b82f6":"#1e293b",border:"1px solid rgba(100, 116, 139, 0.3)",borderRadius:"0.5rem",color:"#f1f5f9",fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:"Defense"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#94a3b8",marginBottom:"0.5rem"},children:"Sort By"}),n.jsxs("select",{value:h,onChange:T=>m(T.target.value),style:{width:"100%",padding:"0.5rem 0.75rem",background:"#1e293b",border:"1px solid rgba(100, 116, 139, 0.3)",borderRadius:"0.5rem",color:"#f1f5f9",fontSize:"0.875rem",cursor:"pointer"},children:[n.jsx("option",{value:"modelEV",children:"Model EV (Best Value)"}),n.jsx("option",{value:"defense",children:"Opponent Defense (Weakest First)"}),n.jsx("option",{value:"goalie",children:"Goalie GSAE (Worst First)"}),n.jsx("option",{value:"shots",children:"Player SOG (Highest First)"}),n.jsx("option",{value:"pace",children:"Game Pace (Fastest First)"}),n.jsx("option",{value:"shotPct",children:"Shooting % (Highest First)"})]})]})]})}),n.jsx("div",{style:{background:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(12px)",border:"1px solid rgba(100, 116, 139, 0.2)",borderRadius:"0.75rem",padding:"1rem 1.5rem",marginBottom:"1rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap",fontSize:"0.875rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"rgba(16, 185, 129, 0.2)",border:"1px solid #10b981"}}),n.jsxs("span",{style:{color:"#94a3b8"},children:[n.jsx("strong",{style:{color:"#10b981"},children:"Green"})," = Favorable (weak defense, cold goalie, high volume)"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"rgba(239, 68, 68, 0.15)",border:"1px solid #ef4444"}}),n.jsxs("span",{style:{color:"#94a3b8"},children:[n.jsx("strong",{style:{color:"#ef4444"},children:"Red"})," = Unfavorable (strong defense, hot goalie)"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:"100%",height:"3px",borderRadius:"2px",background:"rgba(16, 185, 129, 0.15)"}}),n.jsx("span",{style:{color:"#94a3b8",fontSize:"0.8125rem",fontStyle:"italic",whiteSpace:"nowrap"},children:"Row highlighted = Elite matchup (3+ favorable factors)"})]})]})}),n.jsx(lV,{players:w,isPremium:i})]})}):n.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0f172a, #1e293b)",padding:"2rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:[n.jsxs("div",{style:{maxWidth:"600px",background:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(12px)",border:"1px solid rgba(100, 116, 139, 0.2)",borderRadius:"1rem",padding:"3rem 2rem",textAlign:"center"},children:[n.jsx(fr,{size:64,color:"#fbbf24",style:{margin:"0 auto 1.5rem"}}),n.jsx("h2",{style:{fontSize:"2rem",fontWeight:"700",color:"#f1f5f9",marginBottom:"1rem"},children:"Premium Feature"}),n.jsx("p",{style:{fontSize:"1.125rem",color:"#94a3b8",marginBottom:"2rem",lineHeight:"1.6"},children:"Top Scoring Matchups is an exclusive feature for Premium subscribers. Get access to advanced player matchup analysis powered by our sophisticated models."}),n.jsx("button",{onClick:()=>x(!0),style:{background:"linear-gradient(to right, #fbbf24, #f59e0b)",color:"#1e293b",fontWeight:"700",padding:"1rem 2rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",fontSize:"1.125rem",transition:"all 0.2s"},onMouseEnter:T=>T.currentTarget.style.opacity=.9,onMouseLeave:T=>T.currentTarget.style.opacity=1,children:"Upgrade to Premium"})]}),n.jsx(i3,{isOpen:f,onClose:()=>x(!1)})]})}function o3(){const r=new Date().toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",hour12:!1});return parseInt(r)}function Jx(r){return["SUN","MON","TUE","WED","THU","FRI","SAT"][r.getDay()]}function Pd(){return Jx(new Date)}function e5(r){const e=r.getMonth()+1,t=r.getDate(),i=`${e.toString().padStart(2,"0")}/${t.toString().padStart(2,"0")}`,o=`${e}/${t.toString().padStart(2,"0")}`;return[i,o]}function a3(){return e5(new Date)}function l3(){const r=new Date;return r.setDate(r.getDate()-1),r}function dV(r){if(r.includes("LIVE")||r.includes("STARTS IN"))return!0;const t=o3()<4,i=Pd(),o=a3();for(const l of o){const c=`${i} ${l}`;if(r.includes(c))return!0}if(t){const l=l3(),c=Jx(l),u=e5(l);for(const h of u){const m=`${c} ${h}`;if(r.includes(m))return console.log(` Including yesterday's game (before 4 AM ET): ${r.substring(0,50)}...`),!0}}return!1}function c3(r){if(!r||typeof r!="string")return console.warn("Invalid markdown provided to parseBasketballOdds"),[];const e=[],t=r.split(`
`),i=a3();if(o3()<4){const c=l3(),u=e5(c);console.log(` Filtering for TODAY: ${Pd()} ${i.join(" or ")}`),console.log(` Also including YESTERDAY (before 4 AM ET): ${Jx(c)} ${u.join(" or ")}`)}else console.log(` Filtering for TODAY: ${Pd()} ${i.join(" or ")}`);console.log(`   Looking for patterns: "${Pd()} ${i[0]}" OR "${Pd()} ${i[1]}"`);for(let c=0;c<t.length;c++){const u=t[c].trim();if(!(!u||!u.startsWith("|"))&&u.includes("![bell]")&&(u.match(/(?:MON|TUE|WED|THU|FRI|SAT|SUN)\s+\d{1,2}\/\d{1,2}/)||u.includes("STARTS IN")||u.includes("LIVE"))){if(!dV(u))continue;const h=u.match(/(?:MON|TUE|WED|THU|FRI|SAT|SUN)\s+\d{1,2}\/\d{1,2}(\d{1,2}:\d{2}\s*(?:AM|PM))/),m=u.match(/STARTS\s+IN[^\d]*(\d{1,2}:\d{2}\s*(?:AM|PM))/),f=u.match(/LIVE/),x=h?h[1]:m?m[1]:f?"LIVE":"TBD",b=u.split("![](https://logos.oddstrader.com/");if(b.length<2)continue;const S=b[1],w=S.match(/\.(?:png|PNG)\?d=100x100\)<br>([^<]+)<br>/);if(!w)continue;let T=w[1].trim();T=T.replace(/^#\d+/,"").trim();const E=S.match(/<br>(\d+-\d+)<br>/),A=E?E[1]:null,_=S.match(/([+-]\d+)(?:Caesars|Bet365|BetMGM|BetRivers|SugarHouse|FanDuel|Bovada|BetOnline|BetAnything|Heritage|Bookmaker|JustBet|MyBookie|Everygame|Bet\d+|BetUS)/i),B=_?parseInt(_[1]):null,I=t[c+1];if(!I||!I.trim().startsWith("|"))continue;const L=I.split("![](https://logos.oddstrader.com/")[1];if(!L)continue;const M=L.match(/\.(?:png|PNG)\?d=100x100\)<br>([^<]+)<br>/);if(!M)continue;let R=M[1].trim();R=R.replace(/^#\d+/,"").trim();const j=L.match(/<br>(\d+-\d+)<br>/),F=j?j[1]:null,z=L.match(/([+-]\d+)(?:Caesars|Bet365|BetMGM|BetRivers|SugarHouse|FanDuel|Bovada|BetOnline|BetAnything|Heritage|Bookmaker|JustBet|MyBookie|Everygame|Bet\d+|BetUS)/i),P=z?parseInt(z[1]):null;e.push({awayTeam:T,awayTeamRaw:T,awayRecord:A,awayOdds:B,homeTeam:R,homeTeamRaw:R,homeRecord:F,homeOdds:P,gameTime:x,source:"OddsTrader",matchup:`${T} @ ${R}`}),c++}}return console.log(` Parsed ${e.length} games from OddsTrader`),e}function d3(r){if(!r||typeof r!="string")return console.warn("Invalid markdown provided to parseHaslametrics"),{games:[],teams:{}};const e=[],t={},i=r.split(`
`);for(let l=0;l<i.length;l++){const c=i[l].trim();if(c.startsWith("|")&&c.includes("](https://haslametrics.com/ratings2.php")){const u=c.split("|").map(S=>S.trim()).filter(S=>S);if(u.length<3)continue;const h=u[1].match(/\[([^\]]+)\]/);if(!h)continue;const m=h[1],f=u[1].match(/\((\d+-\d+)\)/),x=f?f[1]:null,b=parseFloat(u[2])||null;t[m]={name:m,record:x,offensiveEff:b,source:"Haslametrics"}}}let o=!1;for(let l=0;l<i.length;l++){const c=i[l].trim();if(c.includes("THIS WEEK'S EXPECTED OUTCOMES")){o=!0;continue}if(o&&c.includes("](https://haslametrics.com/ratings2.php")&&c.includes("![](https://haslametrics.com/images/preview")){const u=c,h=i[l+1]?i[l+1].trim():"",m=i[l+2]?i[l+2].trim():"",f=GT(u),x=GT(h),b=uV(m),S=Math.min(f.length,x.length,b.length);for(let w=0;w<S;w++)f[w]&&x[w]&&e.push({awayTeam:f[w].name,homeTeam:x[w].name,awayRating:f[w].rating,awayRank:f[w].rank,homeRating:x[w].rating,homeRank:x[w].rank,gameTime:b[w]||null,matchup:`${f[w].name} @ ${x[w].name}`,source:"Haslametrics"});l+=2}}return console.log(` Parsed ${e.length} games and ${Object.keys(t).length} teams from Haslametrics`),{games:e,teams:t}}function GT(r){const e=[],t=/\[([^\]]+)\]\(https:\/\/haslametrics\.com\/ratings2\.php[^\)]*\)\s*(\d+)/g;let i;for(;(i=t.exec(r))!==null;){const o=i[1],l=parseInt(i[2]),u=r.substring(i.index+i[0].length).match(/\|\s*([\d.]+)/),h=u?parseFloat(u[1]):null;e.push({name:o,rank:l,rating:h})}return e}function uV(r){const e=[],t=/(\d{1,2}:\d{2}[ap]m\s+ET)/gi;let i;for(;(i=t.exec(r))!==null;)e.push(i[1]);return e}function u3(r){if(!r||typeof r!="string")return console.warn("Invalid markdown provided to parseDRatings"),[];const e=[],t=r.split(`
`);for(let o=0;o<t.length;o++){const l=t[o].trim(),c=new Date().getFullYear(),u=c+1,h=l.includes(`/${c}`)||l.includes(`/${u}`);if(l.startsWith("|")&&h&&l.includes("%<br>")){const m=l.split("|").map(f=>f.trim()).filter(f=>f);if(m.length<6)continue;try{const f=m[0].match(/(\d{1,2}:\d{2}\s*(?:AM|PM))/i),x=f?f[1]:null,S=[...m[1].matchAll(/\[([^\]]+)\]\([^\)]+\)/g)];if(S.length<2)continue;const w=S[0][1],T=S[1][1],A=m[2].match(/([\d.]+)%/g);if(!A||A.length<2)continue;const _=parseFloat(A[0].replace("%",""))/100,B=parseFloat(A[1].replace("%",""))/100,I=_+B;if(I<.95||I>1.05){console.warn(`  Invalid probabilities for ${w} @ ${T}: ${_} + ${B} = ${I}`);continue}let L=null,M=null;for(let R=3;R<m.length;R++){const j=m[R],F=/^([\d.]+)<br>([\d.]+)$/,z=j.match(F);if(z){L=parseFloat(z[1]),M=parseFloat(z[2]);break}}e.push({awayTeam:w,homeTeam:T,awayWinProb:_,homeWinProb:B,awayScore:L,homeScore:M,gameTime:x,source:"D-Ratings",matchup:`${w} @ ${T}`})}catch(f){console.error(`Error parsing D-Ratings line ${o}:`,f.message)}}}console.log(` Parsed ${e.length} predictions from D-Ratings`);const i=e.filter(o=>o.awayWinProb>.98||o.homeWinProb>.98);return i.length>0&&console.warn(`  ${i.length} games have >98% win probability (possible blowouts)`),e}function hV(r){const e={},t=r.split(`
`);for(const i of t){if(!i.startsWith("|")||i.includes("---")||i.includes("[Rk]"))continue;const o=i.split("|").map(l=>l.trim()).filter(l=>l);if(!(o.length<24))try{const l=parseInt(o[0].trim());if(isNaN(l))continue;const u=o[1].trim().match(/team=([^&\)]+)/);if(!u)continue;const h=decodeURIComponent(u[1].replace(/\+/g," ")),f=o[2].trim().match(/\[([^\]]+)\]/),x=f?f[1]:"",b=H=>{const U=H.trim().split("<br>");return{value:parseFloat(U[0])||0,rank:U[1]?parseInt(U[1]):null}},S=b(o[5]),w=b(o[6]),T=b(o[7]),E=b(o[8]),A=b(o[9]),_=b(o[10]),B=b(o[11]),I=b(o[12]),L=b(o[13]),M=b(o[14]),R=b(o[15]),j=b(o[16]),F=b(o[17]),z=b(o[18]),P=b(o[19]),V=b(o[20]),N=b(o[21]),Z=b(o[22]),Q=b(o[23]);e[h]={rank:l,teamName:h,conference:x,adjOff:S.value,adjOff_rank:S.rank,adjDef:w.value,adjDef_rank:w.rank,bartholomew:T.value,bartholomew_rank:T.rank,eFG_off:E.value,eFG_off_rank:E.rank,eFG_def:A.value,eFG_def_rank:A.rank,to_off:_.value,to_off_rank:_.rank,to_def:B.value,to_def_rank:B.rank,oreb_off:I.value,oreb_off_rank:I.rank,oreb_def:L.value,oreb_def_rank:L.rank,ftRate_off:M.value,ftRate_off_rank:M.rank,ftRate_def:R.value,ftRate_def_rank:R.rank,twoP_off:j.value,twoP_off_rank:j.rank,twoP_def:F.value,twoP_def_rank:F.rank,threeP_off:z.value,threeP_off_rank:z.rank,threeP_def:P.value,threeP_def_rank:P.rank,threeP_rate_off:V.value,threeP_rate_off_rank:V.rank,threeP_rate_def:N.value,threeP_rate_def_rank:N.rank,adjTempo:Z.value,adjTempo_rank:Z.rank,wab:Q.value,wab_rank:Q.rank}}catch{continue}}return console.log(` Parsed Barttorvik data for ${Object.keys(e).length} teams`),e}function gV(r){const e={},t=r.split(`
`);for(const i of t){if(!i.startsWith("|"))continue;const o=i.split("|").map(l=>l.trim()).filter(l=>l);if(!o.every(l=>l.match(/^[-:]+$/))&&!(o.length<20))try{const l=parseInt(o[0].trim());if(isNaN(l))continue;const u=(o[1]||"").match(/team=([^&\)]+)/);if(!u)continue;const h=decodeURIComponent(u[1].replace(/\+/g," ")),m=f=>parseFloat(o[f])||0;e[h]={rank:l,teamName:h,dunks_off_fg:m(3),dunks_off_share:m(4),dunks_def_fg:m(5),dunks_def_share:m(7),close2_off_fg:m(8),close2_off_share:m(9),close2_def_fg:m(10),close2_def_share:m(12),far2_off_fg:m(13),far2_off_share:m(14),far2_def_fg:m(15),far2_def_share:m(17),three_off_fg:m(18),three_off_share:m(19),three_def_fg:m(20),three_def_share:m(22)}}catch{continue}}return console.log(` Parsed Barttorvik PBP data for ${Object.keys(e).length} teams`),e}function h3(r){const e=r.split(`
`);e[0].split(",");const t=new Map;for(let i=1;i<e.length;i++){const o=e[i].trim();if(!o)continue;const l=mV(o);if(l.length<4)continue;const c={normalized:l[0],oddstrader:l[1],haslametrics:l[2],dratings:l[3],conference:l[4]||"",ncaa_name:l[5]||"",notes:l[6]||"",espn_name:l[7]||"",barttorvik:l[8]||""};t.set(c.normalized,c)}return console.log(` Loaded ${t.size} team mappings with ESPN/NCAA names`),t}function HT(r,e,t="oddstrader"){if(!e)return null;const i=e.trim().toLowerCase();for(const[o,l]of r){const c=l[t];if(c&&c.toLowerCase()===i)return l}for(const[o,l]of r){const c=l[t];if(c&&(c.toLowerCase().includes(i)||i.includes(c.toLowerCase())))return l}return null}function mV(r){const e=[];let t="",i=!1;for(let o=0;o<r.length;o++){const l=r[o];l==='"'?i&&r[o+1]==='"'?(t+='"',o++):i=!i:l===","&&!i?(e.push(t.trim()),t=""):t+=l}return e.push(t.trim()),e}function UT(r,e,t){return!e||!t?null:r.find(i=>i.awayTeam===e&&i.homeTeam===t)}function qT(r,e,t){return!e||!t?null:r.find(i=>i.awayTeam===e&&i.homeTeam===t)}function g3(r,e,t,i,o){const l=[],c=h3(o),u=e.games||[],h=e.teams||{},m=new Set,f=new Set,x=new Set,b=new Set,S=new Set,w=new Set;for(const T of r){const E=T.awayTeam,A=T.homeTeam,_=HT(c,E,"oddstrader"),B=HT(c,A,"oddstrader");if(!_||!B){_||m.add(E),B||m.add(A);continue}let I=null;_.haslametrics&&B.haslametrics?(I=qT(u,_.haslametrics,B.haslametrics),I||(I=qT(u,B.haslametrics,_.haslametrics),I&&(I={...I,awayTeam:_.haslametrics,homeTeam:B.haslametrics,awayRating:I.homeRating,homeRating:I.awayRating,awayRank:I.homeRank,homeRank:I.awayRank,_reversed:!0})),I||S.add(`${E} @ ${A}`)):(_.haslametrics||f.add(E),B.haslametrics||f.add(A));let L=null;_.dratings&&B.dratings?(L=UT(t,_.dratings,B.dratings),L||(L=UT(t,B.dratings,_.dratings),L&&(L={...L,awayTeam:_.dratings,homeTeam:B.dratings,awayWinProb:L.homeWinProb,homeWinProb:L.awayWinProb,awayScore:L.homeScore,homeScore:L.awayScore,_reversed:!0})),L||w.add(`${E} @ ${A}`)):(_.dratings||x.add(E),B.dratings||x.add(A)),_.ncaa_name||b.add(E),B.ncaa_name||b.add(A);let M=null,R=null;_.barttorvik&&B.barttorvik&&(M=i[_.barttorvik],R=i[B.barttorvik]);const j=["odds"];I&&j.push("haslametrics"),L&&j.push("dratings");const F=h[_.haslametrics],z=h[B.haslametrics],P=70,V=3;let N=null,Z=null;F?.offensiveEff&&z?.offensiveEff&&(N=Math.round(F.offensiveEff*P/100*10)/10,Z=Math.round((z.offensiveEff*P/100+V)*10)/10);const Q={awayTeam:E,homeTeam:A,matchup:`${E} @ ${A}`,haslametrics:I?{gameTime:I.gameTime,awayRating:I.awayRating,homeRating:I.homeRating,awayRank:I.awayRank,homeRank:I.homeRank,awayOffEff:F?.offensiveEff||null,homeOffEff:z?.offensiveEff||null,awayScore:I.awayRating,homeScore:I.homeRating}:F&&z?{gameTime:null,awayRating:null,homeRating:null,awayRank:null,homeRank:null,awayOffEff:F.offensiveEff||null,homeOffEff:z.offensiveEff||null,awayScore:N,homeScore:Z,isEfficiencyBased:!0}:null,dratings:L?{awayWinProb:L.awayWinProb,homeWinProb:L.homeWinProb,awayScore:L.awayScore,homeScore:L.homeScore,gameTime:L.gameTime}:null,barttorvik:M&&R?{awayBartName:_.barttorvik,homeBartName:B.barttorvik,away:{rank:M.rank,adjOff:M.adjOff,adjOff_rank:M.adjOff_rank,adjDef:M.adjDef,adjDef_rank:M.adjDef_rank,eFG_off:M.eFG_off,eFG_def:M.eFG_def,eFG_off_rank:M.eFG_off_rank,eFG_def_rank:M.eFG_def_rank,to_off:M.to_off,to_def:M.to_def,to_off_rank:M.to_off_rank,to_def_rank:M.to_def_rank,oreb_off:M.oreb_off,oreb_def:M.oreb_def,oreb_off_rank:M.oreb_off_rank,oreb_def_rank:M.oreb_def_rank,twoP_off:M.twoP_off,twoP_def:M.twoP_def,twoP_off_rank:M.twoP_off_rank,twoP_def_rank:M.twoP_def_rank,threeP_off:M.threeP_off,threeP_def:M.threeP_def,threeP_off_rank:M.threeP_off_rank,threeP_def_rank:M.threeP_def_rank,bartholomew:M.bartholomew,bartholomew_rank:M.bartholomew_rank,adjTempo:M.adjTempo,adjTempo_rank:M.adjTempo_rank,ftRate_off:M.ftRate_off,ftRate_def:M.ftRate_def,ftRate_off_rank:M.ftRate_off_rank,ftRate_def_rank:M.ftRate_def_rank,threeP_rate_off:M.threeP_rate_off,threeP_rate_def:M.threeP_rate_def,threeP_rate_off_rank:M.threeP_rate_off_rank,threeP_rate_def_rank:M.threeP_rate_def_rank,wab:M.wab,wab_rank:M.wab_rank},home:{rank:R.rank,adjOff:R.adjOff,adjOff_rank:R.adjOff_rank,adjDef:R.adjDef,adjDef_rank:R.adjDef_rank,eFG_off:R.eFG_off,eFG_def:R.eFG_def,eFG_off_rank:R.eFG_off_rank,eFG_def_rank:R.eFG_def_rank,to_off:R.to_off,to_def:R.to_def,to_off_rank:R.to_off_rank,to_def_rank:R.to_def_rank,oreb_off:R.oreb_off,oreb_def:R.oreb_def,oreb_off_rank:R.oreb_off_rank,oreb_def_rank:R.oreb_def_rank,twoP_off:R.twoP_off,twoP_def:R.twoP_def,twoP_off_rank:R.twoP_off_rank,twoP_def_rank:R.twoP_def_rank,threeP_off:R.threeP_off,threeP_def:R.threeP_def,threeP_off_rank:R.threeP_off_rank,threeP_def_rank:R.threeP_def_rank,bartholomew:R.bartholomew,bartholomew_rank:R.bartholomew_rank,adjTempo:R.adjTempo,adjTempo_rank:R.adjTempo_rank,ftRate_off:R.ftRate_off,ftRate_def:R.ftRate_def,ftRate_off_rank:R.ftRate_off_rank,ftRate_def_rank:R.ftRate_def_rank,threeP_rate_off:R.threeP_rate_off,threeP_rate_def:R.threeP_rate_def,threeP_rate_off_rank:R.threeP_rate_off_rank,threeP_rate_def_rank:R.threeP_rate_def_rank,wab:R.wab,wab_rank:R.wab_rank},matchup:{rankAdvantage:M.rank<R.rank?"away":"home",rankDiff:Math.abs(M.rank-R.rank),offAdvantage:M.adjOff>R.adjOff?"away":"home",offDiff:Math.abs(M.adjOff-R.adjOff).toFixed(1),defAdvantage:M.adjDef<R.adjDef?"away":"home",awayOffVsHomeDef:(M.eFG_off-R.eFG_def).toFixed(1),homeOffVsAwayDef:(R.eFG_off-M.eFG_def).toFixed(1),expectedTempo:((M.adjTempo||67)+(R.adjTempo||67))/2,powerRankDiff:(R.bartholomew_rank||182)-(M.bartholomew_rank||182),ftRateEdge:M.ftRate_off-R.ftRate_def-(R.ftRate_off-M.ftRate_def),avgThreeRate:((M.threeP_rate_off||40)+(R.threeP_rate_off||40))/2}}:null,odds:{awayOdds:T.awayOdds,homeOdds:T.homeOdds,awayProb:YT(T.awayOdds),homeProb:YT(T.homeOdds),gameTime:I?.gameTime||T.gameTime||"TBD"},sources:j,dataQuality:fV(j),csvMappings:{away:_.normalized,home:B.normalized},timestamp:new Date().toISOString()};l.push(Q)}return l}function YT(r){return r?r>0?100/(r+100):Math.abs(r)/(Math.abs(r)+100):null}function fV(r){return r.length===3?"HIGH":r.length===2?"MEDIUM":"LOW"}const pV={A:{EXTREME_FAV:1,BIG_FAV:4,MOD_FAV:3,SLIGHT_FAV:5,PICKEM:2,DOG:3},B:{EXTREME_FAV:.5,BIG_FAV:3.5,MOD_FAV:3,SLIGHT_FAV:5,PICKEM:5,DOG:2},C:{EXTREME_FAV:1,BIG_FAV:3,MOD_FAV:3.5,SLIGHT_FAV:1.5,PICKEM:.5,DOG:1}};function Ou(r){return r<-1e3?"EXTREME_FAV":r>=-1e3&&r<-500?"BIG_FAV":r>=-500&&r<-200?"MOD_FAV":r>=-200&&r<-150?"SLIGHT_FAV":r>=-150&&r<150?"PICKEM":"DOG"}function yV(r){return{EXTREME_FAV:"Extreme Favorite",BIG_FAV:"Big Favorite",MOD_FAV:"Moderate Favorite",SLIGHT_FAV:"Slight Favorite",PICKEM:"Pick'em",DOG:"Underdog"}[r]||r}function g0(r){const e={"A+":"A",A:"A","A-":"A","B+":"B",B:"B","B-":"B","C+":"C",C:"C","C-":"C",D:"C",F:"C"},t=r?.toUpperCase().trim();return e[t]||"C"}function m3(r,e){if(!r||e===void 0||e===null)return 0;const t=g0(r),i=Ou(e);return pV[t]?.[i]??0}function xV(r){return r>=5?"#10B981":r>=4?"#14B8A6":r>=3?"#3B82F6":r>=2?"#8B5CF6":r>=1.5?"#F59E0B":r>=1?"#FB923C":r>=.5?"#94A3B8":"#EF4444"}function f3(r,e){const t=g0(r),i=Ou(e),o=m3(r,i),c={A:{EXTREME_FAV:-22.8,BIG_FAV:15.7,MOD_FAV:12.1,SLIGHT_FAV:25,PICKEM:1.2,DOG:12.6},B:{EXTREME_FAV:1,BIG_FAV:14.9,MOD_FAV:4,SLIGHT_FAV:54.9,PICKEM:68.7,DOG:0},C:{EXTREME_FAV:2.5,BIG_FAV:-21.8,MOD_FAV:21.7,SLIGHT_FAV:-28.1,PICKEM:-38,DOG:0}}[t]?.[i]??0;return{grade:t,oddsRange:i,oddsRangeName:yV(i),units:o,historicalROI:c,color:xV(o)}}function bV(r,e){const t=f3(r,e);return t.units>=5&&t.historicalROI>50?"":t.units>=5&&t.historicalROI>20?"":t.units>=4?"":t.units>=3?"":t.units>=2?"":t.units>=1?"":""}const Qg={grade:{"A+":.8,A:1.6,"B+":1.8,B:.9,C:1,D:.8,F:.5},odds:{HEAVY_FAV:.5,BIG_FAV:1,MOD_FAV:1.5,SLIGHT_FAV:1.6,PICKEM:.8,SLIGHT_DOG:.7,BIG_DOG:.4},probability:{HIGH_PROB:1.5,GOOD_PROB:1.2,MOD_PROB:1,LOW_PROB:.7},ev:{VERY_HIGH_EV:.5,HIGH_EV:.8,GOOD_EV:1.4,MOD_EV:1.2,LOW_EV:1,NEG_EV:.9},side:{AWAY:1.2,HOME:.9}},Kd={fGradeCap:.5,minSampleSize:30,unitThresholds:{elite:5.5,high:4.5,good:3.5,moderate:2.5,low:0},maxWeightContribution:{grade:2,odds:2,probability:1.5,ev:1,side:.5}};async function vV(r){try{if(typeof window>"u"){const t=await Is(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Is(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),{fileURLToPath:o}=await Is(async()=>{const{fileURLToPath:h}=await import("./__vite-browser-external-BIHI7g3E.js");return{fileURLToPath:h}},[]);let l=r;if(!l||typeof l!="string"){const h=o(import.meta.url),m=i.dirname(h);l=i.join(m,"../../public/basketball_confidence_weights.json")}const c=await t.readFile(l,"utf8"),u=JSON.parse(c);return console.log(` Loaded dynamic weights from JSON (${u.totalBets} bets analyzed)`),{weights:u.weights||Qg,config:u.config||Kd,performance:u.performance||{},totalBets:u.totalBets||0,lastUpdated:u.lastUpdated}}const e=await fetch("/basketball_confidence_weights.json");if(e.ok){const t=await e.json();return console.log(` Loaded dynamic weights (${t.totalBets} bets analyzed)`),{weights:t.weights||Qg,config:t.config||Kd,performance:t.performance||{},totalBets:t.totalBets||0,lastUpdated:t.lastUpdated}}}catch(e){console.warn(" Could not load dynamic weights, using defaults:",e.message)}return{weights:Qg,config:Kd,performance:{},totalBets:0,lastUpdated:null}}function SV(r){const e=r.prediction?.grade||"C",t=r.bet?.odds||r.odds||-110,o=(r.bet?.team||r.bet?.pick||r.team)===(r.game?.awayTeam||r.awayTeam),l=o?r.prediction?.ensembleAwayProb||r.ensembleAwayProb||.5:r.prediction?.ensembleHomeProb||r.ensembleHomeProb||.5,c=r.prediction?.evPercent||r.prediction?.bestEV||r.evPercent||0;let u;t<=-300?u="HEAVY_FAV":t>-300&&t<=-200?u="BIG_FAV":t>-200&&t<=-150?u="MOD_FAV":t>-150&&t<-110?u="SLIGHT_FAV":t>=-110&&t<=110?u="PICKEM":t>110&&t<200?u="SLIGHT_DOG":u="BIG_DOG";let h;l>=.7?h="HIGH_PROB":l>=.6?h="GOOD_PROB":l>=.55?h="MOD_PROB":h="LOW_PROB";let m;return c>=20?m="VERY_HIGH_EV":c>=15?m="HIGH_EV":c>=10?m="GOOD_EV":c>=5?m="MOD_EV":c>=0?m="LOW_EV":m="NEG_EV",{grade:e,oddsRange:u,probRange:h,evRange:m,side:o?"AWAY":"HOME",rawValues:{odds:t,ensembleProb:l,ev:c,isAway:o}}}function jg(r,e,t=25){if(e<t)return 1;let i;return r>=0?i=1+r*3:i=Math.pow(.5,Math.abs(r)/.1),Math.max(.15,Math.min(1.5,i))}function Ag(r,e,t=25){if(e<t)return 1;let i;return r>=0?i=1+r/20:i=Math.pow(.5,Math.abs(r)/6),Math.max(.1,Math.min(2,i))}function wV(r,e){const{weights:t,config:i,performance:o}=e||{weights:Qg,config:Kd,performance:{}},l=SV(r),c=[],u=25,h=o?.grade?.[l.grade]||{},m=o?.odds?.[l.oddsRange]||{},f=o?.probability?.[l.probRange]||{},x=o?.ev?.[l.evRange]||{};o?.side?.[l.side];const b=[];let S=1;const w={odds:.5,grade:.25,prob:.15,ev:.1},T=jg(h.calibError||0,h.total||0,u),E=Ag(h.roi||0,h.total||0,u),A=(T+E)/2;h.total>=u&&(b.push({factor:"Grade",value:l.grade,calibError:h.calibError,roi:h.roi,multiplier:A}),S*=Math.pow(A,w.grade));const _=jg(m.calibError||0,m.total||0,u),B=Ag(m.roi||0,m.total||0,u),I=(_+B)/2;m.total>=u&&(b.push({factor:"Odds",value:l.oddsRange,calibError:m.calibError,roi:m.roi,multiplier:I}),S*=Math.pow(I,w.odds));const L=jg(f.calibError||0,f.total||0,u),M=Ag(f.roi||0,f.total||0,u),R=(L+M)/2;f.total>=u&&(b.push({factor:"Prob",value:l.probRange,calibError:f.calibError,roi:f.roi,multiplier:R}),S*=Math.pow(R,w.prob));const j=jg(x.calibError||0,x.total||0,u),F=Ag(x.roi||0,x.total||0,u),z=(j+F)/2;x.total>=u&&(b.push({factor:"EV",value:l.evRange,calibError:x.calibError,roi:x.roi,multiplier:z}),S*=Math.pow(z,w.ev));let P=0;const V=t.grade?.[l.grade]||1,N=Math.min(V,i.maxWeightContribution?.grade||2),Z=A>=1?"":A>=.7?"":"";h.total>=u?c.push(`${Z} Grade ${l.grade}: +${N.toFixed(2)} (${(h.calibError*100).toFixed(0)}% calib, ${h.roi.toFixed(0)}% ROI  ${A.toFixed(2)}x)`):c.push(` Grade ${l.grade}: +${N.toFixed(2)} (wt: ${V.toFixed(2)})`),P+=N;const Q=t.odds?.[l.oddsRange]||1,H=Math.min(Q,i.maxWeightContribution?.odds||2),U=I>=1?"":I>=.7?"":"";m.total>=u?c.push(`${U} Odds ${l.oddsRange}: +${H.toFixed(2)} (${(m.calibError*100).toFixed(0)}% calib, ${m.roi.toFixed(0)}% ROI  ${I.toFixed(2)}x)`):c.push(` Odds ${l.oddsRange}: +${H.toFixed(2)} (wt: ${Q.toFixed(2)})`),P+=H;const K=t.probability?.[l.probRange]||1,X=Math.min(K,i.maxWeightContribution?.probability||1.5),re=R>=1?"":R>=.7?"":"";f.total>=u?c.push(`${re} Prob ${l.probRange}: +${X.toFixed(2)} (${(f.calibError*100).toFixed(0)}% calib, ${f.roi.toFixed(0)}% ROI  ${R.toFixed(2)}x)`):c.push(` Prob ${l.probRange}: +${X.toFixed(2)} (wt: ${K.toFixed(2)})`),P+=X;const me=t.ev?.[l.evRange]||1,ke=Math.min(me,i.maxWeightContribution?.ev||1),te=z>=1?"":z>=.7?"":"";x.total>=u?c.push(`${te} EV ${l.evRange}: +${ke.toFixed(2)} (${(x.calibError*100).toFixed(0)}% calib, ${x.roi.toFixed(0)}% ROI  ${z.toFixed(2)}x)`):c.push(` EV ${l.evRange}: +${ke.toFixed(2)} (wt: ${me.toFixed(2)})`),P+=ke;const le=t.side?.[l.side]||1,ve=Math.min(le*.5,i.maxWeightContribution?.side||.5);c.push(` ${l.side}: +${ve.toFixed(2)}`),P+=ve;const xe=i.unitThresholds||Kd.unitThresholds;let ue;P>=xe.elite?ue=5:P>=xe.high?ue=4:P>=xe.good?ue=3:P>=xe.moderate?ue=2:ue=1;const Re=ue*S,Te=Math.max(.5,Math.min(5,Math.round(Re*2)/2));c.push(` Combined multiplier: ${S.toFixed(2)}x  ${ue}u  ${Te}u`);let $e,rt;Te>=4.5?($e="ELITE",rt=` ELITE (${Te}u)`):Te>=3.5?($e="HIGH",rt=` HIGH (${Te}u)`):Te>=2.5?($e="GOOD",rt=` GOOD (${Te}u)`):Te>=1.5?($e="MODERATE",rt=` MODERATE (${Te}u)`):Te>=1?($e="LOW",rt=` LOW (${Te}u)`):($e="MINIMAL",rt=` MINIMAL (${Te}u)`);const Ke=TV(l.grade,e),et=jV(l.oddsRange,e),Tt=Ke*.6+et*.4;return{units:Te,score:parseFloat(P.toFixed(2)),tier:$e,tierLabel:rt,factors:c,classification:l,patternROI:parseFloat(Tt.toFixed(1)),multiplierDetails:{combined:parseFloat(S.toFixed(3)),factors:b,baseUnits:ue,adjustedUnits:parseFloat(Re.toFixed(2))}}}function TV(r,e){const t=e?.performance?.grade?.[r];return t?.roi!==void 0?t.roi:{A:4.2,"A+":-9.1,B:0,"B+":32.9,C:-2,D:1.8,F:-5.3}[r]||0}function jV(r,e){const t=e?.performance?.odds?.[r];return t?.roi!==void 0?t.roi:{HEAVY_FAV:.4,BIG_FAV:-2.5,MOD_FAV:-1,SLIGHT_FAV:8.2,PICKEM:-6.2,SLIGHT_DOG:1.4,BIG_DOG:-8.9}[r]||0}function AV(r){const e=r?.confidenceTier,t=r?.unitSize||0,i=r?.confidenceScore||0,o={ELITE:{tier:1,name:"ELITE",shortName:"Elite",emoji:"",color:"#10B981",bgGradient:"linear-gradient(135deg, rgba(16, 185, 129, 0.18) 0%, rgba(5, 150, 105, 0.12) 100%)",borderColor:"rgba(16, 185, 129, 0.40)",description:"Maximum conviction - multiple green flags aligned"},HIGH:{tier:2,name:"HIGH CONFIDENCE",shortName:"High",emoji:"",color:"#14B8A6",bgGradient:"linear-gradient(135deg, rgba(20, 184, 166, 0.15) 0%, rgba(13, 148, 136, 0.10) 100%)",borderColor:"rgba(20, 184, 166, 0.35)",description:"Strong opportunity with solid backing"},GOOD:{tier:3,name:"GOOD",shortName:"Good",emoji:"",color:"#3B82F6",bgGradient:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.10) 100%)",borderColor:"rgba(59, 130, 246, 0.35)",description:"Positive expectation with measured risk"},MODERATE:{tier:4,name:"MODERATE",shortName:"Moderate",emoji:"",color:"#8B5CF6",bgGradient:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(124, 58, 237, 0.10) 100%)",borderColor:"rgba(139, 92, 246, 0.35)",description:"Conservative sizing for mixed signals"},LOW:{tier:5,name:"LOW CONFIDENCE",shortName:"Low",emoji:"",color:"#F59E0B",bgGradient:"linear-gradient(135deg, rgba(245, 158, 11, 0.12) 0%, rgba(217, 119, 6, 0.08) 100%)",borderColor:"rgba(245, 158, 11, 0.30)",description:"Minimal allocation - tracking position"},"F-CAP":{tier:6,name:"CAPPED",shortName:"Capped",emoji:"",color:"#94A3B8",bgGradient:"linear-gradient(135deg, rgba(148, 163, 184, 0.10) 0%, rgba(100, 116, 139, 0.06) 100%)",borderColor:"rgba(148, 163, 184, 0.25)",description:"F grade - reduced allocation"},BLEEDING:{tier:7,name:"REDUCED",shortName:"Reduced",emoji:"",color:"#F59E0B",bgGradient:"linear-gradient(135deg, rgba(245, 158, 11, 0.08) 0%, rgba(217, 119, 6, 0.04) 100%)",borderColor:"rgba(245, 158, 11, 0.20)",description:"Pattern underperforming - reduced allocation"},CAUTION:{tier:6,name:"CAUTION",shortName:"Caution",emoji:"",color:"#F59E0B",bgGradient:"linear-gradient(135deg, rgba(245, 158, 11, 0.10) 0%, rgba(217, 119, 6, 0.06) 100%)",borderColor:"rgba(245, 158, 11, 0.25)",description:"Multiple loss patterns - conservative allocation"},MINIMAL:{tier:8,name:"MINIMAL",shortName:"Min",emoji:"",color:"#94A3B8",bgGradient:"linear-gradient(135deg, rgba(148, 163, 184, 0.08) 0%, rgba(100, 116, 139, 0.04) 100%)",borderColor:"rgba(148, 163, 184, 0.20)",description:"Calibration-adjusted minimal allocation"}};if(e&&o[e])return{...o[e],unitRange:`${t}u`,confidenceScore:i};let l;return t>=4.5?l="ELITE":t>=3.5?l="HIGH":t>=2.5?l="GOOD":t>=1.5?l="MODERATE":t>=1?l="LOW":l="MINIMAL",{...o[l],unitRange:`${t}u`,confidenceScore:i}}class kV{constructor(){this.weights={dratings:.9,haslametrics:.1},this.grades={A:5,B:3,C:1,D:-3,F:-100},this.minEV=3,this.minProbability=.35,this.maxOdds=300,this.minOdds=-1e3,this.confidenceData=null}setConfidenceWeights(e){this.confidenceData=e,console.log(" Dynamic confidence weights loaded into calculator")}calculateEnsemblePrediction(e){const{dratings:t,haslametrics:i,odds:o}=e;if(!o||!o.awayOdds||!o.homeOdds)return{error:"Missing odds data",grade:"N/A"};let l=null,c=null,u="LOW",h=null,m=null,f=null;if(t&&t.awayWinProb&&i&&(l=t.awayWinProb*this.weights.dratings+this.estimateHaslaProbability(e,"away")*this.weights.haslametrics,c=1-l,u="HIGH",t.awayScore&&t.homeScore&&i.awayScore&&i.homeScore&&(h=t.awayScore*this.weights.dratings+i.awayScore*this.weights.haslametrics,m=t.homeScore*this.weights.dratings+i.homeScore*this.weights.haslametrics,f=h+m)),!t||!t.awayWinProb||!i)return{error:"Requires BOTH D-Ratings AND Haslametrics",grade:"N/A"};let x=null,b=0,S=null;if(t.awayScore&&t.homeScore&&i.awayScore&&i.homeScore){const te=t.awayScore>t.homeScore,le=i.awayScore>i.homeScore;x=te===le,b=x?2:1;const ve=t.awayScore-t.homeScore,xe=i.awayScore-i.homeScore;S=ve+xe}const w=this.oddsToProb(o.awayOdds),T=this.oddsToProb(o.homeOdds),E=l,A=c,_=E-w,B=A-T,I=this.calculateEV(E,o.awayOdds),L=this.calculateEV(A,o.homeOdds),M=I>=L?"away":"home",R=M==="away"?I:L,j=M==="away"?_:B,F=this.getGrade(R),z=M==="away"?o.awayOdds:o.homeOdds,P=Ou(z),V=f3(F,z),N=bV(F,z),Z={prediction:{grade:F,bestEV:R,ensembleAwayProb:E,ensembleHomeProb:A},bet:{odds:z,team:M==="away"?e.awayTeam:e.homeTeam},awayTeam:e.awayTeam,homeTeam:e.homeTeam},Q=M==="away"?E:A;this.calculateOptimalUnits(R,Q,z);const H=wV(Z,this.confidenceData),U=H.units,K=H.tier||"MODERATE",X=H.score||0,re=H.factors||[],me=H.patternROI,ke=Math.min(R,25);return{ensembleAwayProb:Math.round(l*1e3)/1e3,ensembleHomeProb:Math.round(c*1e3)/1e3,calibratedAwayProb:Math.round(E*1e3)/1e3,calibratedHomeProb:Math.round(A*1e3)/1e3,ensembleAwayScore:h?Math.round(h*10)/10:null,ensembleHomeScore:m?Math.round(m*10)/10:null,ensembleTotal:f?Math.round(f*10)/10:null,modelConfluence:b,modelsAgree:x,combinedMargin:S?Math.round(S*10)/10:null,marketAwayProb:Math.round(w*1e3)/1e3,marketHomeProb:Math.round(T*1e3)/1e3,awayEdge:Math.round(_*1e3)/1e3,homeEdge:Math.round(B*1e3)/1e3,awayEV:Math.round(I*10)/10,homeEV:Math.round(L*10)/10,bestBet:M,bestTeam:M==="away"?e.awayTeam:e.homeTeam,bestEV:Math.round(ke*10)/10,rawEV:Math.round(R*10)/10,bestEdge:Math.round(j*1e3)/1e3,bestOdds:z,grade:F,simplifiedGrade:V.grade,confidence:u,unitSize:U,confidenceTier:K,confidenceScore:X,confidenceFactors:re,oddsRange:P,oddsRangeName:V.oddsRangeName,historicalROI:me||V.historicalROI||0,qualityEmoji:N,dratingsProb:M==="away"?t?.awayWinProb:t?.homeWinProb,haslametricsProb:i?M==="away"?this.estimateHaslaProbability(e,"away"):this.estimateHaslaProbability(e,"home"):null,ensembleProb:M==="away"?l:c,calibratedProb:M==="away"?E:A,marketProb:M==="away"?w:T,dratingsAwayProb:t?.awayWinProb?Math.round(t.awayWinProb*1e3)/1e3:null,dratingsHomeProb:t?.homeWinProb?Math.round(t.homeWinProb*1e3)/1e3:null,dratingsAwayScore:t?.awayScore?Math.round(t.awayScore*10)/10:null,dratingsHomeScore:t?.homeScore?Math.round(t.homeScore*10)/10:null,haslametricsAwayProb:i?Math.round(this.estimateHaslaProbability(e,"away")*1e3)/1e3:null,haslametricsHomeProb:i?Math.round(this.estimateHaslaProbability(e,"home")*1e3)/1e3:null,haslametricsAwayScore:i?.awayScore?Math.round(i.awayScore*10)/10:null,haslametricsHomeScore:i?.homeScore?Math.round(i.homeScore*10)/10:null,dataQuality:e.dataQuality}}estimateHaslaProbability(e,t){const{haslametrics:i}=e;if(!i||!i.awayOffEff||!i.homeOffEff)return .5;const o=3,l=i.awayOffEff,u=i.homeOffEff+o-l,h=1/(1+Math.exp(-u/10));return t==="away"?1-h:h}oddsToProb(e){return e?e>0?100/(e+100):Math.abs(e)/(Math.abs(e)+100):.5}calculateEV(e,t,i=100){let o;t>0?o=1+t/100:o=1+100/Math.abs(t);const l=i*o;return e*l-i}calibrateWithMarket(e,t,i=.75){return e*i+t*(1-i)}calculateOptimalUnits(e,t,i){const o=i>0?1+i/100:1+100/Math.abs(i);let u=(t*(o-1)-(1-t))/(o-1)/4*100;return u=Math.max(.5,Math.min(5,u)),u=Math.round(u*2)/2,u}getGrade(e){return e>=this.grades.A?"A":e>=this.grades.B?"B":e>=this.grades.C?"C":e>=this.grades.D?"D":"F"}shouldBet(e){if(e.bestEV<this.minEV)return console.log(`    Filtered: EV too low (${e.bestEV.toFixed(1)}% < ${this.minEV}%)`),!1;if(e.grade==="D"||e.grade==="F")return console.log(`    Filtered: Grade ${e.grade} (never bet negative EV)`),!1;const t=e.bestBet==="away"?e.calibratedAwayProb:e.calibratedHomeProb;if(t<this.minProbability)return console.log(`    Filtered: Probability too low (${(t*100).toFixed(1)}% < ${this.minProbability*100}%)`),!1;if(e.bestOdds<this.minOdds)return console.log(`    Filtered: Extreme favorite (${e.bestOdds} < ${this.minOdds})`),!1;if(e.bestOdds>this.maxOdds)return console.log(`    Filtered: Extreme underdog (${e.bestOdds} > ${this.maxOdds})`),!1;const i=e.combinedMargin,o=e.bestBet==="away",l=o&&i>0||!o&&i<0;return e.modelsAgree!==!0?(console.log(`    Filtered: Models SPLIT (modelsAgree=${e.modelsAgree})`),!1):l?!0:(console.log(`    Filtered: Betting AGAINST predicted winner (pick=${e.bestBet}, margin=${i})`),!1)}filterRecommendations(e,t="B+"){const i=["A+","A","B+","B","C","D","F"],o=i.indexOf(t);return e.filter(l=>{const c=i.indexOf(l.prediction?.grade);return c>=0&&c<=o}).sort((l,c)=>{const u=i.indexOf(l.prediction.grade),h=i.indexOf(c.prediction.grade);return u!==h?u-h:c.prediction.bestEV-l.prediction.bestEV})}processGames(e){console.log(`
 Processing ${e.length} basketball games...`);const t=e.map(u=>({...u,prediction:this.calculateEnsemblePrediction(u)})),i=t.length,o=t.filter(u=>{if(u.prediction.error)return console.log(`     ${u.awayTeam} @ ${u.homeTeam}: ${u.prediction.error}`),!1;const h=this.shouldBet(u.prediction);return h&&console.log(`    ${u.awayTeam} @ ${u.homeTeam}: ${u.prediction.bestTeam} ${u.prediction.bestOdds} (${u.prediction.grade} grade, ${u.prediction.bestEV.toFixed(1)}% EV)`),h}),l=o.length,c=i-l;return console.log(`
 FILTER RESULTS:`),console.log(`   Total games: ${i}`),console.log(`   Quality bets: ${l} `),console.log(`   Filtered out: ${c} `),console.log(`   Filter rate: ${(c/i*100).toFixed(1)}%
`),o}}async function EV(){try{console.log(" Updating pattern ROI data...");const e=(await ci(mr(St,"basketball_bets"))).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.result?.outcome==="WIN"||l.result?.outcome==="LOSS");if(console.log(`   Found ${e.length} completed bets`),e.length===0){console.log("   No completed bets to analyze");return}const t={};e.forEach(l=>{const c=g0(l.prediction?.grade),u=l.prediction?.bestOdds||l.bet?.odds,h=Ou(u),m=`${c}_${h}`;t[m]||(t[m]={grade:c,oddsRange:h,patternKey:m,bets:[]}),t[m].bets.push(l)}),console.log(`   Analyzing ${Object.keys(t).length} patterns`);const i=mr(St,"basketball_pattern_performance");let o=0;for(const l in t){const c=t[l],u=_V(c.bets),h=$r(i,l);await dc(h,{grade:c.grade,oddsRange:c.oddsRange,patternKey:l,...u,lastUpdated:Fs(),lastBetDate:c.bets.reduce((m,f)=>{const x=f.date||f.id.split("_")[0];return x>m?x:m},"1970-01-01")},{merge:!0}),o++,u.totalBets>=5&&console.log(`   ${l}: ${u.totalBets} bets, ${u.winRate.toFixed(1)}% win, ${u.roi.toFixed(1)}% ROI`)}console.log(` Updated ${o} patterns in Firebase`)}catch(r){console.error(" Error updating pattern ROI:",r)}}function _V(r){let e=r.length,t=0,i=0,o=0,l=0;r.forEach(h=>{h.result?.outcome==="WIN"?t++:h.result?.outcome==="LOSS"&&i++;const m=h.result?.units||h.prediction?.unitSize||0;o+=m,l+=h.result?.profit||0});const c=e>0?t/e*100:0,u=o>0?l/o*100:0;return{totalBets:e,wins:t,losses:i,winRate:parseFloat(c.toFixed(1)),totalRisked:parseFloat(o.toFixed(2)),totalProfit:parseFloat(l.toFixed(2)),roi:parseFloat(u.toFixed(1)),sampleSizeReliable:e>=15}}async function RV(r,e){try{const t=`${r}_${e}`,i=await ci(Jr(mr(St,"basketball_pattern_performance"),$n("patternKey","==",t)));return i.empty?null:i.docs[0].data()}catch(t){return console.error(`Error fetching pattern ROI for ${r}_${e}:`,t),null}}function CV(r,e){if(!r)return!1;try{const t=r.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!t)return!1;let i=parseInt(t[1]);const o=parseInt(t[2]),l=t[3].toUpperCase();l==="PM"&&i<12&&(i+=12),l==="AM"&&i===12&&(i=0);const c=new Date(e);return c.setHours(i,o,0,0),new Date>c}catch(t){return console.error("Error parsing game time:",t),!1}}async function IV(){try{console.log(" Updating pending bets with live ROI data...");const r=await ci(Jr(mr(St,"basketball_bets"),$n("status","==","PENDING")));if(console.log(`   Found ${r.size} pending bets`),r.empty){console.log("   No pending bets to update");return}let e=0,t=0,i=0,o=0;for(const l of r.docs){const c=l.data(),u=l.id;if(CV(c.game?.gameTime,c.date)){t++;continue}const m=g0(c.prediction?.grade),f=c.bet?.odds,x=Ou(f);if(!m||!f||!x){console.log(`     Skipping ${u}: Missing grade or odds data`),i++;continue}const b=await RV(m,x);if(b&&b.sampleSizeReliable){const S=c.prediction?.unitSize||0,w=b.roi,T=m3(m,f);Math.abs(T-S)>=.5?(await Eu($r(St,"basketball_bets",u),{"prediction.unitSize":T,"prediction.historicalROI":w,"prediction.sampleSize":b.totalBets,"prediction.isLiveData":!0,lastUpdated:Fs()}),console.log(`    Updated ${u}: ${S}u  ${T}u (ROI: ${w.toFixed(1)}%)`),e++):o++}else i++}console.log(" Update summary:"),console.log(`   - Updated: ${e} bets`),console.log(`   - Skipped (game started): ${t}`),console.log(`   - Skipped (no data/change): ${i+o}`)}catch(r){console.error(" Error updating pending bets:",r)}}function FV(){const[r,e]=O.useState(!1),[t,i]=O.useState(0),[o,l]=O.useState(null);O.useEffect(()=>{c()},[]);async function c(){try{e(!0);const m=(await(await fetch("/basketball_teams.csv")).text()).trim().split(`
`),f={};for(let B=1;B<m.length;B++){const I=m[B];if(!I)continue;const[L,M,R]=I.split(",").map(j=>j.trim());if(L){const j=L.toLowerCase().replace(/[^a-z0-9]/g,"");f[j]=L}}console.log(` Loaded ${Object.keys(f).length} team mappings`);const x=await fetch("/basketball_results.json");if(!x.ok){console.log("No results file found yet");return}const S=(await x.json()).results||[];if(S.length===0){console.log("No completed games found");return}console.log(` Found ${S.length} completed games`);const w=Jr(mr(St,"basketball_bets"),$n("status","==","PENDING")),T=await ci(w);if(console.log(` Found ${T.size} pending bets (all dates)`),T.empty)return;const E={};T.docs.forEach(B=>{const I=B.data().date;E[I]=(E[I]||0)+1}),console.log(` Bet dates: ${JSON.stringify(E)}`),console.log(` Results available: ${S.length} games`),S.forEach(B=>console.log(`   - ${B.awayTeam} @ ${B.homeTeam}`));let A=0;const _=B=>B.toLowerCase().replace(/[^a-z0-9]/g,"");for(const B of T.docs){const I=B.data(),L=B.id;console.log(` [${I.date}] Grading bet: ${I.game?.awayTeam} @ ${I.game?.homeTeam}`);const M=S.find(K=>{const X=_(K.awayTeam),re=_(K.homeTeam),me=_(I.game?.awayTeam||""),ke=_(I.game?.homeTeam||"");return X===me&&re===ke});if(!M){console.log("     No result found yet");continue}const R=M.awayScore??null,j=M.homeScore??null,F=R!==null&&j!==null,z=I.betRecommendation?.type==="ATS"||I.isATSPick,P=I.betRecommendation?.type==="TOTAL"||I.isTotalsPick||I.bet?.market==="TOTAL";let V;if(P){if(!F){console.log("     Totals bet but no scores available  skipping for live grader");continue}const K=R+j,X=I.bet?.pick||I.totalsAnalysis?.direction||I.betRecommendation?.totalDirection,re=I.bet?.total||I.totalsAnalysis?.marketTotal||I.betRecommendation?.totalLine;X==="OVER"?V=K>re?"WIN":K===re?"PUSH":"LOSS":V=K<re?"WIN":K===re?"PUSH":"LOSS",console.log(`    TOTAL: ${X} ${re}, actual ${K}  ${V}`)}else if(z){if(!F){console.log("     ATS bet but no scores available  skipping for live grader");continue}const K=I.betRecommendation?.atsSpread||I.spreadAnalysis?.spread||I.bet?.spread,X=_(I.bet?.team||""),re=_(I.game?.awayTeam||""),me=X===re,le=(me?R:j)-(me?j:R),ve=le+K;V=ve>0?"WIN":ve===0?"PUSH":"LOSS",console.log(`    ATS: margin ${le}, spread ${K}, adjusted ${ve}  ${V}`)}else{const K=I.bet?.team||"",X=_(K),re=_(M.winnerTeam);V=X===re?"WIN":"LOSS"}const N=I.bet?.units||I.prediction?.unitSize||1,Z=z||P?-110:I.bet?.odds||-110;let Q;if(V==="WIN"){const K=Z>0?Z/100:100/Math.abs(Z);Q=N*K}else V==="PUSH"?Q=0:Q=-N;await Eu($r(St,"basketball_bets",L),{"result.winner":M.winner,"result.winnerTeam":M.winnerTeam,"result.loserTeam":M.loserTeam,"result.awayScore":R,"result.homeScore":j,"result.totalScore":F?R+j:null,"result.outcome":V,"result.profit":Q,"result.units":N,"result.fetched":!0,"result.fetchedAt":Date.now(),"result.source":"OddsTrader",status:"COMPLETED"}),A++;const H=V==="WIN"?"":"",U=Q>0?`+${Q.toFixed(2)}u`:`${Q.toFixed(2)}u`;console.log(`   ${H} ${V}: ${L}  ${U}`)}i(A),console.log(`
 Graded ${A}/${T.size} bets`),A>0&&(console.log(`
 Activating dynamic ROI system...`),await EV(),await IV(),console.log(" Dynamic ROI system updated!"),console.log("   Refresh page to see updated results!"))}catch(u){console.error("Error grading bets:",u),l(u.message)}finally{e(!1)}}return{grading:r,gradedCount:t,error:o}}const DV="https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/scoreboard",PV="https://ncaaproxy-lviwud3q2q-uc.a.run.app";async function BV(r=null){try{const[e,t]=await Promise.all([zV(),OV(r)]);console.log(` Fetched ${e.length} ESPN games, ${t.length} NCAA games`);const i=MV(e,t);return console.log(` Total games after merge: ${i.length}`),i}catch(e){return console.error("Error fetching games:",e),[]}}async function zV(){try{const r=await fetch(DV);if(!r.ok)throw new Error(`ESPN API error: ${r.status}`);return((await r.json()).events||[]).map(i=>LV(i))}catch(r){return console.warn("ESPN API failed, will use NCAA only:",r.message),[]}}async function OV(r=null){if(!r){const e=new Date,t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");r=`${t}${i}${o}`}try{const e=await fetch(`${PV}?date=${r}`);if(!e.ok)throw new Error(`NCAA API error: ${e.status}`);return((await e.json()).games||[]).map(o=>NV(o))}catch(e){return console.error("NCAA API failed:",e),[]}}function MV(r,e){const t=new Map;return r.forEach(i=>{const o=KT(i.awayTeam,i.homeTeam);t.set(o,{...i,source:"ESPN"})}),e.forEach(i=>{const o=KT(i.awayTeam,i.homeTeam);t.has(o)||t.set(o,{...i,source:"NCAA"})}),Array.from(t.values())}function KT(r,e){const t=l=>l.toLowerCase().replace(/[^a-z0-9]/g,""),i=t(r),o=t(e);return i<o?`${i}_${o}`:`${o}_${i}`}function LV(r){const e=r.competitions?.[0]||{},t=e.competitors||[],i=t.find(b=>b.homeAway==="away")||{},o=t.find(b=>b.homeAway==="home")||{},l=i.team?.shortDisplayName||i.team?.displayName||"",c=o.team?.shortDisplayName||o.team?.displayName||"",u=parseInt(i.score)||0,h=parseInt(o.score)||0,m=e.status||{},f=m.type||{};let x="pre";return f.state==="post"||f.completed?x="final":f.state==="in"&&(x="live"),{id:r.id,status:x,startTime:r.date,startTimeEpoch:new Date(r.date).getTime()/1e3,awayTeam:l,awayTeamFull:i.team?.displayName||"",awayScore:u,awayRank:i.curatedRank?.current||null,homeTeam:c,homeTeamFull:o.team?.displayName||"",homeScore:h,homeRank:o.curatedRank?.current||null,period:m.period||null,clock:m.displayClock||null,network:e.broadcasts?.[0]?.names?.[0]||null,venue:e.venue?.fullName||null,neutral:e.neutralSite||!1,_raw:r}}function NV(r){const e=r.game||{},t=e.away||{},i=e.home||{},o=i.names?.short||i.names?.full||"",l=t.names?.short||t.names?.full||"",c=parseInt(i.score)||0,u=parseInt(t.score)||0,h=e.gameState;return{id:e.gameID||r.id,status:h,startTime:e.startTime,startTimeEpoch:e.startTimeEpoch,awayTeam:o,awayTeamFull:i.names?.full||"",awayScore:c,awayRank:i.rank||null,homeTeam:l,homeTeamFull:t.names?.full||"",homeScore:u,homeRank:t.rank||null,period:e.currentPeriod||null,clock:e.contestClock||null,network:e.network||null,venue:e.venue||null,neutral:e.neutralSite||!1,_raw:r}}function $V(r,e,t){if(!r||!e||!r.awayTeam||!r.homeTeam||!e.awayTeam||!e.homeTeam)return!1;const i=Cm(t,e.awayTeam,"oddstrader"),o=Cm(t,e.homeTeam,"oddstrader");if(!i||!o)return!1;const c=(r.source||"NCAA")==="ESPN"?"espn_name":"ncaa_name";if(!i[c]||!o[c])return!1;const u=i[c],h=o[c],m=Kl(r.awayTeam,u)&&Kl(r.homeTeam,h),f=Kl(r.awayTeam,h)&&Kl(r.homeTeam,u);return m||f}function Kl(r,e){if(!r||!e)return!1;const t=l=>l.toLowerCase().trim().replace(/\buniversity\b/g,"").replace(/\bcollege\b/g,"").replace(/\bof\b/g,"").replace(/\bthe\b/g,"").replace(/\bstate\b/g,"st").replace(/\bsaint\b/g,"st").replace(/\bst\./g,"st").replace(/[^a-z0-9]/g,""),i=t(r),o=t(e);return!!(i===o||i.length>=4&&o.length>=4&&Math.min(i.length,o.length)/Math.max(i.length,o.length)>=.8&&(i.includes(o)||o.includes(i)))}function Cm(r,e,t){const i=e.toLowerCase().trim();for(const[o,l]of r){const c=l[t];if(c&&c.toLowerCase()===i)return l}return null}async function XT(r,e){const t=await BV();let i=0,o=0,l=0,c=0;const u=r.map(h=>{if(h.liveScore&&h.liveScore.status==="final")return o++,h;const m=t.find(f=>$V(f,h,e));if(m){i++,m.source==="ESPN"?l++:c++;const f=new Map;f.set(m.awayTeam.toLowerCase().trim(),m.awayScore),f.set(m.homeTeam.toLowerCase().trim(),m.homeScore);const x=Cm(e,h.awayTeam,"oddstrader"),b=Cm(e,h.homeTeam,"oddstrader"),S=m.source==="ESPN"?"espn_name":"ncaa_name";let w=0,T=0;if(x&&x[S]){const E=x[S].toLowerCase().trim();for(const[A,_]of f)if(Kl(A,E)){w=_;break}}if(b&&b[S]){const E=b[S].toLowerCase().trim();for(const[A,_]of f)if(Kl(A,E)){T=_;break}}return console.log(` ${m.source}: ${h.awayTeam} ${w}-${T} ${h.homeTeam}`),{...h,liveScore:{status:m.status,awayScore:w,homeScore:T,period:m.period,clock:m.clock,network:m.network,source:m.source,lastUpdated:new Date().toISOString()}}}return h});return console.log(` Matched ${i} games (${l} ESPN, ${c} NCAA), ${o} preserved`),u}function VV(r,e,t,i=6e4){XT(r,e).then(t);const o=setInterval(()=>{XT(r,e).then(t)},i);return()=>clearInterval(o)}function WV(r,e){if(!e||e.status!=="final")return null;const t=e.awayScore,i=e.homeScore;if(typeof t!="number"||typeof i!="number")return console.error(` Invalid scores in gradePrediction: away=${t}, home=${i}`),null;if(t<0||i<0)return console.error(` Negative scores in gradePrediction: away=${t}, home=${i}`),null;const o=t>i?"away":"home",l=Math.abs(t-i),c=r.dratings?.awayScore||r.haslametrics?.awayScore||0,u=r.dratings?.homeScore||r.haslametrics?.homeScore||0,h=c>u?"away":"home",m=c+u,f=t+i,x=h===o,b=Math.abs(c-t+(u-i))/2,S=Math.abs(m-f);let w,T;return x&&b<=5?(w="A+",T=4.3):x&&b<=10?(w="A",T=4):x&&b<=15?(w="B+",T=3.3):x?(w="B",T=3):l<=5?(w="C",T=2):l<=10?(w="D",T=1):(w="F",T=0),{grade:w,gradePoints:T,winnerCorrect:x,scoreError:Math.round(b*10)/10,totalError:Math.round(S*10)/10,predicted:{awayScore:Math.round(c*10)/10,homeScore:Math.round(u*10)/10,winner:h,total:Math.round(m*10)/10},actual:{awayScore:t,homeScore:i,winner:o,total:f,margin:l}}}function GV(r){const e={pre:{icon:"",text:"Scheduled",color:"#64748b"},live:{icon:"",text:"LIVE",color:"#ef4444"},final:{icon:"",text:"Final",color:"#10b981"}};return e[r]||e.pre}async function HV(r,e,t,i){if(t?.status!=="final"||t.awayScore===null||t.homeScore===null)return!1;try{const l=new Date().toLocaleString("en-US",{timeZone:"America/New_York"}),c=new Date(l),u=c.getFullYear(),h=String(c.getMonth()+1).padStart(2,"0"),m=String(c.getDate()).padStart(2,"0"),f=`${u}-${h}-${m}`,x=new Date(c);x.setDate(x.getDate()-1);const b=x.getFullYear(),S=String(x.getMonth()+1).padStart(2,"0"),w=String(x.getDate()).padStart(2,"0"),T=`${b}-${S}-${w}`,E=F=>F.replace(/\s+/g,"_").toUpperCase(),A=E(r),_=E(e),B=[`${f}_${A}_${_}_MONEYLINE_${A}_(AWAY)`,`${f}_${A}_${_}_MONEYLINE_${_}_(HOME)`,`${f}_${A}_${_}_SPREAD_${A}_(AWAY)`,`${f}_${A}_${_}_SPREAD_${_}_(HOME)`,`${f}_${A}_${_}_TOTAL_OVER`,`${f}_${A}_${_}_TOTAL_UNDER`,`${T}_${A}_${_}_MONEYLINE_${A}_(AWAY)`,`${T}_${A}_${_}_MONEYLINE_${_}_(HOME)`,`${T}_${A}_${_}_SPREAD_${A}_(AWAY)`,`${T}_${A}_${_}_SPREAD_${_}_(HOME)`,`${T}_${A}_${_}_TOTAL_OVER`,`${T}_${A}_${_}_TOTAL_UNDER`],I=t.awayScore>t.homeScore?r:e,L=t.awayScore+t.homeScore,M=F=>F.toLowerCase().replace(/[^a-z0-9]/g,""),R=i?.grade||"B";let j=!1;for(const F of B){const z=$r(St,"basketball_bets",F),P=await Vs(z);if(!P.exists())continue;const V=P.data();if(V.status==="COMPLETED")continue;console.log(` Grading bet ${F}`);const N=V.betRecommendation?.type==="ATS"||V.isATSPick,Z=V.betRecommendation?.type==="TOTAL"||V.isTotalsPick||V.bet?.market==="TOTAL";let Q;if(Z){const re=V.bet?.pick||V.totalsAnalysis?.direction||V.betRecommendation?.totalDirection,me=V.bet?.total||V.totalsAnalysis?.marketTotal||V.betRecommendation?.totalLine;re==="OVER"?Q=L>me?"WIN":L===me?"PUSH":"LOSS":Q=L<me?"WIN":L===me?"PUSH":"LOSS",console.log(`    TOTAL: ${re} ${me}, actual ${L}  ${Q}`)}else if(N){const re=V.betRecommendation?.atsSpread||V.spreadAnalysis?.spread||V.bet?.spread,me=M(V.bet.team),ke=M(r),te=me===ke,le=te?t.awayScore:t.homeScore,ve=te?t.homeScore:t.awayScore,xe=le-ve,ue=xe+re;Q=ue>0?"WIN":ue===0?"PUSH":"LOSS",console.log(`    ATS: margin ${xe}, spread ${re}, adjusted ${ue}  ${Q}`)}else{const re=M(V.bet.team),me=M(I);Q=re===me?"WIN":"LOSS"}const H=V.bet?.units||V.prediction?.unitSize||1,U=N||Z?-110:V.bet.odds;let K;if(Q==="WIN"){const re=U>0?U/100:100/Math.abs(U);K=H*re}else Q==="PUSH"?K=0:K=-H;const X=i?.grade||V.prediction?.grade||R;await Eu(z,{"result.awayScore":t.awayScore,"result.homeScore":t.homeScore,"result.totalScore":L,"result.winner":t.awayScore>t.homeScore?"AWAY":"HOME","result.winnerTeam":I,"result.outcome":Q,"result.profit":K,"result.units":H,"result.fetched":!0,"result.fetchedAt":Date.now(),"result.source":`${t.source||"NCAA"}_API_LIVE`,"prediction.grade":X,status:"COMPLETED",gradedAt:Date.now()}),console.log(` BET GRADED: ${F}  ${Q} ${K>0?"+":""}${K.toFixed(2)}u`),j=!0}return j}catch(o){return console.error(` BET GRADING FAILED: ${r} @ ${e}`),console.error("   Error:",o.message),console.error("   Code:",o.code),o.code==="permission-denied"?console.error("    Check Firebase rules for basketball_bets collection"):o.code==="unavailable"?console.error("    Firebase temporarily unavailable - will retry"):o.code==="not-found"&&console.error("    Bet document not found (likely no bet placed)"),!1}}function UV({liveScore:r,prediction:e,awayTeam:t,homeTeam:i}){if(!r)return null;const o=GV(r.status),l=r.status==="live";r.status;const c=window.innerWidth<768;return n.jsx("div",{style:{background:l?"linear-gradient(135deg, rgba(239, 68, 68, 0.12), rgba(220, 38, 38, 0.12))":"rgba(15, 23, 42, 0.4)",border:l?"1.5px solid rgba(239, 68, 68, 0.4)":"1px solid rgba(71, 85, 105, 0.25)",borderRadius:"8px",padding:c?"6px 8px":"8px",marginTop:"6px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:c?"11px":"12px",fontWeight:"700",color:o.color,flexShrink:0},children:[n.jsx("span",{style:{fontSize:c?"12px":"14px"},children:o.icon}),o.text]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c?"8px":"10px",fontSize:c?"20px":"22px",fontWeight:"900",flex:1,justifyContent:"center"},children:[n.jsx("span",{style:{fontSize:c?"12px":"13px",color:r.awayScore>r.homeScore?"#10b981":"rgba(255,255,255,0.75)",fontWeight:"700"},children:t.length>15?t.substring(0,12)+"...":t}),n.jsx("span",{style:{color:r.awayScore>r.homeScore?"#10b981":"#f1f5f9"},children:r.awayScore}),n.jsx("span",{style:{fontSize:"16px",color:"#64748b",fontWeight:"700"},children:"-"}),n.jsx("span",{style:{color:r.homeScore>r.awayScore?"#10b981":"#f1f5f9"},children:r.homeScore}),n.jsx("span",{style:{fontSize:c?"12px":"13px",color:r.homeScore>r.awayScore?"#10b981":"rgba(255,255,255,0.75)",fontWeight:"700"},children:i.length>15?i.substring(0,12)+"...":i})]}),l&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:c?"10px":"11px",fontWeight:"700",color:"#ef4444",flexShrink:0},children:[r.period&&n.jsx("span",{style:{color:"#94a3b8"},children:qV(r.period)}),r.clock&&n.jsx("span",{children:r.clock})]})]})})}function qV(r){return r===1?"1st Half":r===2?"2nd Half":r>2?`OT${r-2}`:""}function YV({currentFilter:r,onFilterChange:e,counts:t}){const i=[{value:"all",label:"All Games",icon:""},{value:"pre",label:"Scheduled",icon:""},{value:"live",label:"Live",icon:""},{value:"final",label:"Final",icon:""}];return n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},children:i.map(o=>{const l=t[o.value]||0,c=r===o.value;return n.jsxs("button",{onClick:()=>e(o.value),style:{background:c?"linear-gradient(135deg, #3b82f6, #2563eb)":"rgba(15, 23, 42, 0.5)",border:c?"2px solid #3b82f6":"1px solid rgba(71, 85, 105, 0.3)",color:c?"#ffffff":"#cbd5e1",padding:"10px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease"},onMouseEnter:u=>{c||(u.target.style.background="rgba(30, 41, 59, 0.8)",u.target.style.borderColor="rgba(71, 85, 105, 0.5)")},onMouseLeave:u=>{c||(u.target.style.background="rgba(15, 23, 42, 0.5)",u.target.style.borderColor="rgba(71, 85, 105, 0.3)")},children:[n.jsx("span",{children:o.icon}),n.jsx("span",{children:o.label}),l>0&&n.jsx("span",{style:{background:c?"rgba(255, 255, 255, 0.2)":"rgba(71, 85, 105, 0.5)",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",marginLeft:"4px"},children:l})]},o.value)})})}function t5(){const[r,e]=O.useState({totalBets:0,wins:0,losses:0,pending:0,winRate:0,unitsWon:0,roi:0,loading:!0}),[t,i]=O.useState({}),[o,l]=O.useState(!0);return O.useEffect(()=>{console.log(" Setting up basketball bet stats listener...");const c=Jr(mr(St,"basketball_bets")),u=Os(c,h=>{const m=h.docs.map(R=>({id:R.id,...R.data()}));console.log(` Loaded ${m.length} basketball bets from Firebase`);const f=m.filter(R=>R.result?.outcome),x=f.filter(R=>R.result.outcome==="WIN").length,b=f.filter(R=>R.result.outcome==="LOSS").length,S=m.filter(R=>!R.result?.outcome||R.status==="PENDING").length,w=f.length>0?x/f.length*100:0,T=f.reduce((R,j)=>R+(j.result.profit||0),0),E=f.reduce((R,j)=>{const F=j.result?.units||j.prediction?.unitSize||1;return R+F},0),A=E>0?T/E*100:0,_=[...f].sort((R,j)=>{const F=new Date(R.date||R.id.split("_")[0]);return new Date(j.date||j.id.split("_")[0])-F});let B=0,I=null;for(const R of _){const j=R.result?.outcome;if(j)if(I===null)I=j,B=1;else if(j===I)B++;else break}const L=B>0?`${I==="WIN"?"W":"L"}${B}`:"-",M={};f.forEach(R=>{const j=R.date||R.id.split("_")[0];M[j]||(M[j]={wins:0,losses:0,unitsWon:0,bets:[]}),R.result.outcome==="WIN"?M[j].wins++:R.result.outcome==="LOSS"&&M[j].losses++,M[j].unitsWon+=R.result.profit||0,M[j].bets.push(R)}),e({totalBets:m.length,gradedBets:f.length,wins:x,losses:b,pending:S,winRate:w,unitsWon:T,totalRisked:E,roi:A,currentStreak:L,streakType:I,loading:!1}),i(M),l(!1),console.log(` Basketball stats: ${x}-${b} (${w.toFixed(1)}%), ${T>0?"+":""}${T.toFixed(2)}u, ROI: ${A.toFixed(1)}%`)},h=>{console.error(" Error fetching basketball bet stats:",h),l(!1)});return()=>u()},[]),{stats:r,loading:o,dailyStats:t}}const KV=({bets:r,timeFilter:e="all",showSavantLine:t=!1,showPrimeLine:i=!1,primeFirst:o=!1})=>{const l=window.innerWidth<768,{timelineData:c,savantTimelineData:u}=O.useMemo(()=>{if(!r||r.length===0)return{timelineData:[],savantTimelineData:[]};let T=r.filter(j=>j.result&&j.result.outcome);if(e!=="all"){const j=new Date,F=new Date(j.getFullYear(),j.getMonth(),j.getDate()),z=new Date(F.getTime()-1440*60*1e3),P=new Date(j.getTime()-10080*60*1e3);T=T.filter(V=>{const N=V.timestamp?.toDate?.()||new Date(V.timestamp);return e==="today"?N>=F:e==="yesterday"?N>=z&&N<F:e==="week"?N>=P:!0})}const E=[...T].sort((j,F)=>{const z=j.timestamp?.toDate?.()||new Date(j.timestamp),P=F.timestamp?.toDate?.()||new Date(F.timestamp);return z-P});let A=0,_=0,B=0;const I=E.map((j,F)=>{const z=j.result?.profit||0,P=j.prediction?.grade||"B",V=j.savantPick===!0,N=j.prediction?.spreadBoost>0||j.isPrimePick||j.isATSPick;A+=z,V&&(_+=z),N&&(B+=z);const Z=j.timestamp?.toDate?.()||new Date(j.timestamp);return{index:F+1,date:Z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:Z,all:parseFloat(A.toFixed(2)),savant:parseFloat(_.toFixed(2)),prime:parseFloat(B.toFixed(2)),isSavant:V,isPrime:N,betDetails:{grade:P,profit:z,outcome:j.result?.outcome,teams:`${j.game?.awayTeam||"?"} @ ${j.game?.homeTeam||"?"}`,isSavant:V,isPrime:N}}}),L=E.filter(j=>j.savantPick===!0);let M=0;const R=L.map((j,F)=>{const z=j.result?.profit||0;M+=z;const P=j.timestamp?.toDate?.()||new Date(j.timestamp);return{index:F+1,date:P.toLocaleDateString("en-US",{month:"short",day:"numeric"}),savantOnly:parseFloat(M.toFixed(2))}});return{timelineData:I,savantTimelineData:R}},[r,e]),h=c.length>0?c[c.length-1].all:0,m=c.length>0?c[c.length-1].savant:0,f=c.length>0?c[c.length-1].prime:0,x=t&&c.some(T=>T.isSavant),b=i&&c.some(T=>T.isPrime),S=e==="all"?"All Time":e==="today"?"Today":e==="yesterday"?"Yesterday":e==="week"?"This Week":"All Time",w=({active:T,payload:E})=>{if(!T||!E||!E.length)return null;const A=E[0].payload,_=A.prime,B=A.all,I=A.savant,L=_>=0,M=o?L:B>=0;return o?n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:`1px solid ${L?"rgba(59, 130, 246, 0.4)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:l?"10px":"12px",padding:l?"0.875rem":"1rem",boxShadow:L?"0 8px 32px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 8px 32px rgba(239, 68, 68, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.05)",minWidth:l?"150px":"170px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:l?"0.75rem":"0.813rem",color:"rgba(59, 130, 246, 0.8)",marginBottom:"0.625rem",fontWeight:"700",letterSpacing:"0.02em"},children:[" ",A.date]}),n.jsxs("div",{style:{fontSize:l?"1.375rem":"1.625rem",fontWeight:"900",color:L?"#3B82F6":"#EF4444",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em",textShadow:L?"0 2px 12px rgba(59, 130, 246, 0.4)":"0 2px 12px rgba(239, 68, 68, 0.3)",marginBottom:"0.5rem"},children:[_>=0?"+":"",_.toFixed(2),"u"]}),A.betDetails&&A.betDetails.isPrime&&n.jsxs("div",{style:{paddingTop:"0.5rem",borderTop:"1px solid rgba(59, 130, 246, 0.15)"},children:[n.jsx("div",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.6)",marginBottom:"0.25rem",fontWeight:"600"},children:A.betDetails.teams}),n.jsxs("div",{style:{fontSize:l?"0.625rem":"0.688rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[n.jsx("span",{style:{color:A.betDetails.outcome==="WIN"?"#10B981":"#EF4444",fontWeight:"700"},children:A.betDetails.outcome}),n.jsxs("span",{style:{color:"rgba(255,255,255,0.5)",fontWeight:"600"},children:[A.betDetails.profit>=0?"+":"",A.betDetails.profit.toFixed(2),"u"]})]})]})]}):n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:`1px solid ${A.betDetails?.isSavant?"rgba(251, 191, 36, 0.3)":M?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:l?"10px":"12px",padding:l?"0.875rem":"1rem",boxShadow:M?"0 8px 32px rgba(16, 185, 129, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 8px 32px rgba(239, 68, 68, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.05)",minWidth:l?"160px":"180px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:l?"0.75rem":"0.875rem",color:"rgba(255,255,255,0.6)",marginBottom:"0.5rem",fontWeight:"600",letterSpacing:"0.02em"},children:[A.betDetails?.isSavant&&n.jsx("span",{children:""}),A.date,"  Bet #",A.index]}),n.jsxs("div",{style:{marginBottom:x?"0.5rem":"0.625rem"},children:[n.jsx("div",{style:{fontSize:"0.625rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.125rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"All Picks"}),n.jsxs("div",{style:{fontSize:l?"1.125rem":"1.375rem",fontWeight:"900",color:M?"#10B981":"#EF4444",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em",textShadow:M?"0 2px 12px rgba(16, 185, 129, 0.3)":"0 2px 12px rgba(239, 68, 68, 0.3)"},children:[B>=0?"+":"",B.toFixed(2),"u"]})]}),x&&I!==0&&n.jsxs("div",{style:{marginBottom:"0.625rem"},children:[n.jsx("div",{style:{fontSize:"0.625rem",color:"rgba(251, 191, 36, 0.7)",marginBottom:"0.125rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"0.25rem"},children:" Savant Picks"}),n.jsxs("div",{style:{fontSize:l?"0.938rem":"1.125rem",fontWeight:"800",color:I>=0?"rgba(251, 191, 36, 0.95)":"#EF4444",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em"},children:[I>=0?"+":"",I.toFixed(2),"u"]})]}),A.betDetails&&n.jsxs("div",{style:{paddingTop:"0.625rem",borderTop:"1px solid rgba(255, 255, 255, 0.08)"},children:[n.jsx("div",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.25rem",fontWeight:"600"},children:A.betDetails.teams}),n.jsxs("div",{style:{fontSize:l?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.45)",display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[A.betDetails.isSavant&&n.jsx("span",{style:{background:"rgba(251, 191, 36, 0.15)",border:"1px solid rgba(251, 191, 36, 0.3)",color:"rgba(251, 191, 36, 0.95)",padding:"0.125rem 0.375rem",borderRadius:"4px",fontWeight:"700",fontSize:"0.563rem"},children:"SAVANT"}),A.betDetails.isPrime&&n.jsx("span",{style:{background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.3)",color:"rgba(59, 130, 246, 0.95)",padding:"0.125rem 0.375rem",borderRadius:"4px",fontWeight:"700",fontSize:"0.563rem"},children:"PRIME"}),n.jsx("span",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"0.125rem 0.375rem",borderRadius:"4px",fontWeight:"700"},children:A.betDetails.grade}),n.jsx("span",{style:{color:A.betDetails.outcome==="WIN"?"#10B981":"#EF4444",fontWeight:"700"},children:A.betDetails.outcome}),n.jsxs("span",{style:{fontWeight:"600"},children:[A.betDetails.profit>=0?"+":"",A.betDetails.profit.toFixed(2),"u"]})]})]})]})};return c.length===0?n.jsx("div",{style:{background:`
          linear-gradient(135deg, 
            rgba(15, 23, 42, 0.7) 0%, 
            rgba(30, 41, 59, 0.5) 50%,
            rgba(15, 23, 42, 0.7) 100%)
        `,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"1px solid rgba(16, 185, 129, 0.12)",borderRadius:l?"14px":"16px",padding:l?"2rem":"3rem",marginBottom:l?"1.5rem":"2rem",textAlign:"center"},children:n.jsxs("div",{style:{fontSize:l?"0.938rem":"1.063rem",color:"rgba(255,255,255,0.5)",fontWeight:"600"},children:["No bets found for ",S.toLowerCase()]})}):n.jsxs("div",{style:{background:`
        linear-gradient(135deg, 
          rgba(15, 23, 42, 0.7) 0%, 
          rgba(30, 41, 59, 0.5) 50%,
          rgba(15, 23, 42, 0.7) 100%)
      `,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:o?"1px solid rgba(59, 130, 246, 0.2)":"1px solid rgba(16, 185, 129, 0.12)",borderRadius:l?"14px":"16px",padding:l?"1.25rem":"2rem",marginBottom:l?"1.5rem":"2rem",boxShadow:o?"0 8px 32px rgba(59, 130, 246, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.03)":"0 8px 32px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255, 255, 255, 0.03)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:"-30%",left:"20%",width:"300px",height:"300px",background:o?"radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%)":"radial-gradient(circle, rgba(16, 185, 129, 0.08) 0%, transparent 70%)",pointerEvents:"none",filter:"blur(50px)"}}),n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:l?"1.5rem":"2rem",flexWrap:"wrap",gap:l?"0.75rem":"1rem",position:"relative",zIndex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l?"0.75rem":"1rem"},children:[n.jsxs("div",{style:{background:o?"linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%)":"linear-gradient(135deg, #10B981 0%, #059669 100%)",padding:l?"0.625rem":"0.75rem",borderRadius:l?"10px":"11px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:o?"0 6px 20px rgba(59, 130, 246, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1) inset":"0 6px 20px rgba(16, 185, 129, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.1) inset",position:"relative",overflow:"hidden",flexShrink:0},children:[n.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"200%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",animation:"shimmerChart 3s infinite",pointerEvents:"none"}}),n.jsx(ar,{size:l?18:22,color:"#ffffff",strokeWidth:2.5})]}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:l?"1.063rem":"1.375rem",fontWeight:"900",color:o?"#60A5FA":"#34D399",margin:0,letterSpacing:"-0.03em",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',textShadow:o?"0 2px 16px rgba(59, 130, 246, 0.4)":"0 2px 16px rgba(16, 185, 129, 0.3)"},children:o?"Prime Picks Performance":"Profit Over Time"}),n.jsxs("p",{style:{fontSize:l?"0.688rem":"0.813rem",color:o?"rgba(59, 130, 246, 0.7)":"rgba(255,255,255,0.6)",margin:"0.25rem 0 0 0",fontWeight:"600"},children:[S,"  ",o?`${c.filter(T=>T.isPrime).length} Prime bets`:`${c.length} bets tracked`]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[o&&b&&n.jsxs("div",{style:{background:f>=0?"linear-gradient(135deg, rgba(59, 130, 246, 0.22) 0%, rgba(139, 92, 246, 0.15) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.18) 0%, rgba(220, 38, 38, 0.12) 100%)",border:`2px solid ${f>=0?"rgba(59, 130, 246, 0.5)":"rgba(239, 68, 68, 0.35)"}`,borderRadius:l?"12px":"14px",padding:l?"0.875rem 1.25rem":"1rem 2rem",textAlign:"center",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",boxShadow:f>=0?"0 8px 24px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 4px 16px rgba(239, 68, 68, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.08)"},children:[n.jsx("div",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(59, 130, 246, 1)",marginBottom:"0.5rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.1em",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.375rem"},children:" Prime V2"}),n.jsxs("div",{style:{fontSize:l?"1.5rem":"2rem",fontWeight:"900",color:f>=0?"#3B82F6":"#EF4444",fontFeatureSettings:"'tnum'",letterSpacing:"-0.04em",textShadow:f>=0?"0 2px 20px rgba(59, 130, 246, 0.4)":"0 2px 16px rgba(239, 68, 68, 0.3)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[f>=0?"+":"",f,"u"]})]}),!o&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{background:h>=0?"linear-gradient(135deg, rgba(16, 185, 129, 0.18) 0%, rgba(5, 150, 105, 0.12) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.18) 0%, rgba(220, 38, 38, 0.12) 100%)",border:`1px solid ${h>=0?"rgba(16, 185, 129, 0.35)":"rgba(239, 68, 68, 0.35)"}`,borderRadius:l?"10px":"11px",padding:l?"0.625rem 1rem":"0.75rem 1.5rem",textAlign:"center",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",boxShadow:h>=0?"0 4px 16px rgba(16, 185, 129, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.08)":"0 4px 16px rgba(239, 68, 68, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.08)"},children:[n.jsx("div",{style:{fontSize:l?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.6)",marginBottom:"0.375rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.08em"},children:"Current"}),n.jsxs("div",{style:{fontSize:l?"1.25rem":"1.625rem",fontWeight:"900",color:h>=0?"#10B981":"#EF4444",fontFeatureSettings:"'tnum'",letterSpacing:"-0.04em",textShadow:h>=0?"0 2px 16px rgba(16, 185, 129, 0.3)":"0 2px 16px rgba(239, 68, 68, 0.3)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[h>=0?"+":"",h,"u"]})]}),x&&n.jsxs("div",{style:{background:m>=0?"linear-gradient(135deg, rgba(251, 191, 36, 0.18) 0%, rgba(245, 158, 11, 0.12) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.18) 0%, rgba(220, 38, 38, 0.12) 100%)",border:`1px solid ${m>=0?"rgba(251, 191, 36, 0.35)":"rgba(239, 68, 68, 0.35)"}`,borderRadius:l?"10px":"11px",padding:l?"0.625rem 1rem":"0.75rem 1.5rem",textAlign:"center",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",boxShadow:m>=0?"0 4px 16px rgba(251, 191, 36, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.08)":"0 4px 16px rgba(239, 68, 68, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.08)"},children:[n.jsx("div",{style:{fontSize:l?"0.625rem":"0.688rem",color:"rgba(251, 191, 36, 0.8)",marginBottom:"0.375rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:" Savant"}),n.jsxs("div",{style:{fontSize:l?"1.25rem":"1.625rem",fontWeight:"900",color:m>=0?"rgba(251, 191, 36, 0.95)":"#EF4444",fontFeatureSettings:"'tnum'",letterSpacing:"-0.04em",textShadow:m>=0?"0 2px 16px rgba(251, 191, 36, 0.3)":"0 2px 16px rgba(239, 68, 68, 0.3)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[m>=0?"+":"",m,"u"]})]})]})]})]}),!o&&(x||b)&&n.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:l?"0.75rem":"1.5rem",marginTop:l?"1rem":"1.5rem",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:l?"20px":"24px",height:"3px",background:h>=0?"#10B981":"#EF4444",borderRadius:"2px"}}),n.jsx("span",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.7)",fontWeight:"600"},children:"All Picks"})]}),x&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:l?"20px":"24px",height:"3px",background:"rgba(251, 191, 36, 0.9)",borderRadius:"2px"}}),n.jsx("span",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(251, 191, 36, 0.9)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.25rem"},children:" Savant Picks"})]}),b&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:l?"20px":"24px",height:"3px",background:"rgba(59, 130, 246, 0.9)",borderRadius:"2px",backgroundImage:"repeating-linear-gradient(90deg, rgba(59, 130, 246, 0.9), rgba(59, 130, 246, 0.9) 4px, transparent 4px, transparent 8px)"}}),n.jsx("span",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(59, 130, 246, 0.9)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.25rem"},children:" Prime"})]})]}),n.jsx("div",{style:{height:l?"250px":"300px",marginTop:l?"1rem":"1.5rem"},children:n.jsx(ij,{width:"100%",height:"100%",children:n.jsxs(sj,{data:c,margin:{top:5,right:l?10:30,left:l?0:20,bottom:5},children:[n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:"lineGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:h>=0?"#10B981":"#EF4444",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:h>=0?"#10B981":"#EF4444",stopOpacity:0})]}),n.jsxs("linearGradient",{id:"savantGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#FBBF24",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#FBBF24",stopOpacity:0})]}),n.jsxs("linearGradient",{id:"primeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})]}),n.jsx(oj,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.05)",vertical:!1}),n.jsx(aj,{dataKey:"date",stroke:"rgba(255, 255, 255, 0.3)",style:{fontSize:l?"0.625rem":"0.75rem"},tickLine:!1,interval:"preserveStartEnd",minTickGap:l?30:50}),n.jsx(lj,{stroke:"rgba(255, 255, 255, 0.3)",style:{fontSize:l?"0.625rem":"0.75rem"},tickLine:!1,tickFormatter:T=>`${T>=0?"+":""}${T}u`,width:l?45:60,domain:["auto","auto"]}),n.jsx(cj,{content:n.jsx(w,{}),cursor:{stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:1}}),n.jsx($l,{type:"monotone",dataKey:()=>0,stroke:"rgba(255, 255, 255, 0.2)",strokeWidth:1,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),o&&b&&n.jsx($l,{type:"monotone",dataKey:"prime",name:"Prime V2",stroke:"#3B82F6",strokeWidth:l?3:3.5,dot:!1,activeDot:{r:l?6:7,fill:"#3B82F6",strokeWidth:2,stroke:"rgba(255, 255, 255, 0.4)"},animationDuration:800,animationEasing:"ease-in-out",isAnimationActive:!0}),!o&&n.jsxs(n.Fragment,{children:[n.jsx($l,{type:"monotone",dataKey:"all",name:"All Picks",stroke:h>=0?"#10B981":"#EF4444",strokeWidth:l?2.5:3,dot:!1,activeDot:{r:l?5:6,fill:h>=0?"#10B981":"#EF4444",strokeWidth:2,stroke:"rgba(255, 255, 255, 0.3)"},animationDuration:800,animationEasing:"ease-in-out",isAnimationActive:!0}),x&&n.jsx($l,{type:"monotone",dataKey:"savant",name:"Savant Picks",stroke:"rgba(251, 191, 36, 0.9)",strokeWidth:l?2:2.5,strokeDasharray:"6 3",dot:!1,activeDot:{r:l?4:5,fill:"rgba(251, 191, 36, 0.95)",strokeWidth:2,stroke:"rgba(255, 255, 255, 0.3)"},animationDuration:1e3,animationEasing:"ease-in-out",isAnimationActive:!0})]})]})})})]})},ty=document.createElement("style");ty.textContent=`
  @keyframes shimmerChart {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
`;document.head.querySelector("[data-basketball-chart-styles]")||(ty.setAttribute("data-basketball-chart-styles",""),document.head.appendChild(ty));const XV=["5u MAX","4u HIGH","3u STRONG","2u MODERATE","1u SMALL","0.5u MINIMAL"],QV=["Heavy Favorite","Moderate Favorite","Slight Favorite","Pick'em","Slight Dog","Underdog"],ZV=["A+","A","B+","B","B-","C+","C","C-","F","Unknown"];function Jp({title:r,data:e,colorBase:t,icon:i,onSelect:o,selectedFilter:l,isMobile:c,sortOrder:u}){const h=Object.entries(e).sort((m,f)=>{if(u){const x=u.indexOf(m[0]),b=u.indexOf(f[0]);return(x===-1?999:x)-(b===-1?999:b)}return f[1].wins+f[1].losses-(m[1].wins+m[1].losses)});return n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.8) 0%, rgba(30, 41, 59, 0.6) 100%)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"14px",padding:c?"1rem":"1.25rem",height:"100%"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[n.jsx("span",{style:{fontSize:"1.125rem"},children:i}),n.jsx("span",{style:{fontSize:c?"0.875rem":"0.938rem",fontWeight:"700",color:"rgba(255,255,255,0.95)",textTransform:"uppercase",letterSpacing:"0.03em"},children:r})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:h.slice(0,5).map(([m,f])=>{const x=f.wins+f.losses,b=x>0?f.wins/x*100:0,S=l===m,w=f.profit>0;return n.jsxs("button",{onClick:()=>o(m),style:{width:"100%",textAlign:"left",padding:"0.625rem 0.75rem",background:S?`linear-gradient(135deg, ${t}25 0%, ${t}15 100%)`:"rgba(255,255,255,0.03)",border:S?`1px solid ${t}50`:"1px solid transparent",borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.375rem"},children:[n.jsx("span",{style:{fontSize:c?"0.75rem":"0.813rem",fontWeight:"600",color:S?t:"rgba(255,255,255,0.85)"},children:m}),n.jsxs("span",{style:{fontSize:"0.688rem",fontWeight:"700",color:w?"#10B981":"#EF4444",fontFeatureSettings:"'tnum'"},children:[w?"+":"",f.profit.toFixed(1),"u"]})]}),n.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.1)",borderRadius:"3px",overflow:"hidden",marginBottom:"0.375rem"},children:n.jsx("div",{style:{width:`${b}%`,height:"100%",background:b>=60?"#10B981":b>=50?"#F59E0B":"#EF4444",borderRadius:"3px",transition:"width 0.3s ease"}})}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.625rem",color:"rgba(255,255,255,0.5)"},children:[n.jsxs("span",{children:[f.wins,"W - ",f.losses,"L"]}),n.jsxs("span",{style:{fontWeight:"700",color:b>=60?"#10B981":b>=50?"#F59E0B":"rgba(255,255,255,0.6)"},children:[b.toFixed(0),"%"]})]})]},m)})})]})}function JV({bets:r,isMobile:e}){const[t,i]=O.useState(!1),[o,l]=O.useState(20),[c,u]=O.useState("all"),[h,m]=O.useState(null),[f,x]=O.useState("all"),b=O.useMemo(()=>{const I=new Date,L=new Date(I.getFullYear(),I.getMonth(),I.getDate()),M=new Date(L.getTime()-1440*60*1e3),R=new Date(I.getTime()-10080*60*1e3),j=new Date(I.getTime()-720*60*60*1e3);return r.filter(F=>{if(!F.result?.outcome)return!1;const z=F.timestamp?.toDate?.()||new Date(F.timestamp||0);return f==="yesterday"?z>=M&&z<L:f==="week"?z>=R:f==="month"?z>=j:!0}).sort((F,z)=>{const P=F.timestamp?.toDate?.()||new Date(F.timestamp||0);return(z.timestamp?.toDate?.()||new Date(z.timestamp||0))-P})},[r,f]),S=O.useMemo(()=>{const I=F=>F?F<=-500?"Heavy Favorite":F<=-200?"Moderate Favorite":F<=-110?"Slight Favorite":F<110?"Pick'em":F<200?"Slight Dog":"Underdog":"Unknown",L=F=>F>=5?"5u MAX":F>=4?"4u HIGH":F>=3?"3u STRONG":F>=2?"2u MODERATE":F>=1?"1u SMALL":"0.5u MINIMAL",M={},R={},j={};return b.forEach(F=>{const z=F.bet?.odds,P=F.prediction?.grade||F.prediction?.qualityGrade||"Unknown",V=F.result?.outcome==="WIN",N=F.result?.profit||0;let Z=F.result?.units??F.staticUnitSize??F.prediction?.staticUnitSize??F.prediction?.unitSize??F.unitSize;if(!Z&&N!==0){if(!V)Z=Math.abs(N);else if(z){const U=z>0?z/100:100/Math.abs(z);Z=Math.round(N/U*10)/10}}Z=Z||1;const Q=L(Z);M[Q]||(M[Q]={wins:0,losses:0,profit:0,bets:[]}),M[Q][V?"wins":"losses"]++,M[Q].profit+=N,M[Q].bets.push(F);const H=I(z);R[H]||(R[H]={wins:0,losses:0,profit:0,bets:[]}),R[H][V?"wins":"losses"]++,R[H].profit+=N,R[H].bets.push(F),j[P]||(j[P]={wins:0,losses:0,profit:0,bets:[]}),j[P][V?"wins":"losses"]++,j[P].profit+=N,j[P].bets.push(F)}),{byUnits:M,byOdds:R,byGrade:j}},[b]),w=O.useMemo(()=>h?c==="units"?S.byUnits[h]?.bets||[]:c==="odds"?S.byOdds[h]?.bets||[]:c==="grade"?S.byGrade[h]?.bets||[]:b:b,[b,h,c,S]),T=w.slice(0,o),E=o<w.length,A=I=>I?(I.toDate?.()||new Date(I)).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"",_=I=>I?I>0?`+${I}`:I.toString():"-",B=(I,L)=>{h===L&&c===I?(m(null),u("all")):(m(L),u(I)),l(20)};return b.length?n.jsxs("div",{style:{marginBottom:"1.5rem"},children:[n.jsxs("button",{onClick:()=>i(!t),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:e?"0.875rem 1rem":"1rem 1.25rem",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",cursor:"pointer",color:"rgba(255,255,255,0.6)",marginBottom:t?"1rem":0,transition:"all 0.2s ease"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx(gB,{size:e?18:20,color:"rgba(59, 130, 246, 0.8)"}),n.jsxs("span",{style:{color:"rgba(255,255,255,0.9)",fontWeight:"600",fontSize:e?"0.875rem":"0.938rem"},children:[t?"Hide":"Show"," Bet History"]}),n.jsxs("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",background:"rgba(255,255,255,0.1)",padding:"0.125rem 0.5rem",borderRadius:"999px"},children:[b.length," picks"]})]}),t?n.jsx(Go,{size:e?18:20}):n.jsx(Wo,{size:e?18:20})]}),t&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.7) 0%, rgba(30, 41, 59, 0.5) 100%)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",padding:e?"1rem":"1.5rem",marginBottom:"1rem"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"1.25rem"},children:[n.jsx("div",{style:{fontSize:e?"1.125rem":"1.25rem",fontWeight:"800",color:"rgba(255,255,255,0.95)",marginBottom:"0.25rem",letterSpacing:"-0.02em"},children:" Performance Breakdown"}),n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.75rem"},children:"Click any category to filter picks below"}),n.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[{key:"all",label:"All Time"},{key:"month",label:"This Month"},{key:"week",label:"This Week"},{key:"yesterday",label:"Yesterday"}].map(({key:I,label:L})=>n.jsx("button",{onClick:()=>{x(I),m(null),u("all"),l(20)},style:{padding:e?"0.375rem 0.75rem":"0.5rem 1rem",background:f===I?"linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(59, 130, 246, 0.2) 100%)":"rgba(255,255,255,0.05)",border:f===I?"1px solid rgba(59, 130, 246, 0.5)":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:f===I?"#3B82F6":"rgba(255,255,255,0.7)",fontSize:e?"0.75rem":"0.813rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:L},I))})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:e?"1fr":"repeat(3, 1fr)",gap:"1rem"},children:[n.jsx(Jp,{title:"By Confidence",data:S.byUnits,colorBase:"#3B82F6",icon:"",onSelect:I=>B("units",I),selectedFilter:c==="units"?h:null,isMobile:e,sortOrder:XV}),n.jsx(Jp,{title:"By Odds Range",data:S.byOdds,colorBase:"#10B981",icon:"",onSelect:I=>B("odds",I),selectedFilter:c==="odds"?h:null,isMobile:e,sortOrder:QV}),n.jsx(Jp,{title:"By Grade",data:S.byGrade,colorBase:"#F59E0B",icon:"",onSelect:I=>B("grade",I),selectedFilter:c==="grade"?h:null,isMobile:e,sortOrder:ZV})]}),h&&n.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("span",{style:{fontSize:"0.813rem",color:"rgba(255,255,255,0.9)"},children:["Showing: ",n.jsx("strong",{style:{color:"#3B82F6"},children:h})," (",w.length," picks)"]}),n.jsx("button",{onClick:()=>{m(null),u("all")},style:{padding:"0.375rem 0.75rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",color:"rgba(255,255,255,0.7)",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Clear Filter"})]})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.6) 0%, rgba(30, 41, 59, 0.4) 100%)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",padding:e?"1rem":"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[n.jsx("div",{style:{fontSize:e?"0.938rem":"1rem",fontWeight:"700",color:"rgba(255,255,255,0.95)"},children:" Recent Picks"}),n.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)"},children:["Showing ",T.length," of ",w.length]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:e?"1fr auto auto auto":"2fr 1fr 1fr 1fr 1fr",gap:e?"0.5rem":"1rem",padding:"0.5rem 0",borderBottom:"1px solid rgba(255,255,255,0.06)",marginBottom:"0.5rem"},children:[n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase"},children:"Pick"}),!e&&n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase",textAlign:"center"},children:"Odds"}),n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase",textAlign:"center"},children:"Units"}),n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase",textAlign:"center"},children:"Result"}),n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase",textAlign:"right"},children:"P/L"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:T.map((I,L)=>{const M=I.result?.outcome==="WIN",R=I.result?.profit||0,j=I.betRecommendation?.type==="ATS"||I.isATSPick&&!I.isPrimePick,F=j?-110:I.bet?.odds;let z;if(j)z=I.betRecommendation?.atsUnits||I.prediction?.unitSize||1;else if(z=I.result?.units??I.staticUnitSize??I.prediction?.staticUnitSize??I.prediction?.unitSize??I.unitSize,!z&&R!==0){if(!M)z=Math.abs(R);else if(F){const N=F>0?F/100:100/Math.abs(F);z=Math.round(R/N*10)/10}}z=z||1;const V=I.betRecommendation?.type==="TOTAL"||I.isTotalsPick||I.bet?.market==="TOTAL"?`${I.bet?.pick||"TOTAL"} ${I.bet?.total||""}`:I.bet?.team||I.prediction?.pick||"Unknown";return n.jsxs("div",{style:{display:"grid",gridTemplateColumns:e?"1fr auto auto auto":"2fr 1fr 1fr 1fr 1fr",gap:e?"0.5rem":"1rem",padding:e?"0.625rem 0.5rem":"0.75rem 0.5rem",background:M?"linear-gradient(90deg, rgba(16, 185, 129, 0.08) 0%, transparent 100%)":"linear-gradient(90deg, rgba(239, 68, 68, 0.08) 0%, transparent 100%)",borderRadius:"8px",borderLeft:`3px solid ${M?"#10B981":"#EF4444"}`},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:0},children:[M?n.jsx(a0,{size:e?14:16,color:"#10B981",style:{flexShrink:0}}):n.jsx(YP,{size:e?14:16,color:"#EF4444",style:{flexShrink:0}}),n.jsxs("div",{style:{minWidth:0},children:[n.jsx("div",{style:{fontSize:e?"0.813rem":"0.875rem",fontWeight:"600",color:"rgba(255,255,255,0.95)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:V}),n.jsxs("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)"},children:[A(I.timestamp),e&&F&&`  ${_(F)}`]})]})]}),!e&&n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255,255,255,0.7)",textAlign:"center"},children:_(F)}),n.jsxs("div",{style:{fontSize:e?"0.813rem":"0.875rem",fontWeight:"700",color:"rgba(255,255,255,0.8)",textAlign:"center"},children:[z.toFixed(1),"u"]}),n.jsx("div",{style:{display:"flex",justifyContent:"center"},children:n.jsx("span",{style:{padding:e?"0.25rem 0.5rem":"0.25rem 0.625rem",borderRadius:"6px",fontSize:e?"0.688rem":"0.75rem",fontWeight:"800",background:M?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:M?"#10B981":"#EF4444",border:`1px solid ${M?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`},children:M?"WIN":"LOSS"})}),n.jsxs("div",{style:{fontSize:e?"0.813rem":"0.875rem",fontWeight:"800",color:R>=0?"#10B981":"#EF4444",textAlign:"right"},children:[R>=0?"+":"",R.toFixed(2),"u"]})]},I.id||L)})}),E&&n.jsxs("button",{onClick:()=>l(I=>I+20),style:{width:"100%",marginTop:"1rem",padding:"0.75rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3B82F6",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:["Load More (",w.length-o," remaining)"]}),n.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(255,255,255,0.03)",borderRadius:"10px",display:"flex",justifyContent:"space-around",gap:"1rem"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)",marginBottom:"0.25rem"},children:"Total Wins"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"800",color:"#10B981"},children:w.filter(I=>I.result?.outcome==="WIN").length})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)",marginBottom:"0.25rem"},children:"Total Losses"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"800",color:"#EF4444"},children:w.filter(I=>I.result?.outcome==="LOSS").length})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.4)",marginBottom:"0.25rem"},children:"Net Profit"}),n.jsxs("div",{style:{fontSize:"1rem",fontWeight:"800",color:w.reduce((I,L)=>I+(L.result?.profit||0),0)>=0?"#10B981":"#EF4444"},children:[w.reduce((I,L)=>I+(L.result?.profit||0),0)>=0?"+":"",w.reduce((I,L)=>I+(L.result?.profit||0),0).toFixed(2),"u"]})]})]})]})]})]}):null}function eW(){const{stats:r,loading:e}=t5(),[t,i]=O.useState(!1),[o,l]=O.useState(!1),[c,u]=O.useState([]),[h,m]=O.useState("all"),[f,x]=O.useState(!1),b=!f;O.useEffect(()=>{const F=Jr(mr(St,"basketball_bets")),z=Os(F,P=>{const V=P.docs.map(N=>({id:N.id,...N.data()}));console.log(` Dashboard: Loaded ${V.length} total bets for chart`),u(V)});return()=>z()},[]);const S=O.useMemo(()=>{if(!c||c.length===0)return{thisWeek:null,thisMonth:null,showTimeBreakdown:!1,bestRecent:{profit:0,period:"L10",count:0}};const F=new Date,z=new Date(F.getFullYear(),F.getMonth(),F.getDate());new Date(z.getTime()-1440*60*1e3);const P=new Date(F.getTime()-10080*60*1e3),V=new Date(F.getFullYear(),F.getMonth(),1),N=c.filter(Te=>!Te.result||!Te.result.outcome?!1:b?Te.prediction?.spreadBoost>0||Te.isPrimePick||Te.isATSPick:Te.savantPick),Z=[...N].sort((Te,$e)=>{const rt=Te.timestamp?.toDate?.()||new Date(Te.timestamp);return($e.timestamp?.toDate?.()||new Date($e.timestamp))-rt}),Q=Z.slice(0,5),H=Z.slice(0,10),U=Z.slice(0,20),K=Q.reduce((Te,$e)=>Te+($e.result?.profit||0),0),X=H.reduce((Te,$e)=>Te+($e.result?.profit||0),0),re=U.reduce((Te,$e)=>Te+($e.result?.profit||0),0),ke=[{profit:K,period:"L5",count:Q.length},{profit:X,period:"L10",count:H.length},{profit:re,period:"L20",count:U.length}].reduce((Te,$e)=>$e.profit>Te.profit?$e:Te),te=N.filter(Te=>(Te.timestamp?.toDate?.()||new Date(Te.timestamp))>=P),le=N.filter(Te=>(Te.timestamp?.toDate?.()||new Date(Te.timestamp))>=V),ve=Te=>{const $e=Te.filter(Tt=>Tt.result?.outcome==="WIN").length,rt=Te.filter(Tt=>Tt.result?.outcome==="LOSS").length,Ke=Te.reduce((Tt,Dt)=>Tt+(Dt.result?.profit||0),0),et=Te.length>0?$e/Te.length*100:0;return{record:`${$e}-${rt}`,profit:Ke,winRate:et,total:Te.length}},xe=ve(te),ue=ve(le),Re=te.length<N.length||le.length<N.length;return{thisWeek:xe,thisMonth:ue,showTimeBreakdown:Re,bestRecent:ke}},[c,b]),w=O.useMemo(()=>{if(!r&&!c.length)return r;const F=new Date,z=new Date(F.getFullYear(),F.getMonth(),F.getDate()),P=new Date(z.getTime()-1440*60*1e3),V=new Date(F.getTime()-10080*60*1e3);let N=c.filter(re=>{if(!re.result||!re.result.outcome)return!1;if(b){if(!(re.prediction?.spreadBoost>0||re.isPrimePick||re.isATSPick))return!1}else if(!re.savantPick)return!1;const me=re.timestamp?.toDate?.()||new Date(re.timestamp);return h==="today"?me>=z:h==="yesterday"?me>=P&&me<z:h==="week"?me>=V:!0});const Z=N.filter(re=>re.result?.outcome==="WIN").length,Q=N.filter(re=>re.result?.outcome==="LOSS").length,H=N.reduce((re,me)=>re+(me.result?.profit||0),0),U=N.reduce((re,me)=>{const te=me.betRecommendation?.type==="ATS"||me.isATSPick&&!me.isPrimePick?me.betRecommendation?.atsUnits||me.prediction?.unitSize||0:me.result?.units||me.prediction?.unitSize||0;return re+te},0),K=U>0?H/U*100:0,X=N.length>0?Z/N.length*100:0;return{wins:Z,losses:Q,winRate:X,unitsWon:H,totalRisked:U,roi:K,gradedBets:N.length,totalBets:N.length}},[r,c,h,b,f]),T=O.useMemo(()=>c.filter(F=>F.savantPick&&F.result?.outcome).length,[c]),E=O.useMemo(()=>c.filter(F=>F.result?.outcome?F.prediction?.spreadBoost>0||F.isPrimePick||F.isATSPick:!1).length,[c]);if(e)return n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"20px",padding:"2rem",marginBottom:"2rem",textAlign:"center"},children:n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-400"}),n.jsx("span",{style:{color:"rgba(255,255,255,0.6)"},children:"Loading performance data..."})]})});if(!r||r.totalBets===0)return null;const{wins:A,losses:_,winRate:B,unitsWon:I,totalRisked:L,roi:M,gradedBets:R}=w||r,j=window.innerWidth<768;return n.jsxs("div",{style:{background:`
        linear-gradient(135deg, #0A0E1A 0%, #111827 30%, #1F2937 60%, #0F172A 100%)
      `,border:b?"1px solid rgba(59, 130, 246, 0.2)":"1px solid rgba(251, 191, 36, 0.15)",borderRadius:"20px",padding:j?"1.25rem":"2rem",marginBottom:"2rem",boxShadow:b?"0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(59, 130, 246, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(251, 191, 36, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.05)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:b?`radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
             radial-gradient(circle at 80% 70%, rgba(139, 92, 246, 0.08) 0%, transparent 50%)`:`radial-gradient(circle at 20% 30%, rgba(251, 191, 36, 0.08) 0%, transparent 50%),
             radial-gradient(circle at 80% 70%, rgba(245, 158, 11, 0.06) 0%, transparent 50%)`,pointerEvents:"none",animation:"nebulaPulse 8s ease-in-out infinite"}}),n.jsxs("button",{onClick:()=>i(!t),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",background:"transparent",border:"none",cursor:"pointer",padding:0,marginBottom:t?"2rem":0,position:"relative",zIndex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:j?"0.875rem":"1rem"},children:[n.jsxs("div",{style:{width:j?"44px":"52px",height:j?"44px":"52px",background:b?"linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%)":"linear-gradient(135deg, #FBBF24 0%, #D97706 100%)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:j?"1.375rem":"1.625rem",boxShadow:b?"0 8px 24px rgba(59, 130, 246, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1) inset, 0 2px 0 rgba(255, 255, 255, 0.15) inset":"0 8px 24px rgba(251, 191, 36, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.1) inset, 0 2px 0 rgba(255, 255, 255, 0.15) inset",flexShrink:0,position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.15) 50%, transparent 100%)",animation:"iconShine 6s infinite",pointerEvents:"none"}}),n.jsx("span",{style:{position:"relative",zIndex:1},children:b?"":""})]}),n.jsxs("div",{style:{textAlign:"left"},children:[n.jsx("h2",{style:{fontSize:j?"1.125rem":"1.375rem",fontWeight:"900",color:b?"#60A5FA":"#FCD34D",letterSpacing:"-0.04em",margin:0,lineHeight:1.15,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',textShadow:b?"0 2px 20px rgba(59, 130, 246, 0.5), 0 0 40px rgba(59, 130, 246, 0.3)":"0 2px 20px rgba(251, 191, 36, 0.4)"},children:b?"Prime Picks":"Legacy Model"}),n.jsx("div",{style:{fontSize:j?"0.625rem":"0.688rem",color:b?"rgba(59, 130, 246, 0.9)":"rgba(251, 191, 36, 0.9)",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.12em",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:b?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{padding:"2px 6px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(139, 92, 246, 0.2) 100%)",border:"1px solid rgba(59, 130, 246, 0.5)",borderRadius:"4px",fontSize:"0.563rem",fontWeight:"900",letterSpacing:"0.1em",color:"#fff"},children:"V2"}),n.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"#3B82F6",boxShadow:"0 0 8px #3B82F6",animation:"pulse 2s infinite"}}),"Multi-Model Verified"]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"#FBBF24",boxShadow:"0 0 8px #FBBF24"}}),"All Savant Picks"]})})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[!t&&n.jsxs("div",{style:{fontSize:j?"0.813rem":"0.938rem",fontWeight:"800",color:I>=0?"#10B981":"#EF4444",background:I>=0?"linear-gradient(135deg, rgba(16, 185, 129, 0.18) 0%, rgba(5, 150, 105, 0.12) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.18) 0%, rgba(220, 38, 38, 0.12) 100%)",border:`1px solid ${I>=0?"rgba(16, 185, 129, 0.35)":"rgba(239, 68, 68, 0.35)"}`,padding:j?"0.5rem 0.875rem":"0.625rem 1.125rem",borderRadius:"10px",fontFeatureSettings:"'tnum'",whiteSpace:"nowrap",boxShadow:I>=0?"0 4px 12px rgba(16, 185, 129, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 4px 12px rgba(239, 68, 68, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",letterSpacing:"-0.02em"},children:[A,"-",_,"  ",I>=0?"+":"",I.toFixed(1),"u"]}),t?n.jsx(Go,{size:j?20:24,color:"rgba(255,255,255,0.5)"}):n.jsx(Wo,{size:j?20:24,color:"rgba(255,255,255,0.5)"})]})]}),t&&n.jsxs("div",{style:{position:"relative",zIndex:1},children:[n.jsx("div",{style:{marginBottom:j?"1.5rem":"2rem"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:j?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.55)",marginBottom:"0.875rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.12em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:"2px",height:"12px",background:"linear-gradient(180deg, #10B981 0%, transparent 100%)",borderRadius:"1px"}}),"TIME PERIOD"]}),n.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{value:"all",label:"All Time",color:"#10B981"},{value:"today",label:"Today",color:"#14B8A6"},{value:"yesterday",label:"Yesterday",color:"#3B82F6"},{value:"week",label:"This Week",color:"#8B5CF6"}].map(F=>{const z=h===F.value;return n.jsx("button",{onClick:()=>m(F.value),style:{background:z?`linear-gradient(135deg, ${F.color}22 0%, ${F.color}12 100%)`:"linear-gradient(135deg, rgba(30, 41, 59, 0.6) 0%, rgba(15, 23, 42, 0.6) 100%)",border:z?`1px solid ${F.color}50`:"1px solid rgba(255,255,255,0.08)",color:z?F.color:"rgba(255,255,255,0.7)",padding:j?"0.5rem 0.875rem":"0.5rem 1rem",borderRadius:"8px",fontSize:j?"0.75rem":"0.813rem",fontWeight:"700",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",boxShadow:z?`0 4px 12px ${F.color}20, inset 0 1px 0 rgba(255, 255, 255, 0.08)`:"0 2px 6px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255, 255, 255, 0.03)",letterSpacing:"-0.01em",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},onMouseEnter:P=>{!z&&!j&&(P.currentTarget.style.background="linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.8) 100%)",P.currentTarget.style.borderColor="rgba(255,255,255,0.15)",P.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:P=>{z||(P.currentTarget.style.background="linear-gradient(135deg, rgba(30, 41, 59, 0.6) 0%, rgba(15, 23, 42, 0.6) 100%)",P.currentTarget.style.borderColor="rgba(255,255,255,0.08)",P.currentTarget.style.transform="translateY(0)")},children:F.label},F.value)})})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:j?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.55)",marginBottom:"0.875rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.12em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:"2px",height:"12px",background:"linear-gradient(180deg, #3B82F6 0%, transparent 100%)",borderRadius:"1px"}}),"MODEL"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, rgba(15, 23, 42, 0.8) 0%, rgba(30, 41, 59, 0.6) 100%)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:j?"0.5rem 0.75rem":"0.625rem 1rem"},children:[n.jsxs("button",{onClick:()=>x(!1),style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:j?"0.5rem 0.75rem":"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",background:f?"transparent":"linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(139, 92, 246, 0.2) 100%)",boxShadow:f?"none":"0 4px 12px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},children:[n.jsx("span",{style:{fontSize:j?"0.875rem":"1rem"},children:""}),n.jsx("span",{style:{fontSize:j?"0.75rem":"0.813rem",fontWeight:"700",color:f?"rgba(255,255,255,0.5)":"#3B82F6"},children:"Prime V2"}),n.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"800",color:f?"rgba(255,255,255,0.4)":"rgba(59, 130, 246, 0.9)",background:f?"rgba(255,255,255,0.08)":"rgba(59, 130, 246, 0.15)",padding:"2px 6px",borderRadius:"4px"},children:E})]}),n.jsx("div",{style:{width:"1px",height:"24px",background:"rgba(255,255,255,0.15)"}}),n.jsxs("button",{onClick:()=>x(!0),style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:j?"0.5rem 0.75rem":"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",background:f?"linear-gradient(135deg, rgba(251, 191, 36, 0.25) 0%, rgba(245, 158, 11, 0.15) 100%)":"transparent",boxShadow:f?"0 4px 12px rgba(251, 191, 36, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"none"},children:[n.jsx("span",{style:{fontSize:j?"0.875rem":"1rem"},children:""}),n.jsx("span",{style:{fontSize:j?"0.75rem":"0.813rem",fontWeight:"700",color:f?"#FBBF24":"rgba(255,255,255,0.5)"},children:"Legacy"}),n.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"800",color:f?"rgba(251, 191, 36, 0.9)":"rgba(255,255,255,0.4)",background:f?"rgba(251, 191, 36, 0.15)":"rgba(255,255,255,0.08)",padding:"2px 6px",borderRadius:"4px"},children:T})]})]})]})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:j?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:j?"0.75rem":"1.5rem",marginBottom:j?"1.5rem":"2rem"},children:[n.jsx(Bl,{icon:n.jsx(fr,{size:20}),value:R,label:"Graded Bets",color:"rgba(255,255,255,0.9)",isMobile:j}),n.jsx(Bl,{icon:n.jsx(Ls,{size:20}),value:`${A}-${_}`,label:"Record",color:"#10B981",isMobile:j}),n.jsx(Bl,{icon:n.jsx(Tm,{size:20}),value:`${B.toFixed(1)}%`,label:"Win Rate",color:"#10B981",highlight:B>=60,isMobile:j}),n.jsx(Bl,{icon:n.jsx(C1,{size:20}),value:`${I>=0?"+":""}${I.toFixed(2)}u`,label:"Units Won",color:I>=0?"#10B981":"#EF4444",highlight:!0,isMobile:j}),n.jsx(Bl,{icon:n.jsx(ar,{size:20}),value:`${M>=0?"+":""}${M.toFixed(1)}%`,label:"ROI",color:M>=0?"#10B981":"#EF4444",highlight:M>=5,isMobile:j}),n.jsx(Bl,{icon:n.jsx(Wn,{size:20}),value:`${S?.bestRecent?.profit>=0?"+":""}${(S?.bestRecent?.profit||0).toFixed(2)}u`,label:`${S?.bestRecent?.period||"L10"} Best`,color:(S?.bestRecent?.profit||0)>=0?"#10B981":"#EF4444",highlight:(S?.bestRecent?.profit||0)>=2,isMobile:j})]}),S.showTimeBreakdown&&n.jsxs("button",{onClick:()=>l(!o),style:{width:"100%",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:j?"0.875rem":"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",marginBottom:"1.5rem",transition:"all 0.2s ease"},onMouseEnter:F=>{F.currentTarget.style.background="linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.04) 100%)"},onMouseLeave:F=>{F.currentTarget.style.background="linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsx(Wn,{size:j?18:20,color:"rgba(16, 185, 129, 0.8)"}),n.jsxs("span",{style:{color:"rgba(255,255,255,0.9)",fontWeight:"600",fontSize:j?"0.875rem":"0.938rem"},children:[o?"Hide":"Show"," Time Breakdown"]})]}),o?n.jsx(Go,{size:j?18:20}):n.jsx(Wo,{size:j?18:20})]}),S.showTimeBreakdown&&o&&S.thisMonth&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:j?"1fr":"repeat(2, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[n.jsx(QT,{title:" THIS MONTH",record:S.thisMonth.record,profit:S.thisMonth.profit,winRate:S.thisMonth.winRate,totalBets:S.thisMonth.total,color:"#D4AF37",isMobile:j}),n.jsx(QT,{title:" THIS WEEK",record:S.thisWeek.record,profit:S.thisWeek.profit,winRate:S.thisWeek.winRate,totalBets:S.thisWeek.total,color:"#EF4444",isMobile:j})]}),c&&c.filter(F=>F.result?.outcome).length>0&&n.jsx(JV,{bets:c,isMobile:j}),M>=10&&n.jsx("div",{style:{textAlign:"center",padding:"0.75rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(255, 215, 0, 0.1) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"12px",marginBottom:"1.5rem"},children:n.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700"},children:" Elite Performance!"})}),c&&c.length>0&&n.jsx(KV,{bets:c,timeFilter:h,showSavantLine:f&&T>0,showPrimeLine:!f&&E>0,primeFirst:!f})]})]})}function Bl({icon:r,value:e,label:t,color:i,highlight:o=!1,isMobile:l}){const[c,u]=O.useState(!1);return n.jsxs("div",{style:{background:o?`linear-gradient(135deg, ${i}12 0%, ${i}06 100%)`:`
          linear-gradient(135deg, 
            rgba(15, 23, 42, 0.8) 0%, 
            rgba(30, 41, 59, 0.6) 50%,
            rgba(15, 23, 42, 0.8) 100%)
        `,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:o?`1px solid ${i}30`:"1px solid rgba(255,255,255,0.06)",borderRadius:l?"12px":"14px",padding:l?"1rem":"1.25rem",textAlign:"center",transition:"all 0.4s cubic-bezier(0.16, 1, 0.3, 1)",cursor:"default",position:"relative",overflow:"hidden",boxShadow:o?`0 4px 16px rgba(0,0,0,0.4), 0 0 20px ${i}15, inset 0 1px 0 rgba(255, 255, 255, 0.04)`:"0 2px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255, 255, 255, 0.03)",transform:c&&!l?"translateY(-3px) scale(1.02)":"translateY(0) scale(1)"},onMouseEnter:()=>!l&&u(!0),onMouseLeave:()=>!l&&u(!1),children:[o&&n.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"200%",height:"100%",background:`linear-gradient(90deg, transparent, ${i}10, transparent)`,animation:"shimmer 3s infinite",pointerEvents:"none"}}),n.jsx("div",{style:{width:l?"36px":"42px",height:l?"36px":"42px",background:o?`linear-gradient(135deg, ${i}20 0%, ${i}10 100%)`:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",marginBottom:l?"0.625rem":"0.875rem",boxShadow:o?`0 4px 12px ${i}20, inset 0 1px 0 rgba(255, 255, 255, 0.1)`:"0 2px 8px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05)",transition:"all 0.3s ease"},children:n.jsx("div",{style:{color:o?i:"#10B981",opacity:o?1:.9},children:r})}),n.jsx("div",{style:{fontSize:l?"1.375rem":"1.75rem",fontWeight:"900",color:o?i:"#F1F5F9",marginBottom:l?"0.375rem":"0.5rem",fontFeatureSettings:"'tnum'",letterSpacing:"-0.04em",textShadow:o?`0 2px 20px ${i}35, 0 4px 32px ${i}25`:"0 2px 8px rgba(0,0,0,0.4)",lineHeight:1,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:e}),n.jsx("div",{style:{fontSize:l?"0.625rem":"0.688rem",color:o?"rgba(255,255,255,0.75)":"rgba(255,255,255,0.55)",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.12em",lineHeight:1.3},children:t})]})}function QT({title:r,record:e,profit:t,winRate:i,totalBets:o,color:l,isMobile:c}){const u=t>=0,[h,m]=O.useState(!1);return n.jsxs("div",{style:{background:u?`linear-gradient(135deg, 
              rgba(16, 185, 129, 0.12) 0%, 
              rgba(5, 150, 105, 0.08) 50%,
              rgba(16, 185, 129, 0.06) 100%)`:`linear-gradient(135deg, 
              rgba(239, 68, 68, 0.12) 0%, 
              rgba(220, 38, 38, 0.08) 50%,
              rgba(239, 68, 68, 0.06) 100%)`,border:`1px solid ${u?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,borderRadius:c?"12px":"14px",padding:c?"1.125rem":"1.375rem",transition:"all 0.4s cubic-bezier(0.16, 1, 0.3, 1)",boxShadow:u?"0 4px 16px rgba(16, 185, 129, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.04)":"0 4px 16px rgba(239, 68, 68, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",transform:h&&!c?"translateY(-2px) scale(1.01)":"translateY(0) scale(1)",cursor:c?"default":"pointer",position:"relative",overflow:"hidden"},onMouseEnter:()=>!c&&m(!0),onMouseLeave:()=>!c&&m(!1),children:[n.jsx("div",{style:{position:"absolute",top:0,right:0,width:"120px",height:"120px",background:u?"radial-gradient(circle, rgba(16, 185, 129, 0.12) 0%, transparent 70%)":"radial-gradient(circle, rgba(239, 68, 68, 0.12) 0%, transparent 70%)",pointerEvents:"none",filter:"blur(30px)"}}),n.jsxs("div",{style:{position:"relative",zIndex:1},children:[n.jsxs("div",{style:{fontSize:c?"0.75rem":"0.813rem",fontWeight:"800",color:u?"rgba(16, 185, 129, 0.9)":"rgba(239, 68, 68, 0.9)",marginBottom:c?"0.875rem":"1rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:"3px",height:"14px",borderRadius:"2px",background:u?"#10B981":"#EF4444",boxShadow:u?"0 0 8px rgba(16, 185, 129, 0.5)":"0 0 8px rgba(239, 68, 68, 0.5)"}}),r]}),n.jsxs("div",{style:{marginBottom:c?"0.875rem":"1rem"},children:[n.jsx("div",{style:{fontSize:c?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.375rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Profit"}),n.jsxs("div",{style:{fontSize:c?"1.625rem":"1.875rem",fontWeight:"900",color:u?"#10B981":"#EF4444",fontFeatureSettings:"'tnum'",letterSpacing:"-0.04em",textShadow:u?"0 2px 16px rgba(16, 185, 129, 0.3)":"0 2px 16px rgba(239, 68, 68, 0.3)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[u?"+":"",t.toFixed(2),"u"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:c?"0.75rem":"1rem",paddingTop:c?"0.875rem":"1rem",borderTop:"1px solid rgba(255,255,255,0.08)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:c?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.25rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Record"}),n.jsx("div",{style:{fontSize:c?"0.875rem":"0.938rem",fontWeight:"800",color:"#E5E7EB",fontFeatureSettings:"'tnum'"},children:e})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:c?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.25rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Win Rate"}),n.jsxs("div",{style:{fontSize:c?"0.875rem":"0.938rem",fontWeight:"800",color:"#E5E7EB",fontFeatureSettings:"'tnum'"},children:[i.toFixed(1),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:c?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.25rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Bets"}),n.jsx("div",{style:{fontSize:c?"0.875rem":"0.938rem",fontWeight:"800",color:"#E5E7EB",fontFeatureSettings:"'tnum'"},children:o})]})]})]})]})}const ry=document.createElement("style");ry.textContent=`
  @keyframes nebulaPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
  }
  
  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
  
  @keyframes iconShine {
    0%, 100% { transform: translate(-50%, -50%) rotate(0deg); opacity: 0; }
    50% { transform: translate(50%, 50%) rotate(180deg); opacity: 1; }
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(0.9); }
  }
`;document.head.querySelector("[data-basketball-dashboard-styles]")||(ry.setAttribute("data-basketball-dashboard-styles",""),document.head.appendChild(ry));const wo=365,Tn={eFG:50,to:17,oreb:28,ftRate:32,close2:52,far2:36,dunks:70,threeP:34},ZT=r=>r<=25?{label:"ELITE",color:"#10B981",bg:"rgba(16,185,129,0.12)",glow:"rgba(16,185,129,0.15)"}:r<=50?{label:"EXCELLENT",color:"#06B6D4",bg:"rgba(6,182,212,0.10)",glow:"rgba(6,182,212,0.12)"}:r<=100?{label:"STRONG",color:"#3B82F6",bg:"rgba(59,130,246,0.10)",glow:"rgba(59,130,246,0.10)"}:r<=175?{label:"AVERAGE",color:"#F59E0B",bg:"rgba(245,158,11,0.10)",glow:"rgba(245,158,11,0.08)"}:r<=275?{label:"BELOW AVG",color:"#F97316",bg:"rgba(249,115,22,0.10)",glow:"rgba(249,115,22,0.08)"}:{label:"WEAK",color:"#EF4444",bg:"rgba(239,68,68,0.10)",glow:"rgba(239,68,68,0.08)"},kg=(r,e=12)=>{if(r.length<=e)return r;const t={"North Carolina":"UNC","South Carolina":"S Carolina",Massachusetts:"UMass",Connecticut:"UConn","Mississippi State":"Miss St",Mississippi:"Ole Miss","Michigan State":"Mich St","Ohio State":"Ohio St","Penn State":"Penn St","Florida State":"FSU","Arizona State":"ASU","San Diego State":"SDSU","Kansas State":"K-State","Oklahoma State":"Okla St","Iowa State":"Iowa St","Virginia Tech":"Va Tech","Georgia Tech":"Ga Tech","Boston College":"BC","Wake Forest":"Wake","Notre Dame":"ND","Saint Louis":"SLU","Saint Mary's":"St Mary's","Northern Iowa":"UNI","Middle Tennessee":"MTSU","Louisiana Tech":"LA Tech","Western Kentucky":"WKU","Bowling Green":"BGSU","Texas A&M":"Texas A&M","Texas Tech":"Texas Tech"};for(const[c,u]of Object.entries(t))if(r.toLowerCase().includes(c.toLowerCase())&&u.length<=e)return u;if(r.includes(" State")&&r.replace(" State"," St").length<=e)return r.replace(" State"," St");const i={"North ":"N ","South ":"S ","East ":"E ","West ":"W ","Northern ":"N ","Southern ":"S ","Eastern ":"E ","Western ":"W "};let o=r;for(const[c,u]of Object.entries(i))if(o.startsWith(c)){o=u+o.slice(c.length);break}if(o.length<=e)return o;const l=r.split(" ");return l[0].length>=4&&l[0].length<=e?l[0]:r.slice(0,e-2)+".."},qi=r=>r<=25?"#10B981":r<=75?"#22D3EE":r<=150?"#3B82F6":r<=250?"#F59E0B":"#EF4444",zl=(r,e,t)=>{const i=t?r-e:e-r;return i>4?"#10B981":i>1.5?"#22D3EE":i>-1.5?"#94A3B8":i>-4?"#F59E0B":"#EF4444"},JT="matchup-intel-v5-anims";if(typeof document<"u"&&!document.getElementById(JT)){const r=document.createElement("style");r.id=JT,r.textContent=`
    @keyframes mi5-pulse { 0%,100% { opacity: 0.5; } 50% { opacity: 1; } }
    @keyframes mi5-dotPulse { 0%,100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.3); opacity: 1; } }
  `,document.head.appendChild(r)}const Eg=({color:r="rgba(99,102,241,0.25)"})=>n.jsx("div",{style:{height:"1px",background:`linear-gradient(90deg, transparent, ${r}, transparent)`}}),e1=({title:r,subtitle:e,color:t="#FBBF24",isMobile:i})=>n.jsxs("div",{style:{marginBottom:i?"12px":"14px"},children:[n.jsx("div",{style:{fontSize:i?"13px":"14px",fontWeight:"900",color:t,letterSpacing:"0.1em",textShadow:`0 0 20px ${t}30`},children:r}),n.jsx("div",{style:{fontSize:i?"10px":"11px",color:"rgba(255,255,255,0.55)",marginTop:"3px"},children:e})]});function tW({barttorvik:r,awayTeam:e,homeTeam:t,pbpData:i={}}){const[o,l]=O.useState("awayOff_homeDef"),[c,u]=O.useState(!0),[h,m]=O.useState(!1),[f,x]=O.useState(null),b=O.useRef(null);if(O.useEffect(()=>{const J=()=>u(window.innerWidth<640);return J(),window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]),O.useEffect(()=>{const J=b.current;if(!J)return;const Ee=new IntersectionObserver(([Xe])=>{Xe.isIntersecting&&(m(!0),Ee.disconnect())},{threshold:.1});return Ee.observe(J),()=>Ee.disconnect()},[]),!r)return null;const{away:S,home:w}=r,T=o==="awayOff_homeDef",E=T?S:w,A=T?w:S,_=T?e:t,B=T?t:e,I=S.bartholomew_rank||S.rank||182,L=w.bartholomew_rank||w.rank||182,M=S.adjOff_rank||182,R=w.adjOff_rank||182,j=S.adjDef_rank||182,F=w.adjDef_rank||182,z=ZT(I),P=ZT(L),V=I<L?"away":"home",N=Math.abs(I-L),Z=c?10:14,Q=kg(e,Z),H=kg(t,Z),U=kg(_,Z),K=kg(B,Z),X=i[r.awayBartName||""]||null,re=i[r.homeBartName||""]||null,me=!!(X&&re),ke=Object.values(i||{}),le=[{offKey:"dunks_off_fg",defKey:"dunks_def_fg"},{offKey:"close2_off_fg",defKey:"close2_def_fg"},{offKey:"far2_off_fg",defKey:"far2_def_fg"},{offKey:"three_off_fg",defKey:"three_def_fg"}].map(({offKey:J,defKey:Ee})=>{const Xe=[...ke].sort((mt,be)=>(be[J]||0)-(mt[J]||0)),ut=[...ke].sort((mt,be)=>(mt[Ee]||0)-(be[Ee]||0));return{offKey:J,defKey:Ee,offSortedAll:Xe,defSortedAll:ut}}),ve=(J,Ee,Xe)=>{if(!J||ke.length===0)return Math.ceil(ke.length/2)||182;const ut=le.find(oe=>Xe?oe.defKey===Ee:oe.offKey===Ee);if(!ut)return Math.ceil(ke.length/2)||182;const be=(Xe?ut.defSortedAll:ut.offSortedAll).indexOf(J);return be>=0?be+1:Math.ceil(ke.length/2)},xe={power:{winner:V,gap:N,isRank:!0,awayVal:I,homeVal:L},offense:{winner:M<R?"away":"home",gap:Math.abs(M-R),isRank:!0,awayVal:M,homeVal:R},defense:{winner:j<F?"away":"home",gap:Math.abs(j-F),isRank:!0,awayVal:j,homeVal:F},shooting:{winner:S.eFG_off>w.eFG_off?"away":"home",gap:Math.abs(S.eFG_off-w.eFG_off),isRank:!1,awayVal:S.eFG_off,homeVal:w.eFG_off},turnovers:{winner:S.to_off<w.to_off?"away":"home",gap:Math.abs(S.to_off-w.to_off),isRank:!1,awayVal:S.to_off,homeVal:w.to_off},rebounding:{winner:S.oreb_off>w.oreb_off?"away":"home",gap:Math.abs(S.oreb_off-w.oreb_off),isRank:!1,awayVal:S.oreb_off,homeVal:w.oreb_off}},ue=J=>J.isRank?J.gap<5:J.gap<1.5,Re=Object.values(xe).filter(J=>J.winner==="away"&&!ue(J)).length,Te=Object.values(xe).filter(J=>J.winner==="home"&&!ue(J)).length,$e=Object.values(xe).filter(J=>ue(J)).length,rt=Re+Te||1,Ke=Math.round(Re/rt*100),et=Re>=Te?"away":"home",Tt=et==="away"?Q:H,Dt=Math.max(Re,Te),Ce=et==="away"?z:P,ot={off:E.eFG_off||50,def:A.eFG_def||50},Ae={off:E.to_off||17,def:A.to_def||17},fe={off:E.oreb_off||28,def:A.oreb_def||28},Ue={off:E.ftRate_off||32,def:A.ftRate_def||32},We={away:S.adjTempo||67.5,home:w.adjTempo||67.5};(()=>{const J=Math.abs(ot.off-ot.def),Ee=Math.abs(Ae.off-Ae.def),Xe=Math.abs(fe.off-fe.def);return J>=Ee&&J>=Xe?{label:"eFG% EDGE",value:`${ot.off>ot.def?"+":""}${(ot.off-ot.def).toFixed(1)}`,color:"#FBBF24"}:Ee>=Xe?{label:"TURNOVER EDGE",value:`${Ae.off<Ae.def?"+":""}${(Ae.def-Ae.off).toFixed(1)}`,color:"#F87171"}:{label:"REBOUND EDGE",value:`${fe.off>fe.def?"+":""}${(fe.off-fe.def).toFixed(1)}`,color:"#60A5FA"}})();const kt=c?"16px":"20px",Ve="ui-monospace, SFMono-Regular, monospace";return n.jsxs("div",{ref:b,style:{background:"linear-gradient(180deg, #020617 0%, #0B1120 50%, #0F172A 100%)",borderRadius:c?"14px":"18px",border:"1px solid rgba(99,102,241,0.12)",overflow:"hidden",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',opacity:h?1:0,transform:h?"translateY(0)":"translateY(12px)",transition:"opacity 0.6s ease, transform 0.6s ease"},children:[n.jsxs("div",{style:{background:`linear-gradient(135deg, ${z.glow} 0%, rgba(15,23,42,0.4) 50%, ${P.glow} 100%)`,borderBottom:"1px solid rgba(99,102,241,0.08)",padding:`${c?"18px":"24px"} ${kt}`},children:[n.jsx("div",{style:{textAlign:"center",marginBottom:c?"14px":"18px"},children:n.jsx("span",{style:{fontSize:c?"9px":"10px",fontWeight:"700",color:"rgba(167,139,250,0.6)",letterSpacing:"0.25em"},children:"MATCHUP INTELLIGENCE"})}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"6px"},children:[[{rank:I,tier:z,name:Q,isWinner:V==="away",offR:M,defR:j}].map(J=>n.jsxs("div",{style:{flex:1,textAlign:"center",padding:c?"12px 6px":"16px 10px",borderRadius:"12px",background:J.isWinner?`${J.tier.color}08`:"rgba(255,255,255,0.02)",border:J.isWinner?`1px solid ${J.tier.color}20`:"1px solid rgba(255,255,255,0.04)",boxShadow:J.isWinner?`inset 0 0 30px ${J.tier.color}08, 0 0 15px ${J.tier.color}10`:"none"},children:[n.jsxs("div",{style:{fontSize:c?"32px":"42px",fontWeight:"900",color:J.tier.color,fontFamily:Ve,lineHeight:1,textShadow:`0 0 ${J.isWinner?"25px":"10px"} ${J.tier.color}${J.isWinner?"60":"20"}`},children:["#",J.rank]}),n.jsx("div",{style:{fontSize:c?"14px":"16px",fontWeight:"700",color:"white",marginTop:"4px",opacity:J.isWinner?1:.55},children:J.name}),n.jsx("div",{style:{display:"inline-block",marginTop:"6px",padding:"3px 10px",borderRadius:"20px",background:J.tier.bg,border:`1px solid ${J.tier.color}30`,fontSize:c?"9px":"10px",fontWeight:"700",color:J.tier.color,letterSpacing:"0.08em"},children:J.tier.label}),n.jsx("div",{style:{display:"flex",gap:"4px",justifyContent:"center",marginTop:"8px"},children:[{label:"OFF",rank:J.offR},{label:"DEF",rank:J.defR}].map(Ee=>{const Xe=qi(Ee.rank);return n.jsxs("div",{style:{padding:"3px 6px",borderRadius:"5px",background:`${Xe}10`,border:`1px solid ${Xe}18`,textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"9px",fontWeight:"700",color:"rgba(255,255,255,0.75)"},children:Ee.label}),n.jsxs("div",{style:{fontSize:c?"12px":"13px",fontWeight:"800",color:Xe,fontFamily:Ve},children:["#",Ee.rank]})]},Ee.label)})})]},"away")),n.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.12)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"800",color:"rgba(255,255,255,0.4)",flexShrink:0},children:"VS"}),[{rank:L,tier:P,name:H,isWinner:V==="home",offR:R,defR:F}].map(J=>n.jsxs("div",{style:{flex:1,textAlign:"center",padding:c?"12px 6px":"16px 10px",borderRadius:"12px",background:J.isWinner?`${J.tier.color}08`:"rgba(255,255,255,0.02)",border:J.isWinner?`1px solid ${J.tier.color}20`:"1px solid rgba(255,255,255,0.04)",boxShadow:J.isWinner?`inset 0 0 30px ${J.tier.color}08, 0 0 15px ${J.tier.color}10`:"none"},children:[n.jsxs("div",{style:{fontSize:c?"32px":"42px",fontWeight:"900",color:J.tier.color,fontFamily:Ve,lineHeight:1,textShadow:`0 0 ${J.isWinner?"25px":"10px"} ${J.tier.color}${J.isWinner?"60":"20"}`},children:["#",J.rank]}),n.jsx("div",{style:{fontSize:c?"14px":"16px",fontWeight:"700",color:"white",marginTop:"4px",opacity:J.isWinner?1:.65},children:J.name}),n.jsx("div",{style:{display:"inline-block",marginTop:"6px",padding:"3px 10px",borderRadius:"20px",background:J.tier.bg,border:`1px solid ${J.tier.color}30`,fontSize:c?"9px":"10px",fontWeight:"700",color:J.tier.color,letterSpacing:"0.08em"},children:J.tier.label}),n.jsx("div",{style:{display:"flex",gap:"4px",justifyContent:"center",marginTop:"8px"},children:[{label:"OFF",rank:J.offR},{label:"DEF",rank:J.defR}].map(Ee=>{const Xe=qi(Ee.rank);return n.jsxs("div",{style:{padding:"3px 6px",borderRadius:"5px",background:`${Xe}10`,border:`1px solid ${Xe}18`,textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"9px",fontWeight:"700",color:"rgba(255,255,255,0.75)"},children:Ee.label}),n.jsxs("div",{style:{fontSize:c?"12px":"13px",fontWeight:"800",color:Xe,fontFamily:Ve},children:["#",Ee.rank]})]},Ee.label)})})]},"home"))]}),n.jsxs("div",{style:{marginTop:c?"14px":"18px"},children:[n.jsxs("div",{style:{position:"relative",height:"10px",borderRadius:"5px",background:"rgba(0,0,0,0.5)"},children:[n.jsx("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:h?`${Math.round(L/(I+L)*100)}%`:"0%",background:`linear-gradient(90deg, ${z.color}30, ${z.color})`,borderRadius:"5px 0 0 5px",transition:"width 1.2s cubic-bezier(0.4,0,0.2,1)",boxShadow:V==="away"?`0 0 10px ${z.color}40`:"none"}}),n.jsx("div",{style:{position:"absolute",right:0,top:0,height:"100%",width:h?`${Math.round(I/(I+L)*100)}%`:"0%",background:`linear-gradient(270deg, ${P.color}30, ${P.color})`,borderRadius:"0 5px 5px 0",transition:"width 1.2s cubic-bezier(0.4,0,0.2,1)",boxShadow:V==="home"?`0 0 10px ${P.color}40`:"none"}}),n.jsx("div",{style:{position:"absolute",left:"50%",top:"-1px",width:"2px",height:"12px",background:"rgba(255,255,255,0.2)",transform:"translateX(-50%)",borderRadius:"1px"}})]}),n.jsx("div",{style:{textAlign:"center",marginTop:"8px"},children:n.jsxs("span",{style:{display:"inline-block",padding:"4px 14px",borderRadius:"12px",background:N>75?"rgba(239,68,68,0.12)":N>30?"rgba(16,185,129,0.10)":N>10?"rgba(59,130,246,0.08)":"rgba(255,255,255,0.04)",border:`1px solid ${N>75?"rgba(239,68,68,0.25)":N>30?"rgba(16,185,129,0.2)":N>10?"rgba(59,130,246,0.15)":"rgba(255,255,255,0.06)"}`,fontSize:c?"10px":"11px",fontWeight:"800",color:N>75?"#F87171":N>30?"#34D399":N>10?"#60A5FA":"rgba(255,255,255,0.45)",fontFamily:Ve},children:[N>75?"MISMATCH ":"",V==="away"?Q:H," +",N," ranks"]})})]})]}),n.jsx(Eg,{}),n.jsxs("div",{style:{padding:kt},children:[n.jsx(e1,{title:"WHO HAS THE EDGE?",subtitle:"Category-by-category breakdown",color:"rgba(255,255,255,0.85)",isMobile:c}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"14px"},children:[n.jsx("span",{style:{fontSize:c?"11px":"12px",fontWeight:"700",color:Re>=Te?z.color:"rgba(255,255,255,0.5)",minWidth:c?"40px":"50px",textAlign:"right"},children:Q}),n.jsxs("div",{style:{flex:1,position:"relative",height:"16px",borderRadius:"8px",background:"rgba(0,0,0,0.5)",overflow:"visible"},children:[n.jsx("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:h?`${Ke}%`:"50%",background:`linear-gradient(90deg, ${z.color}40, ${z.color})`,borderRadius:"8px 0 0 8px",transition:"width 1.2s cubic-bezier(0.4,0,0.2,1)",boxShadow:Re>Te?`0 0 12px ${z.color}50`:"none"}}),n.jsx("div",{style:{position:"absolute",right:0,top:0,height:"100%",width:h?`${100-Ke}%`:"50%",background:`linear-gradient(270deg, ${P.color}40, ${P.color})`,borderRadius:"0 8px 8px 0",transition:"width 1.2s cubic-bezier(0.4,0,0.2,1)",boxShadow:Te>Re?`0 0 12px ${P.color}50`:"none"}}),n.jsx("div",{style:{position:"absolute",left:"50%",top:"-1px",width:"2px",height:"18px",background:"rgba(255,255,255,0.3)",transform:"translateX(-50%)",borderRadius:"1px",zIndex:2}}),n.jsx("div",{style:{position:"absolute",top:"50%",left:`${Ke}%`,width:"12px",height:"12px",borderRadius:"50%",background:Ce.color,border:"2px solid rgba(255,255,255,0.8)",transform:"translate(-50%,-50%)",animation:"mi5-dotPulse 2s infinite",boxShadow:`0 0 10px ${Ce.color}80`,zIndex:3,transition:"left 1.2s cubic-bezier(0.4,0,0.2,1)"}})]}),n.jsx("span",{style:{fontSize:c?"11px":"12px",fontWeight:"700",color:Te>=Re?P.color:"rgba(255,255,255,0.5)",minWidth:c?"40px":"50px"},children:H})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px",marginBottom:"14px"},children:[{label:"POWER",...xe.power},{label:"OFFENSE",...xe.offense},{label:"DEFENSE",...xe.defense},{label:"SHOOTING",...xe.shooting},{label:"TURNOVERS",...xe.turnovers},{label:"BOARDS",...xe.rebounding}].map(J=>{const Ee=ue(J),Xe=J.winner==="away"?z.color:P.color,ut=J.winner==="away"?Q:H;return n.jsxs("div",{style:{padding:c?"8px 4px":"10px 6px",borderRadius:"8px",background:Ee?"rgba(255,255,255,0.02)":`${Xe}08`,border:`1px solid ${Ee?"rgba(255,255,255,0.05)":`${Xe}20`}`,textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"9px",fontWeight:"700",color:"rgba(255,255,255,0.75)",letterSpacing:"0.06em",marginBottom:"3px",textTransform:"uppercase"},children:J.label}),n.jsx("div",{style:{fontSize:c?"12px":"13px",fontWeight:"800",color:Ee?"rgba(255,255,255,0.6)":Xe},children:Ee?"~EVEN":ut}),n.jsx("div",{style:{fontSize:"9px",color:"rgba(255,255,255,0.7)",fontFamily:Ve,marginTop:"2px"},children:J.isRank?`#${J.awayVal} vs #${J.homeVal}`:`${J.awayVal.toFixed(1)} vs ${J.homeVal.toFixed(1)}`})]},J.label)})}),n.jsx("div",{style:{textAlign:"center",padding:"10px 14px",borderRadius:"10px",background:`${Ce.color}08`,borderLeft:`3px solid ${Ce.color}40`},children:n.jsxs("span",{style:{fontSize:c?"12px":"13px",color:"rgba(255,255,255,0.85)",fontWeight:"600"},children:[Tt," wins ",n.jsxs("strong",{style:{color:Ce.color},children:[Dt," of ",6-$e]})," decided categories",$e>0?` (${$e} too close)`:""]})})]}),n.jsx(Eg,{color:`${Ce.color}25`}),me&&n.jsxs("div",{style:{padding:kt},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[n.jsx(e1,{title:"SCORING ZONES",subtitle:"Where they score and what the defense allows",isMobile:c}),n.jsxs("button",{onClick:()=>l(J=>J==="awayOff_homeDef"?"homeOff_awayDef":"awayOff_homeDef"),style:{display:"flex",alignItems:"center",gap:"4px",flexShrink:0,padding:c?"8px 12px":"6px 12px",borderRadius:"8px",background:"rgba(99,102,241,0.1)",border:"1px solid rgba(99,102,241,0.2)",color:"#A78BFA",fontSize:"10px",fontWeight:"700",cursor:"pointer",minHeight:"36px"},children:[n.jsx(vw,{size:13}),"FLIP"]})]}),(()=>{const J=T?X:re,Ee=T?re:X;if(!J||!Ee)return null;const Xe=[{key:"rim",label:"AT THE RIM",shortLabel:"Rim",offFg:J.dunks_off_fg,offShare:J.dunks_off_share,defFg:Ee.dunks_def_fg,defShare:Ee.dunks_def_share,avg:Tn.dunks,offRank:ve(J,"dunks_off_fg",!1),defRank:ve(Ee,"dunks_def_fg",!0)},{key:"close2",label:"CLOSE 2",shortLabel:"Close 2",offFg:J.close2_off_fg,offShare:J.close2_off_share,defFg:Ee.close2_def_fg,defShare:Ee.close2_def_share,avg:Tn.close2,offRank:ve(J,"close2_off_fg",!1),defRank:ve(Ee,"close2_def_fg",!0)},{key:"mid",label:"MID-RANGE",shortLabel:"Mid",offFg:J.far2_off_fg,offShare:J.far2_off_share,defFg:Ee.far2_def_fg,defShare:Ee.far2_def_share,avg:Tn.far2,offRank:ve(J,"far2_off_fg",!1),defRank:ve(Ee,"far2_def_fg",!0)},{key:"three",label:"3-POINT",shortLabel:"3PT",offFg:J.three_off_fg,offShare:J.three_off_share,defFg:Ee.three_def_fg,defShare:Ee.three_def_share,avg:Tn.threeP,offRank:ve(J,"three_off_fg",!1),defRank:ve(Ee,"three_def_fg",!0)}],ut=[...Xe].sort((be,oe)=>oe.offShare-be.offShare);[...Xe].sort((be,oe)=>oe.defShare-be.defShare);const mt=[...Xe].sort((be,oe)=>oe.defRank-be.defRank);return n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:(()=>{ke.length;const be=Object.fromEntries(Xe.map(Ne=>{const ze=Ne.defRank-Ne.offRank,tt=ze>100?"#10B981":ze>40?"#22D3EE":ze>-40?"#F59E0B":ze>-100?"#F97316":"#EF4444",_e=ze>100?"BIG EDGE":ze>40?"ADVANTAGE":ze>-40?"CONTESTED":ze>-100?"TOUGH":"LOCKDOWN",xt=Math.min(.65,Math.max(.2,Ne.offShare/65));return[Ne.key,{...Ne,rankEdge:ze,color:tt,edgeLabel:_e,opacity:xt}]})),oe=ut[0].key,Ie=mt[0].key,Pe=mt[mt.length-1].key,Fe=f||oe,he=be[Fe],He=Ne=>x(ze=>ze===Ne?null:Ne),Qe=Ne=>h?Fe===Ne?Math.min(be[Ne].opacity+.15,.75):be[Ne].opacity*.7:0,Oe=c?8:11,Le=c?18:20,Se=c?7:8.5,qe=Ne=>`courtGlow_${Ne}`;return n.jsxs("div",{style:{padding:c?"12px":"16px",borderRadius:"14px",background:"linear-gradient(180deg, rgba(8,12,28,0.85) 0%, rgba(15,23,42,0.5) 100%)",border:"1px solid rgba(255,255,255,0.06)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:"60%",height:"1px",background:"linear-gradient(90deg, transparent, rgba(167,139,250,0.4), transparent)"}}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:c?"8px":"12px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:c?"11px":"12px",fontWeight:"800",color:"rgba(255,255,255,0.9)",letterSpacing:"0.04em"},children:[U," ",n.jsx("span",{style:{color:"rgba(255,255,255,0.5)",fontWeight:"600"},children:"vs"})," ",K]}),n.jsx("div",{style:{fontSize:"9px",color:"rgba(255,255,255,0.55)",marginTop:"2px"},children:"Tap a zone for the full matchup breakdown"})]}),n.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",flexShrink:0},children:[n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",background:"#10B981"}}),n.jsx("span",{style:{fontSize:"8px",color:"rgba(255,255,255,0.6)"},children:"Edge"}),n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",background:"#F59E0B"}}),n.jsx("span",{style:{fontSize:"8px",color:"rgba(255,255,255,0.6)"},children:"Even"}),n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",background:"#EF4444"}}),n.jsx("span",{style:{fontSize:"8px",color:"rgba(255,255,255,0.6)"},children:"Tough"})]})]}),n.jsxs("div",{style:{position:"relative",borderRadius:"12px",overflow:"hidden",boxShadow:"0 0 30px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.05)"},children:[n.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"70%",height:"70%",transform:"translate(-50%, -50%)",background:`radial-gradient(ellipse, ${be[oe]?.color||"#22D3EE"}10 0%, transparent 70%)`,pointerEvents:"none"}}),n.jsxs("svg",{viewBox:c?"0 0 300 340":"0 0 300 310",style:{width:"100%",display:"block"},xmlns:"http://www.w3.org/2000/svg",children:[n.jsxs("defs",{children:[Object.entries(be).map(([Ne,ze])=>n.jsxs(Xd.Fragment,{children:[n.jsxs("radialGradient",{id:`zoneGrad_${Ne}`,cx:"50%",cy:"60%",r:"75%",children:[n.jsx("stop",{offset:"0%",stopColor:ze.color,stopOpacity:"0.85"}),n.jsx("stop",{offset:"50%",stopColor:ze.color,stopOpacity:"0.45"}),n.jsx("stop",{offset:"100%",stopColor:ze.color,stopOpacity:"0.08"})]}),n.jsxs("filter",{id:qe(Ne),x:"-20%",y:"-20%",width:"140%",height:"140%",children:[n.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"5",result:"blur"}),n.jsx("feColorMatrix",{in:"blur",type:"matrix",values:`0 0 0 0 ${parseInt(ze.color.slice(1,3),16)/255} 0 0 0 0 ${parseInt(ze.color.slice(3,5),16)/255} 0 0 0 0 ${parseInt(ze.color.slice(5,7),16)/255} 0 0 0 0.4 0`}),n.jsxs("feMerge",{children:[n.jsx("feMergeNode",{}),n.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]},`defs_${Ne}`)),n.jsxs("linearGradient",{id:"courtFloorGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"rgba(12,18,36,1)"}),n.jsx("stop",{offset:"100%",stopColor:"rgba(8,12,24,1)"})]}),n.jsxs("radialGradient",{id:"courtVignette",cx:"50%",cy:"80%",r:"60%",children:[n.jsx("stop",{offset:"0%",stopColor:"transparent"}),n.jsx("stop",{offset:"100%",stopColor:"rgba(0,0,0,0.5)"})]}),n.jsx("filter",{id:"textGlow",x:"-10%",y:"-10%",width:"120%",height:"120%",children:n.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1.5"})})]}),(()=>{const Ne=c?340:310,ze=c?300:272,tt=c?Ne:310,_e=c?115:120;return n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"0",y:"0",width:"300",height:Ne,fill:"url(#courtFloorGrad)"}),n.jsx("path",{d:`M 0,0 L 300,0 L 300,${tt} L 0,${tt} Z M 44,${tt} L 44,${_e} A 106,106 0 0,1 256,${_e} L 256,${tt} Z`,fill:"url(#zoneGrad_three)",fillRule:"evenodd",opacity:Qe("three"),style:{cursor:"pointer",transition:"opacity 0.5s ease"},onClick:()=>He("three"),filter:Fe==="three"?`url(#${qe("three")})`:void 0}),n.jsx("path",{d:`M 44,${tt} L 44,${_e} A 106,106 0 0,1 256,${_e} L 256,${tt} Z M 104,${tt} L 104,${_e-20} L 196,${_e-20} L 196,${tt} Z`,fill:"url(#zoneGrad_mid)",fillRule:"evenodd",opacity:Qe("mid"),style:{cursor:"pointer",transition:"opacity 0.5s ease"},onClick:()=>He("mid"),filter:Fe==="mid"?`url(#${qe("mid")})`:void 0}),n.jsx("rect",{x:"104",y:_e-20,width:"92",height:tt-(_e-20),rx:"2",fill:"url(#zoneGrad_close2)",opacity:Qe("close2"),style:{cursor:"pointer",transition:"opacity 0.5s ease"},onClick:()=>He("close2"),filter:Fe==="close2"?`url(#${qe("close2")})`:void 0}),n.jsx("circle",{cx:"150",cy:ze,r:c?24:28,fill:"url(#zoneGrad_rim)",opacity:Qe("rim"),style:{cursor:"pointer",transition:"opacity 0.5s ease"},onClick:()=>He("rim"),filter:Fe==="rim"?`url(#${qe("rim")})`:void 0}),n.jsx("rect",{x:"0",y:"0",width:"300",height:Ne,fill:"url(#courtVignette)",pointerEvents:"none"}),n.jsx("rect",{x:"0.5",y:"0.5",width:"299",height:Ne-1,rx:"2",fill:"none",stroke:"rgba(255,255,255,0.08)",strokeWidth:"1"}),n.jsx("path",{d:`M 44,${tt} L 44,${_e} A 106,106 0 0,1 256,${_e} L 256,${tt}`,fill:"none",stroke:"rgba(255,255,255,0.18)",strokeWidth:"1"}),n.jsx("rect",{x:"104",y:_e-20,width:"92",height:tt-(_e-20),rx:"1",fill:"none",stroke:"rgba(255,255,255,0.18)",strokeWidth:"1"}),n.jsx("path",{d:`M 122,${_e-20} A 28,28 0 0,1 178,${_e-20}`,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"0.8"}),n.jsx("path",{d:`M 122,${_e-20} A 28,28 0 0,0 178,${_e-20}`,fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:"0.8",strokeDasharray:"3 3"}),n.jsx("circle",{cx:"150",cy:ze,r:c?24:28,fill:"none",stroke:"rgba(255,255,255,0.12)",strokeWidth:"0.8"}),[_e-2,_e+14,_e+30,_e+48].map(xt=>n.jsxs(Xd.Fragment,{children:[n.jsx("line",{x1:"98",y1:xt,x2:"104",y2:xt,stroke:"rgba(255,255,255,0.1)",strokeWidth:"0.8"}),n.jsx("line",{x1:"196",y1:xt,x2:"202",y2:xt,stroke:"rgba(255,255,255,0.1)",strokeWidth:"0.8"})]},`hash_${xt}`)),n.jsx("line",{x1:"140",y1:tt-8,x2:"160",y2:tt-8,stroke:"rgba(255,255,255,0.4)",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("circle",{cx:"150",cy:tt-17,r:"4",fill:"none",stroke:"rgba(255,255,255,0.55)",strokeWidth:"1.2"}),Fe==="rim"&&n.jsx("circle",{cx:"150",cy:ze,r:c?28:32,fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.3",children:n.jsx("animate",{attributeName:"opacity",values:"0.15;0.4;0.15",dur:"2.5s",repeatCount:"indefinite"})}),Fe==="close2"&&n.jsx("rect",{x:"101",y:_e-23,width:"98",height:tt-(_e-23)+3,rx:"3",fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.25",children:n.jsx("animate",{attributeName:"opacity",values:"0.12;0.35;0.12",dur:"2.5s",repeatCount:"indefinite"})}),Fe==="mid"&&n.jsx("path",{d:`M 44,${tt} L 44,${_e} A 106,106 0 0,1 256,${_e} L 256,${tt}`,fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.2",children:n.jsx("animate",{attributeName:"opacity",values:"0.1;0.3;0.1",dur:"2.5s",repeatCount:"indefinite"})}),Fe==="three"&&n.jsx("rect",{x:"1",y:"1",width:"298",height:Ne-2,rx:"2",fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.15",children:n.jsx("animate",{attributeName:"opacity",values:"0.08;0.25;0.08",dur:"2.5s",repeatCount:"indefinite"})}),n.jsx("g",{onClick:()=>He("three"),style:{cursor:"pointer"},children:c?n.jsxs(n.Fragment,{children:[n.jsx("text",{x:"150",y:"22",textAnchor:"middle",fill:"rgba(255,255,255,0.5)",fontSize:"9",fontWeight:"800",letterSpacing:"0.12em",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.1s"},children:"3-POINT"}),n.jsxs("text",{x:"150",y:"48",textAnchor:"middle",fill:be.three.color,fontFamily:Ve,fontSize:"26",fontWeight:"900",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.2s"},children:[be.three.offFg.toFixed(1),"%"]}),n.jsxs("text",{x:"150",y:"63",textAnchor:"middle",fill:"rgba(255,255,255,0.35)",fontFamily:Ve,fontSize:"8.5",fontWeight:"700",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.3s"},children:[n.jsxs("tspan",{fill:be.three.offRank<=100?"#10B981":be.three.offRank<=200?"#F59E0B":"#EF4444",children:["#",be.three.offRank]}),n.jsx("tspan",{fill:"rgba(255,255,255,0.4)",children:" OFF vs "}),n.jsxs("tspan",{fill:be.three.defRank>=250?"#10B981":be.three.defRank>=150?"#F59E0B":"#EF4444",children:["#",be.three.defRank]}),n.jsx("tspan",{fill:"rgba(255,255,255,0.4)",children:" DEF"})]}),n.jsxs("text",{x:"150",y:"75",textAnchor:"middle",fill:"rgba(255,255,255,0.4)",fontSize:"7.5",fontWeight:"600",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.35s"},children:[be.three.offShare.toFixed(0),"% of shots"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"108",y:"10",width:"84",height:"72",rx:"8",fill:"rgba(0,0,0,0.5)",stroke:Fe==="three"?`${be.three.color}40`:"rgba(255,255,255,0.04)",strokeWidth:"1",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.1s"}}),n.jsx("text",{x:"150",y:"27",textAnchor:"middle",fill:"rgba(255,255,255,0.45)",fontSize:Oe,fontWeight:"700",letterSpacing:"0.1em",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.15s"},children:"3-POINT"}),n.jsxs("text",{x:"150",y:"52",textAnchor:"middle",fill:"white",fontFamily:Ve,fontSize:Le+1,fontWeight:"900",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.2s"},children:[be.three.offFg.toFixed(1),"%"]}),n.jsxs("text",{x:"150",y:"67",textAnchor:"middle",fill:be.three.color,fontFamily:Ve,fontSize:"9",fontWeight:"700",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.3s"},children:["#",be.three.offRank," OFF    #",be.three.defRank," DEF"]}),n.jsxs("text",{x:"150",y:"79",textAnchor:"middle",fill:"rgba(255,255,255,0.2)",fontSize:Se,fontWeight:"600",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.35s"},children:[be.three.offShare.toFixed(0),"% of shots"]})]})}),n.jsx("g",{onClick:()=>He("mid"),style:{cursor:"pointer"},children:c?n.jsxs(n.Fragment,{children:[n.jsx("text",{x:"34",y:_e+55,textAnchor:"middle",fill:"rgba(255,255,255,0.5)",fontSize:"8",fontWeight:"800",letterSpacing:"0.1em",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.1s"},children:"MID-RANGE"}),n.jsxs("text",{x:"34",y:_e+76,textAnchor:"middle",fill:be.mid.color,fontFamily:Ve,fontSize:"19",fontWeight:"900",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.2s"},children:[be.mid.offFg.toFixed(1),"%"]}),n.jsxs("text",{x:"34",y:_e+89,textAnchor:"middle",fill:"rgba(255,255,255,0.35)",fontFamily:Ve,fontSize:"7.5",fontWeight:"700",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.3s"},children:[n.jsxs("tspan",{fill:be.mid.offRank<=100?"#10B981":be.mid.offRank<=200?"#F59E0B":"#EF4444",children:["#",be.mid.offRank]}),n.jsx("tspan",{fill:"rgba(255,255,255,0.2)",children:" vs "}),n.jsxs("tspan",{fill:be.mid.defRank>=250?"#10B981":be.mid.defRank>=150?"#F59E0B":"#EF4444",children:["#",be.mid.defRank]})]}),n.jsxs("text",{x:"34",y:_e+100,textAnchor:"middle",fill:"rgba(255,255,255,0.4)",fontSize:"7",fontWeight:"600",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.35s"},children:[be.mid.offShare.toFixed(0),"% of shots"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"8",y:"170",width:"78",height:"66",rx:"8",fill:"rgba(0,0,0,0.55)",stroke:Fe==="mid"?`${be.mid.color}40`:"rgba(255,255,255,0.04)",strokeWidth:"1",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.1s"}}),n.jsx("text",{x:"47",y:"186",textAnchor:"middle",fill:"rgba(255,255,255,0.45)",fontSize:Oe,fontWeight:"700",letterSpacing:"0.1em",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.15s"},children:"MID-RANGE"}),n.jsxs("text",{x:"47",y:"207",textAnchor:"middle",fill:"white",fontFamily:Ve,fontSize:Le,fontWeight:"900",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.2s"},children:[be.mid.offFg.toFixed(1),"%"]}),n.jsxs("text",{x:"47",y:"220",textAnchor:"middle",fill:be.mid.color,fontFamily:Ve,fontSize:"8.5",fontWeight:"700",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.3s"},children:["#",be.mid.offRank,"  #",be.mid.defRank]}),n.jsxs("text",{x:"47",y:"233",textAnchor:"middle",fill:"rgba(255,255,255,0.25)",fontSize:Se,fontWeight:"600",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.35s"},children:[be.mid.offShare.toFixed(0),"% of shots"]})]})}),n.jsx("g",{onClick:()=>He("close2"),style:{cursor:"pointer"},children:c?n.jsxs(n.Fragment,{children:[n.jsx("text",{x:"150",y:_e+12,textAnchor:"middle",fill:"rgba(255,255,255,0.5)",fontSize:"9",fontWeight:"800",letterSpacing:"0.12em",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.1s"},children:"PAINT"}),n.jsxs("text",{x:"150",y:_e+42,textAnchor:"middle",fill:be.close2.color,fontFamily:Ve,fontSize:"28",fontWeight:"900",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.2s"},children:[be.close2.offFg.toFixed(1),"%"]}),n.jsxs("text",{x:"150",y:_e+58,textAnchor:"middle",fill:"rgba(255,255,255,0.35)",fontFamily:Ve,fontSize:"8.5",fontWeight:"700",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.3s"},children:[n.jsxs("tspan",{fill:be.close2.offRank<=100?"#10B981":be.close2.offRank<=200?"#F59E0B":"#EF4444",children:["#",be.close2.offRank]}),n.jsx("tspan",{fill:"rgba(255,255,255,0.4)",children:" OFF vs "}),n.jsxs("tspan",{fill:be.close2.defRank>=250?"#10B981":be.close2.defRank>=150?"#F59E0B":"#EF4444",children:["#",be.close2.defRank]}),n.jsx("tspan",{fill:"rgba(255,255,255,0.4)",children:" DEF"})]}),n.jsxs("text",{x:"150",y:_e+71,textAnchor:"middle",fill:"rgba(255,255,255,0.4)",fontSize:"7.5",fontWeight:"600",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.35s"},children:[be.close2.offShare.toFixed(0),"% of shots"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"113",y:"120",width:"74",height:"76",rx:"8",fill:"rgba(0,0,0,0.5)",stroke:Fe==="close2"?`${be.close2.color}40`:"rgba(255,255,255,0.04)",strokeWidth:"1",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.1s"}}),n.jsx("text",{x:"150",y:"137",textAnchor:"middle",fill:"rgba(255,255,255,0.45)",fontSize:Oe,fontWeight:"700",letterSpacing:"0.1em",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.15s"},children:"PAINT"}),n.jsxs("text",{x:"150",y:"163",textAnchor:"middle",fill:"white",fontFamily:Ve,fontSize:Le+4,fontWeight:"900",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.2s"},children:[be.close2.offFg.toFixed(1),"%"]}),n.jsxs("text",{x:"150",y:"179",textAnchor:"middle",fill:be.close2.color,fontFamily:Ve,fontSize:"9.5",fontWeight:"700",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.3s"},children:["#",be.close2.offRank," OFF    #",be.close2.defRank," DEF"]}),n.jsxs("text",{x:"150",y:"192",textAnchor:"middle",fill:"rgba(255,255,255,0.2)",fontSize:Se,fontWeight:"600",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.35s"},children:[be.close2.offShare.toFixed(0),"% of shots"]})]})}),n.jsx("g",{onClick:()=>He("rim"),style:{cursor:"pointer"},children:c?n.jsxs(n.Fragment,{children:[n.jsx("text",{x:"260",y:ze-22,textAnchor:"middle",fill:"rgba(255,255,255,0.5)",fontSize:"8",fontWeight:"800",letterSpacing:"0.1em",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.1s"},children:"RIM"}),n.jsxs("text",{x:"260",y:ze-2,textAnchor:"middle",fill:be.rim.color,fontFamily:Ve,fontSize:"19",fontWeight:"900",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.2s"},children:[be.rim.offFg.toFixed(1),"%"]}),n.jsxs("text",{x:"260",y:ze+11,textAnchor:"middle",fill:"rgba(255,255,255,0.35)",fontFamily:Ve,fontSize:"7.5",fontWeight:"700",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.3s"},children:[n.jsxs("tspan",{fill:be.rim.offRank<=100?"#10B981":be.rim.offRank<=200?"#F59E0B":"#EF4444",children:["#",be.rim.offRank]}),n.jsx("tspan",{fill:"rgba(255,255,255,0.2)",children:" vs "}),n.jsxs("tspan",{fill:be.rim.defRank>=250?"#10B981":be.rim.defRank>=150?"#F59E0B":"#EF4444",children:["#",be.rim.defRank]})]}),n.jsxs("text",{x:"260",y:ze+22,textAnchor:"middle",fill:"rgba(255,255,255,0.4)",fontSize:"7",fontWeight:"600",opacity:h?1:0,style:{transition:"opacity 0.4s ease 0.35s"},children:[be.rim.offShare.toFixed(0),"% of shots"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"214",y:"248",width:"78",height:"52",rx:"8",fill:"rgba(0,0,0,0.6)",stroke:Fe==="rim"?`${be.rim.color}40`:"rgba(255,255,255,0.04)",strokeWidth:"1",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.1s"}}),n.jsx("text",{x:"253",y:"262",textAnchor:"middle",fill:"rgba(255,255,255,0.45)",fontSize:Oe,fontWeight:"700",letterSpacing:"0.1em",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.15s"},children:"RIM"}),n.jsxs("text",{x:"253",y:"280",textAnchor:"middle",fill:"white",fontFamily:Ve,fontSize:Le,fontWeight:"900",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.2s"},children:[be.rim.offFg.toFixed(1),"%"]}),n.jsxs("text",{x:"253",y:"291",textAnchor:"middle",fill:be.rim.color,fontFamily:Ve,fontSize:"8",fontWeight:"700",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.3s"},children:["#",be.rim.offRank,"  #",be.rim.defRank]}),n.jsxs("text",{x:"253",y:"301",textAnchor:"middle",fill:"rgba(255,255,255,0.25)",fontSize:Se,fontWeight:"600",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.35s"},children:[be.rim.offShare.toFixed(0),"% of shots"]})]})}),!c&&Object.entries(be).map(([xt,Zt])=>{const wt=xt==="three"?{x:260,y:55}:xt==="mid"?{x:47,y:240}:xt==="close2"?{x:150,y:210}:{x:253,y:305},Ut=Zt.edgeLabel.length*5.5+12;return n.jsxs("g",{onClick:()=>He(xt),style:{cursor:"pointer"},children:[n.jsx("rect",{x:wt.x-Ut/2,y:wt.y-8,width:Ut,height:"16",rx:"8",fill:Zt.color,fillOpacity:h?.2:0,stroke:Zt.color,strokeOpacity:h?.3:0,strokeWidth:"0.8",style:{transition:"fill-opacity 0.5s ease 0.4s, stroke-opacity 0.5s ease 0.4s"}}),n.jsx("text",{x:wt.x,y:wt.y+3.5,textAnchor:"middle",fill:Zt.color,fontSize:"7.5",fontWeight:"800",letterSpacing:"0.06em",opacity:h?1:0,style:{transition:"opacity 0.5s ease 0.45s"},children:Zt.edgeLabel})]},`badge_${xt}`)})]})})()]})]}),n.jsxs("div",{style:{marginTop:"10px",padding:"0 2px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"6px"},children:[n.jsx("span",{style:{fontSize:"9px",fontWeight:"700",color:"rgba(255,255,255,0.7)",letterSpacing:"0.08em"},children:"SHOT DISTRIBUTION"}),n.jsxs("span",{style:{fontSize:"8px",color:"rgba(255,255,255,0.6)",marginLeft:"auto"},children:[U,"'s shot attempts by zone"]})]}),n.jsx("div",{style:{display:"flex",gap:"3px",borderRadius:"8px",overflow:"hidden"},children:ut.map((Ne,ze)=>{const tt=be[Ne.key],_e=Fe===Ne.key;return n.jsxs("div",{onClick:()=>He(Ne.key),style:{flex:Ne.offShare,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:c?"8px 2px":"6px 2px",background:_e?`${tt.color}20`:`${tt.color}08`,border:_e?`1px solid ${tt.color}40`:"1px solid rgba(255,255,255,0.04)",borderRadius:ze===0?"8px 0 0 8px":ze===ut.length-1?"0 8px 8px 0":"0",cursor:"pointer",transition:"all 0.3s ease",position:"relative",minWidth:c?"50px":"55px"},children:[n.jsxs("span",{style:{fontSize:c?"13px":"14px",fontWeight:"900",color:tt.color,fontFamily:Ve,lineHeight:1},children:[Ne.offShare.toFixed(0),"%"]}),n.jsx("span",{style:{fontSize:c?"8px":"9px",fontWeight:"700",color:"rgba(255,255,255,0.65)",letterSpacing:"0.03em",marginTop:"2px"},children:Ne.shortLabel}),c&&n.jsx("span",{style:{fontSize:"7px",fontWeight:"800",color:tt.color,marginTop:"3px",opacity:.8,letterSpacing:"0.02em"},children:tt.edgeLabel})]},`distBar_${Ne.key}`)})})]}),he&&(()=>{const Ne=zl(he.offFg,he.avg,!0),ze=zl(he.defFg,he.avg,!1),tt=he.key===oe,_e=he.key===Ie,xt=he.key===Pe;return he.offFg-he.avg,he.defFg-he.avg,n.jsxs("div",{style:{marginTop:"10px",padding:c?"12px 14px":"14px 16px",borderRadius:"10px",background:`linear-gradient(135deg, ${he.color}08 0%, rgba(15,23,42,0.4) 100%)`,border:`1px solid ${he.color}15`,position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg, transparent, ${he.color}50, transparent)`}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"10px",flexWrap:"wrap"},children:[n.jsx("span",{style:{fontSize:c?"13px":"14px",fontWeight:"800",color:"rgba(255,255,255,0.9)"},children:he.label}),n.jsx("span",{style:{fontSize:"9px",fontWeight:"800",color:he.color,padding:"2px 8px",borderRadius:"4px",background:`${he.color}18`,border:`1px solid ${he.color}20`,letterSpacing:"0.05em"},children:he.edgeLabel}),tt&&n.jsx("span",{style:{fontSize:"8px",fontWeight:"800",color:"#A78BFA",padding:"2px 6px",borderRadius:"4px",background:"rgba(167,139,250,0.2)",border:"1px solid rgba(167,139,250,0.15)"},children:"GO-TO ZONE"}),_e&&n.jsx("span",{style:{fontSize:"8px",fontWeight:"800",color:"#F87171",padding:"2px 6px",borderRadius:"4px",background:"rgba(239,68,68,0.12)",border:"1px solid rgba(239,68,68,0.1)"},children:"WEAK DEFENSE"}),xt&&n.jsx("span",{style:{fontSize:"8px",fontWeight:"800",color:"#10B981",padding:"2px 6px",borderRadius:"4px",background:"rgba(16,185,129,0.12)",border:"1px solid rgba(16,185,129,0.1)"},children:"STRONG DEFENSE"})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[n.jsxs("div",{style:{flex:1,padding:c?"8px":"10px",borderRadius:"8px",background:`${Ne}08`,border:`1px solid ${Ne}15`,textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"8px",fontWeight:"700",color:"rgba(255,255,255,0.7)",letterSpacing:"0.08em",marginBottom:"3px"},children:[U," SHOOTS"]}),n.jsxs("div",{style:{fontSize:c?"20px":"24px",fontWeight:"900",color:Ne,fontFamily:Ve,lineHeight:"1.1"},children:[he.offFg.toFixed(1),"%"]}),n.jsxs("div",{style:{fontSize:"9px",fontWeight:"700",color:Ne,marginTop:"3px"},children:["#",he.offRank," in D1"]})]}),n.jsxs("div",{style:{flex:1,padding:c?"8px":"10px",borderRadius:"8px",background:`${ze}08`,border:`1px solid ${ze}15`,textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"8px",fontWeight:"700",color:"rgba(255,255,255,0.7)",letterSpacing:"0.08em",marginBottom:"3px"},children:[K," ALLOWS"]}),n.jsxs("div",{style:{fontSize:c?"20px":"24px",fontWeight:"900",color:ze,fontFamily:Ve,lineHeight:"1.1"},children:[he.defFg.toFixed(1),"%"]}),n.jsxs("div",{style:{fontSize:"9px",fontWeight:"700",color:ze,marginTop:"3px"},children:["#",he.defRank," in D1"]})]}),n.jsx("div",{style:{width:c?"70px":"80px",padding:c?"8px 4px":"10px 6px",borderRadius:"8px",background:`${he.color}10`,border:`1px solid ${he.color}18`,textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:n.jsx("div",{style:{fontSize:c?"9px":"10px",fontWeight:"800",color:he.color,letterSpacing:"0.04em",lineHeight:"1.3"},children:he.edgeLabel})})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("span",{style:{fontSize:"9px",color:"rgba(255,255,255,0.65)"},children:["D1 avg: ",he.avg.toFixed(0),"% FG  ",he.offShare.toFixed(0),"% of ",U,"'s shots"]}),n.jsx("span",{style:{fontSize:"9px",color:"rgba(255,255,255,0.65)"},children:he.offRank<he.defRank?`${U} has the edge`:he.defRank<he.offRank?`${K} has the edge`:"Even matchup"})]})]})})(),(()=>{const Ne=ut[0],ze=mt[0],tt=mt[mt.length-1],_e=Ne.key===ze.key,xt=Ne.key===tt.key;let Zt="",wt="#F59E0B";return _e?(Zt=`${U}'s go-to zone (${Ne.shortLabel}) aligns perfectly with ${K}'s biggest weakness. Expect heavy volume here with a favorable FG% edge.`,wt="#10B981"):xt?(Zt=`${U} prefers to score from ${Ne.shortLabel}, but that's exactly where ${K} is strongest. ${U} may need to adjust or face a tough shooting night.`,wt="#EF4444"):(Zt=`${U} prefers ${Ne.shortLabel} (${Ne.offShare.toFixed(0)}% of shots) while ${K} is weakest at ${ze.shortLabel} (${ze.defFg.toFixed(1)}% allowed). The question is whether ${U} can exploit the mismatch.`,wt="#F59E0B"),n.jsxs("div",{style:{marginTop:"8px",padding:"10px 12px",borderRadius:"10px",background:`${wt}06`,borderLeft:`3px solid ${wt}30`},children:[n.jsx("div",{style:{fontSize:"9px",fontWeight:"700",color:wt,letterSpacing:"0.06em",marginBottom:"4px"},children:_e?"FAVORABLE MATCHUP":xt?"TOUGH MATCHUP":"MIXED MATCHUP"}),n.jsx("span",{style:{fontSize:c?"10px":"11px",color:"rgba(255,255,255,0.75)",lineHeight:"1.5"},children:Zt})]})})()]})})()})})()]}),me&&n.jsx(Eg,{}),n.jsxs("div",{style:{padding:kt},children:[n.jsx(e1,{title:"HEAD-TO-HEAD BATTLES",subtitle:"Direct matchup confrontations that decide games",isMobile:c}),n.jsxs("div",{style:{fontSize:c?"11px":"12px",color:"rgba(255,255,255,0.7)",marginBottom:"14px",marginTop:"-6px"},children:[U," offense vs ",K," defense"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:c?"8px":"10px"},children:[(()=>{const J=E.eFG_off_rank||182,Ee=A.eFG_def_rank||182,Xe=Math.max(.05,(wo-J)/wo),ut=Math.max(.05,(wo-Ee)/wo),mt=qi(J),be=qi(Ee),oe=ot.off-Tn.eFG+(ot.def-Tn.eFG),Ie=oe>8?"#10B981":oe>3?"#22D3EE":oe>-3?"#F59E0B":"#EF4444",Pe=oe>8?"BIG EDGE":oe>3?"EDGE":oe>-3?"EVEN":"TOUGH",Fe=Math.PI*42,he=Math.PI*32;return n.jsxs("div",{style:{padding:c?"12px":"16px",borderRadius:"14px",position:"relative",overflow:"hidden",background:"linear-gradient(135deg, rgba(15,23,42,0.8) 0%, rgba(15,23,42,0.3) 100%)",border:`1px solid ${Ie}20`},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent, #FBBF24, transparent)",opacity:.5}}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[n.jsx("span",{style:{fontSize:c?"10px":"11px",fontWeight:"800",color:"#FBBF24",letterSpacing:"0.08em"},children:"SHOOTING"}),n.jsx("span",{style:{fontSize:"8px",fontWeight:"800",color:Ie,padding:"2px 6px",borderRadius:"3px",background:`${Ie}15`,border:`1px solid ${Ie}25`},children:Pe})]}),n.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"2px 0"},children:n.jsxs("svg",{viewBox:"0 0 100 58",style:{width:"100%",maxWidth:c?"130px":"150px"},children:[n.jsx("path",{d:"M 8 52 A 42 42 0 0 1 92 52",fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:"7",strokeLinecap:"round"}),n.jsx("path",{d:"M 8 52 A 42 42 0 0 1 92 52",fill:"none",stroke:be,strokeWidth:"7",strokeLinecap:"round",strokeDasharray:String(Fe),strokeDashoffset:String(h?Fe*(1-ut):Fe),style:{transition:"stroke-dashoffset 1.2s cubic-bezier(0.4,0,0.2,1) 0.3s"},opacity:.75}),n.jsx("path",{d:"M 18 52 A 32 32 0 0 1 82 52",fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:"6",strokeLinecap:"round"}),n.jsx("path",{d:"M 18 52 A 32 32 0 0 1 82 52",fill:"none",stroke:mt,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:String(he),strokeDashoffset:String(h?he*(1-Xe):he),style:{transition:"stroke-dashoffset 1.2s cubic-bezier(0.4,0,0.2,1) 0.2s"}}),n.jsxs("text",{x:"50",y:"40",textAnchor:"middle",fill:Ie,fontSize:"15",fontWeight:"900",fontFamily:"ui-monospace, monospace",children:[oe>0?"+":"",oe.toFixed(1)]}),n.jsx("text",{x:"50",y:"51",textAnchor:"middle",fill:"rgba(255,255,255,0.45)",fontSize:"6",fontWeight:"700",letterSpacing:"0.06em",children:"NET eFG%"})]})}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[n.jsx("div",{style:{width:"8px",height:"3px",borderRadius:"2px",background:mt}}),n.jsx("span",{style:{fontSize:"7.5px",color:"rgba(255,255,255,0.5)"},children:U}),n.jsxs("span",{style:{fontSize:"7.5px",color:mt,fontWeight:"700",fontFamily:Ve},children:["#",J]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[n.jsx("div",{style:{width:"8px",height:"3px",borderRadius:"2px",background:be}}),n.jsx("span",{style:{fontSize:"7.5px",color:"rgba(255,255,255,0.5)"},children:K}),n.jsxs("span",{style:{fontSize:"7.5px",color:be,fontWeight:"700",fontFamily:Ve},children:["#",Ee]})]})]})]})})(),(()=>{const J=E.to_off_rank||182,Ee=A.to_def_rank||182,Xe=J<Ee,ut=Math.abs(J-Ee),mt=qi(J),be=qi(Ee),oe=Xe?ut>80?"#10B981":ut>30?"#22D3EE":"#F59E0B":ut>80?"#EF4444":(ut>30,"#F59E0B"),Ie=ut>80?"BIG EDGE":ut>30?"EDGE":"EVEN";return n.jsxs("div",{style:{padding:c?"12px":"16px",borderRadius:"14px",position:"relative",overflow:"hidden",background:"linear-gradient(135deg, rgba(15,23,42,0.8) 0%, rgba(15,23,42,0.3) 100%)",border:`1px solid ${oe}20`},children:[n.jsxs("div",{style:{position:"absolute",inset:0,opacity:.1},children:[n.jsx("div",{style:{position:"absolute",inset:0,background:mt,clipPath:"polygon(0 0, 100% 0, 0 100%)"}}),n.jsx("div",{style:{position:"absolute",inset:0,background:be,clipPath:"polygon(100% 0, 100% 100%, 0 100%)"}})]}),n.jsx("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{position:"absolute",inset:0,width:"100%",height:"100%"},children:n.jsx("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"rgba(255,255,255,0.06)",strokeWidth:"0.5"})}),n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent, #F87171, transparent)",opacity:.5}}),n.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[n.jsx("span",{style:{fontSize:c?"10px":"11px",fontWeight:"800",color:"#F87171",letterSpacing:"0.08em"},children:"TURNOVERS"}),n.jsx("span",{style:{fontSize:"8px",fontWeight:"800",color:oe,padding:"2px 6px",borderRadius:"3px",background:`${oe}15`,border:`1px solid ${oe}25`},children:Ie})]}),n.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",padding:c?"10px 0":"14px 0"},children:[n.jsx("div",{style:{fontSize:c?"18px":"22px",fontWeight:"900",color:oe,fontFamily:Ve,lineHeight:1},children:Xe?U:K}),n.jsx("div",{style:{fontSize:"7px",fontWeight:"700",color:"rgba(255,255,255,0.4)",letterSpacing:"0.1em",marginTop:"3px"},children:"WINS BATTLE"})]}),n.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"7px",color:"rgba(255,255,255,0.4)",letterSpacing:"0.05em",marginBottom:"2px"},children:[U," BALL SEC."]}),n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"3px"},children:[n.jsx("span",{style:{fontSize:c?"13px":"15px",fontWeight:"800",color:zl(Ae.off,Tn.to,!1),fontFamily:Ve},children:Ae.off.toFixed(1)}),n.jsxs("span",{style:{fontSize:"7px",color:mt,fontWeight:"700"},children:["#",J]})]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsxs("div",{style:{fontSize:"7px",color:"rgba(255,255,255,0.4)",letterSpacing:"0.05em",marginBottom:"2px"},children:[K," PRESSURE"]}),n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"3px",justifyContent:"flex-end"},children:[n.jsxs("span",{style:{fontSize:"7px",color:be,fontWeight:"700"},children:["#",Ee]}),n.jsx("span",{style:{fontSize:c?"13px":"15px",fontWeight:"800",color:zl(Ae.def,Tn.to,!0),fontFamily:Ve},children:Ae.def.toFixed(1)})]})]})]})]})})(),(()=>{const J=E.oreb_off_rank||182,Ee=A.oreb_def_rank||182,Xe=J<Ee,ut=qi(J),mt=qi(Ee),be=fe.off-Tn.oreb+(fe.def-Tn.oreb),oe=be>8?"#10B981":be>3?"#22D3EE":be>-3?"#F59E0B":"#EF4444",Ie=Math.abs(be)>8?"BIG EDGE":Math.abs(be)>3?"EDGE":"EVEN";return n.jsxs("div",{style:{padding:c?"12px":"16px",borderRadius:"14px",position:"relative",overflow:"hidden",background:"linear-gradient(135deg, rgba(15,23,42,0.8) 0%, rgba(15,23,42,0.3) 100%)",border:`1px solid ${oe}20`},children:[n.jsxs("div",{style:{position:"absolute",inset:0,opacity:.1},children:[n.jsx("div",{style:{position:"absolute",inset:0,background:ut,clipPath:"polygon(0 0, 100% 0, 0 100%)"}}),n.jsx("div",{style:{position:"absolute",inset:0,background:mt,clipPath:"polygon(100% 0, 100% 100%, 0 100%)"}})]}),n.jsx("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{position:"absolute",inset:0,width:"100%",height:"100%"},children:n.jsx("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"rgba(255,255,255,0.06)",strokeWidth:"0.5"})}),n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent, #60A5FA, transparent)",opacity:.5}}),n.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[n.jsx("span",{style:{fontSize:c?"10px":"11px",fontWeight:"800",color:"#60A5FA",letterSpacing:"0.08em"},children:"BOARDS"}),n.jsx("span",{style:{fontSize:"8px",fontWeight:"800",color:oe,padding:"2px 6px",borderRadius:"3px",background:`${oe}15`,border:`1px solid ${oe}25`},children:Ie})]}),n.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",padding:c?"10px 0":"14px 0"},children:[n.jsx("div",{style:{fontSize:c?"18px":"22px",fontWeight:"900",color:oe,fontFamily:Ve,lineHeight:1},children:Xe?U:K}),n.jsx("div",{style:{fontSize:"7px",fontWeight:"700",color:"rgba(255,255,255,0.4)",letterSpacing:"0.1em",marginTop:"3px"},children:"WINS BATTLE"})]}),n.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"7px",color:"rgba(255,255,255,0.4)",letterSpacing:"0.05em",marginBottom:"2px"},children:[U," CRASHES"]}),n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"3px"},children:[n.jsxs("span",{style:{fontSize:c?"13px":"15px",fontWeight:"800",color:zl(fe.off,Tn.oreb,!0),fontFamily:Ve},children:[fe.off.toFixed(1),"%"]}),n.jsxs("span",{style:{fontSize:"7px",color:ut,fontWeight:"700"},children:["#",J]})]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsxs("div",{style:{fontSize:"7px",color:"rgba(255,255,255,0.4)",letterSpacing:"0.05em",marginBottom:"2px"},children:[K," GLASS"]}),n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"3px",justifyContent:"flex-end"},children:[n.jsxs("span",{style:{fontSize:"7px",color:mt,fontWeight:"700"},children:["#",Ee]}),n.jsxs("span",{style:{fontSize:c?"13px":"15px",fontWeight:"800",color:zl(fe.def,Tn.oreb,!1),fontFamily:Ve},children:[fe.def.toFixed(1),"%"]})]})]})]})]})})(),(()=>{const J=E.ftRate_off_rank||182,Ee=A.ftRate_def_rank||182,Xe=Math.max(.05,(wo-J)/wo),ut=Math.max(.05,(wo-Ee)/wo),mt=qi(J),be=qi(Ee),oe=Ue.off-Tn.ftRate+(Ue.def-Tn.ftRate),Ie=oe>8?"#10B981":oe>3?"#22D3EE":oe>-3?"#F59E0B":"#EF4444",Pe=oe>8?"BIG EDGE":oe>3?"EDGE":oe>-3?"EVEN":"TOUGH",Fe=Math.PI*42,he=Math.PI*32;return n.jsxs("div",{style:{padding:c?"12px":"16px",borderRadius:"14px",position:"relative",overflow:"hidden",background:"linear-gradient(135deg, rgba(15,23,42,0.8) 0%, rgba(15,23,42,0.3) 100%)",border:`1px solid ${Ie}20`},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent, #34D399, transparent)",opacity:.5}}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[n.jsx("span",{style:{fontSize:c?"10px":"11px",fontWeight:"800",color:"#34D399",letterSpacing:"0.08em"},children:"FT RATE"}),n.jsx("span",{style:{fontSize:"8px",fontWeight:"800",color:Ie,padding:"2px 6px",borderRadius:"3px",background:`${Ie}15`,border:`1px solid ${Ie}25`},children:Pe})]}),n.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"2px 0"},children:n.jsxs("svg",{viewBox:"0 0 100 58",style:{width:"100%",maxWidth:c?"130px":"150px"},children:[n.jsx("path",{d:"M 8 52 A 42 42 0 0 1 92 52",fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:"7",strokeLinecap:"round"}),n.jsx("path",{d:"M 8 52 A 42 42 0 0 1 92 52",fill:"none",stroke:be,strokeWidth:"7",strokeLinecap:"round",strokeDasharray:String(Fe),strokeDashoffset:String(h?Fe*(1-ut):Fe),style:{transition:"stroke-dashoffset 1.2s cubic-bezier(0.4,0,0.2,1) 0.3s"},opacity:.75}),n.jsx("path",{d:"M 18 52 A 32 32 0 0 1 82 52",fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:"6",strokeLinecap:"round"}),n.jsx("path",{d:"M 18 52 A 32 32 0 0 1 82 52",fill:"none",stroke:mt,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:String(he),strokeDashoffset:String(h?he*(1-Xe):he),style:{transition:"stroke-dashoffset 1.2s cubic-bezier(0.4,0,0.2,1) 0.2s"}}),n.jsxs("text",{x:"50",y:"40",textAnchor:"middle",fill:Ie,fontSize:"15",fontWeight:"900",fontFamily:"ui-monospace, monospace",children:[oe>0?"+":"",oe.toFixed(1)]}),n.jsx("text",{x:"50",y:"51",textAnchor:"middle",fill:"rgba(255,255,255,0.45)",fontSize:"6",fontWeight:"700",letterSpacing:"0.06em",children:"NET FT RATE"})]})}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[n.jsx("div",{style:{width:"8px",height:"3px",borderRadius:"2px",background:mt}}),n.jsx("span",{style:{fontSize:"7.5px",color:"rgba(255,255,255,0.5)"},children:U}),n.jsxs("span",{style:{fontSize:"7.5px",color:mt,fontWeight:"700",fontFamily:Ve},children:["#",J]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[n.jsx("div",{style:{width:"8px",height:"3px",borderRadius:"2px",background:be}}),n.jsx("span",{style:{fontSize:"7.5px",color:"rgba(255,255,255,0.5)"},children:K}),n.jsxs("span",{style:{fontSize:"7.5px",color:be,fontWeight:"700",fontFamily:Ve},children:["#",Ee]})]})]})]})})()]}),n.jsxs("div",{style:{marginTop:"12px",padding:"10px 14px",borderRadius:"8px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"9px",fontWeight:"800",color:"rgba(255,255,255,0.6)",letterSpacing:"0.1em"},children:"EXPECTED PACE"}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{style:{fontSize:c?"14px":"15px",fontWeight:"800",color:"#A78BFA",fontFamily:Ve},children:((We.away+We.home)/2).toFixed(1)}),n.jsx("span",{style:{fontSize:"9px",color:"rgba(255,255,255,0.65)"},children:"poss/40"})]})]})]}),n.jsx(Eg,{color:`${Ce.color}20`}),n.jsxs("div",{style:{padding:kt,background:"linear-gradient(180deg, rgba(15,23,42,0.3) 0%, rgba(2,6,23,0.8) 100%)"},children:[(()=>{const J=E.eFG_off_rank||182,Ee=A.eFG_def_rank||182,Xe=E.to_off_rank||182,ut=A.to_def_rank||182,mt=E.oreb_off_rank||182,be=A.oreb_def_rank||182,oe=E.ftRate_off_rank||182,Ie=A.ftRate_def_rank||182,Pe=me?(()=>{const Oe=T?X:re,Le=T?re:X;if(!Oe||!Le)return null;const qe=[{name:"Rim",offFg:Oe.dunks_off_fg,share:Oe.dunks_off_share,defFg:Le.dunks_def_fg,offField:"dunks_off_fg",defField:"dunks_def_fg"},{name:"Paint",offFg:Oe.close2_off_fg,share:Oe.close2_off_share,defFg:Le.close2_def_fg,offField:"close2_off_fg",defField:"close2_def_fg"},{name:"Mid",offFg:Oe.far2_off_fg,share:Oe.far2_off_share,defFg:Le.far2_def_fg,offField:"far2_off_fg",defField:"far2_def_fg"},{name:"3PT",offFg:Oe.three_off_fg,share:Oe.three_off_share,defFg:Le.three_def_fg,offField:"three_off_fg",defField:"three_def_fg"}].sort((tt,_e)=>_e.share-tt.share)[0],Ne=ve(Oe,qe.offField,!1),ze=ve(Le,qe.defField,!0);return{...qe,offRank:Ne,defRank:ze,win:Ne<ze}})():null,Fe=[{id:"scoring",label:"SCORING ZONE",question:Pe?`${U} prefers ${Pe.name} (${Pe.share.toFixed(0)}%)  can they exploit it?`:`Does ${U} have a go-to scoring zone advantage?`,win:Pe?Pe.win:J<Ee,offLabel:Pe?`#${Pe.offRank} ${Pe.name} OFF`:`#${J} OFF`,defLabel:Pe?`#${Pe.defRank} ${Pe.name} DEF`:`#${Ee} DEF`,icon:""},{id:"shooting",label:"SHOOTING",question:`Can ${U} shoot over ${K}'s defense?`,win:J<Ee,offLabel:`#${J} eFG% OFF`,defLabel:`#${Ee} eFG% DEF`,icon:""},{id:"rebounding",label:"GLASS CONTROL",question:`Can ${U} get second chances on the boards?`,win:mt<be,offLabel:`#${mt} OREB`,defLabel:`#${be} DREB`,icon:""},{id:"freeThrows",label:"FREE THROWS",question:`Does ${U} get to the line against ${K}?`,win:oe<Ie,offLabel:`#${oe} FT Rate`,defLabel:`#${Ie} FT Allowed`,icon:""},{id:"turnovers",label:"BALL SECURITY",question:`Can ${U} protect the ball vs ${K}'s pressure?`,win:Xe<ut,offLabel:`#${Xe} Ball Sec`,defLabel:`#${ut} Pressure`,icon:""}],he=Fe.filter(Oe=>Oe.win).length,He=he>=4?"#10B981":he>=3?"#22D3EE":he>=2?"#F59E0B":"#EF4444",Qe=he>=4?"CLEAR PATH":he>=3?"PROBABLE PATH":he>=2?"NARROW PATH":"UPHILL BATTLE";return n.jsxs("div",{style:{padding:c?"16px":"20px",borderRadius:"14px",background:"linear-gradient(135deg, rgba(15,23,42,0.5) 0%, rgba(8,12,28,0.8) 100%)",border:`1px solid ${He}12`,position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg, transparent, ${He}40, transparent)`}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"14px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"7px",height:"7px",borderRadius:"50%",background:He,animation:"mi5-pulse 2s infinite"}}),n.jsx("span",{style:{fontSize:c?"10px":"11px",fontWeight:"700",color:"rgba(255,255,255,0.65)",letterSpacing:"0.12em"},children:"PATH TO VICTORY"})]}),n.jsxs("span",{style:{fontSize:"9px",color:"rgba(255,255,255,0.6)"},children:[U,"'s offensive checklist"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c?"10px 12px":"12px 16px",borderRadius:"10px",marginBottom:"14px",background:`${He}08`,border:`1px solid ${He}15`},children:[n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px"},children:[n.jsxs("span",{style:{fontSize:c?"28px":"34px",fontWeight:"900",color:He,fontFamily:Ve,lineHeight:1},children:[he,"/5"]}),n.jsx("span",{style:{fontSize:c?"11px":"12px",fontWeight:"700",color:"rgba(255,255,255,0.7)"},children:"checkpoints cleared"})]}),n.jsx("span",{style:{fontSize:c?"10px":"11px",fontWeight:"800",color:He,padding:"4px 10px",borderRadius:"6px",background:`${He}15`,border:`1px solid ${He}20`,letterSpacing:"0.06em"},children:Qe})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px",marginBottom:"14px"},children:Fe.map((Oe,Le)=>{const Se=Oe.win?"#10B981":"#EF4444";return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c?"8px":"10px",padding:c?"10px 12px":"12px 14px",borderRadius:"10px",background:Oe.win?"rgba(16,185,129,0.04)":"rgba(239,68,68,0.03)",border:`1px solid ${Se}10`,opacity:h?1:0,transform:h?"translateX(0)":"translateX(-10px)",transition:`opacity 0.4s ease ${Le*.08}s, transform 0.4s ease ${Le*.08}s`},children:[n.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:`${Se}15`,border:`1px solid ${Se}25`,fontSize:"11px"},children:Oe.win?"":""}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"2px"},children:n.jsx("span",{style:{fontSize:c?"10px":"11px",fontWeight:"800",color:"rgba(255,255,255,0.9)",letterSpacing:"0.04em"},children:Oe.label})}),n.jsx("div",{style:{fontSize:c?"9px":"10px",color:"rgba(255,255,255,0.6)",lineHeight:"1.3"},children:Oe.question})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"2px",flexShrink:0},children:[n.jsx("span",{style:{fontSize:c?"8px":"9px",fontWeight:"700",color:Oe.win?"#10B981":"rgba(255,255,255,0.55)",fontFamily:Ve},children:Oe.offLabel}),n.jsx("span",{style:{fontSize:c?"8px":"9px",fontWeight:"700",color:Oe.win?"rgba(255,255,255,0.55)":"#EF4444",fontFamily:Ve},children:Oe.defLabel})]})]},Oe.id)})}),n.jsx("div",{style:{marginBottom:"12px"},children:n.jsx("div",{style:{display:"flex",gap:"3px"},children:Fe.map((Oe,Le)=>n.jsx("div",{style:{flex:1,height:"6px",borderRadius:"3px",background:Oe.win?He:"rgba(255,255,255,0.06)",boxShadow:Oe.win?`0 0 8px ${He}30`:"none",transition:`background 0.4s ease ${Le*.1}s`}},`bar_${Le}`))})}),n.jsx("div",{style:{fontSize:c?"14px":"16px",fontWeight:"700",color:"white",marginBottom:"4px",lineHeight:"1.3"},children:he>=4?`${U} has a clear path to victory.`:he>=3?`${U} has a probable path, but ${K} can disrupt it.`:he>=2?`${U} has a narrow path  needs execution in key areas.`:`${U} faces an uphill battle. ${K} controls most checkpoints.`}),n.jsx("div",{style:{fontSize:c?"11px":"12px",color:"rgba(255,255,255,0.65)",lineHeight:"1.5"},children:he>=4?`${U} clears ${he} of 5 offensive checkpoints. When teams check this many boxes, scoring comes easy.`:he>=3?`${he} of 5 checkpoints cleared. The ${Fe.filter(Oe=>!Oe.win).map(Oe=>Oe.label.toLowerCase()).join(" and ")} ${Fe.filter(Oe=>!Oe.win).length>1?"are":"is"} where ${K} can make a stand.`:he>=2?`Only ${he} checkpoints cleared. ${K} has the defensive edge in ${Fe.filter(Oe=>!Oe.win).map(Oe=>Oe.label.toLowerCase()).join(", ")}. ${U} will need to overperform.`:`${K} owns ${5-he} of 5 defensive checkpoints. ${U} needs a special performance to overcome this.`}),n.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"14px"},children:n.jsxs("button",{onClick:()=>l(Oe=>Oe==="awayOff_homeDef"?"homeOff_awayDef":"awayOff_homeDef"),style:{display:"flex",alignItems:"center",gap:"6px",padding:c?"10px 20px":"8px 18px",borderRadius:"8px",background:"rgba(99,102,241,0.1)",border:"1px solid rgba(99,102,241,0.2)",color:"#A78BFA",fontSize:c?"11px":"10px",fontWeight:"700",cursor:"pointer"},children:[n.jsx(vw,{size:13}),"VIEW ",T?H:Q,"'S PATH"]})})]})})(),n.jsx("div",{style:{textAlign:"center",marginTop:"12px"},children:n.jsx("span",{style:{fontSize:"9px",fontWeight:"600",color:"rgba(255,255,255,0.12)",letterSpacing:"0.2em"},children:"SAVANT ANALYTICS"})})]})]})}function rW(r,e,t,i=null){const{ensembleAwayProb:o,ensembleHomeProb:l,bestEV:c,bestTeam:u,confidence:h,ensembleAwayScore:m,ensembleHomeScore:f,bestBet:x}=e;if(e?.spreadContext?.title)return{icon:e.spreadContext.icon||"",title:e.spreadContext.title,subtitle:e.spreadContext.subtitle};const b=c||0,S=x==="home",w=((x==="away"?o:l)||0)*100,T=(m||0)+(f||0),E=x==="away"?t?.awayOdds:t?.homeOdds,A=nW(E)*100,_=Math.abs(w-A);let B;b>=5?B="ELITE":b>=3.5?B="STRONG":b>=2.5?B="QUALITY":b>=1.5?B="VALUE":B="MINIMAL";let I;w>=70?I="HEAVY_FAV":w>=60?I="FAVORITE":w>=55?I="LEAN":w>=45?I="TOSS_UP":I="UNDERDOG";const L=T>160,M=T>0&&T<130,R=_>=10,j=h==="HIGH";if(B==="ELITE"){if(I==="HEAVY_FAV")return j?{icon:"",title:`${u} High Conviction Favorite`,subtitle:`${w.toFixed(0)}% to win  +${b.toFixed(1)}% value despite high probability`}:{icon:"",title:`${u} Statistical Dominance`,subtitle:`Model projects ${w.toFixed(0)}%  Market underprices by ${b.toFixed(1)}%`};if(I==="FAVORITE")return R?{icon:"",title:`${u} Premium Mismatch`,subtitle:`Model sees ${w.toFixed(0)}%  ${_.toFixed(0)}% higher than market, +${b.toFixed(1)}% edge`}:j?{icon:"",title:`${u} High Conviction Play`,subtitle:`${w.toFixed(0)}% win probability  +${b.toFixed(1)}% edge with both systems aligned`}:{icon:"",title:`${u} Efficiency Advantage`,subtitle:`Superior metrics project ${w.toFixed(0)}%  +${b.toFixed(1)}% value`};if(I==="LEAN"||I==="TOSS_UP")return R?{icon:"",title:`${u} Mispriced Opportunity`,subtitle:`${w.toFixed(0)}% to win  Market ${_.toFixed(0)}% lower, +${b.toFixed(1)}% edge`}:j?{icon:"",title:`${u} Undervalued Pick`,subtitle:`Close game analysis favors ${u}  +${b.toFixed(1)}% value with system agreement`}:{icon:"",title:`${u} Model Disagreement`,subtitle:`Systems see ${w.toFixed(0)}%  Public line creates +${b.toFixed(1)}% edge`};if(L)return{icon:"",title:`${u} High-Pace Value`,subtitle:`Fast tempo (${T.toFixed(0)} pts projected)  ${u} advantages translate to +${b.toFixed(1)}%`};if(M)return{icon:"",title:`${u} Low-Scoring Edge`,subtitle:`Defensive matchup (${T.toFixed(0)} pts)  ${u} style creates +${b.toFixed(1)}% value`};if(S&&c>=6)return{icon:"",title:`${u} Elite Home Value`,subtitle:`+${b.toFixed(1)}% edge at home  ${w.toFixed(0)}% with venue advantage`};if(!S&&c>=6)return{icon:"",title:`${u} Road Undervalue`,subtitle:`+${b.toFixed(1)}% away  Market overweights travel factor`}}if(B==="STRONG"){if(I==="HEAVY_FAV"||I==="FAVORITE")return j?{icon:"",title:`${u} Strong Favorite Play`,subtitle:`${w.toFixed(0)}% favorite  +${b.toFixed(1)}% value with system consensus`}:R?{icon:"",title:`${u} Model Confidence`,subtitle:`Systems project ${w.toFixed(0)}%  Market ${_.toFixed(0)}% lower for +${b.toFixed(1)}% edge`}:{icon:"",title:`${u} Quality Mismatch`,subtitle:`Metrics edge at ${w.toFixed(0)}%  +${b.toFixed(1)}% value vs current line`};if(I==="LEAN")return j?{icon:"",title:`${u} Strong Value Pick`,subtitle:`${w.toFixed(0)}% to win  +${b.toFixed(1)}% market inefficiency identified`}:L?{icon:"",title:`${u} Pace Mismatch`,subtitle:`Tempo advantage in high-scoring game  Model projects +${b.toFixed(1)}% value`}:{icon:"",title:`${u} Analytical Edge`,subtitle:`Model favors ${u} at ${w.toFixed(0)}%  +${b.toFixed(1)}% value identified`};if(I==="TOSS_UP")return R?{icon:"",title:`${u} Undervalued Underdog`,subtitle:`${w.toFixed(0)}% in close game  Market ${_.toFixed(0)}% too low`}:j?{icon:"",title:`${u} Close Game Value`,subtitle:`Model gives ${u} ${w.toFixed(0)}%  +${b.toFixed(1)}% edge opportunity`}:{icon:"",title:`${u} Balanced Value`,subtitle:`Near 50/50 matchup  Analysis finds +${b.toFixed(1)}% edge for ${u}`};if(M)return{icon:"",title:`${u} Defensive Profile`,subtitle:`Low-scoring strength (${T.toFixed(0)} pts)  +${b.toFixed(1)}% in grind game`}}if(B==="QUALITY"){if(I==="HEAVY_FAV"||I==="FAVORITE")return j?{icon:"",title:`${u} Solid Favorite`,subtitle:`${w.toFixed(0)}% to win  +${b.toFixed(1)}% value with model agreement`}:{icon:"",title:`${u} Quality Pick`,subtitle:`Model backs ${u}  +${b.toFixed(1)}% edge vs current line`};if(I==="LEAN")return R?{icon:"",title:`${u} Model Edge`,subtitle:`${w.toFixed(0)}% win probability  Market ${_.toFixed(0)}% off for +${b.toFixed(1)}% value`}:L?{icon:"",title:`${u} Tempo Edge`,subtitle:`High-scoring game (${T.toFixed(0)} pts)  Style favors ${u} +${b.toFixed(1)}%`}:{icon:"",title:`${u} Statistical Lean`,subtitle:`Analysis favors ${u} at ${w.toFixed(0)}%  +${b.toFixed(1)}% market gap`};if(I==="TOSS_UP")return j?{icon:"",title:`${u} Underdog Value`,subtitle:`${w.toFixed(0)}% as underdog  Systems identify +${b.toFixed(1)}% edge`}:{icon:"",title:`${u} Close Game Edge`,subtitle:`${w.toFixed(0)}% in tight matchup  +${b.toFixed(1)}% value vs line`};if(S)return{icon:"",title:`${u} Home Advantage`,subtitle:`+${b.toFixed(1)}% edge at home  ${w.toFixed(0)}% with venue factor`};if(!S)return{icon:"",title:`${u} Road Value`,subtitle:`+${b.toFixed(1)}% away  Market reaction creates opportunity`}}return B==="VALUE"?I==="HEAVY_FAV"||I==="FAVORITE"?{icon:"",title:`${u} Modest Edge`,subtitle:`${w.toFixed(0)}% favorite  +${b.toFixed(1)}% value cushion`}:I==="LEAN"||I==="TOSS_UP"?{icon:"",title:`${u} Value Opportunity`,subtitle:`${w.toFixed(0)}% to win  +${b.toFixed(1)}% edge identified`}:{icon:"",title:`${u} Slight Value`,subtitle:`Model leans ${u} at ${w.toFixed(0)}%  +${b.toFixed(1)}% edge`}:c<0?{icon:"",title:`${u} Tracked Position`,subtitle:`Model shows ${w.toFixed(0)}%  Conservative sizing manages ${Math.abs(c).toFixed(1)}% pattern volatility`}:c<.5?{icon:"",title:`${u} Minimal Edge Play`,subtitle:`${w.toFixed(0)}% to win  Small +${b.toFixed(1)}% edge, reduced allocation`}:{icon:"",title:`${u} Standard Opportunity`,subtitle:`${w.toFixed(0)}% to win  +${b.toFixed(1)}% edge, moderate sizing`}}function nW(r){return!r||r===0?.5:r>0?100/(r+100):Math.abs(r)/(Math.abs(r)+100)}function iW(){const{user:r}=ls(),{isFree:e}=Jo(r),t=as();return e?n.jsx("div",{className:"cbb-early-access-banner",children:n.jsxs("div",{className:"banner-content",children:[n.jsx("span",{className:"banner-icon",children:""}),n.jsxs("span",{className:"banner-text",children:[n.jsx("strong",{children:"Lock 40% off for life"}),"  ",n.jsx("strong",{children:"$15.99/mo"})," ",n.jsx("s",{style:{opacity:.7},children:"$25.99"}),"  Code: ",n.jsx("strong",{children:"HEREFIRST"})]}),n.jsx("button",{className:"banner-cta",onClick:()=>t("/pricing"),children:"Lock 40% Off "})]})}):null}function sW({games:r,onUpgradeClick:e,onDismiss:t}){const{user:i}=ls(),{isPremium:o}=Jo(i),{stats:l,loading:c}=t5(),u=as();if(o)return null;r[0];const h=r.slice(1);return h.length===0?null:(h.reduce((m,f)=>m+(f.prediction?.bestEV||0),0),h.length>0&&Math.round(h.filter(m=>m.prediction?.grade==="A+"||m.prediction?.grade==="A").length/h.length*100),n.jsx("div",{className:"cbb-soft-paywall",children:n.jsxs("div",{className:"locked-picks-container",children:[n.jsx("div",{className:"blurred-picks",children:h.map((m,f)=>n.jsx("div",{className:"game-card-blur",children:n.jsxs("div",{className:"blur-content",children:[n.jsx("div",{className:"grade-hint",children:m.prediction?.grade||"A"}),n.jsxs("div",{className:"ev-hint",children:["+",(m.prediction?.bestEV||0).toFixed(1),"%"]}),n.jsx("div",{className:"team-hint",children:""})]})},f))}),n.jsxs("div",{className:"unlock-panel",children:[n.jsx("div",{className:"lock-icon",children:""}),n.jsxs("h2",{className:"unlock-title",children:[h.length," More ",h.length===1?"Play":"Plays"," Hidden"]}),!c&&l.gradedBets>0&&n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.25rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem",fontSize:"0.75rem",fontWeight:"700",color:"#10B981",textTransform:"uppercase",letterSpacing:"0.1em"},children:[n.jsx("span",{children:""})," VERIFIED RESULTS  LIVE"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.75rem",textAlign:"center"},children:[n.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"0.75rem 0.5rem"},children:[n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"900",color:"#10B981",fontFeatureSettings:"'tnum'",textShadow:"0 0 20px rgba(16, 185, 129, 0.4)"},children:["+",l.unitsWon.toFixed(1),"u"]}),n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.6)",marginTop:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Season Profit"})]}),n.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"0.75rem 0.5rem"},children:[n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"900",color:"#60A5FA",fontFeatureSettings:"'tnum'"},children:[l.winRate.toFixed(1),"%"]}),n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.6)",marginTop:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Win Rate"})]}),n.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"0.75rem 0.5rem"},children:[n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"900",color:"#FBBF24",fontFeatureSettings:"'tnum'"},children:["$",Math.round(l.unitsWon*100).toLocaleString()]}),n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255,255,255,0.6)",marginTop:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"on $100 bets"})]})]}),n.jsxs("div",{style:{marginTop:"0.75rem",textAlign:"center",fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:[n.jsxs("span",{style:{fontWeight:"700",color:"#10B981"},children:[l.wins,"-",l.losses]})," record  ",n.jsx("span",{style:{fontWeight:"600"},children:l.gradedBets})," verified picks"]})]}),n.jsxs("div",{className:"value-calculation",children:[n.jsxs("div",{className:"calc-row",style:{justifyContent:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontWeight:"600"},children:"Founding Rate:"}),n.jsxs("span",{children:[n.jsx("strong",{style:{color:"#10B981"},children:"$15.99/mo"})," ",n.jsx("s",{style:{opacity:.5,fontSize:"0.85em"},children:"$25.99"})]})]}),n.jsxs("div",{style:{textAlign:"center",fontSize:"0.813rem",color:"rgba(255,255,255,0.7)",marginTop:"0.25rem"},children:[n.jsx("strong",{style:{color:"#10B981"},children:"40% off locked forever"})," for founding members"]}),n.jsx("div",{style:{marginTop:"0.75rem",padding:"0.625rem 0.75rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(16, 185, 129, 0.15) 100%)",border:"1px solid rgba(212, 175, 55, 0.4)",borderRadius:"8px",textAlign:"center",fontSize:"0.875rem"},children:n.jsxs("span",{style:{color:"#D4AF37"},children:[" Use code ",n.jsx("strong",{children:"HEREFIRST"})," at checkout"]})})]}),n.jsx("div",{className:"paywall-actions",children:n.jsx("button",{className:"cta-primary",onClick:()=>u("/pricing"),children:"Start Free Trial "})}),n.jsxs("div",{className:"paywall-footer",children:[n.jsx("div",{className:"trust-badge",children:" Cancel anytime"}),n.jsx("div",{className:"trust-badge",children:" All picks verified"})]})]})]})}))}function oW({show:r,onClose:e}){const t=as(),{stats:i,loading:o}=t5(),[l,c]=O.useState(!1);return r?n.jsx("div",{className:"modal-overlay",onClick:e,children:n.jsxs("div",{className:"modal-content cbb-upgrade-modal",onClick:u=>u.stopPropagation(),children:[n.jsx("button",{className:"modal-close",onClick:e,children:""}),n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:" Unlock Full CBB Dashboard"}),n.jsx("p",{className:"modal-subtitle",children:"Join sharp bettors profiting from data-driven insights"})]}),n.jsxs("div",{className:"modal-performance",children:[n.jsxs("div",{className:"performance-header",children:[n.jsx("h3",{children:"Our Verified Track Record"}),!o&&n.jsxs("span",{className:"picks-count",children:[i.gradedBets," Verified Picks"]})]}),!o&&i.gradedBets>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"performance-grid",children:[n.jsxs("div",{className:"perf-card",children:[n.jsxs("div",{className:"perf-value profit",children:["+",i.unitsWon.toFixed(1),"u"]}),n.jsx("div",{className:"perf-label",children:"Season Profit"})]}),n.jsxs("div",{className:"perf-card",children:[n.jsxs("div",{className:"perf-value",children:[i.winRate.toFixed(1),"%"]}),n.jsx("div",{className:"perf-label",children:"Win Rate"})]}),n.jsxs("div",{className:"perf-card",children:[n.jsxs("div",{className:"perf-value roi",children:[i.wins,"-",i.losses]}),n.jsx("div",{className:"perf-label",children:"Record"})]})]}),!1]}):n.jsx("div",{className:"loading-stats",children:"Loading performance data..."})]}),n.jsx("div",{className:"modal-pricing",children:n.jsxs("div",{className:"pricing-card featured",children:[n.jsx("div",{className:"early-access-badge",children:" 40% OFF FOR LIFE"}),n.jsxs("div",{className:"price-display",children:[n.jsxs("div",{className:"price-main",children:[n.jsx("span",{className:"price-amount",children:"$15.99"}),n.jsx("span",{className:"price-period",children:"/month"}),n.jsx("span",{style:{marginLeft:"0.5rem",opacity:.6,textDecoration:"line-through",fontSize:"1.25rem"},children:"$25.99"})]}),n.jsx("div",{className:"price-lock",children:" Locked forever  thanks for being early"})]}),n.jsxs("div",{className:"features-list",children:[n.jsx("div",{className:"feature",children:" All CBB picks daily (4-8 games)"}),n.jsx("div",{className:"feature",children:" Full model breakdowns + matchup intel"}),n.jsx("div",{className:"feature",children:" Real-time odds tracking"}),n.jsx("div",{className:"feature",children:" Closing line value analysis"}),n.jsx("div",{className:"feature",children:" Performance tracking dashboard"}),n.jsx("div",{className:"feature",children:" Priority Discord community"})]}),n.jsx("div",{className:"limited-access-note",style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(212, 175, 55, 0.1) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",padding:"0.75rem"},children:n.jsxs("div",{style:{fontSize:"0.875rem",opacity:.9},children:["Lock ",n.jsx("strong",{style:{color:"#10B981"},children:"40% off for life"}),"  $15.99/mo  Code: ",n.jsx("strong",{style:{color:"#D4AF37"},children:"HEREFIRST"})]})}),n.jsx("button",{className:"cta-trial",onClick:()=>t("/pricing"),children:"Start Free Trial"}),n.jsx("div",{className:"trial-details",children:"Full access  Cancel anytime  All picks verified"})]})}),n.jsxs("div",{className:"modal-social-proof",children:[n.jsxs("div",{className:"testimonials",children:[n.jsx("div",{className:"testimonial",children:`"Best CBB model I've found. +34u in 3 weeks." - @sharpbettor`}),n.jsx("div",{className:"testimonial",children:'"The matchup intel alone is worth it. Consistent CLV." - @datadriven'})]}),!o&&i.gradedBets>0&&n.jsxs("div",{className:"recent-results",children:[n.jsx("strong",{children:"Season Record:"})," ",i.wins,"-",i.losses," (",i.winRate.toFixed(1),"% win rate)  +",i.unitsWon.toFixed(1),"u profit"]})]})]})}):null}const aW=({isMobile:r=!1,showTooltip:e=!0})=>{const[t,i]=O.useState(!1);return n.jsxs("div",{style:{position:"relative",display:"inline-flex",alignItems:"center",gap:"0.35rem"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:r?"0.3rem 0.5rem":"0.35rem 0.6rem",borderRadius:"6px",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.08) 100%)",border:"1px solid rgba(251, 191, 36, 0.35)",boxShadow:"0 2px 8px rgba(251, 191, 36, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.05)",backdropFilter:"blur(4px)",transition:"all 0.3s ease",cursor:"default"},children:[n.jsx("svg",{width:r?"10":"11",height:r?"10":"11",viewBox:"0 0 24 24",fill:"rgba(251, 191, 36, 0.9)",style:{filter:"drop-shadow(0 1px 3px rgba(251, 191, 36, 0.4))"},children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),n.jsx("span",{style:{fontSize:r?"0.625rem":"0.688rem",fontWeight:"700",color:"rgba(251, 191, 36, 0.95)",letterSpacing:"0.04em",textTransform:"uppercase",lineHeight:1,textShadow:"0 1px 3px rgba(0, 0, 0, 0.3)"},children:"Savant Pick"})]}),e&&t&&n.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"8px",width:r?"200px":"240px",padding:"0.75rem",background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",border:"1px solid rgba(251, 191, 36, 0.25)",borderRadius:"10px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",zIndex:1e3,animation:"fadeIn 0.2s ease"},children:[n.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(251, 191, 36, 0.95)",marginBottom:"0.4rem",display:"flex",alignItems:"center",gap:"0.35rem"},children:[n.jsx("span",{children:""})," Savant Pick"]}),n.jsx("div",{style:{fontSize:"0.688rem",color:"rgba(255, 255, 255, 0.75)",lineHeight:1.5},children:"Analyst-enhanced selection with additional situational conviction layered on our quantitative models."}),n.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; transform: translateY(-4px); }
              to { opacity: 1; transform: translateY(0); }
            }
          `})]})]})},lW=({isMobile:r=!1})=>{const[e,t]=O.useState(!1);return n.jsxs("div",{style:{position:"relative",display:"inline-flex"},children:[n.jsx("button",{onClick:()=>t(!e),onMouseEnter:()=>!r&&t(!0),onMouseLeave:()=>!r&&t(!1),style:{display:"flex",alignItems:"center",justifyContent:"center",width:r?"22px":"24px",height:r?"22px":"24px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, rgba(245, 158, 11, 0.06) 100%)",border:"1px solid rgba(251, 191, 36, 0.25)",cursor:"pointer",transition:"all 0.2s ease",padding:0},"aria-label":"Learn about Savant Picks",children:n.jsx("span",{style:{fontSize:r?"0.75rem":"0.813rem",fontWeight:"700",color:"rgba(251, 191, 36, 0.85)"},children:"?"})}),e&&n.jsxs(n.Fragment,{children:[r&&n.jsx("div",{onClick:()=>t(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:998}}),n.jsxs("div",{style:{position:r?"fixed":"absolute",top:r?"50%":"100%",left:r?"50%":"auto",right:r?"auto":0,transform:r?"translate(-50%, -50%)":"none",marginTop:r?0:"10px",width:r?"calc(100vw - 48px)":"320px",maxWidth:"360px",padding:r?"1.25rem":"1rem",background:"linear-gradient(145deg, rgba(15, 23, 42, 0.99) 0%, rgba(30, 41, 59, 0.99) 100%)",border:"1px solid rgba(251, 191, 36, 0.2)",borderRadius:"14px",boxShadow:"0 12px 48px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05) inset",zIndex:999,animation:"slideIn 0.25s ease"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.08)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontSize:"1.25rem"},children:""}),n.jsx("span",{style:{fontSize:"1rem",fontWeight:"700",color:"rgba(251, 191, 36, 0.95)"},children:"What is a Savant Pick?"})]}),r&&n.jsx("button",{onClick:()=>t(!1),style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.5)",fontSize:"1.5rem",cursor:"pointer",padding:"0",lineHeight:1},children:""})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.4rem"},children:[n.jsx("span",{style:{fontSize:"0.875rem",color:"#60A5FA"},children:""}),n.jsx("span",{style:{fontSize:"0.813rem",fontWeight:"700",color:"#60A5FA"},children:"Model-Generated Picks"})]}),n.jsxs("p",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",lineHeight:1.6,margin:0},children:["Powered by proprietary multi-source algorithmic analysis. Our models synthesize advanced metrics and real-time market data to identify ",n.jsx("strong",{style:{color:"#60A5FA"},children:"statistically significant edges"}),"."]})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.4rem"},children:[n.jsx("span",{style:{fontSize:"0.875rem"},children:""}),n.jsx("span",{style:{fontSize:"0.813rem",fontWeight:"700",color:"rgba(251, 191, 36, 0.95)"},children:"Savant Picks"})]}),n.jsxs("p",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",lineHeight:1.6,margin:0},children:["Analyst-enhanced selections. These picks layer qualitative intelligencelineup changes, injury reports, situational factorson top of our quantitative models. ",n.jsx("strong",{style:{color:"rgba(251, 191, 36, 0.9)"},children:"Extra conviction, same methodology."})]})]}),n.jsx("div",{style:{marginTop:"0.5rem",padding:"0.625rem 0.75rem",background:"linear-gradient(135deg, rgba(96, 165, 250, 0.08) 0%, rgba(139, 92, 246, 0.06) 100%)",border:"1px solid rgba(96, 165, 250, 0.15)",borderRadius:"8px"},children:n.jsxs("p",{style:{fontSize:"0.688rem",color:"rgba(148, 163, 184, 0.95)",lineHeight:1.5,margin:0,fontWeight:"500"},children:["Every play is tracked and verified. Savant Picks highlight where our analysts see ",n.jsx("span",{style:{color:"#60A5FA"},children:"additional confluence"})," worth noting."]})})]}),n.jsx("style",{children:`
              @keyframes slideIn {
                from { 
                  opacity: 0; 
                  transform: ${r?"translate(-50%, -48%)":"translateY(-8px)"};
                }
                to { 
                  opacity: 1; 
                  transform: ${r?"translate(-50%, -50%)":"translateY(0)"};
                }
              }
            `})]})]})]})},cW=()=>{const[r,e]=O.useState(!0),[t,i]=O.useState([]),[o,l]=O.useState(null),[c,u]=O.useState(null),[h,m]=O.useState(window.innerWidth<768),[f,x]=O.useState([]),[b,S]=O.useState("all"),[w,T]=O.useState("confidence"),[E,A]=O.useState(!1),[_,B]=O.useState(!1),[I,L]=O.useState(null),[M,R]=O.useState({}),[j,F]=O.useState(new Map),[z,P]=O.useState(new Set),[V,N]=O.useState(!1),{gradedCount:Z}=FV(),{user:Q}=ls(),{isPremium:H,isFree:U,loading:K}=Jo(Q),[X,re]=O.useState(!1),[me,ke]=O.useState(!1);O.useEffect(()=>{te()},[]),O.useEffect(()=>{const le=()=>m(window.innerWidth<768);return window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]),O.useEffect(()=>{async function le(){try{const xe=await ci(mr(St,"basketball_bets")),ue=new Map;xe.forEach(Re=>{const Te=Re.data();if(Te.type==="EVALUATION")return;const $e=et=>et.toLowerCase().replace(/[^a-z0-9]/g,""),rt=`${$e(Te.game.awayTeam)}_${$e(Te.game.homeTeam)}`,Ke=ue.get(rt);Ke?Te.isTotalsPick?Ke._totalsBet=Te:(Te._totalsBet=Ke.isTotalsPick?Ke:Ke._totalsBet,ue.set(rt,Te)):ue.set(rt,Te)}),F(ue)}catch(xe){console.error("Error fetching bets:",xe)}}le();const ve=setInterval(le,15e3);return()=>clearInterval(ve)},[Z]),O.useEffect(()=>{t.length>0&&!V&&(console.log(" Bet saving handled by GitHub workflow - UI read-only"),N(!0))},[t,V]),O.useEffect(()=>!t||t.length===0||!I?void 0:VV(t,I,async ve=>{const xe=ve.filter(Re=>Re.liveScore?.status==="final");for(const Re of xe){const Te=`${Re.awayTeam}_${Re.homeTeam}`;if(!z.has(Te)){P($e=>new Set($e).add(Te));try{await HV(Re.awayTeam,Re.homeTeam,Re.liveScore,Re.prediction)&&console.log(` Successfully graded bet for ${Te}`)}catch($e){console.error(` Failed to grade ${Te}:`,$e),P(rt=>{const Ke=new Set(rt);return Ke.delete(Te),Ke})}}}const ue=ve.map(Re=>{const Te={...Re};Re.liveScore&&Re.liveScore.status==="final"&&(Te.grade=WV(Re,Re.liveScore));const $e=et=>et.toLowerCase().replace(/[^a-z0-9]/g,""),rt=`${$e(Re.awayTeam)}_${$e(Re.homeTeam)}`,Ke=j.get(rt);if(Ke&&Ke.result?.outcome){const et=Ke.betRecommendation?.type==="ATS"||Ke.isATSPick,Tt=et?Ke.betRecommendation?.atsUnits||Ke.prediction?.unitSize||1:Ke.bet?.units||Ke.prediction?.unitSize||1,Dt=et?-110:Ke.bet?.odds;let Ce=Ke.result.outcome;if(et&&Ke.result?.awayScore!=null&&Ke.result?.homeScore!=null){const fe=Ke.betRecommendation?.atsSpread||Ke.spreadAnalysis?.spread||Ke.bet?.spread;if(fe!=null){const Ue=$e(Ke.bet?.team||""),We=$e(Ke.game?.awayTeam||""),kt=Ue===We,Ve=kt?Ke.result.awayScore:Ke.result.homeScore,J=kt?Ke.result.homeScore:Ke.result.awayScore,Ee=Ve-J;Ce=Ee+fe>0?"WIN":Ee+fe===0?"PUSH":"LOSS"}}const ot=Ce==="WIN";let Ae;if(ot&&Dt){const fe=Dt>0?Dt/100:100/Math.abs(Dt);Ae=Tt*fe}else Ce==="PUSH"?Ae=0:Ae=-Tt;Te.betOutcome={outcome:Ce,profit:Ae,units:Tt}}return Te});x(ue)},15e3),[t,I,j,z]);async function te(){try{e(!0);const le=`?t=${Date.now()}`,ve=await fetch(`/basketball_odds.md${le}`),xe=await fetch(`/haslametrics.md${le}`),ue=await fetch(`/dratings.md${le}`),Re=await fetch(`/basketball_teams.csv${le}`),Te=await fetch(`/Bart.md${le}`),$e=await fetch(`/bart_pbp.md${le}`),rt=await ve.text(),Ke=await xe.text(),et=await ue.text(),Tt=await Te.text(),Dt=$e.ok?await $e.text():"",Ce=await Re.text(),ot=c3(rt),Ae=d3(Ke),fe=u3(et),Ue=hV(Tt),We=Dt?gV(Dt):{},kt=h3(Ce);L(kt),R(We);const J=g3(ot,Ae,fe,Ue,Ce).map(Se=>({...Se,hasOdds:!!Se.odds,hasDRatings:!!Se.dratings,hasHaslametrics:!!Se.haslametrics,verificationStatus:Se.dratings?"MATCHED":"MISSING"})),Ee=await vV();console.log(` Loaded confidence weights (${Ee.totalBets} bets analyzed)`);const Xe=new kV;Xe.setConfidenceWeights(Ee);const ut=Xe.processGames(J),mt=new Date,be=new Date(mt.toLocaleString("en-US",{timeZone:"America/New_York"})),oe=`${be.getFullYear()}-${String(be.getMonth()+1).padStart(2,"0")}-${String(be.getDate()).padStart(2,"0")}`,Ie=await ci(Jr(mr(St,"basketball_bets"),$n("date","==",oe))),Pe=[];Ie.forEach(Se=>{const qe=Se.data();qe.betStatus==="FLAGGED"||qe.betStatus==="KILLED"||qe.type==="EVALUATION"||Pe.push(qe)}),console.log(` Found ${Pe.length} live picks for today`);const Fe=[],he=Se=>Se.toLowerCase().replace(/[^a-z0-9]/g,""),He=new Set;for(const Se of Pe){const qe=`${he(Se.game.awayTeam)}_${he(Se.game.homeTeam)}`;if(He.has(qe))continue;He.add(qe);const Ne={awayTeam:Se.game.awayTeam,homeTeam:Se.game.homeTeam,odds:{gameTime:Se.game.gameTime,awayOdds:Se.bet.team===Se.game.awayTeam?Se.bet.odds:null,homeOdds:Se.bet.team===Se.game.homeTeam?Se.bet.odds:null},prediction:{...Se.prediction,bestTeam:Se.bet.team,bestOdds:Se.bet.odds,bestEV:Se.prediction?.evPercent||Se.initialEV||0,bestBet:Se.bet.team===Se.game.awayTeam?"away":"home",grade:Se.prediction?.grade||Se.prediction?.qualityGrade||"B",unitSize:Se.prediction?.unitSize||1,ensembleAwayProb:Se.prediction?.ensembleAwayProb||.5,ensembleHomeProb:Se.prediction?.ensembleHomeProb||.5,marketAwayProb:Se.prediction?.marketAwayProb||.5,marketHomeProb:Se.prediction?.marketHomeProb||.5,isLockedPick:!0,isFirebaseLocked:Se.isLocked===!0,lockedAt:Se.firstRecommendedAt,initialOdds:Se.initialOdds,initialEV:Se.initialEV},clv:Se.clv||null,barttorvik:Se.barttorvik||null},ze=ut.find(tt=>`${he(tt.awayTeam)}_${he(tt.homeTeam)}`===qe)||J.find(tt=>`${he(tt.awayTeam)}_${he(tt.homeTeam)}`===qe);ze?(console.log(`    Locked pick with fresh data: ${Se.game.awayTeam} @ ${Se.game.homeTeam}`),Fe.push({...ze,barttorvik:ze.barttorvik||Se.barttorvik||null,prediction:Ne.prediction,odds:Ne.odds,clv:Se.clv||null})):(console.log(`    Locked pick (no fresh data): ${Se.game.awayTeam} @ ${Se.game.homeTeam}`),Fe.push(Ne))}console.log(` Total games: ${Fe.length} locked picks (${ut.length} passed client filter, ignored  V4 server picks are source of truth)`);const Qe=Fe.sort((Se,qe)=>{const Ne=Se.prediction?.unitSize||0,ze=qe.prediction?.unitSize||0;if(Ne!==ze)return ze-Ne;const tt=Se.prediction?.spreadBoost||0,_e=qe.prediction?.spreadBoost||0;if(tt!==_e)return _e-tt;const xt=Se.prediction?.bestEV||Se.prediction?.evPercent||0,Zt=qe.prediction?.bestEV||qe.prediction?.evPercent||0;if(Math.abs(xt-Zt)>.1)return Zt-xt;const wt=Se.odds?.gameTime||"",Ut=qe.odds?.gameTime||"";if(wt==="TBD")return 1;if(Ut==="TBD")return-1;if(!wt||!Ut)return 0;const Dr=_n=>{const Vr=_n.match(/(\d+):(\d+)(am|pm)/i);if(!Vr)return 0;let[it,Be,$t,Vt]=Vr;return Be=parseInt(Be),$t=parseInt($t),Vt.toLowerCase()==="pm"&&Be!==12&&(Be+=12),Vt.toLowerCase()==="am"&&Be===12&&(Be=0),Be*60+$t};return Dr(wt)-Dr(Ut)});i(Qe);const Oe=Qe.filter(Se=>Se.prediction?.isLockedPick).length,Le=Qe.length-Oe;l({totalGames:ot.length,qualityPicks:Qe.length,lockedPicks:Oe,freshPicks:Le,displayedGames:Qe.length,gamesWithDRatings:J.filter(Se=>Se.hasDRatings).length,gamesWithHasla:J.filter(Se=>Se.hasHaslametrics).length,missingDRatings:J.filter(Se=>!Se.hasDRatings).length,avgEV:Qe.length>0?(Qe.reduce((Se,qe)=>Se+(qe.prediction?.bestEV||0),0)/Qe.length).toFixed(1):"0.0"}),e(!1)}catch(le){console.error("Error loading basketball data:",le),u(le.message),e(!1)}}return r?n.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"white"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"20px"},children:""}),n.jsx("div",{children:"Loading basketball data..."})]}):c?n.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#ff6b6b"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"20px"},children:""}),n.jsxs("div",{children:["Error: ",c]})]}):n.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",padding:"0"},children:[n.jsx(iW,{}),n.jsxs("div",{style:{padding:h?"1rem":"20px"},children:[n.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",marginBottom:h?"1.5rem":"2rem",padding:h?"1rem":"0"},children:[n.jsxs(vt,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",marginBottom:"1.5rem",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"600",textDecoration:"none",color:"rgba(212, 175, 55, 0.9)",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",transition:"all 0.3s ease"},onMouseEnter:le=>{le.currentTarget.style.transform="translateX(-4px)",le.currentTarget.style.boxShadow="0 4px 12px rgba(212, 175, 55, 0.3)",le.currentTarget.style.background="linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.08) 100%)"},onMouseLeave:le=>{le.currentTarget.style.transform="translateX(0)",le.currentTarget.style.boxShadow="none",le.currentTarget.style.background="linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%)"},children:[n.jsx("span",{style:{fontSize:"1.125rem"},children:""}),n.jsx("span",{children:" NHL Today's Games"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",marginBottom:"0.75rem"},children:[n.jsx("h1",{style:{fontSize:h?G.hero.size:"2rem",fontWeight:G.hero.weight,color:"#FF8C42",margin:0,letterSpacing:"-0.02em",lineHeight:G.hero.lineHeight},children:" Today's Best Picks"}),n.jsxs("button",{onClick:()=>{e(!0),te()},style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid rgba(255, 140, 66, 0.3)",background:"linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 140, 66, 0.05) 100%)",color:"#FF8C42",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:le=>{le.currentTarget.style.background="linear-gradient(135deg, rgba(255, 140, 66, 0.2) 0%, rgba(255, 140, 66, 0.1) 100%)",le.currentTarget.style.transform="translateY(-2px)",le.currentTarget.style.boxShadow="0 4px 12px rgba(255, 140, 66, 0.3)"},onMouseLeave:le=>{le.currentTarget.style.background="linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 140, 66, 0.05) 100%)",le.currentTarget.style.transform="translateY(0)",le.currentTarget.style.boxShadow="none"},children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Refresh Data"})]})]}),n.jsx("p",{style:{fontSize:G.body.size,fontWeight:G.body.weight,color:"rgba(255,255,255,0.8)",textAlign:"center",marginBottom:"0.5rem"},children:"Value-driven recommendations with 2%+ expected edge"})]}),n.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto 1.5rem auto",padding:h?"0 1rem":"0"},children:n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.10) 0%, rgba(59, 130, 246, 0.10) 100%)",border:"2px solid rgba(16, 185, 129, 0.25)",borderRadius:h?"14px":"16px",padding:h?"1rem 1.125rem":"1.125rem 1.375rem",backdropFilter:"blur(12px)",boxShadow:"0 5px 18px rgba(16, 185, 129, 0.15), inset 0 1px 0 rgba(255,255,255,0.08)"},children:n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:h?"0.875rem":"0.938rem",fontWeight:"900",color:"#10B981",marginBottom:"0.375rem",letterSpacing:"-0.01em",textTransform:"uppercase"},children:"Smart Unit Allocation"}),n.jsx("div",{style:{fontSize:h?"0.75rem":"0.813rem",color:"rgba(255,255,255,0.80)",lineHeight:1.5,fontWeight:"600"},children:h?"Unit sizes based on historical pattern performance (0.5u-5.0u)":"Every matchup is analyzed, but unit allocation is scaled by historical pattern performance. Strong patterns receive up to 5.0 units, while volatile patterns are allocated 0.5-1.0 units for optimal risk management."})]})})}),n.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto 2rem auto",padding:h?"0 1rem":"0"},children:[n.jsx(eW,{}),o&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:h?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:h?"1rem":"1.5rem",marginTop:"1.5rem",padding:h?"1.5rem":"2rem",background:ln.hero,borderRadius:h?dt.borderRadius:"16px",border:Mt.elevated.border,boxShadow:Mt.elevated.shadow},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:h?"1.5rem":G.hero.size,fontWeight:G.hero.weight,color:"#10B981",lineHeight:G.hero.lineHeight},children:o.qualityPicks}),n.jsx("div",{style:{fontSize:G.label.size,fontWeight:G.label.weight,color:"rgba(255,255,255,0.7)",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:"QUALITY PICKS"})]}),!h&&n.jsxs("div",{style:{textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:G.hero.size,fontWeight:G.hero.weight,color:"#3B82F6",lineHeight:G.hero.lineHeight},children:["+",o.avgEV,"%"]}),n.jsx("div",{style:{fontSize:G.label.size,fontWeight:G.label.weight,color:"rgba(255,255,255,0.7)",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:"AVG EDGE"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:h?"1.5rem":G.hero.size,fontWeight:G.hero.weight,color:"#FF8C42",lineHeight:G.hero.lineHeight},children:o.totalGames}),n.jsx("div",{style:{fontSize:G.label.size,fontWeight:G.label.weight,color:"rgba(255,255,255,0.7)",textTransform:G.label.textTransform,letterSpacing:G.label.letterSpacing},children:"GAMES TODAY"})]})]})]}),f.length>0&&n.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto 1rem auto"},children:n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-start",gap:"12px"},children:[n.jsx(YV,{currentFilter:b,onFilterChange:S,counts:{all:f.length,scheduled:f.filter(le=>!le.liveScore||le.liveScore.status==="pre").length,live:f.filter(le=>le.liveScore&&le.liveScore.status==="live").length,final:f.filter(le=>le.liveScore&&le.liveScore.status==="final").length}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsxs("button",{onClick:()=>A(!E),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"8px",background:E?"linear-gradient(135deg, rgba(251, 191, 36, 0.25) 0%, rgba(245, 158, 11, 0.15) 100%)":"rgba(15, 23, 42, 0.5)",border:E?"2px solid rgba(251, 191, 36, 0.5)":"1px solid rgba(71, 85, 105, 0.3)",cursor:"pointer",transition:"all 0.2s ease"},children:[n.jsx("span",{style:{fontSize:"12px"},children:""}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:E?"rgba(251, 191, 36, 0.95)":"#cbd5e1"},children:"Savant Only"}),n.jsx("span",{style:{fontSize:"11px",fontWeight:"700",color:E?"rgba(251, 191, 36, 0.8)":"rgba(255,255,255,0.5)",background:E?"rgba(251, 191, 36, 0.15)":"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:"4px"},children:(()=>{const le=xe=>xe?.toLowerCase().replace(/[^a-z0-9]/g,"")||"";return(f.length>0?f:t).filter(xe=>{const ue=`${le(xe.awayTeam)}_${le(xe.homeTeam)}`,Re=j.get(ue);return Re?.savantPick===!0&&Re?.betStatus!=="FLAGGED"&&Re?.betStatus!=="KILLED"}).length})()})]}),n.jsxs("button",{onClick:()=>B(!_),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"8px",background:_?"linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(37, 99, 235, 0.15) 100%)":"rgba(15, 23, 42, 0.5)",border:_?"2px solid rgba(59, 130, 246, 0.5)":"1px solid rgba(71, 85, 105, 0.3)",cursor:"pointer",transition:"all 0.2s ease"},children:[n.jsx("span",{style:{fontSize:"12px"},children:""}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:_?"rgba(59, 130, 246, 0.95)":"#cbd5e1"},children:"Prime"}),n.jsx("span",{style:{fontSize:"11px",fontWeight:"700",color:_?"rgba(59, 130, 246, 0.8)":"rgba(255,255,255,0.5)",background:_?"rgba(59, 130, 246, 0.15)":"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:"4px"},children:(()=>{const le=xe=>xe?.toLowerCase().replace(/[^a-z0-9]/g,"")||"";return(f.length>0?f:t).filter(xe=>{const ue=`${le(xe.awayTeam)}_${le(xe.homeTeam)}`,Re=j.get(ue);return Re?.prediction?.spreadBoost>0&&Re?.betStatus!=="FLAGGED"&&Re?.betStatus!=="KILLED"}).length})()})]}),n.jsx(lW,{isMobile:h})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[n.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.6)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Sort:"}),[{value:"confidence",label:"Confidence",icon:""},{value:"savant",label:"Savant Picks",icon:""},{value:"time",label:"Start Time",icon:""},{value:"edge",label:"Edge %",icon:""}].map(le=>{const ve=w===le.value;return n.jsxs("button",{onClick:xe=>{xe.preventDefault(),xe.stopPropagation(),console.log("Sort clicked:",le.value),T(le.value)},style:{background:ve?"linear-gradient(135deg, #8b5cf6, #7c3aed)":"rgba(15, 23, 42, 0.5)",border:ve?"2px solid #8b5cf6":"1px solid rgba(71, 85, 105, 0.3)",color:ve?"#ffffff":"#cbd5e1",padding:"8px 12px",borderRadius:"8px",fontSize:"13px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",transition:"all 0.2s ease"},onMouseEnter:xe=>{ve||(xe.currentTarget.style.background="rgba(30, 41, 59, 0.8)",xe.currentTarget.style.borderColor="rgba(139, 92, 246, 0.5)")},onMouseLeave:xe=>{ve||(xe.currentTarget.style.background="rgba(15, 23, 42, 0.5)",xe.currentTarget.style.borderColor="rgba(71, 85, 105, 0.3)")},children:[n.jsx("span",{children:le.icon}),n.jsx("span",{children:le.label})]},le.value)})]})]})}),n.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[t.length===0?n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%)",border:"2px dashed rgba(139, 92, 246, 0.3)",borderRadius:"20px",padding:h?"3rem 1.5rem":"4rem 2rem",textAlign:"center",maxWidth:"600px",margin:"0 auto"},children:[n.jsx("div",{style:{fontSize:h?"3rem":"4rem",marginBottom:"1.5rem",opacity:.8},children:""}),n.jsx("div",{style:{fontSize:h?G.heading.size:"1.5rem",fontWeight:"800",color:"white",marginBottom:"0.75rem",letterSpacing:"-0.01em"},children:"No Quality Picks Today"}),n.jsx("div",{style:{fontSize:G.body.size,color:"rgba(255,255,255,0.6)",lineHeight:"1.6",maxWidth:"400px",margin:"0 auto"},children:"Our model hasn't found any games with 2%+ expected value today. Check back later for updated odds."})]}):n.jsxs("div",{style:{display:"grid",gap:h?"1rem":"1.5rem"},children:[(()=>{const le=f.length>0?f:t,ve=Ce=>Ce?.toLowerCase().replace(/[^a-z0-9]/g,"")||"",xe=Ce=>{const ot=`${ve(Ce.awayTeam)}_${ve(Ce.homeTeam)}`,Ae=j.get(ot);return Ae?.savantPick===!0&&Ae?.betStatus!=="FLAGGED"&&Ae?.betStatus!=="KILLED"};let ue=le.filter(Ce=>b==="all"?!0:Ce.liveScore?Ce.liveScore.status===b:b==="pre");E&&(ue=ue.filter(Ce=>xe(Ce))),_&&(ue=ue.filter(Ce=>{const ot=`${ve(Ce.awayTeam)}_${ve(Ce.homeTeam)}`;return j.get(ot)?.prediction?.spreadBoost>0}));const Re=Ce=>Ce.dratings?.gameTime||Ce.haslametrics?.gameTime||Ce.odds?.gameTime||Ce.gameTime||"";w==="savant"?ue=[...ue].sort((Ce,ot)=>{const Ae=xe(Ce),fe=xe(ot);if(Ae&&!fe)return-1;if(!Ae&&fe)return 1;const Ue=Ce.prediction?.unitSize||0;return(ot.prediction?.unitSize||0)-Ue}):w==="time"?ue=[...ue].sort((Ce,ot)=>{const Ae=fe=>{if(!fe)return 9999;if(fe.toUpperCase()==="LIVE")return-1;const Ue=fe.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!Ue)return 9999;let We=parseInt(Ue[1]);const kt=parseInt(Ue[2]),Ve=Ue[3].toUpperCase()==="PM";return Ve&&We!==12&&(We+=12),!Ve&&We===12&&(We=0),We*60+kt};return Ae(Re(Ce))-Ae(Re(ot))}):w==="edge"?ue=[...ue].sort((Ce,ot)=>{const Ae=Ce.prediction?.ev||Ce.prediction?.edge||0;return(ot.prediction?.ev||ot.prediction?.edge||0)-Ae}):w==="confidence"&&(ue=[...ue].sort((Ce,ot)=>{const Ae=Ce.prediction?.unitSize||0,fe=ot.prediction?.unitSize||0;if(Ae!==fe)return fe-Ae;const Ue=Ce.prediction?.evPercent||Ce.prediction?.ev||0;return(ot.prediction?.evPercent||ot.prediction?.ev||0)-Ue}));const Te=U&&!K&&ue.length>1&&!me,$e=Te?ue.slice(0,1):ue,rt=Te?ue.slice(1):[],Ke=$e;console.log(` PAYWALL CHECK: isPremium=${H}, isFree=${U}, shouldShowPaywall=${Te}`),console.log(` GAMES: total=${ue.length}, displaying=${Ke.length}, locked=${rt.length}`);const et={max:[],moderate:[],small:[]};Ke.forEach(Ce=>{if(!Ce.prediction?.grade||!Ce.bet?.odds){et.moderate.push(Ce);return}const ot=AV(Ce.prediction);ot.tier<=2?et.max.push(Ce):ot.tier<=4?et.moderate.push(Ce):et.small.push(Ce)});const Tt={maximum:{count:et.max.length,totalUnits:et.max.reduce((Ce,ot)=>Ce+(ot.prediction?.unitSize||0),0),games:et.max},moderate:{count:et.moderate.length,totalUnits:et.moderate.reduce((Ce,ot)=>Ce+(ot.prediction?.unitSize||0),0),games:et.moderate},small:{count:et.small.length,totalUnits:et.small.reduce((Ce,ot)=>Ce+(ot.prediction?.unitSize||0),0),games:et.small}};let Dt=1;if(w==="time"||w==="edge"||w==="savant"){const Ce={time:{label:"Start Time",icon:"",desc:"Earliest games first",color:"#a78bfa"},edge:{label:"Edge %",icon:"",desc:"Highest edge first",color:"#a78bfa"},savant:{label:"Savant Picks",icon:"",desc:"Analyst picks first",color:"rgba(251, 191, 36, 0.95)"}},{label:ot,icon:Ae,desc:fe,color:Ue}=Ce[w],We=Ke.filter(kt=>xe(kt)).length;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:h?"12px 14px":"14px 20px",background:w==="savant"?"linear-gradient(135deg, rgba(251, 191, 36, 0.12), rgba(245, 158, 11, 0.05))":"linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(139, 92, 246, 0.05))",border:w==="savant"?"1px solid rgba(251, 191, 36, 0.25)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"12px",marginBottom:"12px"},children:[n.jsx("span",{style:{fontSize:"20px"},children:Ae}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:h?"14px":"15px",fontWeight:"700",color:Ue,textTransform:"uppercase",letterSpacing:"0.05em"},children:["Sorted by ",ot]}),n.jsxs("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.6)"},children:[ue.length," game",ue.length!==1?"s":""," ",w==="savant"?` ${We} Savant Pick${We!==1?"s":""}`:` ${fe}`]})]})]}),Ke.map(kt=>n.jsx(_g,{game:kt,rank:Dt++,isMobile:h,hasLiveScore:!!kt.liveScore,isSavantPick:xe(kt),displayTime:w==="time"?Re(kt):null,betsMap:j,pbpData:M},Dt))]})}return n.jsxs(n.Fragment,{children:[et.max.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(ej,{emoji:"",title:h?"MAX CONFIDENCE":"MAXIMUM CONFIDENCE",subtitle:`${et.max.length} game${et.max.length!==1?"s":""}  Top-tier opportunities with 5.0 unit allocation`,color:"#10B981",unitRange:"5.0u",isMobile:h}),et.max.map(Ce=>n.jsx(_g,{game:Ce,rank:Dt++,isMobile:h,hasLiveScore:!!Ce.liveScore,isSavantPick:xe(Ce),betsMap:j,pbpData:M},Dt))]}),et.moderate.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(dW,{emoji:"",title:"CORE PLAYS",subtitle:`${et.moderate.length} game${et.moderate.length!==1?"s":""}  Standard allocation between 1.5-4.0 units`,color:"#3B82F6",unitRange:"1.5-4.0u",isMobile:h,tierGames:et.moderate,allTiers:Tt}),et.moderate.map(Ce=>n.jsx(_g,{game:Ce,rank:Dt++,isMobile:h,hasLiveScore:!!Ce.liveScore,isSavantPick:xe(Ce),betsMap:j,pbpData:M},Dt))]}),et.small.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(ej,{emoji:"",title:"SMALL POSITION",subtitle:`${et.small.length} game${et.small.length!==1?"s":""}  Conservative 0.5-1.0 unit allocation for risk management`,color:"#8B5CF6",unitRange:"0.5-1.0u",isMobile:h}),et.small.map(Ce=>n.jsx(_g,{game:Ce,rank:Dt++,isMobile:h,hasLiveScore:!!Ce.liveScore,isSavantPick:xe(Ce),betsMap:j,pbpData:M},Dt))]})]})})(),(()=>{const le=f.length>0?f:t;return U&&!K&&le.length>1&&!me?(console.log(` RENDERING SOFT PAYWALL: ${le.length-1} games locked`),n.jsx(sW,{games:le,onUpgradeClick:()=>re(!0),onDismiss:()=>{console.log(" User dismissed paywall - showing full preview"),ke(!0)}})):null})()]}),n.jsx(oW,{show:X,onClose:()=>re(!1)})]})]})]})},dW=({emoji:r,title:e,subtitle:t,color:i,unitRange:o,isMobile:l,tierGames:c,allTiers:u})=>{const[h,m]=O.useState(!1),f=c.reduce((A,_)=>A+(_.prediction?.unitSize||0),0),x=c.length>0?c.reduce((A,_)=>A+(_.prediction?.historicalROI||0),0)/c.length:0,b=f*(x/100),S=[...c].sort((A,_)=>(_.prediction?.unitSize||0)-(A.prediction?.unitSize||0)).slice(0,3),w={elite:{min:5,max:5,games:[],totalUnits:0,color:"#10B981",label:"Elite"},premium:{min:4,max:4.9,games:[],totalUnits:0,color:"#14B8A6",label:"Premium"},strong:{min:2.5,max:3.9,games:[],totalUnits:0,color:"#3B82F6",label:"Strong"},conservative:{min:1,max:2.4,games:[],totalUnits:0,color:"#8B5CF6",label:"Conservative"},minimal:{min:.5,max:.9,games:[],totalUnits:0,color:"#6366F1",label:"Minimal"}};[...u?.maximum?.games||[],...u?.moderate?.games||[],...u?.small?.games||[]].forEach(A=>{const _=A.prediction?.unitSize||0;_>=5?(w.elite.games.push(A),w.elite.totalUnits+=_):_>=4?(w.premium.games.push(A),w.premium.totalUnits+=_):_>=2.5?(w.strong.games.push(A),w.strong.totalUnits+=_):_>=1?(w.conservative.games.push(A),w.conservative.totalUnits+=_):_>=.5&&(w.minimal.games.push(A),w.minimal.totalUnits+=_)});const E=Object.values(w).reduce((A,_)=>A+_.totalUnits,0);return n.jsxs("div",{style:{background:`linear-gradient(135deg, ${i}18 0%, ${i}10 100%)`,border:`2px solid ${i}40`,borderRadius:l?"14px":"16px",padding:l?"1rem 1.125rem":"1.125rem 1.375rem",marginBottom:l?"0.75rem":"1rem",backdropFilter:"blur(12px)",boxShadow:`0 6px 20px ${i}20, inset 0 1px 0 rgba(255,255,255,0.08)`,position:"relative",overflow:"hidden",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>m(!h),children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at top left, ${i}15 0%, transparent 60%)`,pointerEvents:"none"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l?"0.875rem":"1rem",position:"relative",zIndex:1},children:[n.jsx("div",{style:{width:l?"42px":"48px",height:l?"42px":"48px",borderRadius:"12px",background:`linear-gradient(135deg, ${i}30 0%, ${i}20 100%)`,border:`2px solid ${i}50`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:l?"1.375rem":"1.5rem",flexShrink:0,boxShadow:`0 4px 12px ${i}25, inset 0 1px 0 rgba(255,255,255,0.15)`},children:r}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontSize:l?"0.938rem":"1.063rem",fontWeight:"900",color:i,letterSpacing:"-0.02em",marginBottom:"0.375rem",textShadow:`0 2px 16px ${i}35`,lineHeight:1.15},children:e}),!h&&n.jsxs("div",{style:{display:"flex",gap:l?"0.625rem":"0.75rem",alignItems:"center",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.5rem",background:"rgba(255,255,255,0.08)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.12)"},children:[n.jsx("span",{style:{fontSize:l?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.60)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.03em"},children:"Games"}),n.jsx("span",{style:{fontSize:l?"0.75rem":"0.813rem",color:"rgba(255,255,255,0.95)",fontWeight:"900",fontFeatureSettings:"'tnum'"},children:c.length})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.5rem",background:`${i}15`,borderRadius:"6px",border:`1px solid ${i}30`},children:[n.jsx("span",{style:{fontSize:l?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.60)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.03em"},children:"Units"}),n.jsx("span",{style:{fontSize:l?"0.75rem":"0.813rem",color:i,fontWeight:"900",fontFeatureSettings:"'tnum'"},children:f.toFixed(1)})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.5rem",background:x>=0?"rgba(16,185,129,0.12)":"rgba(239,68,68,0.12)",borderRadius:"6px",border:x>=0?"1px solid rgba(16,185,129,0.25)":"1px solid rgba(239,68,68,0.25)"},children:[n.jsx("span",{style:{fontSize:l?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.60)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.03em"},children:"ROI"}),n.jsxs("span",{style:{fontSize:l?"0.75rem":"0.813rem",color:x>=0?"#10B981":"#EF4444",fontWeight:"900",fontFeatureSettings:"'tnum'"},children:[x>=0?"+":"",x.toFixed(1),"%"]})]})]}),h&&n.jsxs("div",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.70)",lineHeight:1.35,fontWeight:"600"},children:[c.length," games  ",f.toFixed(1),"u allocated  ",x>=0?"+":"",x.toFixed(1),"% ROI"]})]}),b>=0&&n.jsxs("div",{style:{padding:l?"0.375rem 0.625rem":"0.5rem 0.875rem",background:"linear-gradient(135deg, rgba(16,185,129,0.25) 0%, rgba(16,185,129,0.15) 100%)",border:"1.5px solid rgba(16,185,129,0.40)",borderRadius:"10px",fontSize:l?"0.75rem":"0.813rem",fontWeight:"900",color:"#10B981",fontFeatureSettings:"'tnum'",letterSpacing:"0.02em",boxShadow:"0 2px 8px rgba(16,185,129,0.20)",whiteSpace:"nowrap"},children:["+",b.toFixed(1),"u"]})]}),h&&n.jsxs("div",{style:{marginTop:l?"0.875rem":"1rem",paddingTop:l?"0.875rem":"1rem",borderTop:`1px solid ${i}25`,position:"relative",zIndex:1},children:[n.jsxs("div",{style:{marginBottom:l?"1rem":"1.25rem"},children:[n.jsxs("div",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.85)",fontWeight:"900",marginBottom:l?"0.625rem":"0.75rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:l?"3px":"4px",height:l?"12px":"14px",background:`linear-gradient(180deg, ${i} 0%, ${i}80 100%)`,borderRadius:"2px"}}),"Today's Distribution"]}),Object.entries(w).map(([A,_],B)=>{const I=E>0?_.totalUnits/E*100:0,L=B===Object.keys(w).length-1;return _.games.length===0?null:n.jsxs("div",{style:{background:"rgba(0,0,0,0.25)",borderRadius:"10px",padding:l?"0.625rem 0.75rem":"0.75rem 0.875rem",border:`1px solid ${_.color}20`,backdropFilter:"blur(8px)",marginBottom:L?0:l?"0.5rem":"0.625rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[n.jsxs("div",{style:{fontSize:l?"0.625rem":"0.688rem",color:_.color,fontWeight:B===0?"800":"700",letterSpacing:"0.02em"},children:[_.label.toUpperCase()," ",n.jsxs("span",{style:{color:"rgba(255,255,255,0.45)",fontWeight:"600"},children:["(",_.min===_.max?`${_.min}u`:`${_.min}-${_.max}u`,")"]})]}),n.jsxs("div",{style:{fontSize:l?"0.625rem":"0.688rem",fontWeight:"800",color:_.color,fontFeatureSettings:"'tnum'",display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsxs("span",{style:{color:"rgba(255,255,255,0.60)",fontWeight:"600"},children:[_.games.length," game",_.games.length!==1?"s":""]}),n.jsxs("span",{style:{padding:"0.125rem 0.375rem",background:`${_.color}15`,borderRadius:"4px",border:`1px solid ${_.color}30`},children:[_.totalUnits.toFixed(1),"u"]})]})]}),n.jsx("div",{style:{height:l?"7px":"9px",background:"linear-gradient(90deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.04) 100%)",borderRadius:"6px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.08)",position:"relative"},children:n.jsx("div",{style:{width:`${I}%`,height:"100%",background:`linear-gradient(90deg, ${_.color} 0%, ${_.color}DD 100%)`,transition:"width 0.8s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:`0 0 10px ${_.color}40`,position:"relative"},children:n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"50%",background:"linear-gradient(180deg, rgba(255,255,255,0.2) 0%, transparent 100%)",borderRadius:"6px 6px 0 0"}})})})]},A)})]}),n.jsxs("div",{style:{background:"rgba(0,0,0,0.25)",borderRadius:"12px",padding:l?"0.875rem":"1rem",border:"1px solid rgba(255,255,255,0.08)",backdropFilter:"blur(8px)"},children:[n.jsxs("div",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.85)",fontWeight:"900",marginBottom:l?"0.75rem":"0.875rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{width:l?"3px":"4px",height:l?"12px":"14px",background:`linear-gradient(180deg, ${i} 0%, ${i}80 100%)`,borderRadius:"2px"}}),"Top Plays in This Tier"]}),S.map((A,_)=>{const B=Z6(A.prediction?.unitSize||2,A.prediction?.stars),L=["#10B981","#14B8A6","#3B82F6"][_]||i;return n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.03) 100%)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:"10px",padding:l?"0.625rem 0.75rem":"0.75rem 0.875rem",marginBottom:_<S.length-1?l?"0.5rem":"0.625rem":0,display:"flex",alignItems:"center",gap:l?"0.625rem":"0.75rem",transition:"all 0.2s ease",cursor:"pointer",position:"relative",overflow:"hidden"},onMouseEnter:M=>{M.currentTarget.style.background="linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.05) 100%)",M.currentTarget.style.borderColor="rgba(255,255,255,0.18)",M.currentTarget.style.transform="translateX(4px)"},onMouseLeave:M=>{M.currentTarget.style.background="linear-gradient(135deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.03) 100%)",M.currentTarget.style.borderColor="rgba(255,255,255,0.12)",M.currentTarget.style.transform="translateX(0)"},children:[n.jsxs("div",{style:{width:l?"26px":"30px",height:l?"26px":"30px",borderRadius:"8px",background:`linear-gradient(135deg, ${L}35 0%, ${L}20 100%)`,border:`2px solid ${L}50`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:l?"0.688rem":"0.75rem",fontWeight:"900",color:L,flexShrink:0,boxShadow:`0 4px 12px ${L}25, inset 0 1px 0 rgba(255,255,255,0.15)`,position:"relative"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at top, ${L}20 0%, transparent 70%)`,pointerEvents:"none"}}),_+1]}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsxs("div",{style:{fontSize:l?"0.75rem":"0.813rem",fontWeight:"900",color:"rgba(255,255,255,0.95)",marginBottom:"0.25rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",letterSpacing:"-0.01em"},children:[A.awayTeam," @ ",A.homeTeam]}),n.jsxs("div",{style:{fontSize:l?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.60)",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{padding:"0.125rem 0.375rem",background:`${B.borderColor}20`,border:`1px solid ${B.borderColor}35`,borderRadius:"4px",display:"inline-flex",gap:"1px",alignItems:"center"},children:[...Array(5)].map((M,R)=>n.jsx("span",{style:{fontSize:l?"0.5rem":"0.563rem",color:R<B.fullStars?"#FBBF24":"rgba(255,255,255,0.15)",lineHeight:1},children:""},R))}),n.jsxs("span",{style:{color:"rgba(255,255,255,0.55)",fontFeatureSettings:"'tnum'"},children:[A.prediction?.bestOdds>0?"+":"",A.prediction?.bestOdds]})]})]}),n.jsxs("div",{style:{padding:l?"0.375rem 0.625rem":"0.5rem 0.75rem",background:`linear-gradient(135deg, ${i}30 0%, ${i}20 100%)`,border:`1.5px solid ${i}45`,borderRadius:"8px",fontSize:l?"0.75rem":"0.813rem",fontWeight:"900",color:i,whiteSpace:"nowrap",boxShadow:`0 2px 8px ${i}20, inset 0 1px 0 rgba(255,255,255,0.1)`,fontFeatureSettings:"'tnum'",letterSpacing:"-0.01em"},children:[A.prediction?.unitSize.toFixed(1),"u"]}),n.jsxs("div",{style:{padding:l?"0.375rem 0.5rem":"0.5rem 0.625rem",background:A.prediction?.historicalROI>=0?"linear-gradient(135deg, rgba(16,185,129,0.20) 0%, rgba(16,185,129,0.12) 100%)":"linear-gradient(135deg, rgba(245,158,11,0.20) 0%, rgba(245,158,11,0.12) 100%)",border:A.prediction?.historicalROI>=0?"1.5px solid rgba(16,185,129,0.35)":"1.5px solid rgba(245,158,11,0.35)",borderRadius:"8px",fontSize:l?"0.688rem":"0.75rem",fontWeight:"900",color:A.prediction?.historicalROI>=0?"#10B981":"#F59E0B",whiteSpace:"nowrap",fontFeatureSettings:"'tnum'",boxShadow:A.prediction?.historicalROI>=0?"0 2px 8px rgba(16,185,129,0.15)":"0 2px 8px rgba(245,158,11,0.15)"},children:[A.prediction?.historicalROI>=0?"+":"",A.prediction?.historicalROI.toFixed(1),"%"]})]},_)})]}),n.jsx("div",{style:{marginTop:l?"1rem":"1.125rem",paddingTop:l?"0.875rem":"1rem",borderTop:`1px solid ${i}15`,textAlign:"center"},children:n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.375rem 0.875rem",background:`linear-gradient(135deg, ${i}12 0%, ${i}08 100%)`,border:`1px solid ${i}20`,borderRadius:"8px",fontSize:l?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.55)",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.08em",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:A=>{A.currentTarget.style.background=`linear-gradient(135deg, ${i}20 0%, ${i}12 100%)`,A.currentTarget.style.borderColor=`${i}35`,A.currentTarget.style.color="rgba(255,255,255,0.75)"},onMouseLeave:A=>{A.currentTarget.style.background=`linear-gradient(135deg, ${i}12 0%, ${i}08 100%)`,A.currentTarget.style.borderColor=`${i}20`,A.currentTarget.style.color="rgba(255,255,255,0.55)"},children:[n.jsx("span",{children:"Collapse Details"}),n.jsx("span",{style:{fontSize:l?"0.75rem":"0.813rem"},children:""})]})})]}),!h&&n.jsx(n.Fragment,{children:n.jsxs("div",{style:{marginTop:l?"0.75rem":"0.875rem",paddingTop:l?"0.75rem":"0.875rem",borderTop:`1px solid ${i}15`,position:"relative",zIndex:1},children:[n.jsx("div",{style:{display:"flex",gap:l?"0.375rem":"0.5rem",marginBottom:l?"0.625rem":"0.75rem",alignItems:"center"},children:Object.entries(w).map(([A,_])=>{if(_.games.length===0)return null;const B=E>0?_.totalUnits/E*100:0;return n.jsxs("div",{style:{flex:B,minWidth:"0",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:l?"0.625rem":"0.688rem",fontWeight:"800",color:_.color,marginBottom:"0.375rem",letterSpacing:"0.02em",textTransform:"uppercase"},children:_.games.length}),n.jsx("div",{style:{height:l?"5px":"6px",background:`linear-gradient(90deg, ${_.color} 0%, ${_.color}DD 100%)`,borderRadius:"4px",boxShadow:`0 3px 10px ${_.color}45`,position:"relative",overflow:"hidden"},children:n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"50%",background:"linear-gradient(180deg, rgba(255,255,255,0.3) 0%, transparent 100%)",borderRadius:"4px 4px 0 0"}})}),n.jsxs("div",{style:{fontSize:l?"0.563rem":"0.625rem",fontWeight:"800",color:"rgba(255,255,255,0.55)",marginTop:"0.375rem",fontFeatureSettings:"'tnum'"},children:[_.totalUnits.toFixed(1),"u"]})]},A)})}),n.jsx("div",{style:{textAlign:"center"},children:n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.625rem",padding:l?"0.5rem 1rem":"0.625rem 1.25rem",background:`linear-gradient(135deg, ${i}18 0%, ${i}10 100%)`,border:`1.5px solid ${i}30`,borderRadius:"10px",fontSize:l?"0.688rem":"0.75rem",color:i,fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.08em",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:`0 4px 12px ${i}20, inset 0 1px 0 rgba(255,255,255,0.1)`,position:"relative",overflow:"hidden"},onMouseEnter:A=>{A.currentTarget.style.background=`linear-gradient(135deg, ${i}28 0%, ${i}18 100%)`,A.currentTarget.style.borderColor=`${i}50`,A.currentTarget.style.transform="translateY(-2px)",A.currentTarget.style.boxShadow=`0 6px 20px ${i}35, inset 0 1px 0 rgba(255,255,255,0.15)`},onMouseLeave:A=>{A.currentTarget.style.background=`linear-gradient(135deg, ${i}18 0%, ${i}10 100%)`,A.currentTarget.style.borderColor=`${i}30`,A.currentTarget.style.transform="translateY(0)",A.currentTarget.style.boxShadow=`0 4px 12px ${i}20, inset 0 1px 0 rgba(255,255,255,0.1)`},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at center, ${i}15 0%, transparent 70%)`,pointerEvents:"none"}}),n.jsx("span",{style:{position:"relative",zIndex:1},children:"View Full Breakdown"}),n.jsx("span",{style:{fontSize:l?"0.813rem":"0.875rem",position:"relative",zIndex:1},children:""})]})})]})})]})},ej=({emoji:r,title:e,subtitle:t,color:i,unitRange:o,isMobile:l})=>n.jsxs("div",{style:{background:`linear-gradient(135deg, ${i}18 0%, ${i}10 100%)`,border:`2px solid ${i}40`,borderRadius:l?"14px":"16px",padding:l?"1rem 1.125rem":"1.125rem 1.375rem",marginBottom:l?"0.75rem":"1rem",backdropFilter:"blur(12px)",boxShadow:`0 6px 20px ${i}20, inset 0 1px 0 rgba(255,255,255,0.08)`,position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at top left, ${i}15 0%, transparent 60%)`,pointerEvents:"none"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l?"0.875rem":"1rem",position:"relative",zIndex:1},children:[n.jsx("div",{style:{width:l?"42px":"48px",height:l?"42px":"48px",borderRadius:"12px",background:`linear-gradient(135deg, ${i}30 0%, ${i}20 100%)`,border:`2px solid ${i}50`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:l?"1.375rem":"1.5rem",flexShrink:0,boxShadow:`0 4px 12px ${i}25, inset 0 1px 0 rgba(255,255,255,0.15)`},children:r}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontSize:l?"0.938rem":"1.063rem",fontWeight:"900",color:i,letterSpacing:"-0.02em",marginBottom:"0.25rem",textShadow:`0 2px 16px ${i}35`,lineHeight:1.15},children:e}),n.jsx("div",{style:{fontSize:l?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.70)",lineHeight:1.35,fontWeight:"600"},children:t})]}),!l&&o&&n.jsx("div",{style:{padding:"0.5rem 0.875rem",background:`linear-gradient(135deg, ${i}25 0%, ${i}15 100%)`,border:`1.5px solid ${i}40`,borderRadius:"10px",fontSize:"0.813rem",fontWeight:"900",color:i,fontFeatureSettings:"'tnum'",letterSpacing:"0.02em",boxShadow:`0 2px 8px ${i}20`},children:o})]})]}),_g=({game:r,rank:e,isMobile:t,hasLiveScore:i,isSavantPick:o=!1,betsMap:l,pbpData:c={}})=>{const[u,h]=O.useState(!1),m=r.prediction,f=r.odds,x=r.liveScore;r.grade;const b=H=>H?.toLowerCase().replace(/[^a-z0-9]/g,"")||"",S=`${b(r.awayTeam)}_${b(r.homeTeam)}`,w=l?.get(S),T=w?.spreadAnalysis,E=w?.spreadBet,A=w?.betRecommendation,_=A?.type==="ATS"||w?.isATSPick===!0&&w?.bet?.market==="SPREAD",B=A?.type==="TOTAL"||w?.isTotalsPick===!0||w?.bet?.market==="TOTAL",I=w?.isATSPick&&!w?.isPrimePick,L=w?.totalsAnalysis,M=w?._totalsBet,R=M?.betRecommendation,j=M?.totalsAnalysis,F=!!M&&M.betStatus!=="KILLED"&&M.betStatus!=="FLAGGED";if(w?.betStatus==="KILLED"||w?.betStatus==="FLAGGED")return null;if(B?A.totalUnits||m?.unitSize:_?A.atsUnits:m?.unitSize,!m||m.error)return n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.95) 100%)",borderRadius:t?dt.borderRadius:"20px",border:Mt.elevated.border,boxShadow:Mt.elevated.shadow,padding:t?"1rem":"1.25rem",opacity:.6},children:[n.jsxs("div",{style:{color:"white",fontSize:"1.125rem",fontWeight:"700",marginBottom:"0.5rem"},children:[r.awayTeam," @ ",r.homeTeam]}),n.jsx("div",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:f?.gameTime||"TBD"}),x&&n.jsxs("div",{style:{marginTop:"0.75rem",color:"#10B981",fontWeight:"700"},children:[x.awayScore," - ",x.homeScore," (",x.status,")"]}),!m&&n.jsx("div",{style:{color:"#EF4444",fontSize:"0.75rem",marginTop:"0.5rem"},children:"No prediction available"})]});const z=B?A?.totalUnits||m.unitSize:_&&A?.atsUnits||m.unitSize,P=Z6(z,m.stars),V=P,N=H=>!H||H==="TBD"?"TBD":H.replace(/\s+ET$/i,"").trim(),Q=P.intensity>=5?{border:`2px solid ${P.borderColor}`,boxShadow:`0 8px 32px ${P.borderColor}40, 0 0 60px ${P.borderColor}15`}:o?{border:"1.5px solid rgba(251, 191, 36, 0.35)",boxShadow:"0 6px 24px rgba(251, 191, 36, 0.12), 0 0 40px rgba(251, 191, 36, 0.06)"}:{border:Mt.elevated.border,boxShadow:Mt.elevated.shadow};return n.jsxs("div",{style:{background:o?"linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 35, 50, 0.95) 100%)":"linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.95) 100%)",borderRadius:t?dt.borderRadius:"20px",border:Q.border,boxShadow:Q.boxShadow,overflow:"hidden",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[P.intensity>=5&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"200%",height:"100%",background:`linear-gradient(90deg, transparent, ${V.borderColor}15, transparent)`,animation:"shimmer 3s infinite",pointerEvents:"none",zIndex:1}}),n.jsx("style",{children:`
            @keyframes shimmer {
              0% { transform: translateX(0); }
              100% { transform: translateX(50%); }
            }
          `})]}),n.jsxs("div",{style:{padding:t?"1rem":"1.125rem",borderBottom:Mt.flat.border,background:o?"linear-gradient(135deg, rgba(251, 191, 36, 0.06) 0%, rgba(0,0,0,0.15) 100%)":"linear-gradient(135deg, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.15) 100%)",position:"relative",zIndex:2},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:t?"0.625rem":"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{display:"flex",gap:"3px"},children:[...Array(5)].map((H,U)=>n.jsx("span",{style:{fontSize:t?"1.063rem":"1.188rem",color:U<P.fullStars?"#FBBF24":P.hasHalf&&U===P.fullStars?"rgba(251, 191, 36, 0.5)":"rgba(255,255,255,0.2)",lineHeight:1,filter:U<P.fullStars?"drop-shadow(0 0 6px rgba(251, 191, 36, 0.6))":"none",transition:"all 0.3s ease"},children:""},U))}),n.jsx("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"800",color:P.color,letterSpacing:"0.04em",textTransform:"uppercase"},children:P.label})]}),o&&n.jsx(aW,{isMobile:t,showTooltip:!0})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t?"0.5rem":"0.75rem",marginBottom:t?"0.625rem":"0.75rem"},children:[n.jsx("div",{style:{width:t?"28px":"32px",height:t?"28px":"32px",borderRadius:"50%",background:`linear-gradient(135deg, ${V.borderColor}30 0%, ${V.borderColor}15 100%)`,border:`1.5px solid ${V.borderColor}50`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:t?"0.75rem":"0.875rem",fontWeight:"800",color:V.color,flexShrink:0},children:e}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsxs("div",{style:{fontSize:t?"1rem":"1.125rem",fontWeight:"800",color:"white",marginBottom:"0.125rem",letterSpacing:"-0.02em",lineHeight:1.2,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[r.awayTeam," @ ",r.homeTeam]}),n.jsxs("div",{style:{fontSize:"0.688rem",fontWeight:"600",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{style:{color:V.color,fontSize:"0.5rem"},children:""})," ",N(f?.gameTime)]})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t?"0.375rem":"0.5rem",padding:t?"0.5rem 0.75rem":"0.563rem 0.875rem",borderRadius:"10px",background:B?"linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(168, 85, 247, 0.04) 100%)":_?"linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(6, 182, 212, 0.04) 100%)":I?"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.04) 100%)":`linear-gradient(135deg, ${P.borderColor}12 0%, ${P.borderColor}06 100%)`,border:B?"1px solid rgba(168, 85, 247, 0.25)":_?"1px solid rgba(6, 182, 212, 0.25)":I?"1px solid rgba(16, 185, 129, 0.25)":`1px solid ${P.borderColor}30`,flexWrap:"wrap"},children:[n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem",fontWeight:"800",color:B?"#A855F7":_?"#22D3EE":I?"#10B981":"rgba(255,255,255,0.6)",textTransform:"uppercase",letterSpacing:"0.04em",display:"flex",alignItems:"center",gap:"0.25rem"},children:B?` ${A.totalDirection}`:_&&!I?" ATS UPGRADE":I?" ATS":" ML"}),n.jsx("span",{style:{color:"rgba(255,255,255,0.15)",fontSize:"0.625rem"},children:"|"}),n.jsx("span",{style:{fontSize:t?"0.813rem":"0.875rem",fontWeight:"900",color:"white",fontFeatureSettings:"'tnum'"},children:B?`${A.totalLine} @ -110`:_||I?`${A?.atsSpread>0?"+":""}${A?.atsSpread} @ -110`:`@ ${m.bestOdds>0?"+":""}${m.bestOdds}`}),n.jsx("span",{style:{color:"rgba(255,255,255,0.15)",fontSize:"0.625rem"},children:"|"}),n.jsx("span",{style:{fontSize:t?"0.813rem":"0.875rem",fontWeight:"900",color:P.color,fontFeatureSettings:"'tnum'"},children:B?`${A.totalUnits}u`:_?`${A.atsUnits}u`:m.unitSize>0?`${m.unitSize}u`:"0.5u"}),B&&A&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{color:"rgba(255,255,255,0.15)",fontSize:"0.625rem"},children:"|"}),n.jsxs("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"800",color:"#A855F7",fontFeatureSettings:"'tnum'"},children:["+",A.marginOverTotal," MOT"]})]}),m.bestEV>0&&!_&&!I&&!B&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{color:"rgba(255,255,255,0.15)",fontSize:"0.625rem"},children:"|"}),n.jsxs("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"800",color:"#10B981",fontFeatureSettings:"'tnum'"},children:["+",m.bestEV.toFixed(1),"% edge"]})]}),_&&A&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{color:"rgba(255,255,255,0.15)",fontSize:"0.625rem"},children:"|"}),n.jsxs("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"800",color:"#10B981",fontFeatureSettings:"'tnum'"},children:["+",A.marginOverSpread," MOS"]})]}),I&&A&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{color:"rgba(255,255,255,0.15)",fontSize:"0.625rem"},children:"|"}),n.jsxs("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"800",color:"#10B981",fontFeatureSettings:"'tnum'"},children:["+",A?.estimatedSpreadEV,"% EV"]})]}),A?.movementTier&&A.movementTier!=="UNKNOWN"&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{color:"rgba(255,255,255,0.15)",fontSize:"0.625rem"},children:"|"}),n.jsxs("span",{style:{fontSize:t?"0.563rem":"0.625rem",fontWeight:"800",padding:"0.125rem 0.375rem",borderRadius:"0.25rem",letterSpacing:"0.06em",background:A.movementTier==="CONFIRM"?"rgba(34, 197, 94, 0.15)":A.movementTier==="FLAGGED"?"rgba(239, 68, 68, 0.15)":"rgba(255, 255, 255, 0.06)",color:A.movementTier==="CONFIRM"?"#22C55E":A.movementTier==="FLAGGED"?"#EF4444":"rgba(255,255,255,0.45)",border:A.movementTier==="CONFIRM"?"1px solid rgba(34, 197, 94, 0.3)":A.movementTier==="FLAGGED"?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(255,255,255,0.1)"},children:[A.movementLabel||(A.movementTier==="CONFIRM"?"STEAM":"NEUTRAL"),A.lineMovement!=null&&n.jsxs("span",{style:{opacity:.7,marginLeft:"0.2rem"},children:[A.lineMovement>0?"+":"",A.lineMovement]})]})]}),m.isLockedPick&&n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem",fontWeight:"800",color:m.isFirebaseLocked?"#D4AF37":"#666",display:"flex",alignItems:"center",gap:"0.188rem",marginLeft:"auto"},title:m.isFirebaseLocked?"Locked  protected from line movement":"Active  monitoring line movement",children:m.isFirebaseLocked?"":""})]}),r.betOutcome&&n.jsxs("div",{style:{marginTop:"0.75rem",background:r.betOutcome.outcome==="WIN"?"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(5, 150, 105, 0.06) 100%)":r.betOutcome.outcome==="PUSH"?"linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, rgba(245, 158, 11, 0.06) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.12) 0%, rgba(220, 38, 38, 0.06) 100%)",border:`1.5px solid ${r.betOutcome.outcome==="WIN"?"rgba(16, 185, 129, 0.35)":r.betOutcome.outcome==="PUSH"?"rgba(251, 191, 36, 0.35)":"rgba(239, 68, 68, 0.35)"}`,borderRadius:"8px",padding:t?"0.5rem 0.75rem":"0.625rem 0.875rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{style:{fontSize:t?"0.938rem":"1rem",lineHeight:1},children:r.betOutcome.outcome==="WIN"?"":r.betOutcome.outcome==="PUSH"?"":""}),n.jsx("span",{style:{fontSize:t?"0.75rem":"0.813rem",fontWeight:"800",color:r.betOutcome.outcome==="WIN"?"#10B981":r.betOutcome.outcome==="PUSH"?"#FBBF24":"#EF4444",textTransform:"uppercase",letterSpacing:"0.03em"},children:r.betOutcome.outcome}),n.jsx("span",{style:{color:"rgba(255,255,255,0.2)",fontSize:"0.5rem"},children:""}),n.jsxs("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"700",color:"rgba(255,255,255,0.5)"},children:[z,"u wagered"]})]}),n.jsxs("div",{style:{fontSize:t?"1.063rem":"1.188rem",fontWeight:"900",color:r.betOutcome.outcome==="WIN"?"#10B981":r.betOutcome.outcome==="PUSH"?"#FBBF24":"#EF4444",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em"},children:[r.betOutcome.profit>0?"+":"",r.betOutcome.profit.toFixed(2),"u"]})]})]}),x&&n.jsx("div",{style:{padding:t?"0 0.875rem":"0 1rem"},children:n.jsx(UV,{liveScore:x,prediction:m,awayTeam:r.awayTeam,homeTeam:r.homeTeam})}),n.jsxs("div",{style:{background:ln.hero,padding:t?"0.625rem 0.75rem":"0.75rem 1rem",position:"relative",overflow:"hidden"},children:[(()=>{const H=_||I,U=T?.isFavorite??A?.atsSpread<0,K=T?.marginOverSpread??A?.marginOverSpread,X=T?.bothModelsCover??A?.bothModelsCover,re=w?.bet?.team||m.bestTeam||(m.bestBet==="away"?r.awayTeam:r.homeTeam);A?.atsSpread??T?.spread;let me,ke;if(B){const te=A?.totalDirection||L?.direction||"OVER",le=L?.marginOverTotal??A?.marginOverTotal,ve=A?.totalLine??L?.marketTotal,xe=L?.movementTier??A?.movementTier,ue=L?.movementLabel??A?.movementLabel,Te=(L?.unitTier??A?.totalTier)==="MARKET_CONFIRMED",$e=le!=null?` by +${le} pts`:"",rt=xe==="CONFIRM"?`  ${ue||"STEAM"}`:"";le>=4?(me=`${te} ${ve}  Maximum Confidence${rt}`,ke=`Both models project ${te.toLowerCase()}${$e}`):le>=3?(me=`${te} ${ve}  Strong Edge${rt}`,ke=`Both models project ${te.toLowerCase()}${$e}`):le>=2?(me=`${te} ${ve}  Totals Value${rt}`,ke=`Both models project ${te.toLowerCase()}${$e}`):Te?(me=`${te} ${ve}  Market Validated${rt}`,ke=`Both models project ${te.toLowerCase()}${$e}  Line moving our way`):(me=`${te} ${ve}${rt}`,ke=`Models project ${te.toLowerCase()}`)}else if(H){const te=U?"Favorite":"Underdog",le=X?"Both models project cover":"Model projects cover",ve=K!=null?` by +${K} pts`:"",xe=T?.movementTier??A?.movementTier,ue=T?.movementLabel??A?.movementLabel,Te=(T?.unitTier??A?.atsTier)==="MARKET_CONFIRMED",$e=xe==="CONFIRM"?`  ${ue||"STEAM"}`:"";K>=4?(me=`${re}  Maximum Confidence${$e}`,ke=`${te}  ${le}${ve}`):K>=3?(me=`${re}  Strong Edge${$e}`,ke=`${te}  ${le}${ve}`):K>=2?(me=`${re}  Spread Value${$e}`,ke=`${te}  ${le}${ve}`):Te?(me=`${re}  Market Validated${$e}`,ke=`${te}  ${le}${ve}  Line moving our way`):(me=`${re}  ATS Play${$e}`,ke=`${te}  ${le}`)}else try{const te=rW(r,m,f);me=te.title,ke=te.subtitle}catch{me=`${m.bestTeam||"Pick"}  Model Edge`,ke=`${m.bestBet==="home"?"Home":"Away"} play`}return n.jsxs("div",{style:{background:B?"linear-gradient(90deg, rgba(168, 85, 247, 0.15) 0%, rgba(168, 85, 247, 0.05) 100%)":"linear-gradient(90deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",border:B?"1px solid rgba(168, 85, 247, 0.25)":"1px solid rgba(16, 185, 129, 0.25)",borderRadius:"8px",padding:t?"0.5rem 0.625rem":"0.625rem 0.75rem",marginBottom:t?"0.5rem":"0.75rem",display:"flex",alignItems:"center",gap:t?"0.5rem":"0.625rem"},children:[n.jsx("div",{style:{fontSize:t?"1.125rem":"1.25rem",lineHeight:1,flexShrink:0},children:B?A?.totalDirection==="OVER"?"":"":H?U?"":"":""}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontSize:t?"0.813rem":"0.938rem",fontWeight:"800",color:B?"#A855F7":"#10B981",marginBottom:"0.125rem",letterSpacing:"-0.01em"},children:me}),n.jsx("div",{style:{fontSize:t?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.6)",lineHeight:1.35},children:ke})]})]})})(),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:t?"0.5rem":"0.625rem",marginBottom:t?"0.5rem":"0.75rem",position:"relative",zIndex:2},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",borderRadius:"8px",padding:t?"0.5rem":"0.625rem",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[n.jsxs("div",{style:{fontSize:t?"0.625rem":"0.688rem",color:"rgba(16, 185, 129, 0.8)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"700",marginBottom:"0.375rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx("span",{children:""})," OUR MODEL"]}),(()=>{const H=_||I,U=A?.estimatedCoverProb,K=((m.bestBet==="away"?m.ensembleAwayProb:m.ensembleHomeProb)||0)*100,X=(B||H)&&U?U:isNaN(K)?0:K,re=B?`${A?.totalDirection||"O/U"} probability`:H?"Cover probability":"Win probability";return n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{fontSize:t?"1.25rem":"1.375rem",fontWeight:"900",color:"#10B981",lineHeight:1.1,letterSpacing:"-0.02em",marginBottom:"0.25rem"},children:[X.toFixed(1),"%"]}),n.jsx("div",{style:{fontSize:t?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.6)",lineHeight:1.2},children:re})]})})()]}),n.jsxs("div",{style:{background:B?A?.totalDirection==="OVER"?"rgba(239, 68, 68, 0.06)":"rgba(59, 130, 246, 0.06)":_?"rgba(6, 182, 212, 0.06)":"rgba(255,255,255,0.03)",borderRadius:"8px",padding:t?"0.5rem":"0.625rem",border:B?A?.totalDirection==="OVER"?"1px solid rgba(239, 68, 68, 0.2)":"1px solid rgba(59, 130, 246, 0.2)":_?"1px solid rgba(6, 182, 212, 0.2)":"1px solid rgba(255,255,255,0.08)"},children:[n.jsx("div",{style:{fontSize:t?"0.625rem":"0.688rem",color:B?A?.totalDirection==="OVER"?"rgba(239, 68, 68, 0.7)":"rgba(59, 130, 246, 0.7)":_?"rgba(34, 211, 238, 0.7)":"rgba(255,255,255,0.5)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"700",marginBottom:"0.375rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:B?n.jsxs(n.Fragment,{children:[n.jsx("span",{children:A?.totalDirection==="OVER"?"":""})," TOTAL LINE"]}):_||I?n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""})," SPREAD LINE"]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""})," MARKET"]})}),B?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem",marginBottom:"0.25rem"},children:[n.jsxs("div",{style:{fontSize:t?"1.125rem":"1.25rem",fontWeight:"900",color:A?.totalDirection==="OVER"?"#f87171":"#60a5fa",lineHeight:1.1,letterSpacing:"-0.01em"},children:[A?.totalDirection," ",A?.totalLine]}),n.jsx("div",{style:{fontSize:t?"0.813rem":"0.875rem",fontWeight:"800",color:"rgba(255,255,255,0.7)",fontFeatureSettings:"'tnum'"},children:"@ -110"})]}),(()=>{const H=L?.marginOverTotal??A?.marginOverTotal;if(H!=null){const U=A?.totalDirection==="OVER";return n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.375rem",background:U?"rgba(239, 68, 68, 0.12)":"rgba(59, 130, 246, 0.12)",border:U?"1px solid rgba(239, 68, 68, 0.25)":"1px solid rgba(59, 130, 246, 0.25)",borderRadius:"4px",marginTop:"0.25rem"},children:[n.jsx("span",{style:{fontSize:t?"0.563rem":"0.625rem",color:"rgba(255,255,255,0.5)",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.04em"},children:"MOT"}),n.jsxs("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"900",color:U?"#f87171":"#60a5fa",fontFeatureSettings:"'tnum'"},children:["+",H," pts"]})]})}return null})()]}):_||I?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem",marginBottom:"0.25rem"},children:[n.jsxs("div",{style:{fontSize:t?"1.125rem":"1.25rem",fontWeight:"900",color:"#22D3EE",lineHeight:1.1,letterSpacing:"-0.01em"},children:[A?.atsSpread>0?"+":"",A?.atsSpread]}),n.jsx("div",{style:{fontSize:t?"0.813rem":"0.875rem",fontWeight:"800",color:"rgba(255,255,255,0.7)",fontFeatureSettings:"'tnum'"},children:"@ -110"})]}),(()=>{const H=T?.marginOverSpread??A?.marginOverSpread;return H!=null?n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.375rem",background:"rgba(16, 185, 129, 0.12)",border:"1px solid rgba(16, 185, 129, 0.25)",borderRadius:"4px",marginTop:"0.25rem"},children:[n.jsx("span",{style:{fontSize:t?"0.563rem":"0.625rem",color:"rgba(255,255,255,0.5)",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.04em"},children:"COVER"}),n.jsxs("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"900",color:"#10B981",fontFeatureSettings:"'tnum'"},children:["+",H," pts"]})]}):null})(),(()=>{const H=T||w?.spreadAnalysis;if(!H||H.openerSpread==null)return null;const U=H.lineMovement,K=H.movementTier;if(!K||K==="UNKNOWN")return null;const X=K==="CONFIRM",re=K==="FLAGGED",me=H.movementLabel||(X?"STEAM":"FLAT"),ke=re?"#EF4444":me==="STEAM"?"#22C55E":me==="STRONG"?"#10B981":me==="SIGNIFICANT"?"#22C55E":"rgba(255,255,255,0.5)";return n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.375rem",background:re?"rgba(239, 68, 68, 0.12)":X?"rgba(34, 197, 94, 0.12)":"rgba(255,255,255,0.04)",border:re?"1px solid rgba(239, 68, 68, 0.25)":X?"1px solid rgba(34, 197, 94, 0.25)":"1px solid rgba(255,255,255,0.08)",borderRadius:"4px",marginTop:"0.125rem"},children:[n.jsxs("span",{style:{fontSize:t?"0.5rem":"0.563rem",color:"rgba(255,255,255,0.4)",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.04em"},children:["OPEN ",H.openerSpread>0?"+":"",H.openerSpread]}),n.jsxs("span",{style:{fontSize:t?"0.563rem":"0.625rem",fontWeight:"800",color:ke,fontFeatureSettings:"'tnum'"},children:[U>0?"+":"",U," ",me]})]})})()]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem",marginBottom:"0.25rem"},children:[n.jsx("div",{style:{fontSize:t?"1.125rem":"1.25rem",fontWeight:"900",color:"rgba(255,255,255,0.9)",lineHeight:1.1,letterSpacing:"-0.01em"},children:m.bestOdds>0?`+${m.bestOdds}`:m.bestOdds}),T?.spread!==void 0&&n.jsxs("div",{style:{fontSize:t?"0.75rem":"0.813rem",fontWeight:"800",color:"rgba(255,255,255,0.6)",fontFeatureSettings:"'tnum'",letterSpacing:"-0.01em"},children:["(",T.spread>0?"+":"",T.spread,")"]})]}),n.jsx("div",{style:{fontSize:t?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.45)",lineHeight:1.2},children:(()=>{const H=m.bestBet==="away"?m.marketAwayProb:m.marketHomeProb;return H?`${(H*100).toFixed(1)}% implied`:""})()})]}),!_&&!I&&E?.recommended&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.375rem 0.5rem",background:E.tier==="ELITE"?"linear-gradient(135deg, rgba(234, 179, 8, 0.15) 0%, rgba(245, 158, 11, 0.08) 100%)":E.tier==="PRIME"?"linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(139, 92, 246, 0.08) 100%)":E.tier==="STRONG"?"linear-gradient(135deg, rgba(34, 211, 238, 0.12) 0%, rgba(6, 182, 212, 0.06) 100%)":"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(5, 150, 105, 0.06) 100%)",border:`1px solid ${E.tier==="ELITE"?"rgba(234, 179, 8, 0.35)":E.tier==="PRIME"?"rgba(168, 85, 247, 0.35)":E.tier==="STRONG"?"rgba(34, 211, 238, 0.3)":"rgba(16, 185, 129, 0.3)"}`,borderRadius:"6px",marginTop:"0.375rem"},children:[n.jsxs("span",{style:{fontSize:t?"0.563rem":"0.625rem",color:E.tier==="ELITE"?"#EAB308":E.tier==="PRIME"?"#A855F7":E.tier==="STRONG"?"#22D3EE":"#10B981",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.05em",whiteSpace:"nowrap"},children:[E.tier==="ELITE"?"":E.tier==="STRONG"?"":E.tier==="PRIME"?"":""," SPREAD"]}),n.jsxs("span",{style:{fontSize:t?"0.75rem":"0.813rem",fontWeight:"900",color:"rgba(255,255,255,0.9)",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em"},children:[E.spread>0?"+":"",E.spread]}),n.jsxs("span",{style:{fontSize:t?"0.563rem":"0.625rem",fontWeight:"800",color:E.tier==="ELITE"?"#EAB308":E.tier==="PRIME"?"#A855F7":E.tier==="STRONG"?"#22D3EE":"#10B981",marginLeft:"auto",fontFeatureSettings:"'tnum'"},children:[E.units,"u"]})]})]})]}),m.ensembleAwayScore&&m.ensembleHomeScore&&n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(99, 102, 241, 0.04) 100%)",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.18)",padding:t?"0.625rem 0.75rem":"0.75rem 1rem",position:"relative",zIndex:2},children:[n.jsxs("div",{style:{fontSize:t?"0.563rem":"0.625rem",color:"rgba(167, 139, 250, 0.7)",textTransform:"uppercase",letterSpacing:"0.08em",fontWeight:"700",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx("span",{style:{fontSize:t?"0.688rem":"0.75rem",lineHeight:1},children:""})," PREDICTED SCORE"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:t?"0.5rem":"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t?"0.375rem":"0.5rem",flex:1,justifyContent:"flex-end"},children:[n.jsx("span",{style:{fontSize:t?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.6)",fontWeight:"600",textAlign:"right",lineHeight:1.2,maxWidth:t?"80px":"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.awayTeam}),n.jsx("span",{style:{fontSize:t?"1.25rem":"1.5rem",fontWeight:"900",color:"white",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em",minWidth:"1.75rem",textAlign:"center"},children:Math.round(m.ensembleAwayScore)})]}),n.jsx("span",{style:{color:"rgba(139, 92, 246, 0.4)",fontSize:t?"0.875rem":"1rem",fontWeight:"300",lineHeight:1},children:""}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t?"0.375rem":"0.5rem",flex:1,justifyContent:"flex-start"},children:[n.jsx("span",{style:{fontSize:t?"1.25rem":"1.5rem",fontWeight:"900",color:"white",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em",minWidth:"1.75rem",textAlign:"center"},children:Math.round(m.ensembleHomeScore)}),n.jsx("span",{style:{fontSize:t?"0.688rem":"0.75rem",color:"rgba(255,255,255,0.6)",fontWeight:"600",lineHeight:1.2,maxWidth:t?"80px":"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.homeTeam})]})]}),n.jsx("div",{style:{textAlign:"center",marginTop:"0.375rem",fontSize:t?"0.563rem":"0.625rem",color:"rgba(167, 139, 250, 0.5)",fontWeight:"600",letterSpacing:"0.03em"},children:(()=>{const H=Math.round(Number(m.ensembleAwayScore)+Number(m.ensembleHomeScore));return isNaN(H)?null:`TOTAL: ${H}`})()})]}),(()=>{if(B){const me=L?.marginOverTotal??A?.marginOverTotal,ke=A?.totalDirection||L?.direction,te=L?.bothModelsAgree??A?.bothModelsAgree,le=ke==="OVER",ve=L?.movementTier??A?.movementTier,xe=L?.lineMovement??A?.lineMovement;return me===void 0&&!ke?null:n.jsx("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"6px",padding:t?"0.5rem":"0.625rem",border:"1px solid rgba(255,255,255,0.06)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:t?"0.75rem":"1.25rem",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.04em"},children:"Direction"}),n.jsx("span",{style:{fontSize:t?"0.75rem":"0.813rem",fontWeight:"700",color:te?"#10b981":"#fbbf24"},children:"Both Models"})]}),n.jsx("div",{style:{width:"1px",height:"12px",background:"rgba(255,255,255,0.1)"}}),n.jsx("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"700",color:le?"#f87171":"#60a5fa",letterSpacing:"0.02em"},children:ke}),me!==void 0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{width:"1px",height:"12px",background:"rgba(255,255,255,0.1)"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.04em"},children:"MOT"}),n.jsxs("span",{style:{fontSize:t?"0.813rem":"0.875rem",fontWeight:"800",color:me>=4?"#10b981":me>=2.5?"#fbbf24":"rgba(255,255,255,0.8)",letterSpacing:"-0.01em"},children:["+",me]})]})]}),ve&&ve!=="UNKNOWN"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{width:"1px",height:"12px",background:"rgba(255,255,255,0.1)"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx("span",{style:{fontSize:t?"0.688rem":"0.75rem"},children:ve==="CONFIRM"?"":""}),n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem",fontWeight:"700",color:ve==="CONFIRM"?"#10b981":"rgba(255,255,255,0.5)",letterSpacing:"0.02em"},children:j?.movementLabel||R?.movementLabel||(ve==="CONFIRM"?"STEAM":"HOLD")}),xe!=null&&n.jsxs("span",{style:{fontSize:t?"0.563rem":"0.625rem",color:"rgba(255,255,255,0.35)",fontWeight:"600",fontFeatureSettings:"'tnum'"},children:["(",xe>0?"+":"",xe,")"]})]})]})]})})}const H=T?.bothModelsCover??A?.bothModelsCover,U=T?.marginOverSpread??A?.marginOverSpread,K=T?.isFavorite,X=T?.movementTier??A?.movementTier,re=T?.lineMovement??A?.lineMovement;return U===void 0&&H===void 0?null:n.jsx("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"6px",padding:t?"0.5rem":"0.625rem",border:"1px solid rgba(255,255,255,0.06)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:t?"0.75rem":"1.25rem",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.04em"},children:"Cover"}),n.jsx("span",{style:{fontSize:t?"0.75rem":"0.813rem",fontWeight:"700",color:H?"#10b981":"#fbbf24"},children:H?"Both Models":"Single Model"})]}),n.jsx("div",{style:{width:"1px",height:"12px",background:"rgba(255,255,255,0.1)"}}),K!==void 0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"700",color:K?"#60a5fa":"#fbbf24",letterSpacing:"0.02em"},children:K?"FAVORITE":"UNDERDOG"}),n.jsx("div",{style:{width:"1px",height:"12px",background:"rgba(255,255,255,0.1)"}})]}),U!==void 0&&n.jsx(n.Fragment,{children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.04em"},children:"MOS"}),n.jsxs("span",{style:{fontSize:t?"0.813rem":"0.875rem",fontWeight:"800",color:U>=4?"#10b981":U>=2.5?"#fbbf24":"rgba(255,255,255,0.8)",letterSpacing:"-0.01em"},children:["+",U]})]})}),X&&X!=="UNKNOWN"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{width:"1px",height:"12px",background:"rgba(255,255,255,0.1)"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx("span",{style:{fontSize:t?"0.688rem":"0.75rem"},children:X==="CONFIRM"?"":""}),n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem",fontWeight:"700",color:X==="CONFIRM"?"#10b981":"rgba(255,255,255,0.5)",letterSpacing:"0.02em"},children:T?.movementLabel||A?.movementLabel||(X==="CONFIRM"?"STEAM":"HOLD")}),re!=null&&n.jsxs("span",{style:{fontSize:t?"0.563rem":"0.625rem",color:"rgba(255,255,255,0.35)",fontWeight:"600",fontFeatureSettings:"'tnum'"},children:["(",re>0?"+":"",re,")"]})]})]})]})})})(),F&&R&&(()=>{const H=R.totalDirection,U=R.marginOverTotal??j?.marginOverTotal,K=R.totalLine??j?.marketTotal,X=R.totalUnits||1;j?.unitTier;const re=H==="OVER";j?.drTotal,j?.hsTotal;const me=j?.blendedTotal,ke=j?.movementTier??R?.movementTier;return n.jsx("div",{style:{background:re?"linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(249, 115, 22, 0.05) 100%)":"linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(99, 102, 241, 0.05) 100%)",border:re?"1px solid rgba(239, 68, 68, 0.2)":"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:t?"0.5rem 0.625rem":"0.625rem 0.75rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{fontSize:t?"0.875rem":"1rem"},children:re?"":""}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"800",color:re?"#f87171":"#60a5fa",textTransform:"uppercase",letterSpacing:"0.04em"},children:[H," ",K]}),n.jsxs("div",{style:{fontSize:t?"0.563rem":"0.625rem",color:"rgba(255,255,255,0.45)",fontWeight:"600",marginTop:"0.125rem"},children:[X,"u @ -110  Both models agree",ke==="CONFIRM"?`   ${j?.movementLabel||"STEAM"}`:""]})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.375rem",background:re?"rgba(239, 68, 68, 0.12)":"rgba(59, 130, 246, 0.12)",border:re?"1px solid rgba(239, 68, 68, 0.25)":"1px solid rgba(59, 130, 246, 0.25)",borderRadius:"4px"},children:[n.jsx("span",{style:{fontSize:t?"0.563rem":"0.625rem",color:"rgba(255,255,255,0.5)",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.04em"},children:"MOT"}),n.jsxs("span",{style:{fontSize:t?"0.688rem":"0.75rem",fontWeight:"900",color:re?"#f87171":"#60a5fa",fontFeatureSettings:"'tnum'"},children:["+",U]})]}),me&&n.jsxs("div",{style:{fontSize:t?"0.563rem":"0.625rem",color:"rgba(255,255,255,0.4)",fontWeight:"600",textAlign:"right",lineHeight:1.3},children:[n.jsxs("div",{children:["Blend: ",me]}),n.jsxs("div",{children:["Line: ",K]})]})]})]})})})()]}),n.jsxs("div",{style:{padding:t?"0.375rem 0.75rem":"0.5rem 1rem",borderTop:Mt.flat.border},children:[n.jsxs("button",{onClick:()=>h(!u),style:{width:"100%",background:r.barttorvik&&!u?"linear-gradient(90deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 50%, rgba(99, 102, 241, 0.08) 100%)":"transparent",border:"none",padding:t?"0.5rem 0":"0.625rem 0",color:"rgba(255,255,255,0.5)",fontSize:t?"0.688rem":"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:t?"0.5rem":"0.625rem",transition:"all 0.3s ease",borderRadius:"8px",position:"relative"},onMouseEnter:H=>{H.currentTarget.style.color="rgba(255,255,255,0.9)",r.barttorvik&&!u&&(H.currentTarget.style.background="linear-gradient(90deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 50%, rgba(99, 102, 241, 0.15) 100%)")},onMouseLeave:H=>{H.currentTarget.style.color="rgba(255,255,255,0.5)",r.barttorvik&&!u&&(H.currentTarget.style.background="linear-gradient(90deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 50%, rgba(99, 102, 241, 0.08) 100%)")},children:[n.jsx("span",{style:{fontSize:"0.625rem"},children:u?"":""}),n.jsx("span",{children:"Model Breakdown"}),r.barttorvik&&!u&&n.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:t?"0.188rem 0.5rem":"0.25rem 0.625rem",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.25) 0%, rgba(139, 92, 246, 0.25) 100%)",border:"1px solid rgba(99, 102, 241, 0.4)",borderRadius:"6px",fontSize:t?"0.563rem":"0.625rem",fontWeight:"800",color:"#A5B4FC",textTransform:"uppercase",letterSpacing:"0.05em",boxShadow:"0 2px 8px rgba(99, 102, 241, 0.2)",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:[n.jsx("span",{style:{fontSize:t?"0.625rem":"0.688rem"},children:""}),n.jsx("span",{children:"Advanced Stats"})]})]}),n.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.8;
            }
          }
        `}),u&&n.jsx("div",{style:{paddingTop:"1rem",display:"grid",gap:"1rem"},children:r.barttorvik&&n.jsx(tW,{barttorvik:r.barttorvik,awayTeam:r.awayTeam,homeTeam:r.homeTeam,pbpData:c})})]})]})},uW=()=>{const[r,e]=O.useState(!0),[t,i]=O.useState([]),[o,l]=O.useState([]),[c,u]=O.useState(null);O.useEffect(()=>{h()},[]);async function h(){try{e(!0);const[w,T,E,A]=await Promise.all([fetch("/basketball_odds.md"),fetch("/haslametrics.md"),fetch("/dratings.md"),fetch("/basketball_teams.csv")]),_=await w.text(),B=await T.text(),I=await E.text(),L=await A.text(),M=c3(_),R=d3(B),j=u3(I),F=m(L);l(F);const z=g3(M,R,j,L);console.log(" Loaded:"),console.log(`   ${M.length} OddsTrader games`),console.log(`   ${Object.keys(R).length} Haslametrics teams`),console.log(`   ${j.length} D-Ratings predictions`),console.log(`   ${F.length} CSV mappings`),i(z),e(!1)}catch(w){console.error("Error loading mapping data:",w),u(w.message),e(!1)}}function m(w){const T=w.trim().split(`
`);return T[0].split(","),T.slice(1).map(E=>{const A=E.split(",");return{normalized:A[0],oddstrader:A[1],haslametrics:A[2],dratings:A[3],ncaa:A[5],notes:A[6]}})}if(r)return n.jsx("div",{style:{padding:"2rem",color:"#fff",textAlign:"center"},children:n.jsx("h2",{children:"Loading mapping data..."})});if(c)return n.jsx("div",{style:{padding:"2rem",color:"#ef4444"},children:n.jsxs("h2",{children:["Error: ",c]})});const f=t.length,x=t.filter(w=>w.dratings).length,b=t.filter(w=>w.haslametrics).length,S=t.filter(w=>!w.dratings).length;return n.jsxs("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto",color:"#fff",fontFamily:"system-ui, -apple-system, sans-serif"},children:[n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem",background:"linear-gradient(135deg, #f97316, #ea580c)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:" Basketball CSV Mapping Audit"}),n.jsx("p",{style:{color:"#94a3b8",fontSize:"1rem"},children:"Game-by-game verification of team name mappings for TODAY's games"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[n.jsx(Rg,{label:"TODAY'S GAMES",value:f,color:"#3b82f6"}),n.jsx(Rg,{label:" MAPPED (D-Ratings)",value:x,color:"#10b981"}),n.jsx(Rg,{label:" HASLA (Coming Soon)",value:b,color:"#f59e0b"}),n.jsx(Rg,{label:" MISSING",value:S,color:"#ef4444"})]}),n.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",border:"1px solid rgba(71, 85, 105, 0.3)",borderRadius:"12px",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid rgba(71, 85, 105, 0.3)",background:"rgba(30, 41, 59, 0.5)"},children:n.jsx("h2",{style:{fontSize:"1.25rem",margin:0},children:"Game-by-Game Mapping Status"})}),n.jsx("div",{style:{padding:"1rem"},children:t.map((w,T)=>n.jsx(hW,{game:w,index:T,csvMappings:o},T))})]})]})};function Rg({label:r,value:e,color:t}){return n.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",border:`1px solid ${t}40`,borderRadius:"8px",padding:"1rem",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:t},children:e}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginTop:"0.25rem"},children:r})]})}function hW({game:r,index:e,csvMappings:t}){const i=!!r.dratings,o=!!r.haslametrics,l=t.find(u=>u.oddstrader===r.awayTeam||u.normalized===r.awayTeam),c=t.find(u=>u.oddstrader===r.homeTeam||u.normalized===r.homeTeam);return n.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.4)",border:"1px solid rgba(71, 85, 105, 0.2)",borderRadius:"8px",padding:"1rem",marginBottom:"0.75rem"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[n.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600"},children:[e+1,". ",r.awayTeam," @ ",r.homeTeam]}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8"},children:r.odds?.gameTime||"TBD"})]}),n.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[n.jsx(tj,{team:r.awayTeam,type:"AWAY",mapping:l,dratingsData:r.dratings}),n.jsx(tj,{team:r.homeTeam,type:"HOME",mapping:c,dratingsData:r.dratings})]}),n.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:i?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${i?"#10b981":"#ef4444"}40`,borderRadius:"6px",fontSize:"0.875rem"},children:[n.jsx("strong",{style:{color:i?"#10b981":"#ef4444"},children:i?" D-RATINGS MATCHED":" D-RATINGS MISSING"}),"  ",n.jsxs("span",{style:{color:"#94a3b8"},children:["Haslametrics: ",o?"":" Coming Soon"]})]})]})}function tj({team:r,type:e,mapping:t,dratingsData:i}){return t?n.jsxs("div",{style:{padding:"0.5rem",background:"rgba(71, 85, 105, 0.1)",border:"1px solid rgba(71, 85, 105, 0.3)",borderRadius:"4px",fontSize:"0.813rem"},children:[n.jsxs("div",{style:{marginBottom:"0.25rem"},children:[n.jsxs("strong",{style:{color:"#3b82f6"},children:[e,":"]})," ",r]}),n.jsxs("div",{style:{color:"#94a3b8",display:"grid",gap:"0.125rem",paddingLeft:"1rem"},children:[n.jsxs("div",{children:[" Normalized: ",n.jsx("span",{style:{color:"#cbd5e1"},children:t.normalized})]}),n.jsxs("div",{children:[" D-Ratings: ",n.jsx("span",{style:{color:"#cbd5e1"},children:t.dratings})]}),n.jsxs("div",{children:[" Haslametrics: ",n.jsx("span",{style:{color:"#cbd5e1"},children:t.haslametrics})]}),n.jsxs("div",{children:[" NCAA API: ",n.jsx("span",{style:{color:"#cbd5e1"},children:t.ncaa})]})]})]}):n.jsxs("div",{style:{padding:"0.5rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"4px",fontSize:"0.813rem"},children:[n.jsxs("strong",{style:{color:"#ef4444"},children:[" ",e,":"]})," ",r,n.jsx("div",{style:{color:"#94a3b8",marginTop:"0.25rem"},children:"NOT FOUND IN CSV"})]})}const gW=()=>{const[r,e]=O.useState(""),[t,i]=O.useState({nhl:!0,cbb:!1,methodology:!1,pricing:!1,performance:!1}),[o,l]=O.useState(new Set),c=x=>{i(b=>({...b,[x]:!b[x]}))},u=x=>{l(b=>{const S=new Set(b);return S.has(x)?S.delete(x):S.add(x),S})},h={nhl:{title:"NHL Betting",questions:[{id:"nhl-1",question:"How do I find +EV NHL picks?",answer:"Finding +EV (positive expected value) NHL picks requires comparing your calculated win probability against what the odds imply. NHL Savant does this automaticallywe calculate true win probability using our proprietary model, then flag picks where we see meaningful edge over the market.",link:{text:"See today's +EV picks",url:"/"}},{id:"nhl-2",question:"What is PDO regression in hockey betting?",answer:`PDO = shooting % + save %. League average is 1.000. Teams above 1.02 are "lucky" and due for negative regression; teams below 0.98 are "unlucky" and due for positive regression. Markets don't always adjust fast enough, creating potential betting edges.`,link:{text:"Learn about PDO",url:"/guides/pdo-regression-nhl-betting"}},{id:"nhl-3",question:"What makes NHL Savant's model different?",answer:"We use a proprietary ensemble approach that combines multiple prediction models with our own adjustments for goalie matchups, rest advantage, and situational factors. This multi-model approach reduces variance and catches edges that single-model systems miss.",link:{text:"View methodology",url:"/methodology"}},{id:"nhl-4",question:"Do you recommend NHL parlays?",answer:"No. Parlays are -EV by design due to compounding juice. We only recommend +EV single plays (moneylines). No props, no teasers, no hypejust mathematically sound bets.",link:null},{id:"nhl-5",question:"How much does NHL Savant cost?",answer:"$25.99/month (Elite plan) or $150/year (Pro plan, best value at $12.50/month). Weekly Scout plan is $7.99. All plans include both NHL and college basketball. Free trial included: 5-10 days depending on plan.",link:{text:"See all pricing options",url:"/pricing"}},{id:"nhl-6",question:"What happens during a losing streak?",answer:"Variance is inevitable in sports betting. Even the best models have cold stretches. What matters is long-term EV, not any single week. We communicate losses honestly and track everything publicly on our performance dashboard.",link:{text:"View our live performance",url:"/performance"}},{id:"nhl-7",question:"Can I try NHL Savant before paying?",answer:"Yes. Free trial is 5-10 days depending on plan (Scout: 5 days, Elite: 7 days, Pro: 10 days). Full access to all features during trial. See the picks, verify the results, then decide.",link:{text:"Start free trial",url:"/pricing"}},{id:"nhl-8",question:"What types of NHL bets does the model recommend?",answer:"We focus primarily on moneylines because that's where our model shows the strongest edge. We grade each pick (A+ through C) based on confidence level, and provide recommended unit sizes. No parlays, no propsjust clean, +EV moneyline plays.",link:{text:"See today's picks",url:"/"}},{id:"nhl-9",question:"What's a good NHL betting ROI?",answer:"Professional sharp bettors target 3-5% ROI long-term. Higher ROIs are possible in smaller samples but expect variance. Any sustained ROI above 3% is excellent in NHL betting.",link:null},{id:"nhl-10",question:"How accurate are NHL betting models?",answer:"Even the best models predict winners at 52-58% accuracy. That's all you need for profitability when betting +EV plays. Win rate alone doesn't matterROI is what counts.",link:{text:"See our current accuracy",url:"/performance"}},{id:"nhl-11",question:"How often do you release NHL picks?",answer:"We release picks daily during the NHL season, typically by early afternoon ET. Every game on the slate is analyzed, and we highlight the ones with positive expected value.",link:null},{id:"nhl-12",question:"Do you factor in starting goalies?",answer:"Yes. Goalie matchups are a critical part of our model. We factor in each goalie's performance metrics and adjust our predictions accordingly. When starting goalies are confirmed, our predictions update automatically.",link:null}]},cbb:{title:"College Basketball Betting",questions:[{id:"cbb-1",question:"How do I find +EV college basketball picks?",answer:"College basketball requires analyzing adjusted efficiency ratings and comparing them to market odds. NHL Savant uses a proprietary ensemble model that combines multiple prediction systems to find games where the market has mispriced win probability.",link:{text:"See CBB picks",url:"/basketball"}},{id:"cbb-2",question:"Why is college basketball better for +EV betting than the NBA?",answer:"More games (350+ teams vs 30 NBA teams), fewer sharp bettors, lines move slower, and more data inefficiency. This creates more mispriced opportunities than you'd find in the heavily-analyzed NBA market.",link:null},{id:"cbb-3",question:"What's the best March Madness betting strategy?",answer:"Use efficiency data to find mispriced seeds. Avoid emotional Cinderella picks. Focus on mid-seed matchups (5-12 upset opportunities) and teams whose underlying metrics don't match their seed. We publish tournament picks throughout March.",link:null},{id:"cbb-4",question:"What makes your college basketball model accurate?",answer:"We use an ensemble approach that combines multiple respected prediction systems with our own proprietary adjustments. This multi-source validation means we only recommend picks where multiple models agree there's value.",link:null},{id:"cbb-5",question:"How do injuries impact college basketball EV?",answer:"Much more than NBA/NHL. Thinner rosters mean star player injuries can reduce win probability by 8-12%. Markets often adjust slowly to these changes, creating +EV opportunities when you're tracking lineup news.",link:null},{id:"cbb-6",question:"Should I bet college basketball props?",answer:"No. Props typically have 5-7% hold (worse than sides), making them -EV. We stick to moneylines and spreads only where the math actually works in your favor.",link:null},{id:"cbb-7",question:"What's home court advantage worth in college basketball?",answer:"2.5-3.5 points depending on arena and atmosphere. Small school gyms typically carry less advantage than hostile environments like Duke's Cameron Indoor. We factor venue into every prediction.",link:null},{id:"cbb-8",question:"How many college basketball picks do you release daily?",answer:"It varies based on where we see value. Some days we might have 10+ picks, other days just 2-3. We only release picks where our model shows positive expected valuewe'd rather miss games than force bad bets.",link:null},{id:"cbb-9",question:"Do you cover mid-major and small conference games?",answer:"Yes. In fact, smaller conferences often have more betting value because they're less efficiently priced by the market. Our model covers all D1 games where we have sufficient data.",link:null},{id:"cbb-10",question:"Do you have college basketball picks during March Madness?",answer:"Yes. We publish picks for all tournament games. Note that tournament variance is extreme (single-elimination). We focus on +EV plays and avoid parlays even when it's tempting.",link:null}]},methodology:{title:"Methodology & Model",questions:[{id:"meth-1",question:"How does the NHL Savant model work?",answer:"We use a proprietary ensemble approach that combines multiple prediction models, then applies our own adjustments for goalie matchups, rest advantage, and other situational factors. We compare our calculated win probability to market odds to identify +EV opportunities.",link:{text:"View methodology",url:"/methodology"}},{id:"meth-2",question:"What is expected goals (xG)?",answer:"xG measures the quality of scoring chances, not just shot count. A slot shot has higher xG than a point shot. xG per 60 minutes is one of the most predictive offensive metrics in hockey analytics.",link:null},{id:"meth-3",question:"What is GSAE?",answer:"Goals Saved Above Expected. Measures how many goals a goalie prevents compared to what an average goalie would allow on those same shots. Positive GSAE = elite goalie. Negative GSAE = struggling goalie.",link:null},{id:"meth-4",question:'What does "ensemble model" mean?',answer:"An ensemble model combines multiple prediction sources rather than relying on just one. By blending different approaches, we reduce variance and improve accuracy. Our picks only hit when multiple models agree there's value.",link:null},{id:"meth-5",question:"What's the Top Scorers feature?",answer:"Our premium feature analyzes NHL player matchups using multiple factors including opponent defense quality, pace, goalie performance, and player shot volume. Shows which players have favorable scoring matchups tonight.",link:{text:"See Top Scorers",url:"/top-scorers"}},{id:"meth-6",question:"What's the Hot Takes feature?",answer:"AI-generated expert analysis for every NHL game. Provides structured insights including model prediction, scoring outlook, and betting angles. Combines our quantitative analysis with readable narrative.",link:{text:"See Hot Takes",url:"/matchup-insights"}},{id:"meth-7",question:"How do you track live win probability?",answer:"During games, we calculate real-time win probability based on current score, period, and pre-game prediction. Shows how your bet is performing live so you can follow along.",link:null},{id:"meth-8",question:"How are bets graded automatically?",answer:"Our system automatically fetches final scores, matches them to our picks, and calculates profit/loss. Everything updates on the performance dashboard without any manual entry required.",link:null},{id:"meth-9",question:"What does each grade (A+, A, B+, etc.) mean?",answer:"Grades reflect our confidence in each pick based on the strength of the edge. A+ and A grades indicate high-confidence plays where multiple factors align. B+ and B are solid plays with good value. C grades are lower confidence but still positive EV.",link:null},{id:"meth-10",question:"How do you calculate recommended unit size?",answer:"Unit sizing is based on our confidence level and historical performance patterns. Higher-graded picks with stronger edges get larger unit recommendations. We cap maximum exposure to protect against variance.",link:null}]},pricing:{title:"Pricing & Trials",questions:[{id:"price-1",question:"What's included in each plan?",answer:"All plans include the same features: full NHL and college basketball picks, AI Hot Takes, Top Scorers analysis, performance tracking, and live win probability. The only difference is commitment levelweekly, monthly, or annual.",link:{text:"Compare plans",url:"/pricing"}},{id:"price-2",question:"How does the free trial work?",answer:"Sign up for any plan and get 5-10 days free (Scout: 5 days, Elite: 7 days, Pro: 10 days). Full access to every feature during trial. If you love it, continue. If not, cancel before trial ends with zero charge.",link:{text:"Start free trial",url:"/pricing"}},{id:"price-3",question:"Can I cancel anytime?",answer:"Yes. All subscriptions are managed through Stripe. You can cancel, change plans, or update payment method anytime via the Account page. No questions asked, no cancellation fees.",link:{text:"Manage account",url:"/account"}},{id:"price-4",question:"What payment methods do you accept?",answer:"All major credit cards via Stripe. Secure, encrypted, PCI-compliant payment processing. Your payment information is never stored on our servers.",link:null},{id:"price-5",question:"Is there a money-back guarantee?",answer:"The free trial IS your guarantee. Test all the picks for 5-10 days before paying a cent. See the results, verify the transparency, then decide. If it's not for you, cancel before trial endszero risk.",link:null},{id:"price-6",question:"What's the best value plan?",answer:"The annual Pro plan ($150/year) saves you 52% vs monthly pricing. That's just $12.50/monthless than the cost of one losing bet. Plus you get the longest free trial (10 days).",link:{text:"View annual plan",url:"/pricing"}},{id:"price-7",question:"Do you offer refunds?",answer:"We offer a generous free trial instead of refunds. This lets you fully test the service before any charge. If you forget to cancel during trial, contact us and we'll work with you.",link:null},{id:"price-8",question:"Can I upgrade or downgrade my plan?",answer:"Yes. You can switch plans anytime from your Account page. Upgrades take effect immediately, downgrades take effect at your next billing cycle.",link:{text:"Manage subscription",url:"/account"}}]},performance:{title:"Performance & Transparency",questions:[{id:"perf-1",question:"Where can I see your track record?",answer:"Every bet is tracked publicly on the Performance Dashboard. Updated daily with win/loss records, ROI, units, and profit. We show every lossnothing is hidden or deleted.",link:{text:"View live performance",url:"/performance"}},{id:"perf-2",question:"Do you delete losing picks?",answer:"Never. Every pick stays in the database forever. Full transparency is our competitive advantagewe're not Twitter touts who delete losses. You can export the complete history anytime.",link:null},{id:"perf-3",question:"What's your current season ROI?",answer:"Check the Performance Dashboard for real-time numbers updated daily. ROI will fluctuate week to weekthat's normal variance. What matters is long-term positive expected value.",link:{text:"Live performance data",url:"/performance"}},{id:"perf-4",question:"How do you handle losing streaks?",answer:"We communicate them honestly. Cold streaks happen to every modelit's variance, not a broken system. Over 100+ bets, variance smooths out. We focus on process (finding +EV) over short-term outcomes.",link:null},{id:"perf-5",question:"Can I download your historical picks?",answer:"Yes. CSV exports with all historical picks, results, and profit/loss are available. Complete transparency so you can audit our performance yourself.",link:{text:"View data exports",url:"/data"}},{id:"perf-6",question:"How do I know NHL Savant is legitimate?",answer:"Every pick is timestamped and tracked publicly before game time. We show every loss alongside every win. We offer a free trial so you can verify our results before paying anything. Unlike shady cappers, we have nothing to hide.",link:{text:"Start free trial",url:"/pricing"}},{id:"perf-7",question:"What's your win rate?",answer:"Win rate varies by sport and grade level, typically 50-60%. But win rate alone is misleadingwhat matters is ROI. A 52% win rate on +EV bets is profitable. Check our dashboard for current numbers.",link:{text:"View performance",url:"/performance"}},{id:"perf-8",question:"How do you compare to other betting services?",answer:"Unlike most services, we: (1) track every pick publicly, (2) show every loss, (3) never recommend parlays, (4) focus only on +EV plays, (5) offer a free trial to verify before paying. We compete on transparency, not hype.",link:null}]}},m=x=>r?x.filter(b=>b.question.toLowerCase().includes(r.toLowerCase())||b.answer.toLowerCase().includes(r.toLowerCase())):x,f=()=>({"@context":"https://schema.org","@type":"FAQPage",mainEntity:Object.values(h).flatMap(b=>b.questions).map(b=>({"@type":"Question",name:b.question,acceptedAnswer:{"@type":"Answer",text:b.answer}}))});return n.jsxs("div",{style:{minHeight:"100vh",background:"var(--color-background)",paddingBottom:"4rem"},children:[n.jsx("script",{type:"application/ld+json",children:JSON.stringify(f())}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(11, 15, 31, 1) 100%)",borderBottom:"1px solid var(--color-border)",padding:"3rem 1rem 2rem"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[n.jsx(hx,{size:40,color:"#D4AF37"}),n.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",color:"#F8FAFC",margin:0},children:" Frequently Asked Questions"})]}),n.jsx("p",{style:{fontSize:"1.125rem",color:"var(--color-text-secondary)",lineHeight:1.6,marginBottom:"2rem"},children:"Everything you need to know about NHL Savant's +EV betting model, methodology, pricing, and performance."}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(fx,{size:20,color:"#94A3B8",style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)"}}),n.jsx("input",{type:"text",placeholder:"Search FAQs...",value:r,onChange:x=>e(x.target.value),style:{width:"100%",padding:"0.875rem 1rem 0.875rem 3rem",background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",color:"var(--color-text-primary)",fontSize:"1rem",outline:"none",transition:"all 0.2s"},onFocus:x=>x.target.style.borderColor="#D4AF37",onBlur:x=>x.target.style.borderColor="var(--color-border)"})]})]})}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem 1rem"},children:[n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem"},children:[n.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"var(--color-text-primary)"},children:"Categories"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem"},children:Object.entries(h).map(([x,b])=>n.jsxs("button",{onClick:()=>{c(x),document.getElementById(`category-${x}`).scrollIntoView({behavior:"smooth",block:"start"})},style:{padding:"0.5rem 1rem",background:t[x]?"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%)":"rgba(255, 255, 255, 0.05)",border:"1px solid",borderColor:t[x]?"rgba(212, 175, 55, 0.4)":"var(--color-border)",borderRadius:"8px",color:t[x]?"#D4AF37":"var(--color-text-secondary)",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:S=>{t[x]||(S.target.style.background="rgba(255, 255, 255, 0.08)",S.target.style.borderColor="rgba(212, 175, 55, 0.2)")},onMouseLeave:S=>{t[x]||(S.target.style.background="rgba(255, 255, 255, 0.05)",S.target.style.borderColor="var(--color-border)")},children:[b.title," (",b.questions.length,")"]},x))})]}),Object.entries(h).map(([x,b])=>{const S=m(b.questions);return S.length===0&&r?null:n.jsxs("div",{id:`category-${x}`,style:{marginBottom:"2rem"},children:[n.jsxs("button",{onClick:()=>c(x),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",background:"linear-gradient(135deg, var(--color-card) 0%, rgba(21, 25, 35, 0.95) 100%)",border:"1px solid var(--color-border)",borderRadius:"12px",marginBottom:"1rem",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:w=>{w.currentTarget.style.borderColor="#D4AF37",w.currentTarget.style.transform="translateX(4px)"},onMouseLeave:w=>{w.currentTarget.style.borderColor="var(--color-border)",w.currentTarget.style.transform="translateX(0)"},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:b.title}),t[x]?n.jsx(Go,{size:24,color:"#D4AF37"}):n.jsx(Wo,{size:24,color:"#94A3B8"})]}),t[x]&&n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:S.map(w=>n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"10px",overflow:"hidden",transition:"all 0.2s"},children:[n.jsxs("button",{onClick:()=>u(w.id),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:o.has(w.id)?"rgba(212, 175, 55, 0.05)":"transparent",border:"none",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},onMouseEnter:T=>{T.currentTarget.style.background="rgba(212, 175, 55, 0.08)"},onMouseLeave:T=>{T.currentTarget.style.background=o.has(w.id)?"rgba(212, 175, 55, 0.05)":"transparent"},children:[n.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"var(--color-text-primary)",flex:1},children:w.question}),o.has(w.id)?n.jsx(Go,{size:20,color:"#D4AF37",style:{flexShrink:0,marginLeft:"1rem"}}):n.jsx(Wo,{size:20,color:"#94A3B8",style:{flexShrink:0,marginLeft:"1rem"}})]}),o.has(w.id)&&n.jsxs("div",{style:{padding:"0 1.25rem 1.25rem",borderTop:"1px solid var(--color-border)",animation:"fadeIn 0.3s ease-in"},children:[n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:w.link?"1rem":0,marginTop:"1rem"},children:w.answer}),w.link&&n.jsxs(vt,{to:w.link.url,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",color:"#D4AF37",textDecoration:"none",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:T=>{T.currentTarget.style.color="#FFD700",T.currentTarget.style.gap="0.75rem"},onMouseLeave:T=>{T.currentTarget.style.color="#D4AF37",T.currentTarget.style.gap="0.5rem"},children:[w.link.text," "]})]})]},w.id))})]},x)}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"16px",padding:"2.5rem 2rem",textAlign:"center",marginTop:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Ready to Start Finding +EV Picks?"}),n.jsx("p",{style:{fontSize:"1.125rem",color:"var(--color-text-secondary)",marginBottom:"2rem",lineHeight:1.6},children:"Get daily +EV picks for NHL and College Basketball with full transparency. Try free for 2-5 days."}),n.jsx(vt,{to:"/pricing",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",color:"#0A0E27",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(212, 175, 55, 0.3)"},onMouseEnter:x=>{x.currentTarget.style.transform="translateY(-2px)",x.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.5)"},onMouseLeave:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="0 4px 12px rgba(212, 175, 55, 0.3)"},children:"Start Free Trial"})]})]}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"3rem auto 0",padding:"0 1rem",textAlign:"center"},children:[n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",marginBottom:"0.5rem"},children:"Last Updated: December 5, 2025"}),n.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)"},children:["Have a question not listed here? ",n.jsx(vt,{to:"/",style:{color:"#D4AF37",textDecoration:"none"},children:"Contact us"})]})]}),n.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},mW=()=>{const[r,e]=O.useState(null),[t,i]=O.useState(!0);O.useEffect(()=>{o()},[]);async function o(){try{i(!0);const u=`?t=${Date.now()}`,h=await fetch(`/data/todays-picks-preview.json${u}`);if(h.ok){const m=await h.json();e(m)}else e({date:new Date().toISOString().split("T")[0],nhl:{totalGames:8,qualityPicks:4,averageEV:4.2,bestGradeAvailable:"A",topMatchupPreview:"Elite xG team vs struggling goalie (negative GSAE)"},cbb:{totalGames:45,qualityPicks:7,averageEV:5.8,bestGradeAvailable:"A+",topMatchupPreview:"Top-10 efficiency vs bottom-50 defense"},lastUpdated:new Date().toISOString()})}catch(u){console.error("Failed to load preview:",u),e({date:new Date().toISOString().split("T")[0],nhl:{totalGames:8,qualityPicks:4,averageEV:4.2,bestGradeAvailable:"A",topMatchupPreview:"Elite xG team vs struggling goalie (negative GSAE)"},cbb:{totalGames:45,qualityPicks:7,averageEV:5.8,bestGradeAvailable:"A+",topMatchupPreview:"Top-10 efficiency vs bottom-50 defense"},lastUpdated:new Date().toISOString()})}finally{i(!1)}}const l=u=>new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),c=u=>new Date(u).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return t?n.jsx("div",{style:{minHeight:"100vh",background:"var(--color-background)",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid var(--color-border)",borderTopColor:"#D4AF37",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),n.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Loading today's preview..."})]})}):n.jsxs("div",{style:{minHeight:"100vh",background:"var(--color-background)",paddingBottom:"4rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(11, 15, 31, 1) 100%)",borderBottom:"1px solid var(--color-border)",padding:"3rem 1rem 2rem"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[n.jsx(fr,{size:40,color:"#D4AF37"}),n.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",color:"#F8FAFC",margin:0},children:" Today's Picks Preview"})]}),n.jsx("p",{style:{fontSize:"1.125rem",color:"var(--color-text-secondary)",lineHeight:1.6,marginBottom:"1rem"},children:"High-level summary of today's best +EV betting opportunities for NHL and College Basketball."}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Wn,{size:18,color:"#D4AF37"}),n.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"0.938rem"},children:l(r.date)})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(ar,{size:18,color:"#10B981"}),n.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"0.938rem"},children:["Last updated: ",c(r.lastUpdated)]})]})]})]})}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem 1rem"},children:[n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[n.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"NHL Picks Today"}),n.jsxs("div",{style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#D4AF37"},children:[r.nhl.totalGames," Games Today"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[n.jsx(Ls,{size:32,color:"#3B82F6",style:{margin:"0 auto 0.75rem"}}),n.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:r.nhl.qualityPicks}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Quality Picks (Grade A or Better)"})]}),n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[n.jsx(ar,{size:32,color:"#10B981",style:{margin:"0 auto 0.75rem"}}),n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:[r.nhl.averageEV.toFixed(1),"%"]}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Average EV on Quality Picks"})]}),n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[n.jsx(fr,{size:32,color:"#D4AF37",style:{margin:"0 auto 0.75rem"}}),n.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:r.nhl.bestGradeAvailable}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Best Grade Available Today"})]})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.05) 0%, rgba(59, 130, 246, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem"},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#D4AF37",marginBottom:"0.5rem"},children:"TOP MATCHUP PREVIEW"}),n.jsx("div",{style:{fontSize:"1rem",color:"var(--color-text-primary)",lineHeight:1.6},children:r.nhl.topMatchupPreview})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.25rem",background:"rgba(255, 255, 255, 0.03)",border:"1px dashed var(--color-border)",borderRadius:"12px"},children:[n.jsx(Bo,{size:24,color:"#94A3B8"}),n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:"0.938rem",fontWeight:"600",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"Full picks, odds, and analysis available to premium members"}),n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-secondary)"},children:"See exact teams, EV percentages, unit sizing, and AI-generated insights"})]})]})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[n.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"College Basketball Picks Today"}),n.jsxs("div",{style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.1) 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#3B82F6"},children:[r.cbb.totalGames," Games Today"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[n.jsx(Ls,{size:32,color:"#3B82F6",style:{margin:"0 auto 0.75rem"}}),n.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:r.cbb.qualityPicks}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Quality Picks (Grade A or Better)"})]}),n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[n.jsx(ar,{size:32,color:"#10B981",style:{margin:"0 auto 0.75rem"}}),n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:[r.cbb.averageEV.toFixed(1),"%"]}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Average EV on Quality Picks"})]}),n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[n.jsx(fr,{size:32,color:"#D4AF37",style:{margin:"0 auto 0.75rem"}}),n.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:r.cbb.bestGradeAvailable}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Best Grade Available Today"})]})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.05) 0%, rgba(59, 130, 246, 0.05) 100%)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem"},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#3B82F6",marginBottom:"0.5rem"},children:"TOP MATCHUP PREVIEW"}),n.jsx("div",{style:{fontSize:"1rem",color:"var(--color-text-primary)",lineHeight:1.6},children:r.cbb.topMatchupPreview})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.25rem",background:"rgba(255, 255, 255, 0.03)",border:"1px dashed var(--color-border)",borderRadius:"12px"},children:[n.jsx(Bo,{size:24,color:"#94A3B8"}),n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:"0.938rem",fontWeight:"600",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"Full picks, odds, and analysis available to premium members"}),n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-secondary)"},children:"See exact teams, EV percentages, unit sizing, and efficiency ratings"})]})]})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"16px",padding:"2.5rem 2rem",textAlign:"center"},children:[n.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Get Full Access to Today's Picks"}),n.jsx("p",{style:{fontSize:"1.125rem",color:"var(--color-text-secondary)",marginBottom:"2rem",lineHeight:1.6,maxWidth:"700px",margin:"0 auto 2rem"},children:"See all picks with exact teams, odds, EV percentages, unit sizing, and full AI-generated analysis. Track your performance, bookmark favorites, and get live win probability updates."}),n.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[n.jsx(vt,{to:"/pricing",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",color:"#0A0E27",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(212, 175, 55, 0.3)"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.5)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 12px rgba(212, 175, 55, 0.3)"},children:"Start Free Trial"}),n.jsxs(vt,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"rgba(255, 255, 255, 0.05)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255, 255, 255, 0.08)",u.currentTarget.style.borderColor="#D4AF37"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(255, 255, 255, 0.05)",u.currentTarget.style.borderColor="var(--color-border)"},children:["View Full Dashboard",n.jsx(sB,{size:18})]})]})]}),n.jsxs("div",{style:{marginTop:"3rem",padding:"2rem",background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"16px"},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1.5rem"},children:"How NHL Savant Finds +EV Picks"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#D4AF37",marginBottom:"0.5rem"},children:"1. CALCULATE TRUE WIN PROBABILITY"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"NHL: xGF per 60, PDO regression, goalie GSAE, rest factors. CBB: Adjusted efficiency ratings (offensive minus defensive)."})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#3B82F6",marginBottom:"0.5rem"},children:"2. ENSEMBLE CALIBRATION"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Blend our model with established sources (MoneyPuck for NHL, D-Ratings + Haslametrics for CBB) for improved accuracy."})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#10B981",marginBottom:"0.5rem"},children:"3. COMPARE TO MARKET ODDS"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Calculate Expected Value (EV%) by comparing our probability to implied market probability. Publish only +EV opportunities."})]})]}),n.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--color-border)"},children:n.jsx(vt,{to:"/methodology",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",color:"#D4AF37",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.color="#FFD700",u.currentTarget.style.gap="0.75rem"},onMouseLeave:u=>{u.currentTarget.style.color="#D4AF37",u.currentTarget.style.gap="0.5rem"},children:"Read Full Methodology "})})]})]}),n.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})},fW=()=>n.jsxs("div",{style:{minHeight:"100vh",background:"var(--color-background)",paddingBottom:"4rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(11, 15, 31, 1) 100%)",borderBottom:"1px solid var(--color-border)",padding:"3rem 1rem 2rem"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[n.jsx(Tw,{size:40,color:"#D4AF37"}),n.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",color:"#F8FAFC",margin:0},children:" PDO Regression: The NHL Puck Luck Indicator"})]}),n.jsx("p",{style:{fontSize:"1.25rem",color:"var(--color-text-secondary)",lineHeight:1.6},children:"How to identify and exploit puck luck in NHL betting using PDO regression analysis"})]})}),n.jsxs("article",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem 1rem"},children:[n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"What is PDO?"}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#D4AF37",textAlign:"center",marginBottom:"1rem",fontFamily:"monospace"},children:"PDO = Shooting % + Save %"}),n.jsxs("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,textAlign:"center",margin:0},children:["League average is ",n.jsx("strong",{style:{color:"#D4AF37"},children:"1.000"})," (or 100.0 when expressed as a percentage)"]})]}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1rem"},children:`PDO is a statistic invented by blogger "PDO" (now Brian King) that measures the sum of a team's shooting percentage and save percentage at even strength. It's named after the blogger, not an acronym.`}),n.jsxs("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"The Key Insight:"}),' PDO tends to regress to 1.000 over time. Teams with high PDO (above 1.020) are getting "lucky" with high shooting% or save%. Teams with low PDO (below 0.980) are "unlucky" and due for positive regression.']}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginTop:"1.5rem"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx(Tw,{size:24,color:"#EF4444"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#EF4444",margin:0},children:"High PDO (Above 1.020)"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Team is riding unsustainably high shooting % or save %. Expect negative regression = fade this team in future games."})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx(ar,{size:24,color:"#10B981"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#10B981",margin:0},children:"Low PDO (Below 0.980)"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Team is suffering from bad luck with low shooting % or save %. Expect positive regression = back this team in future games."})]})]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Why PDO Regression Works in Betting"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1.5rem"},children:'Public betting markets overreact to recent results. A team on a winning streak due to high PDO (puck luck) will have inflated odds because the market sees "hot team." A team on a losing streak due to low PDO (bad luck) will have deflated odds because the market sees "cold team."'}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[n.jsx(o0,{size:24,color:"#D4AF37",style:{flexShrink:0,marginTop:"0.25rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#D4AF37",marginBottom:"0.5rem"},children:"The Market Inefficiency"}),n.jsxs("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:["Betting odds are influenced heavily by recent win/loss records, but PDO tells you ",n.jsx("em",{children:"how"})," those wins/losses happened. A team can win 5 straight games with terrible underlying metrics if their goalie is posting a .960 save percentage (unsustainable). When the goalie regresses to .915, those wins turn into lossesbut the market hasn't adjusted yet."]})]})]})}),n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Real Example: 2023-24 Colorado Avalanche (Early Season)"}),n.jsxs("ul",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.7,paddingLeft:"1.5rem",marginBottom:"1.5rem"},children:[n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Record after 15 games:"})," 6-9-0 (bad)"]}),n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"PDO:"})," 0.963 (extremely unlucky)"]}),n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"xGF%:"})," 54.2% (elite underlying metrics)"]}),n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Market Reaction:"})," Odds lengthened to +140 underdogs in several games"]}),n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"What Happened:"})," They went 12-3 over the next 15 games as PDO regressed to 0.998"]})]}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7},children:"This is the classic PDO regression bet: strong underlying metrics (xGF%, shot quality) + terrible luck (low PDO) = +EV backing opportunity."})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"How NHL Savant Uses PDO in Betting"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#0A0E27"},children:"1"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Calculate Rolling PDO"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0,paddingLeft:"2.75rem"},children:"We track PDO over the last 10 games (rolling average) to identify current luck trends, not season-long averages that can mask recent changes."})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#0A0E27"},children:"2"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Apply Regression Weight"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0,paddingLeft:"2.75rem"},children:"Teams with PDO above 1.020 or below 0.980 get regression applied to their expected win probability. The further from 1.000, the stronger the regression weight (up to 20% adjustment)."})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#0A0E27"},children:"3"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Combine with xGF Analysis"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0,paddingLeft:"2.75rem"},children:"PDO alone isn't enough. We need strong underlying metrics (xGF per 60, shot quality) to confirm the team deserves positive regression. Never bet low PDO + bad xG."})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#0A0E27"},children:"4"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Compare to Market Odds"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0,paddingLeft:"2.75rem"},children:"Our regression-adjusted probability is compared to market implied probability. If market hasn't priced in the regression, we have +EV."})]})]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Common PDO Betting Mistakes"}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#EF4444",marginBottom:"1rem"},children:" Betting Low PDO Without Good Underlying Metrics"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"A bad team can have low PDO because they're genuinely bad at shooting and defending, not because they're unlucky. Always check xGF%, shot quality, and defensive metrics before betting PDO regression."})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#EF4444",marginBottom:"1rem"},children:" Ignoring Goaltending Talent"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Elite goalies (Hellebuyck, Shesterkin) can sustain .920+ save percentages. Their high PDO isn't luckit's skill. Similarly, backup goalies might have legitimately low save percentages that won't regress upward."})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#EF4444",marginBottom:"1rem"},children:" Using Season-Long PDO in January"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"A team's PDO in October doesn't matter in January. Use rolling 10-game or 15-game PDO to capture current luck trends, not averages diluted by months-old data."})]})]}),n.jsx("section",{children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"16px",padding:"2.5rem 2rem",textAlign:"center"},children:[n.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Get PDO-Adjusted Picks Daily"}),n.jsx("p",{style:{fontSize:"1.125rem",color:"var(--color-text-secondary)",marginBottom:"2rem",lineHeight:1.6},children:"NHL Savant calculates rolling PDO, applies regression weights, and combines with xGF analysis to find +EV picks every day. No manual calculations required."}),n.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[n.jsxs(vt,{to:"/pricing",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",color:"#0A0E27",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(212, 175, 55, 0.3)"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 6px 20px rgba(212, 175, 55, 0.5)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 4px 12px rgba(212, 175, 55, 0.3)"},children:["Start Free Trial",n.jsx(Iu,{size:20})]}),n.jsx(vt,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"rgba(255, 255, 255, 0.05)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s"},onMouseEnter:r=>{r.currentTarget.style.background="rgba(255, 255, 255, 0.08)",r.currentTarget.style.borderColor="#D4AF37"},onMouseLeave:r=>{r.currentTarget.style.background="rgba(255, 255, 255, 0.05)",r.currentTarget.style.borderColor="var(--color-border)"},children:"See Today's Picks"})]})]})})]}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"3rem auto 0",padding:"0 1rem",paddingTop:"2rem",borderTop:"1px solid var(--color-border)"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Related Guides"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[n.jsx(vt,{to:"/methodology",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#D4AF37",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.color="#FFD700",r.currentTarget.style.gap="0.75rem"},onMouseLeave:r=>{r.currentTarget.style.color="#D4AF37",r.currentTarget.style.gap="0.5rem"},children:"Full NHL Savant Methodology "}),n.jsx(vt,{to:"/faq",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#D4AF37",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.color="#FFD700",r.currentTarget.style.gap="0.75rem"},onMouseLeave:r=>{r.currentTarget.style.color="#D4AF37",r.currentTarget.style.gap="0.5rem"},children:"Frequently Asked Questions "})]})]})]}),pW=()=>n.jsxs("div",{style:{minHeight:"100vh",background:"var(--color-background)",paddingBottom:"4rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(11, 15, 31, 1) 100%)",borderBottom:"1px solid var(--color-border)",padding:"3rem 1rem 2rem"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[n.jsx(ar,{size:40,color:"#10B981"}),n.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",color:"#F8FAFC",margin:0},children:" How to Find +EV NHL Picks"})]}),n.jsx("p",{style:{fontSize:"1.25rem",color:"var(--color-text-secondary)",lineHeight:1.6},children:"The complete guide to identifying positive expected value betting opportunities in NHL hockey"})]})}),n.jsxs("article",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem 1rem"},children:[n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"What is Expected Value (+EV)?"}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10B981",textAlign:"center",marginBottom:"1rem",fontFamily:"monospace"},children:"EV = (Your Win Probability  Payout) - (Your Lose Probability  Stake)"}),n.jsxs("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,textAlign:"center",margin:0},children:["Simplified: ",n.jsx("strong",{style:{color:"#10B981"},children:"EV% = (Your Probability / Market Probability) - 1"})]})]}),n.jsxs("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Expected Value"})," is the average amount you can expect to win or lose per bet over the long run. A bet is +EV when your calculated win probability is higher than the market's implied probability."]}),n.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Example: Finding +EV in Action"}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#10B981",marginBottom:"0.5rem"},children:"GAME SCENARIO"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Colorado Avalanche @ Dallas Stars"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Market Odds (Colorado ML)"}),n.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--color-text-primary)"},children:"+120 (Implied 45.5%)"})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Your Model's Probability"}),n.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10B981"},children:"52.0%"})]})]}),n.jsxs("div",{style:{paddingTop:"1rem",borderTop:"1px dashed var(--color-border)"},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#10B981",marginBottom:"0.5rem"},children:"CALCULATION"}),n.jsxs("div",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,fontFamily:"monospace"},children:["EV% = (52.0% / 45.5%) - 1 = ",n.jsx("strong",{style:{color:"#10B981"},children:"+14.3%"})]}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginTop:"0.5rem",margin:0},children:"This is a strong +EV bet. For every $100 wagered on this bet long-term, you'd expect to profit $14.30."})]})]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"The 3-Step Process to Find +EV NHL Picks"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #10B981 0%, #34D399 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#FFF"},children:"1"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Calculate True Win Probability"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,marginBottom:"1rem",paddingLeft:"2.75rem"},children:"Use advanced metrics to determine a team's true win probability:"}),n.jsxs("ul",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,paddingLeft:"4.25rem",margin:0},children:[n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"xGF per 60:"})," Expected goals for per 60 minutes (offense quality)"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"xGA per 60:"})," Expected goals against per 60 minutes (defense quality)"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"PDO Regression:"})," Adjust for puck luck (see ",n.jsx(vt,{to:"/guides/pdo-regression-nhl-betting",style:{color:"#10B981",textDecoration:"none"},children:"PDO Guide"}),")"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Goalie GSAE:"})," Goals saved above expected for starting goalies"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Rest Advantage:"})," Back-to-back penalties and rest differential"]})]})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #10B981 0%, #34D399 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#FFF"},children:"2"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Use Ensemble Calibration"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0,paddingLeft:"2.75rem"},children:"Don't trust a single model. NHL Savant blends our proprietary xGF/PDO model (30% weight) with MoneyPuck's predictions (70% weight) to reduce variance and improve accuracy. Ensemble models consistently outperform single-source predictions."})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #10B981 0%, #34D399 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#FFF"},children:"3"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Compare to Market Odds"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0,paddingLeft:"2.75rem"},children:"Convert market odds to implied probability (including vig), then calculate EV%. Only bet when EV% is positive and meets your threshold (typically +3% minimum for NHL)."})]})]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Quality Grading System"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1.5rem"},children:"Not all +EV bets are created equal. NHL Savant assigns quality grades (A+ to C) based on Expected Value percentage:"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"10px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#10B981"},children:"A+ / A / A-"}),n.jsx("span",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginLeft:"1rem"},children:"EV% above +5.0%"})]}),n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-secondary)"},children:"Excellent edge"})]}),n.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#3B82F6"},children:"B+ / B / B-"}),n.jsx("span",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginLeft:"1rem"},children:"EV% between +2.5% and +5.0%"})]}),n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-secondary)"},children:"Solid edge"})]}),n.jsxs("div",{style:{background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"10px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#D4AF37"},children:"C+ / C / C-"}),n.jsx("span",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginLeft:"1rem"},children:"EV% between +1.0% and +2.5%"})]}),n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-secondary)"},children:"Marginal edge"})]})]}),n.jsxs("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.7},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Recommendation:"})," Focus on A and B grade picks for maximum ROI. C grades are still +EV but require more discipline and bankroll to withstand variance."]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Optimal Unit Sizing (ABC Matrix)"}),n.jsxs("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1.5rem"},children:["Finding +EV is only half the battleproper bankroll management is crucial. NHL Savant uses a 2-dimensional unit sizing system based on ",n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Grade"})," (quality) and ",n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Odds Range"})," (risk):"]}),n.jsx("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid var(--color-border)",color:"var(--color-text-primary)",fontWeight:"700"},children:"Grade / Odds"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid var(--color-border)",color:"var(--color-text-primary)",fontWeight:"700"},children:"Big Fav (-200+)"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid var(--color-border)",color:"var(--color-text-primary)",fontWeight:"700"},children:"Mod Fav (-200 to -150)"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid var(--color-border)",color:"var(--color-text-primary)",fontWeight:"700"},children:"Slight Fav (-150 to -105)"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid var(--color-border)",color:"var(--color-text-primary)",fontWeight:"700"},children:"Dog (+105 to +200)"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"0.75rem",borderBottom:"1px solid var(--color-border)",color:"#10B981",fontWeight:"700"},children:"A Grade"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},children:"4.0u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},children:"3.0u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},children:"5.0u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},children:"3.0u"})]}),n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"0.75rem",borderBottom:"1px solid var(--color-border)",color:"#3B82F6",fontWeight:"700"},children:"B Grade"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},children:"3.5u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},children:"3.0u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},children:"5.0u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},children:"2.0u"})]}),n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"0.75rem",color:"#D4AF37",fontWeight:"700"},children:"C Grade"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"var(--color-text-secondary)"},children:"3.0u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"var(--color-text-secondary)"},children:"3.5u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"var(--color-text-secondary)"},children:"1.5u"}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"var(--color-text-secondary)"},children:"1.0u"})]})]})]})}),n.jsxs("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.7},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Why this works:"})," Slight favorites (-150 to -105) get the highest unit allocation because they offer the best risk/reward ratio when +EV is confirmed. Heavy favorites and dogs are sized smaller to manage variance."]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Common NHL Betting Mistakes"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n.jsx(ai,{size:20,color:"#EF4444",style:{flexShrink:0,marginTop:"0.125rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#EF4444",marginBottom:"0.5rem"},children:'Betting on Favorites Because "They Should Win"'}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:`A -200 favorite has only 66.7% implied win probability. If your model says 62%, that's -EV even though they're "likely to win." Only bet when probability exceeds market.`})]})]})}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n.jsx(ai,{size:20,color:"#EF4444",style:{flexShrink:0,marginTop:"0.125rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#EF4444",marginBottom:"0.5rem"},children:"Chasing Losses with Parlays"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Parlays compound the sportsbook's edge. Even if you find two +EV bets individually, combining them into a parlay is almost always -EV due to parlay pricing. Stick to single bets."})]})]})}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n.jsx(ai,{size:20,color:"#EF4444",style:{flexShrink:0,marginTop:"0.125rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#EF4444",marginBottom:"0.5rem"},children:"Ignoring Line Shopping"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"A +115 line vs a +120 line is a 2.1% EV difference. Over 100 bets, that's multiple units of profit. Always have accounts at multiple sportsbooks and shop for the best line."})]})]})})]})]}),n.jsx("section",{children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"16px",padding:"2.5rem 2rem",textAlign:"center"},children:[n.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Get Daily +EV NHL Picks"}),n.jsx("p",{style:{fontSize:"1.125rem",color:"var(--color-text-secondary)",marginBottom:"2rem",lineHeight:1.6,maxWidth:"700px",margin:"0 auto 2rem"},children:"NHL Savant does the heavy lifting: xGF/PDO analysis, MoneyPuck ensemble calibration, EV calculation, quality grading, and optimal unit sizing. You just pick the bets."}),n.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[n.jsxs(vt,{to:"/pricing",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"linear-gradient(135deg, #10B981 0%, #34D399 100%)",color:"#FFF",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 6px 20px rgba(16, 185, 129, 0.5)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:["Start Free Trial",n.jsx(Iu,{size:20})]}),n.jsx(vt,{to:"/todays-picks",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"rgba(255, 255, 255, 0.05)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s"},onMouseEnter:r=>{r.currentTarget.style.background="rgba(255, 255, 255, 0.08)",r.currentTarget.style.borderColor="#10B981"},onMouseLeave:r=>{r.currentTarget.style.background="rgba(255, 255, 255, 0.05)",r.currentTarget.style.borderColor="var(--color-border)"},children:"View Today's Preview"})]})]})})]}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"3rem auto 0",padding:"0 1rem",paddingTop:"2rem",borderTop:"1px solid var(--color-border)"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Related Guides"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[n.jsx(vt,{to:"/guides/pdo-regression-nhl-betting",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#10B981",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.color="#34D399",r.currentTarget.style.gap="0.75rem"},onMouseLeave:r=>{r.currentTarget.style.color="#10B981",r.currentTarget.style.gap="0.5rem"},children:"PDO Regression Guide "}),n.jsx(vt,{to:"/methodology",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#10B981",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.color="#34D399",r.currentTarget.style.gap="0.75rem"},onMouseLeave:r=>{r.currentTarget.style.color="#10B981",r.currentTarget.style.gap="0.5rem"},children:"Full Methodology "}),n.jsx(vt,{to:"/faq",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#10B981",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.color="#34D399",r.currentTarget.style.gap="0.75rem"},onMouseLeave:r=>{r.currentTarget.style.color="#10B981",r.currentTarget.style.gap="0.5rem"},children:"Frequently Asked Questions "})]})]})]}),yW=()=>n.jsxs("div",{style:{minHeight:"100vh",background:"var(--color-background)",paddingBottom:"4rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(11, 15, 31, 1) 100%)",borderBottom:"1px solid var(--color-border)",padding:"3rem 1rem 2rem"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[n.jsx(fr,{size:40,color:"#3B82F6"}),n.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",color:"#F8FAFC",margin:0},children:" How to Find +EV College Basketball Picks"})]}),n.jsx("p",{style:{fontSize:"1.25rem",color:"var(--color-text-secondary)",lineHeight:1.6},children:"The complete guide to identifying positive expected value betting opportunities in college basketball"})]})}),n.jsxs("article",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem 1rem"},children:[n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Why College Basketball is Better for +EV Betting Than NBA"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1.5rem"},children:"College basketball offers significantly more +EV opportunities than NBA betting due to market inefficiencies created by:"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx(NB,{size:24,color:"#3B82F6"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#3B82F6",margin:0},children:"350+ Teams"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"NCAA has 350+ Division I teams vs 30 NBA teams. More games = more data inefficiency = more mispriced lines."})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx(Ls,{size:24,color:"#3B82F6"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#3B82F6",margin:0},children:"Fewer Sharp Bettors"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Public betting dominates CBB markets. Lines move slower and overreact to recent results, creating predictable patterns."})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx(ar,{size:24,color:"#3B82F6"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#3B82F6",margin:0},children:"Higher Variance"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"40-minute games with shorter shot clocks create higher variance. Markets struggle to price this correctly, especially mid-majors."})]})]}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[n.jsx(fr,{size:24,color:"#D4AF37",style:{flexShrink:0,marginTop:"0.25rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#D4AF37",marginBottom:"0.5rem"},children:"The Key Insight"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Sportsbooks can't efficiently price 5,000+ college basketball games per season. They use automated systems that overweight recent results and underweight adjusted efficiency metrics. This creates systematic +EV opportunities for model-based bettors."})]})]})})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"The 3-Step Process to Find +EV CBB Picks"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#FFF"},children:"1"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Use Adjusted Efficiency Ratings"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,marginBottom:"1rem",paddingLeft:"2.75rem"},children:"The gold standard for college basketball prediction:"}),n.jsxs("ul",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,paddingLeft:"4.25rem",margin:0},children:[n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Offensive Efficiency:"})," Points scored per 100 possessions (adjusted for opponent defense)"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Defensive Efficiency:"})," Points allowed per 100 possessions (adjusted for opponent offense)"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Net Efficiency:"})," Offensive - Defensive (best predictor of win probability)"]}),n.jsxs("li",{style:{marginBottom:"0.5rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Tempo:"})," Possessions per 40 minutes (affects total scoring, not win probability)"]})]})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#FFF"},children:"2"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Blend Multiple Models (Ensemble)"})]}),n.jsxs("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0,paddingLeft:"2.75rem"},children:["NHL Savant uses an ensemble approach for college basketball: ",n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"D-Ratings"})," (daily game predictions) blended with ",n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Haslametrics"})," (efficiency rankings). Single models have blind spots; ensembles reduce variance and improve long-term accuracy."]})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"700",color:"#FFF"},children:"3"}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"Compare to Market Odds"})]}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0,paddingLeft:"2.75rem"},children:"Calculate Expected Value (EV%) by comparing your ensemble probability to market implied probability. College basketball lines are softer than NHL/NBA, so you can find +EV even at lower thresholds (+2.5% EV is excellent for CBB)."})]})]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"What Makes a Good College Basketball Bet?"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1.5rem"},children:"Not all +EV CBB bets are equal. The best opportunities share these characteristics:"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#10B981",marginBottom:"0.5rem"},children:" Significant Efficiency Differential (8+ points)"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"When one team's net efficiency is 8+ points better than their opponent, win probability jumps significantly. Markets often underprice these edges, especially in conference play."})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#10B981",marginBottom:"0.5rem"},children:" Market Overreaction to Recent Results"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"A top-50 efficiency team loses 2 games in a row? Public fades them, creating value. A bottom-100 team wins 3 straight? Public backs them, creating fade opportunities."})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#10B981",marginBottom:"0.5rem"},children:" Home Court Advantage (2.5-3.5 points)"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Home court is worth ~3 points in college basketball. When a strong home team is priced as a slight favorite or underdog, that's a signal for +EV."})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#10B981",marginBottom:"0.5rem"},children:" Model Agreement (Both D-Ratings and Haslametrics Favor Same Side)"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"When both models agree, confidence increases. These bets get higher quality grades and larger unit allocations."})]})]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"March Madness Betting Strategy"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1.5rem"},children:"The NCAA Tournament is the biggest betting event in college basketball. Here's how to approach it with an +EV mindset:"}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#3B82F6",marginBottom:"1rem"},children:"Best March Madness +EV Opportunities"}),n.jsxs("ul",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.7,paddingLeft:"1.5rem",margin:0},children:[n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"5 vs 12 Upset Lines:"})," Markets overprice 5-seeds. When efficiency says the 12-seed is within 4-6 points, backing the dog at +250+ is often +EV."]}),n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Mid-Major Disrespect:"}),' Small-conference auto-bids with top-50 efficiency are undervalued because casual bettors fade "unknown" teams.']}),n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Early Round Overs:"})," First-round games trend higher-scoring due to nerves and pace. Totals are often set too low."]}),n.jsxs("li",{style:{marginBottom:"0.75rem"},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Avoid Emotional Cinderella Bets:"})," Don't chase 15-seeds in Round 2 just because they won Round 1. Regression exists even in March."]})]})]}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n.jsx(ai,{size:20,color:"#EF4444",style:{flexShrink:0,marginTop:"0.125rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#EF4444",marginBottom:"0.5rem"},children:"Warning: Single-Elimination Variance"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:`March Madness is single-elimination, meaning variance is extreme. A 65% win probability team will lose 35% of the timeand there's no "next game" to regress to the mean. Bet smaller units during the tournament compared to regular season.`})]})]})})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"How Injuries Impact College Basketball EV"}),n.jsx("p",{style:{fontSize:"1rem",color:"var(--color-text-secondary)",lineHeight:1.7,marginBottom:"1.5rem"},children:"College basketball rosters are thin (12-13 scholarship players vs NBA's 15 + G-League pipeline). Injuries have outsized impact:"}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"12px",padding:"1.5rem"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#3B82F6",marginBottom:"0.5rem"},children:"STAR PLAYER INJURY"}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"-8 to -12%"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"A team's best player (30+ minutes, 20+ PPG) missing a game can reduce win probability by 8-12 percentage points. Markets adjust, but often too slowly."})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#D4AF37",marginBottom:"0.5rem"},children:"ROTATION PLAYER INJURY"}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"-3 to -5%"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"A rotation player (15-25 minutes) has smaller impact but still material. Markets often ignore these injuries completely."})]})]}),n.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--color-border)"},children:n.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:[n.jsx("strong",{style:{color:"var(--color-text-primary)"},children:"Pro Tip:"})," Follow team Twitter accounts and beat reporters 1-2 hours before game time. Late injury news creates massive line movement and +EV opportunities if you're first to the sportsbook."]})})]})]}),n.jsxs("section",{style:{marginBottom:"3rem"},children:[n.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Common College Basketball Betting Mistakes"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n.jsx(ai,{size:20,color:"#EF4444",style:{flexShrink:0,marginTop:"0.125rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#EF4444",marginBottom:"0.5rem"},children:'Betting on "Hot Teams" Without Checking Efficiency'}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"A mid-major winning 8 straight games sounds great until you see they played bottom-200 defenses. Adjusted efficiency tells the truthraw records lie."})]})]})}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n.jsx(ai,{size:20,color:"#EF4444",style:{flexShrink:0,marginTop:"0.125rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#EF4444",marginBottom:"0.5rem"},children:"Overvaluing Conference Tournament Performance"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Conference tournament games have extreme variance (single-elimination, tired players, neutral courts). Don't overweight 2-3 conference tournament games vs 30+ regular season games in your evaluation."})]})]})}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1.25rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n.jsx(ai,{size:20,color:"#EF4444",style:{flexShrink:0,marginTop:"0.125rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",color:"#EF4444",marginBottom:"0.5rem"},children:"Ignoring Pace-Adjusted Stats"}),n.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"A team scoring 85 PPG sounds elite until you realize they play at 75 possessions/game (fast pace). Always use per-100-possession metrics, not raw points."})]})]})})]})]}),n.jsx("section",{children:n.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(16, 185, 129, 0.15) 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"16px",padding:"2.5rem 2rem",textAlign:"center"},children:[n.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Get Daily +EV College Basketball Picks"}),n.jsx("p",{style:{fontSize:"1.125rem",color:"var(--color-text-secondary)",marginBottom:"2rem",lineHeight:1.6,maxWidth:"700px",margin:"0 auto 2rem"},children:"NHL Savant blends D-Ratings and Haslametrics efficiency ratings, calculates EV%, assigns quality grades, and provides optimal unit sizing for every college basketball game."}),n.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[n.jsxs(vt,{to:"/pricing",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%)",color:"#FFF",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.5)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)"},children:["Start Free Trial",n.jsx(Iu,{size:20})]}),n.jsx(vt,{to:"/basketball",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",background:"rgba(255, 255, 255, 0.05)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"700",textDecoration:"none",transition:"all 0.3s"},onMouseEnter:r=>{r.currentTarget.style.background="rgba(255, 255, 255, 0.08)",r.currentTarget.style.borderColor="#3B82F6"},onMouseLeave:r=>{r.currentTarget.style.background="rgba(255, 255, 255, 0.05)",r.currentTarget.style.borderColor="var(--color-border)"},children:"View College Basketball Picks"})]})]})})]}),n.jsxs("div",{style:{maxWidth:"1400px",margin:"3rem auto 0",padding:"0 1rem",paddingTop:"2rem",borderTop:"1px solid var(--color-border)"},children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1rem"},children:"Related Guides"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[n.jsx(vt,{to:"/guides/how-to-find-ev-nhl-picks",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#3B82F6",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.color="#60A5FA",r.currentTarget.style.gap="0.75rem"},onMouseLeave:r=>{r.currentTarget.style.color="#3B82F6",r.currentTarget.style.gap="0.5rem"},children:"+EV NHL Betting Guide "}),n.jsx(vt,{to:"/methodology",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#3B82F6",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.color="#60A5FA",r.currentTarget.style.gap="0.75rem"},onMouseLeave:r=>{r.currentTarget.style.color="#3B82F6",r.currentTarget.style.gap="0.5rem"},children:"Full Methodology "}),n.jsx(vt,{to:"/faq",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#3B82F6",textDecoration:"none",fontSize:"0.938rem",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.color="#60A5FA",r.currentTarget.style.gap="0.75rem"},onMouseLeave:r=>{r.currentTarget.style.color="#3B82F6",r.currentTarget.style.gap="0.5rem"},children:"Frequently Asked Questions "})]})]})]}),xW=()=>{const[r,e]=O.useState(null),[t,i]=O.useState(!0);O.useEffect(()=>{o()},[]);async function o(){try{i(!0);const c=`?t=${Date.now()}`,u=await fetch(`/data/season-stats.json${c}`);if(u.ok){const h=await u.json();e(h)}else e({nhl:{totalBets:0,wins:0,losses:0,winRate:0,totalProfit:0,roi:0},cbb:{totalBets:0,wins:0,losses:0,winRate:0,totalProfit:0,roi:0},lastUpdated:new Date().toISOString()})}catch(c){console.error("Failed to load season stats:",c),e({nhl:{totalBets:0,wins:0,losses:0,winRate:0,totalProfit:0,roi:0},cbb:{totalBets:0,wins:0,losses:0,winRate:0,totalProfit:0,roi:0},lastUpdated:new Date().toISOString()})}finally{i(!1)}}const l=c=>new Date(c).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return n.jsxs("div",{style:{minHeight:"100vh",background:"var(--color-background)",paddingBottom:"4rem"},children:[n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(11, 15, 31, 1) 100%)",borderBottom:"1px solid var(--color-border)",padding:"3rem 1rem 2rem"},children:n.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[n.jsx(mx,{size:40,color:"#3B82F6"}),n.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",color:"#F8FAFC",margin:0},children:" Historical Data & Exports"})]}),n.jsx("p",{style:{fontSize:"1.125rem",color:"var(--color-text-secondary)",lineHeight:1.6,marginBottom:"1rem"},children:"Download complete historical picks data for NHL and College Basketball. Full transparencyno picks deleted."}),!t&&r&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Wn,{size:18,color:"#3B82F6"}),n.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"0.938rem"},children:["Last updated: ",l(r.lastUpdated)]})]})]})}),n.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem 1rem"},children:t?n.jsxs("div",{style:{textAlign:"center",padding:"3rem 0"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid var(--color-border)",borderTopColor:"#3B82F6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),n.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Loading data..."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem",marginBottom:"3rem"},children:[n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"16px",padding:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[n.jsx(Ls,{size:28,color:"#D4AF37"}),n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"NHL 2025-26 Season"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Total Bets"}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)"},children:r.nhl.totalBets})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Win Rate"}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:r.nhl.winRate>=52?"#10B981":"var(--color-text-primary)"},children:[r.nhl.winRate,"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Total Profit"}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:r.nhl.totalProfit>=0?"#10B981":"#EF4444"},children:[r.nhl.totalProfit>=0?"+":"",r.nhl.totalProfit,"u"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"ROI"}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:r.nhl.roi>=0?"#10B981":"#EF4444"},children:[r.nhl.roi>=0?"+":"",r.nhl.roi,"%"]})]})]})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"16px",padding:"2rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[n.jsx(Ls,{size:28,color:"#3B82F6"}),n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",margin:0},children:"CBB 2025-26 Season"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Total Bets"}),n.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)"},children:r.cbb.totalBets})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Win Rate"}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:r.cbb.winRate>=52?"#10B981":"var(--color-text-primary)"},children:[r.cbb.winRate,"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"Total Profit"}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:r.cbb.totalProfit>=0?"#10B981":"#EF4444"},children:[r.cbb.totalProfit>=0?"+":"",r.cbb.totalProfit,"u"]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.813rem",color:"var(--color-text-muted)",marginBottom:"0.25rem"},children:"ROI"}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:r.cbb.roi>=0?"#10B981":"#EF4444"},children:[r.cbb.roi>=0?"+":"",r.cbb.roi,"%"]})]})]})]})]}),n.jsxs("div",{style:{background:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"1.5rem"},children:"Download Historical Picks"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.jsxs("a",{href:"/data/nhl-picks-completed.csv",download:!0,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",background:"rgba(212, 175, 55, 0.05)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"12px",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(212, 175, 55, 0.1)",c.currentTarget.style.transform="translateX(4px)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(212, 175, 55, 0.05)",c.currentTarget.style.transform="translateX(0)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"NHL Picks CSV"}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"All completed NHL picks with results, profit/loss, and grades"})]}),n.jsx(Vg,{size:24,color:"#D4AF37"})]}),n.jsxs("a",{href:"/data/cbb-picks-completed.csv",download:!0,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(59, 130, 246, 0.1)",c.currentTarget.style.transform="translateX(4px)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(59, 130, 246, 0.05)",c.currentTarget.style.transform="translateX(0)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"College Basketball Picks CSV"}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"All completed CBB picks with results, profit/loss, and grades"})]}),n.jsx(Vg,{size:24,color:"#3B82F6"})]}),n.jsxs("a",{href:"/data/season-stats.json",download:!0,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",background:"rgba(255, 255, 255, 0.03)",border:"1px solid var(--color-border)",borderRadius:"12px",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.05)",c.currentTarget.style.transform="translateX(4px)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.03)",c.currentTarget.style.transform="translateX(0)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"Season Stats JSON"}),n.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Machine-readable season statistics for both sports"})]}),n.jsx(Vg,{size:24,color:"#94A3B8"})]})]})]}),n.jsx("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1.5rem"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[n.jsx(o0,{size:24,color:"#10B981",style:{flexShrink:0,marginTop:"0.25rem"}}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#10B981",marginBottom:"0.5rem"},children:"Full Transparency Guarantee"}),n.jsx("p",{style:{fontSize:"0.938rem",color:"var(--color-text-secondary)",lineHeight:1.6,margin:0},children:"Every pick stays in our database forever. We never delete losses or cherry-pick results. These CSV files are updated weekly and include every completed bet with full profit/loss tracking. This is our commitment to honest, transparent sports betting analysis."})]})]})})]})}),n.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})};function bW(){const r=new Date,e=-5,t=r.getTime()+r.getTimezoneOffset()*6e4;return new Date(t+36e5*e).toISOString().split("T")[0]}function vW(){const{user:r}=ls(),[e,t]=O.useState(null),[i,o]=O.useState(!0),[l,c]=O.useState(null),[u,h]=O.useState(bW());O.useEffect(()=>{r&&m()},[r,u]);async function m(){o(!0);try{const T=$r(St,"socialContent",u),E=await Vs(T);E.exists()?t(E.data()):t(null)}catch(T){console.error("Failed to load content:",T)}o(!1)}const f=(T,E)=>{navigator.clipboard.writeText(T),c(E),setTimeout(()=>c(null),2e3)},x=()=>{const T=e.morningPicks.twitterThread.join(`

---

`);f(T,"twitter-thread")},b=()=>{const T=`${e.morningPicks.redditTitle}

${e.morningPicks.redditBody}`;f(T,"reddit-full")};if(!r)return n.jsxs("div",{style:{maxWidth:"600px",margin:"4rem auto",padding:"2rem",textAlign:"center"},children:[n.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:" Admin Access Required"}),n.jsx("p",{style:{color:"#666"},children:"Please sign in to access this page."})]});if(!["kolnitd12@gmail.com","dalekolnitys@gmail.com","dale@nhlsavant.com"].includes(r.email))return n.jsxs("div",{style:{maxWidth:"600px",margin:"4rem auto",padding:"2rem",textAlign:"center"},children:[n.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:" Unauthorized"}),n.jsx("p",{style:{color:"#666"},children:"This page is restricted to admin users only."}),n.jsxs("p",{style:{color:"#999",marginTop:"1rem",fontSize:"0.875rem"},children:["Signed in as: ",r.email]})]});if(i)return n.jsx("div",{style:{maxWidth:"1200px",margin:"2rem auto",padding:"2rem"},children:n.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[n.jsx(Gg,{style:{width:"3rem",height:"3rem",color:"#6366f1",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{marginTop:"1rem",color:"#666"},children:"Loading content..."})]})});if(!e)return n.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto",padding:"2rem"},children:[n.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[n.jsx("input",{type:"date",value:u,onChange:T=>h(T.target.value),style:{padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}}),n.jsxs("button",{onClick:m,style:{padding:"0.5rem 1rem",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Gg,{style:{width:"1rem",height:"1rem"}}),"Refresh"]})]}),n.jsxs("div",{style:{textAlign:"center",padding:"4rem",background:"#f9fafb",borderRadius:"8px"},children:[n.jsx(Wn,{style:{width:"3rem",height:"3rem",color:"#666",margin:"0 auto"}}),n.jsx("h2",{style:{fontSize:"1.5rem",marginTop:"1rem"},children:"No Content Generated Yet"}),n.jsxs("p",{style:{color:"#666",marginTop:"0.5rem"},children:["Content for ",new Date(u).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})," has not been generated."]}),n.jsx("p",{style:{color:"#666",marginTop:"1rem",fontSize:"0.875rem"},children:"Content generates automatically at 8 AM ET (morning) and 11 PM ET (night)."})]})]});const w=({onClick:T,itemId:E,label:A="Copy"})=>n.jsx("button",{onClick:T,style:{padding:"0.5rem 1rem",background:l===E?"#10b981":"#6366f1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",transition:"all 0.2s"},children:l===E?n.jsxs(n.Fragment,{children:[n.jsx(a0,{style:{width:"1rem",height:"1rem"}}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(gx,{style:{width:"1rem",height:"1rem"}}),A]})});return n.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto",padding:"2rem",fontFamily:"system-ui, -apple-system, sans-serif"},children:[n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",marginBottom:"0.5rem"},children:" Social Media Content"}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",color:"#666"},children:[n.jsx("span",{children:new Date(u).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),e.morningPicks&&n.jsxs("span",{style:{fontSize:"0.875rem"},children:["Generated: ",new Date(e.morningPicks.generatedAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[n.jsx("input",{type:"date",value:u,onChange:T=>h(T.target.value),style:{padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}}),n.jsxs("button",{onClick:m,style:{padding:"0.5rem 1rem",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Gg,{style:{width:"1rem",height:"1rem"}}),"Refresh"]})]}),e.morningPicks&&n.jsxs("div",{style:{marginBottom:"3rem"},children:[n.jsxs("div",{style:{background:"linear-gradient(to right, #6366f1, #8b5cf6)",padding:"1rem",borderRadius:"8px 8px 0 0",color:"white"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(jw,{style:{width:"1.25rem",height:"1.25rem"}}),n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:"Morning Picks - Twitter Thread"})]}),n.jsxs("p",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:[e.morningPicks.pickCount," picks | Top: ",e.morningPicks.topPickTeam," (+",e.morningPicks.topPickEV,"% EV)"]})]}),n.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"1.5rem"},children:[n.jsx("div",{style:{marginBottom:"1rem"},children:e.morningPicks.twitterThread.map((T,E)=>n.jsxs("div",{style:{marginBottom:"1.5rem",borderLeft:"3px solid #1DA1F2",paddingLeft:"1rem",background:"#f9fafb",padding:"1rem",borderRadius:"4px"},children:[n.jsxs("div",{style:{fontSize:"0.75rem",color:"#6366f1",fontWeight:"bold",marginBottom:"0.5rem"},children:["Tweet ",E+1,"/",e.morningPicks.twitterThread.length]}),n.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"0.9rem",lineHeight:"1.5",margin:0},children:T})]},E))}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsx(w,{onClick:x,itemId:"twitter-thread",label:"Copy Full Thread"}),n.jsx(w,{onClick:()=>f(e.morningPicks.twitterThread[0],"twitter-first"),itemId:"twitter-first",label:"Copy First Tweet"})]})]})]}),e.morningPicks?.replyTemplates&&n.jsxs("div",{style:{marginBottom:"3rem"},children:[n.jsxs("div",{style:{background:"#1DA1F2",padding:"1rem",borderRadius:"8px 8px 0 0",color:"white"},children:[n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:" Reply/Quote Templates"}),n.jsx("p",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:"For extending reach throughout the day"})]}),n.jsx("div",{style:{background:"white",border:"1px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"1.5rem"},children:Object.entries(e.morningPicks.replyTemplates).map(([T,E])=>n.jsxs("div",{style:{marginBottom:"1rem",background:"#f9fafb",padding:"1rem",borderRadius:"4px"},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#6366f1",marginBottom:"0.5rem",textTransform:"capitalize"},children:T.replace(/([A-Z])/g," $1").trim()}),n.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"0.9rem",lineHeight:"1.5",margin:"0 0 0.75rem 0"},children:E}),n.jsx(w,{onClick:()=>f(E,`reply-${T}`),itemId:`reply-${T}`,label:"Copy"})]},T))})]}),e.morningPicks&&n.jsxs("div",{style:{marginBottom:"3rem"},children:[n.jsxs("div",{style:{background:"#FF4500",padding:"1rem",borderRadius:"8px 8px 0 0",color:"white"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(ww,{style:{width:"1.25rem",height:"1.25rem"}}),n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:"Morning Picks - Reddit Post"})]}),n.jsx("p",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:"Post to r/sportsbook"})]}),n.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"1.5rem"},children:[n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.875rem",color:"#666"},children:"Title:"}),n.jsx("div",{style:{background:"#f9fafb",padding:"0.75rem",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:e.morningPicks.redditTitle}),n.jsx(w,{onClick:()=>f(e.morningPicks.redditTitle,"reddit-title"),itemId:"reddit-title",label:"Copy Title"})]}),n.jsxs("div",{style:{marginTop:"1.5rem"},children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.875rem",color:"#666"},children:"Body:"}),n.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"4px",marginBottom:"1rem",maxHeight:"400px",overflow:"auto"},children:n.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"0.85rem",lineHeight:"1.6",margin:0},children:e.morningPicks.redditBody})}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsx(w,{onClick:()=>f(e.morningPicks.redditBody,"reddit-body"),itemId:"reddit-body",label:"Copy Body"}),n.jsx(w,{onClick:b,itemId:"reddit-full",label:"Copy Title + Body"})]})]})]})]}),e.morningPicks?.perplexityQA&&n.jsxs("div",{style:{marginBottom:"3rem"},children:[n.jsxs("div",{style:{background:"#20808d",padding:"1rem",borderRadius:"8px 8px 0 0",color:"white"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(fx,{style:{width:"1.25rem",height:"1.25rem"}}),n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:"Perplexity Q&A"})]}),n.jsx("p",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:"For LLM citations - post as Reddit comment or Perplexity page"})]}),n.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"1.5rem"},children:[n.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"4px",marginBottom:"1rem"},children:n.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"0.9rem",lineHeight:"1.6",margin:0},children:e.morningPicks.perplexityQA})}),n.jsx(w,{onClick:()=>f(e.morningPicks.perplexityQA,"perplexity"),itemId:"perplexity",label:"Copy Q&A"})]})]}),e.nightResults&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginTop:"3rem",marginBottom:"3rem",borderTop:"2px solid #e5e7eb",paddingTop:"3rem"},children:[n.jsxs("div",{style:{background:"linear-gradient(to right, #1f2937, #374151)",padding:"1rem",borderRadius:"8px 8px 0 0",color:"white"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(jw,{style:{width:"1.25rem",height:"1.25rem"}}),n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:"Night Results - Twitter Thread"})]}),n.jsxs("p",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:[e.nightResults.todayRecord," | ",e.nightResults.todayProfit>=0?"+":"",e.nightResults.todayProfit,"u | ",e.nightResults.todayROI,"% ROI"]})]}),n.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"1.5rem"},children:[n.jsx("div",{style:{marginBottom:"1rem"},children:e.nightResults.twitterThread.map((T,E)=>n.jsxs("div",{style:{marginBottom:"1.5rem",borderLeft:"3px solid #1f2937",paddingLeft:"1rem",background:"#f9fafb",padding:"1rem",borderRadius:"4px"},children:[n.jsxs("div",{style:{fontSize:"0.75rem",color:"#1f2937",fontWeight:"bold",marginBottom:"0.5rem"},children:["Tweet ",E+1,"/",e.nightResults.twitterThread.length]}),n.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"0.9rem",lineHeight:"1.5",margin:0},children:T})]},E))}),n.jsx(w,{onClick:()=>f(e.nightResults.twitterThread.join(`

---

`),"night-twitter"),itemId:"night-twitter",label:"Copy Full Thread"})]})]}),n.jsxs("div",{style:{marginBottom:"3rem"},children:[n.jsx("div",{style:{background:"#FF4500",padding:"1rem",borderRadius:"8px 8px 0 0",color:"white"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(ww,{style:{width:"1.25rem",height:"1.25rem"}}),n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:"Night Results - Reddit Post"})]})}),n.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"1.5rem"},children:[n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.875rem",color:"#666"},children:"Title:"}),n.jsx("div",{style:{background:"#f9fafb",padding:"0.75rem",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:e.nightResults.redditTitle})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.875rem",color:"#666"},children:"Body:"}),n.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"4px",marginBottom:"1rem",maxHeight:"400px",overflow:"auto"},children:n.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"0.85rem",lineHeight:"1.6",margin:0},children:e.nightResults.redditBody})}),n.jsx(w,{onClick:()=>f(`${e.nightResults.redditTitle}

${e.nightResults.redditBody}`,"night-reddit"),itemId:"night-reddit",label:"Copy Title + Body"})]})]})]})]}),e.weeklyRecap&&n.jsxs("div",{style:{marginTop:"3rem",paddingTop:"3rem",borderTop:"2px solid #e5e7eb"},children:[n.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #10b981)",padding:"1rem",borderRadius:"8px 8px 0 0",color:"white"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Wn,{style:{width:"1.25rem",height:"1.25rem"}}),n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:"Weekly Recap (Sunday)"})]}),n.jsxs("p",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:[e.weeklyRecap.weekRecord," | ",e.weeklyRecap.weekProfit>=0?"+":"",e.weeklyRecap.weekProfit,"u"]})]}),n.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"1.5rem"},children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"0.5rem"},children:"Content available - copy buttons work same as above"}),n.jsx(w,{onClick:()=>f(e.weeklyRecap.twitterThread.join(`

---

`),"weekly-twitter"),itemId:"weekly-twitter",label:"Copy Twitter Thread"})]})]}),e.educational&&n.jsxs("div",{style:{marginTop:"3rem",paddingTop:"3rem",borderTop:"2px solid #e5e7eb"},children:[n.jsxs("div",{style:{background:"linear-gradient(to right, #7c3aed, #a855f7)",padding:"1rem",borderRadius:"8px 8px 0 0",color:"white"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx(Wl,{style:{width:"1.25rem",height:"1.25rem"}}),n.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:"Educational Content (Bi-weekly Wednesday)"})]}),n.jsxs("p",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9,textTransform:"capitalize"},children:["Topic: ",e.educational.topic.replace("-"," "),e.educational.perplexityGenerated&&"  Generated with Perplexity AI"]})]}),n.jsx("div",{style:{background:"white",border:"1px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"1.5rem"},children:n.jsx(w,{onClick:()=>f(e.educational.twitterThread.join(`

---

`),"edu-twitter"),itemId:"edu-twitter",label:"Copy Twitter Thread"})})]}),n.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",background:"#f0f9ff",borderRadius:"8px",border:"1px solid #bfdbfe"},children:[n.jsx("h3",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:"1rem",color:"#1e40af"},children:" Daily Workflow"}),n.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.8",color:"#1e3a8a"},children:[n.jsx("p",{children:n.jsx("strong",{children:"Morning (8:30 AM):"})}),n.jsxs("ol",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:[n.jsx("li",{children:"Review generated content on this page (2 min)"}),n.jsx("li",{children:"Copy Twitter thread  paste into Twitter (30 sec)"}),n.jsx("li",{children:"Copy Reddit title + body  paste into r/sportsbook (1 min)"}),n.jsx("li",{children:"Copy Perplexity Q&A  paste as Reddit comment or Perplexity page (30 sec)"})]}),n.jsx("p",{style:{marginTop:"1rem"},children:n.jsx("strong",{children:"Night (11:15 PM):"})}),n.jsxs("ol",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:[n.jsx("li",{children:"Copy Twitter results  post (30 sec)"}),n.jsx("li",{children:"Copy Reddit results  post (1 min)"})]}),n.jsx("p",{style:{marginTop:"1rem",fontWeight:"bold"},children:"Total: ~7 minutes/day"})]})]})]})}function rj({onComplete:r}){const[e,t]=O.useState(!1);return O.useEffect(()=>{const i=setTimeout(()=>t(!0),3e3),o=setTimeout(()=>r(),3500),l=()=>{t(!0),setTimeout(r,500)};return window.addEventListener("keydown",l),window.addEventListener("click",l),window.addEventListener("touchstart",l),()=>{clearTimeout(i),clearTimeout(o),window.removeEventListener("keydown",l),window.removeEventListener("click",l),window.removeEventListener("touchstart",l)}},[r]),n.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9999,background:"linear-gradient(135deg, #1a1f2e 0%, #0f1419 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:e?0:1,transition:"opacity 0.5s ease-out"},children:[n.jsx("div",{style:{fontSize:"3rem",fontWeight:"700",background:"linear-gradient(135deg, #3B82F6 0%, #D4AF37 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"2rem",animation:"fadeInUp 1s ease-out"},children:" NHL SAVANT"}),n.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"3rem",animation:"fadeInUp 1s ease-out 0.3s backwards"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"1.5rem",color:"#60A5FA",fontWeight:"700"},children:"4"}),n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:"GAMES"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"1.5rem",color:"#3B82F6",fontWeight:"700"},children:"4"}),n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:"+EV"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"1.5rem",color:"#D4AF37",fontWeight:"700"},children:"3"}),n.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:"ELITE"})]})]}),n.jsx("div",{style:{width:"200px",height:"2px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"1px",overflow:"hidden",animation:"fadeInUp 1s ease-out 0.6s backwards"},children:n.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #3B82F6 0%, #D4AF37 100%)",animation:"loadingBar 3s ease-out forwards"}})}),n.jsx("div",{style:{position:"absolute",bottom:"2rem",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",fontFamily:"Inter, sans-serif"},children:"Press any key or tap to skip"}),n.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes loadingBar {
          from {
            transform: translateX(-100%);
          }
          to {
            transform: translateX(0);
          }
        }
      `})]})}const t1="nhl_savant_splash_seen";function SW(){const[r,e]=O.useState(!1),[t,i]=O.useState(!0);return O.useEffect(()=>{const c=localStorage.getItem(t1),u=document.createElement("canvas"),m=!!(u.getContext("webgl")||u.getContext("experimental-webgl"));i(m),c||e(!0)},[]),{showSplash:r,hasWebGL:t,dismissSplash:()=>{e(!1),localStorage.setItem(t1,"true"),localStorage.setItem("nhl_savant_splash_date",new Date().toISOString())},forceShowSplash:()=>{localStorage.removeItem(t1),e(!0)}}}const wW=O.lazy(()=>Is(()=>import("./SplashScreen-hZdpTWp6.js"),__vite__mapDeps([4,1,2,3])));function TW(){const{showSplash:r,hasWebGL:e,dismissSplash:t}=SW(),[i,o]=O.useState(null),[l,c]=O.useState(null),[u,h]=O.useState(null),[m,f]=O.useState(null),[x,b]=O.useState(null),[S,w]=O.useState(null),[T,E]=O.useState(null),[A,_]=O.useState(null),[B,I]=O.useState(null),[L,M]=O.useState(!0),[R,j]=O.useState(null),[F,z]=O.useState(!1);return O.useEffect(()=>{if(new URLSearchParams(window.location.search).get("checkout")==="success"){console.log(" Checkout success detected!"),z(!0);const N=new URL(window.location.href);N.searchParams.delete("checkout"),window.history.replaceState({},"",N.pathname+N.hash),setTimeout(()=>z(!1),5e3)}},[]),O.useEffect(()=>{(async()=>{if(!r)try{M(!0),console.log(" Loading schedule data for B2B adjustments...");let V=null;try{const X="/nhl-202526-asplayed.csv";console.log(` Fetching schedule from: ${X}`);const re=await fetch(X);if(!re.ok)throw new Error(`Failed to fetch schedule: ${re.status} ${re.statusText}`);const me=await re.text();V=await new Promise((ke,te)=>{fu.parse(me,{header:!0,skipEmptyLines:!0,complete:le=>{if(le.data&&le.data.length>0){const ve=new cP(le.data);console.log(` Loaded ${Object.keys(ve.gamesByTeam).length} teams into schedule helper`),E(ve),ke(ve)}else te(new Error("No schedule data parsed"))},error:le=>{te(le)}})})}catch(X){console.warn(" Could not load schedule data:",X.message),console.warn("   B2B adjustments will be disabled")}console.log(" Loading team data...");const N=await iP(V);o(N),console.log(" Loading goalie stats from CSV...");const Z=await oP();h(Z),console.log(" Initializing advanced stats analyzer...");const Q=new fP(N);b(Q),console.log(" Initializing edge factor calculator...");const H=new pP(Q);w(H),j(null),console.log(" Loading odds data...");const U=await aP();if(U&&U.moneyText&&U.totalText){const X=uE(U.moneyText,U.totalText);U.todaysGames=mP(X),console.log(` Extracted ${U.todaysGames.length} games for admin`)}console.log(" Loading starting goalie selections...");const K=await sP();f(K),c(U),console.log(" Loading player props and skaters data...");try{const X=await xP(),re=await bP();if(I(re),X&&X.players&&X.players.length>0){console.log(` Found ${X.players.length} player props`);const ke=new yP(N,Z,K).analyzeAllPlayers(X,re);console.log(` Analyzed ${ke.length} player matchups`),_(ke)}else console.warn(" No player props data available")}catch(X){console.warn(" Could not load player props:",X.message),console.warn("   Player matchup analysis will be unavailable")}console.log(" All data loaded successfully")}catch(V){console.error("Failed to load NHL data:",V),j("Failed to load NHL data. Please check if teams.csv is available.")}finally{M(!1)}})()},[r]),r?e?n.jsx(O.Suspense,{fallback:n.jsx(rj,{onComplete:t}),children:n.jsx(wW,{onComplete:t})}):n.jsx(rj,{onComplete:t}):L?n.jsx(L$,{}):R?n.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-md text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Error Loading Data"}),n.jsx("p",{className:"text-gray-300 mb-6",children:R}),n.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-yellow-400 text-gray-900 font-bold rounded hover:bg-yellow-300 transition",children:"Retry"})]})}):i?n.jsx(N$,{children:n.jsxs(X_,{children:[F&&n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:9999,background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",padding:"1rem",textAlign:"center",boxShadow:"0 4px 20px rgba(16, 185, 129, 0.4)",animation:"slideDown 0.3s ease-out"},children:[n.jsx("div",{style:{fontWeight:"700",fontSize:"1.125rem",marginBottom:"0.25rem"},children:" Welcome to NHL Savant!"}),n.jsx("div",{style:{opacity:.9,fontSize:"0.875rem"},children:"Your subscription is now active. Refreshing your access..."})]}),n.jsx(jW,{dataProcessor:i,oddsData:l,startingGoalies:m,goalieData:u,statsAnalyzer:x,edgeFactorCalc:S,playerMatchups:A,skatersData:B,loading:L,error:R})]})}):n.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:n.jsx("div",{className:"text-center",children:n.jsx("h1",{className:"text-2xl font-bold text-gray-300",children:"No Data Available"})})})}function jW({dataProcessor:r,oddsData:e,startingGoalies:t,goalieData:i,statsAnalyzer:o,edgeFactorCalc:l,playerMatchups:c,skatersData:u,loading:h,error:m}){const f=nj(),x=O.useRef(Date.now());return O.useEffect(()=>{eP()},[]),O.useEffect(()=>{const b=rP(f.pathname);return QD(b),x.current=Date.now(),()=>{const S=Math.floor((Date.now()-x.current)/1e3);S>3&&ZD(b,S)}},[f.pathname]),n.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"var(--color-background)"},children:[n.jsx(WB,{}),n.jsx("main",{children:n.jsxs(Q_,{children:[n.jsx(_r,{path:"/",element:n.jsx(I$,{dataProcessor:r,oddsData:e,startingGoalies:t,goalieData:i,statsAnalyzer:o,edgeFactorCalc:l})}),n.jsx(_r,{path:"/my-picks",element:n.jsx(eV,{})}),n.jsx(_r,{path:"/top-scorers",element:n.jsx(cV,{playerMatchups:c,dataProcessor:r})}),n.jsx(_r,{path:"/basketball",element:n.jsx(cW,{})}),n.jsx(_r,{path:"/basketball/mapping-audit",element:n.jsx(uW,{})}),n.jsx(_r,{path:"/dashboard",element:n.jsx(IN,{dataProcessor:r,loading:h,error:m})}),n.jsx(_r,{path:"/matchup-insights",element:n.jsx(H$,{dataProcessor:r,goalieData:i,todaysGames:e?.todaysGames||[]})}),n.jsx(_r,{path:"/methodology",element:n.jsx(M$,{})}),n.jsx(_r,{path:"/inspector",element:n.jsx(FN,{dataProcessor:r})}),n.jsx(_r,{path:"/performance",element:n.jsx(O$,{})}),n.jsx(_r,{path:"/pricing",element:n.jsx(iV,{})}),n.jsx(_r,{path:"/account",element:n.jsx(oV,{})}),n.jsx(_r,{path:"/faq",element:n.jsx(gW,{})}),n.jsx(_r,{path:"/todays-picks",element:n.jsx(mW,{})}),n.jsx(_r,{path:"/guides/pdo-regression-nhl-betting",element:n.jsx(fW,{})}),n.jsx(_r,{path:"/guides/how-to-find-ev-nhl-picks",element:n.jsx(pW,{})}),n.jsx(_r,{path:"/guides/how-to-find-ev-college-basketball-picks",element:n.jsx(yW,{})}),n.jsx(_r,{path:"/data",element:n.jsx(xW,{})}),n.jsx(_r,{path:"/admin/social-content",element:n.jsx(vW,{})}),n.jsx(_r,{path:"/disclaimer",element:n.jsx(V$,{})})]})}),n.jsx($$,{})]})}function AW(r){const e=r.prediction;if(!e)return null;const t=e.dratingsAwayScore,i=e.dratingsHomeScore,o=e.haslametricsAwayScore,l=e.haslametricsHomeScore;if(!t||!i||!o||!l)return null;const c=r.bet?.pick,u=r.game?.awayTeam;r.game?.homeTeam;const h=c===u,m=h?t-i:i-t,f=h?o-l:l-o,x=m>0&&f>0,b=m>0!=f>0,S=m+f;return{drMargin:Math.round(m*10)/10,hsMargin:Math.round(f*10)/10,convictionScore:Math.round(S*10)/10,modelsAgree:x,modelsSplit:b,drPicksOurPick:m>0,hsPicksOurPick:f>0}}async function kW(){console.log(`
 `),console.log("   BASKETBALL MODEL ANALYSIS - D-Ratings vs Haslametrics"),console.log(`
`);const r=Jr(mr(St,"basketball_bets")),t=(await ci(r)).docs.map(E=>({id:E.id,...E.data()})),i=t.filter(E=>E.result?.outcome&&(E.result.outcome==="WIN"||E.result.outcome==="LOSS"));console.log(` Total bets: ${t.length}`),console.log(` Graded (W/L): ${i.length}
`);const o={aligned:{bets:[],wins:0,losses:0,profit:0,risked:0},split:{bets:[],wins:0,losses:0,profit:0,risked:0},noData:{bets:[],wins:0,losses:0,profit:0,risked:0},dratings:{correctPicks:0,wrongPicks:0},haslametrics:{correctPicks:0,wrongPicks:0},highConviction:{bets:[],wins:0,losses:0,profit:0},medConviction:{bets:[],wins:0,losses:0,profit:0},lowConviction:{bets:[],wins:0,losses:0,profit:0},negConviction:{bets:[],wins:0,losses:0,profit:0}};for(const E of i){const A=AW(E),_=E.result.outcome==="WIN",B=E.result.profit||0,I=E.result?.units||E.prediction?.unitSize||1;if(!A){o.noData.bets.push(E),_?o.noData.wins++:o.noData.losses++,o.noData.profit+=B,o.noData.risked+=I;continue}A.modelsAgree?(o.aligned.bets.push(E),_?o.aligned.wins++:o.aligned.losses++,o.aligned.profit+=B,o.aligned.risked+=I):(o.split.bets.push(E),_?o.split.wins++:o.split.losses++,o.split.profit+=B,o.split.risked+=I),A.drPicksOurPick&&_||!A.drPicksOurPick&&!_?o.dratings.correctPicks++:o.dratings.wrongPicks++,A.hsPicksOurPick&&_||!A.hsPicksOurPick&&!_?o.haslametrics.correctPicks++:o.haslametrics.wrongPicks++,A.convictionScore>=10?(o.highConviction.bets.push(E),_?o.highConviction.wins++:o.highConviction.losses++,o.highConviction.profit+=B):A.convictionScore>=5?(o.medConviction.bets.push(E),_?o.medConviction.wins++:o.medConviction.losses++,o.medConviction.profit+=B):A.convictionScore>=0?(o.lowConviction.bets.push(E),_?o.lowConviction.wins++:o.lowConviction.losses++,o.lowConviction.profit+=B):(o.negConviction.bets.push(E),_?o.negConviction.wins++:o.negConviction.losses++,o.negConviction.profit+=B)}console.log(""),console.log("    MODEL AGREEMENT ANALYSIS"),console.log(`
`);const l=o.aligned.wins+o.aligned.losses,c=l>0?o.aligned.wins/l*100:0,u=o.aligned.risked>0?o.aligned.profit/o.aligned.risked*100:0,h=o.split.wins+o.split.losses,m=h>0?o.split.wins/h*100:0,f=o.split.risked>0?o.split.profit/o.split.risked*100:0;console.log(` BOTH MODELS ALIGNED (${l} bets):`),console.log(`   W-L: ${o.aligned.wins}-${o.aligned.losses}`),console.log(`   Win Rate: ${c.toFixed(1)}%`),console.log(`   Profit: ${o.aligned.profit>0?"+":""}${o.aligned.profit.toFixed(2)}u`),console.log(`   ROI: ${u>0?"+":""}${u.toFixed(1)}%
`),console.log(` MODELS SPLIT (${h} bets):`),console.log(`   W-L: ${o.split.wins}-${o.split.losses}`),console.log(`   Win Rate: ${m.toFixed(1)}%`),console.log(`   Profit: ${o.split.profit>0?"+":""}${o.split.profit.toFixed(2)}u`),console.log(`   ROI: ${f>0?"+":""}${f.toFixed(1)}%
`),o.noData.bets.length>0&&(console.log(` NO MODEL DATA (${o.noData.bets.length} bets):`),console.log(`   W-L: ${o.noData.wins}-${o.noData.losses}
`)),console.log(""),console.log("    INDIVIDUAL MODEL ACCURACY"),console.log(`
`);const x=o.dratings.correctPicks+o.dratings.wrongPicks,b=x>0?o.dratings.correctPicks/x*100:0,S=o.haslametrics.correctPicks+o.haslametrics.wrongPicks,w=S>0?o.haslametrics.correctPicks/S*100:0;console.log(" D-RATINGS (80% weight):"),console.log(`   Correct: ${o.dratings.correctPicks}/${x}`),console.log(`   Accuracy: ${b.toFixed(1)}%
`),console.log(" HASLAMETRICS (20% weight):"),console.log(`   Correct: ${o.haslametrics.correctPicks}/${S}`),console.log(`   Accuracy: ${w.toFixed(1)}%
`),console.log(""),console.log("    CONVICTION SCORE BREAKDOWN"),console.log(`
`);const T=(E,A)=>{const _=A.wins+A.losses,B=_>0?A.wins/_*100:0;console.log(`${E} (${_} bets):`),console.log(`   W-L: ${A.wins}-${A.losses}`),console.log(`   Win Rate: ${B.toFixed(1)}%`),console.log(`   Profit: ${A.profit>0?"+":""}${A.profit.toFixed(2)}u
`)};return T(" HIGH CONVICTION (10 pts)",o.highConviction),T(" MEDIUM CONVICTION (5-9.9 pts)",o.medConviction),T(" LOW CONVICTION (0-4.9 pts)",o.lowConviction),T(" NEGATIVE CONVICTION (<0 pts)",o.negConviction),console.log(""),console.log("    RECOMMENDATIONS"),console.log(`
`),c>m+5&&(console.log(" ALIGNED picks significantly outperform SPLIT picks"),console.log(`   Consider: Higher unit sizing when models agree
`)),b>w+3?(console.log(" D-RATINGS is more accurate than Haslametrics"),console.log(`   Edge: +${(b-w).toFixed(1)}%
`)):w>b+3?(console.log(" HASLAMETRICS is more accurate than D-Ratings"),console.log(`   Edge: +${(w-b).toFixed(1)}%
`)):(console.log(" Both models have similar accuracy"),console.log(`   80/20 blend appears appropriate
`)),{summary:{totalGraded:i.length,aligned:{count:l,winRate:c,roi:u},split:{count:h,winRate:m,roi:f}},models:{dratings:{accuracy:b,correct:o.dratings.correctPicks,total:x},haslametrics:{accuracy:w,correct:o.haslametrics.correctPicks,total:S}},conviction:{high:{count:o.highConviction.bets.length,winRate:o.highConviction.wins/(o.highConviction.wins+o.highConviction.losses)*100||0},medium:{count:o.medConviction.bets.length,winRate:o.medConviction.wins/(o.medConviction.wins+o.medConviction.losses)*100||0},low:{count:o.lowConviction.bets.length,winRate:o.lowConviction.wins/(o.lowConviction.wins+o.lowConviction.losses)*100||0},negative:{count:o.negConviction.bets.length,winRate:o.negConviction.wins/(o.negConviction.wins+o.negConviction.losses)*100||0}}}}window.analyzeBasketballModels=kW;s8.createRoot(document.getElementById("root")).render(n.jsx(O.StrictMode,{children:n.jsx(TW,{})}));export{St as a,Fs as b,$r as d,Vs as g,n as j,dc as s};
