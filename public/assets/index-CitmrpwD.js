import{r as rS,a as sS,g as aS,b as ce,u as oS,L as qu,R as lS,H as cS,c as uS,d as wl}from"./vendor-CAbTx9Lg.js";import{r as hS}from"./utils-CpJM9g8Q.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Xf={exports:{}},Rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function dS(){if(cv)return Rl;cv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:c}}return Rl.Fragment=e,Rl.jsx=n,Rl.jsxs=n,Rl}var uv;function fS(){return uv||(uv=1,Xf.exports=dS()),Xf.exports}var d=fS(),Qf={exports:{}},Il={},Yf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function mS(){return hv||(hv=1,(function(s){function e(X,se){var de=X.length;X.push(se);e:for(;0<de;){var ke=de-1>>>1,ze=X[ke];if(0<o(ze,se))X[ke]=se,X[de]=ze,de=ke;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var se=X[0],de=X.pop();if(de!==se){X[0]=de;e:for(var ke=0,ze=X.length,ut=ze>>>1;ke<ut;){var qe=2*(ke+1)-1,Re=X[qe],Ze=qe+1,Wt=X[Ze];if(0>o(Re,de))Ze<ze&&0>o(Wt,Re)?(X[ke]=Wt,X[Ze]=de,ke=Ze):(X[ke]=Re,X[qe]=de,ke=qe);else if(Ze<ze&&0>o(Wt,de))X[ke]=Wt,X[Ze]=de,ke=Ze;else break e}}return se}function o(X,se){var de=X.sortIndex-se.sortIndex;return de!==0?de:X.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var p=[],v=[],T=1,S=null,b=3,w=!1,z=!1,V=!1,F=!1,Y=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function ne(X){for(var se=n(v);se!==null;){if(se.callback===null)r(v);else if(se.startTime<=X)r(v),se.sortIndex=se.expirationTime,e(p,se);else break;se=n(v)}}function re(X){if(V=!1,ne(X),!z)if(n(p)!==null)z=!0,ye||(ye=!0,M());else{var se=n(v);se!==null&&ot(re,se.startTime-X)}}var ye=!1,P=-1,E=5,D=-1;function N(){return F?!0:!(s.unstable_now()-D<E)}function C(){if(F=!1,ye){var X=s.unstable_now();D=X;var se=!0;try{e:{z=!1,V&&(V=!1,q(P),P=-1),w=!0;var de=b;try{t:{for(ne(X),S=n(p);S!==null&&!(S.expirationTime>X&&N());){var ke=S.callback;if(typeof ke=="function"){S.callback=null,b=S.priorityLevel;var ze=ke(S.expirationTime<=X);if(X=s.unstable_now(),typeof ze=="function"){S.callback=ze,ne(X),se=!0;break t}S===n(p)&&r(p),ne(X)}else r(p);S=n(p)}if(S!==null)se=!0;else{var ut=n(v);ut!==null&&ot(re,ut.startTime-X),se=!1}}break e}finally{S=null,b=de,w=!1}se=void 0}}finally{se?M():ye=!1}}}var M;if(typeof ee=="function")M=function(){ee(C)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Ee=j.port2;j.port1.onmessage=C,M=function(){Ee.postMessage(null)}}else M=function(){Y(C,0)};function ot(X,se){P=Y(function(){X(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(X){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var de=b;b=se;try{return X()}finally{b=de}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(X,se){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=b;b=X;try{return se()}finally{b=de}},s.unstable_scheduleCallback=function(X,se,de){var ke=s.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?ke+de:ke):de=ke,X){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=de+ze,X={id:T++,callback:se,priorityLevel:X,startTime:de,expirationTime:ze,sortIndex:-1},de>ke?(X.sortIndex=de,e(v,X),n(p)===null&&X===n(v)&&(V?(q(P),P=-1):V=!0,ot(re,de-ke))):(X.sortIndex=ze,e(p,X),z||w||(z=!0,ye||(ye=!0,M()))),X},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(X){var se=b;return function(){var de=b;b=se;try{return X.apply(this,arguments)}finally{b=de}}}})(Zf)),Zf}var dv;function gS(){return dv||(dv=1,Yf.exports=mS()),Yf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function pS(){if(fv)return Il;fv=1;var s=gS(),e=rS(),n=sS();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function v(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),t;if(m===l)return p(f),i;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var _=!1,A=f.child;A;){if(A===a){_=!0,a=f,l=m;break}if(A===l){_=!0,l=f,a=m;break}A=A.sibling}if(!_){for(A=m.child;A;){if(A===a){_=!0,a=m,l=f;break}if(A===l){_=!0,l=m,a=f;break}A=A.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function Ee(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case Y:return"Profiler";case F:return"StrictMode";case re:return"Suspense";case ye:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ee:return t.displayName||"Context";case q:return(t._context.displayName||"Context")+".Consumer";case ne:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return i=t.displayName||null,i!==null?i:Ee(t.type)||"Memo";case E:i=t._payload,t=t._init;try{return Ee(t(i))}catch{}}return null}var ot=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},ke=[],ze=-1;function ut(t){return{current:t}}function qe(t){0>ze||(t.current=ke[ze],ke[ze]=null,ze--)}function Re(t,i){ze++,ke[ze]=t.current,t.current=i}var Ze=ut(null),Wt=ut(null),Zt=ut(null),Mn=ut(null);function Ni(t,i){switch(Re(Zt,i),Re(Wt,t),Re(Ze,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Ny(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Ny(i),t=Oy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}qe(Ze),Re(Ze,t)}function Oi(){qe(Ze),qe(Wt),qe(Zt)}function bo(t){t.memoizedState!==null&&Re(Mn,t);var i=Ze.current,a=Oy(i,t.type);i!==a&&(Re(Wt,t),Re(Ze,a))}function ra(t){Wt.current===t&&(qe(Ze),qe(Wt)),Mn.current===t&&(qe(Mn),Tl._currentValue=de)}var sa,aa;function Jn(t){if(sa===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);sa=i&&i[1]||"",aa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sa+t+aa}var To=!1;function ds(t,i){if(!t||To)return"";To=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(W){var H=W}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(W){H=W}t.call(Z.prototype)}}else{try{throw Error()}catch(W){H=W}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(W){if(W&&H&&typeof W.stack=="string")return[W.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],A=m[1];if(_&&A){var O=_.split(`
`),G=A.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===G.length)for(l=O.length-1,f=G.length-1;1<=l&&0<=f&&O[l]!==G[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==G[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==G[f]){var K=`
`+O[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=f);break}}}finally{To=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Jn(a):""}function So(t,i){switch(t.tag){case 26:case 27:case 5:return Jn(t.type);case 16:return Jn("Lazy");case 13:return t.child!==i&&i!==null?Jn("Suspense Fallback"):Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return ds(t.type,!1);case 11:return ds(t.type.render,!1);case 1:return ds(t.type,!0);case 31:return Jn("Activity");default:return""}}function Eo(t){try{var i="",a=null;do i+=So(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var yt=Object.prototype.hasOwnProperty,Ct=s.unstable_scheduleCallback,cr=s.unstable_cancelCallback,Qh=s.unstable_shouldYield,oc=s.unstable_requestPaint,Jt=s.unstable_now,fs=s.unstable_getCurrentPriorityLevel,Ao=s.unstable_ImmediatePriority,wo=s.unstable_UserBlockingPriority,ur=s.unstable_NormalPriority,Yh=s.unstable_LowPriority,lc=s.unstable_IdlePriority,cc=s.log,uc=s.unstable_setDisableYieldValue,zn=null,Vt=null;function Tn(t){if(typeof cc=="function"&&uc(t),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(zn,t)}catch{}}var ht=Math.clz32?Math.clz32:dc,hc=Math.log,oa=Math.LN2;function dc(t){return t>>>=0,t===0?32:31-(hc(t)/oa|0)|0}var ei=256,ms=262144,vt=4194304;function ti(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ni(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~m,l!==0?f=ti(l):(_&=A,_!==0?f=ti(_):a||(a=A&~t,a!==0&&(f=ti(a))))):(A=l&~m,A!==0?f=ti(A):_!==0?f=ti(_):a||(a=l&~t,a!==0&&(f=ti(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function Vn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Zh(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fc(){var t=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),t}function ii(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function gs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jh(t,i,a,l,f,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,O=t.expirationTimes,G=t.hiddenUpdates;for(a=_&~a;0<a;){var K=31-ht(a),Z=1<<K;A[K]=0,O[K]=-1;var H=G[K];if(H!==null)for(G[K]=null,K=0;K<H.length;K++){var W=H[K];W!==null&&(W.lane&=-536870913)}a&=~Z}l!==0&&ps(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~i))}function ps(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-ht(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ro(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-ht(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function Io(t,i){var a=i&-i;return a=(a&42)!==0?1:ys(a),(a&(t.suspendedLanes|i))!==0?0:a}function ys(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mc(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:nv(t.type))}function Ln(t,i){var a=se.p;try{return se.p=t,i()}finally{se.p=a}}var Bn=Math.random().toString(36).slice(2),_t="__reactFiber$"+Bn,Ot="__reactProps$"+Bn,ri="__reactContainer$"+Bn,la="__reactEvents$"+Bn,ed="__reactListeners$"+Bn,gc="__reactHandles$"+Bn,pc="__reactResources$"+Bn,si="__reactMarker$"+Bn;function ca(t){delete t[_t],delete t[Ot],delete t[la],delete t[ed],delete t[gc]}function ai(t){var i=t[_t];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ri]||a[_t]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=By(t);t!==null;){if(a=t[_t])return a;t=By(t)}return i}t=a,a=t.parentNode}return null}function Sn(t){if(t=t[_t]||t[ri]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function dn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function oi(t){var i=t[pc];return i||(i=t[pc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(t){t[si]=!0}var Co=new Set,Do={};function li(t,i){ci(t,i),ci(t+"Capture",i)}function ci(t,i){for(Do[t]=i,t=0;t<i.length;t++)Co.add(i[t])}var jo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),No={},Oo={};function yc(t){return yt.call(Oo,t)?!0:yt.call(No,t)?!1:jo.test(t)?Oo[t]=!0:(No[t]=!0,!1)}function ua(t,i,a){if(yc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function fn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function bt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Pt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Po(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ge(t){if(!t._valueTracker){var i=hr(t)?"checked":"value";t._valueTracker=Po(t,i,""+t[i])}}function vs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=hr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ui(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var _s=/[\n"\\]/g;function nn(t){return t.replace(_s,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ha(t,i,a,l,f,m,_,A){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Pt(i)):t.value!==""+Pt(i)&&(t.value=""+Pt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?ko(t,_,Pt(i)):a!=null?ko(t,_,Pt(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Pt(A):t.removeAttribute("name")}function vc(t,i,a,l,f,m,_,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Ge(t);return}a=a!=null?""+Pt(a):"",i=i!=null?""+Pt(i):a,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Ge(t)}function ko(t,i,a){i==="number"&&ui(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function dr(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Pt(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function _c(t,i,a){if(i!=null&&(i=""+Pt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Pt(a):""}function fr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ot(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Pt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ge(t)}function rn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||xc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function zo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Mo(t,f,l)}else for(var m in i)i.hasOwnProperty(m)&&Mo(t,m,i[m])}function da(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fa(t){return mr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Fn(){}var Vo=null;function En(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gr=null,hi=null;function xs(t){var i=Sn(t);if(i&&(t=i.stateNode)){var a=t[Ot]||null;e:switch(t=i.stateNode,i.type){case"input":if(ha(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+nn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[Ot]||null;if(!f)throw Error(r(90));ha(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&vs(l)}break e;case"textarea":_c(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&dr(t,!!a.multiple,i,!1)}}}var ma=!1;function pr(t,i,a){if(ma)return t(i,a);ma=!0;try{var l=t(i);return l}finally{if(ma=!1,(gr!==null||hi!==null)&&(mu(),gr&&(i=gr,t=hi,hi=gr=null,xs(i),t)))for(i=0;i<t.length;i++)xs(t[i])}}function Un(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Ot]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bs=!1;if(An)try{var We={};Object.defineProperty(We,"passive",{get:function(){bs=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{bs=!1}var di=null,Lo=null,Ts=null;function Bo(){if(Ts)return Ts;var t,i=Lo,a=i.length,l,f="value"in di?di.value:di.textContent,m=f.length;for(t=0;t<a&&i[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===f[m-l];l++);return Ts=f.slice(t,1<l?1-l:void 0)}function Ss(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ki(){return!0}function Gn(){return!1}function Lt(t){function i(a,l,f,m,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ki:Gn,this.isPropagationStopped=Gn,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),i}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fi=Lt(Mi),yr=S({},Mi,{view:0,detail:0}),Fo=Lt(yr),vr,ga,mi,pa=S({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mi&&(mi&&t.type==="mousemove"?(vr=t.screenX-mi.screenX,ga=t.screenY-mi.screenY):ga=vr=0,mi=t),vr)},movementY:function(t){return"movementY"in t?t.movementY:ga}}),Uo=Lt(pa),Es=S({},pa,{dataTransfer:0}),Tc=Lt(Es),Sc=S({},yr,{relatedTarget:0}),As=Lt(Sc),Go=S({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ec=Lt(Go),ya=S({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ac=Lt(ya),wc=S({},Mi,{data:0}),gi=Lt(wc),Rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ic={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Cc[t])?!!i[t]:!1}function _r(){return Dc}var en=S({},yr,{key:function(t){if(t.key){var i=Rc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ss(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ic[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(t){return t.type==="keypress"?Ss(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ss(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jc=Lt(en),Nc=S({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zi=Lt(Nc),u=S({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r}),y=Lt(u),x=S({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Lt(x),B=S({},pa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Lt(B),ie=S({},Mi,{newState:0,oldState:0}),be=Lt(ie),dt=[9,13,27,32],Be=An&&"CompositionEvent"in window,rt=null;An&&"documentMode"in document&&(rt=document.documentMode);var wn=An&&"TextEvent"in window&&!rt,pi=An&&(!Be||rt&&8<rt&&11>=rt),Hn=" ",$n=!1;function ws(t,i){switch(t){case"keyup":return dt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function va(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _a=!1;function Ib(t,i){switch(t){case"compositionend":return va(i);case"keypress":return i.which!==32?null:($n=!0,Hn);case"textInput":return t=i.data,t===Hn&&$n?null:t;default:return null}}function Cb(t,i){if(_a)return t==="compositionend"||!Be&&ws(t,i)?(t=Bo(),Ts=Lo=di=null,_a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return pi&&i.locale!=="ko"?null:i.data;default:return null}}var Db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Db[t.type]:i==="textarea"}function Hg(t,i,a,l){gr?hi?hi.push(l):hi=[l]:gr=l,i=bu(i,"onChange"),0<i.length&&(a=new fi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Ho=null,$o=null;function jb(t){wy(t,0)}function Oc(t){var i=dn(t);if(vs(i))return t}function $g(t,i){if(t==="change")return i}var qg=!1;if(An){var td;if(An){var nd="oninput"in document;if(!nd){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),nd=typeof Wg.oninput=="function"}td=nd}else td=!1;qg=td&&(!document.documentMode||9<document.documentMode)}function Kg(){Ho&&(Ho.detachEvent("onpropertychange",Xg),$o=Ho=null)}function Xg(t){if(t.propertyName==="value"&&Oc($o)){var i=[];Hg(i,$o,t,En(t)),pr(jb,i)}}function Nb(t,i,a){t==="focusin"?(Kg(),Ho=i,$o=a,Ho.attachEvent("onpropertychange",Xg)):t==="focusout"&&Kg()}function Ob(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oc($o)}function Pb(t,i){if(t==="click")return Oc(i)}function kb(t,i){if(t==="input"||t==="change")return Oc(i)}function Mb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var mn=typeof Object.is=="function"?Object.is:Mb;function qo(t,i){if(mn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!yt.call(i,f)||!mn(t[f],i[f]))return!1}return!0}function Qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yg(t,i){var a=Qg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qg(a)}}function Zg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Zg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Jg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ui(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ui(t.document)}return i}function id(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var zb=An&&"documentMode"in document&&11>=document.documentMode,xa=null,rd=null,Wo=null,sd=!1;function ep(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sd||xa==null||xa!==ui(l)||(l=xa,"selectionStart"in l&&id(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Wo&&qo(Wo,l)||(Wo=l,l=bu(rd,"onSelect"),0<l.length&&(i=new fi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=xa)))}function Rs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ba={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionrun:Rs("Transition","TransitionRun"),transitionstart:Rs("Transition","TransitionStart"),transitioncancel:Rs("Transition","TransitionCancel"),transitionend:Rs("Transition","TransitionEnd")},ad={},tp={};An&&(tp=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function Is(t){if(ad[t])return ad[t];if(!ba[t])return t;var i=ba[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in tp)return ad[t]=i[a];return t}var np=Is("animationend"),ip=Is("animationiteration"),rp=Is("animationstart"),Vb=Is("transitionrun"),Lb=Is("transitionstart"),Bb=Is("transitioncancel"),sp=Is("transitionend"),ap=new Map,od="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");od.push("scrollEnd");function qn(t,i){ap.set(t,i),li(i,[t])}var Pc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Rn=[],Ta=0,ld=0;function kc(){for(var t=Ta,i=ld=Ta=0;i<t;){var a=Rn[i];Rn[i++]=null;var l=Rn[i];Rn[i++]=null;var f=Rn[i];Rn[i++]=null;var m=Rn[i];if(Rn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}m!==0&&op(a,f,m)}}function Mc(t,i,a,l){Rn[Ta++]=t,Rn[Ta++]=i,Rn[Ta++]=a,Rn[Ta++]=l,ld|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function cd(t,i,a,l){return Mc(t,i,a,l),zc(t)}function Cs(t,i){return Mc(t,null,null,i),zc(t)}function op(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&i!==null&&(f=31-ht(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),m):null}function zc(t){if(50<gl)throw gl=0,_f=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Sa={};function Fb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,i,a,l){return new Fb(t,i,a,l)}function ud(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vi(t,i){var a=t.alternate;return a===null?(a=gn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function lp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Vc(t,i,a,l,f,m){var _=0;if(l=t,typeof t=="function")ud(t)&&(_=1);else if(typeof t=="string")_=qT(t,a,Ze.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=gn(31,a,i,f),t.elementType=D,t.lanes=m,t;case V:return Ds(a.children,f,m,i);case F:_=8,f|=24;break;case Y:return t=gn(12,a,i,f|2),t.elementType=Y,t.lanes=m,t;case re:return t=gn(13,a,i,f),t.elementType=re,t.lanes=m,t;case ye:return t=gn(19,a,i,f),t.elementType=ye,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:_=10;break e;case q:_=9;break e;case ne:_=11;break e;case P:_=14;break e;case E:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=gn(_,a,i,f),i.elementType=t,i.type=l,i.lanes=m,i}function Ds(t,i,a,l){return t=gn(7,t,l,i),t.lanes=a,t}function hd(t,i,a){return t=gn(6,t,null,i),t.lanes=a,t}function cp(t){var i=gn(18,null,null,0);return i.stateNode=t,i}function dd(t,i,a){return i=gn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var up=new WeakMap;function In(t,i){if(typeof t=="object"&&t!==null){var a=up.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Eo(i)},up.set(t,i),i)}return{value:t,source:i,stack:Eo(i)}}var Ea=[],Aa=0,Lc=null,Ko=0,Cn=[],Dn=0,xr=null,yi=1,vi="";function Li(t,i){Ea[Aa++]=Ko,Ea[Aa++]=Lc,Lc=t,Ko=i}function hp(t,i,a){Cn[Dn++]=yi,Cn[Dn++]=vi,Cn[Dn++]=xr,xr=t;var l=yi;t=vi;var f=32-ht(l)-1;l&=~(1<<f),a+=1;var m=32-ht(i)+f;if(30<m){var _=f-f%5;m=(l&(1<<_)-1).toString(32),l>>=_,f-=_,yi=1<<32-ht(i)+f|a<<f|l,vi=m+t}else yi=1<<m|a<<f|l,vi=t}function fd(t){t.return!==null&&(Li(t,1),hp(t,1,0))}function md(t){for(;t===Lc;)Lc=Ea[--Aa],Ea[Aa]=null,Ko=Ea[--Aa],Ea[Aa]=null;for(;t===xr;)xr=Cn[--Dn],Cn[Dn]=null,vi=Cn[--Dn],Cn[Dn]=null,yi=Cn[--Dn],Cn[Dn]=null}function dp(t,i){Cn[Dn++]=yi,Cn[Dn++]=vi,Cn[Dn++]=xr,yi=i.id,vi=i.overflow,xr=t}var Bt=null,et=null,Pe=!1,br=null,jn=!1,gd=Error(r(519));function Tr(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xo(In(i,t)),gd}function fp(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[_t]=t,i[Ot]=l,a){case"dialog":we("cancel",i),we("close",i);break;case"iframe":case"object":case"embed":we("load",i);break;case"video":case"audio":for(a=0;a<yl.length;a++)we(yl[a],i);break;case"source":we("error",i);break;case"img":case"image":case"link":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"input":we("invalid",i),vc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":we("invalid",i);break;case"textarea":we("invalid",i),fr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Dy(i.textContent,a)?(l.popover!=null&&(we("beforetoggle",i),we("toggle",i)),l.onScroll!=null&&we("scroll",i),l.onScrollEnd!=null&&we("scrollend",i),l.onClick!=null&&(i.onclick=Fn),i=!0):i=!1,i||Tr(t,!0)}function mp(t){for(Bt=t.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:Bt=Bt.return}}function wa(t){if(t!==Bt)return!1;if(!Pe)return mp(t),Pe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Pf(t.type,t.memoizedProps)),a=!a),a&&et&&Tr(t),mp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));et=Ly(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));et=Ly(t)}else i===27?(i=et,Mr(t.type)?(t=Lf,Lf=null,et=t):et=i):et=Bt?On(t.stateNode.nextSibling):null;return!0}function js(){et=Bt=null,Pe=!1}function pd(){var t=br;return t!==null&&(ln===null?ln=t:ln.push.apply(ln,t),br=null),t}function Xo(t){br===null?br=[t]:br.push(t)}var yd=ut(null),Ns=null,Bi=null;function Sr(t,i,a){Re(yd,i._currentValue),i._currentValue=a}function Fi(t){t._currentValue=yd.current,qe(yd)}function vd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function _d(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var O=0;O<i.length;O++)if(A.context===i[O]){m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),vd(m.return,a,t),l||(_=null);break e}m=A.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),vd(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ra(t,i,a,l){t=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var A=f.type;mn(f.pendingProps.value,_.value)||(t!==null?t.push(A):t=[A])}}else if(f===Mn.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Tl):t=[Tl])}f=f.return}t!==null&&_d(i,t,a,l),i.flags|=262144}function Bc(t){for(t=t.firstContext;t!==null;){if(!mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Os(t){Ns=t,Bi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return gp(Ns,t)}function Fc(t,i){return Ns===null&&Os(t),gp(t,i)}function gp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Bi===null){if(t===null)throw Error(r(308));Bi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Bi=Bi.next=i;return a}var Ub=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Gb=s.unstable_scheduleCallback,Hb=s.unstable_NormalPriority,Tt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xd(){return{controller:new Ub,data:new Map,refCount:0}}function Qo(t){t.refCount--,t.refCount===0&&Gb(Hb,function(){t.controller.abort()})}var Yo=null,bd=0,Ia=0,Ca=null;function $b(t,i){if(Yo===null){var a=Yo=[];bd=0,Ia=Af(),Ca={status:"pending",value:void 0,then:function(l){a.push(l)}}}return bd++,i.then(pp,pp),i}function pp(){if(--bd===0&&Yo!==null){Ca!==null&&(Ca.status="fulfilled");var t=Yo;Yo=null,Ia=0,Ca=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function qb(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var yp=X.S;X.S=function(t,i){ey=Jt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&$b(t,i),yp!==null&&yp(t,i)};var Ps=ut(null);function Td(){var t=Ps.current;return t!==null?t:Ye.pooledCache}function Uc(t,i){i===null?Re(Ps,Ps.current):Re(Ps,i.pool)}function vp(){var t=Td();return t===null?null:{parent:Tt._currentValue,pool:t}}var Da=Error(r(460)),Sd=Error(r(474)),Gc=Error(r(542)),Hc={then:function(){}};function _p(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Fn,Fn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Tp(t),t;default:if(typeof i.status=="string")i.then(Fn,Fn);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Tp(t),t}throw Ms=i,Da}}function ks(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ms=a,Da):a}}var Ms=null;function bp(){if(Ms===null)throw Error(r(459));var t=Ms;return Ms=null,t}function Tp(t){if(t===Da||t===Gc)throw Error(r(483))}var ja=null,Zo=0;function $c(t){var i=Zo;return Zo+=1,ja===null&&(ja=[]),xp(ja,t,i)}function Jo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function qc(t,i){throw i.$$typeof===b?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Sp(t){function i(L,k){if(t){var U=L.deletions;U===null?(L.deletions=[k],L.flags|=16):U.push(k)}}function a(L,k){if(!t)return null;for(;k!==null;)i(L,k),k=k.sibling;return null}function l(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function f(L,k){return L=Vi(L,k),L.index=0,L.sibling=null,L}function m(L,k,U){return L.index=U,t?(U=L.alternate,U!==null?(U=U.index,U<k?(L.flags|=67108866,k):U):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function _(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function A(L,k,U,Q){return k===null||k.tag!==6?(k=hd(U,L.mode,Q),k.return=L,k):(k=f(k,U),k.return=L,k)}function O(L,k,U,Q){var fe=U.type;return fe===V?K(L,k,U.props.children,Q,U.key):k!==null&&(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===E&&ks(fe)===k.type)?(k=f(k,U.props),Jo(k,U),k.return=L,k):(k=Vc(U.type,U.key,U.props,null,L.mode,Q),Jo(k,U),k.return=L,k)}function G(L,k,U,Q){return k===null||k.tag!==4||k.stateNode.containerInfo!==U.containerInfo||k.stateNode.implementation!==U.implementation?(k=dd(U,L.mode,Q),k.return=L,k):(k=f(k,U.children||[]),k.return=L,k)}function K(L,k,U,Q,fe){return k===null||k.tag!==7?(k=Ds(U,L.mode,Q,fe),k.return=L,k):(k=f(k,U),k.return=L,k)}function Z(L,k,U){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=hd(""+k,L.mode,U),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return U=Vc(k.type,k.key,k.props,null,L.mode,U),Jo(U,k),U.return=L,U;case z:return k=dd(k,L.mode,U),k.return=L,k;case E:return k=ks(k),Z(L,k,U)}if(ot(k)||M(k))return k=Ds(k,L.mode,U,null),k.return=L,k;if(typeof k.then=="function")return Z(L,$c(k),U);if(k.$$typeof===ee)return Z(L,Fc(L,k),U);qc(L,k)}return null}function H(L,k,U,Q){var fe=k!==null?k.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return fe!==null?null:A(L,k,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case w:return U.key===fe?O(L,k,U,Q):null;case z:return U.key===fe?G(L,k,U,Q):null;case E:return U=ks(U),H(L,k,U,Q)}if(ot(U)||M(U))return fe!==null?null:K(L,k,U,Q,null);if(typeof U.then=="function")return H(L,k,$c(U),Q);if(U.$$typeof===ee)return H(L,k,Fc(L,U),Q);qc(L,U)}return null}function W(L,k,U,Q,fe){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return L=L.get(U)||null,A(k,L,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return L=L.get(Q.key===null?U:Q.key)||null,O(k,L,Q,fe);case z:return L=L.get(Q.key===null?U:Q.key)||null,G(k,L,Q,fe);case E:return Q=ks(Q),W(L,k,U,Q,fe)}if(ot(Q)||M(Q))return L=L.get(U)||null,K(k,L,Q,fe,null);if(typeof Q.then=="function")return W(L,k,U,$c(Q),fe);if(Q.$$typeof===ee)return W(L,k,U,Fc(k,Q),fe);qc(k,Q)}return null}function le(L,k,U,Q){for(var fe=null,Ve=null,he=k,Se=k=0,Ce=null;he!==null&&Se<U.length;Se++){he.index>Se?(Ce=he,he=null):Ce=he.sibling;var Le=H(L,he,U[Se],Q);if(Le===null){he===null&&(he=Ce);break}t&&he&&Le.alternate===null&&i(L,he),k=m(Le,k,Se),Ve===null?fe=Le:Ve.sibling=Le,Ve=Le,he=Ce}if(Se===U.length)return a(L,he),Pe&&Li(L,Se),fe;if(he===null){for(;Se<U.length;Se++)he=Z(L,U[Se],Q),he!==null&&(k=m(he,k,Se),Ve===null?fe=he:Ve.sibling=he,Ve=he);return Pe&&Li(L,Se),fe}for(he=l(he);Se<U.length;Se++)Ce=W(he,L,Se,U[Se],Q),Ce!==null&&(t&&Ce.alternate!==null&&he.delete(Ce.key===null?Se:Ce.key),k=m(Ce,k,Se),Ve===null?fe=Ce:Ve.sibling=Ce,Ve=Ce);return t&&he.forEach(function(Fr){return i(L,Fr)}),Pe&&Li(L,Se),fe}function ge(L,k,U,Q){if(U==null)throw Error(r(151));for(var fe=null,Ve=null,he=k,Se=k=0,Ce=null,Le=U.next();he!==null&&!Le.done;Se++,Le=U.next()){he.index>Se?(Ce=he,he=null):Ce=he.sibling;var Fr=H(L,he,Le.value,Q);if(Fr===null){he===null&&(he=Ce);break}t&&he&&Fr.alternate===null&&i(L,he),k=m(Fr,k,Se),Ve===null?fe=Fr:Ve.sibling=Fr,Ve=Fr,he=Ce}if(Le.done)return a(L,he),Pe&&Li(L,Se),fe;if(he===null){for(;!Le.done;Se++,Le=U.next())Le=Z(L,Le.value,Q),Le!==null&&(k=m(Le,k,Se),Ve===null?fe=Le:Ve.sibling=Le,Ve=Le);return Pe&&Li(L,Se),fe}for(he=l(he);!Le.done;Se++,Le=U.next())Le=W(he,L,Se,Le.value,Q),Le!==null&&(t&&Le.alternate!==null&&he.delete(Le.key===null?Se:Le.key),k=m(Le,k,Se),Ve===null?fe=Le:Ve.sibling=Le,Ve=Le);return t&&he.forEach(function(iS){return i(L,iS)}),Pe&&Li(L,Se),fe}function Qe(L,k,U,Q){if(typeof U=="object"&&U!==null&&U.type===V&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case w:e:{for(var fe=U.key;k!==null;){if(k.key===fe){if(fe=U.type,fe===V){if(k.tag===7){a(L,k.sibling),Q=f(k,U.props.children),Q.return=L,L=Q;break e}}else if(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===E&&ks(fe)===k.type){a(L,k.sibling),Q=f(k,U.props),Jo(Q,U),Q.return=L,L=Q;break e}a(L,k);break}else i(L,k);k=k.sibling}U.type===V?(Q=Ds(U.props.children,L.mode,Q,U.key),Q.return=L,L=Q):(Q=Vc(U.type,U.key,U.props,null,L.mode,Q),Jo(Q,U),Q.return=L,L=Q)}return _(L);case z:e:{for(fe=U.key;k!==null;){if(k.key===fe)if(k.tag===4&&k.stateNode.containerInfo===U.containerInfo&&k.stateNode.implementation===U.implementation){a(L,k.sibling),Q=f(k,U.children||[]),Q.return=L,L=Q;break e}else{a(L,k);break}else i(L,k);k=k.sibling}Q=dd(U,L.mode,Q),Q.return=L,L=Q}return _(L);case E:return U=ks(U),Qe(L,k,U,Q)}if(ot(U))return le(L,k,U,Q);if(M(U)){if(fe=M(U),typeof fe!="function")throw Error(r(150));return U=fe.call(U),ge(L,k,U,Q)}if(typeof U.then=="function")return Qe(L,k,$c(U),Q);if(U.$$typeof===ee)return Qe(L,k,Fc(L,U),Q);qc(L,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,k!==null&&k.tag===6?(a(L,k.sibling),Q=f(k,U),Q.return=L,L=Q):(a(L,k),Q=hd(U,L.mode,Q),Q.return=L,L=Q),_(L)):a(L,k)}return function(L,k,U,Q){try{Zo=0;var fe=Qe(L,k,U,Q);return ja=null,fe}catch(he){if(he===Da||he===Gc)throw he;var Ve=gn(29,he,null,L.mode);return Ve.lanes=Q,Ve.return=L,Ve}finally{}}}var zs=Sp(!0),Ep=Sp(!1),Er=!1;function Ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ad(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ar(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Fe&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=zc(t),op(t,null,a),i}return Mc(t,l,i,a),zc(t)}function el(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ro(t,a)}}function wd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Rd=!1;function tl(){if(Rd){var t=Ca;if(t!==null)throw t}}function nl(t,i,a,l){Rd=!1;var f=t.updateQueue;Er=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var O=A,G=O.next;O.next=null,_===null?m=G:_.next=G,_=O;var K=t.alternate;K!==null&&(K=K.updateQueue,A=K.lastBaseUpdate,A!==_&&(A===null?K.firstBaseUpdate=G:A.next=G,K.lastBaseUpdate=O))}if(m!==null){var Z=f.baseState;_=0,K=G=O=null,A=m;do{var H=A.lane&-536870913,W=H!==A.lane;if(W?(Ie&H)===H:(l&H)===H){H!==0&&H===Ia&&(Rd=!0),K!==null&&(K=K.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var le=t,ge=A;H=i;var Qe=a;switch(ge.tag){case 1:if(le=ge.payload,typeof le=="function"){Z=le.call(Qe,Z,H);break e}Z=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ge.payload,H=typeof le=="function"?le.call(Qe,Z,H):le,H==null)break e;Z=S({},Z,H);break e;case 2:Er=!0}}H=A.callback,H!==null&&(t.flags|=64,W&&(t.flags|=8192),W=f.callbacks,W===null?f.callbacks=[H]:W.push(H))}else W={lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},K===null?(G=K=W,O=Z):K=K.next=W,_|=H;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;W=A,A=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);K===null&&(O=Z),f.baseState=O,f.firstBaseUpdate=G,f.lastBaseUpdate=K,m===null&&(f.shared.lanes=0),jr|=_,t.lanes=_,t.memoizedState=Z}}function Ap(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function wp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ap(a[t],i)}var Na=ut(null),Wc=ut(0);function Rp(t,i){t=Qi,Re(Wc,t),Re(Na,i),Qi=t|i.baseLanes}function Id(){Re(Wc,Qi),Re(Na,Na.current)}function Cd(){Qi=Wc.current,qe(Na),qe(Wc)}var pn=ut(null),Nn=null;function Rr(t){var i=t.alternate;Re(ft,ft.current&1),Re(pn,t),Nn===null&&(i===null||Na.current!==null||i.memoizedState!==null)&&(Nn=t)}function Dd(t){Re(ft,ft.current),Re(pn,t),Nn===null&&(Nn=t)}function Ip(t){t.tag===22?(Re(ft,ft.current),Re(pn,t),Nn===null&&(Nn=t)):Ir()}function Ir(){Re(ft,ft.current),Re(pn,pn.current)}function yn(t){qe(pn),Nn===t&&(Nn=null),qe(ft)}var ft=ut(0);function Kc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||zf(a)||Vf(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ui=0,Te=null,Ke=null,St=null,Xc=!1,Oa=!1,Vs=!1,Qc=0,il=0,Pa=null,Wb=0;function lt(){throw Error(r(321))}function jd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!mn(t[a],i[a]))return!1;return!0}function Nd(t,i,a,l,f,m){return Ui=m,Te=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=t===null||t.memoizedState===null?h0:Wd,Vs=!1,m=a(l,f),Vs=!1,Oa&&(m=Dp(i,a,l,f)),Cp(t),m}function Cp(t){X.H=al;var i=Ke!==null&&Ke.next!==null;if(Ui=0,St=Ke=Te=null,Xc=!1,il=0,Pa=null,i)throw Error(r(300));t===null||Et||(t=t.dependencies,t!==null&&Bc(t)&&(Et=!0))}function Dp(t,i,a,l){Te=t;var f=0;do{if(Oa&&(Pa=null),il=0,Oa=!1,25<=f)throw Error(r(301));if(f+=1,St=Ke=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=d0,m=i(a,l)}while(Oa);return m}function Kb(){var t=X.H,i=t.useState()[0];return i=typeof i.then=="function"?rl(i):i,t=t.useState()[0],(Ke!==null?Ke.memoizedState:null)!==t&&(Te.flags|=1024),i}function Od(){var t=Qc!==0;return Qc=0,t}function Pd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function kd(t){if(Xc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Xc=!1}Ui=0,St=Ke=Te=null,Oa=!1,il=Qc=0,Pa=null}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Te.memoizedState=St=t:St=St.next=t,St}function mt(){if(Ke===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var i=St===null?Te.memoizedState:St.next;if(i!==null)St=i,Ke=t;else{if(t===null)throw Te.alternate===null?Error(r(467)):Error(r(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},St===null?Te.memoizedState=St=t:St=St.next=t}return St}function Yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(t){var i=il;return il+=1,Pa===null&&(Pa=[]),t=xp(Pa,t,i),i=Te,(St===null?i.memoizedState:St.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?h0:Wd),t}function Zc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return rl(t);if(t.$$typeof===ee)return Ft(t)}throw Error(r(438,String(t)))}function Md(t){var i=null,a=Te.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Te.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Yc(),Te.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=N;return i.index++,a}function Gi(t,i){return typeof i=="function"?i(t):i}function Jc(t){var i=mt();return zd(i,Ke,t)}function zd(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}i.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{i=f.next;var A=_=null,O=null,G=i,K=!1;do{var Z=G.lane&-536870913;if(Z!==G.lane?(Ie&Z)===Z:(Ui&Z)===Z){var H=G.revertLane;if(H===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),Z===Ia&&(K=!0);else if((Ui&H)===H){G=G.next,H===Ia&&(K=!0);continue}else Z={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(A=O=Z,_=m):O=O.next=Z,Te.lanes|=H,jr|=H;Z=G.action,Vs&&a(m,Z),m=G.hasEagerState?G.eagerState:a(m,Z)}else H={lane:Z,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(A=O=H,_=m):O=O.next=H,Te.lanes|=Z,jr|=Z;G=G.next}while(G!==null&&G!==i);if(O===null?_=m:O.next=A,!mn(m,t.memoizedState)&&(Et=!0,K&&(a=Ca,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=O,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Vd(t){var i=mt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);mn(m,i.memoizedState)||(Et=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,l]}function jp(t,i,a){var l=Te,f=mt(),m=Pe;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!mn((Ke||f).memoizedState,a);if(_&&(f.memoizedState=a,Et=!0),f=f.queue,Fd(Pp.bind(null,l,f,t),[t]),f.getSnapshot!==i||_||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,ka(9,{destroy:void 0},Op.bind(null,l,f,a,i),null),Ye===null)throw Error(r(349));m||(Ui&127)!==0||Np(l,i,a)}return a}function Np(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Te.updateQueue,i===null?(i=Yc(),Te.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Op(t,i,a,l){i.value=a,i.getSnapshot=l,kp(i)&&Mp(t)}function Pp(t,i,a){return a(function(){kp(i)&&Mp(t)})}function kp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!mn(t,a)}catch{return!0}}function Mp(t){var i=Cs(t,2);i!==null&&cn(i,t,2)}function Ld(t){var i=tn();if(typeof t=="function"){var a=t;if(t=a(),Vs){Tn(!0);try{a()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:t},i}function zp(t,i,a,l){return t.baseState=a,zd(t,Ke,typeof l=="function"?l:Gi)}function Xb(t,i,a,l,f){if(nu(t))throw Error(r(485));if(t=i.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};X.T!==null?a(!0):m.isTransition=!1,l(m),a=i.pending,a===null?(m.next=i.pending=m,Vp(i,m)):(m.next=a.next,i.pending=a.next=m)}}function Vp(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var m=X.T,_={};X.T=_;try{var A=a(f,l),O=X.S;O!==null&&O(_,A),Lp(t,i,A)}catch(G){Bd(t,i,G)}finally{m!==null&&_.types!==null&&(m.types=_.types),X.T=m}}else try{m=a(f,l),Lp(t,i,m)}catch(G){Bd(t,i,G)}}function Lp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Bp(t,i,l)},function(l){return Bd(t,i,l)}):Bp(t,i,a)}function Bp(t,i,a){i.status="fulfilled",i.value=a,Fp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Vp(t,a)))}function Bd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Fp(i),i=i.next;while(i!==l)}t.action=null}function Fp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Up(t,i){return i}function Gp(t,i){if(Pe){var a=Ye.formState;if(a!==null){e:{var l=Te;if(Pe){if(et){t:{for(var f=et,m=jn;f.nodeType!==8;){if(!m){f=null;break t}if(f=On(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){et=On(f.nextSibling),l=f.data==="F!";break e}}Tr(l)}l=!1}l&&(i=a[0])}}return a=tn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:i},a.queue=l,a=l0.bind(null,Te,l),l.dispatch=a,l=Ld(!1),m=qd.bind(null,Te,!1,l.queue),l=tn(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=Xb.bind(null,Te,f,m,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function Hp(t){var i=mt();return $p(i,Ke,t)}function $p(t,i,a){if(i=zd(t,i,Up)[0],t=Jc(Gi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=rl(i)}catch(_){throw _===Da?Gc:_}else l=i;i=mt();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(Te.flags|=2048,ka(9,{destroy:void 0},Qb.bind(null,f,a),null)),[l,m,t]}function Qb(t,i){t.action=i}function qp(t){var i=mt(),a=Ke;if(a!==null)return $p(i,a,t);mt(),i=i.memoizedState,a=mt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ka(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Te.updateQueue,i===null&&(i=Yc(),Te.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Wp(){return mt().memoizedState}function eu(t,i,a,l){var f=tn();Te.flags|=t,f.memoizedState=ka(1|i,{destroy:void 0},a,l===void 0?null:l)}function tu(t,i,a,l){var f=mt();l=l===void 0?null:l;var m=f.memoizedState.inst;Ke!==null&&l!==null&&jd(l,Ke.memoizedState.deps)?f.memoizedState=ka(i,m,a,l):(Te.flags|=t,f.memoizedState=ka(1|i,m,a,l))}function Kp(t,i){eu(8390656,8,t,i)}function Fd(t,i){tu(2048,8,t,i)}function Yb(t){Te.flags|=4;var i=Te.updateQueue;if(i===null)i=Yc(),Te.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Xp(t){var i=mt().memoizedState;return Yb({ref:i,nextImpl:t}),function(){if((Fe&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Qp(t,i){return tu(4,2,t,i)}function Yp(t,i){return tu(4,4,t,i)}function Zp(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Jp(t,i,a){a=a!=null?a.concat([t]):null,tu(4,4,Zp.bind(null,i,t),a)}function Ud(){}function e0(t,i){var a=mt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&jd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function t0(t,i){var a=mt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&jd(i,l[1]))return l[0];if(l=t(),Vs){Tn(!0);try{t()}finally{Tn(!1)}}return a.memoizedState=[l,i],l}function Gd(t,i,a){return a===void 0||(Ui&1073741824)!==0&&(Ie&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=ny(),Te.lanes|=t,jr|=t,a)}function n0(t,i,a,l){return mn(a,i)?a:Na.current!==null?(t=Gd(t,a,l),mn(t,i)||(Et=!0),t):(Ui&42)===0||(Ui&1073741824)!==0&&(Ie&261930)===0?(Et=!0,t.memoizedState=a):(t=ny(),Te.lanes|=t,jr|=t,i)}function i0(t,i,a,l,f){var m=se.p;se.p=m!==0&&8>m?m:8;var _=X.T,A={};X.T=A,qd(t,!1,i,a);try{var O=f(),G=X.S;if(G!==null&&G(A,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var K=qb(O,l);sl(t,i,K,xn(t))}else sl(t,i,l,xn(t))}catch(Z){sl(t,i,{then:function(){},status:"rejected",reason:Z},xn())}finally{se.p=m,_!==null&&A.types!==null&&(_.types=A.types),X.T=_}}function Zb(){}function Hd(t,i,a,l){if(t.tag!==5)throw Error(r(476));var f=r0(t).queue;i0(t,f,i,de,a===null?Zb:function(){return s0(t),a(l)})}function r0(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:de},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function s0(t){var i=r0(t);i.next===null&&(i=t.alternate.memoizedState),sl(t,i.next.queue,{},xn())}function $d(){return Ft(Tl)}function a0(){return mt().memoizedState}function o0(){return mt().memoizedState}function Jb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();t=Ar(a);var l=wr(i,t,a);l!==null&&(cn(l,i,a),el(l,i,a)),i={cache:xd()},t.payload=i;return}i=i.return}}function eT(t,i,a){var l=xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},nu(t)?c0(i,a):(a=cd(t,i,a,l),a!==null&&(cn(a,t,l),u0(a,i,l)))}function l0(t,i,a){var l=xn();sl(t,i,a,l)}function sl(t,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(nu(t))c0(i,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,A=m(_,a);if(f.hasEagerState=!0,f.eagerState=A,mn(A,_))return Mc(t,i,f,0),Ye===null&&kc(),!1}catch{}finally{}if(a=cd(t,i,f,l),a!==null)return cn(a,t,l),u0(a,i,l),!0}return!1}function qd(t,i,a,l){if(l={lane:2,revertLane:Af(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},nu(t)){if(i)throw Error(r(479))}else i=cd(t,a,l,2),i!==null&&cn(i,t,2)}function nu(t){var i=t.alternate;return t===Te||i!==null&&i===Te}function c0(t,i){Oa=Xc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function u0(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ro(t,a)}}var al={readContext:Ft,use:Zc,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};al.useEffectEvent=lt;var h0={readContext:Ft,use:Zc,useCallback:function(t,i){return tn().memoizedState=[t,i===void 0?null:i],t},useContext:Ft,useEffect:Kp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,eu(4194308,4,Zp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return eu(4194308,4,t,i)},useInsertionEffect:function(t,i){eu(4,2,t,i)},useMemo:function(t,i){var a=tn();i=i===void 0?null:i;var l=t();if(Vs){Tn(!0);try{t()}finally{Tn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=tn();if(a!==void 0){var f=a(i);if(Vs){Tn(!0);try{a(i)}finally{Tn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=eT.bind(null,Te,t),[l.memoizedState,t]},useRef:function(t){var i=tn();return t={current:t},i.memoizedState=t},useState:function(t){t=Ld(t);var i=t.queue,a=l0.bind(null,Te,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Ud,useDeferredValue:function(t,i){var a=tn();return Gd(a,t,i)},useTransition:function(){var t=Ld(!1);return t=i0.bind(null,Te,t.queue,!0,!1),tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Te,f=tn();if(Pe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Ye===null)throw Error(r(349));(Ie&127)!==0||Np(l,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,Kp(Pp.bind(null,l,m,t),[t]),l.flags|=2048,ka(9,{destroy:void 0},Op.bind(null,l,m,a,i),null),a},useId:function(){var t=tn(),i=Ye.identifierPrefix;if(Pe){var a=vi,l=yi;a=(l&~(1<<32-ht(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Qc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Wb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:$d,useFormState:Gp,useActionState:Gp,useOptimistic:function(t){var i=tn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=qd.bind(null,Te,!0,a),a.dispatch=i,[t,i]},useMemoCache:Md,useCacheRefresh:function(){return tn().memoizedState=Jb.bind(null,Te)},useEffectEvent:function(t){var i=tn(),a={impl:t};return i.memoizedState=a,function(){if((Fe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Wd={readContext:Ft,use:Zc,useCallback:e0,useContext:Ft,useEffect:Fd,useImperativeHandle:Jp,useInsertionEffect:Qp,useLayoutEffect:Yp,useMemo:t0,useReducer:Jc,useRef:Wp,useState:function(){return Jc(Gi)},useDebugValue:Ud,useDeferredValue:function(t,i){var a=mt();return n0(a,Ke.memoizedState,t,i)},useTransition:function(){var t=Jc(Gi)[0],i=mt().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:jp,useId:a0,useHostTransitionStatus:$d,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,i){var a=mt();return zp(a,Ke,t,i)},useMemoCache:Md,useCacheRefresh:o0};Wd.useEffectEvent=Xp;var d0={readContext:Ft,use:Zc,useCallback:e0,useContext:Ft,useEffect:Fd,useImperativeHandle:Jp,useInsertionEffect:Qp,useLayoutEffect:Yp,useMemo:t0,useReducer:Vd,useRef:Wp,useState:function(){return Vd(Gi)},useDebugValue:Ud,useDeferredValue:function(t,i){var a=mt();return Ke===null?Gd(a,t,i):n0(a,Ke.memoizedState,t,i)},useTransition:function(){var t=Vd(Gi)[0],i=mt().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:jp,useId:a0,useHostTransitionStatus:$d,useFormState:qp,useActionState:qp,useOptimistic:function(t,i){var a=mt();return Ke!==null?zp(a,Ke,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Md,useCacheRefresh:o0};d0.useEffectEvent=Xp;function Kd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Xd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=xn(),f=Ar(l);f.payload=i,a!=null&&(f.callback=a),i=wr(t,f,l),i!==null&&(cn(i,t,l),el(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=xn(),f=Ar(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=wr(t,f,l),i!==null&&(cn(i,t,l),el(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=xn(),l=Ar(a);l.tag=2,i!=null&&(l.callback=i),i=wr(t,l,a),i!==null&&(cn(i,t,a),el(i,t,a))}};function f0(t,i,a,l,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):i.prototype&&i.prototype.isPureReactComponent?!qo(a,l)||!qo(f,m):!0}function m0(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Xd.enqueueReplaceState(i,i.state,null)}function Ls(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function g0(t){Pc(t)}function p0(t){console.error(t)}function y0(t){Pc(t)}function iu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function v0(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qd(t,i,a){return a=Ar(a),a.tag=3,a.payload={element:null},a.callback=function(){iu(t,i)},a}function _0(t){return t=Ar(t),t.tag=3,t}function x0(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){v0(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){v0(i,a,l),typeof f!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function tT(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ra(i,a,f,!0),a=pn.current,a!==null){switch(a.tag){case 31:case 13:return Nn===null?gu():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Hc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Tf(t,l,f)),!1;case 22:return a.flags|=65536,l===Hc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Tf(t,l,f)),!1}throw Error(r(435,a.tag))}return Tf(t,l,f),gu(),!1}if(Pe)return i=pn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==gd&&(t=Error(r(422),{cause:l}),Xo(In(t,a)))):(l!==gd&&(i=Error(r(423),{cause:l}),Xo(In(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=In(l,a),f=Qd(t.stateNode,l,f),wd(t,f),ct!==4&&(ct=2)),!1;var m=Error(r(520),{cause:l});if(m=In(m,a),ml===null?ml=[m]:ml.push(m),ct!==4&&(ct=2),i===null)return!0;l=In(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Qd(a.stateNode,l,t),wd(a,t),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Nr===null||!Nr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=_0(f),x0(f,t,a,l),wd(a,f),!1}a=a.return}while(a!==null);return!1}var Yd=Error(r(461)),Et=!1;function Ut(t,i,a,l){i.child=t===null?Ep(i,null,a,l):zs(i,t.child,a,l)}function b0(t,i,a,l,f){a=a.render;var m=i.ref;if("ref"in l){var _={};for(var A in l)A!=="ref"&&(_[A]=l[A])}else _=l;return Os(i),l=Nd(t,i,a,_,m,f),A=Od(),t!==null&&!Et?(Pd(t,i,f),Hi(t,i,f)):(Pe&&A&&fd(i),i.flags|=1,Ut(t,i,l,f),i.child)}function T0(t,i,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!ud(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,S0(t,i,m,l,f)):(t=Vc(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!af(t,f)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:qo,a(_,l)&&t.ref===i.ref)return Hi(t,i,f)}return i.flags|=1,t=Vi(m,l),t.ref=i.ref,t.return=i,i.child=t}function S0(t,i,a,l,f){if(t!==null){var m=t.memoizedProps;if(qo(m,l)&&t.ref===i.ref)if(Et=!1,i.pendingProps=l=m,af(t,f))(t.flags&131072)!==0&&(Et=!0);else return i.lanes=t.lanes,Hi(t,i,f)}return Zd(t,i,a,l,f)}function E0(t,i,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,i.child=null;return A0(t,i,m,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Uc(i,m!==null?m.cachePool:null),m!==null?Rp(i,m):Id(),Ip(i);else return l=i.lanes=536870912,A0(t,i,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Uc(i,m.cachePool),Rp(i,m),Ir(),i.memoizedState=null):(t!==null&&Uc(i,null),Id(),Ir());return Ut(t,i,f,a),i.child}function ol(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function A0(t,i,a,l,f){var m=Td();return m=m===null?null:{parent:Tt._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},t!==null&&Uc(i,null),Id(),Ip(i),t!==null&&Ra(t,i,l,!0),i.childLanes=f,null}function ru(t,i){return i=au({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function w0(t,i,a){return zs(i,t.child,null,a),t=ru(i,i.pendingProps),t.flags|=2,yn(i),i.memoizedState=null,t}function nT(t,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Pe){if(l.mode==="hidden")return t=ru(i,l),i.lanes=536870912,ol(null,t);if(Dd(i),(t=et)?(t=Vy(t,jn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:xr!==null?{id:yi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},a=cp(t),a.return=i,i.child=a,Bt=i,et=null)):t=null,t===null)throw Tr(i);return i.lanes=536870912,null}return ru(i,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Dd(i),f)if(i.flags&256)i.flags&=-257,i=w0(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Et||Ra(t,i,a,!1),f=(a&t.childLanes)!==0,Et||f){if(l=Ye,l!==null&&(_=Io(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Cs(t,_),cn(l,t,_),Yd;gu(),i=w0(t,i,a)}else t=m.treeContext,et=On(_.nextSibling),Bt=i,Pe=!0,br=null,jn=!1,t!==null&&dp(i,t),i=ru(i,l),i.flags|=4096;return i}return t=Vi(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function su(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Zd(t,i,a,l,f){return Os(i),a=Nd(t,i,a,l,void 0,f),l=Od(),t!==null&&!Et?(Pd(t,i,f),Hi(t,i,f)):(Pe&&l&&fd(i),i.flags|=1,Ut(t,i,a,f),i.child)}function R0(t,i,a,l,f,m){return Os(i),i.updateQueue=null,a=Dp(i,l,a,f),Cp(t),l=Od(),t!==null&&!Et?(Pd(t,i,m),Hi(t,i,m)):(Pe&&l&&fd(i),i.flags|=1,Ut(t,i,a,m),i.child)}function I0(t,i,a,l,f){if(Os(i),i.stateNode===null){var m=Sa,_=a.contextType;typeof _=="object"&&_!==null&&(m=Ft(_)),m=new a(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Xd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},Ed(i),_=a.contextType,m.context=typeof _=="object"&&_!==null?Ft(_):Sa,m.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Kd(i,a,_,l),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Xd.enqueueReplaceState(m,m.state,null),nl(i,l,m,f),tl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){m=i.stateNode;var A=i.memoizedProps,O=Ls(a,A);m.props=O;var G=m.context,K=a.contextType;_=Sa,typeof K=="object"&&K!==null&&(_=Ft(K));var Z=a.getDerivedStateFromProps;K=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,K||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||G!==_)&&m0(i,m,l,_),Er=!1;var H=i.memoizedState;m.state=H,nl(i,l,m,f),tl(),G=i.memoizedState,A||H!==G||Er?(typeof Z=="function"&&(Kd(i,a,Z,l),G=i.memoizedState),(O=Er||f0(i,a,O,l,H,G,_))?(K||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),m.props=l,m.state=G,m.context=_,l=O):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,Ad(t,i),_=i.memoizedProps,K=Ls(a,_),m.props=K,Z=i.pendingProps,H=m.context,G=a.contextType,O=Sa,typeof G=="object"&&G!==null&&(O=Ft(G)),A=a.getDerivedStateFromProps,(G=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==Z||H!==O)&&m0(i,m,l,O),Er=!1,H=i.memoizedState,m.state=H,nl(i,l,m,f),tl();var W=i.memoizedState;_!==Z||H!==W||Er||t!==null&&t.dependencies!==null&&Bc(t.dependencies)?(typeof A=="function"&&(Kd(i,a,A,l),W=i.memoizedState),(K=Er||f0(i,a,K,l,H,W,O)||t!==null&&t.dependencies!==null&&Bc(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,W,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,W,O)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=W),m.props=l,m.state=W,m.context=O,l=K):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return m=l,su(t,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&l?(i.child=zs(i,t.child,null,f),i.child=zs(i,null,a,f)):Ut(t,i,a,f),i.memoizedState=m.state,t=i.child):t=Hi(t,i,f),t}function C0(t,i,a,l){return js(),i.flags|=256,Ut(t,i,a,l),i.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ef(t){return{baseLanes:t,cachePool:vp()}}function tf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=_n),t}function D0(t,i,a){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(ft.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Pe){if(f?Rr(i):Ir(),(t=et)?(t=Vy(t,jn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:xr!==null?{id:yi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},a=cp(t),a.return=i,i.child=a,Bt=i,et=null)):t=null,t===null)throw Tr(i);return Vf(t)?i.lanes=32:i.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(Ir(),f=i.mode,A=au({mode:"hidden",children:A},f),l=Ds(l,f,a,null),A.return=i,l.return=i,A.sibling=l,i.child=A,l=i.child,l.memoizedState=ef(a),l.childLanes=tf(t,_,a),i.memoizedState=Jd,ol(null,l)):(Rr(i),nf(i,A))}var O=t.memoizedState;if(O!==null&&(A=O.dehydrated,A!==null)){if(m)i.flags&256?(Rr(i),i.flags&=-257,i=rf(t,i,a)):i.memoizedState!==null?(Ir(),i.child=t.child,i.flags|=128,i=null):(Ir(),A=l.fallback,f=i.mode,l=au({mode:"visible",children:l.children},f),A=Ds(A,f,a,null),A.flags|=2,l.return=i,A.return=i,l.sibling=A,i.child=l,zs(i,t.child,null,a),l=i.child,l.memoizedState=ef(a),l.childLanes=tf(t,_,a),i.memoizedState=Jd,i=ol(null,l));else if(Rr(i),Vf(A)){if(_=A.nextSibling&&A.nextSibling.dataset,_)var G=_.dgst;_=G,l=Error(r(419)),l.stack="",l.digest=_,Xo({value:l,source:null,stack:null}),i=rf(t,i,a)}else if(Et||Ra(t,i,a,!1),_=(a&t.childLanes)!==0,Et||_){if(_=Ye,_!==null&&(l=Io(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Cs(t,l),cn(_,t,l),Yd;zf(A)||gu(),i=rf(t,i,a)}else zf(A)?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,et=On(A.nextSibling),Bt=i,Pe=!0,br=null,jn=!1,t!==null&&dp(i,t),i=nf(i,l.children),i.flags|=4096);return i}return f?(Ir(),A=l.fallback,f=i.mode,O=t.child,G=O.sibling,l=Vi(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,G!==null?A=Vi(G,A):(A=Ds(A,f,a,null),A.flags|=2),A.return=i,l.return=i,l.sibling=A,i.child=l,ol(null,l),l=i.child,A=t.child.memoizedState,A===null?A=ef(a):(f=A.cachePool,f!==null?(O=Tt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=vp(),A={baseLanes:A.baseLanes|a,cachePool:f}),l.memoizedState=A,l.childLanes=tf(t,_,a),i.memoizedState=Jd,ol(t.child,l)):(Rr(i),a=t.child,t=a.sibling,a=Vi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function nf(t,i){return i=au({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function au(t,i){return t=gn(22,t,null,i),t.lanes=0,t}function rf(t,i,a){return zs(i,t.child,null,a),t=nf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function j0(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),vd(t.return,i,a)}function sf(t,i,a,l,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=m)}function N0(t,i,a){var l=i.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var _=ft.current,A=(_&2)!==0;if(A?(_=_&1|2,i.flags|=128):_&=1,Re(ft,_),Ut(t,i,l,a),l=Pe?Ko:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j0(t,a,i);else if(t.tag===19)j0(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&Kc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),sf(i,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&Kc(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}sf(i,!0,a,null,m,l);break;case"together":sf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Hi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),jr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ra(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Vi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Vi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function af(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Bc(t)))}function iT(t,i,a){switch(i.tag){case 3:Ni(i,i.stateNode.containerInfo),Sr(i,Tt,t.memoizedState.cache),js();break;case 27:case 5:bo(i);break;case 4:Ni(i,i.stateNode.containerInfo);break;case 10:Sr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Dd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Rr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?D0(t,i,a):(Rr(i),t=Hi(t,i,a),t!==null?t.sibling:null);Rr(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ra(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return N0(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Re(ft,ft.current),l)break;return null;case 22:return i.lanes=0,E0(t,i,a,i.pendingProps);case 24:Sr(i,Tt,t.memoizedState.cache)}return Hi(t,i,a)}function O0(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Et=!0;else{if(!af(t,a)&&(i.flags&128)===0)return Et=!1,iT(t,i,a);Et=(t.flags&131072)!==0}else Et=!1,Pe&&(i.flags&1048576)!==0&&hp(i,Ko,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=ks(i.elementType),i.type=t,typeof t=="function")ud(t)?(l=Ls(t,l),i.tag=1,i=I0(null,i,t,l,a)):(i.tag=0,i=Zd(null,i,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===ne){i.tag=11,i=b0(null,i,t,l,a);break e}else if(f===P){i.tag=14,i=T0(null,i,t,l,a);break e}}throw i=Ee(t)||t,Error(r(306,i,""))}}return i;case 0:return Zd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ls(l,i.pendingProps),I0(t,i,l,f,a);case 3:e:{if(Ni(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var m=i.memoizedState;f=m.element,Ad(t,i),nl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Sr(i,Tt,l),l!==m.cache&&_d(i,[Tt],a,!0),tl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=C0(t,i,l,a);break e}else if(l!==f){f=In(Error(r(424)),i),Xo(f),i=C0(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(et=On(t.firstChild),Bt=i,Pe=!0,br=null,jn=!0,a=Ep(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(js(),l===f){i=Hi(t,i,a);break e}Ut(t,i,l,a)}i=i.child}return i;case 26:return su(t,i),t===null?(a=Hy(i.type,null,i.pendingProps,null))?i.memoizedState=a:Pe||(a=i.type,t=i.pendingProps,l=Tu(Zt.current).createElement(a),l[_t]=i,l[Ot]=t,Gt(l,a,t),xt(l),i.stateNode=l):i.memoizedState=Hy(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return bo(i),t===null&&Pe&&(l=i.stateNode=Fy(i.type,i.pendingProps,Zt.current),Bt=i,jn=!0,f=et,Mr(i.type)?(Lf=f,et=On(l.firstChild)):et=f),Ut(t,i,i.pendingProps.children,a),su(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Pe&&((f=l=et)&&(l=OT(l,i.type,i.pendingProps,jn),l!==null?(i.stateNode=l,Bt=i,et=On(l.firstChild),jn=!1,f=!0):f=!1),f||Tr(i)),bo(i),f=i.type,m=i.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Pf(f,m)?l=null:_!==null&&Pf(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Nd(t,i,Kb,null,null,a),Tl._currentValue=f),su(t,i),Ut(t,i,l,a),i.child;case 6:return t===null&&Pe&&((t=a=et)&&(a=PT(a,i.pendingProps,jn),a!==null?(i.stateNode=a,Bt=i,et=null,t=!0):t=!1),t||Tr(i)),null;case 13:return D0(t,i,a);case 4:return Ni(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=zs(i,null,l,a):Ut(t,i,l,a),i.child;case 11:return b0(t,i,i.type,i.pendingProps,a);case 7:return Ut(t,i,i.pendingProps,a),i.child;case 8:return Ut(t,i,i.pendingProps.children,a),i.child;case 12:return Ut(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Sr(i,i.type,l.value),Ut(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Os(i),f=Ft(f),l=l(f),i.flags|=1,Ut(t,i,l,a),i.child;case 14:return T0(t,i,i.type,i.pendingProps,a);case 15:return S0(t,i,i.type,i.pendingProps,a);case 19:return N0(t,i,a);case 31:return nT(t,i,a);case 22:return E0(t,i,a,i.pendingProps);case 24:return Os(i),l=Ft(Tt),t===null?(f=Td(),f===null&&(f=Ye,m=xd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:l,cache:f},Ed(i),Sr(i,Tt,f)):((t.lanes&a)!==0&&(Ad(t,i),nl(i,null,null,a),tl()),f=t.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Sr(i,Tt,l)):(l=m.cache,Sr(i,Tt,l),l!==f.cache&&_d(i,[Tt],a,!0))),Ut(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function $i(t){t.flags|=4}function of(t,i,a,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(ay())t.flags|=8192;else throw Ms=Hc,Sd}else t.flags&=-16777217}function P0(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Xy(i))if(ay())t.flags|=8192;else throw Ms=Hc,Sd}function ou(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?fc():536870912,t.lanes|=i,La|=i)}function ll(t,i){if(!Pe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function tt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function rT(t,i,a){var l=i.pendingProps;switch(md(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(i),null;case 1:return tt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Fi(Tt),Oi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(wa(i)?$i(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pd())),tt(i),null;case 26:var f=i.type,m=i.memoizedState;return t===null?($i(i),m!==null?(tt(i),P0(i,m)):(tt(i),of(i,f,null,l,a))):m?m!==t.memoizedState?($i(i),tt(i),P0(i,m)):(tt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&$i(i),tt(i),of(i,f,t,l,a)),null;case 27:if(ra(i),a=Zt.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&$i(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return tt(i),null}t=Ze.current,wa(i)?fp(i):(t=Fy(f,l,a),i.stateNode=t,$i(i))}return tt(i),null;case 5:if(ra(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&$i(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return tt(i),null}if(m=Ze.current,wa(i))fp(i);else{var _=Tu(Zt.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}m[_t]=i,m[Ot]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(Gt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$i(i)}}return tt(i),of(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&$i(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Zt.current,wa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=Bt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[_t]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dy(t.nodeValue,a)),t||Tr(i,!0)}else t=Tu(t).createTextNode(l),t[_t]=i,i.stateNode=t}return tt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=wa(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[_t]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tt(i),t=!1}else a=pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(yn(i),i):(yn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return tt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=wa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[_t]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tt(i),f=!1}else f=pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(yn(i),i):(yn(i),null)}return yn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),ou(i,i.updateQueue),tt(i),null);case 4:return Oi(),t===null&&Cf(i.stateNode.containerInfo),tt(i),null;case 10:return Fi(i.type),tt(i),null;case 19:if(qe(ft),l=i.memoizedState,l===null)return tt(i),null;if(f=(i.flags&128)!==0,m=l.rendering,m===null)if(f)ll(l,!1);else{if(ct!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=Kc(t),m!==null){for(i.flags|=128,ll(l,!1),t=m.updateQueue,i.updateQueue=t,ou(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)lp(a,t),a=a.sibling;return Re(ft,ft.current&1|2),Pe&&Li(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Jt()>du&&(i.flags|=128,f=!0,ll(l,!1),i.lanes=4194304)}else{if(!f)if(t=Kc(m),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,ou(i,t),ll(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Pe)return tt(i),null}else 2*Jt()-l.renderingStartTime>du&&a!==536870912&&(i.flags|=128,f=!0,ll(l,!1),i.lanes=4194304);l.isBackwards?(m.sibling=i.child,i.child=m):(t=l.last,t!==null?t.sibling=m:i.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Jt(),t.sibling=null,a=ft.current,Re(ft,f?a&1|2:a&1),Pe&&Li(i,l.treeForkCount),t):(tt(i),null);case 22:case 23:return yn(i),Cd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(tt(i),i.subtreeFlags&6&&(i.flags|=8192)):tt(i),a=i.updateQueue,a!==null&&ou(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&qe(Ps),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Fi(Tt),tt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function sT(t,i){switch(md(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Fi(Tt),Oi(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ra(i),null;case 31:if(i.memoizedState!==null){if(yn(i),i.alternate===null)throw Error(r(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(yn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return qe(ft),null;case 4:return Oi(),null;case 10:return Fi(i.type),null;case 22:case 23:return yn(i),Cd(),t!==null&&qe(Ps),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Fi(Tt),null;case 25:return null;default:return null}}function k0(t,i){switch(md(i),i.tag){case 3:Fi(Tt),Oi();break;case 26:case 27:case 5:ra(i);break;case 4:Oi();break;case 31:i.memoizedState!==null&&yn(i);break;case 13:yn(i);break;case 19:qe(ft);break;case 10:Fi(i.type);break;case 22:case 23:yn(i),Cd(),t!==null&&qe(Ps);break;case 24:Fi(Tt)}}function cl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==f)}}catch(A){$e(i,i.return,A)}}function Cr(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var _=l.inst,A=_.destroy;if(A!==void 0){_.destroy=void 0,f=i;var O=a,G=A;try{G()}catch(K){$e(f,O,K)}}}l=l.next}while(l!==m)}}catch(K){$e(i,i.return,K)}}function M0(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{wp(i,a)}catch(l){$e(t,t.return,l)}}}function z0(t,i,a){a.props=Ls(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){$e(t,i,l)}}function ul(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){$e(t,i,f)}}function _i(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){$e(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){$e(t,i,f)}else a.current=null}function V0(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){$e(t,t.return,f)}}function lf(t,i,a){try{var l=t.stateNode;RT(l,t.type,a,i),l[Ot]=i}catch(f){$e(t,t.return,f)}}function L0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Mr(t.type)||t.tag===4}function cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Mr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Fn));else if(l!==4&&(l===27&&Mr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(uf(t,i,a),t=t.sibling;t!==null;)uf(t,i,a),t=t.sibling}function lu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Mr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(lu(t,i,a),t=t.sibling;t!==null;)lu(t,i,a),t=t.sibling}function B0(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Gt(i,l,a),i[_t]=t,i[Ot]=a}catch(m){$e(t,t.return,m)}}var qi=!1,At=!1,hf=!1,F0=typeof WeakSet=="function"?WeakSet:Set,kt=null;function aT(t,i){if(t=t.containerInfo,Nf=Cu,t=Jg(t),id(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,A=-1,O=-1,G=0,K=0,Z=t,H=null;t:for(;;){for(var W;Z!==a||f!==0&&Z.nodeType!==3||(A=_+f),Z!==m||l!==0&&Z.nodeType!==3||(O=_+l),Z.nodeType===3&&(_+=Z.nodeValue.length),(W=Z.firstChild)!==null;)H=Z,Z=W;for(;;){if(Z===t)break t;if(H===a&&++G===f&&(A=_),H===m&&++K===l&&(O=_),(W=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=W}a=A===-1||O===-1?null:{start:A,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Of={focusedElem:t,selectionRange:a},Cu=!1,kt=i;kt!==null;)if(i=kt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,kt=t;else for(;kt!==null;){switch(i=kt,m=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var le=Ls(a.type,f);t=l.getSnapshotBeforeUpdate(le,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(ge){$e(a,a.return,ge)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Mf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Mf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,kt=t;break}kt=i.return}}function U0(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(t,a),l&4&&cl(5,a);break;case 1:if(Ki(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){$e(a,a.return,_)}else{var f=Ls(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){$e(a,a.return,_)}}l&64&&M0(a),l&512&&ul(a,a.return);break;case 3:if(Ki(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{wp(t,i)}catch(_){$e(a,a.return,_)}}break;case 27:i===null&&l&4&&B0(a);case 26:case 5:Ki(t,a),i===null&&l&4&&V0(a),l&512&&ul(a,a.return);break;case 12:Ki(t,a);break;case 31:Ki(t,a),l&4&&$0(t,a);break;case 13:Ki(t,a),l&4&&q0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=gT.bind(null,a),kT(t,a))));break;case 22:if(l=a.memoizedState!==null||qi,!l){i=i!==null&&i.memoizedState!==null||At,f=qi;var m=At;qi=l,(At=i)&&!m?Xi(t,a,(a.subtreeFlags&8772)!==0):Ki(t,a),qi=f,At=m}break;case 30:break;default:Ki(t,a)}}function G0(t){var i=t.alternate;i!==null&&(t.alternate=null,G0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ca(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,sn=!1;function Wi(t,i,a){for(a=a.child;a!==null;)H0(t,i,a),a=a.sibling}function H0(t,i,a){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(zn,a)}catch{}switch(a.tag){case 26:At||_i(a,i),Wi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||_i(a,i);var l=st,f=sn;Mr(a.type)&&(st=a.stateNode,sn=!1),Wi(t,i,a),_l(a.stateNode),st=l,sn=f;break;case 5:At||_i(a,i);case 6:if(l=st,f=sn,st=null,Wi(t,i,a),st=l,sn=f,st!==null)if(sn)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(m){$e(a,i,m)}else try{st.removeChild(a.stateNode)}catch(m){$e(a,i,m)}break;case 18:st!==null&&(sn?(t=st,My(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Wa(t)):My(st,a.stateNode));break;case 4:l=st,f=sn,st=a.stateNode.containerInfo,sn=!0,Wi(t,i,a),st=l,sn=f;break;case 0:case 11:case 14:case 15:Cr(2,a,i),At||Cr(4,a,i),Wi(t,i,a);break;case 1:At||(_i(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&z0(a,i,l)),Wi(t,i,a);break;case 21:Wi(t,i,a);break;case 22:At=(l=At)||a.memoizedState!==null,Wi(t,i,a),At=l;break;default:Wi(t,i,a)}}function $0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Wa(t)}catch(a){$e(i,i.return,a)}}}function q0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Wa(t)}catch(a){$e(i,i.return,a)}}function oT(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new F0),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new F0),i;default:throw Error(r(435,t.tag))}}function cu(t,i){var a=oT(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=pT.bind(null,t,l);l.then(f,f)}})}function an(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,_=i,A=_;e:for(;A!==null;){switch(A.tag){case 27:if(Mr(A.type)){st=A.stateNode,sn=!1;break e}break;case 5:st=A.stateNode,sn=!1;break e;case 3:case 4:st=A.stateNode.containerInfo,sn=!0;break e}A=A.return}if(st===null)throw Error(r(160));H0(m,_,f),st=null,sn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)W0(i,t),i=i.sibling}var Wn=null;function W0(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:an(i,t),on(t),l&4&&(Cr(3,t,t.return),cl(3,t),Cr(5,t,t.return));break;case 1:an(i,t),on(t),l&512&&(At||a===null||_i(a,a.return)),l&64&&qi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Wn;if(an(i,t),on(t),l&512&&(At||a===null||_i(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[si]||m[_t]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Gt(m,l,a),m[_t]=t,xt(m),l=m;break e;case"link":var _=Wy("link","href",f).get(l+(a.href||""));if(_){for(var A=0;A<_.length;A++)if(m=_[A],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(A,1);break t}}m=f.createElement(l),Gt(m,l,a),f.head.appendChild(m);break;case"meta":if(_=Wy("meta","content",f).get(l+(a.content||""))){for(A=0;A<_.length;A++)if(m=_[A],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(A,1);break t}}m=f.createElement(l),Gt(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[_t]=t,xt(m),l=m}t.stateNode=l}else Ky(f,t.type,t.stateNode);else t.stateNode=qy(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Ky(f,t.type,t.stateNode):qy(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&lf(t,t.memoizedProps,a.memoizedProps)}break;case 27:an(i,t),on(t),l&512&&(At||a===null||_i(a,a.return)),a!==null&&l&4&&lf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(an(i,t),on(t),l&512&&(At||a===null||_i(a,a.return)),t.flags&32){f=t.stateNode;try{rn(f,"")}catch(le){$e(t,t.return,le)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,lf(t,f,a!==null?a.memoizedProps:f)),l&1024&&(hf=!0);break;case 6:if(an(i,t),on(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(le){$e(t,t.return,le)}}break;case 3:if(Au=null,f=Wn,Wn=Su(i.containerInfo),an(i,t),Wn=f,on(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wa(i.containerInfo)}catch(le){$e(t,t.return,le)}hf&&(hf=!1,K0(t));break;case 4:l=Wn,Wn=Su(t.stateNode.containerInfo),an(i,t),on(t),Wn=l;break;case 12:an(i,t),on(t);break;case 31:an(i,t),on(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cu(t,l)));break;case 13:an(i,t),on(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hu=Jt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cu(t,l)));break;case 22:f=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,G=qi,K=At;if(qi=G||f,At=K||O,an(i,t),At=K,qi=G,on(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||O||qi||At||Bs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(m=O.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{A=O.stateNode;var Z=O.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;A.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(le){$e(O,O.return,le)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(le){$e(O,O.return,le)}}}else if(i.tag===18){if(a===null){O=i;try{var W=O.stateNode;f?zy(W,!0):zy(O.stateNode,!1)}catch(le){$e(O,O.return,le)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,cu(t,a))));break;case 19:an(i,t),on(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cu(t,l)));break;case 30:break;case 21:break;default:an(i,t),on(t)}}function on(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(L0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=cf(t);lu(t,m,f);break;case 5:var _=a.stateNode;a.flags&32&&(rn(_,""),a.flags&=-33);var A=cf(t);lu(t,A,_);break;case 3:case 4:var O=a.stateNode.containerInfo,G=cf(t);uf(t,G,O);break;default:throw Error(r(161))}}catch(K){$e(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function K0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;K0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Ki(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)U0(t,i.alternate,i),i=i.sibling}function Bs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Cr(4,i,i.return),Bs(i);break;case 1:_i(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&z0(i,i.return,a),Bs(i);break;case 27:_l(i.stateNode);case 26:case 5:_i(i,i.return),Bs(i);break;case 22:i.memoizedState===null&&Bs(i);break;case 30:Bs(i);break;default:Bs(i)}t=t.sibling}}function Xi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:Xi(f,m,a),cl(4,m);break;case 1:if(Xi(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){$e(l,l.return,G)}if(l=m,f=l.updateQueue,f!==null){var A=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Ap(O[f],A)}catch(G){$e(l,l.return,G)}}a&&_&64&&M0(m),ul(m,m.return);break;case 27:B0(m);case 26:case 5:Xi(f,m,a),a&&l===null&&_&4&&V0(m),ul(m,m.return);break;case 12:Xi(f,m,a);break;case 31:Xi(f,m,a),a&&_&4&&$0(f,m);break;case 13:Xi(f,m,a),a&&_&4&&q0(f,m);break;case 22:m.memoizedState===null&&Xi(f,m,a),ul(m,m.return);break;case 30:break;default:Xi(f,m,a)}i=i.sibling}}function df(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Qo(a))}function ff(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Qo(t))}function Kn(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)X0(t,i,a,l),i=i.sibling}function X0(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Kn(t,i,a,l),f&2048&&cl(9,i);break;case 1:Kn(t,i,a,l);break;case 3:Kn(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Qo(t)));break;case 12:if(f&2048){Kn(t,i,a,l),t=i.stateNode;try{var m=i.memoizedProps,_=m.id,A=m.onPostCommit;typeof A=="function"&&A(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){$e(i,i.return,O)}}else Kn(t,i,a,l);break;case 31:Kn(t,i,a,l);break;case 13:Kn(t,i,a,l);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?Kn(t,i,a,l):hl(t,i):m._visibility&2?Kn(t,i,a,l):(m._visibility|=2,Ma(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&df(_,i);break;case 24:Kn(t,i,a,l),f&2048&&ff(i.alternate,i);break;default:Kn(t,i,a,l)}}function Ma(t,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=t,_=i,A=a,O=l,G=_.flags;switch(_.tag){case 0:case 11:case 15:Ma(m,_,A,O,f),cl(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?Ma(m,_,A,O,f):hl(m,_):(K._visibility|=2,Ma(m,_,A,O,f)),f&&G&2048&&df(_.alternate,_);break;case 24:Ma(m,_,A,O,f),f&&G&2048&&ff(_.alternate,_);break;default:Ma(m,_,A,O,f)}i=i.sibling}}function hl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:hl(a,l),f&2048&&df(l.alternate,l);break;case 24:hl(a,l),f&2048&&ff(l.alternate,l);break;default:hl(a,l)}i=i.sibling}}var dl=8192;function za(t,i,a){if(t.subtreeFlags&dl)for(t=t.child;t!==null;)Q0(t,i,a),t=t.sibling}function Q0(t,i,a){switch(t.tag){case 26:za(t,i,a),t.flags&dl&&t.memoizedState!==null&&WT(a,Wn,t.memoizedState,t.memoizedProps);break;case 5:za(t,i,a);break;case 3:case 4:var l=Wn;Wn=Su(t.stateNode.containerInfo),za(t,i,a),Wn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=dl,dl=16777216,za(t,i,a),dl=l):za(t,i,a));break;default:za(t,i,a)}}function Y0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function fl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,J0(l,t)}Y0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Z0(t),t=t.sibling}function Z0(t){switch(t.tag){case 0:case 11:case 15:fl(t),t.flags&2048&&Cr(9,t,t.return);break;case 3:fl(t);break;case 12:fl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,uu(t)):fl(t);break;default:fl(t)}}function uu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,J0(l,t)}Y0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Cr(8,i,i.return),uu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,uu(i));break;default:uu(i)}t=t.sibling}}function J0(t,i){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:Cr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Qo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,kt=l;else e:for(a=t;kt!==null;){l=kt;var f=l.sibling,m=l.return;if(G0(l),l===a){kt=null;break e}if(f!==null){f.return=m,kt=f;break e}kt=m}}}var lT={getCacheForType:function(t){var i=Ft(Tt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Ft(Tt).controller.signal}},cT=typeof WeakMap=="function"?WeakMap:Map,Fe=0,Ye=null,Ae=null,Ie=0,He=0,vn=null,Dr=!1,Va=!1,mf=!1,Qi=0,ct=0,jr=0,Fs=0,gf=0,_n=0,La=0,ml=null,ln=null,pf=!1,hu=0,ey=0,du=1/0,fu=null,Nr=null,Dt=0,Or=null,Ba=null,Yi=0,yf=0,vf=null,ty=null,gl=0,_f=null;function xn(){return(Fe&2)!==0&&Ie!==0?Ie&-Ie:X.T!==null?Af():mc()}function ny(){if(_n===0)if((Ie&536870912)===0||Pe){var t=ms;ms<<=1,(ms&3932160)===0&&(ms=262144),_n=t}else _n=536870912;return t=pn.current,t!==null&&(t.flags|=32),_n}function cn(t,i,a){(t===Ye&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(Fa(t,0),Pr(t,Ie,_n,!1)),gs(t,a),((Fe&2)===0||t!==Ye)&&(t===Ye&&((Fe&2)===0&&(Fs|=a),ct===4&&Pr(t,Ie,_n,!1)),xi(t))}function iy(t,i,a){if((Fe&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Vn(t,i),f=l?dT(t,i):bf(t,i,!0),m=l;do{if(f===0){Va&&!l&&Pr(t,i,0,!1);break}else{if(a=t.current.alternate,m&&!uT(a)){f=bf(t,i,!1),m=!1;continue}if(f===2){if(m=i,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var A=t;f=ml;var O=A.current.memoizedState.isDehydrated;if(O&&(Fa(A,_).flags|=256),_=bf(A,_,!1),_!==2){if(mf&&!O){A.errorRecoveryDisabledLanes|=m,Fs|=m,f=4;break e}m=ln,ln=f,m!==null&&(ln===null?ln=m:ln.push.apply(ln,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){Fa(t,0),Pr(t,i,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Pr(l,i,_n,!Dr);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=hu+300-Jt(),10<f)){if(Pr(l,i,_n,!Dr),ni(l,0,!0)!==0)break e;Yi=i,l.timeoutHandle=Py(ry.bind(null,l,a,ln,fu,pf,i,_n,Fs,La,Dr,m,"Throttled",-0,0),f);break e}ry(l,a,ln,fu,pf,i,_n,Fs,La,Dr,m,null,-0,0)}}break}while(!0);xi(t)}function ry(t,i,a,l,f,m,_,A,O,G,K,Z,H,W){if(t.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},Q0(i,m,Z);var le=(m&62914560)===m?hu-Jt():(m&4194048)===m?ey-Jt():0;if(le=KT(Z,le),le!==null){Yi=m,t.cancelPendingCommit=le(dy.bind(null,t,i,m,a,l,f,_,A,O,K,Z,null,H,W)),Pr(t,m,_,!G);return}}dy(t,i,m,a,l,f,_,A,O)}function uT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!mn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pr(t,i,a,l){i&=~gf,i&=~Fs,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var m=31-ht(f),_=1<<m;l[m]=-1,f&=~_}a!==0&&ps(t,a,i)}function mu(){return(Fe&6)===0?(pl(0),!1):!0}function xf(){if(Ae!==null){if(He===0)var t=Ae.return;else t=Ae,Bi=Ns=null,kd(t),ja=null,Zo=0,t=Ae;for(;t!==null;)k0(t.alternate,t),t=t.return;Ae=null}}function Fa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,DT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Yi=0,xf(),Ye=t,Ae=a=Vi(t.current,null),Ie=i,He=0,vn=null,Dr=!1,Va=Vn(t,i),mf=!1,La=_n=gf=Fs=jr=ct=0,ln=ml=null,pf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-ht(l),m=1<<f;i|=t[f],l&=~m}return Qi=i,kc(),a}function sy(t,i){Te=null,X.H=al,i===Da||i===Gc?(i=bp(),He=3):i===Sd?(i=bp(),He=4):He=i===Yd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,Ae===null&&(ct=1,iu(t,In(i,t.current)))}function ay(){var t=pn.current;return t===null?!0:(Ie&4194048)===Ie?Nn===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?t===Nn:!1}function oy(){var t=X.H;return X.H=al,t===null?al:t}function ly(){var t=X.A;return X.A=lT,t}function gu(){ct=4,Dr||(Ie&4194048)!==Ie&&pn.current!==null||(Va=!0),(jr&134217727)===0&&(Fs&134217727)===0||Ye===null||Pr(Ye,Ie,_n,!1)}function bf(t,i,a){var l=Fe;Fe|=2;var f=oy(),m=ly();(Ye!==t||Ie!==i)&&(fu=null,Fa(t,i)),i=!1;var _=ct;e:do try{if(He!==0&&Ae!==null){var A=Ae,O=vn;switch(He){case 8:xf(),_=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(i=!0);var G=He;if(He=0,vn=null,Ua(t,A,O,G),a&&Va){_=0;break e}break;default:G=He,He=0,vn=null,Ua(t,A,O,G)}}hT(),_=ct;break}catch(K){sy(t,K)}while(!0);return i&&t.shellSuspendCounter++,Bi=Ns=null,Fe=l,X.H=f,X.A=m,Ae===null&&(Ye=null,Ie=0,kc()),_}function hT(){for(;Ae!==null;)cy(Ae)}function dT(t,i){var a=Fe;Fe|=2;var l=oy(),f=ly();Ye!==t||Ie!==i?(fu=null,du=Jt()+500,Fa(t,i)):Va=Vn(t,i);e:do try{if(He!==0&&Ae!==null){i=Ae;var m=vn;t:switch(He){case 1:He=0,vn=null,Ua(t,i,m,1);break;case 2:case 9:if(_p(m)){He=0,vn=null,uy(i);break}i=function(){He!==2&&He!==9||Ye!==t||(He=7),xi(t)},m.then(i,i);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:_p(m)?(He=0,vn=null,uy(i)):(He=0,vn=null,Ua(t,i,m,7));break;case 5:var _=null;switch(Ae.tag){case 26:_=Ae.memoizedState;case 5:case 27:var A=Ae;if(_?Xy(_):A.stateNode.complete){He=0,vn=null;var O=A.sibling;if(O!==null)Ae=O;else{var G=A.return;G!==null?(Ae=G,pu(G)):Ae=null}break t}}He=0,vn=null,Ua(t,i,m,5);break;case 6:He=0,vn=null,Ua(t,i,m,6);break;case 8:xf(),ct=6;break e;default:throw Error(r(462))}}fT();break}catch(K){sy(t,K)}while(!0);return Bi=Ns=null,X.H=l,X.A=f,Fe=a,Ae!==null?0:(Ye=null,Ie=0,kc(),ct)}function fT(){for(;Ae!==null&&!Qh();)cy(Ae)}function cy(t){var i=O0(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,i===null?pu(t):Ae=i}function uy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=R0(a,i,i.pendingProps,i.type,void 0,Ie);break;case 11:i=R0(a,i,i.pendingProps,i.type.render,i.ref,Ie);break;case 5:kd(i);default:k0(a,i),i=Ae=lp(i,Qi),i=O0(a,i,Qi)}t.memoizedProps=t.pendingProps,i===null?pu(t):Ae=i}function Ua(t,i,a,l){Bi=Ns=null,kd(i),ja=null,Zo=0;var f=i.return;try{if(tT(t,f,i,a,Ie)){ct=1,iu(t,In(a,t.current)),Ae=null;return}}catch(m){if(f!==null)throw Ae=f,m;ct=1,iu(t,In(a,t.current)),Ae=null;return}i.flags&32768?(Pe||l===1?t=!0:Va||(Ie&536870912)!==0?t=!1:(Dr=t=!0,(l===2||l===9||l===3||l===6)&&(l=pn.current,l!==null&&l.tag===13&&(l.flags|=16384))),hy(i,t)):pu(i)}function pu(t){var i=t;do{if((i.flags&32768)!==0){hy(i,Dr);return}t=i.return;var a=rT(i.alternate,i,Qi);if(a!==null){Ae=a;return}if(i=i.sibling,i!==null){Ae=i;return}Ae=i=t}while(i!==null);ct===0&&(ct=5)}function hy(t,i){do{var a=sT(t.alternate,t);if(a!==null){a.flags&=32767,Ae=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ae=t;return}Ae=t=a}while(t!==null);ct=6,Ae=null}function dy(t,i,a,l,f,m,_,A,O){t.cancelPendingCommit=null;do yu();while(Dt!==0);if((Fe&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=ld,Jh(t,a,m,_,A,O),t===Ye&&(Ae=Ye=null,Ie=0),Ba=i,Or=t,Yi=a,yf=m,vf=f,ty=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,yT(ur,function(){return yy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=se.p,se.p=2,_=Fe,Fe|=4;try{aT(t,i,a)}finally{Fe=_,se.p=f,X.T=l}}Dt=1,fy(),my(),gy()}}function fy(){if(Dt===1){Dt=0;var t=Or,i=Ba,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=se.p;se.p=2;var f=Fe;Fe|=4;try{W0(i,t);var m=Of,_=Jg(t.containerInfo),A=m.focusedElem,O=m.selectionRange;if(_!==A&&A&&A.ownerDocument&&Zg(A.ownerDocument.documentElement,A)){if(O!==null&&id(A)){var G=O.start,K=O.end;if(K===void 0&&(K=G),"selectionStart"in A)A.selectionStart=G,A.selectionEnd=Math.min(K,A.value.length);else{var Z=A.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var W=H.getSelection(),le=A.textContent.length,ge=Math.min(O.start,le),Qe=O.end===void 0?ge:Math.min(O.end,le);!W.extend&&ge>Qe&&(_=Qe,Qe=ge,ge=_);var L=Yg(A,ge),k=Yg(A,Qe);if(L&&k&&(W.rangeCount!==1||W.anchorNode!==L.node||W.anchorOffset!==L.offset||W.focusNode!==k.node||W.focusOffset!==k.offset)){var U=Z.createRange();U.setStart(L.node,L.offset),W.removeAllRanges(),ge>Qe?(W.addRange(U),W.extend(k.node,k.offset)):(U.setEnd(k.node,k.offset),W.addRange(U))}}}}for(Z=[],W=A;W=W.parentNode;)W.nodeType===1&&Z.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<Z.length;A++){var Q=Z[A];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Cu=!!Nf,Of=Nf=null}finally{Fe=f,se.p=l,X.T=a}}t.current=i,Dt=2}}function my(){if(Dt===2){Dt=0;var t=Or,i=Ba,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=se.p;se.p=2;var f=Fe;Fe|=4;try{U0(t,i.alternate,i)}finally{Fe=f,se.p=l,X.T=a}}Dt=3}}function gy(){if(Dt===4||Dt===3){Dt=0,oc();var t=Or,i=Ba,a=Yi,l=ty;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Dt=5:(Dt=0,Ba=Or=null,py(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Nr=null),Pi(a),i=i.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(zn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,f=se.p,se.p=2,X.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var A=l[_];m(A.value,{componentStack:A.stack})}}finally{X.T=i,se.p=f}}(Yi&3)!==0&&yu(),xi(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===_f?gl++:(gl=0,_f=t):gl=0,pl(0)}}function py(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Qo(i)))}function yu(){return fy(),my(),gy(),yy()}function yy(){if(Dt!==5)return!1;var t=Or,i=yf;yf=0;var a=Pi(Yi),l=X.T,f=se.p;try{se.p=32>a?32:a,X.T=null,a=vf,vf=null;var m=Or,_=Yi;if(Dt=0,Ba=Or=null,Yi=0,(Fe&6)!==0)throw Error(r(331));var A=Fe;if(Fe|=4,Z0(m.current),X0(m,m.current,_,a),Fe=A,pl(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(zn,m)}catch{}return!0}finally{se.p=f,X.T=l,py(t,i)}}function vy(t,i,a){i=In(a,i),i=Qd(t.stateNode,i,2),t=wr(t,i,2),t!==null&&(gs(t,2),xi(t))}function $e(t,i,a){if(t.tag===3)vy(t,t,a);else for(;i!==null;){if(i.tag===3){vy(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Nr===null||!Nr.has(l))){t=In(a,t),a=_0(2),l=wr(i,a,2),l!==null&&(x0(a,l,i,t),gs(l,2),xi(l));break}}i=i.return}}function Tf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new cT;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(mf=!0,f.add(a),t=mT.bind(null,t,i,a),i.then(t,t))}function mT(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ye===t&&(Ie&a)===a&&(ct===4||ct===3&&(Ie&62914560)===Ie&&300>Jt()-hu?(Fe&2)===0&&Fa(t,0):gf|=a,La===Ie&&(La=0)),xi(t)}function _y(t,i){i===0&&(i=fc()),t=Cs(t,i),t!==null&&(gs(t,i),xi(t))}function gT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),_y(t,a)}function pT(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),_y(t,a)}function yT(t,i){return Ct(t,i)}var vu=null,Ga=null,Sf=!1,_u=!1,Ef=!1,kr=0;function xi(t){t!==Ga&&t.next===null&&(Ga===null?vu=Ga=t:Ga=Ga.next=t),_u=!0,Sf||(Sf=!0,_T())}function pl(t,i){if(!Ef&&_u){Ef=!0;do for(var a=!1,l=vu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var _=l.suspendedLanes,A=l.pingedLanes;m=(1<<31-ht(42|t)+1)-1,m&=f&~(_&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Sy(l,m))}else m=Ie,m=ni(l,l===Ye?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Vn(l,m)||(a=!0,Sy(l,m));l=l.next}while(a);Ef=!1}}function vT(){xy()}function xy(){_u=Sf=!1;var t=0;kr!==0&&CT()&&(t=kr);for(var i=Jt(),a=null,l=vu;l!==null;){var f=l.next,m=by(l,i);m===0?(l.next=null,a===null?vu=f:a.next=f,f===null&&(Ga=a)):(a=l,(t!==0||(m&3)!==0)&&(_u=!0)),l=f}Dt!==0&&Dt!==5||pl(t),kr!==0&&(kr=0)}function by(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-ht(m),A=1<<_,O=f[_];O===-1?((A&a)===0||(A&l)!==0)&&(f[_]=Zh(A,i)):O<=i&&(t.expiredLanes|=A),m&=~A}if(i=Ye,a=Ie,a=ni(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(He===2||He===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&cr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Vn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&cr(l),Pi(a)){case 2:case 8:a=wo;break;case 32:a=ur;break;case 268435456:a=lc;break;default:a=ur}return l=Ty.bind(null,t),a=Ct(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&cr(l),t.callbackPriority=2,t.callbackNode=null,2}function Ty(t,i){if(Dt!==0&&Dt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(yu()&&t.callbackNode!==a)return null;var l=Ie;return l=ni(t,t===Ye?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(iy(t,l,i),by(t,Jt()),t.callbackNode!=null&&t.callbackNode===a?Ty.bind(null,t):null)}function Sy(t,i){if(yu())return null;iy(t,i,!0)}function _T(){jT(function(){(Fe&6)!==0?Ct(Ao,vT):xy()})}function Af(){if(kr===0){var t=Ia;t===0&&(t=ei,ei<<=1,(ei&261888)===0&&(ei=256)),kr=t}return kr}function Ey(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fa(""+t)}function Ay(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function xT(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var m=Ey((f[Ot]||null).action),_=l.submitter;_&&(i=(i=_[Ot]||null)?Ey(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var A=new fi("action","action",null,l,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(kr!==0){var O=_?Ay(f,_):new FormData(f);Hd(a,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(A.preventDefault(),O=_?Ay(f,_):new FormData(f),Hd(a,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var wf=0;wf<od.length;wf++){var Rf=od[wf],bT=Rf.toLowerCase(),TT=Rf[0].toUpperCase()+Rf.slice(1);qn(bT,"on"+TT)}qn(np,"onAnimationEnd"),qn(ip,"onAnimationIteration"),qn(rp,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(Vb,"onTransitionRun"),qn(Lb,"onTransitionStart"),qn(Bb,"onTransitionCancel"),qn(sp,"onTransitionEnd"),ci("onMouseEnter",["mouseout","mouseover"]),ci("onMouseLeave",["mouseout","mouseover"]),ci("onPointerEnter",["pointerout","pointerover"]),ci("onPointerLeave",["pointerout","pointerover"]),li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),li("onBeforeInput",["compositionend","keypress","textInput","paste"]),li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ST=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yl));function wy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var _=l.length-1;0<=_;_--){var A=l[_],O=A.instance,G=A.currentTarget;if(A=A.listener,O!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=G;try{m(f)}catch(K){Pc(K)}f.currentTarget=null,m=O}else for(_=0;_<l.length;_++){if(A=l[_],O=A.instance,G=A.currentTarget,A=A.listener,O!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=G;try{m(f)}catch(K){Pc(K)}f.currentTarget=null,m=O}}}}function we(t,i){var a=i[la];a===void 0&&(a=i[la]=new Set);var l=t+"__bubble";a.has(l)||(Ry(i,t,2,!1),a.add(l))}function If(t,i,a){var l=0;i&&(l|=4),Ry(a,t,l,i)}var xu="_reactListening"+Math.random().toString(36).slice(2);function Cf(t){if(!t[xu]){t[xu]=!0,Co.forEach(function(a){a!=="selectionchange"&&(ST.has(a)||If(a,!1,t),If(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[xu]||(i[xu]=!0,If("selectionchange",!1,i))}}function Ry(t,i,a,l){switch(nv(i)){case 2:var f=YT;break;case 8:f=ZT;break;default:f=Hf}a=f.bind(null,i,a,t),f=void 0,!bs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function Df(t,i,a,l,f){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var A=l.stateNode.containerInfo;if(A===f)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;A!==null;){if(_=ai(A),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=m=_;continue e}A=A.parentNode}}l=l.return}pr(function(){var G=m,K=En(a),Z=[];e:{var H=ap.get(t);if(H!==void 0){var W=fi,le=t;switch(t){case"keypress":if(Ss(a)===0)break e;case"keydown":case"keyup":W=jc;break;case"focusin":le="focus",W=As;break;case"focusout":le="blur",W=As;break;case"beforeblur":case"afterblur":W=As;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case np:case ip:case rp:W=Ec;break;case sp:W=R;break;case"scroll":case"scrollend":W=Fo;break;case"wheel":W=$;break;case"copy":case"cut":case"paste":W=Ac;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=zi;break;case"toggle":case"beforetoggle":W=be}var ge=(i&4)!==0,Qe=!ge&&(t==="scroll"||t==="scrollend"),L=ge?H!==null?H+"Capture":null:H;ge=[];for(var k=G,U;k!==null;){var Q=k;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||L===null||(Q=Un(k,L),Q!=null&&ge.push(vl(k,Q,U))),Qe)break;k=k.return}0<ge.length&&(H=new W(H,le,null,a,K),Z.push({event:H,listeners:ge}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",H&&a!==Vo&&(le=a.relatedTarget||a.fromElement)&&(ai(le)||le[ri]))break e;if((W||H)&&(H=K.window===K?K:(H=K.ownerDocument)?H.defaultView||H.parentWindow:window,W?(le=a.relatedTarget||a.toElement,W=G,le=le?ai(le):null,le!==null&&(Qe=c(le),ge=le.tag,le!==Qe||ge!==5&&ge!==27&&ge!==6)&&(le=null)):(W=null,le=G),W!==le)){if(ge=Uo,Q="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(ge=zi,Q="onPointerLeave",L="onPointerEnter",k="pointer"),Qe=W==null?H:dn(W),U=le==null?H:dn(le),H=new ge(Q,k+"leave",W,a,K),H.target=Qe,H.relatedTarget=U,Q=null,ai(K)===G&&(ge=new ge(L,k+"enter",le,a,K),ge.target=U,ge.relatedTarget=Qe,Q=ge),Qe=Q,W&&le)t:{for(ge=ET,L=W,k=le,U=0,Q=L;Q;Q=ge(Q))U++;Q=0;for(var fe=k;fe;fe=ge(fe))Q++;for(;0<U-Q;)L=ge(L),U--;for(;0<Q-U;)k=ge(k),Q--;for(;U--;){if(L===k||k!==null&&L===k.alternate){ge=L;break t}L=ge(L),k=ge(k)}ge=null}else ge=null;W!==null&&Iy(Z,H,W,ge,!1),le!==null&&Qe!==null&&Iy(Z,Qe,le,ge,!0)}}e:{if(H=G?dn(G):window,W=H.nodeName&&H.nodeName.toLowerCase(),W==="select"||W==="input"&&H.type==="file")var Ve=$g;else if(Gg(H))if(qg)Ve=kb;else{Ve=Ob;var he=Nb}else W=H.nodeName,!W||W.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?G&&da(G.elementType)&&(Ve=$g):Ve=Pb;if(Ve&&(Ve=Ve(t,G))){Hg(Z,Ve,a,K);break e}he&&he(t,H,G),t==="focusout"&&G&&H.type==="number"&&G.memoizedProps.value!=null&&ko(H,"number",H.value)}switch(he=G?dn(G):window,t){case"focusin":(Gg(he)||he.contentEditable==="true")&&(xa=he,rd=G,Wo=null);break;case"focusout":Wo=rd=xa=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,ep(Z,a,K);break;case"selectionchange":if(zb)break;case"keydown":case"keyup":ep(Z,a,K)}var Se;if(Be)e:{switch(t){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else _a?ws(t,a)&&(Ce="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(pi&&a.locale!=="ko"&&(_a||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&_a&&(Se=Bo()):(di=K,Lo="value"in di?di.value:di.textContent,_a=!0)),he=bu(G,Ce),0<he.length&&(Ce=new gi(Ce,t,null,a,K),Z.push({event:Ce,listeners:he}),Se?Ce.data=Se:(Se=va(a),Se!==null&&(Ce.data=Se)))),(Se=wn?Ib(t,a):Cb(t,a))&&(Ce=bu(G,"onBeforeInput"),0<Ce.length&&(he=new gi("onBeforeInput","beforeinput",null,a,K),Z.push({event:he,listeners:Ce}),he.data=Se)),xT(Z,t,G,a,K)}wy(Z,i)})}function vl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function bu(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Un(t,a),f!=null&&l.unshift(vl(t,f,m)),f=Un(t,i),f!=null&&l.push(vl(t,f,m))),t.tag===3)return l;t=t.return}return[]}function ET(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Iy(t,i,a,l,f){for(var m=i._reactName,_=[];a!==null&&a!==l;){var A=a,O=A.alternate,G=A.stateNode;if(A=A.tag,O!==null&&O===l)break;A!==5&&A!==26&&A!==27||G===null||(O=G,f?(G=Un(a,m),G!=null&&_.unshift(vl(a,G,O))):f||(G=Un(a,m),G!=null&&_.push(vl(a,G,O)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var AT=/\r\n?/g,wT=/\u0000|\uFFFD/g;function Cy(t){return(typeof t=="string"?t:""+t).replace(AT,`
`).replace(wT,"")}function Dy(t,i){return i=Cy(i),Cy(t)===i}function Xe(t,i,a,l,f,m){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||rn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&rn(t,""+l);break;case"className":fn(t,"class",l);break;case"tabIndex":fn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":fn(t,a,l);break;case"style":zo(t,l,m);break;case"data":if(i!=="object"){fn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=fa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&Xe(t,i,"name",f.name,f,null),Xe(t,i,"formEncType",f.formEncType,f,null),Xe(t,i,"formMethod",f.formMethod,f,null),Xe(t,i,"formTarget",f.formTarget,f,null)):(Xe(t,i,"encType",f.encType,f,null),Xe(t,i,"method",f.method,f,null),Xe(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=fa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Fn);break;case"onScroll":l!=null&&we("scroll",t);break;case"onScrollEnd":l!=null&&we("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=fa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":we("beforetoggle",t),we("toggle",t),ua(t,"popover",l);break;case"xlinkActuate":bt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":bt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":bt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":bt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":bt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":bt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":bt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":bt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":bt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ua(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bc.get(a)||a,ua(t,a,l))}}function jf(t,i,a,l,f,m){switch(a){case"style":zo(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?rn(t,l):(typeof l=="number"||typeof l=="bigint")&&rn(t,""+l);break;case"onScroll":l!=null&&we("scroll",t);break;case"onScrollEnd":l!=null&&we("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Do.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=t[Ot]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ua(t,a,l)}}}function Gt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",t),we("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Xe(t,i,m,_,a,null)}}f&&Xe(t,i,"srcSet",a.srcSet,a,null),l&&Xe(t,i,"src",a.src,a,null);return;case"input":we("invalid",t);var A=m=_=f=null,O=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":f=K;break;case"type":_=K;break;case"checked":O=K;break;case"defaultChecked":G=K;break;case"value":m=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:Xe(t,i,l,K,a,null)}}vc(t,m,A,O,G,_,f,!1);return;case"select":we("invalid",t),l=_=m=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":_=A;break;case"multiple":l=A;default:Xe(t,i,f,A,a,null)}i=m,a=_,t.multiple=!!l,i!=null?dr(t,!!l,i,!1):a!=null&&dr(t,!!l,a,!0);return;case"textarea":we("invalid",t),m=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(A=a[_],A!=null))switch(_){case"value":l=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Xe(t,i,_,A,a,null)}fr(t,l,f,m);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xe(t,i,O,l,a,null)}return;case"dialog":we("beforetoggle",t),we("toggle",t),we("cancel",t),we("close",t);break;case"iframe":case"object":we("load",t);break;case"video":case"audio":for(l=0;l<yl.length;l++)we(yl[l],t);break;case"image":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"embed":case"source":case"link":we("error",t),we("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Xe(t,i,G,l,a,null)}return;default:if(da(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&jf(t,i,K,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&Xe(t,i,A,l,a,null))}function RT(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,A=null,O=null,G=null,K=null;for(W in a){var Z=a[W];if(a.hasOwnProperty(W)&&Z!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=Z;default:l.hasOwnProperty(W)||Xe(t,i,W,null,l,Z)}}for(var H in l){var W=l[H];if(Z=a[H],l.hasOwnProperty(H)&&(W!=null||Z!=null))switch(H){case"type":m=W;break;case"name":f=W;break;case"checked":G=W;break;case"defaultChecked":K=W;break;case"value":_=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:W!==Z&&Xe(t,i,H,W,l,Z)}}ha(t,_,A,O,G,K,m,f);return;case"select":W=_=A=H=null;for(m in a)if(O=a[m],a.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":W=O;default:l.hasOwnProperty(m)||Xe(t,i,m,null,l,O)}for(f in l)if(m=l[f],O=a[f],l.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":H=m;break;case"defaultValue":A=m;break;case"multiple":_=m;default:m!==O&&Xe(t,i,f,m,l,O)}i=A,a=_,l=W,H!=null?dr(t,!!a,H,!1):!!l!=!!a&&(i!=null?dr(t,!!a,i,!0):dr(t,!!a,a?[]:"",!1));return;case"textarea":W=H=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Xe(t,i,A,null,l,f)}for(_ in l)if(f=l[_],m=a[_],l.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":H=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Xe(t,i,_,f,l,m)}_c(t,H,W);return;case"option":for(var le in a)if(H=a[le],a.hasOwnProperty(le)&&H!=null&&!l.hasOwnProperty(le))switch(le){case"selected":t.selected=!1;break;default:Xe(t,i,le,null,l,H)}for(O in l)if(H=l[O],W=a[O],l.hasOwnProperty(O)&&H!==W&&(H!=null||W!=null))switch(O){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Xe(t,i,O,H,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in a)H=a[ge],a.hasOwnProperty(ge)&&H!=null&&!l.hasOwnProperty(ge)&&Xe(t,i,ge,null,l,H);for(G in l)if(H=l[G],W=a[G],l.hasOwnProperty(G)&&H!==W&&(H!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:Xe(t,i,G,H,l,W)}return;default:if(da(i)){for(var Qe in a)H=a[Qe],a.hasOwnProperty(Qe)&&H!==void 0&&!l.hasOwnProperty(Qe)&&jf(t,i,Qe,void 0,l,H);for(K in l)H=l[K],W=a[K],!l.hasOwnProperty(K)||H===W||H===void 0&&W===void 0||jf(t,i,K,H,l,W);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&Xe(t,i,L,null,l,H);for(Z in l)H=l[Z],W=a[Z],!l.hasOwnProperty(Z)||H===W||H==null&&W==null||Xe(t,i,Z,H,l,W)}function jy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,_=f.initiatorType,A=f.duration;if(m&&A&&jy(_)){for(_=0,A=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],G=O.startTime;if(G>A)break;var K=O.transferSize,Z=O.initiatorType;K&&jy(Z)&&(O=O.responseEnd,_+=K*(O<A?1:(A-G)/(O-G)))}if(--l,i+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Nf=null,Of=null;function Tu(t){return t.nodeType===9?t:t.ownerDocument}function Ny(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Pf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var kf=null;function CT(){var t=window.event;return t&&t.type==="popstate"?t===kf?!1:(kf=t,!0):(kf=null,!1)}var Py=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,jT=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(t){return ky.resolve(null).then(t).catch(NT)}:Py;function NT(t){setTimeout(function(){throw t})}function Mr(t){return t==="head"}function My(t,i){var a=i,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Wa(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")_l(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,_l(a);for(var m=a.firstChild;m;){var _=m.nextSibling,A=m.nodeName;m[si]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&_l(t.ownerDocument.body);a=f}while(a);Wa(i)}function zy(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Mf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mf(a),ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function OT(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[si])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=On(t.nextSibling),t===null)break}return null}function PT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=On(t.nextSibling),t===null))return null;return t}function Vy(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=On(t.nextSibling),t===null))return null;return t}function zf(t){return t.data==="$?"||t.data==="$~"}function Vf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function kT(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function On(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Lf=null;function Ly(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return On(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function By(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function Fy(t,i,a){switch(i=Tu(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function _l(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ca(t)}var Pn=new Map,Uy=new Set;function Su(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zi=se.d;se.d={f:MT,r:zT,D:VT,C:LT,L:BT,m:FT,X:GT,S:UT,M:HT};function MT(){var t=Zi.f(),i=mu();return t||i}function zT(t){var i=Sn(t);i!==null&&i.tag===5&&i.type==="form"?s0(i):Zi.r(t)}var Ha=typeof document>"u"?null:document;function Gy(t,i,a){var l=Ha;if(l&&typeof i=="string"&&i){var f=nn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Uy.has(f)||(Uy.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Gt(i,"link",t),xt(i),l.head.appendChild(i)))}}function VT(t){Zi.D(t),Gy("dns-prefetch",t,null)}function LT(t,i){Zi.C(t,i),Gy("preconnect",t,i)}function BT(t,i,a){Zi.L(t,i,a);var l=Ha;if(l&&t&&i){var f='link[rel="preload"][as="'+nn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+nn(a.imageSizes)+'"]')):f+='[href="'+nn(t)+'"]';var m=f;switch(i){case"style":m=$a(t);break;case"script":m=qa(t)}Pn.has(m)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Pn.set(m,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(xl(m))||i==="script"&&l.querySelector(bl(m))||(i=l.createElement("link"),Gt(i,"link",t),xt(i),l.head.appendChild(i)))}}function FT(t,i){Zi.m(t,i);var a=Ha;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+nn(l)+'"][href="'+nn(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=qa(t)}if(!Pn.has(m)&&(t=S({rel:"modulepreload",href:t},i),Pn.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bl(m)))return}l=a.createElement("link"),Gt(l,"link",t),xt(l),a.head.appendChild(l)}}}function UT(t,i,a){Zi.S(t,i,a);var l=Ha;if(l&&t){var f=oi(l).hoistableStyles,m=$a(t);i=i||"default";var _=f.get(m);if(!_){var A={loading:0,preload:null};if(_=l.querySelector(xl(m)))A.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Pn.get(m))&&Bf(t,a);var O=_=l.createElement("link");xt(O),Gt(O,"link",t),O._p=new Promise(function(G,K){O.onload=G,O.onerror=K}),O.addEventListener("load",function(){A.loading|=1}),O.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Eu(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:A},f.set(m,_)}}}function GT(t,i){Zi.X(t,i);var a=Ha;if(a&&t){var l=oi(a).hoistableScripts,f=qa(t),m=l.get(f);m||(m=a.querySelector(bl(f)),m||(t=S({src:t,async:!0},i),(i=Pn.get(f))&&Ff(t,i),m=a.createElement("script"),xt(m),Gt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function HT(t,i){Zi.M(t,i);var a=Ha;if(a&&t){var l=oi(a).hoistableScripts,f=qa(t),m=l.get(f);m||(m=a.querySelector(bl(f)),m||(t=S({src:t,async:!0,type:"module"},i),(i=Pn.get(f))&&Ff(t,i),m=a.createElement("script"),xt(m),Gt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function Hy(t,i,a,l){var f=(f=Zt.current)?Su(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=$a(a.href),a=oi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=$a(a.href);var m=oi(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(xl(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Pn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pn.set(t,a),m||$T(f,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qa(a),a=oi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function $a(t){return'href="'+nn(t)+'"'}function xl(t){return'link[rel="stylesheet"]['+t+"]"}function $y(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function $T(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Gt(i,"link",a),xt(i),t.head.appendChild(i))}function qa(t){return'[src="'+nn(t)+'"]'}function bl(t){return"script[async]"+t}function qy(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+nn(a.href)+'"]');if(l)return i.instance=l,xt(l),l;var f=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),Gt(l,"style",f),Eu(l,a.precedence,t),i.instance=l;case"stylesheet":f=$a(a.href);var m=t.querySelector(xl(f));if(m)return i.state.loading|=4,i.instance=m,xt(m),m;l=$y(a),(f=Pn.get(f))&&Bf(l,f),m=(t.ownerDocument||t).createElement("link"),xt(m);var _=m;return _._p=new Promise(function(A,O){_.onload=A,_.onerror=O}),Gt(m,"link",l),i.state.loading|=4,Eu(m,a.precedence,t),i.instance=m;case"script":return m=qa(a.src),(f=t.querySelector(bl(m)))?(i.instance=f,xt(f),f):(l=a,(f=Pn.get(m))&&(l=S({},a),Ff(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),xt(f),Gt(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Eu(l,a.precedence,t));return i.instance}function Eu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,_=0;_<l.length;_++){var A=l[_];if(A.dataset.precedence===i)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Bf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Ff(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Au=null;function Wy(t,i,a){if(Au===null){var l=new Map,f=Au=new Map;f.set(a,l)}else f=Au,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[si]||m[_t]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=t+_;var A=l.get(_);A?A.push(m):l.set(_,[m])}}return l}function Ky(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function qT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Xy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function WT(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=$a(l.href),m=i.querySelector(xl(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=wu.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=m,xt(m);return}m=i.ownerDocument||i,l=$y(l),(f=Pn.get(f))&&Bf(l,f),m=m.createElement("link"),xt(m);var _=m;_._p=new Promise(function(A,O){_.onload=A,_.onerror=O}),Gt(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=wu.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Uf=0;function KT(t,i){return t.stylesheets&&t.count===0&&Iu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Iu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+i);0<t.imgBytes&&Uf===0&&(Uf=62500*IT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Iu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Uf?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function wu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Iu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ru=null;function Iu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ru=new Map,i.forEach(XT,t),Ru=null,wu.call(t))}function XT(t,i){if(!(i.state.loading&4)){var a=Ru.get(t);if(a)var l=a.get(null);else{a=new Map,Ru.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,f),a.set(_,f),this.count++,l=wu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var Tl={$$typeof:ee,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function QT(t,i,a,l,f,m,_,A,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ii(0),this.hiddenUpdates=ii(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Qy(t,i,a,l,f,m,_,A,O,G,K,Z){return t=new QT(t,i,a,_,O,G,K,Z,A),i=1,m===!0&&(i|=24),m=gn(3,null,null,i),t.current=m,m.stateNode=t,i=xd(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:i},Ed(m),t}function Yy(t){return t?(t=Sa,t):Sa}function Zy(t,i,a,l,f,m){f=Yy(f),l.context===null?l.context=f:l.pendingContext=f,l=Ar(i),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=wr(t,l,i),a!==null&&(cn(a,t,i),el(a,t,i))}function Jy(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Gf(t,i){Jy(t,i),(t=t.alternate)&&Jy(t,i)}function ev(t){if(t.tag===13||t.tag===31){var i=Cs(t,67108864);i!==null&&cn(i,t,67108864),Gf(t,67108864)}}function tv(t){if(t.tag===13||t.tag===31){var i=xn();i=ys(i);var a=Cs(t,i);a!==null&&cn(a,t,i),Gf(t,i)}}var Cu=!0;function YT(t,i,a,l){var f=X.T;X.T=null;var m=se.p;try{se.p=2,Hf(t,i,a,l)}finally{se.p=m,X.T=f}}function ZT(t,i,a,l){var f=X.T;X.T=null;var m=se.p;try{se.p=8,Hf(t,i,a,l)}finally{se.p=m,X.T=f}}function Hf(t,i,a,l){if(Cu){var f=$f(l);if(f===null)Df(t,i,l,Du,a),iv(t,l);else if(eS(f,t,i,a,l))l.stopPropagation();else if(iv(t,l),i&4&&-1<JT.indexOf(t)){for(;f!==null;){var m=Sn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=ti(m.pendingLanes);if(_!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;_;){var O=1<<31-ht(_);A.entanglements[1]|=O,_&=~O}xi(m),(Fe&6)===0&&(du=Jt()+500,pl(0))}}break;case 31:case 13:A=Cs(m,2),A!==null&&cn(A,m,2),mu(),Gf(m,2)}if(m=$f(l),m===null&&Df(t,i,l,Du,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Df(t,i,l,null,a)}}function $f(t){return t=En(t),qf(t)}var Du=null;function qf(t){if(Du=null,t=ai(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===31){if(t=g(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Du=t,null}function nv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fs()){case Ao:return 2;case wo:return 8;case ur:case Yh:return 32;case lc:return 268435456;default:return 32}default:return 32}}var Wf=!1,zr=null,Vr=null,Lr=null,Sl=new Map,El=new Map,Br=[],JT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iv(t,i){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":Sl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(i.pointerId)}}function Al(t,i,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Sn(i),i!==null&&ev(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function eS(t,i,a,l,f){switch(i){case"focusin":return zr=Al(zr,t,i,a,l,f),!0;case"dragenter":return Vr=Al(Vr,t,i,a,l,f),!0;case"mouseover":return Lr=Al(Lr,t,i,a,l,f),!0;case"pointerover":var m=f.pointerId;return Sl.set(m,Al(Sl.get(m)||null,t,i,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,El.set(m,Al(El.get(m)||null,t,i,a,l,f)),!0}return!1}function rv(t){var i=ai(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,Ln(t.priority,function(){tv(a)});return}}else if(i===31){if(i=g(a),i!==null){t.blockedOn=i,Ln(t.priority,function(){tv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=$f(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Vo=l,a.target.dispatchEvent(l),Vo=null}else return i=Sn(a),i!==null&&ev(i),t.blockedOn=a,!1;i.shift()}return!0}function sv(t,i,a){ju(t)&&a.delete(i)}function tS(){Wf=!1,zr!==null&&ju(zr)&&(zr=null),Vr!==null&&ju(Vr)&&(Vr=null),Lr!==null&&ju(Lr)&&(Lr=null),Sl.forEach(sv),El.forEach(sv)}function Nu(t,i){t.blockedOn===i&&(t.blockedOn=null,Wf||(Wf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,tS)))}var Ou=null;function av(t){Ou!==t&&(Ou=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ou===t&&(Ou=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(qf(l||a)===null)continue;break}var m=Sn(a);m!==null&&(t.splice(i,3),i-=3,Hd(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Wa(t){function i(O){return Nu(O,t)}zr!==null&&Nu(zr,t),Vr!==null&&Nu(Vr,t),Lr!==null&&Nu(Lr,t),Sl.forEach(i),El.forEach(i);for(var a=0;a<Br.length;a++){var l=Br[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Br.length&&(a=Br[0],a.blockedOn===null);)rv(a),a.blockedOn===null&&Br.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],_=f[Ot]||null;if(typeof m=="function")_||av(a);else if(_){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Ot]||null)A=_.formAction;else if(qf(f)!==null)continue}else A=_.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),av(a)}}}function ov(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Kf(t){this._internalRoot=t}Pu.prototype.render=Kf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=xn();Zy(a,l,t,i,null,null)},Pu.prototype.unmount=Kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Zy(t.current,2,null,t,null,null),mu(),i[ri]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var i=mc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Br.length&&i!==0&&i<Br[a].priority;a++);Br.splice(a,0,t),a===0&&rv(t)}};var lv=e.version;if(lv!=="19.2.0")throw Error(r(527,lv,"19.2.0"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=v(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var nS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{zn=ku.inject(nS),Vt=ku}catch{}}return Il.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",f=g0,m=p0,_=y0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Qy(t,1,!1,null,null,a,l,null,f,m,_,ov),t[ri]=i.current,Cf(t),new Kf(i)},Il.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,f="",m=g0,_=p0,A=y0,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=Qy(t,1,!0,i,a??null,l,f,O,m,_,A,ov),i.context=Yy(null),a=i.current,l=xn(),l=ys(l),f=Ar(l),f.callback=null,wr(a,f,l),a=l,i.current.lanes=a,gs(i,a),xi(i),t[ri]=i.current,Cf(t),new Pu(i)},Il.version="19.2.0",Il}var mv;function yS(){if(mv)return Qf.exports;mv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Qf.exports=pS(),Qf.exports}var vS=yS(),_S=hS();const $m=aS(_S);class xS{constructor(e,n=null,r=null){this.rawData=e,this.goalieProcessor=n,this.scheduleHelper=r,this.processedData=this.processAllTeams()}calculatePer60Rate(e,n){return!n||n===0?0:e/n*3600}calculatePDO(e,n,r,o){if(!n||!o||n===0||o===0)return 100;const c=e/n*100,h=(1-r/o)*100;return c+h}calculateShootingEfficiency(e,n){return!n||n===0?1:e/n}calculateSavePerformance(e,n){return!n||n===0?0:1-e/n}calculateXGDiffPer60(e,n,r){const o=this.calculatePer60Rate(e,r),c=this.calculatePer60Rate(n,r);return o-c}calculateRegressionScore(e){const n=(h,g=0)=>h==null||isNaN(h)?g:parseFloat(h),r=this.calculateShootingEfficiency(n(e.goalsFor),n(e.xGoalsFor));this.calculateSavePerformance(n(e.goalsAgainst),n(e.xGoalsAgainst));const o=this.calculatePDO(n(e.goalsFor),n(e.shotsOnGoalFor),n(e.goalsAgainst),n(e.shotsOnGoalAgainst));let c=0;return r>1.1&&(c+=(r-1)*20),r<.9&&(c-=(1-r)*20),o>102&&(c+=(o-100)*2),o<98&&(c-=(100-o)*2),c}processTeamData(e){const n={...e},r=(o,c=0)=>o==null||isNaN(o)?c:parseFloat(o);return n.gamesPlayed=r(e.games_played,20),n.xGF_per60=this.calculatePer60Rate(r(e.xGoalsFor),r(e.iceTime)),n.xGA_per60=this.calculatePer60Rate(r(e.xGoalsAgainst),r(e.iceTime)),n.corsi_per60=this.calculatePer60Rate(r(e.shotAttemptsFor),r(e.iceTime)),n.fenwick_per60=this.calculatePer60Rate(r(e.unblockedShotAttemptsFor),r(e.iceTime)),n.highDanger_xGF_per60=this.calculatePer60Rate(r(e.highDangerxGoalsFor),r(e.iceTime)),n.highDanger_xGA_per60=this.calculatePer60Rate(r(e.highDangerxGoalsAgainst),r(e.iceTime)),n.scoreAdj_xGF_per60=this.calculatePer60Rate(r(e.scoreVenueAdjustedxGoalsFor),r(e.iceTime)),n.scoreAdj_xGA_per60=this.calculatePer60Rate(r(e.scoreVenueAdjustedxGoalsAgainst),r(e.iceTime)),e.situation==="5on4"&&(n.pp_efficiency=this.calculatePer60Rate(r(e.xGoalsFor),r(e.iceTime))),e.situation==="4on5"&&(n.pk_efficiency=this.calculatePer60Rate(r(e.xGoalsAgainst),r(e.iceTime))),n.pdo=this.calculatePDO(r(e.goalsFor),r(e.shotsOnGoalFor),r(e.goalsAgainst),r(e.shotsOnGoalAgainst)),n.shooting_efficiency=this.calculateShootingEfficiency(r(e.goalsFor),r(e.xGoalsFor)),n.save_performance=this.calculateSavePerformance(r(e.goalsAgainst),r(e.xGoalsAgainst)),n.xGD_per60=this.calculateXGDiffPer60(r(e.xGoalsFor),r(e.xGoalsAgainst),r(e.iceTime)),n.regression_score=this.calculateRegressionScore(e),n.situational_weight=this.getSituationalWeight(e.situation),n}getSituationalWeight(e){return{"5on5":.77,"5on4":.12,"4on5":.11,all:1,other:0}[e]||0}calculateDynamicSituationalWeights(e,n){const r=this.getTeamData(e,"all"),o=this.getTeamData(n,"all");if(!r||!o)return{"5on5":.77,"5on4":.12,"4on5":.11};const c=parseFloat(r.penalityMinutesFor)||0,h=parseFloat(o.penalityMinutesFor)||0,g=parseFloat(r.games_played)||1,p=c/g,T=h/g,S=p,b=T/60,w=S/60,z=1-b-w;return{"5on5":Math.max(.6,Math.min(.85,z)),"5on4":Math.max(.05,Math.min(.2,b)),"4on5":Math.max(.05,Math.min(.2,w))}}processAllTeams(){return this.rawData.map(e=>this.processTeamData(e))}getTeamsBySituation(e){return this.processedData.filter(n=>n.situation===e)}getTeamData(e,n="all"){return this.processedData.find(r=>r.team===e&&r.situation===n)}calculateLeagueAverage(){const e=this.getTeamsBySituation("5on5");if(!e||e.length===0)return 2.45;let n=0,r=0;e.forEach(v=>{n+=v.goalsFor||0,r+=v.scoreVenueAdjustedxGoalsFor||v.xGoalsFor||0});const c=1.215,h=e.map(v=>v.xGF_per60).filter(v=>v&&v>0);if(h.length===0)return 2.45;const g=h.reduce((v,T)=>v+T,0)/h.length,p=g*c;return console.log(`📊 League avg: base=${g.toFixed(2)} xGF/60, cal=${c.toFixed(3)}, result=${p.toFixed(2)} goals/60`),p}calculateRegressionWeight(e){return!e||e<0||e<5?.5:e<10?.4:e<20?.3:e<40?.2:.1}applyRegressionToMean(e,n,r){if(!e||e===0)return n;const o=this.calculateRegressionWeight(r);return e*(1-o)+n*o}getShootingTalent(e){const n=this.getTeamData(e,"5on5");if(!n||!n.goalsFor||!n.xGoalsFor)return 1;const r=n.goalsFor/n.xGoalsFor;return r>1.08?1.03:r<.92?.97:1}calculateExpectedGoals(e,n){const r=this.getTeamData(e,"5on5"),o=this.getTeamData(e,"5on4"),c=this.getTeamData(n,"4on5");if(!r)return 0;let h=r.xGF_per60*.77;if(o&&c){const g=(o.pp_efficiency-c.pk_efficiency)*.12;h+=g}return Math.max(0,h)}predictGameTotal(e,n){const r=this.predictTeamScore(e,n),o=this.predictTeamScore(n,e);return r+o}predictTeamScore(e,n,r=!1,o=null,c=null){const h=this.getTeamData(e,"5on5"),g=this.getTeamData(n,"5on5"),p=this.getTeamData(e,"5on4"),v=this.getTeamData(n,"4on5");if(!h||!g)return 0;const T=this.calculateLeagueAverage(),S=h.gamesPlayed||82,b=g.gamesPlayed||82,w=h.scoreAdj_xGF_per60||h.xGF_per60,z=g.scoreAdj_xGA_per60||g.xGA_per60,V=this.applyRegressionToMean(w,T,S),F=this.applyRegressionToMean(z,T,b),Y=this.calculatePDO(h.goalsFor,h.shotsOnGoalFor,h.goalsAgainst,h.shotsOnGoalAgainst),q=this.calculatePDO(g.goalsFor,g.shotsOnGoalFor,g.goalsAgainst,g.shotsOnGoalAgainst),ee=this.applyPDORegression(V,Y),ne=this.applyPDORegression(F,q),re=ee*.4+ne*.6,ye=this.getShootingTalent(e),P=re*ye,E=this.calculateDynamicSituationalWeights(e,n),D=E["5on5"]*60;let N=P/60*D;r&&(N*=1.058);let C=0;if(p&&v){const Ee=p.xGF_per60,ot=v.xGA_per60,X=this.applyRegressionToMean(Ee,T,S),se=this.applyRegressionToMean(ot,T,b),ke=(X*.4+se*.6)*ye,ze=E["5on4"]*60;C=ke/60*ze}let M=N+C;if(this.scheduleHelper){const Ee=this.scheduleHelper.getRestAdjustment(e,c);Ee!==0&&(M*=1+Ee,console.log(`  B2B adjustment for ${e}: ${Ee>0?"+":""}${(Ee*100).toFixed(1)}% (${M.toFixed(2)} goals)`))}const j=this.adjustForGoalie(M,n,o);return Math.max(0,j)}applyPDORegression(e,n){if(!n||n===100)return e;if(n>106){const r=Math.min(.02,(n-106)*.01);return e*(1-r)}else if(n<94){const r=Math.min(.02,(94-n)*.01);return e*(1+r)}return e}adjustForGoalie(e,n,r=null){if(!this.goalieProcessor)return e;let o=0;if(r)o=this.goalieProcessor.calculateGSAE(r,"5on5");else{const p=this.goalieProcessor.getTeamGoalies(n,"5on5");if(p&&p.length>0){let v=0,T=0;p.forEach(S=>{const b=parseFloat(S.games_played)||0,w=this.goalieProcessor.calculateGSAE(S.name,"5on5");v+=w*b,T+=b}),o=T>0?v/T:0}}const c=1+o*.001,h=r?1:.6,g=1+(c-1)*h;return Math.max(0,e*g)}probabilityToOdds(e){return e<=0||e>=1?0:e>=.5?Math.round(-1*(e/(1-e))*100):Math.round((1-e)/e*100)}oddsToProbability(e){return e<0?Math.abs(e)/(Math.abs(e)+100):100/(e+100)}calculateEV(e,n,r=100){if(e<=0||e>=1)return 0;let o;n>0?o=1+n/100:o=1+100/Math.abs(n);const c=r*o;return e*c-r}calculateKellyStake(e,n,r=1e3){if(e<=0||e>=1)return{fullKelly:0,fractionalKelly:0,recommendedStake:0};const o=n>0?n/100:100/Math.abs(n),c=e,h=1-c,g=(o*c-h)/o,p=Math.max(0,g*.25);return{fullKelly:g,fractionalKelly:p,recommendedStake:r*p}}normalCDF(e){const n=1/(1+.2316419*Math.abs(e)),o=.3989423*Math.exp(-e*e/2)*n*(.3193815+n*(-.3565638+n*(1.781478+n*(-1.821256+n*1.330274))));return e>0?1-o:o}factorial(e){if(e<=1)return 1;let n=1;for(let r=2;r<=e;r++)n*=r;return n}logFactorial(e){if(e<=1)return 0;let n=0;for(let r=2;r<=e;r++)n+=Math.log(r);return n}poissonPMF(e,n){if(n<=0||e<0)return 0;if(e>20){const r=e*Math.log(n)-n-this.logFactorial(e);return Math.exp(r)}return Math.pow(n,e)*Math.exp(-n)/this.factorial(e)}poissonCDF(e,n){if(n<=0)return 1;if(e<0)return 0;let r=0;const o=Math.floor(e);for(let c=0;c<=o;c++)r+=this.poissonPMF(c,n);return Math.min(1,r)}calculatePoissonWinProb(e,n){if(!e||!n||e<=0||n<=0)return .5;let r=0,o=0;for(let v=0;v<=10;v++){const T=this.poissonPMF(v,e);for(let S=0;S<=10;S++){const b=this.poissonPMF(S,n),w=T*b;v>S?r+=w:v===S&&(o+=w)}}const c=Math.abs(e-n),h=(e+n)/2,g=c/h;let p;return g<.1?p=.5:e>n?p=Math.min(.58,.52+g*.15):p=Math.max(.42,.48-g*.15),r+=o*p,Math.max(.05,Math.min(.95,r))}estimateWinProbability(e,n,r=!0){if(!e||!n)return .5;const o=e.team||e.name,c=n.team||n.name;if(!o||!c)return .5;let h,g;return r?(h=this.predictTeamScore(o,c,!0),g=this.predictTeamScore(c,o,!1)):(h=this.predictTeamScore(o,c,!1),g=this.predictTeamScore(c,o,!0)),this.calculatePoissonWinProb(h,g)}findRegressionCandidates(){const e=this.getTeamsBySituation("all"),n=e.filter(o=>o.regression_score>10).sort((o,c)=>c.regression_score-o.regression_score),r=e.filter(o=>o.regression_score<-10).sort((o,c)=>o.regression_score-c.regression_score);return{overperforming:n.slice(0,5),underperforming:r.slice(0,5)}}findSpecialTeamsMismatches(){const e=this.getTeamsBySituation("5on4"),n=this.getTeamsBySituation("4on5"),r=[];return e.forEach(o=>{n.forEach(c=>{if(o.team!==c.team){const h=o.pp_efficiency||0,g=c.pk_efficiency||0,p=h-g;p>2&&r.push({ppTeam:o.team,pkTeam:c.team,ppEfficiency:h,pkEfficiency:g,mismatch:p,recommendation:"BET OVER on "+o.team+" team total"})}})}),r.sort((o,c)=>c.mismatch-o.mismatch)}calculateBettingEdge(e,n){const r=1/n;return e-r}getTopBettingOpportunities(){const e=this.findRegressionCandidates(),n=this.findSpecialTeamsMismatches(),r=[];return e.overperforming.forEach(o=>{r.push({type:"REGRESSION",team:o.team,recommendation:"BET UNDER/AGAINST",reason:`Overperforming (PDO: ${o.pdo.toFixed(1)}, Shooting Eff: ${o.shooting_efficiency.toFixed(2)})`,confidence:Math.min(95,Math.abs(o.regression_score)*2),edge:Math.abs(o.regression_score)/10})}),e.underperforming.forEach(o=>{r.push({type:"REGRESSION",team:o.team,recommendation:"BET OVER/WITH",reason:`Underperforming (PDO: ${o.pdo.toFixed(1)}, Shooting Eff: ${o.shooting_efficiency.toFixed(2)})`,confidence:Math.min(95,Math.abs(o.regression_score)*2),edge:Math.abs(o.regression_score)/10})}),n.slice(0,3).forEach(o=>{r.push({type:"SPECIAL_TEAMS",team:o.ppTeam,recommendation:o.recommendation,reason:`PP vs PK mismatch (${o.mismatch.toFixed(1)} per 60)`,confidence:Math.min(90,o.mismatch*10),edge:o.mismatch/5})}),r.sort((o,c)=>c.edge-o.edge)}}async function bS(s=null){try{let e;try{if(e=await fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/teams.csv"),!e.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw file failed, trying local file..."),e=await fetch("/teams.csv")}if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.text();return new Promise((r,o)=>{$m.parse(n,{header:!0,skipEmptyLines:!0,transformHeader:c=>c.trim(),transform:c=>{if(c===""||c===null||c===void 0)return null;const h=c.toString().trim();return h===""||h==="null"||h==="undefined"?null:!isNaN(h)&&!isNaN(parseFloat(h))?parseFloat(h):h},complete:c=>{console.log("CSV parsing completed. Rows:",c.data.length),console.log("Parsing errors:",c.errors),c.errors.length>0&&console.warn("CSV parsing warnings:",c.errors);const h=c.data.filter(p=>p&&Object.keys(p).some(v=>p[v]!==null&&p[v]!==""));if(h.length===0){o(new Error("No valid data found in CSV file"));return}console.log("Clean data rows:",h.length);const g=new xS(h,null,s);r(g)},error:c=>{console.error("CSV parsing error:",c),o(c)}})})}catch(e){throw console.error("Error loading NHL data:",e),e}}async function TS(){const s=["https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/starting_goalies.json","/starting_goalies.json"];for(const e of s)try{const n=await fetch(e);if(!n.ok)continue;const r=await n.json();return console.log("✅ Loaded starting goalies:",r.games?.length||0,"games"),r}catch{console.log(`⚠️ Could not load from ${e}`)}return console.log("ℹ️ No starting goalies file found, using team averages"),null}async function SS(){try{let s;try{if(s=await fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/goalies.csv"),!s.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw file failed, trying local file..."),s=await fetch("/goalies.csv")}if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const e=await s.text();return new Promise((n,r)=>{$m.parse(e,{header:!0,skipEmptyLines:!0,transformHeader:o=>o.trim(),complete:o=>{const c=o.data.filter(h=>h&&h.name&&h.team&&h.situation);console.log(`✅ Loaded ${c.length} goalie records`),n(c)},error:o=>{console.error("Goalie CSV parsing error:",o),r(o)}})})}catch(s){throw console.error("Error loading goalies.csv:",s),s}}async function ES(){try{console.log("🏒 Loading Money file..."),console.log("🏒 Loading Total file...");let s,e;try{if([s,e]=await Promise.all([fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/odds_money.md"),fetch("https://raw.githubusercontent.com/dpk1212/nhl-savant/main/public/odds_total.md")]),!s.ok||!e.ok)throw new Error("GitHub fetch failed")}catch{console.log("GitHub raw files failed, trying local files..."),[s,e]=await Promise.all([fetch("/odds_money.md"),fetch("/odds_total.md")])}if(!s.ok||!e.ok)return console.warn("One or both odds files not found"),null;const n=await s.text(),r=await e.text();return console.log("✅ Both odds files loaded successfully"),{moneyText:n,totalText:r}}catch(s){return console.warn("Error loading odds files:",s),null}}class AS{constructor(e){this.goalieData=e}getGoalieStats(e,n){if(!this.goalieData||!Array.isArray(this.goalieData))return null;let r=this.goalieData.filter(z=>z.name===e&&z.team===n&&z.situation==="all");if(!r.length){const z=e.toLowerCase().trim();r=this.goalieData.filter(V=>{if(V.team!==n||V.situation!=="all")return!1;const F=V.name.toLowerCase(),Y=F.split(" ");return Y[Y.length-1]===z||F.includes(z)})}if(!r.length)return console.log(`ℹ️ Goalie stats not in database: ${e} (${n})`),null;const o=r[0],c=parseInt(o.games_played)||0;if(c===0)return console.warn(`No games played for: ${e}`),null;parseFloat(o.icetime);const h=parseFloat(o.xGoals)||0,g=parseFloat(o.goals)||0,p=parseFloat(o.ongoal)||0,v=h-g,T=p>0?1-g/p:.9,S=parseFloat(o.highDangerShots)||0,b=parseFloat(o.highDangerGoals)||0,w=S>0?1-b/S:.85;return{name:e,team:n,gamesPlayed:c,gsae:v.toFixed(2),savePct:(T*100).toFixed(1),hdSavePct:(w*100).toFixed(1),xGoalsAgainst:(h/c).toFixed(2),goalsAgainst:(g/c).toFixed(2),lowDangerSavePct:this.calculateLowDangerSavePct(o),mediumDangerSavePct:this.calculateMediumDangerSavePct(o),reboundControl:this.calculateReboundControl(o),recentForm:this.calculateRecentForm(v,c)}}calculateLowDangerSavePct(e){const n=parseFloat(e.lowDangerShots)||0,r=parseFloat(e.lowDangerGoals)||0;return n>0?((1-r/n)*100).toFixed(1):"97.0"}calculateMediumDangerSavePct(e){const n=parseFloat(e.mediumDangerShots)||0,r=parseFloat(e.mediumDangerGoals)||0;return n>0?((1-r/n)*100).toFixed(1):"92.0"}calculateReboundControl(e){const n=parseFloat(e.xRebounds)||0,r=parseFloat(e.rebounds)||0;if(n===0)return"Average";const o=r/n;return o<.9?"Excellent":o>1.15?"Poor":"Average"}calculateRecentForm(e,n){return n<5?"Limited Sample":e>5?"Hot":e<-3?"Cold":"Average"}getLeagueRank(e){const n=parseFloat(e);return n>10?{rank:5,tier:"ELITE"}:n>5?{rank:12,tier:"STRONG"}:n>-5?{rank:18,tier:"AVERAGE"}:{rank:28,tier:"WEAK"}}getGoalieFromStartingData(e,n){if(!n||!n.games)return null;const r=n.games.find(h=>h.away?.team===e||h.home?.team===e);if(!r)return null;const c=r.away?.team===e?r.away:r.home;return!c||!c.goalie?null:c.stats?c.stats:this.getGoalieStats(c.goalie,e)}}class wS{constructor(e){this.teamNameToCode=this.buildTeamMapping(),this.gamesByTeam=this.indexSchedule(e)}buildTeamMapping(){return{"Anaheim Ducks":"ANA","Arizona Coyotes":"ARI","Boston Bruins":"BOS","Buffalo Sabres":"BUF","Calgary Flames":"CGY","Carolina Hurricanes":"CAR","Chicago Blackhawks":"CHI","Colorado Avalanche":"COL","Columbus Blue Jackets":"CBJ","Dallas Stars":"DAL","Detroit Red Wings":"DET","Edmonton Oilers":"EDM","Florida Panthers":"FLA","Los Angeles Kings":"LAK","Minnesota Wild":"MIN","Montreal Canadiens":"MTL","Nashville Predators":"NSH","New Jersey Devils":"NJ","New York Islanders":"NYI","New York Rangers":"NYR","Ottawa Senators":"OTT","Philadelphia Flyers":"PHI","Pittsburgh Penguins":"PIT","San Jose Sharks":"SJ","Seattle Kraken":"SEA","St. Louis Blues":"STL","Tampa Bay Lightning":"TB","Toronto Maple Leafs":"TOR","Utah Mammoth":"UTA","Vancouver Canucks":"VAN","Vegas Golden Knights":"VEG","Washington Capitals":"WSH","Winnipeg Jets":"WPG"}}indexSchedule(e){const n={};return!e||!Array.isArray(e)?(console.warn("⚠️ Schedule data invalid, B2B disabled"),n):(e.forEach(r=>{const o=r.Date,c=r.Visitor,h=r.Home,g=this.teamNameToCode[c],p=this.teamNameToCode[h];if(!o||!g||!p){(c||h)&&console.warn(`⚠️ Could not map team names: ${c} vs ${h}`);return}n[g]||(n[g]=[]),n[p]||(n[p]=[]),n[g].push({date:o,opponent:p,location:"away",timestamp:this.parseDate(o)}),n[p].push({date:o,opponent:g,location:"home",timestamp:this.parseDate(o)})}),Object.values(n).forEach(r=>{r.sort((o,c)=>o.timestamp-c.timestamp)}),console.log(`✅ Indexed schedule for ${Object.keys(n).length} teams (2025-26 season)`),n)}parseDate(e){if(!e)return 0;if(e.includes("-")){const[n,r,o]=e.split("-");return new Date(n,r-1,o).getTime()}if(e.includes("/")){const[n,r,o]=e.split("/");return new Date(o,n-1,r).getTime()}return 0}getDaysRest(e,n){const r=this.gamesByTeam[e];if(!r||r.length===0)return null;const o=this.parseDate(n);if(!o)return null;const c=r.filter(g=>g.timestamp<o).sort((g,p)=>p.timestamp-g.timestamp)[0];return c?Math.floor((o-c.timestamp)/(1e3*60*60*24)):null}isBackToBack(e,n){return this.getDaysRest(e,n)===1}getRestAdjustment(e,n){const r=this.getDaysRest(e,n);return r===null?0:r===1?-.03:r===2?0:r>=3?.04:r<=0?-.04:0}getRestInfo(e,n){const r=this.getDaysRest(e,n),o=this.getRestAdjustment(e,n);return{daysRest:r,isB2B:r===1,adjustment:o,description:r===null?"Season start":r===1?"Back-to-back":r===2?"Normal rest":r>=3?`Extra rest (${r} days)`:"Unknown"}}}const gv={Minnesota:"MIN","N.Y. Rangers":"NYR",Seattle:"SEA",Philadelphia:"PHI",Buffalo:"BUF",Detroit:"DET",Montreal:"MTL",Winnipeg:"WPG",Calgary:"CGY",Carolina:"CAR",Vegas:"VGK","San Jose":"SJS","N.Y. Islanders":"NYI","New Jersey":"NJD",Toronto:"TOR",Vancouver:"VAN",Pittsburgh:"PIT",Washington:"WSH",Edmonton:"EDM",Ottawa:"OTT",Florida:"FLA",Boston:"BOS","Los Angeles":"LAK","St. Louis":"STL",Columbus:"CBJ",Dallas:"DAL",Anaheim:"ANA",Nashville:"NSH",Colorado:"COL",Utah:"UTA","Tampa Bay":"TBL",Chicago:"CHI"};function pv(s){if(!s||s.trim()==="")return console.warn("No odds data provided"),[];const e=[],n=s.split(`
`),r=new Date,o=["SUN","MON","TUE","WED","THU","FRI","SAT"],c=o[r.getDay()],h=r.getMonth()+1,g=r.getDate(),p=`${c} ${h}/${g}`,v=new Date(r);v.setDate(v.getDate()-1);const T=o[v.getDay()],S=v.getMonth()+1,b=v.getDate(),w=`${T} ${S}/${b}`;console.log(`🏒 Starting OddsTrader parser... Looking for: ${p} and ${w}`);for(let z=0;z<n.length;z++){const V=n[z];if(V.includes(p)||V.includes(w)){console.log(`
📅 Found game line at ${z}: ${V.substring(0,100)}...`);const ye=V.match(/\/\d{1,2}(\d{1,2}:\d{2} [AP]M)/);if(!ye){console.log("  ⚠️ No time found, skipping");continue}const P=ye[1];console.log(`  ⏰ Time: ${P}`);const E={gameTime:P,awayTeam:null,homeTeam:null,moneyline:{away:null,home:null},puckLine:{away:{spread:null,odds:null},home:{spread:null,odds:null}},total:{line:null,overLine:null,underLine:null,over:null,under:null}};for(const[M,j]of Object.entries(gv))if(V.includes(M)){E.awayTeam=j,console.log(`  🏒 Away team: ${M} (${j})`);break}const D=V.match(/(o|u)(\d+(?:½)?)\s*([-+]\d{3,})[A-Za-z]/);if(D){const M=D[1],j=D[2].replace("½",".5"),Ee=parseInt(D[3]);M==="o"?(E.total.overLine=parseFloat(j),E.total.over=Ee,console.log(`  📊 OVER ${j} ${Ee}`)):(E.total.underLine=parseFloat(j),E.total.under=Ee,console.log(`  📊 UNDER ${j} ${Ee}`))}else{const M=V.match(/([-+]\d{3,})(Bet365|Caesars|BetMGM|BetRivers|SugarHouse|FanDuel)/);M&&(E.moneyline.away=parseInt(M[1]),console.log(`  💰 Away odds: ${E.moneyline.away} (from ${M[2]})`))}const N=n[z+1];if(!N){console.log("  ⚠️ No next line found for home team, skipping");continue}for(const[M,j]of Object.entries(gv))if(N.includes(M)){E.homeTeam=j,console.log(`  🏒 Home team: ${M} (${j})`);break}const C=N.match(/(o|u)(\d+(?:½)?)\s*([-+]\d{3,})[A-Za-z]/);if(C){const M=C[1],j=C[2].replace("½",".5"),Ee=parseInt(C[3]);M==="o"?(E.total.overLine=parseFloat(j),E.total.over=Ee,console.log(`  📊 OVER ${j} ${Ee}`)):(E.total.underLine=parseFloat(j),E.total.under=Ee,console.log(`  📊 UNDER ${j} ${Ee}`))}else{const M=N.match(/([-+]\d{3,})(Bet365|Caesars|BetMGM|BetRivers|SugarHouse|FanDuel)/);M&&(E.moneyline.home=parseInt(M[1]),console.log(`  💰 Home odds: ${E.moneyline.home} (from ${M[2]})`))}E.awayTeam&&E.homeTeam?(E.total.overLine&&E.total.underLine?(E.total.overLine,E.total.underLine,E.total.line=E.total.overLine):E.total.overLine?E.total.line=E.total.overLine:E.total.underLine&&(E.total.line=E.total.underLine),E.date=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,e.push(E),console.log(`  ✅ Added game: ${E.awayTeam} @ ${E.homeTeam}`),console.log(`     Moneyline: ${E.moneyline.away}/${E.moneyline.home}`),console.log(`     Total: ${E.total.line?`O/U ${E.total.line} (${E.total.over}/${E.total.under})`:"N/A"}`)):console.log(`  ❌ Missing team data - away: ${E.awayTeam}, home: ${E.homeTeam}`)}const Y=new Date(r);Y.setDate(Y.getDate()+1);const q=o[Y.getDay()],ee=Y.getMonth()+1,ne=Y.getDate(),re=`${q} ${ee}/${ne}`;if(V.includes(re)){console.log(`
🛑 Reached tomorrow's games (${re}), stopping parser`);break}}return console.log(`
✅ Parsed ${e.length} games from OddsTrader`),e.length>0&&console.log("📋 Games:",e.map(z=>`${z.awayTeam} @ ${z.homeTeam}`).join(", ")),e}function Z1(s,e){console.log("🔄 Merging moneylines + totals...");const n=pv(s);console.log(`✅ Parsed ${n.length} games from Money file`);const r=pv(e);console.log(`✅ Parsed ${r.length} games from Total file`);const o=n.map((c,h)=>{const g=r[h];return g&&g.total&&g.total.line?{...c,total:g.total}:c});return console.log(`📋 Final merged games: ${o.map(c=>`${c.awayTeam} @ ${c.homeTeam}`).join(", ")}`),o}function RS(s){return!s||s.length===0?[]:s.map(e=>({away:e.awayTeam,home:e.homeTeam,time:e.time||"TBD"}))}class IS{constructor(e){this.dataProcessor=e,this.leagueAverages={},this.calculateLeagueAverages()}calculateLeagueAverages(){const e=this.dataProcessor.getTeamsBySituation("5on5");if(!e||e.length===0)return;["highDangerxGoalsFor","highDangerxGoalsAgainst","highDangerShotsFor","highDangerShotsAgainst","highDangerGoalsFor","highDangerGoalsAgainst","mediumDangerxGoalsFor","mediumDangerxGoalsAgainst","lowDangerxGoalsFor","lowDangerxGoalsAgainst","xReboundsFor","xReboundsAgainst","reboundGoalsFor","reboundGoalsAgainst","xGoalsFromActualReboundsOfShotsFor","xGoalsFromActualReboundsOfShotsAgainst","blockedShotAttemptsFor","blockedShotAttemptsAgainst","shotAttemptsFor","shotAttemptsAgainst","takeawaysFor","takeawaysAgainst","giveawaysFor","giveawaysAgainst","dZoneGiveawaysFor","dZoneGiveawaysAgainst","hitsFor","hitsAgainst","corsiPercentage","fenwickPercentage","xGoalsPercentage"].forEach(r=>{const o=e.map(c=>c[r]).filter(c=>c!=null&&!isNaN(c));o.length>0&&(this.leagueAverages[r]=o.reduce((c,h)=>c+h,0)/o.length)}),this.calculatePer60Averages()}calculatePer60Averages(){const e=this.dataProcessor.getTeamsBySituation("5on5");if(!e||e.length===0)return;const n=[];e.forEach(r=>{const c=(r.iceTime||1)/60;n.push({hdXgfPer60:(r.highDangerxGoalsFor||0)/c*60,hdXgaPer60:(r.highDangerxGoalsAgainst||0)/c*60,rebXgfPer60:(r.xGoalsFromActualReboundsOfShotsFor||0)/c*60,rebXgaPer60:(r.xGoalsFromActualReboundsOfShotsAgainst||0)/c*60,blocksPer60:(r.blockedShotAttemptsFor||0)/c*60,blocksAgainstPer60:(r.blockedShotAttemptsAgainst||0)/c*60})}),this.leagueAverages.hdXgfPer60=this.avg(n.map(r=>r.hdXgfPer60)),this.leagueAverages.hdXgaPer60=this.avg(n.map(r=>r.hdXgaPer60)),this.leagueAverages.rebXgfPer60=this.avg(n.map(r=>r.rebXgfPer60)),this.leagueAverages.rebXgaPer60=this.avg(n.map(r=>r.rebXgaPer60)),this.leagueAverages.blocksPer60=this.avg(n.map(r=>r.blocksPer60)),this.leagueAverages.blocksAgainstPer60=this.avg(n.map(r=>r.blocksAgainstPer60))}avg(e){return e.reduce((n,r)=>n+r,0)/e.length}getPercentileRank(e,n,r="5on5"){const o=this.dataProcessor.getTeamsBySituation(r);if(!o||o.length===0)return 50;const c=o.find(v=>v.team===e);if(!c||c[n]===void 0)return 50;const h=c[n],g=o.map(v=>v[n]).filter(v=>v!=null&&!isNaN(v)).sort((v,T)=>v-T),p=g.findIndex(v=>v>=h);return Math.round(p/g.length*100)}getLeagueRank(e,n,r="5on5",o=!0){const c=this.dataProcessor.getTeamsBySituation(r);if(!c||c.length===0)return null;const h=c.find(v=>v.team===e);return!h||h[n]===void 0?null:c.map(v=>({team:v.team,value:v[n]||0})).sort((v,T)=>o?T.value-v.value:v.value-T.value).findIndex(v=>v.team===e)+1}getHighDangerMetrics(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);if(!r)return null;const c=(r.iceTime||1)/60;return{hdXgFor:r.highDangerxGoalsFor||0,hdXgAgainst:r.highDangerxGoalsAgainst||0,hdXgfPer60:(r.highDangerxGoalsFor||0)/c*60,hdXgaPer60:(r.highDangerxGoalsAgainst||0)/c*60,hdShotsFor:r.highDangerShotsFor||0,hdShotsAgainst:r.highDangerShotsAgainst||0,hdGoalsFor:r.highDangerGoalsFor||0,hdGoalsAgainst:r.highDangerGoalsAgainst||0,hdConversionRate:r.highDangerShotsFor>0?r.highDangerGoalsFor/r.highDangerShotsFor*100:0,hdSavePercent:r.highDangerShotsAgainst>0?(r.highDangerShotsAgainst-r.highDangerGoalsAgainst)/r.highDangerShotsAgainst*100:0}}getReboundMetrics(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);if(!r)return null;const c=(r.iceTime||1)/60;return{xRebFor:r.xReboundsFor||0,xRebAgainst:r.xReboundsAgainst||0,rebXgFor:r.xGoalsFromActualReboundsOfShotsFor||0,rebXgAgainst:r.xGoalsFromActualReboundsOfShotsAgainst||0,rebXgfPer60:(r.xGoalsFromActualReboundsOfShotsFor||0)/c*60,rebXgaPer60:(r.xGoalsFromActualReboundsOfShotsAgainst||0)/c*60,rebGoalsFor:r.reboundGoalsFor||0,rebGoalsAgainst:r.reboundGoalsAgainst||0,rebConversion:r.xReboundsFor>0?r.reboundGoalsFor/r.xReboundsFor*100:0}}getPhysicalMetrics(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);if(!r)return null;const c=(r.iceTime||1)/60,h=r.shotAttemptsFor||0,g=r.shotAttemptsAgainst||0;return{blockedShots:r.blockedShotAttemptsFor||0,blockedShotsAgainst:r.blockedShotAttemptsAgainst||0,blockingRate:g>0?r.blockedShotAttemptsAgainst/g*100:0,blocksGiven:h>0?r.blockedShotAttemptsFor/h*100:0,hits:r.hitsFor||0,hitsAgainst:r.hitsAgainst||0,hitsPer60:(r.hitsFor||0)/c,takeaways:r.takeawaysFor||0,giveaways:r.giveawaysFor||0,takeawaysPer60:(r.takeawaysFor||0)/c,giveawaysPer60:(r.giveawaysFor||0)/c,dZoneGiveaways:r.dZoneGiveawaysFor||0,dZoneGiveawaysPer60:(r.dZoneGiveawaysFor||0)/c}}getDangerZoneBreakdown(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);return r?{offense:{low:{shots:r.lowDangerShotsFor||0,xGoals:r.lowDangerxGoalsFor||0,goals:r.lowDangerGoalsFor||0},medium:{shots:r.mediumDangerShotsFor||0,xGoals:r.mediumDangerxGoalsFor||0,goals:r.mediumDangerGoalsFor||0},high:{shots:r.highDangerShotsFor||0,xGoals:r.highDangerxGoalsFor||0,goals:r.highDangerGoalsFor||0}},defense:{low:{shots:r.lowDangerShotsAgainst||0,xGoals:r.lowDangerxGoalsAgainst||0,goals:r.lowDangerGoalsAgainst||0},medium:{shots:r.mediumDangerShotsAgainst||0,xGoals:r.mediumDangerxGoalsAgainst||0,goals:r.mediumDangerGoalsAgainst||0},high:{shots:r.highDangerShotsAgainst||0,xGoals:r.highDangerxGoalsAgainst||0,goals:r.highDangerGoalsAgainst||0}}}:null}getRegressionIndicators(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);if(!r)return null;const o=r.shotsOnGoalFor||0,c=r.goalsFor||0,h=r.shotsOnGoalAgainst||0,g=r.goalsAgainst||0,p=o>0?c/o*100:0,v=h>0?(h-g)/h*100:0,T=p+v,S=r.scoreVenueAdjustedxGoalsFor||r.xGoalsFor||0,b=o>0?S/o*100:0,w=p-b;return{pdo:T,shootingPct:p,savePct:v,expectedShPct:b,shPctDiff:w,goalsVsExpected:c-S,isUnderperforming:c<S*.9,isOverperforming:c>S*1.1,regressionExpected:Math.abs(w)>1.5?w:0}}getPossessionMetrics(e,n="5on5"){const r=this.dataProcessor.getTeamData(e,n);return r?{corsiPct:(r.corsiPercentage||.5)*100,fenwickPct:(r.fenwickPercentage||.5)*100,xGoalsPct:(r.xGoalsPercentage||.5)*100,shotAttempts:r.shotAttemptsFor||0,shotAttemptsAgainst:r.shotAttemptsAgainst||0,faceoffWins:r.faceOffsWonFor||0,faceoffLosses:r.faceOffsWonAgainst||0,faceoffPct:r.faceOffsWonFor+r.faceOffsWonAgainst>0?r.faceOffsWonFor/(r.faceOffsWonFor+r.faceOffsWonAgainst)*100:50}:null}getTier(e){return!e||e<1?"AVERAGE":e<=3?"ELITE":e<=10?"STRONG":e<=22?"AVERAGE":"WEAK"}getStatWithContext(e,n,r="5on5",o=!0){const c=this.dataProcessor.getTeamData(e,r);if(!c)return null;const h=c[n];if(h==null)return null;const g=this.getLeagueRank(e,n,r,o),p=this.getPercentileRank(e,n,r),v=this.leagueAverages[n]||0;return{value:h,rank:g,percentile:p,leagueAvg:v,vsLeague:h-v,vsLeaguePct:v>0?(h-v)/v*100:0,tier:this.getTier(g)}}getSpecialTeamsMetrics(e){const n=this.dataProcessor.getTeamData(e,"5on4"),r=this.dataProcessor.getTeamData(e,"4on5");return!n&&!r?null:{powerPlay:n?{xGF_per60:n.xGF_per60||0,hdXgF_per60:n.highDangerxGoalsFor?n.highDangerxGoalsFor/(n.iceTime/3600):0,rank:this.getLeagueRank(e,"xGF_per60","5on4",!0)}:null,penaltyKill:r?{xGA_per60:r.xGA_per60||0,hdXgA_per60:r.highDangerxGoalsAgainst?r.highDangerxGoalsAgainst/(r.iceTime/3600):0,rank:this.getLeagueRank(e,"xGA_per60","4on5",!1)}:null}}getGoalieMetrics(e,n){if(!n)return null;const r=n.getGoaliesByTeam(e);if(!r||r.length===0)return null;let o=0,c=0,h=0;return r.forEach(g=>{o+=g.goalsagainstextexpected||0,c+=g.highDangerSavePercentage||0,h++}),{avgGSAE:h>0?o/h:0,avgHDSavePercentage:h>0?c/h:0,goalieCount:h}}}class CS{constructor(e){this.analyzer=e}getKeyFactors(e,n,r="TOTAL"){return r==="TOTAL"?this.getTotalBetFactors(e,n):r==="MONEYLINE"?this.getMoneylineFactors(e,n):r==="PUCKLINE"?this.getPucklineFactors(e,n):[]}getTotalBetFactors(e,n){const r=[],o=this.calculateHighDangerFactor(e,n);o&&r.push(o);const c=this.calculateReboundFactor(e,n);c&&r.push(c);const h=this.calculatePhysicalFactor(e,n);h&&r.push(h);const g=this.calculateDisciplineFactor(e,n);g&&r.push(g);const p=this.calculateSpecialTeamsFactor(e,n);p&&r.push(p);const v=this.calculateRegressionFactor(e,n);return v&&r.push(v),r}calculateHighDangerFactor(e,n){const r=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(n);if(!r||!o)return null;const c=r.hdXgfPer60-o.hdXgaPer60,h=o.hdXgfPer60-r.hdXgaPer60,p=(c+h)/2*.25,v=this.analyzer.getLeagueRank(e,"highDangerxGoalsFor","5on5",!0),T=this.analyzer.getLeagueRank(n,"highDangerxGoalsAgainst","5on5",!1),S=c>h?e:h>c?n:"even";return{name:"High-Danger Shot Quality",importance:"CRITICAL",stars:3,impact:p,awayMetric:{value:r.hdXgfPer60,rank:v,label:`${e} Offense (HD-xGF/60)`,detail:`${r.hdGoalsFor} HD goals scored`},homeMetric:{value:o.hdXgaPer60,rank:T,label:`${n} Defense (HD-xGA/60)`,detail:`${o.hdGoalsAgainst} HD goals allowed`},leagueAvg:this.analyzer.leagueAverages.hdXgfPer60||.85,explanation:S==="even"?"Evenly matched high-danger shot creation and prevention. Both teams effective in key scoring areas.":`${S} has the edge in high-danger situations. ${Math.abs(p)>.05?`Quality scoring chances favor this matchup by ~${Math.abs(p*3).toFixed(1)} HD shots/game.`:"Marginal difference in quality chances."}`,dataPoints:{awayHDShots:r.hdShotsFor,homeHDAllowed:o.hdShotsAgainst,awayAdvantage:c,homeAdvantage:h}}}calculateReboundFactor(e,n){const r=this.analyzer.getReboundMetrics(e),o=this.analyzer.getReboundMetrics(n);if(!r||!o)return null;const c=r.rebXgfPer60-o.rebXgaPer60,h=o.rebXgfPer60-r.rebXgaPer60,p=(c+h)/2*.15,v=c>h?e:h>c?n:"even";return{name:"Rebound Control & Second Chances",importance:"CRITICAL",stars:3,impact:p,awayMetric:{value:r.rebXgfPer60,rank:this.analyzer.getLeagueRank(e,"xReboundsFor","5on5",!0),label:`${e} Offense (Reb xGF/60)`,detail:`${r.rebGoalsFor} rebound goals scored`},homeMetric:{value:o.rebXgaPer60,rank:this.analyzer.getLeagueRank(n,"xReboundsAgainst","5on5",!1),label:`${n} Defense (Reb xGA/60)`,detail:`${o.rebGoalsAgainst} rebound goals allowed`},leagueAvg:this.analyzer.leagueAverages.rebXgfPer60||10,explanation:v==="even"?"Evenly matched rebound creation and control. Expect typical second-chance opportunities.":`${v} creates more second-chance opportunities in this matchup. ${Math.abs(p)>.05?`Could add ~${Math.abs(p*2).toFixed(1)} extra scoring chances.`:"Minor impact on total scoring."}`,dataPoints:{awayRebGoals:r.rebGoalsFor,homeRebAllowed:o.rebGoalsAgainst,awayAdvantage:c,homeAdvantage:h}}}calculatePhysicalFactor(e,n){const r=this.analyzer.getPhysicalMetrics(e),o=this.analyzer.getPhysicalMetrics(n);if(!r||!o)return null;o.blockedShotsAgainst,r.blockedShotsAgainst;const c=this.analyzer.leagueAverages.blocksAgainstPer60||30,g=-(((r.blockingRate+o.blockingRate)/2-c)/5)*.08,p=this.analyzer.getLeagueRank(n,"blockedShotAttemptsAgainst","5on5",!0);return{name:"Shot Blocking & Physical Defense",importance:"HIGH",stars:2,impact:g,awayMetric:{value:r.blockingRate,label:`${e} Shot Block %`,detail:`${r.blockedShotsAgainst} blocks`},homeMetric:{value:o.blockingRate,rank:p,label:`${n} Shot Block %`,detail:`${o.blockedShotsAgainst} blocks`},leagueAvg:c,explanation:`Physical teams that block shots effectively reduce scoring chances. ${g<0?`Above-average blocking removes ${Math.abs(g*10).toFixed(1)} shot attempts/game.`:"Below-average blocking allows more dangerous attempts."}`,dataPoints:{awayBlocks:r.blockedShotsAgainst,homeBlocks:o.blockedShotsAgainst,awayHits:r.hits,homeHits:o.hits}}}calculateDisciplineFactor(e,n){const r=this.analyzer.getPhysicalMetrics(e),o=this.analyzer.getPhysicalMetrics(n);if(!r||!o)return null;const c=this.analyzer.leagueAverages.dZoneGiveawaysFor||12,h=(r.dZoneGiveawaysPer60+o.dZoneGiveawaysPer60)/2,p=(c-h)*.02,v=this.analyzer.leagueAverages.takeawaysFor||7,S=((r.takeawaysPer60+o.takeawaysPer60)/2-v)*.015,b=p+S;return{name:"Defensive Zone Discipline",importance:"HIGH",stars:2,impact:-Math.abs(b),awayMetric:{value:r.dZoneGiveaways,label:`${e} DZ Giveaways`,detail:`${r.takeaways} takeaways`},homeMetric:{value:o.dZoneGiveaways,label:`${n} DZ Giveaways`,detail:`${o.takeaways} takeaways`},leagueAvg:c,explanation:`Careful puck management in the defensive zone prevents high-danger chances. ${b<0?"Both teams are disciplined, limiting turnovers.":"Defensive mistakes create extra opportunities."}`,dataPoints:{awayDZGA:r.dZoneGiveaways,homeDZGA:o.dZoneGiveaways,awayTakeaways:r.takeaways,homeTakeaways:o.takeaways}}}calculateSpecialTeamsFactor(e,n){const r=this.analyzer.getHighDangerMetrics(e,"5on4"),o=this.analyzer.getHighDangerMetrics(n,"4on5"),c=this.analyzer.getHighDangerMetrics(n,"5on4"),h=this.analyzer.getHighDangerMetrics(e,"4on5");if(!r||!o||!c||!h)return null;const g=(r.hdXgfPer60||0)-(o.hdXgaPer60||0),p=(c.hdXgfPer60||0)-(h.hdXgaPer60||0),T=(g+p)/2*.07;return{name:"Special Teams Matchup",importance:"HIGH",stars:2,impact:T,awayMetric:{value:r.hdXgfPer60||0,label:`${e} PP HD-xGF/60`,detail:`vs ${o.hdXgaPer60?.toFixed(2)||0} PK`},homeMetric:{value:c.hdXgfPer60||0,label:`${n} PP HD-xGF/60`,detail:`vs ${h.hdXgaPer60?.toFixed(2)||0} PK`},leagueAvg:8.5,explanation:`Power plays account for ~7% of game time but can swing totals significantly. ${Math.abs(T)<.1?"Both matchups are balanced - PP and PK quality neutralize.":T>0?`Power plays have the advantage, adding ${T.toFixed(2)} expected goals.`:"Penalty kills are dominant, limiting PP opportunities."}`,dataPoints:{awayPPQuality:r.hdXgfPer60,homePKQuality:o.hdXgaPer60,homePPQuality:c.hdXgfPer60,awayPKQuality:h.hdXgaPer60}}}calculateRegressionFactor(e,n){const r=this.analyzer.getRegressionIndicators(e),o=this.analyzer.getRegressionIndicators(n);if(!r||!o)return null;const c=r.goalsVsExpected/(r.gamesSoFar||8),h=o.goalsVsExpected/(o.gamesSoFar||8),g=(c+h)*-.4;return{name:"Shooting Talent vs Luck",importance:"MODERATE",stars:1,impact:g,awayMetric:{value:r.shootingPct,label:`${e} Shooting %`,detail:`${r.pdo.toFixed(1)} PDO`},homeMetric:{value:o.shootingPct,label:`${n} Shooting %`,detail:`${o.pdo.toFixed(1)} PDO`},leagueAvg:r.expectedShPct||10,explanation:`Teams shooting ${r.isUnderperforming||o.isUnderperforming?"below":"above"} their expected rates should regress toward the mean. ${g<0?`Cold shooting is due for a bounce-back, adding ~${Math.abs(g).toFixed(2)} goals.`:"Hot shooting should cool off slightly."}`,dataPoints:{awayPDO:r.pdo,homePDO:o.pdo,awayGoalsVsXg:r.goalsVsExpected,homeGoalsVsXg:o.goalsVsExpected}}}generateStory(e,n,r){if(!e||e.length===0)return"Analyzing statistical matchup...";const c=[...e].sort((S,b)=>Math.abs(b.impact)-Math.abs(S.impact)).slice(0,3),h=e.reduce((S,b)=>S+b.impact,0),g=h<0;let p="";const v=c[0];v.importance==="CRITICAL"&&(p+=`${v.name.toLowerCase()} is the key driver. `),g?p+="Strong defensive metrics suggest a low-scoring affair. ":p+="Offensive advantages point to a higher-scoring game. ",c.forEach((S,b)=>{if(b<2&&S.explanation){const w=S.explanation.split(".")[0];w&&w.length<100&&(p+=w+". ")}});const T=Math.abs(h);return T>.5?p+=`Combined factors create a ${T.toFixed(1)}-goal edge ${g?"UNDER":"OVER"} market expectations.`:p+="Statistical edges are modest, suggesting the market line is fairly efficient.",p}calculateTotalImpact(e){return!e||e.length===0?0:e.reduce((n,r)=>n+r.impact,0)}getMoneylineFactors(e,n){const r=[],o=this.calculateExpectedGoalsDifferential(e,n);o&&r.push(o);const c=this.calculateGoalieAdvantage(e,n);c&&r.push(c);const h=this.calculateOffensiveRating(e,n);h&&r.push(h);const g=this.calculateDefensiveRating(e,n);g&&r.push(g);const p=this.calculateSpecialTeamsEdge(e,n);p&&r.push(p);const v=this.calculatePossessionAdvantage(e,n);return v&&r.push(v),r}calculateExpectedGoalsDifferential(e,n){const r=this.analyzer.dataProcessor.getTeamData(e,"5on5"),o=this.analyzer.dataProcessor.getTeamData(n,"5on5");if(!r||!o)return null;const c=r.iceTime/60,h=o.iceTime/60,g=(r.xGoalsFor||0)/c*60,p=(r.xGoalsAgainst||0)/c*60,v=(o.xGoalsFor||0)/h*60,T=(o.xGoalsAgainst||0)/h*60,S=(g+T)/2,b=(v+p)/2,w=S-b;return{name:"Expected Goals",importance:"CRITICAL",stars:3,impact:w,awayMetric:{value:S,rank:this.analyzer.getLeagueRank(e,"xGoalsFor","5on5",!0),label:`${e} Expected Goals`,detail:`${g.toFixed(2)} xGF/60`},homeMetric:{value:b,rank:this.analyzer.getLeagueRank(n,"xGoalsFor","5on5",!0),label:`${n} Expected Goals`,detail:`${v.toFixed(2)} xGF/60`},leagueAvg:2.8,explanation:w>0?`${e} projects to score ${Math.abs(w).toFixed(2)} more goals based on shot quality.`:`${n} projects to score ${Math.abs(w).toFixed(2)} more goals based on shot quality.`,dataPoints:{awayXgf:g,awayXga:p,homeXgf:v,homeXga:T}}}calculateGoalieAdvantage(e,n){return null}calculateOffensiveRating(e,n){const r=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(n);if(!r||!o)return null;const c=r.hdXgfPer60||0,h=o.hdXgfPer60||0,g=c-h;return{name:"Offensive Rating",importance:"HIGH",stars:2,impact:g*.2,awayMetric:{value:c,rank:this.analyzer.getLeagueRank(e,"highDangerxGoalsFor","5on5",!0),label:`${e} HD-xGF/60`,detail:`${r.hdGoalsFor} HD goals`},homeMetric:{value:h,rank:this.analyzer.getLeagueRank(n,"highDangerxGoalsFor","5on5",!0),label:`${n} HD-xGF/60`,detail:`${o.hdGoalsFor} HD goals`},leagueAvg:.85,explanation:g>0?`${e} generates ${(g/h*100).toFixed(0)}% more high-danger chances.`:`${n} generates ${(Math.abs(g)/c*100).toFixed(0)}% more high-danger chances.`,dataPoints:{awayHDGoals:r.hdGoalsFor,homeHDGoals:o.hdGoalsFor}}}calculateDefensiveRating(e,n){const r=this.analyzer.getHighDangerMetrics(e),o=this.analyzer.getHighDangerMetrics(n);if(!r||!o)return null;const c=r.hdXgaPer60||0,h=o.hdXgaPer60||0,g=h-c;return{name:"Defensive Rating",importance:"HIGH",stars:2,impact:g*.2,awayMetric:{value:c,rank:this.analyzer.getLeagueRank(e,"highDangerxGoalsAgainst","5on5",!1),label:`${e} HD-xGA/60`,detail:`${r.hdGoalsAgainst} HD goals allowed`},homeMetric:{value:h,rank:this.analyzer.getLeagueRank(n,"highDangerxGoalsAgainst","5on5",!1),label:`${n} HD-xGA/60`,detail:`${o.hdGoalsAgainst} HD goals allowed`},leagueAvg:.85,explanation:g>0?`${e} allows ${(g/h*100).toFixed(0)}% fewer high-danger chances.`:`${n} allows ${(Math.abs(g)/c*100).toFixed(0)}% fewer high-danger chances.`,dataPoints:{awayHDAllowed:r.hdGoalsAgainst,homeHDAllowed:o.hdGoalsAgainst}}}calculateSpecialTeamsEdge(e,n){const r=this.analyzer.getHighDangerMetrics(e,"5on4"),o=this.analyzer.getHighDangerMetrics(n,"5on4");if(!r||!o)return null;const c=r.hdXgfPer60||0,h=o.hdXgfPer60||0,g=c-h;return{name:"Special Teams",importance:"MODERATE",stars:1,impact:g*.05,awayMetric:{value:c,label:`${e} PP Quality`,detail:`${c.toFixed(2)} HD-xGF/60`},homeMetric:{value:h,label:`${n} PP Quality`,detail:`${h.toFixed(2)} HD-xGF/60`},leagueAvg:8.5,explanation:g>0?`${e} has superior power play execution.`:`${n} has superior power play execution.`,dataPoints:{awayPP:c,homePP:h}}}calculatePossessionAdvantage(e,n){const r=this.analyzer.getPossessionMetrics(e),o=this.analyzer.getPossessionMetrics(n);if(!r||!o)return null;const c=r.corsiForPct||50,h=o.corsiForPct||50,g=c-h;return{name:"Possession & Control",importance:"MODERATE",stars:1,impact:g*.02,awayMetric:{value:c,label:`${e} Corsi%`,detail:`${r.shotsForPct?.toFixed(1)}% shots`},homeMetric:{value:h,label:`${n} Corsi%`,detail:`${o.shotsForPct?.toFixed(1)}% shots`},leagueAvg:50,explanation:g>0?`${e} controls ${Math.abs(g).toFixed(1)}% more of the play.`:`${n} controls ${Math.abs(g).toFixed(1)}% more of the play.`,dataPoints:{awayCF:c,homeCF:h,awaySF:r.shotsForPct,homeSF:o.shotsForPct}}}getPucklineFactors(e,n){return[]}}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),yv=s=>{const e=jS(s);return e.charAt(0).toUpperCase()+e.slice(1)},J1=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),NS=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=ce.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:h,...g},p)=>ce.createElement("svg",{ref:p,...OS,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:J1("lucide",o),...!c&&!NS(g)&&{"aria-hidden":"true"},...g},[...h.map(([v,T])=>ce.createElement(v,T)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(s,e)=>{const n=ce.forwardRef(({className:r,...o},c)=>ce.createElement(PS,{ref:c,iconNode:e,className:J1(`lucide-${DS(yv(s))}`,`lucide-${s}`,r),...o}));return n.displayName=yv(s),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ro=it("activity",kS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],zS=it("arrow-right",MS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],qm=it("award",VS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Mu=it("book-open",LS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Za=it("calendar",BS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ch=it("chart-column",FS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mm=it("chevron-down",US);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gm=it("chevron-up",GS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],e_=it("circle-alert",HS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],t_=it("circle-check-big",$S);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],WS=it("clock",qS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],XS=it("code",KS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],YS=it("database",QS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],JS=it("dollar-sign",ZS);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],tE=it("download",eE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],iE=it("menu",nE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],$r=it("shield",rE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],aE=it("star",sE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ji=it("target",oE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],vv=it("trending-down",lE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],nr=it("trending-up",cE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hE=it("triangle-alert",uE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],fE=it("trophy",dE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gE=it("x",mE);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],n_=it("zap",pE),yE=()=>{const s=oS(),[e,n]=ce.useState(!1),r=[{path:"/",label:"Today's Games",icon:"🎯"},{path:"/dashboard",label:"Dashboard",icon:"📊"},{path:"/performance",label:"Performance",icon:"📈"},{path:"/methodology",label:"Methodology",icon:"📚"},{path:"/inspector",label:"Data Inspector",icon:"🔍"}];return d.jsxs("nav",{style:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"var(--color-background)",borderBottom:"1px solid var(--color-border)",padding:"0.75rem 1rem"},children:[d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx(qu,{to:"/",style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--color-accent)",textDecoration:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:"🏒 NHL Savant"}),d.jsx("div",{className:"desktop-nav",style:{display:"none",gap:"0.5rem"},children:r.map(o=>d.jsxs(qu,{to:o.path,style:{padding:"0.5rem 0.875rem",borderRadius:"6px",fontSize:"0.875rem",fontWeight:"500",textDecoration:"none",color:s.pathname===o.path?"var(--color-accent)":"var(--color-text-secondary)",backgroundColor:s.pathname===o.path?"rgba(212, 175, 55, 0.1)":"transparent",transition:"all 0.2s",whiteSpace:"nowrap"},children:[d.jsx("span",{style:{marginRight:"0.375rem"},children:o.icon}),o.label]},o.path))}),d.jsx("button",{className:"mobile-menu-btn",onClick:()=>n(!e),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"transparent",border:"1px solid var(--color-border)",borderRadius:"6px",color:"var(--color-text-primary)",cursor:"pointer"},children:e?d.jsx(gE,{size:20}):d.jsx(iE,{size:20})})]}),e&&d.jsx("div",{className:"mobile-nav",style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"var(--color-background)",borderBottom:"1px solid var(--color-border)",padding:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)"},children:r.map(o=>d.jsxs(qu,{to:o.path,onClick:()=>n(!1),style:{display:"block",padding:"0.875rem 1rem",borderRadius:"6px",fontSize:"0.938rem",fontWeight:"500",textDecoration:"none",color:s.pathname===o.path?"var(--color-accent)":"var(--color-text-secondary)",backgroundColor:s.pathname===o.path?"rgba(212, 175, 55, 0.1)":"transparent",marginBottom:"0.25rem"},children:[d.jsx("span",{style:{marginRight:"0.5rem",fontSize:"1.125rem"},children:o.icon}),o.label]},o.path))}),d.jsx("style",{children:`
        @media (min-width: 768px) {
          .desktop-nav { display: flex !important; }
          .mobile-menu-btn { display: none !important; }
        }
        @media (max-width: 767px) {
          .desktop-nav { display: none !important; }
          .mobile-menu-btn { display: flex !important; }
        }
      `})]})},vE=({dataProcessor:s,loading:e,error:n})=>{if(e)return d.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 mb-6",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"animate-spin",children:d.jsx(YS,{className:"w-5 h-5 text-yellow-400"})}),d.jsx("span",{className:"text-gray-300",children:"Loading NHL data..."})]})});if(n)return d.jsx("div",{className:"bg-red-900/30 border border-red-500 rounded-lg p-4 mb-6",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(e_,{className:"w-5 h-5 text-red-400"}),d.jsx("span",{className:"text-red-300",children:n})]})});if(!s)return null;const r=s.processedData?.length||0,o=[...new Set(s.processedData.map(h=>h.name))].length,c=[...new Set(s.processedData.map(h=>h.situation))].length;return d.jsx("div",{className:"bg-gradient-to-r from-green-900/30 to-green-900/10 border border-green-500/50 rounded-lg p-4 mb-6",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(t_,{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-green-300 mb-1",children:"Data Verified & Loaded"}),d.jsxs("div",{className:"grid grid-cols-3 gap-6 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Data Points: "}),d.jsx("span",{className:"font-bold text-white",children:r})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Teams: "}),d.jsx("span",{className:"font-bold text-white",children:o})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Situations: "}),d.jsx("span",{className:"font-bold text-white",children:c})]})]}),d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"All calculations verified and ready for analysis"})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-xs text-gray-400",children:"Source:"}),d.jsx("p",{className:"text-xs text-gray-300 font-mono",children:"nhl_data.csv"})]})]})})},_E=({dataProcessor:s,loading:e,error:n})=>{const[r,o]=ce.useState([]),[c,h]=ce.useState(null),[g,p]=ce.useState(!1);ce.useEffect(()=>{const T=()=>{p(window.innerWidth<=640)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),ce.useEffect(()=>{if(s){const T=s.getTopBettingOpportunities();o(T);const S=s.getTeamsBySituation("all"),b=S.reduce((V,F)=>V+F.pdo,0)/S.length,w=S.reduce((V,F)=>V+F.xGD_per60,0)/S.length,z=s.findRegressionCandidates();h({totalTeams:S.length,avgPDO:b.toFixed(1),avgXGD:w.toFixed(2),overperformingTeams:z.overperforming.length,underperformingTeams:z.underperforming.length})}},[s]);const v=T=>T>=70?"high":T>=50?"medium":"low";return d.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},className:"animate-fade-in",children:[d.jsxs("div",{style:{padding:g?"2rem 1rem 1.5rem":"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"500px",height:"500px",background:"radial-gradient(circle, var(--color-accent-glow) 0%, transparent 70%)",opacity:.3,pointerEvents:"none"}}),d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[d.jsx("div",{style:{width:"44px",height:"44px",background:"linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px var(--color-accent-glow)"},children:d.jsx(ch,{size:24,color:"var(--color-background)",strokeWidth:2.5})}),d.jsx("h1",{className:"text-gradient",style:{fontSize:g?"1.75rem":"2.25rem",fontWeight:"800"},children:"Analytics Dashboard"})]}),d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:g?"0.875rem":"0.938rem",lineHeight:"1.7",maxWidth:"800px",marginLeft:g?"0":"60px"},children:"Real-time statistical overview of betting opportunities based on institutional-grade analytics. Featuring xG differentials, PDO regression, and predictive modeling."})]})]}),d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:g?"1rem":"2rem"},children:[d.jsx("div",{style:{marginBottom:g?"1.5rem":"2rem"},children:d.jsx(vE,{dataProcessor:s,loading:e,error:n})}),c&&d.jsxs("div",{className:"dashboard-stats-grid",style:{display:"grid",gridTemplateColumns:g?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:g?"0.75rem":"1rem",marginBottom:g?"1.5rem":"2rem"},children:[d.jsxs("div",{className:"stat-card elevated-card",style:{padding:g?"1.25rem":"1.5rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"60px",height:"60px",opacity:.1},children:d.jsx(Ji,{size:60,color:"var(--color-accent)"})}),d.jsx("div",{className:"stat-card-value metric-number",style:{fontSize:g?"2.25rem":"2.75rem",marginBottom:"0.5rem"},children:c.totalTeams}),d.jsx("div",{className:"stat-card-label",style:{fontSize:g?"0.688rem":"0.75rem"},children:"TEAMS ANALYZED"}),d.jsx("div",{className:"stat-card-description",style:{fontSize:g?"0.75rem":"0.813rem"},children:"Complete league coverage"})]}),d.jsxs("div",{className:"stat-card elevated-card",style:{padding:g?"1.25rem":"1.5rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"60px",height:"60px",opacity:.1},children:d.jsx(ro,{size:60,color:"var(--color-accent)"})}),d.jsx("div",{className:"stat-card-value metric-number",style:{fontSize:g?"2.25rem":"2.75rem",marginBottom:"0.5rem"},children:c.avgPDO}),d.jsx("div",{className:"stat-card-label",style:{fontSize:g?"0.688rem":"0.75rem"},children:"AVG PDO"}),d.jsx("div",{className:"stat-card-description",style:{fontSize:g?"0.75rem":"0.813rem"},children:"Luck regression metric"})]}),d.jsxs("div",{className:"stat-card elevated-card",style:{padding:g?"1.25rem":"1.5rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"60px",height:"60px",opacity:.1},children:d.jsx(nr,{size:60,color:"var(--color-accent)"})}),d.jsx("div",{className:"stat-card-value metric-number",style:{fontSize:g?"2.25rem":"2.75rem",marginBottom:"0.5rem"},children:c.avgXGD}),d.jsx("div",{className:"stat-card-label",style:{fontSize:g?"0.688rem":"0.75rem"},children:"AVG XG DIFFERENTIAL"}),d.jsx("div",{className:"stat-card-description",style:{fontSize:g?"0.75rem":"0.813rem"},children:"Score-adjusted per 60"})]}),d.jsxs("div",{className:"stat-card elevated-card",style:{padding:g?"1.25rem":"1.5rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,right:0,width:"60px",height:"60px",opacity:.1},children:d.jsx(qm,{size:60,color:"var(--color-accent)"})}),d.jsx("div",{className:"stat-card-value metric-number",style:{fontSize:g?"2.25rem":"2.75rem",marginBottom:"0.5rem"},children:c.overperformingTeams+c.underperformingTeams}),d.jsx("div",{className:"stat-card-label",style:{fontSize:g?"0.688rem":"0.75rem"},children:"BETTING EDGES"}),d.jsx("div",{className:"stat-card-description",style:{fontSize:g?"0.75rem":"0.813rem"},children:"PDO anomaly detection"})]})]}),d.jsxs("div",{className:"elevated-card",children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:g?"1rem":"1.5rem"},children:[d.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:g?"1.25rem":"1.5rem"},children:[d.jsx(ch,{size:g?18:20}),"Top Betting Opportunities"]}),d.jsx(qu,{to:"/opportunities",style:{color:"var(--color-accent)",textDecoration:"none",fontSize:g?"0.813rem":"0.875rem",fontWeight:"600"},children:"View All →"})]}),r.length===0?d.jsx("div",{style:{padding:g?"2rem 1rem":"3rem",textAlign:"center"},children:d.jsx("p",{style:{color:"var(--color-text-muted)",fontSize:g?"0.875rem":"1rem"},children:"No significant opportunities found in current data"})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"desktop-only",style:{overflowX:"auto"},children:d.jsxs("table",{className:"data-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"TEAM"}),d.jsx("th",{children:"TYPE"}),d.jsx("th",{children:"RECOMMENDATION"}),d.jsx("th",{children:"REASON"}),d.jsx("th",{style:{textAlign:"right"},children:"CONFIDENCE"}),d.jsx("th",{style:{textAlign:"right"},children:"EDGE"})]})}),d.jsx("tbody",{children:r.slice(0,10).map((T,S)=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("span",{style:{fontWeight:600,color:"var(--color-text-primary)"},children:T.team})}),d.jsx("td",{children:d.jsx("span",{className:T.type==="REGRESSION"?"badge-danger":"badge-accent",style:{display:"inline-block",padding:"0.25rem 0.5rem",borderRadius:"2px",fontSize:"0.625rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",border:"1px solid"},children:T.type.replace("_"," ")})}),d.jsx("td",{children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[T.recommendation.includes("UNDER")||T.recommendation.includes("AGAINST")?d.jsx(vv,{size:14,color:"var(--color-danger)"}):d.jsx(nr,{size:14,color:"var(--color-success)"}),d.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:T.recommendation})]})}),d.jsx("td",{style:{fontSize:"0.8125rem",maxWidth:"300px"},children:T.reason}),d.jsx("td",{style:{textAlign:"right"},children:d.jsxs("div",{style:{textAlign:"right"},children:[d.jsxs("div",{style:{fontWeight:600,color:"var(--color-text-primary)",marginBottom:"0.25rem",fontSize:"0.875rem"},children:[T.confidence.toFixed(0),"%"]}),d.jsx("div",{className:"confidence-bar",style:{width:"60px",marginLeft:"auto"},children:d.jsx("div",{className:`confidence-bar-fill ${v(T.confidence)}`,style:{width:`${T.confidence}%`}})})]})}),d.jsx("td",{style:{textAlign:"right"},children:d.jsxs("span",{style:{fontWeight:600,color:"var(--color-success)",fontSize:"0.875rem"},children:[(T.edge*100).toFixed(1),"%"]})})]},S))})]})}),d.jsx("div",{className:"mobile-only",children:r.slice(0,10).map((T,S)=>d.jsxs("div",{style:{backgroundColor:"var(--color-background)",border:"1px solid var(--color-border)",borderRadius:"6px",padding:"1rem",marginBottom:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:T.team}),d.jsx("span",{className:T.type==="REGRESSION"?"badge-danger":"badge-accent",style:{display:"inline-block",padding:"0.25rem 0.5rem",borderRadius:"2px",fontSize:"0.625rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",border:"1px solid"},children:T.type.replace("_"," ")})]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--color-success)",lineHeight:1},children:[(T.edge*100).toFixed(1),"%"]}),d.jsx("div",{style:{fontSize:"0.688rem",color:"var(--color-text-muted)",marginTop:"0.25rem"},children:"Edge"})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[T.recommendation.includes("UNDER")||T.recommendation.includes("AGAINST")?d.jsx(vv,{size:16,color:"var(--color-danger)"}):d.jsx(nr,{size:16,color:"var(--color-success)"}),d.jsx("span",{style:{fontSize:"0.938rem",fontWeight:"600",color:"var(--color-text-primary)"},children:T.recommendation})]}),d.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:"1.5",marginBottom:"0.75rem"},children:T.reason}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:"1px solid var(--color-border)"},children:[d.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Confidence"}),d.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"var(--color-text-primary)"},children:[T.confidence.toFixed(0),"%"]})]})]},S))})]})]})]})]})},xE=({dataProcessor:s})=>{const[e,n]=ce.useState(""),[r,o]=ce.useState("all"),[c,h]=ce.useState(null),[g,p]=ce.useState(null),[v,T]=ce.useState([]);ce.useEffect(()=>{if(s){const b=[...new Set(s.processedData.map(w=>w.name))].sort();T(b),b.length>0&&n(b[0])}},[s]),ce.useEffect(()=>{if(s&&e){const b=s.processedData.find(w=>w.name===e&&w.situation===r);if(h(b),b){const w=b.goalsFor/b.shotsOnGoalFor*100,z=(1-b.goalsAgainst/b.shotsOnGoalAgainst)*100,V=w+z,F={pdo:{formula:"(Goals For / Shots On Goal For) × 100 + (1 - Goals Against / Shots On Goal Against) × 100",shootingPct:w.toFixed(2),savePct:z.toFixed(2),calculation:`(${b.goalsFor} / ${b.shotsOnGoalFor}) × 100 + (1 - ${b.goalsAgainst} / ${b.shotsOnGoalAgainst}) × 100`,step1:`${w.toFixed(2)} + ${z.toFixed(2)}`,result:b.pdo.toFixed(2),match:Math.abs(b.pdo-V)<.1},xGF_per60:{formula:"(xGoals For / Ice Time in seconds) × 3600",calculation:`(${b.xGoalsFor} / ${b.iceTime}) × 3600`,result:b.xGF_per60?.toFixed(2)||"N/A",expected:(b.xGoalsFor/b.iceTime*3600).toFixed(2),match:b.xGF_per60?Math.abs(b.xGF_per60-b.xGoalsFor/b.iceTime*3600)<.01:!1},xGA_per60:{formula:"(xGoals Against / Ice Time in seconds) × 3600",calculation:`(${b.xGoalsAgainst} / ${b.iceTime}) × 3600`,result:b.xGA_per60?.toFixed(2)||"N/A",expected:(b.xGoalsAgainst/b.iceTime*3600).toFixed(2),match:b.xGA_per60?Math.abs(b.xGA_per60-b.xGoalsAgainst/b.iceTime*3600)<.01:!1},shootingEff:{formula:"Actual Goals For / Expected Goals For",calculation:`${b.goalsFor} / ${b.xGoalsFor}`,result:b.shooting_efficiency?.toFixed(3)||"N/A",expected:(b.goalsFor/b.xGoalsFor).toFixed(3),match:b.shooting_efficiency?Math.abs(b.shooting_efficiency-b.goalsFor/b.xGoalsFor)<.01:!1},xGD_per60:{formula:"xGF/60 - xGA/60",calculation:`${b.xGF_per60?.toFixed(2)} - ${b.xGA_per60?.toFixed(2)}`,result:b.xGD_per60?.toFixed(2)||"N/A",expected:(b.xGF_per60-b.xGA_per60).toFixed(2),match:b.xGD_per60?Math.abs(b.xGD_per60-(b.xGF_per60-b.xGA_per60))<.01:!1}};p(F)}}},[s,e,r]);const S=()=>{if(!c||!g)return;const b=`NHL SAVANT - DATA VERIFICATION REPORT
Team: ${e}
Situation: ${r}
Generated: ${new Date().toLocaleString()}

RAW CSV DATA:
-------------
Goals For: ${c.goalsFor}
Shots On Goal For: ${c.shotsOnGoalFor}
Goals Against: ${c.goalsAgainst}
Shots On Goal Against: ${c.shotsOnGoalAgainst}
xGoals For: ${c.xGoalsFor}
xGoals Against: ${c.xGoalsAgainst}
Ice Time: ${c.iceTime}

CALCULATED METRICS:
------------------
PDO:
  Formula: ${g.pdo.formula}
  Calculation: ${g.pdo.calculation}
  Shooting %: ${g.pdo.shootingPct}
  Save %: ${g.pdo.savePct}
  Result: ${g.pdo.result}
  ✓ Verified: ${g.pdo.match?"PASS":"FAIL"}

xGF/60:
  Formula: ${g.xGF_per60.formula}
  Calculation: ${g.xGF_per60.calculation}
  Result: ${g.xGF_per60.result}
  Expected: ${g.xGF_per60.expected}
  ✓ Verified: ${g.xGF_per60.match?"PASS":"FAIL"}

Shooting Efficiency:
  Formula: ${g.shootingEff.formula}
  Calculation: ${g.shootingEff.calculation}
  Result: ${g.shootingEff.result}
  Expected: ${g.shootingEff.expected}
  ✓ Verified: ${g.shootingEff.match?"PASS":"FAIL"}
`,w=new Blob([b],{type:"text/plain"}),z=URL.createObjectURL(w),V=document.createElement("a");V.href=z,V.download=`data-verification-${e}-${r}.txt`,V.click(),URL.revokeObjectURL(z)};return s?d.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},children:[d.jsx("div",{style:{padding:"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)"},children:d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[d.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Data Inspector"}),d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"0.875rem"},children:"Verify raw CSV data against calculated metrics with step-by-step breakdowns"})]})}),d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem"},children:[d.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",alignItems:"center"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Team"}),d.jsx("select",{value:e,onChange:b=>n(b.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",fontSize:"0.875rem"},children:v.map(b=>d.jsx("option",{value:b,children:b},b))})]}),d.jsxs("div",{style:{flex:1},children:[d.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Situation"}),d.jsxs("select",{value:r,onChange:b=>o(b.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",fontSize:"0.875rem"},children:[d.jsx("option",{value:"all",children:"All Situations"}),d.jsx("option",{value:"5on5",children:"5-on-5"}),d.jsx("option",{value:"5on4",children:"Power Play (5-on-4)"}),d.jsx("option",{value:"4on5",children:"Penalty Kill (4-on-5)"}),d.jsx("option",{value:"other",children:"Other"})]})]}),d.jsx("div",{style:{marginTop:"1.5rem"},children:d.jsxs("button",{onClick:S,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(tE,{size:16}),"Export Report"]})})]}),c&&g&&d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(600px, 1fr))",gap:"1rem"},children:[d.jsxs("div",{className:"card",children:[d.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.125rem"},children:"Raw CSV Data"}),d.jsx("div",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"0.8125rem",lineHeight:"1.8"},children:d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"0.5rem 2rem"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"team:"}),d.jsx("span",{style:{color:"var(--color-text-primary)",textAlign:"right"},children:c.team}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"situation:"}),d.jsx("span",{style:{color:"var(--color-text-primary)",textAlign:"right"},children:c.situation}),d.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-border)",gridColumn:"1 / -1",margin:"0.5rem 0"}}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"goalsFor:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.goalsFor}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"shotsOnGoalFor:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.shotsOnGoalFor}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"goalsAgainst:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.goalsAgainst}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"shotsOnGoalAgainst:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.shotsOnGoalAgainst}),d.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-border)",gridColumn:"1 / -1",margin:"0.5rem 0"}}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"xGoalsFor:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.xGoalsFor}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"xGoalsAgainst:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.xGoalsAgainst}),d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"iceTime:"}),d.jsx("span",{style:{color:"var(--color-accent)",fontWeight:600,textAlign:"right"},children:c.iceTime})]})})]}),d.jsxs("div",{className:"card",children:[d.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.125rem"},children:"Calculated Metrics"}),Object.entries(g).map(([b,w])=>d.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--color-border)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[d.jsx("h3",{style:{fontSize:"0.875rem",textTransform:"uppercase",fontWeight:600},children:b.replace("_"," ")}),w.match?d.jsx(t_,{size:16,color:"var(--color-success)"}):d.jsx(e_,{size:16,color:"var(--color-danger)"})]}),d.jsxs("div",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"0.75rem",lineHeight:"1.6",color:"var(--color-text-secondary)"},children:[d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Formula: "}),d.jsx("span",{style:{color:"var(--color-text-primary)"},children:w.formula})]}),d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Calculation: "}),d.jsx("span",{style:{color:"var(--color-warning)"},children:w.calculation})]}),w.step1&&d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Step: "}),d.jsx("span",{style:{color:"var(--color-warning)"},children:w.step1})]}),d.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"2rem"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Result: "}),d.jsx("span",{style:{color:w.match?"var(--color-success)":"var(--color-danger)",fontWeight:700},children:w.result})]}),w.expected&&d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Expected: "}),d.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:600},children:w.expected})]})]})]})]},b))]})]})]})]}):d.jsx("div",{style:{padding:"2rem"},children:"Loading..."})};class bE{constructor(e,n,r=null){this.dataProcessor=e,this.startingGoalies=r,n&&n.moneyText&&n.totalText?this.games=Z1(n.moneyText,n.totalText):this.games=[]}getStartingGoalie(e,n){if(!this.startingGoalies||!this.startingGoalies.games)return null;const r=`${n.awayTeam} @ ${n.homeTeam}`,o=this.startingGoalies.games.find(c=>c.matchup===r);return o?o.away.team===e?o.away.goalie:o.home.team===e?o.home.goalie:null:null}calculateAllEdges(){return this.games.map(e=>{try{const n=this.getStartingGoalie(e.awayTeam,e),r=this.getStartingGoalie(e.homeTeam,e),o=this.dataProcessor.predictTeamScore(e.awayTeam,e.homeTeam,!1,n),c=this.dataProcessor.predictTeamScore(e.homeTeam,e.awayTeam,!0,r);return{game:`${e.awayTeam} @ ${e.homeTeam}`,gameTime:e.gameTime,awayTeam:e.awayTeam,homeTeam:e.homeTeam,date:e.date||new Date().toISOString().split("T")[0],startTimestamp:e.startTimestamp||null,goalies:{away:n,home:r},edges:{moneyline:this.calculateMoneylineEdge(e,o,c),puckLine:this.calculatePuckLineEdge(e,o,c),total:this.calculateTotalEdge(e,o,c),teamTotals:this.calculateTeamTotalEdges(e,o,c)},rawOdds:{moneyline:e.moneyline,puckLine:e.puckLine,total:e.total}}}catch(n){return console.error(`Error calculating edges for ${e.awayTeam} @ ${e.homeTeam}:`,n),null}}).filter(e=>e!==null)}calculateMoneylineEdge(e,n,r){if(!e.moneyline.away||!e.moneyline.home)return{away:null,home:null};const o=this.dataProcessor.calculatePoissonWinProb(r,n),c=this.dataProcessor.calculatePoissonWinProb(n,r),h=this.dataProcessor.calculateEV(c,e.moneyline.away),g=this.dataProcessor.calculateEV(o,e.moneyline.home),p=this.dataProcessor.calculateKellyStake(c,e.moneyline.away),v=this.dataProcessor.calculateKellyStake(o,e.moneyline.home);return{away:{ev:h,evPercent:h,modelProb:c,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.away),kelly:p,odds:e.moneyline.away},home:{ev:g,evPercent:g,modelProb:o,marketProb:this.dataProcessor.oddsToProbability(e.moneyline.home),kelly:v,odds:e.moneyline.home}}}calculatePuckLineEdge(e,n,r){if(!e.puckLine.away.odds||!e.puckLine.home.odds)return{away:null,home:null};const o=r-n,c=e.puckLine.home.spread||-1.5,h=e.puckLine.away.spread||1.5,g=o>c?.55:.45,p=1-g,v=this.dataProcessor.calculateEV(p,e.puckLine.away.odds),T=this.dataProcessor.calculateEV(g,e.puckLine.home.odds);return{away:{ev:v,evPercent:v,modelProb:p,spread:h,odds:e.puckLine.away.odds},home:{ev:T,evPercent:T,modelProb:g,spread:c,odds:e.puckLine.home.odds}}}calculateTotalEdge(e,n,r){if(!e.total.line||!e.total.over||!e.total.under)return null;const o=n+r,c=e.total.line,h=o-c,g=1-this.dataProcessor.poissonCDF(Math.floor(c),o),p=1-g,v=this.dataProcessor.calculateEV(g,e.total.over),T=this.dataProcessor.calculateEV(p,e.total.under);let S="NO BET";h>.3&&v>0?S="OVER":h<-.3&&T>0&&(S="UNDER");const b=this.dataProcessor.calculateKellyStake(g,e.total.over),w=this.dataProcessor.calculateKellyStake(p,e.total.under);return{predictedTotal:o,awayScore:n,homeScore:r,marketTotal:c,edge:h,recommendation:S,over:{ev:v,evPercent:v,modelProb:g,odds:e.total.over,kelly:b},under:{ev:T,evPercent:T,modelProb:p,odds:e.total.under,kelly:w}}}calculateTeamTotalEdges(e,n,r){return{away:{predicted:n,team:e.awayTeam},home:{predicted:r,team:e.homeTeam}}}getTopEdges(e=0){const n=this.calculateAllEdges(),r=[];return n.forEach(o=>{o.edges.moneyline.away&&o.edges.moneyline.away.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"MONEYLINE",pick:`${o.awayTeam} (AWAY)`,team:o.awayTeam,odds:o.edges.moneyline.away.odds,ev:o.edges.moneyline.away.ev,evPercent:o.edges.moneyline.away.evPercent,modelProb:o.edges.moneyline.away.modelProb,kelly:o.edges.moneyline.away.kelly}),o.edges.moneyline.home&&o.edges.moneyline.home.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"MONEYLINE",pick:`${o.homeTeam} (HOME)`,team:o.homeTeam,odds:o.edges.moneyline.home.odds,ev:o.edges.moneyline.home.ev,evPercent:o.edges.moneyline.home.evPercent,modelProb:o.edges.moneyline.home.modelProb,kelly:o.edges.moneyline.home.kelly}),o.edges.puckLine.away&&o.edges.puckLine.away.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"PUCK LINE",pick:`${o.awayTeam} ${o.edges.puckLine.away.spread>0?"+":""}${o.edges.puckLine.away.spread}`,team:o.awayTeam,odds:o.edges.puckLine.away.odds,ev:o.edges.puckLine.away.ev,evPercent:o.edges.puckLine.away.evPercent,modelProb:o.edges.puckLine.away.modelProb,kelly:null}),o.edges.puckLine.home&&o.edges.puckLine.home.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"PUCK LINE",pick:`${o.homeTeam} ${o.edges.puckLine.home.spread>0?"+":""}${o.edges.puckLine.home.spread}`,team:o.homeTeam,odds:o.edges.puckLine.home.odds,ev:o.edges.puckLine.home.ev,evPercent:o.edges.puckLine.home.evPercent,modelProb:o.edges.puckLine.home.modelProb,kelly:null}),o.edges.total&&(o.edges.total.over.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"TOTAL",pick:`OVER ${o.edges.total.marketTotal}`,team:null,odds:o.edges.total.over.odds,ev:o.edges.total.over.ev,evPercent:o.edges.total.over.evPercent,modelProb:o.edges.total.over.modelProb,kelly:o.edges.total.over.kelly,predictedTotal:o.edges.total.predictedTotal}),o.edges.total.under.ev>e&&r.push({game:o.game,gameTime:o.gameTime,market:"TOTAL",pick:`UNDER ${o.edges.total.marketTotal}`,team:null,odds:o.edges.total.under.odds,ev:o.edges.total.under.ev,evPercent:o.edges.total.under.evPercent,modelProb:o.edges.total.under.modelProb,kelly:o.edges.total.under.kelly,predictedTotal:o.edges.total.predictedTotal}))}),r.sort((o,c)=>c.evPercent-o.evPercent)}}class Wu{static generateComparisonBar(e,n,r,o=!0){const c=e/r*100,h=n/r*100,g=Math.min(Math.max(c,0),200),p=Math.min(Math.max(h,0),200),v=this.getBarColor(e,r,o),T=this.getBarColor(n,r,o),S=o?e>n:e<n;return{away:{value:e,width:g,color:v,hasAdvantage:S,vsLeague:((e-r)/r*100).toFixed(1)},home:{value:n,width:p,color:T,hasAdvantage:!S,vsLeague:((n-r)/r*100).toFixed(1)},leagueAvg:r,difference:Math.abs(e-n),advantageTeam:S?"away":"home"}}static getBarColor(e,n,r){const c=(e-n)/n*100;return r&&c>15||!r&&c<-15?"#10B981":r&&c>5||!r&&c<-5?"#0EA5E9":Math.abs(c)<=5?"#64748B":"#EF4444"}static generateDangerZoneHeatmap(e,n){return{away:{low:{shots:e.offense.low.shots,xGoals:e.offense.low.xGoals,goals:e.offense.low.goals,width:this.calculateHeatmapWidth(e.offense.low.shots,250)},medium:{shots:e.offense.medium.shots,xGoals:e.offense.medium.xGoals,goals:e.offense.medium.goals,width:this.calculateHeatmapWidth(e.offense.medium.shots,80)},high:{shots:e.offense.high.shots,xGoals:e.offense.high.xGoals,goals:e.offense.high.goals,width:this.calculateHeatmapWidth(e.offense.high.shots,35)}},home:{low:{shots:n.defense.low.shots,xGoals:n.defense.low.xGoals,goals:n.defense.low.goals,width:this.calculateHeatmapWidth(n.defense.low.shots,250)},medium:{shots:n.defense.medium.shots,xGoals:n.defense.medium.xGoals,goals:n.defense.medium.goals,width:this.calculateHeatmapWidth(n.defense.medium.shots,80)},high:{shots:n.defense.high.shots,xGoals:n.defense.high.xGoals,goals:n.defense.high.goals,width:this.calculateHeatmapWidth(n.defense.high.shots,35)}},analysis:this.analyzeDangerZoneMatchup(e,n)}}static calculateHeatmapWidth(e,n){return Math.min(e/n*100,100)}static analyzeDangerZoneMatchup(e,n){const r=e.offense.high.shots,o=n.defense.high.shots,c=r-o,h=o>0?c/o*100:0;let g="";return Math.abs(h)<10?g="Balanced high-danger shot generation":h>0?g=`Away offense generates ${Math.abs(h).toFixed(0)}% more HD shots`:g=`Home defense allows ${Math.abs(h).toFixed(0)}% fewer HD shots`,g}static generateReboundTable(e,n){return{awayOffense:{rebounds:Math.round(e.xRebFor),reboundXg:e.rebXgFor.toFixed(2),reboundGoals:e.rebGoalsFor,conversion:e.rebConversion.toFixed(1),vsLeague:e.rebConversion-15,status:e.rebConversion>18?"Hot":e.rebConversion<12?"Cold":"Average"},homeDefense:{rebounds:Math.round(n.xRebAgainst),reboundXg:n.rebXgAgainst.toFixed(2),reboundGoals:n.rebGoalsAgainst,allowedPct:n.xRebAgainst>0?(n.rebGoalsAgainst/n.xRebAgainst*100).toFixed(1):0,control:n.rebXgaPer60<(n.rebXgfPer60||4)?"Excellent":"Average"},matchupEdge:{favors:e.rebConversion>15&&n.rebXgaPer60>4?"away":n.rebXgaPer60<3&&e.rebConversion<15?"home":"neutral",summary:this.generateReboundSummary(e,n,15)}}}static generateReboundSummary(e,n,r){const o=e.rebConversion-r,c=n.rebXgaPer60;return Math.abs(o)<3&&c>3&&c<5?"Balanced rebound battle - neither team has clear edge":o<-3?`Away team cold on rebounds (${e.rebConversion.toFixed(1)}% vs ${r}% avg)`:c<3?"Home defense controls rebound positioning effectively":"Standard rebound metrics for both teams"}static generatePhysicalMetrics(e,n){return[{stat:"Shot Blocks",away:{value:e.blockingRate.toFixed(1)+"%",raw:e.blockedShotsAgainst,label:`${e.blockedShotsAgainst} blocks`},home:{value:n.blockingRate.toFixed(1)+"%",raw:n.blockedShotsAgainst,label:`${n.blockedShotsAgainst} blocks`},advantage:n.blockingRate>e.blockingRate?"home":"away",diff:Math.abs(n.blockingRate-e.blockingRate).toFixed(1)+"%"},{stat:"Takeaways",away:{value:e.takeawaysPer60.toFixed(1),raw:e.takeaways,label:`${e.takeaways} total`},home:{value:n.takeawaysPer60.toFixed(1),raw:n.takeaways,label:`${n.takeaways} total`},advantage:e.takeaways>n.takeaways?"away":"home",diff:Math.abs(e.takeaways-n.takeaways)},{stat:"DZ Giveaways",away:{value:e.dZoneGiveawaysPer60.toFixed(1),raw:e.dZoneGiveaways,label:`${e.dZoneGiveaways} mistakes`},home:{value:n.dZoneGiveawaysPer60.toFixed(1),raw:n.dZoneGiveaways,label:`${n.dZoneGiveaways} mistakes`},advantage:e.dZoneGiveaways<n.dZoneGiveaways?"away":"home",diff:Math.abs(e.dZoneGiveaways-n.dZoneGiveaways)},{stat:"Hits",away:{value:e.hitsPer60.toFixed(1),raw:e.hits,label:`${e.hits} hits`},home:{value:n.hitsPer60.toFixed(1),raw:n.hits,label:`${n.hits} hits`},advantage:e.hits>n.hits?"away":"home",diff:Math.abs(e.hits-n.hits)}]}static getImpactBadge(e){switch(e){case"CRITICAL":return{emoji:"🔥",label:"CRITICAL",color:"#EF4444"};case"HIGH":return{emoji:"🎯",label:"HIGH IMPACT",color:"#F59E0B"};case"MODERATE":return{emoji:"⚡",label:"MODERATE",color:"#3B82F6"};default:return{emoji:"📊",label:"FACTOR",color:"#64748B"}}}static getTierBadge(e){return e?e<=3?{label:"ELITE",color:"#10B981",icon:"↑"}:e<=10?{label:"STRONG",color:"#0EA5E9",icon:"↑"}:e<=22?{label:"AVERAGE",color:"#64748B",icon:"="}:{label:"WEAK",color:"#EF4444",icon:"↓"}:{label:"N/A",color:"#64748B"}}static formatGoalImpact(e){return`${e>=0?"+":""}${e.toFixed(2)}`}static getImpactColor(e,n=!0){return n?e<-.2?"#10B981":e<-.05?"#34D399":e>.2?"#EF4444":e>.05?"#F87171":"#64748B":e>0?"#10B981":"#EF4444"}}const TE=()=>{const[s,e]=ce.useState(new Date);return ce.useEffect(()=>{const n=setInterval(()=>e(new Date),1e3);return()=>clearInterval(n)},[]),d.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:"0.25rem 0.625rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"4px"},children:[d.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--color-success)",animation:"pulse 2s infinite"}}),d.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--color-success)",fontFeatureSettings:"'tnum'"},children:s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})},SE=()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"sparkle",style:{top:"20%",left:"15%",animationDelay:"0s"}}),d.jsx("div",{className:"sparkle",style:{top:"60%",right:"20%",animationDelay:"0.5s"}}),d.jsx("div",{className:"sparkle",style:{bottom:"30%",left:"30%",animationDelay:"1s"}})]}),_v=({icon:s,value:e,label:n,color:r,sparkle:o})=>{const[c,h]=ce.useState(0);ce.useEffect(()=>{const S=e/30;let b=0;const w=setInterval(()=>{b+=S,b>=e?(h(e),clearInterval(w)):h(Math.floor(b))},1e3/30);return()=>clearInterval(w)},[e]);const g={success:{rgb:"16, 185, 129",var:"var(--color-success)"},info:{rgb:"59, 130, 246",var:"var(--color-info)"}},p=g[r]||g.info;return d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",background:`rgba(${p.rgb}, 0.1)`,border:`1px solid rgba(${p.rgb}, 0.3)`,borderRadius:"8px",position:"relative",overflow:"hidden"},children:[o&&d.jsx(SE,{}),d.jsx("div",{style:{color:p.var},children:s}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:p.var,fontFeatureSettings:"'tnum'",lineHeight:"1"},children:c}),d.jsx("div",{style:{fontSize:"0.625rem",color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600"},children:n})]})]})},EE=({type:s})=>{const e={ML:{label:"ML",color:"#3B82F6",icon:"⚡"},MONEYLINE:{label:"ML",color:"#3B82F6",icon:"⚡"},TOTAL:{label:"O/U",color:"#8B5CF6",icon:"📊"},PL:{label:"PL",color:"#EC4899",icon:"🎯"},"PUCK LINE":{label:"PL",color:"#EC4899",icon:"🎯"}},{label:n,color:r,icon:o}=e[s]||e.TOTAL;return d.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.5rem",background:`${r}15`,border:`1px solid ${r}40`,borderRadius:"4px",fontSize:"0.688rem",fontWeight:"700",color:r,textTransform:"uppercase",letterSpacing:"0.05em"},children:[d.jsx("span",{children:o}),d.jsx("span",{children:n})]})},AE=({evPercent:s,showConfidence:e})=>{const n=o=>o>=10?"#10B981":o>=5?"#059669":"#34D399",r=o=>o>=8?3:o>=4?2:1;return d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",alignItems:"flex-start"},children:[d.jsxs("span",{style:{color:n(s),fontWeight:"700",fontSize:"1rem",fontFeatureSettings:"'tnum'"},children:["+",s.toFixed(1),"%"]}),e&&d.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3].map(o=>d.jsx("div",{style:{width:"8px",height:"3px",borderRadius:"2px",background:o<=r(s)?n(s):"rgba(100, 116, 139, 0.3)",transition:"all 0.3s"}},o))})]})},wE=({edge:s})=>{const e=()=>Math.abs(s)>.5?"var(--color-success)":Math.abs(s)>.3?"var(--color-warning)":"var(--color-text-secondary)";return d.jsxs("span",{style:{color:e(),fontWeight:"600",fontFeatureSettings:"'tnum'",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[s>0&&d.jsx("span",{style:{fontSize:"0.75rem"},children:"▲"}),s<0&&d.jsx("span",{style:{fontSize:"0.75rem"},children:"▼"}),s>0?"+":"",s.toFixed(1)]})},RE=({time:s})=>d.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.125rem 0.5rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"4px",fontSize:"0.813rem",fontWeight:"600",color:"var(--color-info)",fontFeatureSettings:"'tnum'"},children:[d.jsx("span",{children:"🕐"}),d.jsx("span",{children:s})]}),IE=({onClick:s,game:e})=>d.jsxs("button",{onClick:s,className:"view-button-enhanced",children:[d.jsx("span",{children:"View"}),d.jsx(zS,{size:14})]}),CE=({firstGameTime:s})=>{const[e,n]=ce.useState("");return ce.useEffect(()=>{const r=()=>{const[c,h]=s.split(" "),[g,p]=c.split(":").map(Number);let v=g;h==="PM"&&g!==12&&(v+=12),h==="AM"&&g===12&&(v=0);const T=new Date;T.setHours(v,p,0,0);const b=T-new Date;if(b<=0)return"Game Starting Soon!";const w=Math.floor(b/(1e3*60*60)),z=Math.floor(b%(1e3*60*60)/(1e3*60));return`First game in ${w}h ${z}m`};n(r());const o=setInterval(()=>{n(r())},6e4);return()=>clearInterval(o)},[s]),d.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("span",{style:{fontSize:"1.25rem"},children:"⏱️"}),d.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"var(--color-info)",fontFeatureSettings:"'tnum'"},children:e})]})},DE=({allEdges:s,dataProcessor:e,onGameClick:n})=>{const[r,o]=ce.useState(!1),[c,h]=ce.useState(!1),[g,p]=ce.useState(!1);ce.useEffect(()=>{const w=()=>{o(window.innerWidth<=640),p(window.innerWidth>1024)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const v=w=>w>=10?{grade:"A+",tier:"ELITE",color:"#10B981",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"#10B981"}:w>=7?{grade:"A",tier:"EXCELLENT",color:"#059669",bgColor:"rgba(5, 150, 105, 0.15)",borderColor:"#059669"}:w>=5?{grade:"B+",tier:"STRONG",color:"#0EA5E9",bgColor:"rgba(14, 165, 233, 0.15)",borderColor:"#0EA5E9"}:w>=3?{grade:"B",tier:"GOOD",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"#8B5CF6"}:{grade:"C",tier:"VALUE",color:"#64748B",bgColor:"rgba(100, 116, 139, 0.15)",borderColor:"#64748B"},T=s.map(w=>{let z=null,V=0;if(w.edges.moneyline&&(w.edges.moneyline.away&&w.edges.moneyline.away.evPercent>V&&(V=w.edges.moneyline.away.evPercent,z={...w.edges.moneyline.away,type:"ML",displayPick:`${w.awayTeam} ML`}),w.edges.moneyline.home&&w.edges.moneyline.home.evPercent>V&&(V=w.edges.moneyline.home.evPercent,z={...w.edges.moneyline.home,type:"ML",displayPick:`${w.homeTeam} ML`})),w.edges.total){const F=w.edges.total.over?.line||w.edges.total.under?.line||"N/A";w.edges.total.over&&w.edges.total.over.evPercent>V&&(V=w.edges.total.over.evPercent,z={...w.edges.total.over,type:"TOTAL",displayPick:`OVER ${F}`}),w.edges.total.under&&w.edges.total.under.evPercent>V&&(V=w.edges.total.under.evPercent,z={...w.edges.total.under,type:"TOTAL",displayPick:`UNDER ${F}`})}return{game:w.game,time:w.gameTime,bestBet:z,edge:w.edges.total?.edge||0}}).filter(w=>w.bestBet&&w.bestBet.evPercent>0),S=T.filter(w=>w.bestBet.evPercent>5).length,b=[...T].sort((w,z)=>z.bestBet.evPercent-w.bestBet.evPercent).slice(0,3);return g&&!c?d.jsxs("div",{style:{position:"sticky",top:"60px",zIndex:100,background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)",backdropFilter:"blur(12px)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"12px",padding:"1rem 1.5rem",marginBottom:"1.5rem",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>h(!0),onMouseEnter:w=>{w.currentTarget.style.transform="translateY(-2px)",w.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.25)"},onMouseLeave:w=>{w.currentTarget.style.transform="translateY(0)",w.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.2)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[d.jsx(Ji,{size:20,color:"var(--color-accent)"}),d.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"var(--color-text-primary)"},children:"Today's Opportunities"}),d.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",fontWeight:"500"},children:[T.length," Games • ",S," High Value"]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(212, 175, 55, 0.2)",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",color:"var(--color-accent)"},children:[d.jsx("span",{children:"Click to expand"}),d.jsx(mm,{size:18})]})]}),d.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:b.map((w,z)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",padding:"0.5rem 1rem",background:"linear-gradient(135deg, rgba(21, 25, 35, 0.8) 0%, rgba(26, 31, 46, 0.7) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[d.jsx("span",{style:{fontWeight:"700",fontSize:"0.938rem",color:"var(--color-text-primary)"},children:w.game}),d.jsxs("span",{style:{padding:"0.25rem 0.625rem",background:w.bestBet.evPercent>10?"linear-gradient(135deg, #10B981 0%, #059669 100%)":w.bestBet.evPercent>5?"linear-gradient(135deg, #059669 0%, #047857 100%)":"linear-gradient(135deg, #34D399 0%, #10B981 100%)",color:"white",borderRadius:"6px",fontSize:"0.813rem",fontWeight:"800",letterSpacing:"-0.01em"},children:["+",w.bestBet.evPercent.toFixed(1),"%"]})]},z))})]}):r&&!c?d.jsx("div",{style:{position:"sticky",top:"60px",zIndex:10,background:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:d.jsxs("button",{onClick:()=>h(!0),style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",background:"none",border:"none",cursor:"pointer",color:"var(--color-text-primary)",fontWeight:"600"},children:[d.jsx(Ji,{size:18,color:"var(--color-accent)",style:{marginRight:"0.5rem"}}),d.jsxs("span",{children:["Opportunities (",T.length,")"]}),d.jsx(mm,{size:20,color:"var(--color-accent)"})]})}):d.jsxs("div",{style:{position:r?"relative":"sticky",top:r?"0":"60px",zIndex:100,background:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"8px",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",overflow:"hidden",backdropFilter:"blur(8px)"},children:[d.jsxs("div",{style:{background:"linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%)",padding:"1rem",color:"var(--color-background)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{textAlign:"center",flex:1},children:[d.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"700",marginBottom:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[d.jsx(Ji,{size:20}),d.jsx("span",{children:"Today's Betting Opportunities"})]}),d.jsxs("div",{style:{fontSize:"0.875rem",opacity:.9},children:[T.length," Games • ",S," High Value"]})]}),g&&d.jsxs("button",{onClick:()=>h(!1),style:{padding:"0.5rem 1rem",background:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",cursor:"pointer",color:"white",fontSize:"0.813rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.375rem",transition:"all 0.2s ease"},onMouseEnter:w=>{w.currentTarget.style.background="rgba(0, 0, 0, 0.3)"},onMouseLeave:w=>{w.currentTarget.style.background="rgba(0, 0, 0, 0.2)"},children:[d.jsx(gm,{size:16}),"Collapse"]})]}),r&&d.jsxs("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.5rem",background:"rgba(212, 175, 55, 0.1)",border:"none",borderBottom:"1px solid var(--color-border)",cursor:"pointer",color:"var(--color-text-secondary)",fontSize:"0.813rem",display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsx(gm,{size:16,style:{marginRight:"0.25rem"}}),"Collapse"]}),r?d.jsx("div",{style:{padding:"1.25rem 1rem"},children:T.map((w,z)=>{const V=v(w.bestBet.evPercent);return d.jsxs("div",{className:"mobile-opp-card",style:{background:"linear-gradient(135deg, rgba(21, 25, 35, 0.95) 0%, rgba(26, 31, 46, 0.9) 100%)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.25rem",border:`1px solid ${V.borderColor}`,boxShadow:`0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ${V.borderColor}`,position:"relative",overflow:"hidden",animation:"slideInUp 0.4s ease-out",animationDelay:`${z*.1}s`,animationFillMode:"both"},children:[V.tier==="ELITE"||V.tier==="EXCELLENT"&&d.jsx("div",{className:"shimmer-overlay",style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:`linear-gradient(90deg, transparent, ${V.bgColor}, transparent)`,animation:"shimmer 3s infinite"}}),d.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.375rem"},children:[d.jsx("div",{style:{background:`linear-gradient(135deg, ${V.color} 0%, ${V.borderColor} 100%)`,color:"white",padding:"0.5rem 0.875rem",borderRadius:"8px",fontSize:"1.25rem",fontWeight:"900",letterSpacing:"-0.02em",boxShadow:`0 4px 12px ${V.bgColor}`,textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)",minWidth:"52px",textAlign:"center"},children:V.grade}),d.jsx("div",{style:{fontSize:"0.688rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.1em",color:V.color,textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:V.tier}),d.jsxs("div",{style:{fontSize:"0.813rem",fontWeight:"700",color:"white",opacity:.9},children:["+",w.bestBet.evPercent.toFixed(1),"%"]})]}),d.jsxs("div",{style:{marginBottom:"1.25rem",paddingRight:"5rem"},children:[d.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"800",color:"var(--color-text-primary)",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:w.game}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.938rem",color:"var(--color-text-muted)",fontWeight:"500"},children:[d.jsx(WS,{size:14}),d.jsx("span",{children:w.time})]})]}),d.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.125rem",background:w.bestBet.type==="ML"?"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(37, 99, 235, 0.15) 100%)":"linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(126, 34, 206, 0.15) 100%)",border:w.bestBet.type==="ML"?"1px solid rgba(59, 130, 246, 0.4)":"1px solid rgba(168, 85, 247, 0.4)",borderRadius:"8px",marginBottom:"1rem"},children:d.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.1em",color:w.bestBet.type==="ML"?"#60A5FA":"#A78BFA",display:"flex",alignItems:"center",gap:"0.375rem"},children:[w.bestBet.type==="ML"?d.jsx(n_,{size:12}):d.jsx(Ji,{size:12}),d.jsx("span",{children:w.bestBet.type==="ML"?"MONEYLINE":"TOTAL"})]})}),d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"900",color:"var(--color-accent)",marginBottom:"1.25rem",letterSpacing:"-0.03em",textShadow:"0 2px 8px rgba(212, 175, 55, 0.3)"},children:w.bestBet.pick}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",marginBottom:"1.25rem",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[d.jsx("span",{style:{fontSize:"0.813rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--color-text-muted)"},children:"Edge"}),d.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"900",color:w.edge>0?"var(--color-success)":"var(--color-danger)",fontFeatureSettings:"'tnum'",letterSpacing:"-0.02em"},children:[w.edge>0?"+":"",w.edge.toFixed(1)]})]}),d.jsx("button",{onClick:()=>n(w.game),style:{width:"100%",padding:"1.125rem",background:"linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%)",color:"var(--color-background)",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1.063rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.05em",boxShadow:"0 6px 20px rgba(212, 175, 55, 0.4)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseDown:F=>{F.currentTarget.style.transform="scale(0.98)"},onMouseUp:F=>{F.currentTarget.style.transform="scale(1)"},children:"View Full Analysis →"})]},z)})}):d.jsx("div",{className:"table-container",style:{overflowX:"auto",overflowY:"hidden"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed",minWidth:"800px"},children:[d.jsxs("colgroup",{children:[d.jsx("col",{style:{width:"20%"}}),d.jsx("col",{style:{width:"10%"}}),d.jsx("col",{style:{width:"20%"}}),d.jsx("col",{style:{width:"12%"}}),d.jsx("col",{style:{width:"13%"}}),d.jsx("col",{style:{width:"13%"}}),d.jsx("col",{style:{width:"12%"}})]}),d.jsx("thead",{children:d.jsxs("tr",{style:{background:"var(--color-background)"},children:[d.jsx("th",{style:Us,children:"Game"}),d.jsx("th",{style:Us,children:"Time"}),d.jsx("th",{style:Us,children:"Best Bet"}),d.jsx("th",{style:Us,children:"Edge"}),d.jsx("th",{style:Us,children:"EV"}),d.jsx("th",{style:Us,children:"Rating"}),d.jsx("th",{style:Us})]})}),d.jsx("tbody",{children:T.map((w,z)=>{const V=v(w.bestBet.evPercent);return d.jsxs("tr",{className:"summary-row",style:{borderTop:"1px solid var(--color-border)",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[d.jsx("td",{colSpan:"6",style:{position:"absolute",left:0,top:0,right:0,bottom:0,width:"100%",height:"100%",padding:0,border:"none",pointerEvents:"none",zIndex:0},children:d.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${Math.min(w.bestBet.evPercent*3,100)}%`,background:`linear-gradient(90deg, ${V.bgColor} 0%, transparent 100%)`,pointerEvents:"none"}})}),d.jsx("td",{style:{...Gs,position:"relative",zIndex:1},children:d.jsx("span",{style:{fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:w.game})}),d.jsx("td",{style:{...Gs,position:"relative",zIndex:1},children:d.jsx(RE,{time:w.time})}),d.jsx("td",{style:{...Gs,position:"relative",zIndex:1},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(EE,{type:w.bestBet.type}),d.jsx("span",{style:{fontWeight:"600",whiteSpace:"nowrap"},children:w.bestBet.displayPick||w.bestBet.pick})]})}),d.jsx("td",{style:{...Gs,position:"relative",zIndex:1},children:d.jsx(wE,{edge:w.edge})}),d.jsx("td",{style:{...Gs,position:"relative",zIndex:1},children:d.jsx(AE,{evPercent:w.bestBet.evPercent,showConfidence:!0})}),d.jsx("td",{style:{...Gs,position:"relative",zIndex:1},children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[d.jsx("div",{style:{padding:"0.375rem 0.75rem",background:V.bgColor,border:`1px solid ${V.borderColor}`,borderRadius:"6px",fontWeight:"800",fontSize:"0.875rem",color:V.color,letterSpacing:"-0.01em",minWidth:"42px",textAlign:"center"},children:V.grade}),d.jsx("div",{style:{fontSize:"0.625rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:V.color,opacity:.8},children:V.tier})]})}),d.jsx("td",{style:{...Gs,position:"relative",zIndex:1,textAlign:"center"},children:d.jsx(IE,{onClick:()=>n(w.game),game:w.game})})]},z)})})]})})]})},Us={padding:"0.75rem 1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--color-text-muted)"},Gs={padding:"0.875rem 1rem",fontSize:"0.875rem"},jE=s=>s>=10?{grade:"A+",tier:"ELITE",color:"#10B981",bgColor:"rgba(16, 185, 129, 0.15)",borderColor:"#10B981",icon:qm}:s>=7?{grade:"A",tier:"EXCELLENT",color:"#059669",bgColor:"rgba(5, 150, 105, 0.15)",borderColor:"#059669",icon:aE}:s>=5?{grade:"B+",tier:"STRONG",color:"#0EA5E9",bgColor:"rgba(14, 165, 233, 0.15)",borderColor:"#0EA5E9",icon:nr}:s>=3?{grade:"B",tier:"GOOD",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"#8B5CF6",icon:null}:{grade:"C",tier:"VALUE",color:"#64748B",bgColor:"rgba(100, 116, 139, 0.15)",borderColor:"#64748B",icon:null},NE=({evPercent:s,size:e="default",showIcon:n=!1,showTier:r=!0})=>{const o=jE(s),c=o.icon,g={small:{padding:"0.25rem 0.5rem",gradeFont:"0.75rem",tierFont:"0.563rem",iconSize:12,gap:"0.25rem"},default:{padding:"0.375rem 0.75rem",gradeFont:"0.875rem",tierFont:"0.625rem",iconSize:14,gap:"0.25rem"},large:{padding:"0.5rem 1rem",gradeFont:"1.125rem",tierFont:"0.688rem",iconSize:16,gap:"0.375rem"}}[e];return d.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:g.gap},children:[d.jsxs("div",{style:{padding:g.padding,background:o.bgColor,border:`1px solid ${o.borderColor}`,borderRadius:"6px",fontWeight:"800",fontSize:g.gradeFont,color:o.color,letterSpacing:"-0.01em",display:"flex",alignItems:"center",gap:"0.375rem",minWidth:e==="small"?"36px":"42px",justifyContent:"center"},children:[n&&c&&d.jsx(c,{size:g.iconSize}),d.jsx("span",{children:o.grade})]}),r&&d.jsx("div",{style:{fontSize:g.tierFont,fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.05em",color:o.color,opacity:.8},children:o.tier})]})},je={flat:{border:"1px solid rgba(100, 116, 139, 0.2)"},raised:{border:"1px solid rgba(212, 175, 55, 0.25)",shadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},elevated:{border:"2px solid rgba(16, 185, 129, 0.3)",shadow:"0 4px 16px rgba(16, 185, 129, 0.15)"}},I={hero:{size:"1.5rem",weight:"900",lineHeight:"1.2"},heading:{size:"1.125rem",weight:"800",lineHeight:"1.3",letterSpacing:"-0.01em"},subheading:{size:"0.938rem",weight:"700"},body:{size:"0.875rem",weight:"600",lineHeight:"1.5"},label:{size:"0.75rem",weight:"600",letterSpacing:"0.03em",textTransform:"uppercase"},caption:{size:"0.688rem",weight:"500",lineHeight:"1.5"}},ue={cardPadding:"0.875rem",sectionGap:"0.75rem",innerPadding:"0.75rem",borderRadius:"10px"},jt={hero:"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.04) 50%, rgba(16, 185, 129, 0.08) 100%)",factors:"linear-gradient(180deg, rgba(212, 175, 55, 0.05) 0%, rgba(212, 175, 55, 0.02) 100%)",moneyline:"linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0.02) 100%)",total:"linear-gradient(135deg, rgba(168, 85, 247, 0.08) 0%, rgba(168, 85, 247, 0.02) 100%)"},i_=s=>s>=10?{color:"#10B981",bg:"rgba(16, 185, 129, 0.15)",label:"ELITE",intensity:5}:s>=5?{color:"#059669",bg:"rgba(5, 150, 105, 0.12)",label:"STRONG",intensity:4}:s>=2?{color:"#0EA5E9",bg:"rgba(14, 165, 233, 0.12)",label:"GOOD",intensity:3}:s>=0?{color:"#8B5CF6",bg:"rgba(139, 92, 246, 0.12)",label:"SLIGHT",intensity:2}:{color:"#64748B",bg:"rgba(100, 116, 139, 0.08)",label:"NEGATIVE",intensity:1},OE=(s,e)=>{const n=Math.abs(e-.5);return s>10&&n>.15?{level:"VERY HIGH",color:"#10B981"}:s>5&&n>.1?{level:"HIGH",color:"#059669"}:s>2?{level:"MEDIUM",color:"#0EA5E9"}:{level:"LOW",color:"#8B5CF6"}},Yn={normal:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",slow:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},PE=({awayGoalie:s,homeGoalie:e,awayTeam:n,homeTeam:r,isMobile:o})=>{const c=s&&s.name,h=e&&e.name;if(!c&&!h)return d.jsx(Cl,{title:"Goaltender Matchup",icon:d.jsx($r,{size:18}),isMobile:o,importance:"HIGH",children:d.jsxs("div",{style:{padding:o?ue.innerPadding:"1.5rem",textAlign:"center",background:jt.factors,border:je.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:"⏳"}),d.jsx("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:"Waiting for Goalie Confirmation"}),d.jsx("div",{style:{fontSize:I.body.size,color:"var(--color-text-muted)",lineHeight:I.body.lineHeight},children:"Starting goalies typically confirmed 1-2 hours before game time. Check back closer to puck drop."})]})});if(!c||!h)return d.jsx(Cl,{title:"Goaltender Matchup",icon:d.jsx($r,{size:18}),isMobile:o,importance:"HIGH",children:d.jsxs("div",{style:{padding:o?ue.innerPadding:"1.5rem",textAlign:"center",background:jt.factors,border:je.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:"⏳"}),d.jsxs("div",{style:{fontSize:I.body.size,color:"var(--color-text-muted)",marginBottom:"1rem"},children:[c?`✅ ${n} goalie confirmed`:`⏳ ${n} goalie TBD`," • ",h?`✅ ${r} goalie confirmed`:`⏳ ${r} goalie TBD`]}),c&&d.jsxs("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",marginTop:"0.5rem"},children:[s.name," (",n,")"]}),h&&d.jsxs("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",marginTop:"0.5rem"},children:[e.name," (",r,")"]})]})});const g=s&&s.gsae!==void 0,p=e&&e.gsae!==void 0;if(g&&!p||!g&&p){const z=g?s:e,V=g?n:r,F=g?r:n,Y=g?e:s,q=parseFloat(z.gsae)||0,ee=q>10?"ELITE":q>5?"STRONG":q>-5?"AVERAGE":"WEAK",ne=q>10?"#10B981":q>5?"#60A5FA":q>-5?"#8B5CF6":"#EF4444";return d.jsxs(Cl,{title:"Goaltender Matchup",icon:d.jsx($r,{size:18}),isMobile:o,importance:"HIGH",children:[d.jsxs("div",{style:{padding:o?ue.innerPadding:"1rem",background:`linear-gradient(135deg, ${ne}15 0%, ${ne}08 100%)`,border:`1px solid ${ne}40`,borderRadius:"8px",marginBottom:o?ue.innerPadding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[d.jsx($r,{size:20,color:ne}),d.jsxs("span",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:ne},children:[ee," GOALTENDER - ",V]})]}),d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-secondary)",textAlign:"center",fontStyle:"italic"},children:[z.name," • ",q>=0?"+":"",q.toFixed(2)," GSAE • ",F," goalie stats unavailable"]})]}),d.jsx(Jf,{goalie:z,team:V,isMobile:o,isAway:!1}),d.jsxs("div",{style:{marginTop:o?ue.innerPadding:"1rem",padding:o?"0.75rem":"1rem",background:"rgba(139, 92, 246, 0.08)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",textAlign:"center"},children:[d.jsxs("div",{style:{fontSize:I.body.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem"},children:[d.jsx("strong",{children:F})," ",Y?.name||"Goalie"]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",fontStyle:"italic"},children:"Advanced stats not yet available"})]})]})}if(!g&&!p)return d.jsx(Cl,{title:"Goaltender Matchup",icon:d.jsx($r,{size:18}),isMobile:o,importance:"HIGH",children:d.jsxs("div",{style:{padding:o?ue.innerPadding:"1.5rem",textAlign:"center",background:jt.factors,border:je.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:"📊"}),d.jsxs("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:[n," ",s?.name||"TBD"," vs ",r," ",e?.name||"TBD"]}),d.jsx("div",{style:{fontSize:I.body.size,color:"var(--color-text-muted)",lineHeight:I.body.lineHeight},children:"Advanced goalie statistics not yet available for these netminders. Check back later for detailed analytics."})]})});const v=parseFloat(s.gsae)||0,T=parseFloat(e.gsae)||0,S=Math.abs(v-T),b=v>T?n:r,w=S/10;return d.jsxs(Cl,{title:"Goaltender Matchup",icon:d.jsx($r,{size:18}),isMobile:o,importance:"HIGH",children:[d.jsxs("div",{style:{padding:o?ue.innerPadding:"1.125rem",background:S>5?"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.06) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.12) 0%, rgba(139, 92, 246, 0.06) 100%)",border:S>5?"1px solid rgba(16, 185, 129, 0.35)":"1px solid rgba(139, 92, 246, 0.35)",borderRadius:"10px",marginBottom:o?ue.innerPadding:"1.25rem",boxShadow:S>5?"0 4px 12px rgba(16, 185, 129, 0.1)":"0 4px 12px rgba(139, 92, 246, 0.1)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.625rem",marginBottom:"0.5rem"},children:[d.jsx($r,{size:22,color:S>5?"#10B981":"#8B5CF6",strokeWidth:2.5}),d.jsx("span",{style:{fontSize:o?"0.95rem":"1.05rem",fontWeight:"700",color:S>5?"#10B981":"#8B5CF6",letterSpacing:"0.5px"},children:S>5?`${b} HAS GOALIE ADVANTAGE`:"PRETTY EVEN GOALIE MATCHUP"})]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-secondary)",lineHeight:I.body.lineHeight,fontStyle:"italic",textAlign:"center",paddingTop:"0.25rem",borderTop:S>5?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(139, 92, 246, 0.2)"},children:S>5?`${S.toFixed(1)} GSAE difference • Expected impact: ~${w.toFixed(2)} goals`:"Both goalies performing at similar levels. Goaltending unlikely to be deciding factor."})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:o?"1fr":"1fr auto 1fr",gap:o?ue.innerPadding:"1.5rem",alignItems:"stretch"},children:[d.jsx(Jf,{goalie:s,team:n,isMobile:o,isAway:!0}),!o&&d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:I.heading.size,fontWeight:I.heading.weight,color:"var(--color-accent)",padding:"0 0.5rem"},children:"VS"}),d.jsx(Jf,{goalie:e,team:r,isMobile:o,isAway:!1})]}),d.jsxs("div",{style:{marginTop:o?ue.innerPadding:"1rem",padding:o?ue.innerPadding:"1rem",background:jt.factors,border:je.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:I.caption.size,fontWeight:I.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:"SAVE PERCENTAGE BY DANGER ZONE"}),d.jsx(kE,{awayGoalie:s,homeGoalie:e,awayTeam:n,homeTeam:r,isMobile:o})]})]})},Jf=({goalie:s,team:e,isMobile:n,isAway:r})=>{const o=parseFloat(s.gsae)||0,c=zE(o),h=c.tier==="ELITE",g=c.tier==="STRONG";return d.jsxs("div",{style:{padding:n?ue.innerPadding:"1rem",background:jt.factors,border:je.flat.border,borderRadius:"8px",position:"relative",overflow:"hidden"},children:[d.jsxs("div",{style:{marginBottom:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"0.5rem"},children:[d.jsx("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:s.name}),d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[d.jsx("span",{children:e}),d.jsx("span",{children:"•"}),d.jsxs("span",{children:[s.gamesPlayed," GP"]}),s.recentForm&&s.recentForm!=="Limited Sample"&&d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"•"}),d.jsx("span",{style:{color:s.recentForm==="Hot"?"#10B981":s.recentForm==="Cold"?"#EF4444":"#8B5CF6",fontWeight:I.label.weight},children:s.recentForm})]})]})]}),d.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"0.75rem",background:h?"rgba(16, 185, 129, 0.1)":g?"rgba(14, 165, 233, 0.1)":"rgba(139, 92, 246, 0.05)",borderRadius:"6px"},children:[d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Goals Saved Above Expected"}),d.jsxs("div",{style:{fontSize:"2rem",fontWeight:I.heading.weight,color:h?"#10B981":g?"#0EA5E9":o>0?"#8B5CF6":"#EF4444",fontFeatureSettings:"'tnum'",marginBottom:"0.25rem"},children:[o>0?"+":"",s.gsae]}),d.jsx(ME,{rank:c.rank,tier:c.tier})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginBottom:"0.75rem"},children:[d.jsx(zu,{label:"Save %",value:`${s.savePct}%`}),d.jsx(zu,{label:"HD Sv%",value:`${s.hdSavePct}%`,isHighlight:!0}),d.jsx(zu,{label:"xGA/GP",value:s.xGoalsAgainst}),d.jsx(zu,{label:"GA/GP",value:s.goalsAgainst})]}),d.jsxs("div",{style:{padding:"0.5rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"4px",fontSize:I.caption.size,textAlign:"center"},children:[d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Rebound Control: "}),d.jsx("span",{style:{color:s.reboundControl==="Excellent"?"#10B981":s.reboundControl==="Poor"?"#EF4444":"#8B5CF6",fontWeight:I.label.weight},children:s.reboundControl})]})]})},kE=({awayGoalie:s,homeGoalie:e,awayTeam:n,homeTeam:r,isMobile:o})=>{const c=[{label:"Low Danger",away:parseFloat(s.lowDangerSavePct)||97,home:parseFloat(e.lowDangerSavePct)||97,color:"#64748B"},{label:"Medium Danger",away:parseFloat(s.mediumDangerSavePct)||92,home:parseFloat(e.mediumDangerSavePct)||92,color:"#F59E0B"},{label:"High Danger",away:parseFloat(s.hdSavePct)||85,home:parseFloat(e.hdSavePct)||85,color:"#EF4444"}];return d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:c.map((h,g)=>d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:I.caption.size,color:h.color,marginBottom:"0.375rem",fontWeight:I.label.weight},children:h.label}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.5rem",alignItems:"center"},children:[d.jsxs("div",{style:{textAlign:"right",fontSize:I.body.size,fontWeight:I.body.weight},children:[d.jsxs("span",{style:{color:h.away>h.home?"#10B981":"var(--color-text-secondary)",fontFeatureSettings:"'tnum'"},children:[h.away.toFixed(1),"%"]}),d.jsx("span",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",marginLeft:"0.25rem"},children:n})]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)"},children:"vs"}),d.jsxs("div",{style:{textAlign:"left",fontSize:I.body.size,fontWeight:I.body.weight},children:[d.jsx("span",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",marginRight:"0.25rem"},children:r}),d.jsxs("span",{style:{color:h.home>h.away?"#10B981":"var(--color-text-secondary)",fontFeatureSettings:"'tnum'"},children:[h.home.toFixed(1),"%"]})]})]})]},g))})},zu=({label:s,value:e,isHighlight:n})=>d.jsxs("div",{style:{padding:"0.5rem",background:n?"rgba(239, 68, 68, 0.1)":"rgba(26, 31, 46, 0.4)",borderRadius:"4px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",marginBottom:"0.125rem"},children:s}),d.jsx("div",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:n?"#EF4444":"var(--color-text-primary)",fontFeatureSettings:"'tnum'"},children:e})]}),ME=({rank:s,tier:e})=>d.jsxs("span",{style:{fontSize:I.caption.size,fontWeight:I.label.weight,color:e==="ELITE"?"#10B981":e==="STRONG"?"#0EA5E9":e==="AVERAGE"?"#8B5CF6":"#EF4444",background:e==="ELITE"?"rgba(16, 185, 129, 0.2)":e==="STRONG"?"rgba(14, 165, 233, 0.2)":e==="AVERAGE"?"rgba(139, 92, 246, 0.2)":"rgba(239, 68, 68, 0.2)",padding:"0.125rem 0.375rem",borderRadius:"4px",textTransform:"uppercase"},children:["#",s," ",e]}),Cl=({title:s,icon:e,children:n,isMobile:r,importance:o})=>d.jsxs("div",{style:{marginBottom:r?ue.sectionGap:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:r?ue.innerPadding:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e,d.jsx("span",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)"},children:s})]}),o&&d.jsx("span",{style:{fontSize:I.caption.size,fontWeight:I.label.weight,color:o==="HIGH"?"#10B981":o==="MODERATE"?"#F59E0B":"#64748B",textTransform:"uppercase"},children:o})]}),n]});function zE(s){return s>10?{rank:5,tier:"ELITE"}:s>5?{rank:12,tier:"STRONG"}:s>-5?{rank:18,tier:"AVERAGE"}:{rank:28,tier:"WEAK"}}const VE=({awayTeam:s,homeTeam:e,dangerZoneData:n,reboundData:r,physicalData:o,possessionData:c,regressionData:h,awayGoalie:g,homeGoalie:p,isMobile:v,bestEdge:T,statsAnalyzer:S})=>{const[b,w]=ce.useState(!1),V=b?[]:(()=>{const F=[],Y=T?.type||"TOTAL";if(Y==="TOTAL"||Y==="OVER"||Y==="UNDER"){if(n&&n.away&&n.home){const q=n.away.high?.shots||0,ee=n.home.high?.shots||0;if(Math.abs(q-ee)>2){const ne=q>ee?s:e,re=Math.abs(q-ee).toFixed(1);F.push(`${ne} generates ${re} more high-danger chances per game`)}}if(o&&o.length>0){const q=o.find(ee=>ee.stat==="Shot Blocks");if(q){const ee=q.advantage==="away"?s:e;F.push(`${ee} blocks ${q.diff} more shots per game`)}}}if(h&&h.away&&h.home){const q=h.away.pdo||100,ee=h.home.pdo||100;q>102?F.push(`${s}'s PDO (${q.toFixed(1)}) suggests regression due`):ee>102?F.push(`${e}'s PDO (${ee.toFixed(1)}) suggests regression due`):q<98?F.push(`${s}'s PDO (${q.toFixed(1)}) indicates potential bounce-back`):ee<98&&F.push(`${e}'s PDO (${ee.toFixed(1)}) indicates potential bounce-back`)}if(c&&c.away&&c.home&&F.length<3){const q=c.away.corsiPct||50,ee=c.home.corsiPct||50;if(Math.abs(q-ee)>5){const ne=q>ee?s:e,re=Math.max(q,ee).toFixed(1);F.push(`${ne} controls ${re}% of shot attempts (elite possession)`)}}return F.slice(0,3)})();return d.jsxs("div",{style:{background:jt.factors,border:je.raised.border,boxShadow:je.raised.shadow,borderRadius:ue.borderRadius,overflow:"hidden",marginBottom:v?ue.sectionGap:"1.5rem",transition:Yn.normal},children:[d.jsxs("button",{onClick:()=>w(!b),"aria-expanded":b,"aria-controls":"advanced-metrics-content","aria-label":`${b?"Collapse":"Expand"} advanced metrics section`,style:{width:"100%",padding:v?ue.cardPadding:"1.25rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:Yn.normal},onMouseEnter:F=>F.currentTarget.style.background="rgba(212, 175, 55, 0.1)",onMouseLeave:F=>F.currentTarget.style.background="transparent",children:[d.jsxs("div",{style:{textAlign:"left"},children:[d.jsxs("div",{style:{fontSize:v?I.body.size:I.heading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem",letterSpacing:I.heading.letterSpacing},children:[d.jsx(Ji,{size:20,style:{color:"var(--color-accent)"}}),"Deep Dive: Advanced Metrics"]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",fontWeight:I.caption.weight,lineHeight:I.caption.lineHeight},children:b?"7 statistical categories expanded":"Danger zones, goalies, special teams, and more"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-accent)"},children:[d.jsx("span",{style:{fontSize:I.label.size,fontWeight:I.label.weight,textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:b?"Collapse":"Expand"}),b?d.jsx(gm,{size:20}):d.jsx(mm,{size:20})]})]}),!b&&V.length>0&&d.jsxs("div",{style:{padding:v?ue.cardPadding:"1.25rem",paddingTop:0,borderTop:je.flat.border},children:[d.jsxs("div",{style:{fontSize:I.label.size,fontWeight:I.label.weight,color:"var(--color-accent)",marginBottom:"0.75rem",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(n_,{size:16}),"Quick Hits"]}),d.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:V.map((F,Y)=>d.jsxs("li",{style:{fontSize:I.body.size,color:"var(--color-text-primary)",marginBottom:Y<V.length-1?"0.5rem":0,paddingLeft:"1.25rem",position:"relative",lineHeight:I.body.lineHeight,fontWeight:I.body.weight},children:[d.jsx("span",{style:{position:"absolute",left:0,color:"var(--color-accent)",fontWeight:I.heading.weight},children:"•"}),F]},Y))}),d.jsx("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:je.flat.border,textAlign:"center"},children:d.jsx("button",{onClick:()=>w(!0),style:{background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:I.label.size,fontWeight:I.body.weight,color:"var(--color-accent)",cursor:"pointer",transition:Yn.normal},onMouseEnter:F=>{F.currentTarget.style.background="rgba(212, 175, 55, 0.15)",F.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:F=>{F.currentTarget.style.background="rgba(212, 175, 55, 0.1)",F.currentTarget.style.transform="translateY(0)"},children:"View Full Breakdown →"})})]}),b&&d.jsx("div",{id:"advanced-metrics-content",role:"region","aria-label":"Advanced metrics detailed breakdown",style:{padding:v?ue.cardPadding:"1.5rem",paddingTop:0,borderTop:je.flat.border,maxHeight:b?"10000px":"0",overflow:b?"visible":"hidden",transition:"max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:(()=>{const F=T?.market==="TOTAL";return[{id:"danger-zone",priority:F?1:4,component:n&&d.jsx(LE,{data:n,awayTeam:s,homeTeam:e,isMobile:v,statsAnalyzer:S,bestEdge:T},"danger-zone")},{id:"goalie",priority:3,component:d.jsx(PE,{awayGoalie:g,homeGoalie:p,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:T},"goalie")},{id:"rebound",priority:F?1:4,component:r&&d.jsx(BE,{data:r,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:T},"rebound")},{id:"physical",priority:F?2:5,component:o&&d.jsx(FE,{data:o,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:T},"physical")},{id:"possession",priority:F?5:1,component:c&&d.jsx(GE,{data:c,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:T},"possession")},{id:"regression",priority:4,component:h&&d.jsx(HE,{data:h,awayTeam:s,homeTeam:e,isMobile:v,bestEdge:T},"regression")}].sort((q,ee)=>q.priority-ee.priority).map(q=>q.component).filter(Boolean)})()})]})},LE=({data:s,awayTeam:e,homeTeam:n,isMobile:r,statsAnalyzer:o})=>{const c=s.away.high?.shots||0,h=s.home.high?.shots||0,g=Math.abs(c-h),p=c>h?e:n,v=c>h?n:e,T=g*.23;return d.jsxs(Xl,{title:"Shot Danger Distribution",icon:d.jsx(Ji,{size:18}),isMobile:r,importance:"HIGH",children:[d.jsxs("div",{style:{padding:r?ue.innerPadding:"0.875rem",background:g>2?"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:g>2?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:r?ue.innerPadding:"1rem",textAlign:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx(Ji,{size:20,color:g>2?"#EF4444":"#8B5CF6"}),d.jsx("span",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:g>2?"#EF4444":"#8B5CF6"},children:g>2?`${p} GENERATES MORE HIGH-DANGER SHOTS`:"PRETTY EVEN MATCHUP - HIGH-DANGER CHANCES"})]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-secondary)",lineHeight:I.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:g>2?`${g.toFixed(1)} more HD shots/game vs ${v} • ~${T.toFixed(2)} goal impact`:"Both teams generate similar high-danger opportunities. Expect tight scoring chances."})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:r?"1fr":"repeat(3, 1fr)",gap:r?ue.innerPadding:"1rem",marginBottom:"1rem"},children:[d.jsx(em,{title:"Low Danger",color:"#64748B",awayShots:s.away.low.shots,homeShots:s.home.low.shots,awayXg:s.away.low.xGoals,homeXg:s.home.low.xGoals,awayTeam:e,homeTeam:n,isMobile:r}),d.jsx(em,{title:"Medium Danger",color:"#F59E0B",awayShots:s.away.medium.shots,homeShots:s.home.medium.shots,awayXg:s.away.medium.xGoals,homeXg:s.home.medium.xGoals,awayTeam:e,homeTeam:n,isMobile:r}),d.jsx(em,{title:"High Danger",color:"#EF4444",awayShots:s.away.high.shots,homeShots:s.home.high.shots,awayXg:s.away.high.xGoals,homeXg:s.home.high.xGoals,awayTeam:e,homeTeam:n,isMobile:r})]}),s.analysis&&d.jsxs("div",{style:{padding:r?ue.innerPadding:"0.75rem",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"6px",fontSize:I.label.size,color:"var(--color-text-secondary)",fontStyle:"italic",lineHeight:I.body.lineHeight},children:["💡 ",s.analysis]})]})},em=({title:s,color:e,awayShots:n,homeShots:r,awayXg:o,homeXg:c,awayTeam:h,homeTeam:g,isMobile:p})=>{const v=Math.max(n,r),T=v>0?n/v*100:0,S=v>0?r/v*100:0;return d.jsxs("div",{style:{padding:p?ue.innerPadding:"1rem",background:jt.factors,border:`1px solid ${e}40`,borderRadius:"8px",transition:Yn.normal},children:[d.jsx("div",{style:{fontSize:I.label.size,fontWeight:I.heading.weight,textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,color:e,marginBottom:p?"0.5rem":"0.75rem"},children:s}),d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem",display:"flex",justifyContent:"space-between",fontWeight:I.body.weight},children:[d.jsxs("span",{children:[h," OFF"]}),d.jsxs("span",{style:{fontWeight:I.heading.weight,fontFeatureSettings:"'tnum'"},children:[n," shots (",o.toFixed(2)," xG)"]})]}),d.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"6px",overflow:"hidden"},children:d.jsx("div",{style:{width:`${T}%`,height:"100%",background:`linear-gradient(90deg, ${e} 0%, ${e}CC 100%)`,borderRadius:"6px",transition:Yn.normal}})})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-secondary)",marginBottom:"0.25rem",display:"flex",justifyContent:"space-between",fontWeight:I.body.weight},children:[d.jsxs("span",{children:[g," DEF"]}),d.jsxs("span",{style:{fontWeight:I.heading.weight,fontFeatureSettings:"'tnum'"},children:[r," shots (",c.toFixed(2)," xG)"]})]}),d.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"6px",overflow:"hidden"},children:d.jsx("div",{style:{width:`${S}%`,height:"100%",background:`linear-gradient(90deg, ${e} 0%, ${e}CC 100%)`,borderRadius:"6px",transition:Yn.normal}})})]})]})},BE=({data:s,awayTeam:e,homeTeam:n,isMobile:r})=>{const o=parseFloat(s.awayOffense.conversion)||0,c=s.homeDefense.control,h=s.matchupEdge.favors;return d.jsxs(Xl,{title:"Second-Chance Opportunities",icon:d.jsx(ro,{size:18}),isMobile:r,importance:"HIGH",children:[d.jsxs("div",{style:{padding:r?ue.innerPadding:"0.875rem",background:h==="away"?"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)":h==="home"?"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:h==="away"?"1px solid rgba(16, 185, 129, 0.3)":h==="home"?"1px solid rgba(14, 165, 233, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:r?ue.innerPadding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx(ro,{size:20,color:h==="away"?"#10B981":h==="home"?"#0EA5E9":"#8B5CF6"}),d.jsx("span",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:h==="away"?"#10B981":h==="home"?"#0EA5E9":"#8B5CF6"},children:h==="away"?`${e} OFFENSE CREATES MORE SECOND CHANCES`:h==="home"?`${n} DEFENSE CONTROLS REBOUND POSITIONING`:"PRETTY EVEN MATCHUP - REBOUND CONTROL"})]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-secondary)",lineHeight:I.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:h!=="neutral"?s.matchupEdge.summary:"Both teams balanced in creating and controlling rebounds. No significant advantage."})]}),d.jsxs("div",{style:{padding:r?ue.innerPadding:"1rem",background:jt.factors,border:je.flat.border,borderRadius:"8px",marginBottom:r?ue.innerPadding:"1rem"},children:[d.jsxs("div",{style:{fontSize:I.caption.size,fontWeight:I.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,textAlign:"center"},children:[e," OFFENSE vs ",n," DEFENSE"]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"1rem",alignItems:"center"},children:[d.jsxs("div",{style:{textAlign:"center"},children:[d.jsxs("div",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:o>15?"#10B981":"#EF4444",marginBottom:"0.25rem",fontFeatureSettings:"'tnum'"},children:[s.awayOffense.conversion,"%"]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",marginBottom:"0.375rem"},children:"Conversion"}),d.jsxs("div",{style:{fontSize:I.caption.size,fontWeight:I.body.weight,color:"var(--color-text-primary)"},children:[s.awayOffense.rebounds," reb • ",s.awayOffense.reboundXg," xG"]}),s.awayOffense.status&&d.jsx("div",{style:{marginTop:"0.375rem",display:"inline-block",padding:"0.125rem 0.375rem",borderRadius:"3px",background:s.awayOffense.status==="Hot"?"#10B98120":s.awayOffense.status==="Cold"?"#EF444420":"#64748B20",color:s.awayOffense.status==="Hot"?"#10B981":s.awayOffense.status==="Cold"?"#EF4444":"#64748B",fontSize:I.caption.size,fontWeight:I.label.weight,textTransform:"uppercase"},children:s.awayOffense.status})]}),d.jsx("div",{style:{fontSize:I.subheading.size,color:"var(--color-accent)",fontWeight:I.heading.weight},children:"→"}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:c==="Excellent"?"#10B981":"#64748B",marginBottom:"0.25rem"},children:c}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",marginBottom:"0.375rem"},children:"Control"}),d.jsxs("div",{style:{fontSize:I.caption.size,fontWeight:I.body.weight,color:"var(--color-text-primary)"},children:[s.homeDefense.rebounds," reb • ",s.homeDefense.reboundXg," xG"]})]})]})]})]})},FE=({data:s,awayTeam:e,homeTeam:n,isMobile:r})=>{let o=e,c=0,h=0;s.forEach(v=>{v.advantage==="away"&&c++,v.advantage==="home"&&h++}),o=c>h?e:n;const g=s.find(v=>v.stat==="Shot Blocks"),p=s.find(v=>v.stat==="Hits");return d.jsxs(Xl,{title:"Physical Play & Defense",icon:d.jsx($r,{size:18}),isMobile:r,importance:"MODERATE",children:[c!==h&&d.jsxs("div",{style:{padding:r?ue.innerPadding:"0.875rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"8px",marginBottom:r?ue.innerPadding:"1rem",textAlign:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx(fE,{size:20,color:"var(--color-accent)"}),d.jsxs("span",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:"var(--color-accent)"},children:[o," has the PHYSICAL EDGE"]})]}),g&&p&&d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",fontWeight:I.caption.weight},children:[Math.abs(parseFloat(g.diff))," more blocks, ",Math.abs(parseFloat(p.diff))," more hits"]})]}),d.jsx("div",{style:{display:"grid",gap:r?ue.innerPadding:"0.75rem"},children:s.map((v,T)=>d.jsx(UE,{stat:v.stat,awayValue:v.away.value,awayLabel:v.away.label,homeValue:v.home.value,homeLabel:v.home.label,advantage:v.advantage,diff:v.diff,awayTeam:e,homeTeam:n,isMobile:r},T))})]})},UE=({stat:s,awayValue:e,awayLabel:n,homeValue:r,homeLabel:o,advantage:c,diff:h,awayTeam:g,homeTeam:p,isMobile:v})=>d.jsxs("div",{style:{padding:v?ue.innerPadding:"0.875rem",background:jt.factors,border:je.flat.border,borderRadius:"6px",transition:Yn.normal},children:[d.jsx("div",{style:{fontSize:I.caption.size,fontWeight:I.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.625rem",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:s}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:v?"0.5rem":"1rem",alignItems:"center"},children:[d.jsxs("div",{style:{textAlign:"left",color:c==="away"?"#10B981":"var(--color-text-secondary)",fontWeight:c==="away"?I.heading.weight:I.body.weight},children:[d.jsx("div",{style:{fontSize:I.body.size,fontFeatureSettings:"'tnum'",lineHeight:I.body.lineHeight},children:e}),d.jsx("div",{style:{fontSize:I.caption.size,opacity:.7,fontWeight:I.caption.weight},children:n})]}),d.jsxs("div",{style:{fontSize:I.caption.size,fontWeight:I.heading.weight,color:"var(--color-text-muted)",textAlign:"center"},children:["Δ ",h]}),d.jsxs("div",{style:{textAlign:"right",color:c==="home"?"#10B981":"var(--color-text-secondary)",fontWeight:c==="home"?I.heading.weight:I.body.weight},children:[d.jsx("div",{style:{fontSize:I.body.size,fontFeatureSettings:"'tnum'",lineHeight:I.body.lineHeight},children:r}),d.jsx("div",{style:{fontSize:I.caption.size,opacity:.7,fontWeight:I.caption.weight},children:o})]})]})]}),GE=({data:s,awayTeam:e,homeTeam:n,isMobile:r})=>{const o=s.away?.corsiPct||50,c=s.home?.corsiPct||50,h=s.away?.fenwickPct||50,g=s.home?.fenwickPct||50,p=s.away?.xGoalsPct||50,v=s.home?.xGoalsPct||50,T=s.away?.faceoffPct||50,S=s.home?.faceoffPct||50,b=(o+h+p)/3,w=(c+g+v)/3,z=b>w?e:n,V=Math.abs(b-w).toFixed(1);return d.jsxs(Xl,{title:"Possession & Control",icon:d.jsx(nr,{size:18}),isMobile:r,importance:"MODERATE",children:[d.jsxs("div",{style:{padding:r?ue.innerPadding:"0.875rem",background:V>3?"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)":"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%)",border:V>3?"1px solid rgba(14, 165, 233, 0.3)":"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",marginBottom:r?ue.innerPadding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx(nr,{size:20,color:V>3?"#0EA5E9":"#8B5CF6"}),d.jsx("span",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:V>3?"#0EA5E9":"#8B5CF6"},children:V>3?`${z} CONTROLS POSSESSION`:"PRETTY EVEN MATCHUP - POSSESSION"})]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-secondary)",lineHeight:I.body.lineHeight,fontStyle:"italic",textAlign:"center"},children:V>3?`${V}% advantage in shot attempts. More zone time = more scoring chances.`:"Both teams control the puck equally. Possession unlikely to be a deciding factor."})]}),d.jsx(tm,{label:"Shot Attempts (Corsi)",awayValue:o,homeValue:c,awayTeam:e,homeTeam:n,isMobile:r}),d.jsx(tm,{label:"Unblocked Shots (Fenwick)",awayValue:h,homeValue:g,awayTeam:e,homeTeam:n,isMobile:r}),d.jsx(tm,{label:"Expected Goals Share",awayValue:p,homeValue:v,awayTeam:e,homeTeam:n,isMobile:r}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:r?ue.innerPadding:"1rem",marginTop:r?ue.innerPadding:"1rem"},children:[d.jsx(xv,{team:e,percentage:T,isMobile:r}),d.jsx(xv,{team:n,percentage:S,isMobile:r})]})]})},tm=({label:s,awayValue:e,homeValue:n,awayTeam:r,homeTeam:o,isMobile:c})=>{const g=e>n?"#10B981":"#64748B",p=n>e?"#10B981":"#64748B";return d.jsxs("div",{style:{marginBottom:c?ue.innerPadding:"1rem",padding:c?ue.innerPadding:"0.875rem",background:jt.factors,border:je.flat.border,borderRadius:"8px"},children:[d.jsxs("div",{style:{fontSize:I.caption.size,fontWeight:I.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.75rem",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("span",{children:s}),d.jsxs("span",{style:{fontSize:I.caption.size,color:"rgba(212, 175, 55, 0.8)"},children:["League Avg: ",50,"%"]})]}),d.jsxs("div",{style:{marginBottom:"0.625rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:I.caption.size},children:[d.jsx("span",{style:{fontWeight:I.body.weight,color:"var(--color-text-primary)"},children:r}),d.jsxs("span",{style:{fontWeight:I.heading.weight,color:g,fontFeatureSettings:"'tnum'"},children:[e.toFixed(1),"%",e>50&&d.jsx("span",{style:{color:"#10B981",marginLeft:"0.25rem"},children:"↑"}),e<50&&d.jsx("span",{style:{color:"#EF4444",marginLeft:"0.25rem"},children:"↓"})]})]}),d.jsxs("div",{style:{width:"100%",height:"10px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"5px",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(212, 175, 55, 0.6)",zIndex:2}}),d.jsx("div",{style:{width:`${e}%`,height:"100%",background:`linear-gradient(90deg, ${g} 0%, ${g}CC 100%)`,borderRadius:"5px",transition:Yn.normal,position:"relative",zIndex:1}})]})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:I.caption.size},children:[d.jsx("span",{style:{fontWeight:I.body.weight,color:"var(--color-text-primary)"},children:o}),d.jsxs("span",{style:{fontWeight:I.heading.weight,color:p,fontFeatureSettings:"'tnum'"},children:[n.toFixed(1),"%",n>50&&d.jsx("span",{style:{color:"#10B981",marginLeft:"0.25rem"},children:"↑"}),n<50&&d.jsx("span",{style:{color:"#EF4444",marginLeft:"0.25rem"},children:"↓"})]})]}),d.jsxs("div",{style:{width:"100%",height:"10px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"5px",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"2px",background:"rgba(212, 175, 55, 0.6)",zIndex:2}}),d.jsx("div",{style:{width:`${n}%`,height:"100%",background:`linear-gradient(90deg, ${p} 0%, ${p}CC 100%)`,borderRadius:"5px",transition:Yn.normal,position:"relative",zIndex:1}})]})]})]})},xv=({team:s,percentage:e,isMobile:n})=>{const o=2*Math.PI*40,c=e/100*o,h=e>50?"#10B981":e<50?"#EF4444":"#8B5CF6";return d.jsxs("div",{style:{padding:n?ue.innerPadding:"1rem",background:jt.factors,border:je.flat.border,borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[d.jsxs("div",{style:{fontSize:I.caption.size,fontWeight:I.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.5rem",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:[s," Faceoffs"]}),d.jsxs("svg",{width:"100",height:"100",children:[d.jsx("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:"rgba(100, 116, 139, 0.2)",strokeWidth:"8"}),d.jsx("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:h,strokeWidth:"8",strokeDasharray:o,strokeDashoffset:o-c,strokeLinecap:"round",transform:"rotate(-90 50 50)",style:{transition:Yn.slow}}),d.jsxs("text",{x:"50",y:"50",textAnchor:"middle",dominantBaseline:"middle",style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,fill:h,fontFeatureSettings:"'tnum'"},children:[e.toFixed(1),"%"]})]})]})},HE=({data:s,awayTeam:e,homeTeam:n,isMobile:r})=>d.jsx(Xl,{title:"Luck & Regression Indicators",icon:d.jsx(nr,{size:18}),isMobile:r,importance:"MODERATE",children:d.jsxs("div",{style:{display:"grid",gridTemplateColumns:r?"1fr":"repeat(2, 1fr)",gap:r?ue.innerPadding:"1rem"},children:[d.jsx(bv,{team:e,pdo:s.away?.pdo||100,shootingPct:s.away?.shootingPct||10,savePct:s.away?.savePct||90,goalsVsXg:s.away?.goalsVsExpected||0,isMobile:r}),d.jsx(bv,{team:n,pdo:s.home?.pdo||100,shootingPct:s.home?.shootingPct||10,savePct:s.home?.savePct||90,goalsVsXg:s.home?.goalsVsExpected||0,isMobile:r})]})}),bv=({team:s,pdo:e,shootingPct:n,savePct:r,goalsVsXg:o,isMobile:c})=>{const g=e>104?{status:"LIKELY TO DECLINE",color:"#EF4444",icon:"📉",explanation:"PDO >104 indicates unsustainable luck. Expect fewer goals.",arrow:"↘️"}:e>102?{status:"MILD DECLINE LIKELY",color:"#F59E0B",icon:"⚠️",explanation:"PDO >102 suggests slight overperformance. Some regression expected.",arrow:"↘️"}:e<96?{status:"LIKELY TO IMPROVE",color:"#10B981",icon:"📈",explanation:"PDO <96 indicates bad luck. Expect more goals.",arrow:"↗️"}:e<98?{status:"MILD IMPROVEMENT LIKELY",color:"#0EA5E9",icon:"⬆️",explanation:"PDO <98 suggests slight underperformance. Some improvement expected.",arrow:"↗️"}:{status:"SUSTAINABLE",color:"#8B5CF6",icon:"✓",explanation:"PDO 98-102 indicates sustainable performance.",arrow:"→"};return d.jsxs("div",{style:{padding:c?ue.innerPadding:"1rem",background:jt.factors,border:je.flat.border,borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:I.caption.size,fontWeight:I.heading.weight,color:"var(--color-text-muted)",marginBottom:"0.5rem",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:s}),d.jsxs("div",{style:{padding:c?ue.innerPadding:"0.75rem",background:`${g.color}15`,border:`1px solid ${g.color}40`,borderRadius:"6px",marginBottom:c?"0.5rem":"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.375rem"},children:[d.jsx("span",{style:{fontSize:I.body.size},children:g.icon}),d.jsx("span",{style:{fontSize:I.caption.size,fontWeight:I.heading.weight,color:g.color,textTransform:"uppercase",letterSpacing:"0.05em"},children:g.status})]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-secondary)",lineHeight:I.body.lineHeight,fontStyle:"italic"},children:g.explanation})]}),d.jsx(Vu,{label:`PDO ${g.arrow}`,value:e.toFixed(1),badge:e>102?"Hot":e<98?"Cold":"Average",badgeColor:g.color}),d.jsx(Vu,{label:"Shooting %",value:`${n.toFixed(1)}%`}),d.jsx(Vu,{label:"Save %",value:`${r.toFixed(1)}%`}),d.jsx(Vu,{label:"Goals vs xG",value:o>=0?`+${o.toFixed(1)}`:o.toFixed(1),badgeColor:o>0?"#10B981":o<0?"#EF4444":"#64748B"})]})},Xl=({title:s,icon:e,children:n,isMobile:r,importance:o})=>{const c={HIGH:"var(--color-accent)",MODERATE:"#0EA5E9",LOW:"#8B5CF6"};return d.jsxs("div",{style:{marginBottom:r?ue.sectionGap:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",marginBottom:r?"0.5rem":"1rem",paddingBottom:"0.5rem",borderBottom:je.flat.border},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("div",{style:{color:"var(--color-accent)"},children:e}),d.jsx("h4",{style:{fontSize:r?I.body.size:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",margin:0,lineHeight:I.heading.lineHeight},children:s})]}),o&&d.jsx("span",{style:{fontSize:I.caption.size,fontWeight:I.label.weight,color:c[o],textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:o})]}),n]})},Vu=({label:s,value:e,badge:n,badgeColor:r})=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[d.jsx("span",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",fontWeight:I.caption.weight,lineHeight:I.caption.lineHeight},children:s}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("span",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'",lineHeight:I.body.lineHeight},children:e}),n&&d.jsx("span",{style:{fontSize:I.caption.size,fontWeight:I.label.weight,textTransform:I.label.textTransform,letterSpacing:"0.03em",padding:"0.125rem 0.375rem",borderRadius:"3px",background:`${r}20`,color:r},children:n})]})]});function $E(s){if(!s||s.length===0)return null;let e=0,n=0,r=0,o=0,c=0,h=0,g=0;if(s.forEach(z=>{const V=z.edges?.total?.predictedTotal,F=z.rawOdds?.total?.line;if(!V||!F)return;g++;const Y=V-F;e+=Math.abs(Y),n+=V,r+=F,Y<-.3?o++:Y>.3?c++:h++}),g===0)return null;const p=e/g,v=n/g,T=r/g,S=o/g,b=c/g,w={avgPredicted:v.toFixed(2),avgMarket:T.toFixed(2),avgDifference:p.toFixed(2),systematicBias:(v-T).toFixed(2),underBias:(S*100).toFixed(0)+"%",overBias:(b*100).toFixed(0)+"%",neutralBias:(h/g*100).toFixed(0)+"%",warnings:[]};return Math.abs(v-T)>.3&&w.warnings.push(`⚠️ Systematic bias: ${(v-T).toFixed(2)} goals`),S>.6&&w.warnings.push(`⚠️ UNDER bias: ${(S*100).toFixed(0)}% of games`),b>.6&&w.warnings.push(`⚠️ OVER bias: ${(b*100).toFixed(0)}% of games`),p>.4&&w.warnings.push(`⚠️ Predictions diverging from market by ${p.toFixed(2)} goals on average`),console.log("═══════════════════════════════════════"),console.log("📊 MODEL VALIDATION REPORT"),console.log("═══════════════════════════════════════"),console.log(`Avg Predicted Total: ${w.avgPredicted} goals`),console.log(`Avg Market Total:    ${w.avgMarket} goals`),console.log(`Avg Difference:      ${w.avgDifference} goals`),console.log(`Systematic Bias:     ${w.systematicBias} goals`),console.log("───────────────────────────────────────"),console.log(`UNDER recommendations: ${w.underBias}`),console.log(`OVER recommendations:  ${w.overBias}`),console.log(`Neutral (±0.3):        ${w.neutralBias}`),console.log("───────────────────────────────────────"),w.warnings.length>0?(console.log("⚠️ WARNINGS:"),w.warnings.forEach(z=>console.log(z))):console.log("✅ No systematic bias detected"),console.log("═══════════════════════════════════════"),w}const qE=()=>{};var Tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},WE=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],h=s[n++],g=s[n++],p=((o&7)<<18|(c&63)<<12|(h&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const c=s[n++],h=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},s_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,g=h?s[o+1]:0,p=o+2<s.length,v=p?s[o+2]:0,T=c>>2,S=(c&3)<<4|g>>4;let b=(g&15)<<2|v>>6,w=v&63;p||(w=64,h||(b=64)),r.push(n[T],n[S],n[b],n[w])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(r_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):WE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const v=o<s.length?n[s.charAt(o)]:64;++o;const S=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||g==null||v==null||S==null)throw new KE;const b=c<<2|g>>4;if(r.push(b),v!==64){const w=g<<4&240|v>>2;if(r.push(w),S!==64){const z=v<<6&192|S;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class KE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XE=function(s){const e=r_(s);return s_.encodeByteArray(e,!0)},uh=function(s){return XE(s).replace(/\./g,"")},a_=function(s){try{return s_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=()=>QE().__FIREBASE_DEFAULTS__,ZE=()=>{if(typeof process>"u"||typeof Tv>"u")return;const s=Tv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},JE=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&a_(s[1]);return e&&JSON.parse(e)},Ch=()=>{try{return qE()||YE()||ZE()||JE()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},o_=s=>Ch()?.emulatorHosts?.[s],l_=s=>{const e=o_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},c_=()=>Ch()?.config,u_=s=>Ch()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wm(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[uh(JSON.stringify(n)),uh(JSON.stringify(h)),""].join(".")}const Pl={};function nA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Pl))Pl[e]?s.emulator.push(e):s.prod.push(e);return s}function iA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Sv=!1;function Km(s,e){if(typeof window>"u"||typeof document>"u"||!ta(window.location.host)||Pl[s]===e||Pl[s]||Sv)return;Pl[s]=e;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",c=nA().prod.length>0;function h(){const b=document.getElementById(r);b&&b.remove()}function g(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function v(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Sv=!0,h()},b}function T(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function S(){const b=iA(r),w=n("text"),z=document.getElementById(w)||document.createElement("span"),V=n("learnmore"),F=document.getElementById(V)||document.createElement("a"),Y=n("preprendIcon"),q=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ee=b.element;g(ee),T(F,V);const ne=v();p(q,Y),ee.append(q,z,F,ne),document.body.appendChild(ee)}c?(z.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function sA(){const s=Ch()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function lA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cA(){const s=Yt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function uA(){return!sA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hA(){try{return typeof indexedDB=="object"}catch{return!1}}function dA(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="FirebaseError";class lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fA,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ql.prototype.create)}}class Ql{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?mA(c,r):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new lr(o,g,r)}}function mA(s,e){return s.replace(gA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const gA=/\{\$([^}]+)}/g;function pA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Qs(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=s[o],h=e[o];if(Ev(c)&&Ev(h)){if(!Qs(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Ev(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yA(s,e){const n=new vA(s,e);return n.subscribe.bind(n)}class vA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_A(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=nm),o.error===void 0&&(o.error=nm),o.complete===void 0&&(o.complete=nm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _A(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(s){return s&&s._delegate?s._delegate:s}class ns{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TA(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&h.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bA(s){return s===Hs?void 0:s}function TA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(De||(De={}));const EA={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},AA=De.INFO,wA={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},RA=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=wA[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=AA,this._logHandler=RA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const IA=(s,e)=>e.some(n=>s instanceof n);let Av,wv;function CA(){return Av||(Av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DA(){return wv||(wv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h_=new WeakMap,pm=new WeakMap,d_=new WeakMap,im=new WeakMap,Qm=new WeakMap;function jA(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{n(Yr(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&h_.set(n,s)}).catch(()=>{}),Qm.set(e,s),e}function NA(s){if(pm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});pm.set(s,e)}let ym={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return pm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||d_.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function OA(s){ym=s(ym)}function PA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(rm(this),e,...n);return d_.set(r,e.sort?e.sort():[e]),Yr(r)}:DA().includes(s)?function(...e){return s.apply(rm(this),e),Yr(h_.get(this))}:function(...e){return Yr(s.apply(rm(this),e))}}function kA(s){return typeof s=="function"?PA(s):(s instanceof IDBTransaction&&NA(s),IA(s,CA())?new Proxy(s,ym):s)}function Yr(s){if(s instanceof IDBRequest)return jA(s);if(im.has(s))return im.get(s);const e=kA(s);return e!==s&&(im.set(s,e),Qm.set(e,s)),e}const rm=s=>Qm.get(s);function MA(s,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),g=Yr(h);return r&&h.addEventListener("upgradeneeded",p=>{r(Yr(h.result),p.oldVersion,p.newVersion,Yr(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const zA=["get","getKey","getAll","getAllKeys","count"],VA=["put","add","delete","clear"],sm=new Map;function Rv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=VA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||zA.includes(n)))return;const c=async function(h,...g){const p=this.transaction(h,o?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),o&&p.done]))[0]};return sm.set(e,c),c}OA(s=>({...s,get:(e,n,r)=>Rv(e,n)||s.get(e,n,r),has:(e,n)=>!!Rv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BA(s){return s.getComponent()?.type==="VERSION"}const vm="@firebase/app",Iv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Xm("@firebase/app"),FA="@firebase/app-compat",UA="@firebase/analytics-compat",GA="@firebase/analytics",HA="@firebase/app-check-compat",$A="@firebase/app-check",qA="@firebase/auth",WA="@firebase/auth-compat",KA="@firebase/database",XA="@firebase/data-connect",QA="@firebase/database-compat",YA="@firebase/functions",ZA="@firebase/functions-compat",JA="@firebase/installations",ew="@firebase/installations-compat",tw="@firebase/messaging",nw="@firebase/messaging-compat",iw="@firebase/performance",rw="@firebase/performance-compat",sw="@firebase/remote-config",aw="@firebase/remote-config-compat",ow="@firebase/storage",lw="@firebase/storage-compat",cw="@firebase/firestore",uw="@firebase/ai",hw="@firebase/firestore-compat",dw="firebase",fw="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="[DEFAULT]",mw={[vm]:"fire-core",[FA]:"fire-core-compat",[GA]:"fire-analytics",[UA]:"fire-analytics-compat",[$A]:"fire-app-check",[HA]:"fire-app-check-compat",[qA]:"fire-auth",[WA]:"fire-auth-compat",[KA]:"fire-rtdb",[XA]:"fire-data-connect",[QA]:"fire-rtdb-compat",[YA]:"fire-fn",[ZA]:"fire-fn-compat",[JA]:"fire-iid",[ew]:"fire-iid-compat",[tw]:"fire-fcm",[nw]:"fire-fcm-compat",[iw]:"fire-perf",[rw]:"fire-perf-compat",[sw]:"fire-rc",[aw]:"fire-rc-compat",[ow]:"fire-gcs",[lw]:"fire-gcs-compat",[cw]:"fire-fst",[hw]:"fire-fst-compat",[uw]:"fire-vertex","fire-js":"fire-js",[dw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,gw=new Map,xm=new Map;function Cv(s,e){try{s.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ys(s){const e=s.name;if(xm.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;xm.set(e,s);for(const n of hh.values())Cv(n,s);for(const n of gw.values())Cv(n,s);return!0}function Dh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Xn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new Ql("app","Firebase",pw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=fw;function f_(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:_m,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Zr.create("bad-app-name",{appName:String(o)});if(n||(n=c_()),!n)throw Zr.create("no-options");const c=hh.get(o);if(c){if(Qs(n,c.options)&&Qs(r,c.config))return c;throw Zr.create("duplicate-app",{appName:o})}const h=new SA(o);for(const p of xm.values())h.addComponent(p);const g=new yw(n,r,h);return hh.set(o,g),g}function Ym(s=_m){const e=hh.get(s);if(!e&&s===_m&&c_())return f_();if(!e)throw Zr.create("no-app",{appName:s});return e}function Ti(s,e,n){let r=mw[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(h.join(" "));return}Ys(new ns(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="firebase-heartbeat-database",_w=1,Bl="firebase-heartbeat-store";let am=null;function m_(){return am||(am=MA(vw,_w,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Zr.create("idb-open",{originalErrorMessage:s.message})})),am}async function xw(s){try{const n=(await m_()).transaction(Bl),r=await n.objectStore(Bl).get(g_(s));return await n.done,r}catch(e){if(e instanceof lr)ir.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e?.message});ir.warn(n.message)}}}async function Dv(s,e){try{const r=(await m_()).transaction(Bl,"readwrite");await r.objectStore(Bl).put(e,g_(s)),await r.done}catch(n){if(n instanceof lr)ir.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n?.message});ir.warn(r.message)}}}function g_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=1024,Tw=30;class Sw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Aw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=jv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Tw){const o=ww(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jv(),{heartbeatsToSend:n,unsentEntries:r}=Ew(this._heartbeatsCache.heartbeats),o=uh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ir.warn(e),""}}}function jv(){return new Date().toISOString().substring(0,10)}function Ew(s,e=bw){const n=[];let r=s.slice();for(const o of s){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),Nv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Nv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Aw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hA()?dA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Nv(s){return uh(JSON.stringify({version:2,heartbeats:s})).length}function ww(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(s){Ys(new ns("platform-logger",e=>new LA(e),"PRIVATE")),Ys(new ns("heartbeat",e=>new Sw(e),"PRIVATE")),Ti(vm,Iv,s),Ti(vm,Iv,"esm2020"),Ti("fire-js","")}Rw("");var Ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,p_;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,E){function D(){}D.prototype=E.prototype,P.F=E.prototype,P.prototype=new D,P.prototype.constructor=P,P.D=function(N,C,M){for(var j=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)j[Ee-2]=arguments[Ee];return E.prototype[C].apply(N,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,E,D){D||(D=0);const N=Array(16);if(typeof E=="string")for(var C=0;C<16;++C)N[C]=E.charCodeAt(D++)|E.charCodeAt(D++)<<8|E.charCodeAt(D++)<<16|E.charCodeAt(D++)<<24;else for(C=0;C<16;++C)N[C]=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24;E=P.g[0],D=P.g[1],C=P.g[2];let M=P.g[3],j;j=E+(M^D&(C^M))+N[0]+3614090360&4294967295,E=D+(j<<7&4294967295|j>>>25),j=M+(C^E&(D^C))+N[1]+3905402710&4294967295,M=E+(j<<12&4294967295|j>>>20),j=C+(D^M&(E^D))+N[2]+606105819&4294967295,C=M+(j<<17&4294967295|j>>>15),j=D+(E^C&(M^E))+N[3]+3250441966&4294967295,D=C+(j<<22&4294967295|j>>>10),j=E+(M^D&(C^M))+N[4]+4118548399&4294967295,E=D+(j<<7&4294967295|j>>>25),j=M+(C^E&(D^C))+N[5]+1200080426&4294967295,M=E+(j<<12&4294967295|j>>>20),j=C+(D^M&(E^D))+N[6]+2821735955&4294967295,C=M+(j<<17&4294967295|j>>>15),j=D+(E^C&(M^E))+N[7]+4249261313&4294967295,D=C+(j<<22&4294967295|j>>>10),j=E+(M^D&(C^M))+N[8]+1770035416&4294967295,E=D+(j<<7&4294967295|j>>>25),j=M+(C^E&(D^C))+N[9]+2336552879&4294967295,M=E+(j<<12&4294967295|j>>>20),j=C+(D^M&(E^D))+N[10]+4294925233&4294967295,C=M+(j<<17&4294967295|j>>>15),j=D+(E^C&(M^E))+N[11]+2304563134&4294967295,D=C+(j<<22&4294967295|j>>>10),j=E+(M^D&(C^M))+N[12]+1804603682&4294967295,E=D+(j<<7&4294967295|j>>>25),j=M+(C^E&(D^C))+N[13]+4254626195&4294967295,M=E+(j<<12&4294967295|j>>>20),j=C+(D^M&(E^D))+N[14]+2792965006&4294967295,C=M+(j<<17&4294967295|j>>>15),j=D+(E^C&(M^E))+N[15]+1236535329&4294967295,D=C+(j<<22&4294967295|j>>>10),j=E+(C^M&(D^C))+N[1]+4129170786&4294967295,E=D+(j<<5&4294967295|j>>>27),j=M+(D^C&(E^D))+N[6]+3225465664&4294967295,M=E+(j<<9&4294967295|j>>>23),j=C+(E^D&(M^E))+N[11]+643717713&4294967295,C=M+(j<<14&4294967295|j>>>18),j=D+(M^E&(C^M))+N[0]+3921069994&4294967295,D=C+(j<<20&4294967295|j>>>12),j=E+(C^M&(D^C))+N[5]+3593408605&4294967295,E=D+(j<<5&4294967295|j>>>27),j=M+(D^C&(E^D))+N[10]+38016083&4294967295,M=E+(j<<9&4294967295|j>>>23),j=C+(E^D&(M^E))+N[15]+3634488961&4294967295,C=M+(j<<14&4294967295|j>>>18),j=D+(M^E&(C^M))+N[4]+3889429448&4294967295,D=C+(j<<20&4294967295|j>>>12),j=E+(C^M&(D^C))+N[9]+568446438&4294967295,E=D+(j<<5&4294967295|j>>>27),j=M+(D^C&(E^D))+N[14]+3275163606&4294967295,M=E+(j<<9&4294967295|j>>>23),j=C+(E^D&(M^E))+N[3]+4107603335&4294967295,C=M+(j<<14&4294967295|j>>>18),j=D+(M^E&(C^M))+N[8]+1163531501&4294967295,D=C+(j<<20&4294967295|j>>>12),j=E+(C^M&(D^C))+N[13]+2850285829&4294967295,E=D+(j<<5&4294967295|j>>>27),j=M+(D^C&(E^D))+N[2]+4243563512&4294967295,M=E+(j<<9&4294967295|j>>>23),j=C+(E^D&(M^E))+N[7]+1735328473&4294967295,C=M+(j<<14&4294967295|j>>>18),j=D+(M^E&(C^M))+N[12]+2368359562&4294967295,D=C+(j<<20&4294967295|j>>>12),j=E+(D^C^M)+N[5]+4294588738&4294967295,E=D+(j<<4&4294967295|j>>>28),j=M+(E^D^C)+N[8]+2272392833&4294967295,M=E+(j<<11&4294967295|j>>>21),j=C+(M^E^D)+N[11]+1839030562&4294967295,C=M+(j<<16&4294967295|j>>>16),j=D+(C^M^E)+N[14]+4259657740&4294967295,D=C+(j<<23&4294967295|j>>>9),j=E+(D^C^M)+N[1]+2763975236&4294967295,E=D+(j<<4&4294967295|j>>>28),j=M+(E^D^C)+N[4]+1272893353&4294967295,M=E+(j<<11&4294967295|j>>>21),j=C+(M^E^D)+N[7]+4139469664&4294967295,C=M+(j<<16&4294967295|j>>>16),j=D+(C^M^E)+N[10]+3200236656&4294967295,D=C+(j<<23&4294967295|j>>>9),j=E+(D^C^M)+N[13]+681279174&4294967295,E=D+(j<<4&4294967295|j>>>28),j=M+(E^D^C)+N[0]+3936430074&4294967295,M=E+(j<<11&4294967295|j>>>21),j=C+(M^E^D)+N[3]+3572445317&4294967295,C=M+(j<<16&4294967295|j>>>16),j=D+(C^M^E)+N[6]+76029189&4294967295,D=C+(j<<23&4294967295|j>>>9),j=E+(D^C^M)+N[9]+3654602809&4294967295,E=D+(j<<4&4294967295|j>>>28),j=M+(E^D^C)+N[12]+3873151461&4294967295,M=E+(j<<11&4294967295|j>>>21),j=C+(M^E^D)+N[15]+530742520&4294967295,C=M+(j<<16&4294967295|j>>>16),j=D+(C^M^E)+N[2]+3299628645&4294967295,D=C+(j<<23&4294967295|j>>>9),j=E+(C^(D|~M))+N[0]+4096336452&4294967295,E=D+(j<<6&4294967295|j>>>26),j=M+(D^(E|~C))+N[7]+1126891415&4294967295,M=E+(j<<10&4294967295|j>>>22),j=C+(E^(M|~D))+N[14]+2878612391&4294967295,C=M+(j<<15&4294967295|j>>>17),j=D+(M^(C|~E))+N[5]+4237533241&4294967295,D=C+(j<<21&4294967295|j>>>11),j=E+(C^(D|~M))+N[12]+1700485571&4294967295,E=D+(j<<6&4294967295|j>>>26),j=M+(D^(E|~C))+N[3]+2399980690&4294967295,M=E+(j<<10&4294967295|j>>>22),j=C+(E^(M|~D))+N[10]+4293915773&4294967295,C=M+(j<<15&4294967295|j>>>17),j=D+(M^(C|~E))+N[1]+2240044497&4294967295,D=C+(j<<21&4294967295|j>>>11),j=E+(C^(D|~M))+N[8]+1873313359&4294967295,E=D+(j<<6&4294967295|j>>>26),j=M+(D^(E|~C))+N[15]+4264355552&4294967295,M=E+(j<<10&4294967295|j>>>22),j=C+(E^(M|~D))+N[6]+2734768916&4294967295,C=M+(j<<15&4294967295|j>>>17),j=D+(M^(C|~E))+N[13]+1309151649&4294967295,D=C+(j<<21&4294967295|j>>>11),j=E+(C^(D|~M))+N[4]+4149444226&4294967295,E=D+(j<<6&4294967295|j>>>26),j=M+(D^(E|~C))+N[11]+3174756917&4294967295,M=E+(j<<10&4294967295|j>>>22),j=C+(E^(M|~D))+N[2]+718787259&4294967295,C=M+(j<<15&4294967295|j>>>17),j=D+(M^(C|~E))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+E&4294967295,P.g[1]=P.g[1]+(C+(j<<21&4294967295|j>>>11))&4294967295,P.g[2]=P.g[2]+C&4294967295,P.g[3]=P.g[3]+M&4294967295}r.prototype.v=function(P,E){E===void 0&&(E=P.length);const D=E-this.blockSize,N=this.C;let C=this.h,M=0;for(;M<E;){if(C==0)for(;M<=D;)o(this,P,M),M+=this.blockSize;if(typeof P=="string"){for(;M<E;)if(N[C++]=P.charCodeAt(M++),C==this.blockSize){o(this,N),C=0;break}}else for(;M<E;)if(N[C++]=P[M++],C==this.blockSize){o(this,N),C=0;break}}this.h=C,this.o+=E},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var E=1;E<P.length-8;++E)P[E]=0;E=this.o*8;for(var D=P.length-8;D<P.length;++D)P[D]=E&255,E/=256;for(this.v(P),P=Array(16),E=0,D=0;D<4;++D)for(let N=0;N<32;N+=8)P[E++]=this.g[D]>>>N&255;return P};function c(P,E){var D=g;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=E(P)}function h(P,E){this.h=E;const D=[];let N=!0;for(let C=P.length-1;C>=0;C--){const M=P[C]|0;N&&M==E||(D[C]=M,N=!1)}this.g=D}var g={};function p(P){return-128<=P&&P<128?c(P,function(E){return new h([E|0],E<0?-1:0)}):new h([P|0],P<0?-1:0)}function v(P){if(isNaN(P)||!isFinite(P))return S;if(P<0)return F(v(-P));const E=[];let D=1;for(let N=0;P>=D;N++)E[N]=P/D|0,D*=4294967296;return new h(E,0)}function T(P,E){if(P.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(P.charAt(0)=="-")return F(T(P.substring(1),E));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=v(Math.pow(E,8));let N=S;for(let M=0;M<P.length;M+=8){var C=Math.min(8,P.length-M);const j=parseInt(P.substring(M,M+C),E);C<8?(C=v(Math.pow(E,C)),N=N.j(C).add(v(j))):(N=N.j(D),N=N.add(v(j)))}return N}var S=p(0),b=p(1),w=p(16777216);s=h.prototype,s.m=function(){if(V(this))return-F(this).m();let P=0,E=1;for(let D=0;D<this.g.length;D++){const N=this.i(D);P+=(N>=0?N:4294967296+N)*E,E*=4294967296}return P},s.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(z(this))return"0";if(V(this))return"-"+F(this).toString(P);const E=v(Math.pow(P,6));var D=this;let N="";for(;;){const C=ne(D,E).g;D=Y(D,C.j(E));let M=((D.g.length>0?D.g[0]:D.h)>>>0).toString(P);if(D=C,z(D))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},s.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function z(P){if(P.h!=0)return!1;for(let E=0;E<P.g.length;E++)if(P.g[E]!=0)return!1;return!0}function V(P){return P.h==-1}s.l=function(P){return P=Y(this,P),V(P)?-1:z(P)?0:1};function F(P){const E=P.g.length,D=[];for(let N=0;N<E;N++)D[N]=~P.g[N];return new h(D,~P.h).add(b)}s.abs=function(){return V(this)?F(this):this},s.add=function(P){const E=Math.max(this.g.length,P.g.length),D=[];let N=0;for(let C=0;C<=E;C++){let M=N+(this.i(C)&65535)+(P.i(C)&65535),j=(M>>>16)+(this.i(C)>>>16)+(P.i(C)>>>16);N=j>>>16,M&=65535,j&=65535,D[C]=j<<16|M}return new h(D,D[D.length-1]&-2147483648?-1:0)};function Y(P,E){return P.add(F(E))}s.j=function(P){if(z(this)||z(P))return S;if(V(this))return V(P)?F(this).j(F(P)):F(F(this).j(P));if(V(P))return F(this.j(F(P)));if(this.l(w)<0&&P.l(w)<0)return v(this.m()*P.m());const E=this.g.length+P.g.length,D=[];for(var N=0;N<2*E;N++)D[N]=0;for(N=0;N<this.g.length;N++)for(let C=0;C<P.g.length;C++){const M=this.i(N)>>>16,j=this.i(N)&65535,Ee=P.i(C)>>>16,ot=P.i(C)&65535;D[2*N+2*C]+=j*ot,q(D,2*N+2*C),D[2*N+2*C+1]+=M*ot,q(D,2*N+2*C+1),D[2*N+2*C+1]+=j*Ee,q(D,2*N+2*C+1),D[2*N+2*C+2]+=M*Ee,q(D,2*N+2*C+2)}for(P=0;P<E;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=E;P<2*E;P++)D[P]=0;return new h(D,0)};function q(P,E){for(;(P[E]&65535)!=P[E];)P[E+1]+=P[E]>>>16,P[E]&=65535,E++}function ee(P,E){this.g=P,this.h=E}function ne(P,E){if(z(E))throw Error("division by zero");if(z(P))return new ee(S,S);if(V(P))return E=ne(F(P),E),new ee(F(E.g),F(E.h));if(V(E))return E=ne(P,F(E)),new ee(F(E.g),E.h);if(P.g.length>30){if(V(P)||V(E))throw Error("slowDivide_ only works with positive integers.");for(var D=b,N=E;N.l(P)<=0;)D=re(D),N=re(N);var C=ye(D,1),M=ye(N,1);for(N=ye(N,2),D=ye(D,2);!z(N);){var j=M.add(N);j.l(P)<=0&&(C=C.add(D),M=j),N=ye(N,1),D=ye(D,1)}return E=Y(P,C.j(E)),new ee(C,E)}for(C=S;P.l(E)>=0;){for(D=Math.max(1,Math.floor(P.m()/E.m())),N=Math.ceil(Math.log(D)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=v(D),j=M.j(E);V(j)||j.l(P)>0;)D-=N,M=v(D),j=M.j(E);z(M)&&(M=b),C=C.add(M),P=Y(P,j)}return new ee(C,P)}s.B=function(P){return ne(this,P).h},s.and=function(P){const E=Math.max(this.g.length,P.g.length),D=[];for(let N=0;N<E;N++)D[N]=this.i(N)&P.i(N);return new h(D,this.h&P.h)},s.or=function(P){const E=Math.max(this.g.length,P.g.length),D=[];for(let N=0;N<E;N++)D[N]=this.i(N)|P.i(N);return new h(D,this.h|P.h)},s.xor=function(P){const E=Math.max(this.g.length,P.g.length),D=[];for(let N=0;N<E;N++)D[N]=this.i(N)^P.i(N);return new h(D,this.h^P.h)};function re(P){const E=P.g.length+1,D=[];for(let N=0;N<E;N++)D[N]=P.i(N)<<1|P.i(N-1)>>>31;return new h(D,P.h)}function ye(P,E){const D=E>>5;E%=32;const N=P.g.length-D,C=[];for(let M=0;M<N;M++)C[M]=E>0?P.i(M+D)>>>E|P.i(M+D+1)<<32-E:P.i(M+D);return new h(C,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,p_=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=T,Jr=h}).apply(typeof Ov<"u"?Ov:typeof self<"u"?self:typeof window<"u"?window:{});var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var y_,Dl,v_,Ku,bm,__,x_,b_;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lu=="object"&&Lu];for(var y=0;y<u.length;++y){var x=u[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function o(u,y){if(y)e:{var x=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var B=u[R];if(!(B in x))break e;x=x[B]}u=u[u.length-1],R=x[u],y=y(R),y!=R&&y!=null&&e(x,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var x=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&x.push([R,y[R]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function g(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function p(u,y,x){return u.call.apply(u.bind,arguments)}function v(u,y,x){return v=p,v.apply(null,arguments)}function T(u,y){var x=Array.prototype.slice.call(arguments,1);return function(){var R=x.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function S(u,y){function x(){}x.prototype=y.prototype,u.Z=y.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(R,B,$){for(var ie=Array(arguments.length-2),be=2;be<arguments.length;be++)ie[be-2]=arguments[be];return y.prototype[B].apply(R,ie)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function w(u){const y=u.length;if(y>0){const x=Array(y);for(let R=0;R<y;R++)x[R]=u[R];return x}return[]}function z(u,y){for(let R=1;R<arguments.length;R++){const B=arguments[R];var x=typeof B;if(x=x!="object"?x:B?Array.isArray(B)?"array":x:"null",x=="array"||x=="object"&&typeof B.length=="number"){x=u.length||0;const $=B.length||0;u.length=x+$;for(let ie=0;ie<$;ie++)u[x+ie]=B[ie]}else u.push(B)}}class V{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(u){h.setTimeout(()=>{throw u},0)}function Y(){var u=P;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class q{constructor(){this.h=this.g=null}add(y,x){const R=ee.get();R.set(y,x),this.h?this.h.next=R:this.g=R,this.h=R}}var ee=new V(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ye=!1,P=new q,E=()=>{const u=Promise.resolve(void 0);re=()=>{u.then(D)}};function D(){for(var u;u=Y();){try{u.h.call(u.g)}catch(x){F(x)}var y=ee;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}ye=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};h.addEventListener("test",x,y),h.removeEventListener("test",x,y)}catch{}return u})();function j(u){return/^[\s\xa0]*$/.test(u)}function Ee(u,y){C.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}S(Ee,C),Ee.prototype.init=function(u,y){const x=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(x=="mouseover"?y=u.fromElement:x=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ot="closure_listenable_"+(Math.random()*1e6|0),X=0;function se(u,y,x,R,B){this.listener=u,this.proxy=null,this.src=y,this.type=x,this.capture=!!R,this.ha=B,this.key=++X,this.da=this.fa=!1}function de(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ke(u,y,x){for(const R in u)y.call(x,u[R],R,u)}function ze(u,y){for(const x in u)y.call(void 0,u[x],x,u)}function ut(u){const y={};for(const x in u)y[x]=u[x];return y}const qe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(u,y){let x,R;for(let B=1;B<arguments.length;B++){R=arguments[B];for(x in R)u[x]=R[x];for(let $=0;$<qe.length;$++)x=qe[$],Object.prototype.hasOwnProperty.call(R,x)&&(u[x]=R[x])}}function Ze(u){this.src=u,this.g={},this.h=0}Ze.prototype.add=function(u,y,x,R,B){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const ie=Zt(u,y,R,B);return ie>-1?(y=u[ie],x||(y.fa=!1)):(y=new se(y,this.src,$,!!R,B),y.fa=x,u.push(y)),y};function Wt(u,y){const x=y.type;if(x in u.g){var R=u.g[x],B=Array.prototype.indexOf.call(R,y,void 0),$;($=B>=0)&&Array.prototype.splice.call(R,B,1),$&&(de(y),u.g[x].length==0&&(delete u.g[x],u.h--))}}function Zt(u,y,x,R){for(let B=0;B<u.length;++B){const $=u[B];if(!$.da&&$.listener==y&&$.capture==!!x&&$.ha==R)return B}return-1}var Mn="closure_lm_"+(Math.random()*1e6|0),Ni={};function Oi(u,y,x,R,B){if(Array.isArray(y)){for(let $=0;$<y.length;$++)Oi(u,y[$],x,R,B);return null}return x=Eo(x),u&&u[ot]?u.J(y,x,g(R)?!!R.capture:!1,B):bo(u,y,x,!1,R,B)}function bo(u,y,x,R,B,$){if(!y)throw Error("Invalid event type");const ie=g(B)?!!B.capture:!!B;let be=ds(u);if(be||(u[Mn]=be=new Ze(u)),x=be.add(y,x,R,ie,$),x.proxy)return x;if(R=ra(),x.proxy=R,R.src=u,R.listener=x,u.addEventListener)M||(B=ie),B===void 0&&(B=!1),u.addEventListener(y.toString(),R,B);else if(u.attachEvent)u.attachEvent(Jn(y.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ra(){function u(x){return y.call(u.src,u.listener,x)}const y=To;return u}function sa(u,y,x,R,B){if(Array.isArray(y))for(var $=0;$<y.length;$++)sa(u,y[$],x,R,B);else R=g(R)?!!R.capture:!!R,x=Eo(x),u&&u[ot]?(u=u.i,$=String(y).toString(),$ in u.g&&(y=u.g[$],x=Zt(y,x,R,B),x>-1&&(de(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete u.g[$],u.h--)))):u&&(u=ds(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Zt(y,x,R,B)),(x=u>-1?y[u]:null)&&aa(x))}function aa(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[ot])Wt(y.i,u);else{var x=u.type,R=u.proxy;y.removeEventListener?y.removeEventListener(x,R,u.capture):y.detachEvent?y.detachEvent(Jn(x),R):y.addListener&&y.removeListener&&y.removeListener(R),(x=ds(y))?(Wt(x,u),x.h==0&&(x.src=null,y[Mn]=null)):de(u)}}}function Jn(u){return u in Ni?Ni[u]:Ni[u]="on"+u}function To(u,y){if(u.da)u=!0;else{y=new Ee(y,this);const x=u.listener,R=u.ha||u.src;u.fa&&aa(u),u=x.call(R,y)}return u}function ds(u){return u=u[Mn],u instanceof Ze?u:null}var So="__closure_events_fn_"+(Math.random()*1e9>>>0);function Eo(u){return typeof u=="function"?u:(u[So]||(u[So]=function(y){return u.handleEvent(y)}),u[So])}function yt(){N.call(this),this.i=new Ze(this),this.M=this,this.G=null}S(yt,N),yt.prototype[ot]=!0,yt.prototype.removeEventListener=function(u,y,x,R){sa(this,u,y,x,R)};function Ct(u,y){var x,R=u.G;if(R)for(x=[];R;R=R.G)x.push(R);if(u=u.M,R=y.type||y,typeof y=="string")y=new C(y,u);else if(y instanceof C)y.target=y.target||u;else{var B=y;y=new C(R,u),Re(y,B)}B=!0;let $,ie;if(x)for(ie=x.length-1;ie>=0;ie--)$=y.g=x[ie],B=cr($,R,!0,y)&&B;if($=y.g=u,B=cr($,R,!0,y)&&B,B=cr($,R,!1,y)&&B,x)for(ie=0;ie<x.length;ie++)$=y.g=x[ie],B=cr($,R,!1,y)&&B}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const x=u.g[y];for(let R=0;R<x.length;R++)de(x[R]);delete u.g[y],u.h--}}this.G=null},yt.prototype.J=function(u,y,x,R){return this.i.add(String(u),y,!1,x,R)},yt.prototype.K=function(u,y,x,R){return this.i.add(String(u),y,!0,x,R)};function cr(u,y,x,R){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let $=0;$<y.length;++$){const ie=y[$];if(ie&&!ie.da&&ie.capture==x){const be=ie.listener,dt=ie.ha||ie.src;ie.fa&&Wt(u.i,ie),B=be.call(dt,R)!==!1&&B}}return B&&!R.defaultPrevented}function Qh(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(u,y||0)}function oc(u){u.g=Qh(()=>{u.g=null,u.i&&(u.i=!1,oc(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Jt extends N{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:oc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(u){N.call(this),this.h=u,this.g={}}S(fs,N);var Ao=[];function wo(u){ke(u.g,function(y,x){this.g.hasOwnProperty(x)&&aa(y)},u),u.g={}}fs.prototype.N=function(){fs.Z.N.call(this),wo(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ur=h.JSON.stringify,Yh=h.JSON.parse,lc=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function cc(){}function uc(){}var zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vt(){C.call(this,"d")}S(Vt,C);function Tn(){C.call(this,"c")}S(Tn,C);var ht={},hc=null;function oa(){return hc=hc||new yt}ht.Ia="serverreachability";function dc(u){C.call(this,ht.Ia,u)}S(dc,C);function ei(u){const y=oa();Ct(y,new dc(y))}ht.STAT_EVENT="statevent";function ms(u,y){C.call(this,ht.STAT_EVENT,u),this.stat=y}S(ms,C);function vt(u){const y=oa();Ct(y,new ms(y,u))}ht.Ja="timingevent";function ti(u,y){C.call(this,ht.Ja,u),this.size=y}S(ti,C);function ni(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},y)}function Vn(){this.g=!0}Vn.prototype.ua=function(){this.g=!1};function Zh(u,y,x,R,B,$){u.info(function(){if(u.g)if($){var ie="",be=$.split("&");for(let Be=0;Be<be.length;Be++){var dt=be[Be].split("=");if(dt.length>1){const rt=dt[0];dt=dt[1];const wn=rt.split("_");ie=wn.length>=2&&wn[1]=="type"?ie+(rt+"="+dt+"&"):ie+(rt+"=redacted&")}}}else ie=null;else ie=$;return"XMLHTTP REQ ("+R+") [attempt "+B+"]: "+y+`
`+x+`
`+ie})}function fc(u,y,x,R,B,$,ie){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+B+"]: "+y+`
`+x+`
`+$+" "+ie})}function ii(u,y,x,R){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Jh(u,x)+(R?" "+R:"")})}function gs(u,y){u.info(function(){return"TIMEOUT: "+y})}Vn.prototype.info=function(){};function Jh(u,y){if(!u.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var x=$[u];if(!(x.length<2)){var R=x[1];if(Array.isArray(R)&&!(R.length<1)){var B=R[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ie=1;ie<R.length;ie++)R[ie]=""}}}}return ur($)}catch{return y}}var ps={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ro={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Io;function ys(){}S(ys,cc),ys.prototype.g=function(){return new XMLHttpRequest},Io=new ys;function Pi(u){return encodeURIComponent(String(u))}function mc(u){var y=1;u=u.split(":");const x=[];for(;y>0&&u.length;)x.push(u.shift()),y--;return u.length&&x.push(u.join(":")),x}function Ln(u,y,x,R){this.j=u,this.i=y,this.l=x,this.S=R||1,this.V=new fs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var _t={},Ot={};function ri(u,y,x){u.M=1,u.A=vs(bt(y)),u.u=x,u.R=!0,la(u,null)}function la(u,y){u.F=Date.now(),si(u),u.B=bt(u.A);var x=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),da(x.i,"t",R),u.C=0,x=u.j.L,u.h=new Bn,u.g=Cc(u.j,x?y:null,!u.u),u.P>0&&(u.O=new Jt(v(u.Y,u,u.g),u.P)),y=u.V,x=u.g,R=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ao[0]=B.toString()),B=Ao);for(let $=0;$<B.length;$++){const ie=Oi(x,B[$],R||y.handleEvent,!1,y.h||y);if(!ie)break;y.g[ie.key]=ie}y=u.J?ut(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),ei(),Zh(u.i,u.v,u.B,u.l,u.S,u.u)}Ln.prototype.ba=function(u){u=u.target;const y=this.O;y&&Gn(u)==3?y.j():this.Y(u)},Ln.prototype.Y=function(u){try{if(u==this.g)e:{const be=Gn(this.g),dt=this.g.ya(),Be=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||Lt(this.g)))){this.K||be!=4||dt==7||(dt==8||Be<=0?ei(3):ei(2)),ai(this);var y=this.g.ca();this.X=y;var x=ed(this);if(this.o=y==200,fc(this.i,this.v,this.B,this.l,this.S,be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,B=this.g;if((R=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(R)){var $=R;break t}}$=null}if(u=$)ii(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,oi(this,u);else{this.o=!1,this.m=3,vt(12),dn(this),Sn(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<x.length;)if(rt=pc(this,x),rt==Ot){be==4&&(this.m=4,vt(14),u=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==_t){this.m=4,vt(15),ii(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else ii(this.i,this.l,rt,null),oi(this,rt);if(gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||x.length!=0||this.h.h||(this.m=1,vt(16),u=!1),this.o=this.o&&u,!u)ii(this.i,this.l,x,"[Invalid Chunked Response]"),dn(this),Sn(this);else if(x.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Go(ie),ie.P=!0,vt(11))}}else ii(this.i,this.l,x,null),oi(this,x);be==4&&dn(this),this.o&&!this.K&&(be==4?Ac(this.j,this):(this.o=!1,si(this)))}else Mi(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),dn(this),Sn(this)}}}catch{}finally{}};function ed(u){if(!gc(u))return u.g.la();const y=Lt(u.g);if(y==="")return"";let x="";const R=y.length,B=Gn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return dn(u),Sn(u),"";u.h.i=new h.TextDecoder}for(let $=0;$<R;$++)u.h.h=!0,x+=u.h.i.decode(y[$],{stream:!(B&&$==R-1)});return y.length=0,u.h.g+=x,u.C=0,u.h.g}function gc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function pc(u,y){var x=u.C,R=y.indexOf(`
`,x);return R==-1?Ot:(x=Number(y.substring(x,R)),isNaN(x)?_t:(R+=1,R+x>y.length?Ot:(y=y.slice(R,R+x),u.C=R+x,y)))}Ln.prototype.cancel=function(){this.K=!0,dn(this)};function si(u){u.T=Date.now()+u.H,ca(u,u.H)}function ca(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ni(v(u.aa,u),y)}function ai(u){u.D&&(h.clearTimeout(u.D),u.D=null)}Ln.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(gs(this.i,this.B),this.M!=2&&(ei(),vt(17)),dn(this),this.m=2,Sn(this)):ca(this,this.T-u)};function Sn(u){u.j.I==0||u.K||Ac(u.j,u)}function dn(u){ai(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,wo(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function oi(u,y){try{var x=u.j;if(x.I!=0&&(x.g==u||ci(x.h,u))){if(!u.L&&ci(x.h,u)&&x.I==3){try{var R=x.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var B=R;if(B[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)ya(x),vr(x);else break e;As(x),vt(18)}}else x.xa=B[1],0<x.xa-x.K&&B[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=ni(v(x.Va,x),6e3));li(x.h)<=1&&x.ta&&(x.ta=void 0)}else gi(x,11)}else if((u.L||x.g==u)&&ya(x),!j(y))for(B=x.Ba.g.parse(y),y=0;y<B.length;y++){let Be=B[y];const rt=Be[0];if(!(rt<=x.K))if(x.K=rt,Be=Be[1],x.I==2)if(Be[0]=="c"){x.M=Be[1],x.ba=Be[2];const wn=Be[3];wn!=null&&(x.ka=wn,x.j.info("VER="+x.ka));const pi=Be[4];pi!=null&&(x.za=pi,x.j.info("SVER="+x.za));const Hn=Be[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(R=1.5*Hn,x.O=R,x.j.info("backChannelRequestTimeoutMs_="+R)),R=x;const $n=u.g;if($n){const ws=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ws){var $=R.h;$.g||ws.indexOf("spdy")==-1&&ws.indexOf("quic")==-1&&ws.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(jo($,$.h),$.h=null))}if(R.G){const va=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;va&&(R.wa=va,Ge(R.J,R.G,va))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),R=x;var ie=u;if(R.na=Ic(R,R.L?R.ba:null,R.W),ie.L){No(R.h,ie);var be=ie,dt=R.O;dt&&(be.H=dt),be.D&&(ai(be),si(be)),R.g=ie}else Sc(R);x.i.length>0&&mi(x)}else Be[0]!="stop"&&Be[0]!="close"||gi(x,7);else x.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?gi(x,7):Fo(x):Be[0]!="noop"&&x.l&&x.l.qa(Be),x.A=0)}}ei(4)}catch{}}var xt=class{constructor(u,y){this.g=u,this.map=y}};function Co(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Do(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function li(u){return u.h?1:u.g?u.g.size:0}function ci(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function jo(u,y){u.g?u.g.add(y):u.h=y}function No(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Co.prototype.cancel=function(){if(this.i=Oo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Oo(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const x of u.g.values())y=y.concat(x.G);return y}return w(u.i)}var yc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ua(u,y){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const R=u[x].indexOf("=");let B,$=null;R>=0?(B=u[x].substring(0,R),$=u[x].substring(R+1)):B=u[x],y(B,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function fn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof fn?(this.l=u.l,Pt(this,u.j),this.o=u.o,this.g=u.g,hr(this,u.u),this.h=u.h,Po(this,bc(u.i)),this.m=u.m):u&&(y=String(u).match(yc))?(this.l=!1,Pt(this,y[1]||"",!0),this.o=ui(y[2]||""),this.g=ui(y[3]||"",!0),hr(this,y[4]),this.h=ui(y[5]||"",!0),Po(this,y[6]||"",!0),this.m=ui(y[7]||"")):(this.l=!1,this.i=new fr(null,this.l))}fn.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(_s(y,ha,!0),":");var x=this.g;return(x||y=="file")&&(u.push("//"),(y=this.o)&&u.push(_s(y,ha,!0),"@"),u.push(Pi(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(_s(x,x.charAt(0)=="/"?ko:vc,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",_s(x,_c)),u.join("")},fn.prototype.resolve=function(u){const y=bt(this);let x=!!u.j;x?Pt(y,u.j):x=!!u.o,x?y.o=u.o:x=!!u.g,x?y.g=u.g:x=u.u!=null;var R=u.h;if(x)hr(y,u.u);else if(x=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var B=y.h.lastIndexOf("/");B!=-1&&(R=y.h.slice(0,B+1)+R)}if(B=R,B==".."||B==".")R="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){R=B.lastIndexOf("/",0)==0,B=B.split("/");const $=[];for(let ie=0;ie<B.length;){const be=B[ie++];be=="."?R&&ie==B.length&&$.push(""):be==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),R&&ie==B.length&&$.push("")):($.push(be),R=!0)}R=$.join("/")}else R=B}return x?y.h=R:x=u.i.toString()!=="",x?Po(y,bc(u.i)):x=!!u.m,x&&(y.m=u.m),y};function bt(u){return new fn(u)}function Pt(u,y,x){u.j=x?ui(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function hr(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function Po(u,y,x){y instanceof fr?(u.i=y,fa(u.i,u.l)):(x||(y=_s(y,dr)),u.i=new fr(y,u.l))}function Ge(u,y,x){u.i.set(y,x)}function vs(u){return Ge(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ui(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _s(u,y,x){return typeof u=="string"?(u=encodeURI(u).replace(y,nn),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ha=/[#\/\?@]/g,vc=/[#\?:]/g,ko=/[#\?]/g,dr=/[#\?@]/g,_c=/#/g;function fr(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function rn(u){u.g||(u.g=new Map,u.h=0,u.i&&ua(u.i,function(y,x){u.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}s=fr.prototype,s.add=function(u,y){rn(this),this.i=null,u=mr(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(y),this.h+=1,this};function xc(u,y){rn(u),y=mr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Mo(u,y){return rn(u),y=mr(u,y),u.g.has(y)}s.forEach=function(u,y){rn(this),this.g.forEach(function(x,R){x.forEach(function(B){u.call(y,B,R,this)},this)},this)};function zo(u,y){rn(u);let x=[];if(typeof y=="string")Mo(u,y)&&(x=x.concat(u.g.get(mr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)x=x.concat(u[y]);return x}s.set=function(u,y){return rn(this),this.i=null,u=mr(this,u),Mo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},s.get=function(u,y){return u?(u=zo(this,u),u.length>0?String(u[0]):y):y};function da(u,y,x){xc(u,y),x.length>0&&(u.i=null,u.g.set(mr(u,y),w(x)),u.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var x=y[R];const B=Pi(x);x=zo(this,x);for(let $=0;$<x.length;$++){let ie=B;x[$]!==""&&(ie+="="+Pi(x[$])),u.push(ie)}}return this.i=u.join("&")};function bc(u){const y=new fr;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function mr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function fa(u,y){y&&!u.j&&(rn(u),u.i=null,u.g.forEach(function(x,R){const B=R.toLowerCase();R!=B&&(xc(this,R),da(this,B,x))},u)),u.j=y}function Fn(u,y){const x=new Vn;if(h.Image){const R=new Image;R.onload=T(En,x,"TestLoadImage: loaded",!0,y,R),R.onerror=T(En,x,"TestLoadImage: error",!1,y,R),R.onabort=T(En,x,"TestLoadImage: abort",!1,y,R),R.ontimeout=T(En,x,"TestLoadImage: timeout",!1,y,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else y(!1)}function Vo(u,y){const x=new Vn,R=new AbortController,B=setTimeout(()=>{R.abort(),En(x,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:R.signal}).then($=>{clearTimeout(B),$.ok?En(x,"TestPingServer: ok",!0,y):En(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),En(x,"TestPingServer: error",!1,y)})}function En(u,y,x,R,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),R(x)}catch{}}function gr(){this.g=new lc}function hi(u){this.i=u.Sb||null,this.h=u.ab||!1}S(hi,cc),hi.prototype.g=function(){return new xs(this.i,this.h)};function xs(u,y){yt.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(xs,yt),s=xs.prototype,s.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,Un(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ma(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ma(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?pr(this):Un(this),this.readyState==3&&ma(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,pr(this))},s.Na=function(u){this.g&&(this.response=u,pr(this))},s.ga=function(){this.g&&pr(this)};function pr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Un(u)}s.setRequestHeader=function(u,y){this.A.append(u,y)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=y.next();return u.join(`\r
`)};function Un(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function An(u){let y="";return ke(u,function(x,R){y+=R,y+=":",y+=x,y+=`\r
`}),y}function bs(u,y,x){e:{for(R in x){var R=!1;break e}R=!0}R||(x=An(x),typeof u=="string"?x!=null&&Pi(x):Ge(u,y,x))}function We(u){yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(We,yt);var di=/^https?$/i,Lo=["POST","PUT"];s=We.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,y,x,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Io.g(),this.g.onreadystatechange=b(v(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch($){Ts(this,$);return}if(u=x||"",x=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var B in R)x.set(B,R[B]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const $ of R.keys())x.set($,R.get($));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(x.keys()).find($=>$.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Lo,y,void 0)>=0)||R||B||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ie]of x)this.g.setRequestHeader($,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){Ts(this,$)}};function Ts(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,Bo(u),ki(u)}function Bo(u){u.A||(u.A=!0,Ct(u,"complete"),Ct(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ct(this,"complete"),Ct(this,"abort"),ki(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),We.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ss(this):this.Xa())},s.Xa=function(){Ss(this)};function Ss(u){if(u.h&&typeof c<"u"){if(u.v&&Gn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ct(u,"readystatechange"),Gn(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var R;if(R=$===0){let ie=String(u.D).match(yc)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),R=!di.test(ie?ie.toLowerCase():"")}x=R}if(x)Ct(u,"complete"),Ct(u,"success");else{u.o=6;try{var B=Gn(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Bo(u)}}finally{ki(u)}}}}function ki(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,y||Ct(u,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Gn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Gn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Yh(y)}};function Lt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Mi(u){const y={};u=(u.g&&Gn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(j(u[R]))continue;var x=mc(u[R]);const B=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const $=y[B]||[];y[B]=$,$.push(x)}ze(y,function(R){return R.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(u,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||y}function yr(u){this.za=0,this.i=[],this.j=new Vn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fi("baseRetryDelayMs",5e3,u),this.Za=fi("retryDelaySeedMs",1e4,u),this.Ta=fi("forwardChannelMaxRetries",2,u),this.va=fi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Co(u&&u.concurrentRequestLimit),this.Ba=new gr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=yr.prototype,s.ka=8,s.I=1,s.connect=function(u,y,x,R){vt(0),this.W=u,this.H=y||{},x&&R!==void 0&&(this.H.OSID=x,this.H.OAID=R),this.F=this.X,this.J=Ic(this,null,this.W),mi(this)};function Fo(u){if(ga(u),u.I==3){var y=u.V++,x=bt(u.J);if(Ge(x,"SID",u.M),Ge(x,"RID",y),Ge(x,"TYPE","terminate"),Es(u,x),y=new Ln(u,u.j,y),y.M=2,y.A=vs(bt(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&h.Image&&(new Image().src=y.A,x=!0),x||(y.g=Cc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),si(y)}Rc(u)}function vr(u){u.g&&(Go(u),u.g.cancel(),u.g=null)}function ga(u){vr(u),u.v&&(h.clearTimeout(u.v),u.v=null),ya(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function mi(u){if(!Do(u.h)&&!u.m){u.m=!0;var y=u.Ea;re||E(),ye||(re(),ye=!0),P.add(y,u),u.D=0}}function pa(u,y){return li(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ni(v(u.Ea,u,y),wc(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new Ln(this,this.j,u);let $=this.o;if(this.U&&($?($=ut($),Re($,this.U)):$=this.U),this.u!==null||this.R||(B.J=$,$=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var R=this.i[x];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Tc(this,B,y),x=bt(this.J),Ge(x,"RID",u),Ge(x,"CVER",22),this.G&&Ge(x,"X-HTTP-Session-Id",this.G),Es(this,x),$&&(this.R?y="headers="+Pi(An($))+"&"+y:this.u&&bs(x,this.u,$)),jo(this.h,B),this.Ra&&Ge(x,"TYPE","init"),this.S?(Ge(x,"$req",y),Ge(x,"SID","null"),B.U=!0,ri(B,x,null)):ri(B,x,y),this.I=2}}else this.I==3&&(u?Uo(this,u):this.i.length==0||Do(this.h)||Uo(this))};function Uo(u,y){var x;y?x=y.l:x=u.V++;const R=bt(u.J);Ge(R,"SID",u.M),Ge(R,"RID",x),Ge(R,"AID",u.K),Es(u,R),u.u&&u.o&&bs(R,u.u,u.o),x=new Ln(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),y&&(u.i=y.G.concat(u.i)),y=Tc(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),jo(u.h,x),ri(x,R,y)}function Es(u,y){u.H&&ke(u.H,function(x,R){Ge(y,R,x)}),u.l&&ke({},function(x,R){Ge(y,R,x)})}function Tc(u,y,x){x=Math.min(u.i.length,x);const R=u.l?v(u.l.Ka,u.l,u):null;e:{var B=u.i;let be=-1;for(;;){const dt=["count="+x];be==-1?x>0?(be=B[0].g,dt.push("ofs="+be)):be=0:dt.push("ofs="+be);let Be=!0;for(let rt=0;rt<x;rt++){var $=B[rt].g;const wn=B[rt].map;if($-=be,$<0)be=Math.max(0,B[rt].g-100),Be=!1;else try{$="req"+$+"_"||"";try{var ie=wn instanceof Map?wn:Object.entries(wn);for(const[pi,Hn]of ie){let $n=Hn;g(Hn)&&($n=ur(Hn)),dt.push($+pi+"="+encodeURIComponent($n))}}catch(pi){throw dt.push($+"type="+encodeURIComponent("_badmap")),pi}}catch{R&&R(wn)}}if(Be){ie=dt.join("&");break e}}ie=void 0}return u=u.i.splice(0,x),y.G=u,ie}function Sc(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;re||E(),ye||(re(),ye=!0),P.add(y,u),u.A=0}}function As(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ni(v(u.Da,u),wc(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ni(v(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),vr(this),Ec(this))};function Go(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Ec(u){u.g=new Ln(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=bt(u.na);Ge(y,"RID","rpc"),Ge(y,"SID",u.M),Ge(y,"AID",u.K),Ge(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ge(y,"TO",u.ia),Ge(y,"TYPE","xmlhttp"),Es(u,y),u.u&&u.o&&bs(y,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=vs(bt(y)),x.u=null,x.R=!0,la(x,u)}s.Va=function(){this.C!=null&&(this.C=null,vr(this),As(this),vt(19))};function ya(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ac(u,y){var x=null;if(u.g==y){ya(u),Go(u),u.g=null;var R=2}else if(ci(u.h,y))x=y.G,No(u.h,y),R=1;else return;if(u.I!=0){if(y.o)if(R==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var B=u.D;R=oa(),Ct(R,new ti(R,x)),mi(u)}else Sc(u);else if(B=y.m,B==3||B==0&&y.X>0||!(R==1&&pa(u,y)||R==2&&As(u)))switch(x&&x.length>0&&(y=u.h,y.i=y.i.concat(x)),B){case 1:gi(u,5);break;case 4:gi(u,10);break;case 3:gi(u,6);break;default:gi(u,2)}}}function wc(u,y){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*y}function gi(u,y){if(u.j.info("Error code "+y),y==2){var x=v(u.bb,u),R=u.Ua;const B=!R;R=new fn(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Pt(R,"https"),vs(R),B?Fn(R.toString(),x):Vo(R.toString(),x)}else vt(2);u.I=0,u.l&&u.l.pa(y),Rc(u),ga(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Rc(u){if(u.I=0,u.ja=[],u.l){const y=Oo(u.h);(y.length!=0||u.i.length!=0)&&(z(u.ja,y),z(u.ja,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.oa()}}function Ic(u,y,x){var R=x instanceof fn?bt(x):new fn(x);if(R.g!="")y&&(R.g=y+"."+R.g),hr(R,R.u);else{var B=h.location;R=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const $=new fn(null);R&&Pt($,R),y&&($.g=y),B&&hr($,B),x&&($.h=x),R=$}return x=u.G,y=u.wa,x&&y&&Ge(R,x,y),Ge(R,"VER",u.ka),Es(u,R),R}function Cc(u,y,x){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new We(new hi({ab:x})):new We(u.ma),y.Fa(u.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dc(){}s=Dc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function _r(){}_r.prototype.g=function(u,y){return new en(u,y)};function en(u,y){yt.call(this),this.g=new yr(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!j(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!j(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new zi(this)}S(en,yt),en.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Fo(this.g)},en.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=ur(u),u=x);y.i.push(new xt(y.Ya++,u)),y.I==3&&mi(y)},en.prototype.N=function(){this.g.l=null,delete this.j,Fo(this.g),delete this.g,en.Z.N.call(this)};function jc(u){Vt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const x in y){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}S(jc,Vt);function Nc(){Tn.call(this),this.status=1}S(Nc,Tn);function zi(u){this.g=u}S(zi,Dc),zi.prototype.ra=function(){Ct(this.g,"a")},zi.prototype.qa=function(u){Ct(this.g,new jc(u))},zi.prototype.pa=function(u){Ct(this.g,new Nc)},zi.prototype.oa=function(){Ct(this.g,"b")},_r.prototype.createWebChannel=_r.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,b_=function(){return new _r},x_=function(){return oa()},__=ht,bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ps.NO_ERROR=0,ps.TIMEOUT=8,ps.HTTP_ERROR=6,Ku=ps,Ro.COMPLETE="complete",v_=Ro,uc.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",yt.prototype.listen=yt.prototype.J,Dl=uc,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,y_=We}).apply(typeof Lu<"u"?Lu:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",kv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new Xm("@firebase/firestore");function Ka(){return Zs.logLevel}function oe(s,...e){if(Zs.logLevel<=De.DEBUG){const n=e.map(Zm);Zs.debug(`Firestore (${go}): ${s}`,...n)}}function rr(s,...e){if(Zs.logLevel<=De.ERROR){const n=e.map(Zm);Zs.error(`Firestore (${go}): ${s}`,...n)}}function so(s,...e){if(Zs.logLevel<=De.WARN){const n=e.map(Zm);Zs.warn(`Firestore (${go}): ${s}`,...n)}}function Zm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,T_(s,r,n)}function T_(s,e,n){let r=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw rr(r),new Error(r)}function Ue(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||T_(e,o,r)}function xe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Iw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class Cw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Dw{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let c=new es;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new es,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new es)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new S_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class jw{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Nw{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Mv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ow{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const r=c=>{c.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Mv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Pw(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ne(s,e){return s<e?-1:s>e?1:0}function Tm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),c=e.charAt(r);if(o!==c)return om(o)===om(c)?Ne(o,c):om(o)?1:-1}return Ne(s.length,e.length)}const kw=55296,Mw=57343;function om(s){const e=s.charCodeAt(0);return e>=kw&&e<=Mw}function ao(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="__name__";class bi{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=bi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ne(e.length,n.length)}static compareSegments(e,n){const r=bi.isNumericId(e),o=bi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?bi.extractNumericId(e).compare(bi.extractNumericId(n)):Tm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class Je extends bi{construct(e,n,r){return new Je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new Je(n)}static emptyPath(){return new Je([])}}const zw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends bi{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return zw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zv}static keyField(){return new $t([zv])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ae(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(r+=g,o++):(c(),o++)}if(c(),h)throw new ae(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Je.fromString(e))}static fromName(e){return new me(Je.fromString(e).popFirst(5))}static empty(){return new me(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(s,e,n){if(!n)throw new ae(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Vw(s,e,n,r){if(e===!0&&r===!0)throw new ae(J.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Vv(s){if(!me.isDocumentKey(s))throw new ae(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Lv(s){if(me.isDocumentKey(s))throw new ae(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function A_(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function jh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":pe(12329,{type:typeof s})}function Si(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ae(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jh(s);throw new ae(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(s,e){const n={typeString:s};return e&&(n.value=e),n}function Zl(s,e){if(!A_(s))throw new ae(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const h=s[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new ae(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=-62135596800,Fv=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Fv);return new nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Bv)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fv}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zl(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Bv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:It("string",nt._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new nt(0,0))}static max(){return new _e(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=-1;function Lw(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=_e.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new is(o,me.empty(),e)}function Bw(s){return new is(s.readTime,s.key,Fl)}class is{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new is(_e.min(),me.empty(),Fl)}static max(){return new is(_e.max(),me.empty(),Fl)}}function Fw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(s.documentKey,e.documentKey),n!==0?n:Ne(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==Uw)throw s;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):te.reject(n)}static resolve(e){return new te(((n,r)=>{n(e)}))}static reject(e){return new te(((n,r)=>{r(e)}))}static waitFor(e){return new te(((n,r)=>{let o=0,c=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++c,h&&c===o&&n()}),(p=>r(p)))})),h=!0,c===o&&n()}))}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next((o=>o?te.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new te(((r,o)=>{const c=e.length,h=new Array(c);let g=0;for(let p=0;p<c;p++){const v=p;n(e[v]).next((T=>{h[v]=T,++g,g===c&&r(h)}),(T=>o(T)))}}))}static doWhile(e,n){return new te(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function Hw(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function Oh(s){return s==null}function dh(s){return s===0&&1/s==-1/0}function $w(s){return typeof s=="number"&&Number.isInteger(s)&&!dh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="";function qw(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Uv(e)),e=Ww(s.get(n),e);return Uv(e)}function Ww(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case w_:n+="";break;default:n+=c}}return n}function Uv(s){return s+w_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function cs(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function R_(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bu(this.root,e,this.comparator,!0)}}class Bu{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=o??Ht.EMPTY,this.right=c??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Ht(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hv(this.data.getIterator())}getIteratorFrom(e){return new Hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class Hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Nt($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new I_("Invalid base64 string: "+c):c}})(e);return new qt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const Kw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(s){if(Ue(!!s,39018),typeof s=="string"){let e=0;const n=Kw.exec(s);if(Ue(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(s.seconds),nanos:gt(s.nanos)}}function gt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ss(s){return typeof s=="string"?qt.fromBase64String(s):qt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="server_timestamp",D_="__type__",j_="__previous_value__",N_="__local_write_time__";function tg(s){return(s?.mapValue?.fields||{})[D_]?.stringValue===C_}function Ph(s){const e=s.mapValue.fields[j_];return tg(e)?Ph(e):e}function Ul(s){const e=rs(s.mapValue.fields[N_].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,r,o,c,h,g,p,v,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=T}}const fh="(default)";class Gl{constructor(e,n){this.projectId=e,this.database=n||fh}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="__type__",Qw="__max__",Fu={mapValue:{}},P_="__vector__",mh="value";function as(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?tg(s)?4:Zw(s)?9007199254740991:Yw(s)?10:11:pe(28295,{value:s})}function ji(s,e){if(s===e)return!0;const n=as(s);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ul(s).isEqual(Ul(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=rs(o.timestampValue),g=rs(c.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return ss(o.bytesValue).isEqual(ss(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return gt(o.geoPointValue.latitude)===gt(c.geoPointValue.latitude)&&gt(o.geoPointValue.longitude)===gt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return gt(o.integerValue)===gt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=gt(o.doubleValue),g=gt(c.doubleValue);return h===g?dh(h)===dh(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return ao(s.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},g=c.mapValue.fields||{};if(Gv(h)!==Gv(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!ji(h[p],g[p])))return!1;return!0})(s,e);default:return pe(52216,{left:s})}}function Hl(s,e){return(s.values||[]).find((n=>ji(n,e)))!==void 0}function oo(s,e){if(s===e)return 0;const n=as(s),r=as(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(s.booleanValue,e.booleanValue);case 2:return(function(c,h){const g=gt(c.integerValue||c.doubleValue),p=gt(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,e);case 3:return $v(s.timestampValue,e.timestampValue);case 4:return $v(Ul(s),Ul(e));case 5:return Tm(s.stringValue,e.stringValue);case 6:return(function(c,h){const g=ss(c),p=ss(h);return g.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(c,h){const g=c.split("/"),p=h.split("/");for(let v=0;v<g.length&&v<p.length;v++){const T=Ne(g[v],p[v]);if(T!==0)return T}return Ne(g.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,h){const g=Ne(gt(c.latitude),gt(h.latitude));return g!==0?g:Ne(gt(c.longitude),gt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return qv(s.arrayValue,e.arrayValue);case 10:return(function(c,h){const g=c.fields||{},p=h.fields||{},v=g[mh]?.arrayValue,T=p[mh]?.arrayValue,S=Ne(v?.values?.length||0,T?.values?.length||0);return S!==0?S:qv(v,T)})(s.mapValue,e.mapValue);case 11:return(function(c,h){if(c===Fu.mapValue&&h===Fu.mapValue)return 0;if(c===Fu.mapValue)return 1;if(h===Fu.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),v=h.fields||{},T=Object.keys(v);p.sort(),T.sort();for(let S=0;S<p.length&&S<T.length;++S){const b=Tm(p[S],T[S]);if(b!==0)return b;const w=oo(g[p[S]],v[T[S]]);if(w!==0)return w}return Ne(p.length,T.length)})(s.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function $v(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ne(s,e);const n=rs(s),r=rs(e),o=Ne(n.seconds,r.seconds);return o!==0?o:Ne(n.nanos,r.nanos)}function qv(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=oo(n[o],r[o]);if(c)return c}return Ne(n.length,r.length)}function lo(s){return Sm(s)}function Sm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ss(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return me.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Sm(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${Sm(n.fields[h])}`;return o+"}"})(s.mapValue):pe(61005,{value:s})}function Xu(s){switch(as(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ph(s);return e?16+Xu(e):16;case 5:return 2*s.stringValue.length;case 6:return ss(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Xu(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return cs(r.fields,((c,h)=>{o+=c.length+Xu(h)})),o})(s.mapValue);default:throw pe(13486,{value:s})}}function Wv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Em(s){return!!s&&"integerValue"in s}function ng(s){return!!s&&"arrayValue"in s}function Kv(s){return!!s&&"nullValue"in s}function Xv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Qu(s){return!!s&&"mapValue"in s}function Yw(s){return(s?.mapValue?.fields||{})[O_]?.stringValue===P_}function kl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return cs(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=kl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(s.arrayValue.values[n]);return e}return{...s}}function Zw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Qw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=$t.emptyPath(),r={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,r,o),r={},o=[],n=g.popLast()}h?r[g.lastSegment()]=kl(h):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){cs(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new hn(kl(this.value))}}function k_(s){const e=[];return cs(s.fields,((n,r)=>{const o=new $t([n]);if(Qu(r)){const c=k_(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,o,c,h,g){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Qt(e,0,_e.min(),_e.min(),_e.min(),hn.empty(),0)}static newFoundDocument(e,n,r,o){return new Qt(e,1,n,_e.min(),r,o,0)}static newNoDocument(e,n){return new Qt(e,2,n,_e.min(),_e.min(),hn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,_e.min(),_e.min(),hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.position=e,this.inclusive=n}}function Qv(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?r=me.comparator(me.fromName(h.referenceValue),n.key):r=oo(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ji(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function Jw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{}class Rt extends M_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new t2(e,n,r):n==="array-contains"?new r2(e,r):n==="in"?new s2(e,r):n==="not-in"?new a2(e,r):n==="array-contains-any"?new o2(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new n2(e,r):new i2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(oo(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends M_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zn(e,n)}matches(e){return z_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function z_(s){return s.op==="and"}function V_(s){return e2(s)&&z_(s)}function e2(s){for(const e of s.filters)if(e instanceof Zn)return!1;return!0}function Am(s){if(s instanceof Rt)return s.field.canonicalString()+s.op.toString()+lo(s.value);if(V_(s))return s.filters.map((e=>Am(e))).join(",");{const e=s.filters.map((n=>Am(n))).join(",");return`${s.op}(${e})`}}function L_(s,e){return s instanceof Rt?(function(r,o){return o instanceof Rt&&r.op===o.op&&r.field.isEqual(o.field)&&ji(r.value,o.value)})(s,e):s instanceof Zn?(function(r,o){return o instanceof Zn&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,h,g)=>c&&L_(h,o.filters[g])),!0):!1})(s,e):void pe(19439)}function B_(s){return s instanceof Rt?(function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`})(s):s instanceof Zn?(function(n){return n.op.toString()+" {"+n.getFilters().map(B_).join(" ,")+"}"})(s):"Filter"}class t2 extends Rt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class n2 extends Rt{constructor(e,n){super(e,"in",n),this.keys=F_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class i2 extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=F_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function F_(s,e){return(e.arrayValue?.values||[]).map((n=>me.fromName(n.referenceValue)))}class r2 extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ng(n)&&Hl(n.arrayValue,this.value)}}class s2 extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hl(this.value.arrayValue,n)}}class a2 extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hl(this.value.arrayValue,n)}}class o2 extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Hl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n=null,r=[],o=[],c=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=g,this.Te=null}}function Zv(s,e=null,n=[],r=[],o=null,c=null,h=null){return new l2(s,e,n,r,o,c,h)}function ig(s){const e=xe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Am(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>lo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>lo(r))).join(",")),e.Te=n}return e.Te}function rg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Jw(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!L_(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Yv(s.startAt,e.startAt)&&Yv(s.endAt,e.endAt)}function wm(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n=null,r=[],o=[],c=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function c2(s,e,n,r,o,c,h,g){return new vo(s,e,n,r,o,c,h,g)}function sg(s){return new vo(s)}function Jv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function U_(s){return s.collectionGroup!==null}function Ml(s){const e=xe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Nt($t.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((v=>{v.isInequality()&&(g=g.add(v.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new $l(c,r))})),n.has($t.keyField().canonicalString())||e.Ie.push(new $l($t.keyField(),r))}return e.Ie}function Ei(s){const e=xe(s);return e.Ee||(e.Ee=u2(e,Ml(s))),e.Ee}function u2(s,e){if(s.limitType==="F")return Zv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new $l(o.field,c)}));const n=s.endAt?new gh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new gh(s.startAt.position,s.startAt.inclusive):null;return Zv(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Rm(s,e){const n=s.filters.concat([e]);return new vo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Im(s,e,n){return new vo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function kh(s,e){return rg(Ei(s),Ei(e))&&s.limitType===e.limitType}function G_(s){return`${ig(Ei(s))}|lt:${s.limitType}`}function Xa(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>B_(o))).join(", ")}]`),Oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>lo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>lo(o))).join(",")),`Target(${r})`})(Ei(s))}; limitType=${s.limitType})`}function Mh(s,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,o){for(const c of Ml(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(h,g,p){const v=Qv(h,g,p);return h.inclusive?v<=0:v<0})(r.startAt,Ml(r),o)||r.endAt&&!(function(h,g,p){const v=Qv(h,g,p);return h.inclusive?v>=0:v>0})(r.endAt,Ml(r),o))})(s,e)}function h2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function H_(s){return(e,n)=>{let r=!1;for(const o of Ml(s)){const c=d2(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function d2(s,e,n){const r=s.field.isKeyField()?me.comparator(e.key,n.key):(function(c,h,g){const p=h.data.field(c),v=g.data.field(c);return p!==null&&v!==null?oo(p,v):pe(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return R_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new at(me.comparator);function sr(){return f2}const $_=new at(me.comparator);function jl(...s){let e=$_;for(const n of s)e=e.insert(n.key,n);return e}function q_(s){let e=$_;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function qs(){return zl()}function W_(){return zl()}function zl(){return new na((s=>s.toString()),((s,e)=>s.isEqual(e)))}const m2=new at(me.comparator),g2=new Nt(me.comparator);function Oe(...s){let e=g2;for(const n of s)e=e.add(n);return e}const p2=new Nt(Ne);function y2(){return p2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function K_(s){return{integerValue:""+s}}function v2(s,e){return $w(e)?K_(e):ag(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this._=void 0}}function _2(s,e,n){return s instanceof ph?(function(o,c){const h={fields:{[D_]:{stringValue:C_},[N_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&tg(c)&&(c=Ph(c)),c&&(h.fields[j_]=c),{mapValue:h}})(n,e):s instanceof ql?Q_(s,e):s instanceof Wl?Y_(s,e):(function(o,c){const h=X_(o,c),g=e1(h)+e1(o.Ae);return Em(h)&&Em(o.Ae)?K_(g):ag(o.serializer,g)})(s,e)}function x2(s,e,n){return s instanceof ql?Q_(s,e):s instanceof Wl?Y_(s,e):n}function X_(s,e){return s instanceof yh?(function(r){return Em(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class ph extends zh{}class ql extends zh{constructor(e){super(),this.elements=e}}function Q_(s,e){const n=Z_(e);for(const r of s.elements)n.some((o=>ji(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Wl extends zh{constructor(e){super(),this.elements=e}}function Y_(s,e){let n=Z_(e);for(const r of s.elements)n=n.filter((o=>!ji(o,r)));return{arrayValue:{values:n}}}class yh extends zh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function e1(s){return gt(s.integerValue||s.doubleValue)}function Z_(s){return ng(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function b2(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof ql&&o instanceof ql||r instanceof Wl&&o instanceof Wl?ao(r.elements,o.elements,ji):r instanceof yh&&o instanceof yh?ji(r.Ae,o.Ae):r instanceof ph&&o instanceof ph})(s.transform,e.transform)}class T2{constructor(e,n){this.version=e,this.transformResults=n}}class Ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Vh{}function J_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new tx(s.key,Ai.none()):new Jl(s.key,s.data,Ai.none());{const n=s.data,r=hn.empty();let o=new Nt($t.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new us(s.key,r,new bn(o.toArray()),Ai.none())}}function S2(s,e,n){s instanceof Jl?(function(o,c,h){const g=o.value.clone(),p=n1(o.fieldTransforms,c,h.transformResults);g.setAll(p),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof us?(function(o,c,h){if(!Yu(o.precondition,c))return void c.convertToUnknownDocument(h.version);const g=n1(o.fieldTransforms,c,h.transformResults),p=c.data;p.setAll(ex(o)),p.setAll(g),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Vl(s,e,n,r){return s instanceof Jl?(function(c,h,g,p){if(!Yu(c.precondition,h))return g;const v=c.value.clone(),T=i1(c.fieldTransforms,p,h);return v.setAll(T),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(s,e,n,r):s instanceof us?(function(c,h,g,p){if(!Yu(c.precondition,h))return g;const v=i1(c.fieldTransforms,p,h),T=h.data;return T.setAll(ex(c)),T.setAll(v),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(c,h,g){return Yu(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function E2(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),c=X_(r.transform,o||null);c!=null&&(n===null&&(n=hn.empty()),n.set(r.field,c))}return n||null}function t1(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ao(r,o,((c,h)=>b2(c,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Jl extends Vh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class us extends Vh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ex(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function n1(s,e,n){const r=new Map;Ue(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],h=c.transform,g=e.data.field(c.field);r.set(c.field,x2(h,g,n[o]))}return r}function i1(s,e,n){const r=new Map;for(const o of s){const c=o.transform,h=n.data.field(o.field);r.set(o.field,_2(c,h,e))}return r}class tx extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A2 extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&S2(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=W_();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let g=this.applyToLocalView(h,c.mutatedFields);g=n.has(o.key)?null:g;const p=J_(h,g);p!==null&&r.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(_e.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,((n,r)=>t1(n,r)))&&ao(this.baseMutations,e.baseMutations,((n,r)=>t1(n,r)))}}class og{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return m2})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new og(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Me;function C2(s){switch(s){case J.OK:return pe(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return pe(15467,{code:s})}}function nx(s){if(s===void 0)return rr("GRPC error has no .code"),J.UNKNOWN;switch(s){case wt.OK:return J.OK;case wt.CANCELLED:return J.CANCELLED;case wt.UNKNOWN:return J.UNKNOWN;case wt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case wt.INTERNAL:return J.INTERNAL;case wt.UNAVAILABLE:return J.UNAVAILABLE;case wt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case wt.NOT_FOUND:return J.NOT_FOUND;case wt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case wt.ABORTED:return J.ABORTED;case wt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case wt.DATA_LOSS:return J.DATA_LOSS;default:return pe(39323,{code:s})}}(Me=wt||(wt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new Jr([4294967295,4294967295],0);function r1(s){const e=D2().encode(s),n=new p_;return n.update(e),new Uint8Array(n.digest())}function s1(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Jr([n,r],0),new Jr([o,c],0)]}class lg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nl(`Invalid padding: ${n}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Jr.fromNumber(r)));return o.compare(j2)===1&&(o=new Jr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=r1(e),[r,o]=s1(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);if(!this.we(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new lg(c,o,n);return r.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=r1(e),[r,o]=s1(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lh(_e.min(),o,new at(Ne),sr(),Oe())}}class ec{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ec(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class ix{constructor(e,n){this.targetId=e,this.Ce=n}}class rx{constructor(e,n,r=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class a1{constructor(){this.ve=0,this.Fe=o1(),this.Me=qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),r=Oe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:pe(38017,{changeType:c})}})),new ec(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=o1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class N2{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=Uu(),this.He=Uu(),this.Ye=new at(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(wm(c))if(r===0){const h=new me(c.path);this.et(n,h,Qt.newNoDocument(h,_e.min()))}else Ue(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(n);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,g;try{h=ss(r).toUint8Array()}catch(p){if(p instanceof I_)return so("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new lg(h,o,c)}catch(p){return so(p instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const g=this.ot(h);if(g){if(c.current&&wm(g.target)){const p=new me(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Qt.newNoDocument(p,e))}c.Be&&(n.set(h,c.ke()),c.qe())}}));let r=Oe();this.He.forEach(((c,h)=>{let g=!0;h.forEachWhile((p=>{const v=this.ot(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new Lh(e,n,this.Ye,this.je,r);return this.je=sr(),this.Je=Uu(),this.He=Uu(),this.Ye=new at(Ne),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new a1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nt(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nt(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new a1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Uu(){return new at(me.comparator)}function o1(){return new at(me.comparator)}const O2={asc:"ASCENDING",desc:"DESCENDING"},P2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k2={and:"AND",or:"OR"};class M2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(s,e){return s.useProto3Json||Oh(e)?e:{value:e}}function vh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sx(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function z2(s,e){return vh(s,e.toTimestamp())}function wi(s){return Ue(!!s,49232),_e.fromTimestamp((function(n){const r=rs(n);return new nt(r.seconds,r.nanos)})(s))}function cg(s,e){return Dm(s,e).canonicalString()}function Dm(s,e){const n=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function ax(s){const e=Je.fromString(s);return Ue(hx(e),10190,{key:e.toString()}),e}function jm(s,e){return cg(s.databaseId,e.path)}function lm(s,e){const n=ax(e);if(n.get(1)!==s.databaseId.projectId)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new me(lx(n))}function ox(s,e){return cg(s.databaseId,e)}function V2(s){const e=ax(s);return e.length===4?Je.emptyPath():lx(e)}function Nm(s){return new Je(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function lx(s){return Ue(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function l1(s,e,n){return{name:jm(s,e),fields:n.value.mapValue.fields}}function L2(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:pe(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(v,T){return v.useProto3Json?(Ue(T===void 0||typeof T=="string",58123),qt.fromBase64String(T||"")):(Ue(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),qt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(v){const T=v.code===void 0?J.UNKNOWN:nx(v.code);return new ae(T,v.message||"")})(h);n=new rx(r,o,c,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=lm(s,r.document.name),c=wi(r.document.updateTime),h=r.document.createTime?wi(r.document.createTime):_e.min(),g=new hn({mapValue:{fields:r.document.fields}}),p=Qt.newFoundDocument(o,c,h,g),v=r.targetIds||[],T=r.removedTargetIds||[];n=new Zu(v,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=lm(s,r.document),c=r.readTime?wi(r.readTime):_e.min(),h=Qt.newNoDocument(o,c),g=r.removedTargetIds||[];n=new Zu([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=lm(s,r.document),c=r.removedTargetIds||[];n=new Zu([],c,o,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new I2(o,c),g=r.targetId;n=new ix(g,h)}}return n}function B2(s,e){let n;if(e instanceof Jl)n={update:l1(s,e.key,e.value)};else if(e instanceof tx)n={delete:jm(s,e.key)};else if(e instanceof us)n={update:l1(s,e.key,e.data),updateMask:X2(e.fieldMask)};else{if(!(e instanceof A2))return pe(16599,{Vt:e.type});n={verify:jm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const g=h.transform;if(g instanceof ph)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ql)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Wl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof yh)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw pe(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:z2(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pe(27497)})(s,e.precondition)),n}function F2(s,e){return s&&s.length>0?(Ue(e!==void 0,14353),s.map((n=>(function(o,c){let h=o.updateTime?wi(o.updateTime):wi(c);return h.isEqual(_e.min())&&(h=wi(c)),new T2(h,o.transformResults||[])})(n,e)))):[]}function U2(s,e){return{documents:[ox(s,e.path)]}}function G2(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ox(s,o);const c=(function(v){if(v.length!==0)return ux(Zn.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(v){if(v.length!==0)return v.map((T=>(function(b){return{field:Qa(b.field),direction:q2(b.dir)}})(T)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=Cm(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:o}}function H2(s){let e=V2(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ue(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(S){const b=cx(S);return b instanceof Zn&&V_(b)?b.getFilters():[b]})(n.where));let h=[];n.orderBy&&(h=(function(S){return S.map((b=>(function(z){return new $l(Ya(z.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(b)))})(n.orderBy));let g=null;n.limit&&(g=(function(S){let b;return b=typeof S=="object"?S.value:S,Oh(b)?null:b})(n.limit));let p=null;n.startAt&&(p=(function(S){const b=!!S.before,w=S.values||[];return new gh(w,b)})(n.startAt));let v=null;return n.endAt&&(v=(function(S){const b=!S.before,w=S.values||[];return new gh(w,b)})(n.endAt)),c2(e,o,h,c,g,"F",p,v)}function $2(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cx(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ya(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ya(n.unaryFilter.field);return Rt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ya(n.unaryFilter.field);return Rt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ya(n.unaryFilter.field);return Rt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Rt.create(Ya(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Zn.create(n.compositeFilter.filters.map((r=>cx(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(n.compositeFilter.op))})(s):pe(30097,{filter:s})}function q2(s){return O2[s]}function W2(s){return P2[s]}function K2(s){return k2[s]}function Qa(s){return{fieldPath:s.canonicalString()}}function Ya(s){return $t.fromServerFormat(s.fieldPath)}function ux(s){return s instanceof Rt?(function(n){if(n.op==="=="){if(Xv(n.value))return{unaryFilter:{field:Qa(n.field),op:"IS_NAN"}};if(Kv(n.value))return{unaryFilter:{field:Qa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xv(n.value))return{unaryFilter:{field:Qa(n.field),op:"IS_NOT_NAN"}};if(Kv(n.value))return{unaryFilter:{field:Qa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(n.field),op:W2(n.op),value:n.value}}})(s):s instanceof Zn?(function(n){const r=n.getFilters().map((o=>ux(o)));return r.length===1?r[0]:{compositeFilter:{op:K2(n.op),filters:r}}})(s):pe(54877,{filter:s})}function X2(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function hx(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r,o,c=_e.min(),h=_e.min(),g=qt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.yt=e}}function Y2(s){const e=H2({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Im(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.Cn=new J2}addToCollectionParentIndex(e,n){return this.Cn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(is.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class J2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Nt(Je.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Nt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dx=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(dx,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new co(0)}static cr(){return new co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="LruGarbageCollector",e5=1048576;function h1([s,e],[n,r]){const o=Ne(s,n);return o===0?Ne(e,r):o}class t5{constructor(e){this.Ir=e,this.buffer=new Nt(h1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();h1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class n5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(u1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yo(n)?oe(u1,"Ignoring IndexedDB error during garbage collection: ",n):await po(n)}await this.Vr(3e5)}))}}class i5{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Nh.ce);const r=new t5(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(c1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c1):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,h,g,p,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,g=Date.now(),this.removeTargets(e,r,n)))).next((S=>(c=S,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(v=Date.now(),Ka()<=De.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${S} documents in `+(v-p)+`ms
Total Duration: ${v-T}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S}))))}}function r5(s,e){return new i5(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.changes=new na((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Vl(r.mutation,o,bn.empty(),nt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Oe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Oe()){const o=qs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let h=jl();return c.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=qs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Oe())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,r,o){let c=sr();const h=zl(),g=(function(){return zl()})();return n.forEach(((p,v)=>{const T=r.get(v.key);o.has(v.key)&&(T===void 0||T.mutation instanceof us)?c=c.insert(v.key,v):T!==void 0?(h.set(v.key,T.mutation.getFieldMask()),Vl(T.mutation,v,T.mutation.getFieldMask(),nt.now())):h.set(v.key,bn.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((v,T)=>h.set(v,T))),n.forEach(((v,T)=>g.set(v,new a5(T,h.get(v)??null)))),g)))}recalculateAndSaveOverlays(e,n){const r=zl();let o=new at(((h,g)=>h-g)),c=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((p=>{const v=n.get(p);if(v===null)return;let T=r.get(p)||bn.empty();T=g.applyToLocalView(v,T),r.set(p,T);const S=(o.get(g.batchId)||Oe()).add(p);o=o.insert(g.batchId,S)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),v=p.key,T=p.value,S=W_();T.forEach((b=>{if(!c.has(b)){const w=J_(n.get(b),r.get(b));w!==null&&S.set(b,w),c=c.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,S))}return te.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(h){return me.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):U_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):te.resolve(qs());let g=Fl,p=c;return h.next((v=>te.forEach(v,((T,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),c.get(T)?te.resolve():this.remoteDocumentCache.getEntry(e,T).next((b=>{p=p.insert(T,b)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,p,v,Oe()))).next((T=>({batchId:g,changes:q_(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((r=>{let o=jl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=jl();return this.indexManager.getCollectionParents(e,c).next((g=>te.forEach(g,(p=>{const v=(function(S,b){return new vo(b,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next((T=>{T.forEach(((S,b)=>{h=h.insert(S,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((h=>{c.forEach(((p,v)=>{const T=v.getKey();h.get(T)===null&&(h=h.insert(T,Qt.newInvalidDocument(T)))}));let g=jl();return h.forEach(((p,v)=>{const T=c.get(p);T!==void 0&&Vl(T.mutation,v,bn.empty(),nt.now()),Mh(n,v)&&(g=g.insert(p,v))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return te.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:wi(o.createTime)}})(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:Y2(o.bundledQuery),readTime:wi(o.readTime)}})(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.overlays=new at(me.comparator),this.qr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qs();return te.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),te.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const o=qs(),c=n.length+1,h=new me(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,v=p.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&p.largestBatchId>r&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new at(((v,T)=>v-T));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>r){let T=c.get(v.largestBatchId);T===null&&(T=qs(),c=c.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const g=qs(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((v,T)=>g.set(v,T))),!(g.size()>=o)););return te.resolve(g)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new R2(n,r));let c=this.qr.get(n);c===void 0&&(c=Oe(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Qr=new Nt(Mt.$r),this.Ur=new Nt(Mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Mt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Mt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new me(new Je([])),r=new Mt(n,e),o=new Mt(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new Je([])),r=new Mt(n,e),o=new Mt(n,e+1);let c=Oe();return this.Ur.forEachInRange([r,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new Mt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(Mt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new w2(c,n,r,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new Mt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return te.resolve(h)}lookupMutationBatch(e,n){return te.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?eg:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mt(n,0),o=new Mt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(h=>{const g=this.Xr(h.Yr);c.push(g)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Ne);return n.forEach((o=>{const c=new Mt(o,0),h=new Mt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(g=>{r=r.add(g.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;me.isDocumentKey(c)||(c=c.child(""));const h=new Mt(new me(c),0);let g=new Nt(Ne);return this.Zr.forEachWhile((p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(g=g.add(p.Yr)),!0)}),h),te.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(n.mutations,(o=>{const c=new Mt(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Mt(n,0),o=this.Zr.firstAfterOrEqual(r);return te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e){this.ri=e,this.docs=(function(){return new at(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Qt.newInvalidDocument(o))})),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=sr();const h=n.path,g=new me(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:v,value:{document:T}}=p.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||Fw(Bw(T),r)<=0||(o.has(T.key)||Mh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(e,n,r,o){pe(9500)}ii(e,n){return te.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new f5(this)}getSize(e){return te.resolve(this.size)}}class f5 extends s5{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),te.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e){this.persistence=e,this.si=new na((n=>ig(n)),rg),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new ug,this.targetCount=0,this.ai=co.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),te.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new co(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.Pr(n),te.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),te.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nh(0),this.li=!1,this.li=!0,this.hi=new u5,this.referenceDelegate=e(this),this.Pi=new m5(this),this.indexManager=new Z2,this.remoteDocumentCache=(function(o){return new d5(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Q2(n),this.Ii=new l5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new c5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new h5(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const o=new g5(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class g5 extends Gw{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Ri=new ug,this.Vi=null}static mi(e){return new hg(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const o=me.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,_e.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return te.or([()=>te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _h{constructor(e,n){this.persistence=e,this.pi=new na((r=>qw(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=r5(this,n)}static mi(e,n){return new _h(e,n)}Ei(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return te.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?te.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(r++,c.removeEntry(h,_e.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xu(e.data.value)),n}br(e,n,r){return te.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return te.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Oe(),o=Oe();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new dg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uA()?8:Hw(Yt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new p5;return this.Ss(e,n,h).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(Ka()<=De.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Ka()<=De.DEBUG&&oe("QueryEngine","Query:",Xa(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Ka()<=De.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(n))):te.resolve())}ys(e,n){if(Jv(n))return te.resolve(null);let r=Ei(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Im(n,null,"F"),r=Ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=Oe(...c);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,r).next((p=>{const v=this.Ds(n,g);return this.Cs(n,v,h,p.readTime)?this.ys(e,Im(n,null,"F")):this.vs(e,v,n,p)}))))})))))}ws(e,n,r,o){return Jv(n)||o.isEqual(_e.min())?te.resolve(null):this.ps.getDocuments(e,r).next((c=>{const h=this.Ds(n,c);return this.Cs(n,h,r,o)?te.resolve(null):(Ka()<=De.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xa(n)),this.vs(e,h,n,Lw(o,Fl)).next((g=>g)))}))}Ds(e,n){let r=new Nt(H_(e));return n.forEach(((o,c)=>{Mh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return Ka()<=De.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Xa(n)),this.ps.getDocumentsMatchingQuery(e,n,is.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LocalStore",v5=3e8;class _5{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new at(Ne),this.xs=new na((c=>ig(c)),rg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function x5(s,e,n,r){return new _5(s,e,n,r)}async function mx(s,e){const n=xe(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],g=[];let p=Oe();for(const v of o){h.push(v.batchId);for(const T of v.mutations)p=p.add(T.key)}for(const v of c){g.push(v.batchId);for(const T of v.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(r,p).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:g})))}))}))}function b5(s,e){const n=xe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,v,T){const S=v.batch,b=S.keys();let w=te.resolve();return b.forEach((z=>{w=w.next((()=>T.getEntry(p,z))).next((V=>{const F=v.docVersions.get(z);Ue(F!==null,48541),V.version.compareTo(F)<0&&(S.applyToRemoteDocument(V,v),V.isValidDocument()&&(V.setReadTime(v.commitVersion),T.addEntry(V)))}))})),w.next((()=>g.mutationQueue.removeMutationBatch(p,S)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let p=Oe();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(p=p.add(g.batch.mutations[v].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function gx(s){const e=xe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function T5(s,e){const n=xe(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((T,S)=>{const b=o.get(S);if(!b)return;g.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,S))));let w=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?w=w.withResumeToken(qt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):T.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(T.resumeToken,r)),o=o.insert(S,w),(function(V,F,Y){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=v5?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(b,w,T)&&g.push(n.Pi.updateTargetData(c,w))}));let p=sr(),v=Oe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),g.push(S5(c,h,e.documentUpdates).next((T=>{p=T.ks,v=T.qs}))),!r.isEqual(_e.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((S=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));g.push(T)}return te.waitFor(g).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,v))).next((()=>p))})).then((c=>(n.Ms=o,c)))}function S5(s,e,n){let r=Oe(),o=Oe();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let h=sr();return n.forEach(((g,p)=>{const v=c.get(g);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(_e.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):oe(fg,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function E5(s,e){const n=xe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=eg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function A5(s,e){const n=xe(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,te.resolve(o)):n.Pi.allocateTargetId(r).next((h=>(o=new Qr(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Om(s,e,n){const r=xe(s),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!yo(h))throw h;oe(fg,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function d1(s,e,n){const r=xe(s);let o=_e.min(),c=Oe();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,v,T){const S=xe(p),b=S.xs.get(T);return b!==void 0?te.resolve(S.Ms.get(b)):S.Pi.getTargetData(v,T)})(r,h,Ei(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,g.targetId).next((p=>{c=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,n?o:_e.min(),n?c:Oe()))).next((g=>(w5(r,h2(e),g),{documents:g,Qs:c})))))}function w5(s,e,n){let r=s.Os.get(e)||_e.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class f1{constructor(){this.activeTargetIds=y2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R5{constructor(){this.Mo=new f1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new f1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="ConnectivityMonitor";class g1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(m1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(m1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu=null;function Pm(){return Gu===null?Gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gu++,"0x"+Gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="RestConnection",C5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===fh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const h=Pm(),g=this.zo(e,n.toUriEncodedString());oe(cm,`Sending RPC '${e}' ${h}:`,g,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:v}=new URL(g),T=ta(v);return this.Jo(e,g,p,r,T).then((S=>(oe(cm,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw so(cm,`RPC '${e}' ${h} failed with error: `,S,"url: ",g,"request:",r),S}))}Ho(e,n,r,o,c,h){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=C5[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class N5 extends D5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const h=Pm();return new Promise(((g,p)=>{const v=new y_;v.setWithCredentials(!0),v.listenOnce(v_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Ku.NO_ERROR:const S=v.getResponseJson();oe(Kt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),g(S);break;case Ku.TIMEOUT:oe(Kt,`RPC '${e}' ${h} timed out`),p(new ae(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ku.HTTP_ERROR:const b=v.getStatus();if(oe(Kt,`RPC '${e}' ${h} failed with status:`,b,"response text:",v.getResponseText()),b>0){let w=v.getResponseJson();Array.isArray(w)&&(w=w[0]);const z=w?.error;if(z&&z.status&&z.message){const V=(function(Y){const q=Y.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(q)>=0?q:J.UNKNOWN})(z.status);p(new ae(V,z.message))}else p(new ae(J.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new ae(J.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{oe(Kt,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(o);oe(Kt,`RPC '${e}' ${h} sending request:`,o),v.send(n,"POST",T,r,15)}))}T_(e,n,r){const o=Pm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=b_(),g=x_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const T=c.join("");oe(Kt,`Creating RPC '${e}' stream ${o}: ${T}`,p);const S=h.createWebChannel(T,p);this.I_(S);let b=!1,w=!1;const z=new j5({Yo:F=>{w?oe(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(b||(oe(Kt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),b=!0),oe(Kt,`RPC '${e}' stream ${o} sending:`,F),S.send(F))},Zo:()=>S.close()}),V=(F,Y,q)=>{F.listen(Y,(ee=>{try{q(ee)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return V(S,Dl.EventType.OPEN,(()=>{w||(oe(Kt,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),V(S,Dl.EventType.CLOSE,(()=>{w||(w=!0,oe(Kt,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(S))})),V(S,Dl.EventType.ERROR,(F=>{w||(w=!0,so(Kt,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),z.a_(new ae(J.UNAVAILABLE,"The operation could not be completed")))})),V(S,Dl.EventType.MESSAGE,(F=>{if(!w){const Y=F.data[0];Ue(!!Y,16349);const q=Y,ee=q?.error||q[0]?.error;if(ee){oe(Kt,`RPC '${e}' stream ${o} received error:`,ee);const ne=ee.status;let re=(function(E){const D=wt[E];if(D!==void 0)return nx(D)})(ne),ye=ee.message;re===void 0&&(re=J.INTERNAL,ye="Unknown error status: "+ne+" with message "+ee.message),w=!0,z.a_(new ae(re,ye)),S.close()}else oe(Kt,`RPC '${e}' stream ${o} received:`,Y),z.u_(Y)}})),V(g,__.STAT_EVENT,(F=>{F.stat===bm.PROXY?oe(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===bm.NOPROXY&&oe(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(s){return new M2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="PersistentStream";class yx{constructor(e,n,r,o,c,h,g,p){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new px(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ae(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(p1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(oe(p1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class O5 extends yx{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=L2(this.serializer,e),r=(function(c){if(!("targetChange"in c))return _e.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?_e.min():h.readTime?wi(h.readTime):_e.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Nm(this.serializer),n.addTarget=(function(c,h){let g;const p=h.target;if(g=wm(p)?{documents:U2(c,p)}:{query:G2(c,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=sx(c,h.resumeToken);const v=Cm(c,h.expectedCount);v!==null&&(g.expectedCount=v)}else if(h.snapshotVersion.compareTo(_e.min())>0){g.readTime=vh(c,h.snapshotVersion.toTimestamp());const v=Cm(c,h.expectedCount);v!==null&&(g.expectedCount=v)}return g})(this.serializer,e);const r=$2(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.q_(n)}}class P5 extends yx{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=F2(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Nm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>B2(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{}class M5 extends k5{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Dm(n,r),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(J.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,Dm(n,r),o,h,g,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(J.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class z5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="RemoteStore";class V5{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{ia(this)&&(oe(Js,"Restarting streams for network reachability change."),await(async function(p){const v=xe(p);v.Ea.add(4),await tc(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Fh(v)})(this))}))})),this.Ra=new z5(r,o)}}async function Fh(s){if(ia(s))for(const e of s.da)await e(!0)}async function tc(s){for(const e of s.da)await e(!1)}function vx(s,e){const n=xe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yg(n)?pg(n):_o(n).O_()&&gg(n,e))}function mg(s,e){const n=xe(s),r=_o(n);n.Ia.delete(e),r.O_()&&_x(n,e),n.Ia.size===0&&(r.O_()?r.L_():ia(n)&&n.Ra.set("Unknown"))}function gg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_o(s).Y_(e)}function _x(s,e){s.Va.Ue(e),_o(s).Z_(e)}function pg(s){s.Va=new N2({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),_o(s).start(),s.Ra.ua()}function yg(s){return ia(s)&&!_o(s).x_()&&s.Ia.size>0}function ia(s){return xe(s).Ea.size===0}function xx(s){s.Va=void 0}async function L5(s){s.Ra.set("Online")}async function B5(s){s.Ia.forEach(((e,n)=>{gg(s,e)}))}async function F5(s,e){xx(s),yg(s)?(s.Ra.ha(e),pg(s)):s.Ra.set("Unknown")}async function U5(s,e,n){if(s.Ra.set("Online"),e instanceof rx&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(r){oe(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xh(s,r)}else if(e instanceof Zu?s.Va.Ze(e):e instanceof ix?s.Va.st(e):s.Va.tt(e),!n.isEqual(_e.min()))try{const r=await gx(s.localStore);n.compareTo(r)>=0&&await(function(c,h){const g=c.Va.Tt(h);return g.targetChanges.forEach(((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ia.get(v);T&&c.Ia.set(v,T.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,v)=>{const T=c.Ia.get(p);if(!T)return;c.Ia.set(p,T.withResumeToken(qt.EMPTY_BYTE_STRING,T.snapshotVersion)),_x(c,p);const S=new Qr(T.target,p,v,T.sequenceNumber);gg(c,S)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(r){oe(Js,"Failed to raise snapshot:",r),await xh(s,r)}}async function xh(s,e,n){if(!yo(e))throw e;s.Ea.add(1),await tc(s),s.Ra.set("Offline"),n||(n=()=>gx(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(Js,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Fh(s)}))}function bx(s,e){return e().catch((n=>xh(s,n,e)))}async function Uh(s){const e=xe(s),n=os(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eg;for(;G5(e);)try{const o=await E5(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,H5(e,o)}catch(o){await xh(e,o)}Tx(e)&&Sx(e)}function G5(s){return ia(s)&&s.Ta.length<10}function H5(s,e){s.Ta.push(e);const n=os(s);n.O_()&&n.X_&&n.ea(e.mutations)}function Tx(s){return ia(s)&&!os(s).x_()&&s.Ta.length>0}function Sx(s){os(s).start()}async function $5(s){os(s).ra()}async function q5(s){const e=os(s);for(const n of s.Ta)e.ea(n.mutations)}async function W5(s,e,n){const r=s.Ta.shift(),o=og.from(r,e,n);await bx(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Uh(s)}async function K5(s,e){e&&os(s).X_&&await(async function(r,o){if((function(h){return C2(h)&&h!==J.ABORTED})(o.code)){const c=r.Ta.shift();os(r).B_(),await bx(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Uh(r)}})(s,e),Tx(s)&&Sx(s)}async function y1(s,e){const n=xe(s);n.asyncQueue.verifyOperationInProgress(),oe(Js,"RemoteStore received new credentials");const r=ia(n);n.Ea.add(3),await tc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fh(n)}async function X5(s,e){const n=xe(s);e?(n.Ea.delete(2),await Fh(n)):e||(n.Ea.add(2),await tc(n),n.Ra.set("Unknown"))}function _o(s){return s.ma||(s.ma=(function(n,r,o){const c=xe(n);return c.sa(),new O5(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:L5.bind(null,s),t_:B5.bind(null,s),r_:F5.bind(null,s),H_:U5.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),yg(s)?pg(s):s.Ra.set("Unknown")):(await s.ma.stop(),xx(s))}))),s.ma}function os(s){return s.fa||(s.fa=(function(n,r,o){const c=xe(n);return c.sa(),new P5(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:$5.bind(null,s),r_:K5.bind(null,s),ta:q5.bind(null,s),na:W5.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Uh(s)):(await s.fa.stop(),s.Ta.length>0&&(oe(Js,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,g=new vg(e,n,h,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(s,e){if(rr("AsyncQueue",`${e}: ${s}`),yo(s))return new ae(J.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static emptySet(e){return new eo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=jl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.ga=new at(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class uo{constructor(e,n,r,o,c,h,g,p,v){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new uo(e,n,eo.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Y5{constructor(){this.queries=_1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=xe(n),c=o.queries;o.queries=_1(),c.forEach(((h,g)=>{for(const p of g.Sa)p.onError(r)}))})(this,new ae(J.ABORTED,"Firestore shutting down"))}}function _1(){return new na((s=>G_(s)),kh)}async function Ex(s,e){const n=xe(s);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new Q5,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=_g(h,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&xg(n)}async function Ax(s,e){const n=xe(s),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Z5(s,e){const n=xe(s);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const g of h.Sa)g.Fa(o)&&(r=!0);h.wa=o}}r&&xg(n)}function J5(s,e,n){const r=xe(s),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function xg(s){s.Ca.forEach((e=>{e.next()}))}var km,x1;(x1=km||(km={})).Ma="default",x1.Cache="cache";class wx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.key=e}}class Ix{constructor(e){this.key=e}}class eR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=H_(e),this.tu=new eo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new v1,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,S)=>{const b=o.get(T),w=Mh(this.query,S)?S:null,z=!!b&&this.mutatedKeys.has(b.key),V=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;b&&w?b.data.isEqual(w.data)?z!==V&&(r.track({type:3,doc:w}),F=!0):this.su(b,w)||(r.track({type:2,doc:w}),F=!0,(p&&this.eu(w,p)>0||v&&this.eu(w,v)<0)&&(g=!0)):!b&&w?(r.track({type:0,doc:w}),F=!0):b&&!w&&(r.track({type:1,doc:b}),F=!0,(p||v)&&(g=!0)),F&&(w?(h=h.add(w),c=V?c.add(T):c.delete(T)):(h=h.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:h,iu:r,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((T,S)=>(function(w,z){const V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:F})}};return V(w)-V(z)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,v=p!==this.Za;return this.Za=p,h.length!==0||v?{snapshot:new uo(this.query,e.tu,c,h,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new v1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Ix(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Rx(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bg="SyncEngine";class tR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nR{constructor(e){this.key=e,this.hu=!1}}class iR{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new na((g=>G_(g)),kh),this.Iu=new Map,this.Eu=new Set,this.du=new at(me.comparator),this.Au=new Map,this.Ru=new ug,this.Vu={},this.mu=new Map,this.fu=co.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rR(s,e,n=!0){const r=Px(s);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Cx(r,e,n,!0),o}async function sR(s,e){const n=Px(s);await Cx(n,e,!0,!1)}async function Cx(s,e,n,r){const o=await A5(s.localStore,Ei(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,n);let g;return r&&(g=await aR(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&vx(s.remoteStore,o),g}async function aR(s,e,n,r,o){s.pu=(S,b,w)=>(async function(V,F,Y,q){let ee=F.view.ru(Y);ee.Cs&&(ee=await d1(V.localStore,F.query,!1).then((({documents:P})=>F.view.ru(P,ee))));const ne=q&&q.targetChanges.get(F.targetId),re=q&&q.targetMismatches.get(F.targetId)!=null,ye=F.view.applyChanges(ee,V.isPrimaryClient,ne,re);return T1(V,F.targetId,ye.au),ye.snapshot})(s,S,b,w);const c=await d1(s.localStore,e,!0),h=new eR(e,c.Qs),g=h.ru(c.documents),p=ec.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),v=h.applyChanges(g,s.isPrimaryClient,p);T1(s,n,v.au);const T=new tR(e,n,h);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),v.snapshot}async function oR(s,e,n){const r=xe(s),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((h=>!kh(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Om(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&mg(r.remoteStore,o.targetId),Mm(r,o.targetId)})).catch(po)):(Mm(r,o.targetId),await Om(r.localStore,o.targetId,!0))}async function lR(s,e){const n=xe(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mg(n.remoteStore,r.targetId))}async function cR(s,e,n){const r=pR(s);try{const o=await(function(h,g){const p=xe(h),v=nt.now(),T=g.reduce(((w,z)=>w.add(z.key)),Oe());let S,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let z=sr(),V=Oe();return p.Ns.getEntries(w,T).next((F=>{z=F,z.forEach(((Y,q)=>{q.isValidDocument()||(V=V.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(w,z))).next((F=>{S=F;const Y=[];for(const q of g){const ee=E2(q,S.get(q.key).overlayedDocument);ee!=null&&Y.push(new us(q.key,ee,k_(ee.value.mapValue),Ai.exists(!0)))}return p.mutationQueue.addMutationBatch(w,v,Y,g)})).next((F=>{b=F;const Y=F.applyToLocalDocumentSet(S,V);return p.documentOverlayCache.saveOverlays(w,F.batchId,Y)}))})).then((()=>({batchId:b.batchId,changes:q_(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,g,p){let v=h.Vu[h.currentUser.toKey()];v||(v=new at(Ne)),v=v.insert(g,p),h.Vu[h.currentUser.toKey()]=v})(r,o.batchId,n),await nc(r,o.changes),await Uh(r.remoteStore)}catch(o){const c=_g(o,"Failed to persist write");n.reject(c)}}async function Dx(s,e){const n=xe(s);try{const r=await T5(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ue(h.hu,14607):o.removedDocuments.size>0&&(Ue(h.hu,42227),h.hu=!1))})),await nc(n,r,e)}catch(r){await po(r)}}function b1(s,e,n){const r=xe(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const p=xe(h);p.onlineState=g;let v=!1;p.queries.forEach(((T,S)=>{for(const b of S.Sa)b.va(g)&&(v=!0)})),v&&xg(p)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uR(s,e,n){const r=xe(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let h=new at(me.comparator);h=h.insert(c,Qt.newNoDocument(c,_e.min()));const g=Oe().add(c),p=new Lh(_e.min(),new Map,new at(Ne),h,g);await Dx(r,p),r.du=r.du.remove(c),r.Au.delete(e),Tg(r)}else await Om(r.localStore,e,!1).then((()=>Mm(r,e,n))).catch(po)}async function hR(s,e){const n=xe(s),r=e.batch.batchId;try{const o=await b5(n.localStore,e);Nx(n,r,null),jx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nc(n,o)}catch(o){await po(o)}}async function dR(s,e,n){const r=xe(s);try{const o=await(function(h,g){const p=xe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let T;return p.mutationQueue.lookupMutationBatch(v,g).next((S=>(Ue(S!==null,37113),T=S.keys(),p.mutationQueue.removeMutationBatch(v,S)))).next((()=>p.mutationQueue.performConsistencyCheck(v))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(v,T,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T))).next((()=>p.localDocuments.getDocuments(v,T)))}))})(r.localStore,e);Nx(r,e,n),jx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nc(r,o)}catch(o){await po(o)}}function jx(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function Nx(s,e,n){const r=xe(s);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Mm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||Ox(s,r)}))}function Ox(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(mg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Tg(s))}function T1(s,e,n){for(const r of n)r instanceof Rx?(s.Ru.addReference(r.key,e),fR(s,r)):r instanceof Ix?(oe(bg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||Ox(s,r.key)):pe(19791,{wu:r})}function fR(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(oe(bg,"New document in limbo: "+n),s.Eu.add(r),Tg(s))}function Tg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new me(Je.fromString(e)),r=s.fu.next();s.Au.set(r,new nR(n)),s.du=s.du.insert(n,r),vx(s.remoteStore,new Qr(Ei(sg(n.path)),r,"TargetPurposeLimboResolution",Nh.ce))}}async function nc(s,e,n){const r=xe(s),o=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,p)=>{h.push(r.pu(p,e,n).then((v=>{if((v||n)&&r.isPrimaryClient){const T=v?!v.fromCache:n?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(v){o.push(v);const T=dg.As(p.targetId,v);c.push(T)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(p,v){const T=xe(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>te.forEach(v,(b=>te.forEach(b.Es,(w=>T.persistence.referenceDelegate.addReference(S,b.targetId,w))).next((()=>te.forEach(b.ds,(w=>T.persistence.referenceDelegate.removeReference(S,b.targetId,w)))))))))}catch(S){if(!yo(S))throw S;oe(fg,"Failed to update sequence numbers: "+S)}for(const S of v){const b=S.targetId;if(!S.fromCache){const w=T.Ms.get(b),z=w.snapshotVersion,V=w.withLastLimboFreeSnapshotVersion(z);T.Ms=T.Ms.insert(b,V)}}})(r.localStore,c))}async function mR(s,e){const n=xe(s);if(!n.currentUser.isEqual(e)){oe(bg,"User change. New user:",e.toKey());const r=await mx(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new ae(J.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nc(n,r.Ls)}}function gR(s,e){const n=xe(s),r=n.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let o=Oe();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function Px(s){const e=xe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uR.bind(null,e),e.Pu.H_=Z5.bind(null,e.eventManager),e.Pu.yu=J5.bind(null,e.eventManager),e}function pR(s){const e=xe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dR.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return x5(this.persistence,new y5,e.initialUser,this.serializer)}Cu(e){return new fx(hg.mi,this.serializer)}Du(e){return new R5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class yR extends bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof _h,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new n5(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new fx((r=>_h.mi(r,n)),this.serializer)}}class zm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>b1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mR.bind(null,this.syncEngine),await X5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Y5})()}createDatastore(e){const n=Bh(e.databaseInfo.databaseId),r=(function(c){return new N5(c)})(e.databaseInfo);return(function(c,h,g,p){return new M5(c,h,g,p)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,h,g){return new V5(r,o,c,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>b1(this.syncEngine,n,0)),(function(){return g1.v()?new g1:new I5})())}createSyncEngine(e,n){return(function(o,c,h,g,p,v,T){const S=new iR(o,c,h,g,p,v);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=xe(n);oe(Js,"RemoteStore shutting down."),r.Ea.add(5),await tc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zm.provider={build:()=>new zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class vR{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{oe(ls,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(oe(ls,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_g(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function hm(s,e){s.asyncQueue.verifyOperationInProgress(),oe(ls,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await mx(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function S1(s,e){s.asyncQueue.verifyOperationInProgress();const n=await _R(s);oe(ls,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>y1(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>y1(e.remoteStore,o))),s._onlineComponents=e}async function _R(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(ls,"Using user provided OfflineComponentProvider");try{await hm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),await hm(s,new bh)}}else oe(ls,"Using default OfflineComponentProvider"),await hm(s,new yR(void 0));return s._offlineComponents}async function Mx(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(ls,"Using user provided OnlineComponentProvider"),await S1(s,s._uninitializedComponentsProvider._online)):(oe(ls,"Using default OnlineComponentProvider"),await S1(s,new zm))),s._onlineComponents}function xR(s){return Mx(s).then((e=>e.syncEngine))}async function Vm(s){const e=await Mx(s),n=e.eventManager;return n.onListen=rR.bind(null,e.syncEngine),n.onUnlisten=oR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lR.bind(null,e.syncEngine),n}function bR(s,e,n={}){const r=new es;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,g,p,v){const T=new kx({next:b=>{T.Nu(),h.enqueueAndForget((()=>Ax(c,S))),b.fromCache&&p.source==="server"?v.reject(new ae(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(b)},error:b=>v.reject(b)}),S=new wx(g,T,{includeMetadataChanges:!0,qa:!0});return Ex(c,S)})(await Vm(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="firestore.googleapis.com",A1=!0;class w1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vx,this.ssl=A1}else this.host=e.host,this.ssl=e.ssl??A1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e5)throw new ae(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zx(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Iw;switch(r.type){case"firstParty":return new Nw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=E1.get(n);r&&(oe("ComponentProvider","Removing Datastore"),E1.delete(n),r.terminate())})(this),Promise.resolve()}}function TR(s,e,n,r={}){s=Si(s,Gh);const o=ta(e),c=s._getSettings(),h={...c,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(Wm(`https://${g}`),Km("Firestore",!0)),c.host!==Vx&&c.host!==g&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:o,emulatorOptions:r};if(!Qs(p,h)&&(s._setSettings(p),r.mockUserToken)){let v,T;if(typeof r.mockUserToken=="string")v=r.mockUserToken,T=Xt.MOCK_USER;else{v=tA(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ae(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xt(S)}s._authCredentials=new Cw(new S_(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zl(n,pt._jsonSchema))return new pt(e,r||null,new me(Je.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:It("string",pt._jsonSchemaVersion),referencePath:It("string")};class ts extends hs{constructor(e,n,r){super(e,n,sg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new me(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function Ju(s,e,...n){if(s=zt(s),E_("collection","path",e),s instanceof Gh){const r=Je.fromString(e,...n);return Lv(r),new ts(s,null,r)}{if(!(s instanceof pt||s instanceof ts))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Je.fromString(e,...n));return Lv(r),new ts(s.firestore,null,r)}}function Lm(s,e,...n){if(s=zt(s),arguments.length===1&&(e=Jm.newId()),E_("doc","path",e),s instanceof Gh){const r=Je.fromString(e,...n);return Vv(r),new pt(s,null,new me(r))}{if(!(s instanceof pt||s instanceof ts))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Je.fromString(e,...n));return Vv(r),new pt(s.firestore,s instanceof ts?s.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="AsyncQueue";class I1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new px(this,"async_queue_retry"),this._c=()=>{const r=um();r&&oe(R1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yo(e))throw e;oe(R1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",C1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=vg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&pe(47125,{Pc:C1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function C1(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(s,["next","error","complete"])}class ho extends Gh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new I1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I1(e),this._firestoreClient=void 0,await e}}}function SR(s,e){const n=typeof s=="object"?s:Ym(),r=typeof s=="string"?s:fh,o=Dh(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=l_("firestore");c&&TR(o,...c)}return o}function Sg(s){if(s._terminated)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||ER(s),s._firestoreClient}function ER(s){const e=s._freezeSettings(),n=(function(o,c,h,g){return new Xw(o,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,zx(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new vR(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(qt.fromBase64String(e))}catch(n){throw new ae(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zl(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:It("string",kn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(Zl(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:It("string",Ri._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zl(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ii(e.vectorValues);throw new ae(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:It("string",Ii._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=/^__.*__$/;class wR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jl(e,this.data,n,this.fieldTransforms)}}class Lx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bx(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:s})}}class Ag{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Th(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bx(this.Ac)&&AR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class RR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bh(e)}Cc(e,n,r,o=!1){return new Ag({Ac:e,methodName:n,Dc:r,path:$t.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wg(s){const e=s._freezeSettings(),n=Bh(s._databaseId);return new RR(s._databaseId,!!e.ignoreUndefinedProperties,n)}function IR(s,e,n,r,o,c={}){const h=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);Rg("Data must be an object, but it was:",h,r);const g=Fx(r,h);let p,v;if(c.merge)p=new bn(h.fieldMask),v=h.fieldTransforms;else if(c.mergeFields){const T=[];for(const S of c.mergeFields){const b=Bm(e,S,n);if(!h.contains(b))throw new ae(J.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Gx(T,b)||T.push(b)}p=new bn(T),v=h.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,v=h.fieldTransforms;return new wR(new hn(g),p,v)}class $h extends Eg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $h}}function CR(s,e,n,r){const o=s.Cc(1,e,n);Rg("Data must be an object, but it was:",o,r);const c=[],h=hn.empty();cs(r,((p,v)=>{const T=Ig(e,p,n);v=zt(v);const S=o.yc(T);if(v instanceof $h)c.push(T);else{const b=ic(v,S);b!=null&&(c.push(T),h.set(T,b))}}));const g=new bn(c);return new Lx(h,g,o.fieldTransforms)}function DR(s,e,n,r,o,c){const h=s.Cc(1,e,n),g=[Bm(e,r,n)],p=[o];if(c.length%2!=0)throw new ae(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)g.push(Bm(e,c[b])),p.push(c[b+1]);const v=[],T=hn.empty();for(let b=g.length-1;b>=0;--b)if(!Gx(v,g[b])){const w=g[b];let z=p[b];z=zt(z);const V=h.yc(w);if(z instanceof $h)v.push(w);else{const F=ic(z,V);F!=null&&(v.push(w),T.set(w,F))}}const S=new bn(v);return new Lx(T,S,h.fieldTransforms)}function jR(s,e,n,r=!1){return ic(n,s.Cc(r?4:3,e))}function ic(s,e){if(Ux(s=zt(s)))return Rg("Unsupported field value:",e,s),Fx(s,e);if(s instanceof Eg)return(function(r,o){if(!Bx(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let h=0;for(const g of r){let p=ic(g,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),h++}return{arrayValue:{values:c}}})(s,e)}return(function(r,o){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=nt.fromDate(r);return{timestampValue:vh(o.serializer,c)}}if(r instanceof nt){const c=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vh(o.serializer,c)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kn)return{bytesValue:sx(o.serializer,r._byteString)};if(r instanceof pt){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:cg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ii)return(function(h,g){return{mapValue:{fields:{[O_]:{stringValue:P_},[mh]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw g.Sc("VectorValues must only contain numeric values.");return ag(g.serializer,v)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${jh(r)}`)})(s,e)}function Fx(s,e){const n={};return R_(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(s,((r,o)=>{const c=ic(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function Ux(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof nt||s instanceof Ri||s instanceof kn||s instanceof pt||s instanceof Eg||s instanceof Ii)}function Rg(s,e,n){if(!Ux(n)||!A_(n)){const r=jh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Bm(s,e,n){if((e=zt(e))instanceof Hh)return e._internalPath;if(typeof e=="string")return Ig(s,e);throw Th("Field path arguments must be of type string or ",s,!1,void 0,n)}const NR=new RegExp("[~\\*/\\[\\]]");function Ig(s,e,n){if(e.search(NR)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Hh(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Th(s,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||h)&&(p+=" (found",c&&(p+=` in field ${r}`),h&&(p+=` in document ${o}`),p+=")"),new ae(J.INVALID_ARGUMENT,g+s+p)}function Gx(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OR extends Hx{data(){return super.data()}}function qh(s,e){return typeof e=="string"?Ig(s,e):e instanceof Hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ae(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cg{}class qx extends Cg{}function eh(s,e,...n){let r=[];e instanceof Cg&&r.push(e),r=r.concat(n),(function(c){const h=c.filter((p=>p instanceof Dg)).length,g=c.filter((p=>p instanceof Wh)).length;if(h>1||h>0&&g>0)throw new ae(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Wh extends qx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wh(e,n,r)}_apply(e){const n=this._parse(e);return Wx(e._query,n),new hs(e.firestore,e.converter,Rm(e._query,n))}_parse(e){const n=wg(e.firestore);return(function(c,h,g,p,v,T,S){let b;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ae(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){N1(S,T);const z=[];for(const V of S)z.push(j1(p,c,V));b={arrayValue:{values:z}}}else b=j1(p,c,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||N1(S,T),b=jR(g,h,S,T==="in"||T==="not-in");return Rt.create(v,T,b)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function th(s,e,n){const r=e,o=qh("where",s);return Wh._create(o,r,n)}class Dg extends Cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let h=o;const g=c.getFlattenedFilters();for(const p of g)Wx(h,p),h=Rm(h,p)})(e._query,n),new hs(e.firestore,e.converter,Rm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jg extends qx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jg(e,n)}_apply(e){const n=(function(o,c,h){if(o.startAt!==null)throw new ae(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $l(c,h)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new vo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function nh(s,e="asc"){const n=e,r=qh("orderBy",s);return jg._create(r,n)}function j1(s,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new ae(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U_(e)&&n.indexOf("/")!==-1)throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Je.fromString(n));if(!me.isDocumentKey(r))throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wv(s,new me(r))}if(n instanceof pt)return Wv(s,n._key);throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jh(n)}.`)}function N1(s,e){if(!Array.isArray(s)||s.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wx(s,e){const n=(function(o,c){for(const h of o)for(const g of h.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ae(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PR{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cs(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[mh].arrayValue?.values?.map((r=>gt(r.doubleValue)));return new Ii(n)}convertGeoPoint(e){return new Ri(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ph(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ul(e));default:return null}}convertTimestamp(e){const n=rs(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Je.fromString(e);Ue(hx(r),9688,{name:e});const o=new Gl(r.get(1),r.get(3)),c=new me(r.popFirst(5));return o.isEqual(n)||rr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Ol{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends Hx{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:It("string",Ws._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class ih extends Ws{data(e={}){return super.data(e)}}class Ks{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ol(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new ih(this._firestore,this._userDataWriter,r.key,r,new Ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const p=new ih(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ol(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new ih(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ol(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,T=-1;return g.type!==0&&(v=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),T=h.indexOf(g.doc.key)),{type:MR(g.type),doc:p,oldIndex:v,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ks._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:s})}}Ks._jsonSchemaVersion="firestore/querySnapshot/1.0",Ks._jsonSchema={type:It("string",Ks._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class Ng extends PR{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function rh(s){s=Si(s,hs);const e=Si(s.firestore,ho),n=Sg(e),r=new Ng(e);return $x(s._query),bR(n,s._query).then((o=>new Ks(e,r,s,o)))}function zR(s,e,n){s=Si(s,pt);const r=Si(s.firestore,ho),o=kR(s.converter,e);return Kx(r,[IR(wg(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Ai.none())])}function VR(s,e,n,...r){s=Si(s,pt);const o=Si(s.firestore,ho),c=wg(o);let h;return h=typeof(e=zt(e))=="string"||e instanceof Hh?DR(c,"updateDoc",s._key,e,n,r):CR(c,"updateDoc",s._key,e),Kx(o,[h.toMutation(s._key,Ai.exists(!0))])}function LR(s,...e){s=zt(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||D1(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(D1(e[r])){const p=e[r];e[r]=p.next?.bind(p),e[r+1]=p.error?.bind(p),e[r+2]=p.complete?.bind(p)}let c,h,g;if(s instanceof pt)h=Si(s.firestore,ho),g=sg(s._key.path),c={next:p=>{e[r]&&e[r](BR(h,s,p))},error:e[r+1],complete:e[r+2]};else{const p=Si(s,hs);h=Si(p.firestore,ho),g=p._query;const v=new Ng(h);c={next:T=>{e[r]&&e[r](new Ks(h,v,p,T))},error:e[r+1],complete:e[r+2]},$x(s._query)}return(function(v,T,S,b){const w=new kx(b),z=new wx(T,w,S);return v.asyncQueue.enqueueAndForget((async()=>Ex(await Vm(v),z))),()=>{w.Nu(),v.asyncQueue.enqueueAndForget((async()=>Ax(await Vm(v),z)))}})(Sg(h),g,o,c)}function Kx(s,e){return(function(r,o){const c=new es;return r.asyncQueue.enqueueAndForget((async()=>cR(await xR(r),o,c))),c.promise})(Sg(s),e)}function BR(s,e,n){const r=n.docs.get(e._key),o=new Ng(s);return new Ws(s,o,e._key,r,new Ol(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){go=o})(mo),Ys(new ns("firestore",((r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),g=new ho(new Dw(r.getProvider("auth-internal")),new Ow(h,r.getProvider("app-check-internal")),(function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ae(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(v.options.projectId,T)})(h,o),h);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Ti(Pv,kv,e),Ti(Pv,kv,"esm2020")})();var FR="firebase",UR="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(FR,UR,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Xn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||r.get().then(c=>this.messaging=c,()=>{}),this.appCheck||o?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="us-central1";class HR{constructor(e,n,r,o,c=Fm,h=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new GR(e,n,r,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(c);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Fm}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function $R(s,e,n){const r=ta(e);s.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Wm(s.emulatorOrigin+"/backends"),Km("Functions",!0))}const O1="@firebase/functions",P1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="auth-internal",WR="app-check-internal",KR="messaging-internal";function XR(s){const e=(n,{instanceIdentifier:r})=>{const o=n.getProvider("app").getImmediate(),c=n.getProvider(qR),h=n.getProvider(KR),g=n.getProvider(WR);return new HR(o,c,h,g,r)};Ys(new ns(Xx,e,"PUBLIC").setMultipleInstances(!0)),Ti(O1,P1,s),Ti(O1,P1,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(s=Ym(),e=Fm){const r=Dh(zt(s),Xx).getImmediate({identifier:e}),o=l_("functions");return o&&YR(r,...o),r}function YR(s,e,n){$R(zt(s),e,n)}XR();function Qx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZR=Qx,Yx=new Ql("auth","Firebase",Qx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Xm("@firebase/auth");function JR(s,...e){Sh.logLevel<=De.WARN&&Sh.warn(`Auth (${mo}): ${s}`,...e)}function sh(s,...e){Sh.logLevel<=De.ERROR&&Sh.error(`Auth (${mo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(s,...e){throw Og(s,...e)}function Ci(s,...e){return Og(s,...e)}function Zx(s,e,n){const r={...ZR(),[e]:n};return new Ql("auth","Firebase",r).create(e,{appName:s.name})}function Xs(s){return Zx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return Yx.create(s,...e)}function ve(s,e,...n){if(!s)throw Og(e,...n)}function er(s){const e="INTERNAL ASSERTION FAILED: "+s;throw sh(e),new Error(e)}function or(s,e){s||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){return typeof self<"u"&&self.location?.href||""}function eI(){return k1()==="http:"||k1()==="https:"}function k1(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eI()||oA()||"connection"in navigator)?navigator.onLine:!0}function nI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=rA()||lA()}get(){return tI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(s,e){or(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sI=new rc(3e4,6e4);function kg(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function xo(s,e,n,r,o={}){return eb(s,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const g=Yl({key:s.config.apiKey,...h}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const v={method:e,headers:p,...c};return aA()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&ta(s.emulatorConfig.host)&&(v.credentials="include"),Jx.fetch()(await tb(s,s.config.apiHost,n,g),v)})}async function eb(s,e,n){s._canInitEmulator=!1;const r={...iI,...e};try{const o=new oI(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw Hu(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const g=c.ok?h.errorMessage:h.error.message,[p,v]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(s,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Hu(s,"email-already-in-use",h);if(p==="USER_DISABLED")throw Hu(s,"user-disabled",h);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Zx(s,T,v);ar(s,T)}}catch(o){if(o instanceof lr)throw o;ar(s,"network-request-failed",{message:String(o)})}}async function aI(s,e,n,r,o={}){const c=await xo(s,e,n,r,o);return"mfaPendingCredential"in c&&ar(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function tb(s,e,n,r){const o=`${e}${n}?${r}`,c=s,h=c.config.emulator?Pg(s.config,o):`${s.config.apiScheme}://${o}`;return rI.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}class oI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ci(this.auth,"network-request-failed")),sI.get())})}}function Hu(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ci(s,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(s,e){return xo(s,"POST","/v1/accounts:delete",e)}async function Eh(s,e){return xo(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cI(s,e=!1){const n=zt(s),r=await n.getIdToken(e),o=Mg(r);ve(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:r,authTime:Ll(dm(o.auth_time)),issuedAtTime:Ll(dm(o.iat)),expirationTime:Ll(dm(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function dm(s){return Number(s)*1e3}function Mg(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return sh("JWT malformed, contained fewer than 3 sections"),null;try{const o=a_(n);return o?JSON.parse(o):(sh("Failed to decode base64 JWT payload"),null)}catch(o){return sh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function M1(s){const e=Mg(s);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lr&&uI(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function uI({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(s){const e=s.auth,n=await s.getIdToken(),r=await Kl(s,Eh(e,{idToken:n}));ve(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?nb(o.providerUserInfo):[],h=fI(s.providerData,c),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!h?.length,v=g?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Gm(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(s,T)}async function dI(s){const e=zt(s);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fI(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function nb(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(s,e){const n=await eb(s,{},async()=>{const r=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await tb(s,o,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:r};return s.emulatorConfig&&ta(s.emulatorConfig.host)&&(p.credentials="include"),Jx.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gI(s,e){return xo(s,"POST","/v2/accounts:revokeToken",kg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=M1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await mI(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new to;return r&&(ve(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(ve(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(ve(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(s,e){ve(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new hI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Gm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Kl(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cI(this,e)}reload(){return dI(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ah(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Xs(this.auth));const e=await this.getIdToken();return await Kl(this,lI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,v=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:b,isAnonymous:w,providerData:z,stsTokenManager:V}=n;ve(S&&V,e,"internal-error");const F=to.fromJSON(this.name,V);ve(typeof S=="string",e,"internal-error"),Ur(r,e.name),Ur(o,e.name),ve(typeof b=="boolean",e,"internal-error"),ve(typeof w=="boolean",e,"internal-error"),Ur(c,e.name),Ur(h,e.name),Ur(g,e.name),Ur(p,e.name),Ur(v,e.name),Ur(T,e.name);const Y=new Qn({uid:S,auth:e,email:o,emailVerified:b,displayName:r,isAnonymous:w,photoURL:h,phoneNumber:c,tenantId:g,stsTokenManager:F,createdAt:v,lastLoginAt:T});return z&&Array.isArray(z)&&(Y.providerData=z.map(q=>({...q}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,n,r=!1){const o=new to;o.updateFromServerResponse(n);const c=new Qn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Ah(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];ve(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?nb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,g=new to;g.updateFromIdToken(r);const p=new Qn({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Gm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map;function tr(s){or(s instanceof Function,"Expected a class definition");let e=z1.get(s);return e?(or(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,z1.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ib.type="NONE";const V1=ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(s,e,n){return`firebase:${s}:${e}:${n}`}class no{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=ah(this.userKey,o.apiKey,c),this.fullPersistenceKey=ah("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Eh(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new no(tr(V1),e,r);const o=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=o[0]||tr(V1);const h=ah(r,e.config.apiKey,e.name);let g=null;for(const v of n)try{const T=await v._get(h);if(T){let S;if(typeof T=="string"){const b=await Eh(e,{idToken:T}).catch(()=>{});if(!b)break;S=await Qn._fromGetAccountInfoResponse(e,b,T)}else S=Qn._fromJSON(e,T);v!==c&&(g=S),c=v;break}}catch{}const p=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new no(c,e,r):(c=p[0],g&&await c._set(h,g.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(h)}catch{}})),new no(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cb(e))return"Blackberry";if(ub(e))return"Webos";if(sb(e))return"Safari";if((e.includes("chrome/")||ab(e))&&!e.includes("edge/"))return"Chrome";if(lb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function rb(s=Yt()){return/firefox\//i.test(s)}function sb(s=Yt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ab(s=Yt()){return/crios\//i.test(s)}function ob(s=Yt()){return/iemobile/i.test(s)}function lb(s=Yt()){return/android/i.test(s)}function cb(s=Yt()){return/blackberry/i.test(s)}function ub(s=Yt()){return/webos/i.test(s)}function zg(s=Yt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function pI(s=Yt()){return zg(s)&&!!window.navigator?.standalone}function yI(){return cA()&&document.documentMode===10}function hb(s=Yt()){return zg(s)||lb(s)||ub(s)||cb(s)||/windows phone/i.test(s)||ob(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(s,e=[]){let n;switch(s){case"Browser":n=L1(Yt());break;case"Worker":n=`${L1(Yt())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,g)=>{try{const p=e(c);h(p)}catch(p){g(p)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(s,e={}){return xo(s,"GET","/v2/passwordPolicy",kg(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=6;class bI{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??xI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B1(this),this.idTokenSubscription=new B1(this),this.beforeStateQueue=new vI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await no.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Eh(this,{idToken:e}),r=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=r?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===h)&&g?.user&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Xs(this));const n=e?zt(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _I(this),n=new bI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ql("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gI(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tr(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await no.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(g,this,"internal-error"),g.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vg(s){return zt(s)}class B1{constructor(e){this.auth=e,this.observer=null,this.addObserver=yA(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SI(s){Lg=s}function EI(s){return Lg.loadJS(s)}function AI(){return Lg.gapiScript}function wI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(s,e){const n=Dh(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Qs(c,e??{}))return o;ar(o,"already-initialized")}return n.initialize({options:e})}function II(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(tr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function CI(s,e,n){const r=Vg(s);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=fb(e),{host:h,port:g}=DI(e),p=g===null?"":`:${g}`,v={url:`${c}//${h}${p}/`},T=Object.freeze({host:h,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Qs(v,r.config.emulator)&&Qs(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,ta(h)?(Wm(`${c}//${h}${p}`),Km("Auth",!0)):jI()}function fb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function DI(s){const e=fb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:F1(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:F1(h)}}}function F1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function jI(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(s,e){return aI(s,"POST","/v1/accounts:signInWithIdp",kg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="http://localhost";class ea extends mb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const h=new ea(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,io(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:NI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends gb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends sc{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends sc{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends sc{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await Qn._fromIdTokenResponse(e,r,o),h=U1(r);return new fo({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=U1(r);return new fo({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function U1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends lr{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new wh(e,n,r,o)}}function pb(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(s,c,e,r):c})}async function OI(s,e,n=!1){const r=await Kl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return fo._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(s,e,n=!1){const{auth:r}=s;if(Xn(r.app))return Promise.reject(Xs(r));const o="reauthenticate";try{const c=await Kl(s,pb(r,o,e,s),n);ve(c.idToken,r,"internal-error");const h=Mg(c.idToken);ve(h,r,"internal-error");const{sub:g}=h;return ve(s.uid===g,r,"user-mismatch"),fo._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ar(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(s,e,n=!1){if(Xn(s.app))return Promise.reject(Xs(s));const r="signIn",o=await pb(s,r,e),c=await fo._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(c.user),c}function MI(s,e,n,r){return zt(s).onIdTokenChanged(e,n,r)}function zI(s,e,n){return zt(s).beforeAuthStateChanged(e,n)}const Rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rh,"1"),this.storage.removeItem(Rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=1e3,LI=10;class vb extends yb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);yI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,LI):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vb.type="LOCAL";const BI=vb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends yb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_b.type="SESSION";const xb=_b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Kh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(h).map(async v=>v(n.origin,c)),p=await FI(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((g,p)=>{const v=Bg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(S){const b=S;if(b.data.eventId===v)switch(b.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(b.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function GI(s){Di().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function HI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $I(){return navigator?.serviceWorker?.controller||null}function qI(){return bb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="firebaseLocalStorageDb",WI=1,Ih="firebaseLocalStorage",Sb="fbase_key";class ac{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xh(s,e){return s.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function KI(){const s=indexedDB.deleteDatabase(Tb);return new ac(s).toPromise()}function Hm(){const s=indexedDB.open(Tb,WI);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Ih,{keyPath:Sb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Ih)?e(r):(r.close(),await KI(),e(await Hm()))})})}async function G1(s,e,n){const r=Xh(s,!0).put({[Sb]:e,value:n});return new ac(r).toPromise()}async function XI(s,e){const n=Xh(s,!1).get(e),r=await new ac(n).toPromise();return r===void 0?null:r.value}function H1(s,e){const n=Xh(s,!0).delete(e);return new ac(n).toPromise()}const QI=800,YI=3;class Eb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kh._getInstance(qI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await HI(),!this.activeServiceWorker)return;this.sender=new UI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$I()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hm();return await G1(e,Rh,"1"),await H1(e,Rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>G1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>H1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Xh(o,!1).getAll();return new ac(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Eb.type="LOCAL";const ZI=Eb;new rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(s,e){return e?tr(e):(ve(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends mb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eC(s){return kI(s.auth,new Fg(s),s.bypassAuthState)}function tC(s){const{auth:e,user:n}=s;return ve(n,e,"internal-error"),PI(n,new Fg(s),s.bypassAuthState)}async function nC(s){const{auth:e,user:n}=s;return ve(n,e,"internal-error"),OI(n,new Fg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eC;case"linkViaPopup":case"linkViaRedirect":return nC;case"reauthViaPopup":case"reauthViaRedirect":return tC;default:ar(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new rc(2e3,1e4);class Ja extends Ab{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Ja.currentPopupAction&&Ja.currentPopupAction.cancel(),Ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=Bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iC.get())};e()}}Ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="pendingRedirect",oh=new Map;class sC extends Ab{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=oh.get(this.auth._key());if(!e){try{const r=await aC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}oh.set(this.auth._key(),e)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aC(s,e){const n=cC(e),r=lC(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function oC(s,e){oh.set(s._key(),e)}function lC(s){return tr(s._redirectPersistence)}function cC(s){return ah(rC,s.config.apiKey,s.name)}async function uC(s,e,n=!1){if(Xn(s.app))return Promise.reject(Xs(s));const r=Vg(s),o=JI(r,e),h=await new sC(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=600*1e3;class dC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!wb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ci(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hC&&this.cachedEventUids.clear(),this.cachedEventUids.has($1(e))}saveEventToCache(e){this.cachedEventUids.add($1(e)),this.lastProcessedEventTime=Date.now()}}function $1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function wb({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function fC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(s,e={}){return xo(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pC=/^https?/;async function yC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await mC(s);for(const n of e)try{if(vC(n))return}catch{}ar(s,"unauthorized-domain")}function vC(s){const e=Um(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!pC.test(n))return!1;if(gC.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new rc(3e4,6e4);function q1(){const s=Di().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function xC(s){return new Promise((e,n)=>{function r(){q1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q1(),n(Ci(s,"network-request-failed"))},timeout:_C.get()})}if(Di().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Di().gapi?.load)r();else{const o=wI("iframefcb");return Di()[o]=()=>{gapi.load?r():n(Ci(s,"network-request-failed"))},EI(`${AI()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw lh=null,e})}let lh=null;function bC(s){return lh=lh||xC(s),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new rc(5e3,15e3),SC="__/auth/iframe",EC="emulator/auth/iframe",AC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RC(s){const e=s.config;ve(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Pg(e,EC):`https://${s.config.authDomain}/${SC}`,r={apiKey:e.apiKey,appName:s.name,v:mo},o=wC.get(s.config.apiHost);o&&(r.eid=o);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Yl(r).slice(1)}`}async function IC(s){const e=await bC(s),n=Di().gapi;return ve(n,s,"internal-error"),e.open({where:document.body,url:RC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AC,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Ci(s,"network-request-failed"),g=Di().setTimeout(()=>{c(h)},TC.get());function p(){Di().clearTimeout(g),o(r)}r.ping(p).then(p,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DC=500,jC=600,NC="_blank",OC="http://localhost";class W1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PC(s,e,n,r=DC,o=jC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const p={...CC,width:r.toString(),height:o.toString(),top:c,left:h},v=Yt().toLowerCase();n&&(g=ab(v)?NC:n),rb(v)&&(e=e||OC,p.scrollbars="yes");const T=Object.entries(p).reduce((b,[w,z])=>`${b}${w}=${z},`,"");if(pI(v)&&g!=="_self")return kC(e||"",g),new W1(null);const S=window.open(e||"",g,T);ve(S,s,"popup-blocked");try{S.focus()}catch{}return new W1(S)}function kC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="__/auth/handler",zC="emulator/auth/handler",VC=encodeURIComponent("fac");async function K1(s,e,n,r,o,c){ve(s.config.authDomain,s,"auth-domain-config-required"),ve(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:mo,eventId:o};if(e instanceof gb){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",pA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))h[T]=S}if(e instanceof sc){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(h.scopes=T.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await s._getAppCheckToken(),v=p?`#${VC}=${encodeURIComponent(p)}`:"";return`${LC(s)}?${Yl(g).slice(1)}${v}`}function LC({config:s}){return s.emulator?Pg(s,zC):`https://${s.authDomain}/${MC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class BC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xb,this._completeRedirectFn=uC,this._overrideRedirectResult=oC}async _openPopup(e,n,r,o){or(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await K1(e,n,r,Um(),o);return PC(e,c,Bg())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await K1(e,n,r,Um(),o);return GI(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(or(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IC(e),r=new dC(e);return n.register("authEvent",o=>(ve(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},o=>{const c=o?.[0]?.[fm];c!==void 0&&n(!!c),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hb()||sb()||zg()}}const FC=BC;var X1="@firebase/auth",Q1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HC(s){Ys(new ns("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=r.options;ve(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:db(s)},v=new TI(r,o,c,p);return II(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new ns("auth-internal",e=>{const n=Vg(e.getProvider("auth").getImmediate());return(r=>new UC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(X1,Q1,GC(s)),Ti(X1,Q1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=300,qC=u_("authIdTokenMaxAge")||$C;let Y1=null;const WC=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qC)return;const o=n?.token;Y1!==o&&(Y1=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function KC(s=Ym()){const e=Dh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=RI(s,{popupRedirectResolver:FC,persistence:[ZI,BI,xb]}),r=u_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=WC(c.toString());zI(n,h,()=>h(n.currentUser)),MI(n,g=>h(g))}}const o=o_("auth");return o&&CI(n,`http://${o}`),n}function XC(){return document.getElementsByTagName("head")?.[0]??document}SI({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const c=Ci("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",XC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HC("Browser");const QC={apiKey:"AIzaSyCebVxfa6FmlE8Kuyey_0P1LMCquacjez0",authDomain:"nhl-savant.firebaseapp.com",projectId:"nhl-savant",storageBucket:"nhl-savant.firebasestorage.app",messagingSenderId:"801983550873",appId:"1:801983550873:web:79681f2fff98afb9f7af08"},Ug=f_(QC),$s=SR(Ug);QR(Ug);KC(Ug);class YC{async saveBet(e,n,r){const o=e.date||new Date().toISOString().split("T")[0],c=`${o}_${e.awayTeam}_${e.homeTeam}_${n.market}_${n.pick.replace(/\s+/g,"_")}`,h={id:c,date:o,timestamp:Date.now(),game:{awayTeam:e.awayTeam,homeTeam:e.homeTeam,gameTime:e.gameTime,actualStartTime:e.startTimestamp||null},bet:{market:n.market,pick:n.pick,line:n.line||null,odds:n.odds,team:n.team||null,side:this.extractSide(n)},prediction:{awayScore:r.awayScore,homeScore:r.homeScore,totalScore:r.totalScore,awayWinProb:r.awayWinProb,homeWinProb:r.homeWinProb,modelProb:n.modelProb,marketProb:this.calculateMarketProb(n.odds),evPercent:n.evPercent,ev:n.ev,kelly:n.kelly,rating:n.rating||this.getRating(n.evPercent),confidence:n.tier||this.getTier(n.evPercent)},goalies:{away:e.goalies?.away||null,home:e.goalies?.home||null},result:{awayScore:null,homeScore:null,totalScore:null,winner:null,outcome:null,profit:null,actualProfit:null,fetched:!1,fetchedAt:null,source:null},status:"PENDING",recommended:!0,tracked:!0,modelVersion:"v2.1-consultant-fix",notes:""};try{return await zR(Lm($s,"bets",c),h),console.log(`✅ Saved bet: ${c}`),c}catch(g){throw console.error("❌ Error saving bet:",g),g}}async updateBetResult(e,n,r){const o=Lm($s,"bets",e),c=this.calculateOutcome(n,r.bet),h=this.calculateProfit(c,r.bet.odds);await VR(o,{"result.awayScore":n.awayScore,"result.homeScore":n.homeScore,"result.totalScore":n.awayScore+n.homeScore,"result.winner":n.awayScore>n.homeScore?"AWAY":"HOME","result.outcome":c,"result.profit":h,"result.fetched":!0,"result.fetchedAt":Date.now(),"result.source":n.source||"API",status:"COMPLETED"}),console.log(`✅ Updated bet result: ${e} → ${c} (${h} units)`)}async getPendingBets(){const e=eh(Ju($s,"bets"),th("status","==","PENDING"),nh("timestamp","desc"));return(await rh(e)).docs.map(r=>({id:r.id,...r.data()}))}async getBetsByDate(e){const n=eh(Ju($s,"bets"),th("date","==",e),nh("timestamp","desc"));return(await rh(n)).docs.map(o=>({id:o.id,...o.data()}))}async getCompletedBets(){const e=eh(Ju($s,"bets"),th("status","==","COMPLETED"),nh("timestamp","desc"));return(await rh(e)).docs.map(r=>({id:r.id,...r.data()}))}calculateOutcome(e,n){switch(n.market){case"TOTAL":return n.side==="OVER"?e.totalScore>n.line?"WIN":e.totalScore<n.line?"LOSS":"PUSH":e.totalScore<n.line?"WIN":e.totalScore>n.line?"LOSS":"PUSH";case"MONEYLINE":return n.side==="HOME"?e.winner==="HOME"?"WIN":"LOSS":e.winner==="AWAY"?"WIN":"LOSS";case"PUCK_LINE":case"PUCKLINE":const r=n.line||1.5;if(n.side==="HOME"){const c=e.homeScore-e.awayScore;return c>r?"WIN":c<r?"LOSS":"PUSH"}else{const c=e.awayScore-e.homeScore;return c>r?"WIN":c<r?"LOSS":"PUSH"}case"TEAM_TOTAL":const o=n.team===n.game?.homeTeam?e.homeScore:e.awayScore;return n.side==="OVER"?o>n.line?"WIN":o<n.line?"LOSS":"PUSH":o<n.line?"WIN":o>n.line?"LOSS":"PUSH";default:return null}}calculateProfit(e,n){return e==="PUSH"?0:e==="LOSS"?-1:n<0?100/Math.abs(n):n/100}extractSide(e){const n=e.pick.toUpperCase();return e.market==="TOTAL"?n.includes("OVER")?"OVER":"UNDER":e.market==="MONEYLINE"||e.market==="PUCK_LINE"||e.market==="PUCKLINE"?n.includes("(HOME)")?"HOME":"AWAY":e.market==="TEAM_TOTAL"?n.includes("OVER")?"OVER":"UNDER":null}calculateMarketProb(e){return e<0?Math.abs(e)/(Math.abs(e)+100):100/(e+100)}getRating(e){return e>=10?"A+":e>=7?"A":e>=5?"B+":e>=3?"B":"C"}getTier(e){return e>=10?"ELITE":e>=7?"EXCELLENT":e>=5?"STRONG":e>=3?"GOOD":"VALUE"}}function ZC(s,e){const n=ce.useRef(new YC),r=ce.useRef(new Set);ce.useEffect(()=>{if(!s||s.length===0)return;const c=s.filter(h=>{const g=o(h);return g&&g.evPercent>0});console.log(`📊 Found ${c.length} betting opportunities to track`),c.forEach(async h=>{const g=o(h),p=`${h.date}_${h.awayTeam}_${h.homeTeam}`;if(!r.current.has(p))try{await n.current.saveBet(h,g,{awayScore:h.edges.total?.awayScore||0,homeScore:h.edges.total?.homeScore||0,totalScore:h.edges.total?.predictedTotal||0,awayWinProb:h.edges.moneyline?.away?.modelProb||.5,homeWinProb:h.edges.moneyline?.home?.modelProb||.5}),r.current.add(p)}catch(v){console.error(`Failed to save bet for ${p}:`,v)}})},[s]);function o(c){let h=null,g=0;return c.edges.moneyline?.away&&c.edges.moneyline.away.evPercent>g&&(g=c.edges.moneyline.away.evPercent,h={...c.edges.moneyline.away,market:"MONEYLINE",pick:`${c.awayTeam} (AWAY)`,team:c.awayTeam}),c.edges.moneyline?.home&&c.edges.moneyline.home.evPercent>g&&(g=c.edges.moneyline.home.evPercent,h={...c.edges.moneyline.home,market:"MONEYLINE",pick:`${c.homeTeam} (HOME)`,team:c.homeTeam}),c.edges.total?.over&&c.edges.total.over.evPercent>g&&(g=c.edges.total.over.evPercent,h={...c.edges.total.over,market:"TOTAL",pick:`OVER ${c.rawOdds.total?.line||c.edges.total.over.line}`,line:c.rawOdds.total?.line||c.edges.total.over.line}),c.edges.total?.under&&c.edges.total.under.evPercent>g&&(g=c.edges.total.under.evPercent,h={...c.edges.total.under,market:"TOTAL",pick:`UNDER ${c.rawOdds.total?.line||c.edges.total.under.line}`,line:c.rawOdds.total?.line||c.edges.total.under.line}),c.edges.puckLine?.away&&c.edges.puckLine.away.evPercent>g&&(g=c.edges.puckLine.away.evPercent,h={...c.edges.puckLine.away,market:"PUCK_LINE",pick:`${c.awayTeam} ${c.edges.puckLine.away.line>0?"+":""}${c.edges.puckLine.away.line}`,team:c.awayTeam}),c.edges.puckLine?.home&&c.edges.puckLine.home.evPercent>g&&(g=c.edges.puckLine.home.evPercent,h={...c.edges.puckLine.home,market:"PUCK_LINE",pick:`${c.homeTeam} ${c.edges.puckLine.home.line>0?"+":""}${c.edges.puckLine.home.line}`,team:c.homeTeam}),Array.isArray(c.edges.teamTotals)&&c.edges.teamTotals.forEach(p=>{p&&p.evPercent>g&&(g=p.evPercent,h={...p,market:"TEAM_TOTAL",pick:p.pick||`${p.team} ${p.side} ${p.line}`})}),h}return n.current}function JC(){const[s,e]=ce.useState([]),[n,r]=ce.useState(!0),[o,c]=ce.useState(null);return ce.useEffect(()=>{console.log("📊 Subscribing to live scores from Firestore...");const h=LR(Lm($s,"live_scores","current"),g=>{if(g.exists()){const p=g.data();e(p.games||[]),c(p.lastUpdate),console.log(`✅ Live scores updated: ${p.gamesCount} games`)}else console.log("No live scores document found"),e([]);r(!1)},g=>{console.error("Error fetching live scores:",g),r(!1)});return()=>{console.log("Unsubscribing from live scores"),h()}},[]),{scores:s,loading:n,lastUpdate:o}}const eD=({game:s,bestEdge:e,factors:n,isMobile:r})=>{if(!e||!n||n.length===0)return null;const c=(()=>{const h=n.slice(0,3),{awayTeam:g,homeTeam:p}=s,v=e.type||e.market,T=e.pick||e.displayPick,S={away:0,home:0};h.forEach(V=>{V.awayMetric&&V.homeMetric&&(V.awayMetric.value>V.homeMetric.value?S.away++:S.home++)});const b=S.away>S.home?g:p,w=b===g?p:g;let z="";if(v==="TOTAL"||v==="total"){const V=T.includes("UNDER")||T.includes("U "),F=s.edges.total?.predictedTotal||0,Y=s.edges.total?.marketTotal||0,q=Math.abs(F-Y);V?(h.filter(ne=>ne.name.includes("Against")||ne.name.includes("Defense")||ne.name.includes("Save")).length>=2?z=`Both teams show strong defensive metrics. ${b} ranks in the top third for preventing high-danger chances, while ${w}'s recent games have trended under. `:z=`Defensive matchup favors a lower-scoring game. ${b}'s ability to limit quality chances combined with ${w}'s offensive struggles create conditions for an UNDER. `,z+=`Our model projects ${F.toFixed(1)} total goals; market has ${Y.toFixed(1)}. Edge: ${q.toFixed(1)} goals.`):(h.filter(ne=>ne.name.includes("For")||ne.name.includes("Offense")||ne.name.includes("Scoring")).length>=2?z=`High-octane offensive matchup. ${b} generates elite scoring chances, and ${w} allows them at an above-average rate. `:z=`Offensive conditions favor a high-scoring game. ${b}'s recent form shows increased scoring, while ${w}'s defense has struggled. `,z+=`Our model projects ${F.toFixed(1)} total goals; market has ${Y.toFixed(1)}. Edge: ${q.toFixed(1)} goals.`)}else{const V=T.includes(g)?g:p,F=V===g?p:g,Y=(V===g?s.edges.moneyline?.away?.modelProb:s.edges.moneyline?.home?.modelProb)||0;if(z=`${V}'s advanced metrics show clear advantages in key areas. `,h.length>0){const q=h[0];z+=`Their ${q.name.toLowerCase()} ranks significantly better than ${F}, `}if(h.length>1){const q=h[1];z+=`and they also excel in ${q.name.toLowerCase()}. `}z+=`Our model gives ${V} a ${(Y*100).toFixed(0)}% chance to win, creating value at current odds.`}return z})();return d.jsxs("div",{style:{padding:r?"1rem":"1.25rem",background:"rgba(212, 175, 55, 0.08)",border:je.flat.border,borderRadius:"10px",margin:r?"0.75rem":"1.25rem"},children:[d.jsx("div",{style:{fontSize:I.label.size,fontWeight:I.heading.weight,color:"var(--color-accent)",marginBottom:"0.625rem",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,display:"flex",alignItems:"center",gap:"0.5rem"},children:"📖 THE QUICK STORY"}),d.jsx("div",{style:{fontSize:I.body.size,lineHeight:"1.6",color:"var(--color-text-primary)",fontWeight:I.caption.weight},children:c})]})},tD=({awayTeam:s,homeTeam:e,gameTime:n,rating:r,awayWinProb:o,homeWinProb:c,isMobile:h})=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:h?ue.cardPadding:"1.25rem",borderBottom:je.flat.border,background:"rgba(26, 31, 46, 0.3)"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:h?"0.5rem":"0.75rem",flexWrap:"wrap",marginBottom:"0.25rem"},children:[d.jsxs("span",{style:{fontSize:h?I.heading.size:"1.25rem",fontWeight:I.heading.weight,color:"var(--color-text-primary)",letterSpacing:I.heading.letterSpacing},children:[s," ",d.jsx("span",{style:{color:"var(--color-text-muted)"},children:"@"})," ",e]}),d.jsxs("span",{style:{fontSize:I.label.size,color:"var(--color-text-muted)",display:"flex",alignItems:"center",gap:"0.375rem",fontWeight:I.label.weight},children:[d.jsx(Za,{size:14}),n]})]}),o&&c&&d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",fontWeight:I.caption.weight,display:"flex",gap:"0.5rem"},children:[d.jsxs("span",{style:{color:o>c?"#10B981":"var(--color-text-muted)"},children:[s,": ",(o*100).toFixed(0),"%"]}),d.jsx("span",{children:"|"}),d.jsxs("span",{style:{color:c>o?"#10B981":"var(--color-text-muted)"},children:[e,": ",(c*100).toFixed(0),"%"]})]})]}),r>0&&d.jsx(NE,{evPercent:r,size:"small"})]}),Rb=s=>s>0?100/(s+100):Math.abs(s)/(Math.abs(s)+100),Gr=s=>s>0?100/(s+100):Math.abs(s)/(Math.abs(s)+100),nD=({modelProb:s,marketProb:e})=>d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsxs("div",{style:{marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[d.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Model"}),d.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#10B981"},children:[(s*100).toFixed(1),"%"]})]}),d.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"4px",overflow:"hidden"},children:d.jsx("div",{style:{width:`${s*100}%`,height:"100%",background:"#10B981",borderRadius:"4px",transition:"width 0.3s ease"}})})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[d.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:"Market"}),d.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--color-text-secondary)"},children:[(e*100).toFixed(1),"%"]})]}),d.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(100, 116, 139, 0.2)",borderRadius:"4px",overflow:"hidden"},children:d.jsx("div",{style:{width:`${e*100}%`,height:"100%",background:"#64748B",borderRadius:"4px",transition:"width 0.3s ease"}})})]})]}),iD=({bestEdge:s,game:e,isMobile:n,factors:r})=>{if(!s)return null;const o=Rb(s.odds),c=e.edges.total?.predictedTotal||0,h=e.edges.total?.marketTotal||0,g=c-h,p=OE(s.evPercent,s.modelProb),T=(()=>{if(!r||r.length===0)return[];const S=[];if(s.market==="TOTAL"){const w=s.pick.includes("OVER");r.forEach(z=>{(w&&z.impact>.05||!w&&z.impact<-.05)&&Math.abs(z.impact)>.05&&S.push(`${z.name}: ${Math.abs(z.impact).toFixed(2)} goal impact`)})}else{const w=s.team;r.forEach(z=>{const V=z.awayMetric?.value||0,F=z.homeMetric?.value||0,Y=V>F?e.awayTeam:e.homeTeam,q=Math.abs(V-F)/((V+F)/2);if(Y===w&&q>.1){const ee=(q*100).toFixed(0);S.push(`${z.name}: ${w} has ${ee}% edge`)}})}return S.slice(0,3)})();return d.jsxs("div",{style:{background:jt.hero,border:je.elevated.border,boxShadow:je.elevated.shadow,borderRadius:"12px",padding:n?ue.cardPadding:"1.5rem",margin:n?ue.sectionGap:"1.25rem",position:"relative",overflow:"hidden"},children:[s.evPercent>10&&d.jsx("div",{className:"shimmer-overlay"}),d.jsxs("div",{style:{fontSize:n?I.heading.size:"1.25rem",fontWeight:I.heading.weight,marginBottom:"1rem",color:"var(--color-text-primary)",position:"relative",zIndex:1,letterSpacing:I.heading.letterSpacing},children:["💰 BEST VALUE: ",s.pick]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:n?"1fr 1fr":"repeat(4, 1fr)",gap:"0.875rem",marginBottom:"1rem",position:"relative",zIndex:1},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:I.label.size,color:"var(--color-text-muted)",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,fontWeight:I.label.weight,marginBottom:"0.25rem"},children:"Our Edge"}),d.jsxs("div",{style:{fontSize:n?"1.125rem":I.hero.size,fontWeight:I.hero.weight,color:"#10B981",fontFeatureSettings:"'tnum'",lineHeight:I.hero.lineHeight},children:[g>0?"+":"",Math.abs(g).toFixed(1)]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)"},children:"goals"})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:I.label.size,color:"var(--color-text-muted)",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,fontWeight:I.label.weight,marginBottom:"0.25rem"},children:"Value"}),d.jsxs("div",{style:{fontSize:n?"1.125rem":I.hero.size,fontWeight:I.hero.weight,color:"#10B981",fontFeatureSettings:"'tnum'",lineHeight:I.hero.lineHeight},children:["+",s.evPercent.toFixed(1),"%"]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)"},children:"EV"})]}),!n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:I.label.size,color:"var(--color-text-muted)",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,fontWeight:I.label.weight,marginBottom:"0.25rem"},children:"Confidence"}),d.jsx("div",{style:{fontSize:I.subheading.size,fontWeight:I.subheading.weight,color:p.color,lineHeight:I.hero.lineHeight},children:p.level}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)"},children:"level"})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:I.label.size,color:"var(--color-text-muted)",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing,fontWeight:I.label.weight,marginBottom:"0.25rem"},children:"Odds"}),d.jsxs("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'",lineHeight:I.hero.lineHeight},children:[s.odds>0?"+":"",s.odds]}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)"},children:"line"})]})]})]}),d.jsx(nD,{modelProb:s.modelProb,marketProb:o}),T.length>0&&d.jsxs("div",{style:{marginTop:"1rem",marginBottom:"0.75rem",padding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.1)",position:"relative",zIndex:1},children:[d.jsxs("div",{style:{fontSize:I.label.size,color:"#10B981",fontWeight:I.heading.weight,marginBottom:"0.625rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("span",{style:{fontSize:"1rem"},children:"✓"}),"Why this is the best value:"]}),T.map((S,b)=>d.jsxs("div",{style:{fontSize:I.body.size,color:"var(--color-text-primary)",marginBottom:b<T.length-1?"0.5rem":0,paddingLeft:"1.25rem",position:"relative",lineHeight:"1.5"},children:[d.jsx("span",{style:{position:"absolute",left:0,color:"#10B981",fontSize:"1.25rem",fontWeight:"bold"},children:"•"}),S]},b))]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:I.body.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(16, 185, 129, 0.2)",position:"relative",zIndex:1,fontWeight:I.caption.weight},children:[n&&d.jsxs("span",{children:["Odds: ",s.odds>0?"+":"",s.odds]}),d.jsxs("span",{children:["Model: ",c.toFixed(1)]}),d.jsxs("span",{children:["Market: ",h.toFixed(1)]})]})]})},rD=({factors:s,totalImpact:e,awayTeam:n,homeTeam:r,isMobile:o,bestEdge:c})=>{if(!s||s.length===0)return null;const h=s.filter(b=>{const w=Math.abs(b.impact)>.05,z=b.awayMetric?.value||0,V=b.homeMetric?.value||0,F=z&&V&&Math.abs(z-V)/((z+V)/2)>.1;if(!w||!F)return!1;if(c?.market==="MONEYLINE")return(z>V?n:r)===c.team;if(c?.market==="TOTAL"){const Y=c.pick?.includes("OVER");return Y&&b.impact>.05||!Y&&b.impact<-.05}return!0}).sort((b,w)=>Math.abs(w.impact)-Math.abs(b.impact)).slice(0,3);if(h.length===0)return d.jsxs("div",{style:{background:jt.factors,border:je.raised.border,boxShadow:je.raised.shadow,borderRadius:ue.borderRadius,padding:o?ue.cardPadding:"1.5rem",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:I.body.size,color:"var(--color-text-muted)",marginBottom:"0.5rem"},children:"📊 KEY ADVANTAGES"}),d.jsx("div",{style:{fontSize:I.subheading.size,color:"var(--color-text-primary)",fontWeight:I.heading.weight},children:"Even Matchup"}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",marginTop:"0.5rem"},children:"No dominant statistical advantages detected. Both teams are closely matched in key metrics."})]});const g=c?.market==="MONEYLINE",p=c?.market==="TOTAL",v=p?`💰 Why ${c.pick} is the smart bet:`:g?`💰 Why ${c.team} ML is the smart bet:`:c?.market==="PUCK_LINE"?`💰 Why ${c.pick} is the smart bet:`:"📊 KEY ADVANTAGES",T=p?`${h.length} factor${h.length!==1?"s":""} combining for ${e>=0?"+":""}${e.toFixed(2)} goal edge`:g?`${h.length} decisive advantage${h.length!==1?"s":""} supporting ${c.team} to WIN`:`${h.length} key factor${h.length!==1?"s":""} with significant impact`,S=h;return h.length,d.jsxs("div",{style:{background:jt.factors,border:je.raised.border,boxShadow:je.raised.shadow,borderRadius:ue.borderRadius,overflow:"hidden"},children:[d.jsxs("div",{style:{padding:o?ue.innerPadding:"1rem",background:"rgba(0, 0, 0, 0.15)",borderBottom:je.flat.border},children:[d.jsx("h3",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,margin:0,marginBottom:"0.25rem",color:"var(--color-accent)",letterSpacing:I.heading.letterSpacing},children:v}),d.jsx("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",fontWeight:I.caption.weight},children:T})]}),d.jsx("div",{style:{padding:o?ue.innerPadding:"1rem"},children:S.map((b,w)=>{const z=b.awayMetric?.value||0,V=b.homeMetric?.value||0,Y=(Math.abs(z-V)/((z+V)/2)*100).toFixed(0),q=z>V?n:r,ne=(()=>{if(g)return b.name==="Expected Goals"?`${q} projects to score ${Math.abs(b.impact).toFixed(2)} more goals, giving them a decisive edge to WIN this game.`:b.name==="Offensive Rating"?`${q} generates ${Y}% more high-danger chances, creating better scoring opportunities to WIN.`:b.name==="Defensive Rating"?`${q} allows ${Y}% fewer dangerous chances, making it harder for opponents to score and WIN.`:b.name==="Special Teams"?`${q} has superior power play execution, creating more scoring chances to WIN.`:b.name==="Possession & Control"?`${q} controls ${Y}% more of the play, dictating the pace to WIN.`:`${q} has a ${Y}% advantage in ${b.name.toLowerCase()}, improving their chances to WIN this game.`;if(p){const re=b.impact>0?"OVER":"UNDER";return`${b.explanation} This pushes the total ${re} by ~${Math.abs(b.impact).toFixed(2)} goals.`}return b.explanation})();return d.jsxs("div",{style:{marginBottom:w<S.length-1?"0.875rem":"0",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"10px",padding:"1rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[d.jsxs("div",{style:{fontSize:I.label.size,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:I.label.weight,marginBottom:"0.625rem"},children:[b.stars===3?"🔥":b.stars===2?"🎯":"⚡"," ",b.name]}),d.jsx("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"#10B981",marginBottom:"0.625rem",lineHeight:1.3},children:g?`${q} has ${Y}% edge`:p&&b.impact>0?"Combined teams favor OVER":p&&b.impact<0?"Combined teams favor UNDER":`${q} has ${Y}% edge`}),p&&d.jsxs("div",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:b.impact>0?"#F59E0B":"#8B5CF6",marginBottom:"0.625rem"},children:[b.impact>0?"+":"",b.impact.toFixed(2)," goal impact → ",b.impact>0?"OVER":"UNDER"]}),d.jsx("div",{style:{fontSize:I.body.size,color:"var(--color-text-primary)",marginBottom:"0.75rem",lineHeight:1.5},children:ne}),d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[n,": ",z.toFixed(2)," | ",r,": ",V.toFixed(2)]})]},w)})}),d.jsxs("div",{style:{textAlign:"center",fontSize:I.subheading.size,fontWeight:I.heading.weight,padding:o?ue.innerPadding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%)",border:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:ue.borderRadius,color:"#10B981",fontFeatureSettings:"'tnum'",margin:o?ue.innerPadding:"1rem",marginTop:"1rem"},children:[d.jsx("div",{style:{fontSize:I.caption.size,fontWeight:I.caption.weight,color:"rgba(16, 185, 129, 0.8)",marginBottom:"0.25rem"},children:"TOTAL EDGE"}),Wu.formatGoalImpact(e)," goals vs market"]})]})},sD=({game:s,bestEdge:e,awayTeam:n,homeTeam:r,isMobile:o,factors:c})=>{if(!s||!e)return null;const h=e.market==="TOTAL";let g=null,p="",v=null;if(h){const Y=s.edges?.moneyline?.away,q=s.edges?.moneyline?.home;Y&&q&&(g=Y.evPercent>q.evPercent?Y:q,p=Y.evPercent>q.evPercent?`${n} ML`:`${r} ML`,v=Y.evPercent>q.evPercent?n:r)}else{const Y=s.edges?.total?.over,q=s.edges?.total?.under;if(Y&&q){g=Y.evPercent>q.evPercent?Y:q;const ee=s.rawOdds?.total?.line||Y.line||q.line;p=Y.evPercent>q.evPercent?`OVER ${ee}`:`UNDER ${ee}`}}if(!g||g.evPercent<=0)return null;const S=(()=>{if(!c||c.length===0)return[];const Y=[];if(h)c.forEach(q=>{const ee=q.awayMetric?.value||0,ne=q.homeMetric?.value||0,re=ee>ne?n:r,ye=(Math.abs(ee-ne)/((ee+ne)/2)*100).toFixed(0);if(re===v&&Math.abs(ee-ne)/((ee+ne)/2)>.1){let P="";q.name==="Expected Goals"?P=`${v} projects to score ${Math.abs(q.impact).toFixed(2)} more goals, making them a strong WIN candidate.`:q.name==="Offensive Rating"?P=`${v} generates ${ye}% more high-danger chances, giving them a scoring edge to WIN.`:q.name==="Defensive Rating"?P=`${v} allows ${ye}% fewer dangerous chances, making it harder for opponents to WIN.`:q.name==="Special Teams"?P=`${v} has superior power play execution, creating more scoring chances to WIN.`:q.name==="Possession & Control"?P=`${v} controls ${ye}% more of the play, dictating the pace to WIN.`:P=`${v} has a ${ye}% advantage in ${q.name.toLowerCase()}, improving their chances to WIN.`,Y.push({icon:q.stars===3?"🔥":q.stars===2?"🎯":"⚡",name:q.name,edge:`${v} has ${ye}% edge`,explanation:P})}});else{const q=p.includes("OVER");c.forEach(ee=>{if((q&&ee.impact>.05||!q&&ee.impact<-.05)&&Math.abs(ee.impact)>.05){const re=q?"OVER":"UNDER",ye=`${ee.name} pushes the total ${re} by ~${Math.abs(ee.impact).toFixed(2)} goals, creating value.`;Y.push({icon:ee.stars===3?"🔥":ee.stars===2?"🎯":"⚡",name:ee.name,edge:`${Math.abs(ee.impact).toFixed(2)} goal impact`,explanation:ye})}})}return Y.slice(0,3)})(),b=i_(g.evPercent),z=h?`While ${e.pick} is our top pick, ${v} ML offers strong value if you prefer betting on the winner.`:`While ${e.team} ML is our top pick, ${p} offers strong value if you prefer betting on the total.`,V=Rb(g.odds),F=((g.modelProb-V)*100).toFixed(1);return d.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.12) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"12px",padding:o?ue.cardPadding:"1.25rem",margin:o?`${ue.sectionGap} ${ue.cardPadding}`:"1.25rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(212, 175, 55, 0.1)",position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, rgba(212, 175, 55, 0.8) 0%, rgba(212, 175, 55, 0.3) 100%)"}}),d.jsxs("div",{style:{marginBottom:"1rem",paddingTop:"0.5rem"},children:[d.jsx("div",{style:{fontSize:I.label.size,color:"var(--color-accent)",textTransform:"uppercase",letterSpacing:"0.08em",fontWeight:I.heading.weight,marginBottom:"0.75rem"},children:"⭐ ALSO CONSIDER THIS VALUE BET"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.625rem"},children:[d.jsx("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:"var(--color-text-primary)"},children:h?`${p} to WIN`:p}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.25rem"},children:[d.jsxs("div",{style:{fontSize:I.subheading.size,fontWeight:I.heading.weight,color:b.color},children:["+",g.evPercent.toFixed(1),"% EV"]}),d.jsx("div",{style:{fontSize:I.caption.size,fontWeight:I.label.weight,color:b.color,padding:"0.125rem 0.5rem",background:`${b.color}22`,borderRadius:"4px",border:`1px solid ${b.color}`},children:b.label})]})]}),d.jsx("div",{style:{fontSize:I.body.size,color:"var(--color-text-muted)",lineHeight:1.5},children:z})]}),S.length>0&&d.jsxs("div",{style:{padding:"1rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(212, 175, 55, 0.03) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"8px",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[d.jsxs("div",{style:{fontSize:I.label.size,color:"var(--color-accent)",fontWeight:I.heading.weight,marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx("span",{style:{fontSize:"1rem"},children:"✓"}),"WHY THIS BET HAS VALUE:"]}),S.map((Y,q)=>d.jsxs("div",{style:{marginBottom:q<S.length-1?"0.875rem":0,paddingBottom:q<S.length-1?"0.875rem":0,borderBottom:q<S.length-1?"1px solid rgba(212, 175, 55, 0.2)":"none"},children:[d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:I.label.weight,marginBottom:"0.375rem"},children:[Y.icon," ",Y.name]}),d.jsx("div",{style:{fontSize:I.body.size,fontWeight:I.heading.weight,color:"#D4AF37",marginBottom:"0.375rem"},children:Y.edge}),d.jsx("div",{style:{fontSize:I.body.size,color:"var(--color-text-primary)",lineHeight:1.5},children:Y.explanation})]},q))]}),d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",paddingTop:"0.75rem",borderTop:"1px solid rgba(212, 175, 55, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[d.jsxs("span",{children:["Odds: ",g.odds>0?"+":"",g.odds]}),d.jsxs("span",{children:["Model: ",(g.modelProb*100).toFixed(1),"% vs ",(V*100).toFixed(1),"%"]}),d.jsxs("span",{style:{color:"#D4AF37",fontWeight:I.label.weight},children:["Edge: +",F,"pts"]})]})]})},Hr=({team:s,odds:e,ev:n,isPositive:r,isBestBet:o,modelProb:c,impliedProb:h})=>{const[g,p]=ce.useState(!1),v=i_(n),T=c&&h?(c-h)*100:null;return d.jsxs("div",{onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),style:{padding:"0.75rem",marginBottom:"0.5rem",background:o?v.bg:g?"rgba(100, 116, 139, 0.08)":"transparent",border:o?`2px solid ${v.color}40`:je.flat.border,borderRadius:"8px",transition:Yn.normal,transform:g?"translateX(4px)":"translateX(0)",cursor:"pointer",boxShadow:o&&g?`0 4px 12px ${v.color}30`:"none"},role:"button",tabIndex:0,"aria-label":`${s} ${e>0?"+":""}${e}, EV ${n.toFixed(1)}%`,onKeyPress:S=>S.key==="Enter"&&console.log("Market selected:",s),children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.375rem"},children:[d.jsx("span",{style:{fontSize:I.body.size,fontWeight:I.body.weight,color:"var(--color-text-primary)"},children:s}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[d.jsxs("span",{style:{fontSize:I.body.size,fontWeight:I.body.weight,color:"var(--color-text-primary)",fontFeatureSettings:"'tnum'"},children:[e>0?"+":"",e]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",minWidth:"70px"},children:[d.jsxs("span",{style:{fontSize:I.label.size,fontWeight:I.heading.weight,color:v.color,fontFeatureSettings:"'tnum'"},children:[r?"+":"",n.toFixed(1),"%"]}),o&&d.jsx("span",{style:{fontSize:I.caption.size,color:v.color,fontWeight:I.body.weight},children:v.label})]}),o&&d.jsx("span",{style:{fontSize:"1.125rem",color:v.color},children:"✓"})]})]}),(g||o)&&c&&h&&d.jsxs("div",{style:{fontSize:I.caption.size,color:"var(--color-text-muted)",display:"flex",justifyContent:"space-between",paddingTop:"0.375rem",borderTop:"1px solid rgba(100, 116, 139, 0.15)"},children:[d.jsxs("span",{children:["Book: ",(h*100).toFixed(0),"%"]}),d.jsxs("span",{children:["Model: ",(c*100).toFixed(0),"%"]}),T!==null&&d.jsxs("span",{style:{color:T>0?v.color:"var(--color-text-muted)"},children:["(",T>0?"+":"",T.toFixed(1),"pts)"]})]})]})},aD=({game:s,isMobile:e})=>{if(!s.edges)return null;const n=Math.max(s.edges.moneyline?.away?.evPercent||0,s.edges.moneyline?.home?.evPercent||0,s.edges.total?.over?.evPercent||0,s.edges.total?.under?.evPercent||0);return e?d.jsxs("div",{style:{overflowX:"auto",scrollSnapType:"x mandatory",display:"flex",gap:ue.sectionGap,padding:ue.cardPadding,borderTop:je.flat.border,scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"hide-scrollbar",children:[s.edges.moneyline&&d.jsxs("div",{style:{background:jt.moneyline,border:je.raised.border,boxShadow:je.raised.shadow,borderRadius:ue.borderRadius,padding:ue.innerPadding,minWidth:"85%",scrollSnapAlign:"center",flex:"0 0 auto"},children:[d.jsx("div",{style:{fontSize:I.label.size,fontWeight:I.heading.weight,marginBottom:"0.75rem",color:"rgba(59, 130, 246, 0.95)",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:"⚡ MONEYLINE"}),d.jsx(Hr,{team:s.awayTeam,odds:s.edges.moneyline.away.odds,ev:s.edges.moneyline.away.evPercent,isPositive:s.edges.moneyline.away.evPercent>0,isBestBet:s.edges.moneyline.away.evPercent===n&&s.edges.moneyline.away.evPercent>5,modelProb:s.edges.moneyline.away.modelProb,impliedProb:Gr(s.edges.moneyline.away.odds)}),d.jsx(Hr,{team:s.homeTeam,odds:s.edges.moneyline.home.odds,ev:s.edges.moneyline.home.evPercent,isPositive:s.edges.moneyline.home.evPercent>0,isBestBet:s.edges.moneyline.home.evPercent===n&&s.edges.moneyline.home.evPercent>5,modelProb:s.edges.moneyline.home.modelProb,impliedProb:Gr(s.edges.moneyline.home.odds)})]}),s.edges.total&&s.rawOdds?.total?.line&&d.jsxs("div",{style:{background:jt.total,border:je.raised.border,boxShadow:je.raised.shadow,borderRadius:ue.borderRadius,padding:ue.innerPadding,minWidth:"85%",scrollSnapAlign:"center",flex:"0 0 auto"},children:[d.jsx("div",{style:{fontSize:I.label.size,fontWeight:I.heading.weight,marginBottom:"0.75rem",color:"rgba(168, 85, 247, 0.95)",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:"🎯 TOTAL"}),d.jsx(Hr,{team:`O ${s.rawOdds.total.line}`,odds:s.edges.total.over.odds,ev:s.edges.total.over.evPercent,isPositive:s.edges.total.over.evPercent>0,isBestBet:s.edges.total.over.evPercent===n&&s.edges.total.over.evPercent>5,modelProb:s.edges.total.over.modelProb,impliedProb:Gr(s.edges.total.over.odds)}),d.jsx(Hr,{team:`U ${s.rawOdds.total.line}`,odds:s.edges.total.under.odds,ev:s.edges.total.under.evPercent,isPositive:s.edges.total.under.evPercent>0,isBestBet:s.edges.total.under.evPercent===n&&s.edges.total.under.evPercent>5,modelProb:s.edges.total.under.modelProb,impliedProb:Gr(s.edges.total.under.odds)})]})]}):d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.25rem",padding:"1.25rem",borderTop:je.flat.border},children:[s.edges.moneyline&&d.jsxs("div",{style:{background:jt.moneyline,border:je.raised.border,boxShadow:je.raised.shadow,borderRadius:"10px",padding:"1.25rem"},children:[d.jsx("div",{style:{fontSize:I.label.size,fontWeight:I.heading.weight,marginBottom:"0.875rem",color:"rgba(59, 130, 246, 0.95)",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:"⚡ MONEYLINE"}),d.jsx(Hr,{team:s.awayTeam,odds:s.edges.moneyline.away.odds,ev:s.edges.moneyline.away.evPercent,isPositive:s.edges.moneyline.away.evPercent>0,isBestBet:s.edges.moneyline.away.evPercent===n&&s.edges.moneyline.away.evPercent>5,modelProb:s.edges.moneyline.away.modelProb,impliedProb:Gr(s.edges.moneyline.away.odds)}),d.jsx(Hr,{team:s.homeTeam,odds:s.edges.moneyline.home.odds,ev:s.edges.moneyline.home.evPercent,isPositive:s.edges.moneyline.home.evPercent>0,isBestBet:s.edges.moneyline.home.evPercent===n&&s.edges.moneyline.home.evPercent>5,modelProb:s.edges.moneyline.home.modelProb,impliedProb:Gr(s.edges.moneyline.home.odds)})]}),s.edges.total&&s.rawOdds?.total?.line&&d.jsxs("div",{style:{background:jt.total,border:je.raised.border,boxShadow:je.raised.shadow,borderRadius:"10px",padding:"1.25rem"},children:[d.jsx("div",{style:{fontSize:I.label.size,fontWeight:I.heading.weight,marginBottom:"0.875rem",color:"rgba(168, 85, 247, 0.95)",textTransform:I.label.textTransform,letterSpacing:I.label.letterSpacing},children:"🎯 TOTAL"}),d.jsx(Hr,{team:`O ${s.rawOdds.total.line}`,odds:s.edges.total.over.odds,ev:s.edges.total.over.evPercent,isPositive:s.edges.total.over.evPercent>0,isBestBet:s.edges.total.over.evPercent===n&&s.edges.total.over.evPercent>5,modelProb:s.edges.total.over.modelProb,impliedProb:Gr(s.edges.total.over.odds)}),d.jsx(Hr,{team:`U ${s.rawOdds.total.line}`,odds:s.edges.total.under.odds,ev:s.edges.total.under.evPercent,isPositive:s.edges.total.under.evPercent>0,isBestBet:s.edges.total.under.evPercent===n&&s.edges.total.under.evPercent>5,modelProb:s.edges.total.under.modelProb,impliedProb:Gr(s.edges.total.under.odds)})]})]})},oD=({dataProcessor:s,oddsData:e,startingGoalies:n,goalieData:r,statsAnalyzer:o,edgeFactorCalc:c})=>{const[h,g]=ce.useState(null),[p,v]=ce.useState([]),[T,S]=ce.useState([]),[b,w]=ce.useState(!1),[z,V]=ce.useState(null),{scores:F}=JC(),[Y,q]=ce.useState(null);ZC(p),ce.useEffect(()=>{if(r&&Array.isArray(r)&&r.length>0){console.log(`🥅 Initializing GoalieProcessor with ${r.length} goalie records`);const E=new AS(r);q(E)}},[r]),ce.useEffect(()=>{const E=()=>{w(window.innerWidth<=640)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),ce.useEffect(()=>{if(s&&e){const E=new bE(s,e,n);g(E);const D=E.calculateAllEdges();v(D),$E(D);const N=E.getTopEdges(0);S(N)}},[s,e,n]);const ee=E=>{if(!n||!n.games)return null;const D=n.games.find(j=>j.away?.team===E||j.home?.team===E);if(!D)return null;const C=D.away?.team===E?D.away:D.home;if(!C||!C.goalie||!C.confirmed)return null;const M=Y?Y.getGoalieStats(C.goalie,E):null;return{name:C.goalie,team:E,confirmed:!0,...M||{}}},re=(()=>{const E=p.filter(N=>{let C=!1;return(N.edges.moneyline?.away?.evPercent>0||N.edges.moneyline?.home?.evPercent>0)&&(C=!0),(N.edges.total?.over?.evPercent>0||N.edges.total?.under?.evPercent>0)&&(C=!0),C}),D=E.filter(N=>{let C=0;return N.edges.moneyline&&(N.edges.moneyline.away?.evPercent>C&&(C=N.edges.moneyline.away.evPercent),N.edges.moneyline.home?.evPercent>C&&(C=N.edges.moneyline.home.evPercent)),N.edges.total&&(N.edges.total.over?.evPercent>C&&(C=N.edges.total.over.evPercent),N.edges.total.under?.evPercent>C&&(C=N.edges.total.under.evPercent)),C>5}).length;return{total:E.length,highValue:D}})(),ye=E=>{const D=`game-${E.replace(/\s/g,"-")}`,N=document.getElementById(D);N&&N.scrollIntoView({behavior:"smooth",block:"center"})},P=(E,D)=>{if(!o||!c)return null;try{const N=D?.market||"TOTAL",C=c.getKeyFactors(E.awayTeam,E.homeTeam,N),M=c.generateStory(C,E.awayTeam,E.homeTeam),j=c.calculateTotalImpact(C),Ee=o.getDangerZoneBreakdown(E.awayTeam),ot=o.getDangerZoneBreakdown(E.homeTeam),X=Ee&&ot?Wu.generateDangerZoneHeatmap(Ee,ot):null,se=o.getReboundMetrics(E.awayTeam),de=o.getReboundMetrics(E.homeTeam),ke=se&&de?Wu.generateReboundTable(se,de):null,ze=o.getPhysicalMetrics(E.awayTeam),ut=o.getPhysicalMetrics(E.homeTeam),qe=ze&&ut?Wu.generatePhysicalMetrics(ze,ut):null,Re=o.getPossessionMetrics(E.awayTeam),Ze=o.getPossessionMetrics(E.homeTeam),Wt=Re&&Ze?{away:Re,home:Ze}:null,Zt=o.getRegressionIndicators(E.awayTeam),Mn=o.getRegressionIndicators(E.homeTeam);return{factors:C,story:M,totalImpact:j,dangerZoneData:X,reboundData:ke,physicalData:qe,possessionData:Wt,regressionData:Zt&&Mn?{away:Zt,home:Mn}:null}}catch(N){return console.error("Error generating analytics data:",N),null}};return e?d.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:b?"1rem":"2rem 1rem"},className:"animate-fade-in",children:[d.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(59, 130, 246, 0.08) 100%)",backdropFilter:"blur(12px)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"16px",padding:b?"1.5rem":"2rem",marginBottom:"2rem",position:"relative",overflow:"hidden"},children:[d.jsx("div",{className:"shine-overlay"}),d.jsxs("div",{style:{display:"flex",flexDirection:b?"column":"row",justifyContent:"space-between",alignItems:"flex-start",gap:b?"1.5rem":"2rem",position:"relative",zIndex:1},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[d.jsx(Za,{size:32,color:"var(--color-accent)"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-gradient",style:{fontSize:b?"1.75rem":"2.5rem",fontWeight:"800",marginBottom:"0.25rem",letterSpacing:"-0.02em",lineHeight:"1.1"},children:"Today's Games"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",fontWeight:"500"},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),d.jsx(TE,{}),n&&n.games&&d.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",borderRadius:"4px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",color:"#10B981",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.25rem"},children:["🥅 ",(()=>{let E=0,D=0;return n.games.forEach(N=>{N.away?.goalie&&N.away?.confirmed!==!1&&E++,N.home?.goalie&&N.home?.confirmed!==!1&&E++,D+=2}),`${E}/${D} Goalies`})()]}),n?.oddsLastUpdated&&d.jsxs("span",{style:{fontSize:"0.8rem",padding:"0.375rem 0.625rem",borderRadius:"6px",background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#60A5FA",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.375rem"},children:["📊 Odds: ",(()=>{const E=new Date(n.oddsLastUpdated),N=Math.floor((new Date-E)/(1e3*60));if(N<1)return"Just updated";if(N<60)return`Updated ${N}m ago`;const C=Math.floor(N/60);return C<24?`Updated ${C}h ago`:`Updated ${E.toLocaleTimeString()}`})()]})]})]})]}),!b&&d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"0.875rem",lineHeight:"1.6",maxWidth:"45rem",marginTop:"0.75rem"},children:"Institutional-grade analysis using advanced metrics to identify betting edges. Full mathematical transparency with score-adjusted xG, PDO regression, and probabilistic modeling."})]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexDirection:b?"row":"column",alignItems:b?"flex-start":"flex-end"},children:[d.jsx(_v,{icon:d.jsx(ch,{size:16}),value:re.total,label:"Opportunities",color:"info"}),d.jsx(_v,{icon:d.jsx(nr,{size:16}),value:re.highValue,label:"High Value",color:"success",sparkle:!0})]})]}),p.length>0&&p[0].gameTime&&d.jsx(CE,{firstGameTime:p[0].gameTime})]}),d.jsx(DE,{allEdges:p,dataProcessor:s,onGameClick:ye}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:b?"1.5rem":"2rem"},children:p.map((E,D)=>{const N=T.filter(C=>C.game===E.game&&C.evPercent>0).sort((C,M)=>M.evPercent-C.evPercent)[0];return d.jsxs("div",{id:`game-${E.game.replace(/\s/g,"-")}`,className:"elevated-card game-card hover-lift",style:{animationDelay:`${D*.1}s`,position:"relative"},children:[d.jsx(tD,{awayTeam:E.awayTeam,homeTeam:E.homeTeam,gameTime:E.gameTime,rating:N?.evPercent||0,awayWinProb:E.edges.moneyline?.away?.modelProb,homeWinProb:E.edges.moneyline?.home?.modelProb,isMobile:b}),(()=>{const C=P(E,N);return d.jsx(iD,{bestEdge:N,game:E,isMobile:b,factors:C?.factors||[]})})(),(()=>{const C=P(E,N);return N&&C&&C.factors?d.jsx(eD,{game:E,bestEdge:N,factors:C.factors,isMobile:b}):null})(),(()=>{const C=P(E,N);return C&&C.factors&&C.factors.length>0?d.jsx(rD,{factors:C.factors,totalImpact:C.totalImpact,awayTeam:E.awayTeam,homeTeam:E.homeTeam,isMobile:b,bestEdge:N}):null})(),(()=>{const C=P(E,N);return d.jsx(sD,{game:E,bestEdge:N,awayTeam:E.awayTeam,homeTeam:E.homeTeam,isMobile:b,factors:C?.factors||[]})})(),d.jsx(aD,{game:E,isMobile:b}),(()=>{const C=P(E,N);return C?d.jsx(VE,{awayTeam:E.awayTeam,homeTeam:E.homeTeam,dangerZoneData:C.dangerZoneData,reboundData:C.reboundData,physicalData:C.physicalData,possessionData:C.possessionData,regressionData:C.regressionData,awayGoalie:ee(E.awayTeam),homeGoalie:ee(E.homeTeam),isMobile:b,bestEdge:N,statsAnalyzer:o}):null})()]},D)})}),p.length===0&&d.jsx(d.Fragment,{children:F&&F.length>0?d.jsxs("div",{children:[d.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem 1rem",background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%)",borderRadius:"12px",marginBottom:"1.5rem",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[d.jsx(ro,{size:32,color:"#EF4444",style:{margin:"0 auto 0.75rem auto",animation:"pulse 1.5s infinite"}}),d.jsx("h3",{style:{marginBottom:"0.5rem",color:"#EF4444"},children:"Live Games"}),d.jsxs("p",{style:{color:"var(--color-text-secondary)",fontSize:"0.9rem"},children:["Showing ",F.length," game",F.length>1?"s":""," in progress"]})]}),F.map((E,D)=>d.jsxs("div",{className:"elevated-card",style:{marginBottom:"1rem",padding:b?"1rem":"1.5rem",background:E.status==="LIVE"?"linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(26, 31, 46, 1) 50%)":"var(--color-bg-secondary)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[d.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:[E.awayTeam," @ ",E.homeTeam]}),E.status==="LIVE"&&d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#EF4444",fontWeight:"bold",animation:"pulse 1.5s infinite"},children:[d.jsx(ro,{size:16}),"LIVE"]}),E.status==="FINAL"&&d.jsx("div",{style:{color:"var(--color-text-muted)",fontWeight:"bold"},children:"FINAL"})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",fontSize:"2.5rem",fontWeight:"bold",padding:"2rem 0",color:E.status==="LIVE"?"#EF4444":"var(--color-text-primary)"},children:[d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",marginBottom:"0.5rem"},children:E.awayTeam}),d.jsx("div",{children:E.awayScore})]}),d.jsx("div",{style:{fontSize:"1.5rem",color:"var(--color-text-muted)"},children:"-"}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-muted)",marginBottom:"0.5rem"},children:E.homeTeam}),d.jsx("div",{children:E.homeScore})]})]}),E.clock&&d.jsxs("div",{style:{textAlign:"center",color:"var(--color-text-muted)",fontSize:"0.9rem",marginTop:"1rem"},children:[E.period&&`Period ${E.period} • `,E.clock]})]},E.gameId||D)),d.jsxs("div",{style:{textAlign:"center",padding:"1rem",color:"var(--color-text-muted)",fontSize:"0.875rem",marginTop:"1rem"},children:[d.jsx("p",{children:"⚠️ Betting analysis not available for live games."}),d.jsx("p",{style:{marginTop:"0.5rem"},children:"Check back tomorrow for tomorrow's betting opportunities!"})]})]}):d.jsxs("div",{className:"elevated-card",style:{textAlign:"center",padding:b?"2rem 1rem":"3rem"},children:[d.jsx(Za,{size:48,color:"var(--color-text-muted)",style:{margin:"0 auto 1rem auto"}}),d.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Games Today"}),d.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Check back later for today's matchups and analysis."})]})})]}):d.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:b?"1rem":"2rem 1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:b?"1rem":"2rem",borderBottom:"1px solid var(--color-border)",marginBottom:b?"1rem":"2rem"},children:[d.jsx(Za,{size:b?24:32,color:"var(--color-accent)"}),d.jsxs("div",{children:[d.jsx("h1",{style:{marginBottom:"0.25rem"},children:"Today's Games"}),d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:b?"0.875rem":"0.938rem",margin:0},children:"In-depth analysis of today's matchups with advanced metrics"})]})]}),d.jsxs("div",{className:"elevated-card",style:{textAlign:"center",padding:b?"2rem 1rem":"3rem"},children:[d.jsx(Za,{size:48,color:"var(--color-text-muted)",style:{margin:"0 auto 1rem auto"}}),d.jsx("h3",{style:{marginBottom:"0.5rem"},children:"No Games Available"}),d.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Add today's odds files to see game analysis and betting opportunities."})]})]})};function $u({icon:s,label:e,value:n,target:r,status:o}){return d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[d.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(59, 130, 246, 0.15) 100%)"},children:s}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:e}),d.jsx("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--color-text-primary)"},children:n})]})]}),r&&d.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",paddingTop:"0.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:["Target: ",r,o&&d.jsx("span",{style:{marginLeft:"0.5rem",color:o==="good"?"#10B981":"#F59E0B"},children:o==="good"?"✓":"○"})]})]})}function lD(){const[s,e]=ce.useState(null),[n,r]=ce.useState([]),[o,c]=ce.useState(!0),[h,g]=ce.useState({}),[p,v]=ce.useState({});ce.useEffect(()=>{T()},[]);async function T(){try{const S=eh(Ju($s,"bets"),th("status","==","COMPLETED"),nh("timestamp","desc")),w=(await rh(S)).docs.map(ne=>({docId:ne.id,...ne.data()}));if(w.length===0){e({totalBets:0,wins:0,losses:0,pushes:0,winRate:0,roi:0,profit:0}),c(!1);return}const z=w.filter(ne=>ne.result?.outcome==="WIN").length,V=w.filter(ne=>ne.result?.outcome==="LOSS").length,F=w.filter(ne=>ne.result?.outcome==="PUSH").length,Y=w.reduce((ne,re)=>ne+(re.result?.profit||0),0);e({totalBets:w.length,wins:z,losses:V,pushes:F,winRate:z+V>0?z/(z+V)*100:0,roi:w.length>0?Y/w.length*100:0,profit:Y});const q={};w.forEach(ne=>{const re=ne.bet?.market||"UNKNOWN";q[re]||(q[re]={bets:0,wins:0,losses:0,profit:0}),q[re].bets++,ne.result?.outcome==="WIN"&&q[re].wins++,ne.result?.outcome==="LOSS"&&q[re].losses++,q[re].profit+=ne.result?.profit||0}),Object.keys(q).forEach(ne=>{const re=q[ne];re.roi=re.bets>0?re.profit/re.bets*100:0,re.winRate=re.wins+re.losses>0?re.wins/(re.wins+re.losses)*100:0}),g(q);const ee={};w.forEach(ne=>{const re=ne.prediction?.rating||"UNKNOWN";ee[re]||(ee[re]={bets:0,wins:0,losses:0,profit:0}),ee[re].bets++,ne.result?.outcome==="WIN"&&ee[re].wins++,ne.result?.outcome==="LOSS"&&ee[re].losses++,ee[re].profit+=ne.result?.profit||0}),Object.keys(ee).forEach(ne=>{const re=ee[ne];re.roi=re.bets>0?re.profit/re.bets*100:0,re.winRate=re.wins+re.losses>0?re.wins/(re.wins+re.losses)*100:0}),v(ee),r(w.slice(0,20)),c(!1)}catch(S){console.error("Error loading performance data:",S),c(!1)}}return o?d.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("div",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading performance data..."})]}):!s||s.totalBets===0?d.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"📊 No bet data yet"}),d.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Start tracking bets to see performance metrics"})]}):d.jsxs("div",{className:"performance-dashboard",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:"Model Performance"}),d.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Track betting results and validate model accuracy"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[d.jsx($u,{icon:d.jsx(Ji,{size:24,color:"#10B981"}),label:"Win Rate",value:`${s.winRate.toFixed(1)}%`,target:"52-58%",status:s.winRate>=52&&s.winRate<=58?"good":"warning"}),d.jsx($u,{icon:d.jsx(nr,{size:24,color:"#3B82F6"}),label:"ROI",value:`${s.roi>0?"+":""}${s.roi.toFixed(1)}%`,target:"3-8%",status:s.roi>=3&&s.roi<=8?"good":"warning"}),d.jsx($u,{icon:d.jsx(JS,{size:24,color:"#D4AF37"}),label:"Total Profit",value:`${s.profit>0?"+":""}${s.profit.toFixed(2)}u`}),d.jsx($u,{icon:d.jsx(ro,{size:24,color:"#8B5CF6"}),label:"Bets Tracked",value:s.totalBets})]}),d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[d.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:"Record Breakdown"}),d.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Wins"}),d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10B981"},children:s.wins})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Losses"}),d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#EF4444"},children:s.losses})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Pushes"}),d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#64748B"},children:s.pushes})]})]})]}),Object.keys(h).length>0&&d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(ch,{size:20}),"Performance by Market"]}),d.jsx("div",{style:{overflowX:"auto"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Market"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Win Rate"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"ROI"}),d.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),d.jsx("tbody",{children:Object.entries(h).map(([S,b])=>d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[d.jsx("td",{style:{padding:"0.75rem",fontWeight:"500"},children:S}),d.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:b.bets}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:[b.winRate.toFixed(1),"%"]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:b.roi>0?"#10B981":"#EF4444"},children:[b.roi>0?"+":"",b.roi.toFixed(1),"%"]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:b.profit>0?"#10B981":"#EF4444"},children:[b.profit>0?"+":"",b.profit.toFixed(2),"u"]})]},S))})]})})]}),Object.keys(p).length>0&&d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(qm,{size:20}),"Performance by Rating"]}),d.jsx("div",{style:{overflowX:"auto"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Rating"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bets"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Win Rate"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"ROI"}),d.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),d.jsx("tbody",{children:Object.entries(p).sort((S,b)=>{const w={"A+":0,A:1,"B+":2,B:3,C:4};return(w[S[0]]||99)-(w[b[0]]||99)}).map(([S,b])=>d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[d.jsx("td",{style:{padding:"0.75rem",fontWeight:"600"},children:S}),d.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:b.bets}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center"},children:[b.winRate.toFixed(1),"%"]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",color:b.roi>0?"#10B981":"#EF4444"},children:[b.roi>0?"+":"",b.roi.toFixed(1),"%"]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:b.profit>0?"#10B981":"#EF4444"},children:[b.profit>0?"+":"",b.profit.toFixed(2),"u"]})]},S))})]})})]}),d.jsxs("div",{className:"elevated-card",style:{padding:"1.5rem"},children:[d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Za,{size:20}),"Recent Bets"]}),d.jsx("div",{style:{overflowX:"auto"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Date"}),d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Game"}),d.jsx("th",{style:{textAlign:"left",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Bet"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Odds"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"EV%"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Rating"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Score"}),d.jsx("th",{style:{textAlign:"center",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Result"}),d.jsx("th",{style:{textAlign:"right",padding:"0.75rem",color:"var(--color-text-secondary)",fontWeight:"500"},children:"Profit"})]})}),d.jsx("tbody",{children:n.map((S,b)=>d.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[d.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:S.date}),d.jsxs("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:[S.game?.awayTeam," @ ",S.game?.homeTeam]}),d.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:S.bet?.pick}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[S.bet?.odds>0?"+":"",S.bet?.odds]}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[S.prediction?.evPercent?.toFixed(1),"%"]}),d.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:d.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",background:S.prediction?.rating==="A+"?"rgba(16, 185, 129, 0.2)":S.prediction?.rating==="A"?"rgba(5, 150, 105, 0.2)":S.prediction?.rating==="B+"?"rgba(14, 165, 233, 0.2)":"rgba(139, 92, 246, 0.2)",color:S.prediction?.rating==="A+"?"#10B981":S.prediction?.rating==="A"?"#059669":S.prediction?.rating==="B+"?"#0EA5E9":"#8B5CF6"},children:S.prediction?.rating})}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:[S.result?.awayScore," - ",S.result?.homeScore]}),d.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:d.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",background:S.result?.outcome==="WIN"?"rgba(16, 185, 129, 0.2)":S.result?.outcome==="LOSS"?"rgba(239, 68, 68, 0.2)":"rgba(100, 116, 139, 0.2)",color:S.result?.outcome==="WIN"?"#10B981":S.result?.outcome==="LOSS"?"#EF4444":"#64748B"},children:S.result?.outcome})}),d.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:S.result?.profit>0?"#10B981":S.result?.profit<0?"#EF4444":"#64748B"},children:[S.result?.profit>0?"+":"",S.result?.profit?.toFixed(2),"u"]})]},b))})]})})]})]})}const cD=()=>{const[s,e]=ce.useState(!1);return ce.useEffect(()=>{const n=()=>{e(window.innerWidth<=640)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),d.jsxs("div",{style:{backgroundColor:"var(--color-background)",minHeight:"100vh"},children:[d.jsx("div",{style:{padding:s?"2rem 1rem 1rem":"3rem 2rem 2rem",borderBottom:"1px solid var(--color-border)"},children:d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[d.jsx("h1",{style:{marginBottom:"0.5rem",fontSize:s?"1.5rem":"2rem"},children:"📚 Methodology"}),d.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:s?"0.875rem":"0.938rem",lineHeight:"1.6"},children:"Mathematical foundations and betting strategies behind NHL Savant analytics. All formulas are transparent, verifiable, and backed by real data."})]})}),d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:s?"1rem":"2rem"},children:[d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(Mu,{size:s?18:20}),"Expected Goals (xG) Analysis"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is xG?"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Expected Goals (xG) is a statistical metric that measures the quality of scoring chances. Each shot is assigned a probability of becoming a goal based on historical data, considering factors like shot location, type, and game situation."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Per-60 Normalization"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:"To compare teams fairly, we normalize all metrics to a 60-minute rate:"}),d.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:s?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.75rem":"1rem",color:"var(--color-accent)",overflowX:"auto"},children:"xG per 60 = (xGoals / Ice Time in seconds) × 3600"})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Why xG Matters for Betting"}),d.jsxs("ul",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.8",paddingLeft:s?"1.25rem":"1.5rem"},children:[d.jsx("li",{children:"Reveals true team quality beyond results influenced by luck"}),d.jsx("li",{children:"Identifies teams with strong underlying metrics but poor record (value bets)"}),d.jsx("li",{children:"Predicts future performance more accurately than goals scored"}),d.jsx("li",{children:"Situational xG (5v5, PP, PK) exposes specific strengths and weaknesses"})]})]})]}),d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(XS,{size:s?18:20}),"PDO & Regression Theory"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"PDO Calculation"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:'PDO measures "puck luck" by combining shooting percentage and save percentage:'}),d.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:s?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.75rem":"1rem",color:"var(--color-accent)",overflowX:"auto"},children:"PDO = (Goals For / Shots For) × 100 + (1 - Goals Against / Shots Against) × 100"})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Regression to the Mean"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Over time, PDO regresses toward 100.0 (league average). Teams with PDO significantly above or below 100 are experiencing unsustainable luck and will likely regress."})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Betting Applications"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:s?"0.75rem":"1rem"},children:[d.jsxs("div",{style:{padding:s?"0.875rem":"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:"4px"},children:[d.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--color-danger)",fontSize:s?"0.938rem":"1rem"},children:"PDO > 102"}),d.jsx("div",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:"Overperforming due to luck. Bet UNDER or AGAINST."})]}),d.jsxs("div",{style:{padding:s?"0.875rem":"1rem",backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--color-success)",borderRadius:"4px"},children:[d.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--color-success)",fontSize:s?"0.938rem":"1rem"},children:"PDO < 98"}),d.jsx("div",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:"Underperforming due to bad luck. Bet OVER or WITH."})]})]})]})]}),d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(Mu,{size:s?18:20}),"Expected Value (EV) Calculation"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is EV?"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Expected Value (EV) measures the average amount you can expect to win or lose per bet over the long term. A positive EV indicates a profitable bet over time, while negative EV indicates a losing bet."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Formula"}),d.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:s?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.75rem":"1rem",color:"var(--color-accent)",marginBottom:"1rem",overflowX:"auto"},children:"EV = (P_model × Total Return) - Stake"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Where P_model is your model's win probability, Total Return is your stake plus winnings, and Stake is your bet amount."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Example"}),d.jsxs("div",{className:"methodology-example",style:{backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.875rem":"1rem"},children:[d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:[d.jsx("strong",{children:"Scenario:"})," Our model gives Team A a 55% win probability, but the market odds are +150 (implied 40% probability)."]}),d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:[d.jsx("strong",{children:"Calculation:"})," On a $100 bet at +150 odds, total return is $250 ($100 stake + $150 winnings)."]}),d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:["EV = (0.55 × $250) - $100 = $137.50 - $100 = ",d.jsx("strong",{style:{color:"var(--color-success)"},children:"+$37.50"})]}),d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-success)",lineHeight:"1.6"},children:[d.jsx("strong",{children:"Result:"})," This is a +37.5% EV bet — excellent value!"]})]})]}),d.jsx("div",{style:{backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--color-success)",borderRadius:"4px",padding:s?"0.875rem":"1rem"},children:d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:[d.jsx("strong",{style:{color:"var(--color-success)"},children:"Betting Rule:"})," Only bet when EV > 0. The higher the EV percentage, the better the opportunity."]})})]}),d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(Mu,{size:s?18:20}),"Kelly Criterion (Stake Sizing)"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"What is Kelly?"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"The Kelly Criterion is a formula for determining the optimal bet size to maximize long-term growth while minimizing risk of ruin. It calculates what percentage of your bankroll to wager on a positive EV bet."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Formula"}),d.jsx("div",{className:"methodology-example",style:{fontFamily:"Monaco, Consolas, monospace",fontSize:s?"0.75rem":"0.813rem",backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.75rem":"1rem",color:"var(--color-accent)",marginBottom:"0.5rem",overflowX:"auto"},children:"f* = (bp - q) / b"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:"Where:"}),d.jsxs("ul",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",paddingLeft:s?"1.25rem":"1.5rem"},children:[d.jsxs("li",{children:[d.jsx("code",{children:"b"})," = decimal odds - 1 (e.g., +150 → 1.5)"]}),d.jsxs("li",{children:[d.jsx("code",{children:"p"})," = your model's win probability"]}),d.jsxs("li",{children:[d.jsx("code",{children:"q"})," = 1 - p (loss probability)"]})]})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Fractional Kelly (Recommended)"}),d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",marginBottom:"0.75rem"},children:["Full Kelly can be aggressive and lead to large swings. We recommend ",d.jsx("strong",{children:"25% Kelly"})," (Quarter Kelly) for more conservative, sustainable bankroll growth."]}),d.jsx("div",{className:"methodology-example",style:{backgroundColor:"var(--color-card)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:s?"0.875rem":"1rem"},children:d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[d.jsx("strong",{children:"Example:"})," If Kelly suggests 8% of bankroll, we recommend betting 2% (8% × 0.25). On a $1,000 bankroll, that's $20 instead of $80."]})})]}),d.jsx("div",{style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:"4px",padding:s?"0.875rem":"1rem"},children:d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)"},children:[d.jsx("strong",{style:{color:"var(--color-danger)"},children:"Risk Management:"})," Never bet more than 5% of your bankroll on a single game, even if Kelly suggests higher. This protects against model errors and variance."]})})]}),d.jsxs("div",{className:"elevated-card methodology-section",style:{marginBottom:s?"1.5rem":"2rem"},children:[d.jsxs("h2",{style:{marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:s?"1.125rem":"1.25rem"},children:[d.jsx(Mu,{size:s?18:20}),"Game Total Prediction Model"]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"How We Predict Game Totals"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"Our model uses score-adjusted expected goals (xG), applies PDO regression, and weights both teams' offense and defense (55% offense / 45% defense) to predict individual team scores and total goals."})]}),d.jsxs("div",{style:{marginBottom:s?"1rem":"1.5rem"},children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Key Components"}),d.jsxs("ul",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6",paddingLeft:s?"1.25rem":"1.5rem"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Score-Adjusted xG:"})," Removes bias from teams protecting leads or chasing deficits"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"PDO Regression:"})," Adjusts for unsustainable luck (high/low shooting % or save %)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"5v5 Weight:"})," 77% of game time (46.2 minutes)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"PP/PK Weight:"})," 23% of game time (13.8 minutes)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Home Ice:"})," +5% win probability boost"]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:s?"0.938rem":"1rem",marginBottom:"0.75rem",fontWeight:"600"},children:"Win Probability"}),d.jsx("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:"We use a logistic regression model that accounts for xG differential, PDO regression, and home-ice advantage to estimate moneyline win probabilities. This S-curve approach reflects real-world probabilities better than linear models."})]})]}),d.jsx("div",{style:{padding:s?"0.875rem":"1rem",backgroundColor:"rgba(212, 175, 55, 0.05)",border:"1px solid var(--color-accent)",borderRadius:"4px"},children:d.jsxs("p",{style:{fontSize:s?"0.875rem":"0.938rem",color:"var(--color-text-secondary)",lineHeight:"1.6"},children:[d.jsx("strong",{style:{color:"var(--color-accent)"},children:"Verify the Math:"})," All calculations are performed in"," ",d.jsx("code",{style:{fontFamily:"Monaco, Consolas, monospace",backgroundColor:"var(--color-card)",padding:"0.125rem 0.25rem",borderRadius:"2px",fontSize:s?"0.75rem":"0.813rem"},children:"src/utils/dataProcessing.js"})," ","and"," ",d.jsx("code",{style:{fontFamily:"Monaco, Consolas, monospace",backgroundColor:"var(--color-card)",padding:"0.125rem 0.25rem",borderRadius:"2px",fontSize:s?"0.75rem":"0.813rem"},children:"src/utils/edgeCalculator.js"}),". ","Every metric displayed uses real CSV data with transparent, verifiable calculations. Audit them in the Data Inspector page."]})})]})]})},uD=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-nhl-gold mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Loading NHL Data"}),d.jsx("p",{className:"text-gray-400",children:"Processing advanced statistics..."})]})});class hD extends lS.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?d.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md text-center",children:[d.jsx(hE,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),d.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-gray-400 mb-4",children:"An unexpected error occurred. Please refresh the page."}),!1,d.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-yellow-400 text-gray-900 font-bold rounded hover:bg-yellow-300 transition",children:"Refresh Page"})]})}):this.props.children}}function dD(){const[s,e]=ce.useState(null),[n,r]=ce.useState(null),[o,c]=ce.useState(null),[h,g]=ce.useState(null),[p,v]=ce.useState(null),[T,S]=ce.useState(null),[b,w]=ce.useState(null),[z,V]=ce.useState(!0),[F,Y]=ce.useState(null);return ce.useEffect(()=>{(async()=>{try{V(!0),console.log("📅 Loading schedule data for B2B adjustments...");let ee=null;try{const N=await fetch("/nhl-202526-asplayed.csv").then(C=>C.text());$m.parse(N,{header:!0,skipEmptyLines:!0,complete:C=>{C.data&&C.data.length>0&&(ee=new wS(C.data),console.log(`✅ Loaded ${Object.keys(ee.gamesByTeam).length} teams into schedule helper`),w(ee))},error:C=>{console.warn("⚠️ Schedule file not found, B2B adjustments disabled:",C.message)}})}catch(N){console.warn("⚠️ Could not load schedule data:",N.message)}console.log("🏒 Loading team data...");const ne=await bS(ee);e(ne),console.log("🥅 Loading goalie stats from CSV...");const re=await SS();c(re),console.log("📊 Initializing advanced stats analyzer...");const ye=new IS(ne);v(ye),console.log("🎯 Initializing edge factor calculator...");const P=new CS(ye);S(P),Y(null),console.log("💰 Loading odds data...");const E=await ES();if(E&&E.moneyText&&E.totalText){const N=Z1(E.moneyText,E.totalText);E.todaysGames=RS(N),console.log(`📋 Extracted ${E.todaysGames.length} games for admin`)}console.log("🥅 Loading starting goalie selections...");const D=await TS();g(D),r(E),console.log("✅ All data loaded successfully")}catch(ee){console.error("Failed to load NHL data:",ee),Y("Failed to load NHL data. Please check if teams.csv is available.")}finally{V(!1)}})()},[]),z?d.jsx(uD,{}):F?d.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Error Loading Data"}),d.jsx("p",{className:"text-gray-300 mb-6",children:F}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-yellow-400 text-gray-900 font-bold rounded hover:bg-yellow-300 transition",children:"Retry"})]})}):s?d.jsx(hD,{children:d.jsx(cS,{children:d.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"var(--color-background)"},children:[d.jsx(yE,{}),d.jsx("main",{children:d.jsxs(uS,{children:[d.jsx(wl,{path:"/",element:d.jsx(oD,{dataProcessor:s,oddsData:n,startingGoalies:h,goalieData:o,statsAnalyzer:p,edgeFactorCalc:T})}),d.jsx(wl,{path:"/dashboard",element:d.jsx(_E,{dataProcessor:s,loading:z,error:F})}),d.jsx(wl,{path:"/methodology",element:d.jsx(cD,{})}),d.jsx(wl,{path:"/inspector",element:d.jsx(xE,{dataProcessor:s})}),d.jsx(wl,{path:"/performance",element:d.jsx(lD,{})})]})})]})})}):d.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:d.jsx("div",{className:"text-center",children:d.jsx("h1",{className:"text-2xl font-bold text-gray-300",children:"No Data Available"})})})}vS.createRoot(document.getElementById("root")).render(d.jsx(ce.StrictMode,{children:d.jsx(dD,{})}));
