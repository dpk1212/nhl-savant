rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Live scores - public read, function write only
    match /live_scores/{document} {
      allow read: if true;  // Anyone can read live scores
      allow write: if false;  // Only Cloud Functions can write
    }
    
    // Bet tracking - public read/write (for now)
    match /bets/{document=**} {
      allow read, write: if true;
    }
    
    // Perplexity AI cache - Public read/write for GitHub Action
    // Client code cannot write (removed from client), only reads cache
    // GitHub Action needs write access to store analysis for all users
    match /perplexityCache/{document=**} {
      allow read: if true;   // Client can read cached content
      allow write: if true;  // Allow GitHub Action to cache analysis
    }
    
    // API Secrets - public read only (keys stored here)
    match /Secrets/{document=**} {
      allow read: if true;  // Client needs to read API keys
      allow write: if false;  // No writes from client
    }
  }
}

